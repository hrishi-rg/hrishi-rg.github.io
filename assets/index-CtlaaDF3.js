function RV(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var uce=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function om(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function zY(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var z0={exports:{}},XC={},D0={exports:{}},_n={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KG;function DY(){if(KG)return _n;KG=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),C=Symbol.iterator;function f(O){return O===null||typeof O!="object"?null:(O=C&&O[C]||O["@@iterator"],typeof O=="function"?O:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,p={};function y(O,X,D){this.props=O,this.context=X,this.refs=p,this.updater=D||m}y.prototype.isReactComponent={},y.prototype.setState=function(O,X){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,X,"setState")},y.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function S(){}S.prototype=y.prototype;function v(O,X,D){this.props=O,this.context=X,this.refs=p,this.updater=D||m}var B=v.prototype=new S;B.constructor=v,b(B,y.prototype),B.isPureReactComponent=!0;var W=Array.isArray,J=Object.prototype.hasOwnProperty,H={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function E(O,X,D){var z,Q={},ne=null,ce=null;if(X!=null)for(z in X.ref!==void 0&&(ce=X.ref),X.key!==void 0&&(ne=""+X.key),X)J.call(X,z)&&!x.hasOwnProperty(z)&&(Q[z]=X[z]);var se=arguments.length-2;if(se===1)Q.children=D;else if(1<se){for(var ue=Array(se),ve=0;ve<se;ve++)ue[ve]=arguments[ve+2];Q.children=ue}if(O&&O.defaultProps)for(z in se=O.defaultProps,se)Q[z]===void 0&&(Q[z]=se[z]);return{$$typeof:e,type:O,key:ne,ref:ce,props:Q,_owner:H.current}}function F(O,X){return{$$typeof:e,type:O.type,key:X,ref:O.ref,props:O.props,_owner:O._owner}}function w(O){return typeof O=="object"&&O!==null&&O.$$typeof===e}function V(O){var X={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(D){return X[D]})}var Y=/\/+/g;function M(O,X){return typeof O=="object"&&O!==null&&O.key!=null?V(""+O.key):X.toString(36)}function L(O,X,D,z,Q){var ne=typeof O;(ne==="undefined"||ne==="boolean")&&(O=null);var ce=!1;if(O===null)ce=!0;else switch(ne){case"string":case"number":ce=!0;break;case"object":switch(O.$$typeof){case e:case t:ce=!0}}if(ce)return ce=O,Q=Q(ce),O=z===""?"."+M(ce,0):z,W(Q)?(D="",O!=null&&(D=O.replace(Y,"$&/")+"/"),L(Q,X,D,"",function(ve){return ve})):Q!=null&&(w(Q)&&(Q=F(Q,D+(!Q.key||ce&&ce.key===Q.key?"":(""+Q.key).replace(Y,"$&/")+"/")+O)),X.push(Q)),1;if(ce=0,z=z===""?".":z+":",W(O))for(var se=0;se<O.length;se++){ne=O[se];var ue=z+M(ne,se);ce+=L(ne,X,D,ue,Q)}else if(ue=f(O),typeof ue=="function")for(O=ue.call(O),se=0;!(ne=O.next()).done;)ne=ne.value,ue=z+M(ne,se++),ce+=L(ne,X,D,ue,Q);else if(ne==="object")throw X=String(O),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.");return ce}function $(O,X,D){if(O==null)return O;var z=[],Q=0;return L(O,z,"","",function(ne){return X.call(D,ne,Q++)}),z}function U(O){if(O._status===-1){var X=O._result;X=X(),X.then(function(D){(O._status===0||O._status===-1)&&(O._status=1,O._result=D)},function(D){(O._status===0||O._status===-1)&&(O._status=2,O._result=D)}),O._status===-1&&(O._status=0,O._result=X)}if(O._status===1)return O._result.default;throw O._result}var _={current:null},P={transition:null},ee={ReactCurrentDispatcher:_,ReactCurrentBatchConfig:P,ReactCurrentOwner:H};function j(){throw Error("act(...) is not supported in production builds of React.")}return _n.Children={map:$,forEach:function(O,X,D){$(O,function(){X.apply(this,arguments)},D)},count:function(O){var X=0;return $(O,function(){X++}),X},toArray:function(O){return $(O,function(X){return X})||[]},only:function(O){if(!w(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},_n.Component=y,_n.Fragment=n,_n.Profiler=i,_n.PureComponent=v,_n.StrictMode=r,_n.Suspense=g,_n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,_n.act=j,_n.cloneElement=function(O,X,D){if(O==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+O+".");var z=b({},O.props),Q=O.key,ne=O.ref,ce=O._owner;if(X!=null){if(X.ref!==void 0&&(ne=X.ref,ce=H.current),X.key!==void 0&&(Q=""+X.key),O.type&&O.type.defaultProps)var se=O.type.defaultProps;for(ue in X)J.call(X,ue)&&!x.hasOwnProperty(ue)&&(z[ue]=X[ue]===void 0&&se!==void 0?se[ue]:X[ue])}var ue=arguments.length-2;if(ue===1)z.children=D;else if(1<ue){se=Array(ue);for(var ve=0;ve<ue;ve++)se[ve]=arguments[ve+2];z.children=se}return{$$typeof:e,type:O.type,key:Q,ref:ne,props:z,_owner:ce}},_n.createContext=function(O){return O={$$typeof:a,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},O.Provider={$$typeof:o,_context:O},O.Consumer=O},_n.createElement=E,_n.createFactory=function(O){var X=E.bind(null,O);return X.type=O,X},_n.createRef=function(){return{current:null}},_n.forwardRef=function(O){return{$$typeof:l,render:O}},_n.isValidElement=w,_n.lazy=function(O){return{$$typeof:d,_payload:{_status:-1,_result:O},_init:U}},_n.memo=function(O,X){return{$$typeof:u,type:O,compare:X===void 0?null:X}},_n.startTransition=function(O){var X=P.transition;P.transition={};try{O()}finally{P.transition=X}},_n.unstable_act=j,_n.useCallback=function(O,X){return _.current.useCallback(O,X)},_n.useContext=function(O){return _.current.useContext(O)},_n.useDebugValue=function(){},_n.useDeferredValue=function(O){return _.current.useDeferredValue(O)},_n.useEffect=function(O,X){return _.current.useEffect(O,X)},_n.useId=function(){return _.current.useId()},_n.useImperativeHandle=function(O,X,D){return _.current.useImperativeHandle(O,X,D)},_n.useInsertionEffect=function(O,X){return _.current.useInsertionEffect(O,X)},_n.useLayoutEffect=function(O,X){return _.current.useLayoutEffect(O,X)},_n.useMemo=function(O,X){return _.current.useMemo(O,X)},_n.useReducer=function(O,X,D){return _.current.useReducer(O,X,D)},_n.useRef=function(O){return _.current.useRef(O)},_n.useState=function(O){return _.current.useState(O)},_n.useSyncExternalStore=function(O,X,D){return _.current.useSyncExternalStore(O,X,D)},_n.useTransition=function(){return _.current.useTransition()},_n.version="18.3.1",_n}var LG;function tu(){return LG||(LG=1,D0.exports=DY()),D0.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MG;function PY(){if(MG)return XC;MG=1;var e=tu(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function a(l,g,u){var d,C={},f=null,m=null;u!==void 0&&(f=""+u),g.key!==void 0&&(f=""+g.key),g.ref!==void 0&&(m=g.ref);for(d in g)r.call(g,d)&&!o.hasOwnProperty(d)&&(C[d]=g[d]);if(l&&l.defaultProps)for(d in g=l.defaultProps,g)C[d]===void 0&&(C[d]=g[d]);return{$$typeof:t,type:l,key:f,ref:m,props:C,_owner:i.current}}return XC.Fragment=n,XC.jsx=a,XC.jsxs=a,XC}var TG;function OY(){return TG||(TG=1,z0.exports=PY()),z0.exports}var ye=OY(),I=tu();const Ge=om(I),RI=RV({__proto__:null,default:Ge},[I]);var Ah={},P0={exports:{}},wa={},O0={exports:{}},_0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zG;function _Y(){return zG||(zG=1,function(e){function t(P,ee){var j=P.length;P.push(ee);e:for(;0<j;){var O=j-1>>>1,X=P[O];if(0<i(X,ee))P[O]=ee,P[j]=X,j=O;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var ee=P[0],j=P.pop();if(j!==ee){P[0]=j;e:for(var O=0,X=P.length,D=X>>>1;O<D;){var z=2*(O+1)-1,Q=P[z],ne=z+1,ce=P[ne];if(0>i(Q,j))ne<X&&0>i(ce,Q)?(P[O]=ce,P[ne]=j,O=ne):(P[O]=Q,P[z]=j,O=z);else if(ne<X&&0>i(ce,j))P[O]=ce,P[ne]=j,O=ne;else break e}}return ee}function i(P,ee){var j=P.sortIndex-ee.sortIndex;return j!==0?j:P.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var g=[],u=[],d=1,C=null,f=3,m=!1,b=!1,p=!1,y=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(P){for(var ee=n(u);ee!==null;){if(ee.callback===null)r(u);else if(ee.startTime<=P)r(u),ee.sortIndex=ee.expirationTime,t(g,ee);else break;ee=n(u)}}function W(P){if(p=!1,B(P),!b)if(n(g)!==null)b=!0,U(J);else{var ee=n(u);ee!==null&&_(W,ee.startTime-P)}}function J(P,ee){b=!1,p&&(p=!1,S(E),E=-1),m=!0;var j=f;try{for(B(ee),C=n(g);C!==null&&(!(C.expirationTime>ee)||P&&!V());){var O=C.callback;if(typeof O=="function"){C.callback=null,f=C.priorityLevel;var X=O(C.expirationTime<=ee);ee=e.unstable_now(),typeof X=="function"?C.callback=X:C===n(g)&&r(g),B(ee)}else r(g);C=n(g)}if(C!==null)var D=!0;else{var z=n(u);z!==null&&_(W,z.startTime-ee),D=!1}return D}finally{C=null,f=j,m=!1}}var H=!1,x=null,E=-1,F=5,w=-1;function V(){return!(e.unstable_now()-w<F)}function Y(){if(x!==null){var P=e.unstable_now();w=P;var ee=!0;try{ee=x(!0,P)}finally{ee?M():(H=!1,x=null)}}else H=!1}var M;if(typeof v=="function")M=function(){v(Y)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,$=L.port2;L.port1.onmessage=Y,M=function(){$.postMessage(null)}}else M=function(){y(Y,0)};function U(P){x=P,H||(H=!0,M())}function _(P,ee){E=y(function(){P(e.unstable_now())},ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){b||m||(b=!0,U(J))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(g)},e.unstable_next=function(P){switch(f){case 1:case 2:case 3:var ee=3;break;default:ee=f}var j=f;f=ee;try{return P()}finally{f=j}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,ee){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var j=f;f=P;try{return ee()}finally{f=j}},e.unstable_scheduleCallback=function(P,ee,j){var O=e.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?O+j:O):j=O,P){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=j+X,P={id:d++,callback:ee,priorityLevel:P,startTime:j,expirationTime:X,sortIndex:-1},j>O?(P.sortIndex=j,t(u,P),n(g)===null&&P===n(u)&&(p?(S(E),E=-1):p=!0,_(W,j-O))):(P.sortIndex=X,t(g,P),b||m||(b=!0,U(J))),P},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(P){var ee=f;return function(){var j=f;f=ee;try{return P.apply(this,arguments)}finally{f=j}}}}(_0)),_0}var DG;function UY(){return DG||(DG=1,O0.exports=_Y()),O0.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PG;function jY(){if(PG)return wa;PG=1;var e=tu(),t=UY();function n(s){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+s,h=1;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+s+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(s,c){a(s,c),a(s+"Capture",c)}function a(s,c){for(i[s]=c,s=0;s<c.length;s++)r.add(c[s])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},C={};function f(s){return g.call(C,s)?!0:g.call(d,s)?!1:u.test(s)?C[s]=!0:(d[s]=!0,!1)}function m(s,c,h,Z){if(h!==null&&h.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return Z?!1:h!==null?!h.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function b(s,c,h,Z){if(c===null||typeof c>"u"||m(s,c,h,Z))return!0;if(Z)return!1;if(h!==null)switch(h.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function p(s,c,h,Z,k,K,ie){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=Z,this.attributeNamespace=k,this.mustUseProperty=h,this.propertyName=s,this.type=c,this.sanitizeURL=K,this.removeEmptyString=ie}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){y[s]=new p(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var c=s[0];y[c]=new p(c,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){y[s]=new p(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){y[s]=new p(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){y[s]=new p(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){y[s]=new p(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){y[s]=new p(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){y[s]=new p(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){y[s]=new p(s,5,!1,s.toLowerCase(),null,!1,!1)});var S=/[\-:]([a-z])/g;function v(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var c=s.replace(S,v);y[c]=new p(c,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var c=s.replace(S,v);y[c]=new p(c,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var c=s.replace(S,v);y[c]=new p(c,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){y[s]=new p(s,1,!1,s.toLowerCase(),null,!1,!1)}),y.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){y[s]=new p(s,1,!1,s.toLowerCase(),null,!0,!0)});function B(s,c,h,Z){var k=y.hasOwnProperty(c)?y[c]:null;(k!==null?k.type!==0:Z||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(b(c,h,k,Z)&&(h=null),Z||k===null?f(c)&&(h===null?s.removeAttribute(c):s.setAttribute(c,""+h)):k.mustUseProperty?s[k.propertyName]=h===null?k.type===3?!1:"":h:(c=k.attributeName,Z=k.attributeNamespace,h===null?s.removeAttribute(c):(k=k.type,h=k===3||k===4&&h===!0?"":""+h,Z?s.setAttributeNS(Z,c,h):s.setAttribute(c,h))))}var W=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,J=Symbol.for("react.element"),H=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),V=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),U=Symbol.for("react.lazy"),_=Symbol.for("react.offscreen"),P=Symbol.iterator;function ee(s){return s===null||typeof s!="object"?null:(s=P&&s[P]||s["@@iterator"],typeof s=="function"?s:null)}var j=Object.assign,O;function X(s){if(O===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);O=c&&c[1]||""}return`
`+O+s}var D=!1;function z(s,c){if(!s||D)return"";D=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(Ue){var Z=Ue}Reflect.construct(s,[],c)}else{try{c.call()}catch(Ue){Z=Ue}s.call(c.prototype)}else{try{throw Error()}catch(Ue){Z=Ue}s()}}catch(Ue){if(Ue&&Z&&typeof Ue.stack=="string"){for(var k=Ue.stack.split(`
`),K=Z.stack.split(`
`),ie=k.length-1,pe=K.length-1;1<=ie&&0<=pe&&k[ie]!==K[pe];)pe--;for(;1<=ie&&0<=pe;ie--,pe--)if(k[ie]!==K[pe]){if(ie!==1||pe!==1)do if(ie--,pe--,0>pe||k[ie]!==K[pe]){var Be=`
`+k[ie].replace(" at new "," at ");return s.displayName&&Be.includes("<anonymous>")&&(Be=Be.replace("<anonymous>",s.displayName)),Be}while(1<=ie&&0<=pe);break}}}finally{D=!1,Error.prepareStackTrace=h}return(s=s?s.displayName||s.name:"")?X(s):""}function Q(s){switch(s.tag){case 5:return X(s.type);case 16:return X("Lazy");case 13:return X("Suspense");case 19:return X("SuspenseList");case 0:case 2:case 15:return s=z(s.type,!1),s;case 11:return s=z(s.type.render,!1),s;case 1:return s=z(s.type,!0),s;default:return""}}function ne(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case x:return"Fragment";case H:return"Portal";case F:return"Profiler";case E:return"StrictMode";case M:return"Suspense";case L:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case V:return(s.displayName||"Context")+".Consumer";case w:return(s._context.displayName||"Context")+".Provider";case Y:var c=s.render;return s=s.displayName,s||(s=c.displayName||c.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case $:return c=s.displayName||null,c!==null?c:ne(s.type)||"Memo";case U:c=s._payload,s=s._init;try{return ne(s(c))}catch{}}return null}function ce(s){var c=s.type;switch(s.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=c.render,s=s.displayName||s.name||"",c.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ne(c);case 8:return c===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function se(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ue(s){var c=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function ve(s){var c=ue(s)?"checked":"value",h=Object.getOwnPropertyDescriptor(s.constructor.prototype,c),Z=""+s[c];if(!s.hasOwnProperty(c)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var k=h.get,K=h.set;return Object.defineProperty(s,c,{configurable:!0,get:function(){return k.call(this)},set:function(ie){Z=""+ie,K.call(this,ie)}}),Object.defineProperty(s,c,{enumerable:h.enumerable}),{getValue:function(){return Z},setValue:function(ie){Z=""+ie},stopTracking:function(){s._valueTracker=null,delete s[c]}}}}function Ae(s){s._valueTracker||(s._valueTracker=ve(s))}function be(s){if(!s)return!1;var c=s._valueTracker;if(!c)return!0;var h=c.getValue(),Z="";return s&&(Z=ue(s)?s.checked?"true":"false":s.value),s=Z,s!==h?(c.setValue(s),!0):!1}function me(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Ne(s,c){var h=c.checked;return j({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??s._wrapperState.initialChecked})}function Ie(s,c){var h=c.defaultValue==null?"":c.defaultValue,Z=c.checked!=null?c.checked:c.defaultChecked;h=se(c.value!=null?c.value:h),s._wrapperState={initialChecked:Z,initialValue:h,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function ae(s,c){c=c.checked,c!=null&&B(s,"checked",c,!1)}function Ee(s,c){ae(s,c);var h=se(c.value),Z=c.type;if(h!=null)Z==="number"?(h===0&&s.value===""||s.value!=h)&&(s.value=""+h):s.value!==""+h&&(s.value=""+h);else if(Z==="submit"||Z==="reset"){s.removeAttribute("value");return}c.hasOwnProperty("value")?ke(s,c.type,h):c.hasOwnProperty("defaultValue")&&ke(s,c.type,se(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(s.defaultChecked=!!c.defaultChecked)}function Fe(s,c,h){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var Z=c.type;if(!(Z!=="submit"&&Z!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+s._wrapperState.initialValue,h||c===s.value||(s.value=c),s.defaultValue=c}h=s.name,h!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,h!==""&&(s.name=h)}function ke(s,c,h){(c!=="number"||me(s.ownerDocument)!==s)&&(h==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+h&&(s.defaultValue=""+h))}var ze=Array.isArray;function He(s,c,h,Z){if(s=s.options,c){c={};for(var k=0;k<h.length;k++)c["$"+h[k]]=!0;for(h=0;h<s.length;h++)k=c.hasOwnProperty("$"+s[h].value),s[h].selected!==k&&(s[h].selected=k),k&&Z&&(s[h].defaultSelected=!0)}else{for(h=""+se(h),c=null,k=0;k<s.length;k++){if(s[k].value===h){s[k].selected=!0,Z&&(s[k].defaultSelected=!0);return}c!==null||s[k].disabled||(c=s[k])}c!==null&&(c.selected=!0)}}function Le(s,c){if(c.dangerouslySetInnerHTML!=null)throw Error(n(91));return j({},c,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Ye(s,c){var h=c.value;if(h==null){if(h=c.children,c=c.defaultValue,h!=null){if(c!=null)throw Error(n(92));if(ze(h)){if(1<h.length)throw Error(n(93));h=h[0]}c=h}c==null&&(c=""),h=c}s._wrapperState={initialValue:se(h)}}function Pe(s,c){var h=se(c.value),Z=se(c.defaultValue);h!=null&&(h=""+h,h!==s.value&&(s.value=h),c.defaultValue==null&&s.defaultValue!==h&&(s.defaultValue=h)),Z!=null&&(s.defaultValue=""+Z)}function $e(s){var c=s.textContent;c===s._wrapperState.initialValue&&c!==""&&c!==null&&(s.value=c)}function ot(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ct(s,c){return s==null||s==="http://www.w3.org/1999/xhtml"?ot(c):s==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var pt,it=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,h,Z,k){MSApp.execUnsafeLocalFunction(function(){return s(c,h,Z,k)})}:s}(function(s,c){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=c;else{for(pt=pt||document.createElement("div"),pt.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=pt.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;c.firstChild;)s.appendChild(c.firstChild)}});function It(s,c){if(c){var h=s.firstChild;if(h&&h===s.lastChild&&h.nodeType===3){h.nodeValue=c;return}}s.textContent=c}var _e={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ot=["Webkit","ms","Moz","O"];Object.keys(_e).forEach(function(s){Ot.forEach(function(c){c=c+s.charAt(0).toUpperCase()+s.substring(1),_e[c]=_e[s]})});function Qe(s,c,h){return c==null||typeof c=="boolean"||c===""?"":h||typeof c!="number"||c===0||_e.hasOwnProperty(s)&&_e[s]?(""+c).trim():c+"px"}function st(s,c){s=s.style;for(var h in c)if(c.hasOwnProperty(h)){var Z=h.indexOf("--")===0,k=Qe(h,c[h],Z);h==="float"&&(h="cssFloat"),Z?s.setProperty(h,k):s[h]=k}}var St=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dt(s,c){if(c){if(St[s]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(n(137,s));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(n(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(n(61))}if(c.style!=null&&typeof c.style!="object")throw Error(n(62))}}function Wt(s,c){if(s.indexOf("-")===-1)return typeof c.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Et=null;function hn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var mn=null,Xn=null,Mn=null;function In(s){if(s=cc(s)){if(typeof mn!="function")throw Error(n(280));var c=s.stateNode;c&&(c=Zu(c),mn(s.stateNode,s.type,c))}}function Jt(s){Xn?Mn?Mn.push(s):Mn=[s]:Xn=s}function jt(){if(Xn){var s=Xn,c=Mn;if(Mn=Xn=null,In(s),c)for(s=0;s<c.length;s++)In(c[s])}}function ln(s,c){return s(c)}function Vt(){}var Rt=!1;function yt(s,c,h){if(Rt)return s(c,h);Rt=!0;try{return ln(s,c,h)}finally{Rt=!1,(Xn!==null||Mn!==null)&&(Vt(),jt())}}function ht(s,c){var h=s.stateNode;if(h===null)return null;var Z=Zu(h);if(Z===null)return null;h=Z[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(Z=!Z.disabled)||(s=s.type,Z=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!Z;break e;default:s=!1}if(s)return null;if(h&&typeof h!="function")throw Error(n(231,c,typeof h));return h}var sn=!1;if(l)try{var ut={};Object.defineProperty(ut,"passive",{get:function(){sn=!0}}),window.addEventListener("test",ut,ut),window.removeEventListener("test",ut,ut)}catch{sn=!1}function ct(s,c,h,Z,k,K,ie,pe,Be){var Ue=Array.prototype.slice.call(arguments,3);try{c.apply(h,Ue)}catch(bt){this.onError(bt)}}var vt=!1,Bt=null,kt=!1,Tt=null,Jn={onError:function(s){vt=!0,Bt=s}};function cn(s,c,h,Z,k,K,ie,pe,Be){vt=!1,Bt=null,ct.apply(Jn,arguments)}function yn(s,c,h,Z,k,K,ie,pe,Be){if(cn.apply(this,arguments),vt){if(vt){var Ue=Bt;vt=!1,Bt=null}else throw Error(n(198));kt||(kt=!0,Tt=Ue)}}function qt(s){var c=s,h=s;if(s.alternate)for(;c.return;)c=c.return;else{s=c;do c=s,c.flags&4098&&(h=c.return),s=c.return;while(s)}return c.tag===3?h:null}function Vn(s){if(s.tag===13){var c=s.memoizedState;if(c===null&&(s=s.alternate,s!==null&&(c=s.memoizedState)),c!==null)return c.dehydrated}return null}function En(s){if(qt(s)!==s)throw Error(n(188))}function Dn(s){var c=s.alternate;if(!c){if(c=qt(s),c===null)throw Error(n(188));return c!==s?null:s}for(var h=s,Z=c;;){var k=h.return;if(k===null)break;var K=k.alternate;if(K===null){if(Z=k.return,Z!==null){h=Z;continue}break}if(k.child===K.child){for(K=k.child;K;){if(K===h)return En(k),s;if(K===Z)return En(k),c;K=K.sibling}throw Error(n(188))}if(h.return!==Z.return)h=k,Z=K;else{for(var ie=!1,pe=k.child;pe;){if(pe===h){ie=!0,h=k,Z=K;break}if(pe===Z){ie=!0,Z=k,h=K;break}pe=pe.sibling}if(!ie){for(pe=K.child;pe;){if(pe===h){ie=!0,h=K,Z=k;break}if(pe===Z){ie=!0,Z=K,h=k;break}pe=pe.sibling}if(!ie)throw Error(n(189))}}if(h.alternate!==Z)throw Error(n(190))}if(h.tag!==3)throw Error(n(188));return h.stateNode.current===h?s:c}function ar(s){return s=Dn(s),s!==null?Ln(s):null}function Ln(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var c=Ln(s);if(c!==null)return c;s=s.sibling}return null}var Pn=t.unstable_scheduleCallback,At=t.unstable_cancelCallback,Ht=t.unstable_shouldYield,Yt=t.unstable_requestPaint,at=t.unstable_now,Qt=t.unstable_getCurrentPriorityLevel,An=t.unstable_ImmediatePriority,Tn=t.unstable_UserBlockingPriority,tr=t.unstable_NormalPriority,Rr=t.unstable_LowPriority,Kt=t.unstable_IdlePriority,en=null,gn=null;function kr(s){if(gn&&typeof gn.onCommitFiberRoot=="function")try{gn.onCommitFiberRoot(en,s,void 0,(s.current.flags&128)===128)}catch{}}var Ar=Math.clz32?Math.clz32:Ao,Fn=Math.log,ri=Math.LN2;function Ao(s){return s>>>=0,s===0?32:31-(Fn(s)/ri|0)|0}var Ei=64,Ur=4194304;function to(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Gn(s,c){var h=s.pendingLanes;if(h===0)return 0;var Z=0,k=s.suspendedLanes,K=s.pingedLanes,ie=h&268435455;if(ie!==0){var pe=ie&~k;pe!==0?Z=to(pe):(K&=ie,K!==0&&(Z=to(K)))}else ie=h&~k,ie!==0?Z=to(ie):K!==0&&(Z=to(K));if(Z===0)return 0;if(c!==0&&c!==Z&&!(c&k)&&(k=Z&-Z,K=c&-c,k>=K||k===16&&(K&4194240)!==0))return c;if(Z&4&&(Z|=h&16),c=s.entangledLanes,c!==0)for(s=s.entanglements,c&=Z;0<c;)h=31-Ar(c),k=1<<h,Z|=s[h],c&=~k;return Z}function zt(s,c){switch(s){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nt(s,c){for(var h=s.suspendedLanes,Z=s.pingedLanes,k=s.expirationTimes,K=s.pendingLanes;0<K;){var ie=31-Ar(K),pe=1<<ie,Be=k[ie];Be===-1?(!(pe&h)||pe&Z)&&(k[ie]=zt(pe,c)):Be<=c&&(s.expiredLanes|=pe),K&=~pe}}function Kn(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function zn(){var s=Ei;return Ei<<=1,!(Ei&4194240)&&(Ei=64),s}function nr(s){for(var c=[],h=0;31>h;h++)c.push(s);return c}function rr(s,c,h){s.pendingLanes|=c,c!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,c=31-Ar(c),s[c]=h}function Bi(s,c){var h=s.pendingLanes&~c;s.pendingLanes=c,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=c,s.mutableReadLanes&=c,s.entangledLanes&=c,c=s.entanglements;var Z=s.eventTimes;for(s=s.expirationTimes;0<h;){var k=31-Ar(h),K=1<<k;c[k]=0,Z[k]=-1,s[k]=-1,h&=~K}}function Pr(s,c){var h=s.entangledLanes|=c;for(s=s.entanglements;h;){var Z=31-Ar(h),k=1<<Z;k&c|s[Z]&c&&(s[Z]|=c),h&=~k}}var Sn=0;function jr(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var di,Fi,Ii,Wo,Ci,$o=!1,Vo=[],sr=null,Ri=null,Oi=null,Cn=new Map,xa=new Map,ko=[],No="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _t(s,c){switch(s){case"focusin":case"focusout":sr=null;break;case"dragenter":case"dragleave":Ri=null;break;case"mouseover":case"mouseout":Oi=null;break;case"pointerover":case"pointerout":Cn.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":xa.delete(c.pointerId)}}function an(s,c,h,Z,k,K){return s===null||s.nativeEvent!==K?(s={blockedOn:c,domEventName:h,eventSystemFlags:Z,nativeEvent:K,targetContainers:[k]},c!==null&&(c=cc(c),c!==null&&Fi(c)),s):(s.eventSystemFlags|=Z,c=s.targetContainers,k!==null&&c.indexOf(k)===-1&&c.push(k),s)}function dr(s,c,h,Z,k){switch(c){case"focusin":return sr=an(sr,s,c,h,Z,k),!0;case"dragenter":return Ri=an(Ri,s,c,h,Z,k),!0;case"mouseover":return Oi=an(Oi,s,c,h,Z,k),!0;case"pointerover":var K=k.pointerId;return Cn.set(K,an(Cn.get(K)||null,s,c,h,Z,k)),!0;case"gotpointercapture":return K=k.pointerId,xa.set(K,an(xa.get(K)||null,s,c,h,Z,k)),!0}return!1}function Hr(s){var c=Ss(s.target);if(c!==null){var h=qt(c);if(h!==null){if(c=h.tag,c===13){if(c=Vn(h),c!==null){s.blockedOn=c,Ci(s.priority,function(){Ii(h)});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){s.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}s.blockedOn=null}function pr(s){if(s.blockedOn!==null)return!1;for(var c=s.targetContainers;0<c.length;){var h=zg(s.domEventName,s.eventSystemFlags,c[0],s.nativeEvent);if(h===null){h=s.nativeEvent;var Z=new h.constructor(h.type,h);Et=Z,h.target.dispatchEvent(Z),Et=null}else return c=cc(h),c!==null&&Fi(c),s.blockedOn=h,!1;c.shift()}return!0}function Zl(s,c,h){pr(s)&&h.delete(c)}function js(){$o=!1,sr!==null&&pr(sr)&&(sr=null),Ri!==null&&pr(Ri)&&(Ri=null),Oi!==null&&pr(Oi)&&(Oi=null),Cn.forEach(Zl),xa.forEach(Zl)}function fa(s,c){s.blockedOn===c&&(s.blockedOn=null,$o||($o=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,js)))}function no(s){function c(k){return fa(k,s)}if(0<Vo.length){fa(Vo[0],s);for(var h=1;h<Vo.length;h++){var Z=Vo[h];Z.blockedOn===s&&(Z.blockedOn=null)}}for(sr!==null&&fa(sr,s),Ri!==null&&fa(Ri,s),Oi!==null&&fa(Oi,s),Cn.forEach(c),xa.forEach(c),h=0;h<ko.length;h++)Z=ko[h],Z.blockedOn===s&&(Z.blockedOn=null);for(;0<ko.length&&(h=ko[0],h.blockedOn===null);)Hr(h),h.blockedOn===null&&ko.shift()}var qo=W.ReactCurrentBatchConfig,Tg=!0;function Qs(s,c,h,Z){var k=Sn,K=qo.transition;qo.transition=null;try{Sn=1,Is(s,c,h,Z)}finally{Sn=k,qo.transition=K}}function gu(s,c,h,Z){var k=Sn,K=qo.transition;qo.transition=null;try{Sn=4,Is(s,c,h,Z)}finally{Sn=k,qo.transition=K}}function Is(s,c,h,Z){if(Tg){var k=zg(s,c,h,Z);if(k===null)yu(s,c,Z,$s,h),_t(s,Z);else if(dr(k,s,c,h,Z))Z.stopPropagation();else if(_t(s,Z),c&4&&-1<No.indexOf(s)){for(;k!==null;){var K=cc(k);if(K!==null&&di(K),K=zg(s,c,h,Z),K===null&&yu(s,c,Z,$s,h),K===k)break;k=K}k!==null&&Z.stopPropagation()}else yu(s,c,Z,null,h)}}var $s=null;function zg(s,c,h,Z){if($s=null,s=hn(Z),s=Ss(s),s!==null)if(c=qt(s),c===null)s=null;else if(h=c.tag,h===13){if(s=Vn(c),s!==null)return s;s=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;s=null}else c!==s&&(s=null);return $s=s,null}function cu(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qt()){case An:return 1;case Tn:return 4;case tr:case Rr:return 16;case Kt:return 536870912;default:return 16}default:return 16}}var Ha=null,ma=null,ha=null;function Cd(){if(ha)return ha;var s,c=ma,h=c.length,Z,k="value"in Ha?Ha.value:Ha.textContent,K=k.length;for(s=0;s<h&&c[s]===k[s];s++);var ie=h-s;for(Z=1;Z<=ie&&c[h-Z]===k[K-Z];Z++);return ha=k.slice(s,1<Z?1-Z:void 0)}function Ya(s){var c=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&c===13&&(s=13)):s=c,s===10&&(s=13),32<=s||s===13?s:0}function Xo(){return!0}function Dg(){return!1}function wi(s){function c(h,Z,k,K,ie){this._reactName=h,this._targetInst=k,this.type=Z,this.nativeEvent=K,this.target=ie,this.currentTarget=null;for(var pe in s)s.hasOwnProperty(pe)&&(h=s[pe],this[pe]=h?h(K):K[pe]);return this.isDefaultPrevented=(K.defaultPrevented!=null?K.defaultPrevented:K.returnValue===!1)?Xo:Dg,this.isPropagationStopped=Dg,this}return j(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Xo)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Xo)},persist:function(){},isPersistent:Xo}),c}var Cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fs=wi(Cs),qs=j({},Cs,{view:0,detail:0}),uu=wi(qs),eg,Pg,rl,ms=j({},qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dt,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==rl&&(rl&&s.type==="mousemove"?(eg=s.screenX-rl.screenX,Pg=s.screenY-rl.screenY):Pg=eg=0,rl=s),eg)},movementY:function(s){return"movementY"in s?s.movementY:Pg}}),Og=wi(ms),fd=j({},ms,{dataTransfer:0}),fC=wi(fd),_g=j({},qs,{relatedTarget:0}),Gl=wi(_g),du=j({},Cs,{animationName:0,elapsedTime:0,pseudoElement:0}),hs=wi(du),Iu=j({},Cs,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),R=wi(Iu),te=j({},Cs,{data:0}),Ce=wi(te),Se={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ke={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ft(s){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(s):(s=qe[s])?!!c[s]:!1}function Dt(){return ft}var un=j({},qs,{key:function(s){if(s.key){var c=Se[s.key]||s.key;if(c!=="Unidentified")return c}return s.type==="keypress"?(s=Ya(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Ke[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dt,charCode:function(s){return s.type==="keypress"?Ya(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ya(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),xn=wi(un),Nn=j({},ms,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jn=wi(Nn),Qr=j({},qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dt}),ii=wi(Qr),fi=j({},Cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),ro=wi(fi),Ki=j({},ms,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Ea=wi(Ki),ea=[9,13,27,32],Aa=l&&"CompositionEvent"in window,As=null;l&&"documentMode"in document&&(As=document.documentMode);var Cu=l&&"TextEvent"in window&&!As,Ug=l&&(!Aa||As&&8<As&&11>=As),tg=" ",jg=!1;function Qg(s,c){switch(s){case"keyup":return ea.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ng(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var oi=!1;function $g(s,c){switch(s){case"compositionend":return ng(c);case"keypress":return c.which!==32?null:(jg=!0,tg);case"textInput":return s=c.data,s===tg&&jg?null:s;default:return null}}function qg(s,c){if(oi)return s==="compositionend"||!Aa&&Qg(s,c)?(s=Cd(),ha=ma=Ha=null,oi=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Ug&&c.locale!=="ko"?null:c.data;default:return null}}var ec={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function tc(s){var c=s&&s.nodeName&&s.nodeName.toLowerCase();return c==="input"?!!ec[s.type]:c==="textarea"}function po(s,c,h,Z){Jt(Z),c=pd(c,"onChange"),0<c.length&&(h=new fs("onChange","change",null,h,Z),s.push({event:h,listeners:c}))}var rg=null,Bl=null;function md(s){pu(s,0)}function bo(s){var c=dg(s);if(be(c))return s}function nc(s,c){if(s==="change")return c}var fu=!1;if(l){var rc;if(l){var il="oninput"in document;if(!il){var ps=document.createElement("div");ps.setAttribute("oninput","return;"),il=typeof ps.oninput=="function"}rc=il}else rc=!1;fu=rc&&(!document.documentMode||9<document.documentMode)}function yo(){rg&&(rg.detachEvent("onpropertychange",io),Bl=rg=null)}function io(s){if(s.propertyName==="value"&&bo(Bl)){var c=[];po(c,Bl,s,hn(s)),yt(md,c)}}function bs(s,c,h){s==="focusin"?(yo(),rg=c,Bl=h,rg.attachEvent("onpropertychange",io)):s==="focusout"&&yo()}function Rl(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return bo(Bl)}function wl(s,c){if(s==="click")return bo(c)}function ic(s,c){if(s==="input"||s==="change")return bo(c)}function Wl(s,c){return s===c&&(s!==0||1/s===1/c)||s!==s&&c!==c}var Ir=typeof Object.is=="function"?Object.is:Wl;function Vl(s,c){if(Ir(s,c))return!0;if(typeof s!="object"||s===null||typeof c!="object"||c===null)return!1;var h=Object.keys(s),Z=Object.keys(c);if(h.length!==Z.length)return!1;for(Z=0;Z<h.length;Z++){var k=h[Z];if(!g.call(c,k)||!Ir(s[k],c[k]))return!1}return!0}function oo(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function ta(s,c){var h=oo(s);s=0;for(var Z;h;){if(h.nodeType===3){if(Z=s+h.textContent.length,s<=c&&Z>=c)return{node:h,offset:c-s};s=Z}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=oo(h)}}function ig(s,c){return s&&c?s===c?!0:s&&s.nodeType===3?!1:c&&c.nodeType===3?ig(s,c.parentNode):"contains"in s?s.contains(c):s.compareDocumentPosition?!!(s.compareDocumentPosition(c)&16):!1:!1}function mu(){for(var s=window,c=me();c instanceof s.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)s=c.contentWindow;else break;c=me(s.document)}return c}function og(s){var c=s&&s.nodeName&&s.nodeName.toLowerCase();return c&&(c==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||c==="textarea"||s.contentEditable==="true")}function ag(s){var c=mu(),h=s.focusedElem,Z=s.selectionRange;if(c!==h&&h&&h.ownerDocument&&ig(h.ownerDocument.documentElement,h)){if(Z!==null&&og(h)){if(c=Z.start,s=Z.end,s===void 0&&(s=c),"selectionStart"in h)h.selectionStart=c,h.selectionEnd=Math.min(s,h.value.length);else if(s=(c=h.ownerDocument||document)&&c.defaultView||window,s.getSelection){s=s.getSelection();var k=h.textContent.length,K=Math.min(Z.start,k);Z=Z.end===void 0?K:Math.min(Z.end,k),!s.extend&&K>Z&&(k=Z,Z=K,K=k),k=ta(h,K);var ie=ta(h,Z);k&&ie&&(s.rangeCount!==1||s.anchorNode!==k.node||s.anchorOffset!==k.offset||s.focusNode!==ie.node||s.focusOffset!==ie.offset)&&(c=c.createRange(),c.setStart(k.node,k.offset),s.removeAllRanges(),K>Z?(s.addRange(c),s.extend(ie.node,ie.offset)):(c.setEnd(ie.node,ie.offset),s.addRange(c)))}}for(c=[],s=h;s=s.parentNode;)s.nodeType===1&&c.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<c.length;h++)s=c[h],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var lg=l&&"documentMode"in document&&11>=document.documentMode,na=null,kl=null,ol=null,Nl=!1;function Xl(s,c,h){var Z=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Nl||na==null||na!==me(Z)||(Z=na,"selectionStart"in Z&&og(Z)?Z={start:Z.selectionStart,end:Z.selectionEnd}:(Z=(Z.ownerDocument&&Z.ownerDocument.defaultView||window).getSelection(),Z={anchorNode:Z.anchorNode,anchorOffset:Z.anchorOffset,focusNode:Z.focusNode,focusOffset:Z.focusOffset}),ol&&Vl(ol,Z)||(ol=Z,Z=pd(kl,"onSelect"),0<Z.length&&(c=new fs("onSelect","select",null,c,h),s.push({event:c,listeners:Z}),c.target=na)))}function ys(s,c){var h={};return h[s.toLowerCase()]=c.toLowerCase(),h["Webkit"+s]="webkit"+c,h["Moz"+s]="moz"+c,h}var _i={animationend:ys("Animation","AnimationEnd"),animationiteration:ys("Animation","AnimationIteration"),animationstart:ys("Animation","AnimationStart"),transitionend:ys("Transition","TransitionEnd")},Jo={},Nr={};l&&(Nr=document.createElement("div").style,"AnimationEvent"in window||(delete _i.animationend.animation,delete _i.animationiteration.animation,delete _i.animationstart.animation),"TransitionEvent"in window||delete _i.transitionend.transition);function br(s){if(Jo[s])return Jo[s];if(!_i[s])return s;var c=_i[s],h;for(h in c)if(c.hasOwnProperty(h)&&h in Nr)return Jo[s]=c[h];return s}var ai=br("animationend"),mi=br("animationiteration"),al=br("animationstart"),oc=br("transitionend"),sg=new Map,hu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ll(s,c){sg.set(s,c),o(c,[s])}for(var ac=0;ac<hu.length;ac++){var vo=hu[ac],pa=vo.toLowerCase(),hd=vo[0].toUpperCase()+vo.slice(1);ll(pa,"on"+hd)}ll(ai,"onAnimationEnd"),ll(mi,"onAnimationIteration"),ll(al,"onAnimationStart"),ll("dblclick","onDoubleClick"),ll("focusin","onFocus"),ll("focusout","onBlur"),ll(oc,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Em=new Set("cancel close invalid load scroll toggle".split(" ").concat(vs));function Au(s,c,h){var Z=s.type||"unknown-event";s.currentTarget=h,yn(Z,c,void 0,s),s.currentTarget=null}function pu(s,c){c=(c&4)!==0;for(var h=0;h<s.length;h++){var Z=s[h],k=Z.event;Z=Z.listeners;e:{var K=void 0;if(c)for(var ie=Z.length-1;0<=ie;ie--){var pe=Z[ie],Be=pe.instance,Ue=pe.currentTarget;if(pe=pe.listener,Be!==K&&k.isPropagationStopped())break e;Au(k,pe,Ue),K=Be}else for(ie=0;ie<Z.length;ie++){if(pe=Z[ie],Be=pe.instance,Ue=pe.currentTarget,pe=pe.listener,Be!==K&&k.isPropagationStopped())break e;Au(k,pe,Ue),K=Be}}}if(kt)throw s=Tt,kt=!1,Tt=null,s}function Xr(s,c){var h=c[Ho];h===void 0&&(h=c[Ho]=new Set);var Z=s+"__bubble";h.has(Z)||(bu(c,s,2,!1),h.add(Z))}function Ad(s,c,h){var Z=0;c&&(Z|=4),bu(h,s,Z,c)}var lc="_reactListening"+Math.random().toString(36).slice(2);function gg(s){if(!s[lc]){s[lc]=!0,r.forEach(function(h){h!=="selectionchange"&&(Em.has(h)||Ad(h,!1,s),Ad(h,!0,s))});var c=s.nodeType===9?s:s.ownerDocument;c===null||c[lc]||(c[lc]=!0,Ad("selectionchange",!1,c))}}function bu(s,c,h,Z){switch(cu(c)){case 1:var k=Qs;break;case 4:k=gu;break;default:k=Is}h=k.bind(null,c,h,s),k=void 0,!sn||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(k=!0),Z?k!==void 0?s.addEventListener(c,h,{capture:!0,passive:k}):s.addEventListener(c,h,!0):k!==void 0?s.addEventListener(c,h,{passive:k}):s.addEventListener(c,h,!1)}function yu(s,c,h,Z,k){var K=Z;if(!(c&1)&&!(c&2)&&Z!==null)e:for(;;){if(Z===null)return;var ie=Z.tag;if(ie===3||ie===4){var pe=Z.stateNode.containerInfo;if(pe===k||pe.nodeType===8&&pe.parentNode===k)break;if(ie===4)for(ie=Z.return;ie!==null;){var Be=ie.tag;if((Be===3||Be===4)&&(Be=ie.stateNode.containerInfo,Be===k||Be.nodeType===8&&Be.parentNode===k))return;ie=ie.return}for(;pe!==null;){if(ie=Ss(pe),ie===null)return;if(Be=ie.tag,Be===5||Be===6){Z=K=ie;continue e}pe=pe.parentNode}}Z=Z.return}yt(function(){var Ue=K,bt=hn(h),Zt=[];e:{var mt=sg.get(s);if(mt!==void 0){var Ut=fs,tn=s;switch(s){case"keypress":if(Ya(h)===0)break e;case"keydown":case"keyup":Ut=xn;break;case"focusin":tn="focus",Ut=Gl;break;case"focusout":tn="blur",Ut=Gl;break;case"beforeblur":case"afterblur":Ut=Gl;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ut=Og;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ut=fC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ut=ii;break;case ai:case mi:case al:Ut=hs;break;case oc:Ut=ro;break;case"scroll":Ut=uu;break;case"wheel":Ut=Ea;break;case"copy":case"cut":case"paste":Ut=R;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ut=jn}var rn=(c&4)!==0,Ni=!rn&&s==="scroll",De=rn?mt!==null?mt+"Capture":null:mt;rn=[];for(var Xe=Ue,Oe;Xe!==null;){Oe=Xe;var Xt=Oe.stateNode;if(Oe.tag===5&&Xt!==null&&(Oe=Xt,De!==null&&(Xt=ht(Xe,De),Xt!=null&&rn.push(vu(Xe,Xt,Oe)))),Ni)break;Xe=Xe.return}0<rn.length&&(mt=new Ut(mt,tn,null,h,bt),Zt.push({event:mt,listeners:rn}))}}if(!(c&7)){e:{if(mt=s==="mouseover"||s==="pointerover",Ut=s==="mouseout"||s==="pointerout",mt&&h!==Et&&(tn=h.relatedTarget||h.fromElement)&&(Ss(tn)||tn[ao]))break e;if((Ut||mt)&&(mt=bt.window===bt?bt:(mt=bt.ownerDocument)?mt.defaultView||mt.parentWindow:window,Ut?(tn=h.relatedTarget||h.toElement,Ut=Ue,tn=tn?Ss(tn):null,tn!==null&&(Ni=qt(tn),tn!==Ni||tn.tag!==5&&tn.tag!==6)&&(tn=null)):(Ut=null,tn=Ue),Ut!==tn)){if(rn=Og,Xt="onMouseLeave",De="onMouseEnter",Xe="mouse",(s==="pointerout"||s==="pointerover")&&(rn=jn,Xt="onPointerLeave",De="onPointerEnter",Xe="pointer"),Ni=Ut==null?mt:dg(Ut),Oe=tn==null?mt:dg(tn),mt=new rn(Xt,Xe+"leave",Ut,h,bt),mt.target=Ni,mt.relatedTarget=Oe,Xt=null,Ss(bt)===Ue&&(rn=new rn(De,Xe+"enter",tn,h,bt),rn.target=Oe,rn.relatedTarget=Ni,Xt=rn),Ni=Xt,Ut&&tn)t:{for(rn=Ut,De=tn,Xe=0,Oe=rn;Oe;Oe=cg(Oe))Xe++;for(Oe=0,Xt=De;Xt;Xt=cg(Xt))Oe++;for(;0<Xe-Oe;)rn=cg(rn),Xe--;for(;0<Oe-Xe;)De=cg(De),Oe--;for(;Xe--;){if(rn===De||De!==null&&rn===De.alternate)break t;rn=cg(rn),De=cg(De)}rn=null}else rn=null;Ut!==null&&Fm(Zt,mt,Ut,rn,!1),tn!==null&&Ni!==null&&Fm(Zt,Ni,tn,rn,!0)}}e:{if(mt=Ue?dg(Ue):window,Ut=mt.nodeName&&mt.nodeName.toLowerCase(),Ut==="select"||Ut==="input"&&mt.type==="file")var on=nc;else if(tc(mt))if(fu)on=ic;else{on=Rl;var pn=bs}else(Ut=mt.nodeName)&&Ut.toLowerCase()==="input"&&(mt.type==="checkbox"||mt.type==="radio")&&(on=wl);if(on&&(on=on(s,Ue))){po(Zt,on,h,bt);break e}pn&&pn(s,mt,Ue),s==="focusout"&&(pn=mt._wrapperState)&&pn.controlled&&mt.type==="number"&&ke(mt,"number",mt.value)}switch(pn=Ue?dg(Ue):window,s){case"focusin":(tc(pn)||pn.contentEditable==="true")&&(na=pn,kl=Ue,ol=null);break;case"focusout":ol=kl=na=null;break;case"mousedown":Nl=!0;break;case"contextmenu":case"mouseup":case"dragend":Nl=!1,Xl(Zt,h,bt);break;case"selectionchange":if(lg)break;case"keydown":case"keyup":Xl(Zt,h,bt)}var bn;if(Aa)e:{switch(s){case"compositionstart":var kn="onCompositionStart";break e;case"compositionend":kn="onCompositionEnd";break e;case"compositionupdate":kn="onCompositionUpdate";break e}kn=void 0}else oi?Qg(s,h)&&(kn="onCompositionEnd"):s==="keydown"&&h.keyCode===229&&(kn="onCompositionStart");kn&&(Ug&&h.locale!=="ko"&&(oi||kn!=="onCompositionStart"?kn==="onCompositionEnd"&&oi&&(bn=Cd()):(Ha=bt,ma="value"in Ha?Ha.value:Ha.textContent,oi=!0)),pn=pd(Ue,kn),0<pn.length&&(kn=new Ce(kn,s,null,h,bt),Zt.push({event:kn,listeners:pn}),bn?kn.data=bn:(bn=ng(h),bn!==null&&(kn.data=bn)))),(bn=Cu?$g(s,h):qg(s,h))&&(Ue=pd(Ue,"onBeforeInput"),0<Ue.length&&(bt=new Ce("onBeforeInput","beforeinput",null,h,bt),Zt.push({event:bt,listeners:Ue}),bt.data=bn))}pu(Zt,c)})}function vu(s,c,h){return{instance:s,listener:c,currentTarget:h}}function pd(s,c){for(var h=c+"Capture",Z=[];s!==null;){var k=s,K=k.stateNode;k.tag===5&&K!==null&&(k=K,K=ht(s,h),K!=null&&Z.unshift(vu(s,K,k)),K=ht(s,c),K!=null&&Z.push(vu(s,K,k))),s=s.return}return Z}function cg(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Fm(s,c,h,Z,k){for(var K=c._reactName,ie=[];h!==null&&h!==Z;){var pe=h,Be=pe.alternate,Ue=pe.stateNode;if(Be!==null&&Be===Z)break;pe.tag===5&&Ue!==null&&(pe=Ue,k?(Be=ht(h,K),Be!=null&&ie.unshift(vu(h,Be,pe))):k||(Be=ht(h,K),Be!=null&&ie.push(vu(h,Be,pe)))),h=h.return}ie.length!==0&&s.push({event:c,listeners:ie})}var i0=/\r\n?/g,o0=/\u0000|\uFFFD/g;function Km(s){return(typeof s=="string"?s:""+s).replace(i0,`
`).replace(o0,"")}function bd(s,c,h){if(c=Km(c),Km(s)!==c&&h)throw Error(n(425))}function sc(){}var Su=null,ug=null;function mC(s,c){return s==="textarea"||s==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var hC=typeof setTimeout=="function"?setTimeout:void 0,Lm=typeof clearTimeout=="function"?clearTimeout:void 0,Mm=typeof Promise=="function"?Promise:void 0,a0=typeof queueMicrotask=="function"?queueMicrotask:typeof Mm<"u"?function(s){return Mm.resolve(null).then(s).catch(l0)}:hC;function l0(s){setTimeout(function(){throw s})}function AC(s,c){var h=c,Z=0;do{var k=h.nextSibling;if(s.removeChild(h),k&&k.nodeType===8)if(h=k.data,h==="/$"){if(Z===0){s.removeChild(k),no(c);return}Z--}else h!=="$"&&h!=="$?"&&h!=="$!"||Z++;h=k}while(h);no(c)}function So(s){for(;s!=null;s=s.nextSibling){var c=s.nodeType;if(c===1||c===3)break;if(c===8){if(c=s.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return s}function ba(s){s=s.previousSibling;for(var c=0;s;){if(s.nodeType===8){var h=s.data;if(h==="$"||h==="$!"||h==="$?"){if(c===0)return s;c--}else h==="/$"&&c++}s=s.previousSibling}return null}var xo=Math.random().toString(36).slice(2),sl="__reactFiber$"+xo,gc="__reactProps$"+xo,ao="__reactContainer$"+xo,Ho="__reactEvents$"+xo,s0="__reactListeners$"+xo,g0="__reactHandles$"+xo;function Ss(s){var c=s[sl];if(c)return c;for(var h=s.parentNode;h;){if(c=h[ao]||h[sl]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(s=ba(s);s!==null;){if(h=s[sl])return h;s=ba(s)}return c}s=h,h=s.parentNode}return null}function cc(s){return s=s[sl]||s[ao],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function dg(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(n(33))}function Zu(s){return s[gc]||null}var pC=[],Jl=-1;function Fa(s){return{current:s}}function yr(s){0>Jl||(s.current=pC[Jl],pC[Jl]=null,Jl--)}function wr(s,c){Jl++,pC[Jl]=s.current,s.current=c}var Zs={},Ui=Fa(Zs),Yo=Fa(!1),Ig=Zs;function uc(s,c){var h=s.type.contextTypes;if(!h)return Zs;var Z=s.stateNode;if(Z&&Z.__reactInternalMemoizedUnmaskedChildContext===c)return Z.__reactInternalMemoizedMaskedChildContext;var k={},K;for(K in h)k[K]=c[K];return Z&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=c,s.__reactInternalMemoizedMaskedChildContext=k),k}function Eo(s){return s=s.childContextTypes,s!=null}function yd(){yr(Yo),yr(Ui)}function Tm(s,c,h){if(Ui.current!==Zs)throw Error(n(168));wr(Ui,c),wr(Yo,h)}function bC(s,c,h){var Z=s.stateNode;if(c=c.childContextTypes,typeof Z.getChildContext!="function")return h;Z=Z.getChildContext();for(var k in Z)if(!(k in c))throw Error(n(108,ce(s)||"Unknown",k));return j({},h,Z)}function Cg(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Zs,Ig=Ui.current,wr(Ui,s),wr(Yo,Yo.current),!0}function zm(s,c,h){var Z=s.stateNode;if(!Z)throw Error(n(169));h?(s=bC(s,c,Ig),Z.__reactInternalMemoizedMergedChildContext=s,yr(Yo),yr(Ui),wr(Ui,s)):yr(Yo),wr(Yo,h)}var xl=null,Gu=!1,A=!1;function G(s){xl===null?xl=[s]:xl.push(s)}function N(s){Gu=!0,G(s)}function T(){if(!A&&xl!==null){A=!0;var s=0,c=Sn;try{var h=xl;for(Sn=1;s<h.length;s++){var Z=h[s];do Z=Z(!0);while(Z!==null)}xl=null,Gu=!1}catch(k){throw xl!==null&&(xl=xl.slice(s+1)),Pn(An,T),k}finally{Sn=c,A=!1}}return null}var q=[],re=0,oe=null,le=0,ge=[],de=0,Ze=null,Me=1,Te="";function Je(s,c){q[re++]=le,q[re++]=oe,oe=s,le=c}function gt(s,c,h){ge[de++]=Me,ge[de++]=Te,ge[de++]=Ze,Ze=s;var Z=Me;s=Te;var k=32-Ar(Z)-1;Z&=~(1<<k),h+=1;var K=32-Ar(c)+k;if(30<K){var ie=k-k%5;K=(Z&(1<<ie)-1).toString(32),Z>>=ie,k-=ie,Me=1<<32-Ar(c)+k|h<<k|Z,Te=K+s}else Me=1<<K|h<<k|Z,Te=s}function je(s){s.return!==null&&(Je(s,1),gt(s,1,0))}function we(s){for(;s===oe;)oe=q[--re],q[re]=null,le=q[--re],q[re]=null;for(;s===Ze;)Ze=ge[--de],ge[de]=null,Te=ge[--de],ge[de]=null,Me=ge[--de],ge[de]=null}var We=null,tt=null,et=!1,nt=null;function Pt(s,c){var h=Cl(5,null,null,0);h.elementType="DELETED",h.stateNode=c,h.return=s,c=s.deletions,c===null?(s.deletions=[h],s.flags|=16):c.push(h)}function Ft(s,c){switch(s.tag){case 5:var h=s.type;return c=c.nodeType!==1||h.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(s.stateNode=c,We=s,tt=So(c.firstChild),!0):!1;case 6:return c=s.pendingProps===""||c.nodeType!==3?null:c,c!==null?(s.stateNode=c,We=s,tt=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(h=Ze!==null?{id:Me,overflow:Te}:null,s.memoizedState={dehydrated:c,treeContext:h,retryLane:1073741824},h=Cl(18,null,null,0),h.stateNode=c,h.return=s,s.child=h,We=s,tt=null,!0):!1;default:return!1}}function fn(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Lt(s){if(et){var c=tt;if(c){var h=c;if(!Ft(s,c)){if(fn(s))throw Error(n(418));c=So(h.nextSibling);var Z=We;c&&Ft(s,c)?Pt(Z,h):(s.flags=s.flags&-4097|2,et=!1,We=s)}}else{if(fn(s))throw Error(n(418));s.flags=s.flags&-4097|2,et=!1,We=s}}}function gr(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;We=s}function cr(s){if(s!==We)return!1;if(!et)return gr(s),et=!0,!1;var c;if((c=s.tag!==3)&&!(c=s.tag!==5)&&(c=s.type,c=c!=="head"&&c!=="body"&&!mC(s.type,s.memoizedProps)),c&&(c=tt)){if(fn(s))throw ir(),Error(n(418));for(;c;)Pt(s,c),c=So(c.nextSibling)}if(gr(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,c=0;s;){if(s.nodeType===8){var h=s.data;if(h==="/$"){if(c===0){tt=So(s.nextSibling);break e}c--}else h!=="$"&&h!=="$!"&&h!=="$?"||c++}s=s.nextSibling}tt=null}}else tt=We?So(s.stateNode.nextSibling):null;return!0}function ir(){for(var s=tt;s;)s=So(s.nextSibling)}function Yn(){tt=We=null,et=!1}function vr(s){nt===null?nt=[s]:nt.push(s)}var Wr=W.ReactCurrentBatchConfig;function Bn(s,c,h){if(s=h.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(n(309));var Z=h.stateNode}if(!Z)throw Error(n(147,s));var k=Z,K=""+s;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===K?c.ref:(c=function(ie){var pe=k.refs;ie===null?delete pe[K]:pe[K]=ie},c._stringRef=K,c)}if(typeof s!="string")throw Error(n(284));if(!h._owner)throw Error(n(290,s))}return s}function $r(s,c){throw s=Object.prototype.toString.call(c),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":s))}function Zo(s){var c=s._init;return c(s._payload)}function gi(s){function c(De,Xe){if(s){var Oe=De.deletions;Oe===null?(De.deletions=[Xe],De.flags|=16):Oe.push(Xe)}}function h(De,Xe){if(!s)return null;for(;Xe!==null;)c(De,Xe),Xe=Xe.sibling;return null}function Z(De,Xe){for(De=new Map;Xe!==null;)Xe.key!==null?De.set(Xe.key,Xe):De.set(Xe.index,Xe),Xe=Xe.sibling;return De}function k(De,Xe){return De=Sc(De,Xe),De.index=0,De.sibling=null,De}function K(De,Xe,Oe){return De.index=Oe,s?(Oe=De.alternate,Oe!==null?(Oe=Oe.index,Oe<Xe?(De.flags|=2,Xe):Oe):(De.flags|=2,Xe)):(De.flags|=1048576,Xe)}function ie(De){return s&&De.alternate===null&&(De.flags|=2),De}function pe(De,Xe,Oe,Xt){return Xe===null||Xe.tag!==6?(Xe=E0(Oe,De.mode,Xt),Xe.return=De,Xe):(Xe=k(Xe,Oe),Xe.return=De,Xe)}function Be(De,Xe,Oe,Xt){var on=Oe.type;return on===x?bt(De,Xe,Oe.props.children,Xt,Oe.key):Xe!==null&&(Xe.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===U&&Zo(on)===Xe.type)?(Xt=k(Xe,Oe.props),Xt.ref=Bn(De,Xe,Oe),Xt.return=De,Xt):(Xt=ch(Oe.type,Oe.key,Oe.props,null,De.mode,Xt),Xt.ref=Bn(De,Xe,Oe),Xt.return=De,Xt)}function Ue(De,Xe,Oe,Xt){return Xe===null||Xe.tag!==4||Xe.stateNode.containerInfo!==Oe.containerInfo||Xe.stateNode.implementation!==Oe.implementation?(Xe=F0(Oe,De.mode,Xt),Xe.return=De,Xe):(Xe=k(Xe,Oe.children||[]),Xe.return=De,Xe)}function bt(De,Xe,Oe,Xt,on){return Xe===null||Xe.tag!==7?(Xe=Xu(Oe,De.mode,Xt,on),Xe.return=De,Xe):(Xe=k(Xe,Oe),Xe.return=De,Xe)}function Zt(De,Xe,Oe){if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number")return Xe=E0(""+Xe,De.mode,Oe),Xe.return=De,Xe;if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case J:return Oe=ch(Xe.type,Xe.key,Xe.props,null,De.mode,Oe),Oe.ref=Bn(De,null,Xe),Oe.return=De,Oe;case H:return Xe=F0(Xe,De.mode,Oe),Xe.return=De,Xe;case U:var Xt=Xe._init;return Zt(De,Xt(Xe._payload),Oe)}if(ze(Xe)||ee(Xe))return Xe=Xu(Xe,De.mode,Oe,null),Xe.return=De,Xe;$r(De,Xe)}return null}function mt(De,Xe,Oe,Xt){var on=Xe!==null?Xe.key:null;if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number")return on!==null?null:pe(De,Xe,""+Oe,Xt);if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case J:return Oe.key===on?Be(De,Xe,Oe,Xt):null;case H:return Oe.key===on?Ue(De,Xe,Oe,Xt):null;case U:return on=Oe._init,mt(De,Xe,on(Oe._payload),Xt)}if(ze(Oe)||ee(Oe))return on!==null?null:bt(De,Xe,Oe,Xt,null);$r(De,Oe)}return null}function Ut(De,Xe,Oe,Xt,on){if(typeof Xt=="string"&&Xt!==""||typeof Xt=="number")return De=De.get(Oe)||null,pe(Xe,De,""+Xt,on);if(typeof Xt=="object"&&Xt!==null){switch(Xt.$$typeof){case J:return De=De.get(Xt.key===null?Oe:Xt.key)||null,Be(Xe,De,Xt,on);case H:return De=De.get(Xt.key===null?Oe:Xt.key)||null,Ue(Xe,De,Xt,on);case U:var pn=Xt._init;return Ut(De,Xe,Oe,pn(Xt._payload),on)}if(ze(Xt)||ee(Xt))return De=De.get(Oe)||null,bt(Xe,De,Xt,on,null);$r(Xe,Xt)}return null}function tn(De,Xe,Oe,Xt){for(var on=null,pn=null,bn=Xe,kn=Xe=0,co=null;bn!==null&&kn<Oe.length;kn++){bn.index>kn?(co=bn,bn=null):co=bn.sibling;var hr=mt(De,bn,Oe[kn],Xt);if(hr===null){bn===null&&(bn=co);break}s&&bn&&hr.alternate===null&&c(De,bn),Xe=K(hr,Xe,kn),pn===null?on=hr:pn.sibling=hr,pn=hr,bn=co}if(kn===Oe.length)return h(De,bn),et&&Je(De,kn),on;if(bn===null){for(;kn<Oe.length;kn++)bn=Zt(De,Oe[kn],Xt),bn!==null&&(Xe=K(bn,Xe,kn),pn===null?on=bn:pn.sibling=bn,pn=bn);return et&&Je(De,kn),on}for(bn=Z(De,bn);kn<Oe.length;kn++)co=Ut(bn,De,kn,Oe[kn],Xt),co!==null&&(s&&co.alternate!==null&&bn.delete(co.key===null?kn:co.key),Xe=K(co,Xe,kn),pn===null?on=co:pn.sibling=co,pn=co);return s&&bn.forEach(function(Zc){return c(De,Zc)}),et&&Je(De,kn),on}function rn(De,Xe,Oe,Xt){var on=ee(Oe);if(typeof on!="function")throw Error(n(150));if(Oe=on.call(Oe),Oe==null)throw Error(n(151));for(var pn=on=null,bn=Xe,kn=Xe=0,co=null,hr=Oe.next();bn!==null&&!hr.done;kn++,hr=Oe.next()){bn.index>kn?(co=bn,bn=null):co=bn.sibling;var Zc=mt(De,bn,hr.value,Xt);if(Zc===null){bn===null&&(bn=co);break}s&&bn&&Zc.alternate===null&&c(De,bn),Xe=K(Zc,Xe,kn),pn===null?on=Zc:pn.sibling=Zc,pn=Zc,bn=co}if(hr.done)return h(De,bn),et&&Je(De,kn),on;if(bn===null){for(;!hr.done;kn++,hr=Oe.next())hr=Zt(De,hr.value,Xt),hr!==null&&(Xe=K(hr,Xe,kn),pn===null?on=hr:pn.sibling=hr,pn=hr);return et&&Je(De,kn),on}for(bn=Z(De,bn);!hr.done;kn++,hr=Oe.next())hr=Ut(bn,De,kn,hr.value,Xt),hr!==null&&(s&&hr.alternate!==null&&bn.delete(hr.key===null?kn:hr.key),Xe=K(hr,Xe,kn),pn===null?on=hr:pn.sibling=hr,pn=hr);return s&&bn.forEach(function(TY){return c(De,TY)}),et&&Je(De,kn),on}function Ni(De,Xe,Oe,Xt){if(typeof Oe=="object"&&Oe!==null&&Oe.type===x&&Oe.key===null&&(Oe=Oe.props.children),typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case J:e:{for(var on=Oe.key,pn=Xe;pn!==null;){if(pn.key===on){if(on=Oe.type,on===x){if(pn.tag===7){h(De,pn.sibling),Xe=k(pn,Oe.props.children),Xe.return=De,De=Xe;break e}}else if(pn.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===U&&Zo(on)===pn.type){h(De,pn.sibling),Xe=k(pn,Oe.props),Xe.ref=Bn(De,pn,Oe),Xe.return=De,De=Xe;break e}h(De,pn);break}else c(De,pn);pn=pn.sibling}Oe.type===x?(Xe=Xu(Oe.props.children,De.mode,Xt,Oe.key),Xe.return=De,De=Xe):(Xt=ch(Oe.type,Oe.key,Oe.props,null,De.mode,Xt),Xt.ref=Bn(De,Xe,Oe),Xt.return=De,De=Xt)}return ie(De);case H:e:{for(pn=Oe.key;Xe!==null;){if(Xe.key===pn)if(Xe.tag===4&&Xe.stateNode.containerInfo===Oe.containerInfo&&Xe.stateNode.implementation===Oe.implementation){h(De,Xe.sibling),Xe=k(Xe,Oe.children||[]),Xe.return=De,De=Xe;break e}else{h(De,Xe);break}else c(De,Xe);Xe=Xe.sibling}Xe=F0(Oe,De.mode,Xt),Xe.return=De,De=Xe}return ie(De);case U:return pn=Oe._init,Ni(De,Xe,pn(Oe._payload),Xt)}if(ze(Oe))return tn(De,Xe,Oe,Xt);if(ee(Oe))return rn(De,Xe,Oe,Xt);$r(De,Oe)}return typeof Oe=="string"&&Oe!==""||typeof Oe=="number"?(Oe=""+Oe,Xe!==null&&Xe.tag===6?(h(De,Xe.sibling),Xe=k(Xe,Oe),Xe.return=De,De=Xe):(h(De,Xe),Xe=E0(Oe,De.mode,Xt),Xe.return=De,De=Xe),ie(De)):h(De,Xe)}return Ni}var Wi=gi(!0),fr=gi(!1),lo=Fa(null),so=null,qr=null,Vi=null;function ji(){Vi=qr=so=null}function Fo(s){var c=lo.current;yr(lo),s._currentValue=c}function ya(s,c,h){for(;s!==null;){var Z=s.alternate;if((s.childLanes&c)!==c?(s.childLanes|=c,Z!==null&&(Z.childLanes|=c)):Z!==null&&(Z.childLanes&c)!==c&&(Z.childLanes|=c),s===h)break;s=s.return}}function ei(s,c){so=s,Vi=qr=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&c&&(Ga=!0),s.firstContext=null)}function hi(s){var c=s._currentValue;if(Vi!==s)if(s={context:s,memoizedValue:c,next:null},qr===null){if(so===null)throw Error(n(308));qr=s,so.dependencies={lanes:0,firstContext:s}}else qr=qr.next=s;return c}var ra=null;function Gs(s){ra===null?ra=[s]:ra.push(s)}function Hl(s,c,h,Z){var k=c.interleaved;return k===null?(h.next=h,Gs(c)):(h.next=k.next,k.next=h),c.interleaved=h,mr(s,Z)}function mr(s,c){s.lanes|=c;var h=s.alternate;for(h!==null&&(h.lanes|=c),h=s,s=s.return;s!==null;)s.childLanes|=c,h=s.alternate,h!==null&&(h.childLanes|=c),h=s,s=s.return;return h.tag===3?h.stateNode:null}var gl=!1;function vd(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yC(s,c){s=s.updateQueue,c.updateQueue===s&&(c.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function va(s,c){return{eventTime:s,lane:c,tag:0,payload:null,callback:null,next:null}}function Sa(s,c,h){var Z=s.updateQueue;if(Z===null)return null;if(Z=Z.shared,Cr&2){var k=Z.pending;return k===null?c.next=c:(c.next=k.next,k.next=c),Z.pending=c,mr(s,h)}return k=Z.interleaved,k===null?(c.next=c,Gs(Z)):(c.next=k.next,k.next=c),Z.interleaved=c,mr(s,h)}function fg(s,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194240)!==0)){var Z=c.lanes;Z&=s.pendingLanes,h|=Z,c.lanes=h,Pr(s,h)}}function Za(s,c){var h=s.updateQueue,Z=s.alternate;if(Z!==null&&(Z=Z.updateQueue,h===Z)){var k=null,K=null;if(h=h.firstBaseUpdate,h!==null){do{var ie={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};K===null?k=K=ie:K=K.next=ie,h=h.next}while(h!==null);K===null?k=K=c:K=K.next=c}else k=K=c;h={baseState:Z.baseState,firstBaseUpdate:k,lastBaseUpdate:K,shared:Z.shared,effects:Z.effects},s.updateQueue=h;return}s=h.lastBaseUpdate,s===null?h.firstBaseUpdate=c:s.next=c,h.lastBaseUpdate=c}function Yl(s,c,h,Z){var k=s.updateQueue;gl=!1;var K=k.firstBaseUpdate,ie=k.lastBaseUpdate,pe=k.shared.pending;if(pe!==null){k.shared.pending=null;var Be=pe,Ue=Be.next;Be.next=null,ie===null?K=Ue:ie.next=Ue,ie=Be;var bt=s.alternate;bt!==null&&(bt=bt.updateQueue,pe=bt.lastBaseUpdate,pe!==ie&&(pe===null?bt.firstBaseUpdate=Ue:pe.next=Ue,bt.lastBaseUpdate=Be))}if(K!==null){var Zt=k.baseState;ie=0,bt=Ue=Be=null,pe=K;do{var mt=pe.lane,Ut=pe.eventTime;if((Z&mt)===mt){bt!==null&&(bt=bt.next={eventTime:Ut,lane:0,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null});e:{var tn=s,rn=pe;switch(mt=c,Ut=h,rn.tag){case 1:if(tn=rn.payload,typeof tn=="function"){Zt=tn.call(Ut,Zt,mt);break e}Zt=tn;break e;case 3:tn.flags=tn.flags&-65537|128;case 0:if(tn=rn.payload,mt=typeof tn=="function"?tn.call(Ut,Zt,mt):tn,mt==null)break e;Zt=j({},Zt,mt);break e;case 2:gl=!0}}pe.callback!==null&&pe.lane!==0&&(s.flags|=64,mt=k.effects,mt===null?k.effects=[pe]:mt.push(pe))}else Ut={eventTime:Ut,lane:mt,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null},bt===null?(Ue=bt=Ut,Be=Zt):bt=bt.next=Ut,ie|=mt;if(pe=pe.next,pe===null){if(pe=k.shared.pending,pe===null)break;mt=pe,pe=mt.next,mt.next=null,k.lastBaseUpdate=mt,k.shared.pending=null}}while(!0);if(bt===null&&(Be=Zt),k.baseState=Be,k.firstBaseUpdate=Ue,k.lastBaseUpdate=bt,c=k.shared.interleaved,c!==null){k=c;do ie|=k.lane,k=k.next;while(k!==c)}else K===null&&(k.shared.lanes=0);Wu|=ie,s.lanes=ie,s.memoizedState=Zt}}function mg(s,c,h){if(s=c.effects,c.effects=null,s!==null)for(c=0;c<s.length;c++){var Z=s[c],k=Z.callback;if(k!==null){if(Z.callback=null,Z=h,typeof k!="function")throw Error(n(191,k));k.call(Z)}}}var dc={},ia=Fa(dc),Ic=Fa(dc),Bs=Fa(dc);function El(s){if(s===dc)throw Error(n(174));return s}function Cc(s,c){switch(wr(Bs,c),wr(Ic,s),wr(ia,dc),s=c.nodeType,s){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:Ct(null,"");break;default:s=s===8?c.parentNode:c,c=s.namespaceURI||null,s=s.tagName,c=Ct(c,s)}yr(ia),wr(ia,c)}function cl(){yr(ia),yr(Ic),yr(Bs)}function Dm(s){El(Bs.current);var c=El(ia.current),h=Ct(c,s.type);c!==h&&(wr(Ic,s),wr(ia,h))}function vC(s){Ic.current===s&&(yr(ia),yr(Ic))}var Lr=Fa(0);function Ka(s){for(var c=s;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if(c.flags&128)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var SC=[];function ZC(){for(var s=0;s<SC.length;s++)SC[s]._workInProgressVersionPrimary=null;SC.length=0}var Sd=W.ReactCurrentDispatcher,Zd=W.ReactCurrentBatchConfig,ul=0,Or=null,Ai=null,ci=null,fc=!1,Fl=!1,mc=0,c0=0;function ki(){throw Error(n(321))}function Gd(s,c){if(c===null)return!1;for(var h=0;h<c.length&&h<s.length;h++)if(!Ir(s[h],c[h]))return!1;return!0}function Bu(s,c,h,Z,k,K){if(ul=K,Or=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,Sd.current=s===null||s.memoizedState===null?fY:mY,s=h(Z,k),Fl){K=0;do{if(Fl=!1,mc=0,25<=K)throw Error(n(301));K+=1,ci=Ai=null,c.updateQueue=null,Sd.current=hY,s=h(Z,k)}while(Fl)}if(Sd.current=jm,c=Ai!==null&&Ai.next!==null,ul=0,ci=Ai=Or=null,fc=!1,c)throw Error(n(300));return s}function dl(){var s=mc!==0;return mc=0,s}function La(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ci===null?Or.memoizedState=ci=s:ci=ci.next=s,ci}function oa(){if(Ai===null){var s=Or.alternate;s=s!==null?s.memoizedState:null}else s=Ai.next;var c=ci===null?Or.memoizedState:ci.next;if(c!==null)ci=c,Ai=s;else{if(s===null)throw Error(n(310));Ai=s,s={memoizedState:Ai.memoizedState,baseState:Ai.baseState,baseQueue:Ai.baseQueue,queue:Ai.queue,next:null},ci===null?Or.memoizedState=ci=s:ci=ci.next=s}return ci}function Ru(s,c){return typeof c=="function"?c(s):c}function Bd(s){var c=oa(),h=c.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=s;var Z=Ai,k=Z.baseQueue,K=h.pending;if(K!==null){if(k!==null){var ie=k.next;k.next=K.next,K.next=ie}Z.baseQueue=k=K,h.pending=null}if(k!==null){K=k.next,Z=Z.baseState;var pe=ie=null,Be=null,Ue=K;do{var bt=Ue.lane;if((ul&bt)===bt)Be!==null&&(Be=Be.next={lane:0,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null}),Z=Ue.hasEagerState?Ue.eagerState:s(Z,Ue.action);else{var Zt={lane:bt,action:Ue.action,hasEagerState:Ue.hasEagerState,eagerState:Ue.eagerState,next:null};Be===null?(pe=Be=Zt,ie=Z):Be=Be.next=Zt,Or.lanes|=bt,Wu|=bt}Ue=Ue.next}while(Ue!==null&&Ue!==K);Be===null?ie=Z:Be.next=pe,Ir(Z,c.memoizedState)||(Ga=!0),c.memoizedState=Z,c.baseState=ie,c.baseQueue=Be,h.lastRenderedState=Z}if(s=h.interleaved,s!==null){k=s;do K=k.lane,Or.lanes|=K,Wu|=K,k=k.next;while(k!==s)}else k===null&&(h.lanes=0);return[c.memoizedState,h.dispatch]}function Rs(s){var c=oa(),h=c.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=s;var Z=h.dispatch,k=h.pending,K=c.memoizedState;if(k!==null){h.pending=null;var ie=k=k.next;do K=s(K,ie.action),ie=ie.next;while(ie!==k);Ir(K,c.memoizedState)||(Ga=!0),c.memoizedState=K,c.baseQueue===null&&(c.baseState=K),h.lastRenderedState=K}return[K,Z]}function Pm(){}function GC(s,c){var h=Or,Z=oa(),k=c(),K=!Ir(Z.memoizedState,k);if(K&&(Z.memoizedState=k,Ga=!0),Z=Z.queue,Wd(_m.bind(null,h,Z,s),[s]),Z.getSnapshot!==c||K||ci!==null&&ci.memoizedState.tag&1){if(h.flags|=2048,aa(9,BC.bind(null,h,Z,k,c),void 0,null),go===null)throw Error(n(349));ul&30||Om(h,c,k)}return k}function Om(s,c,h){s.flags|=16384,s={getSnapshot:c,value:h},c=Or.updateQueue,c===null?(c={lastEffect:null,stores:null},Or.updateQueue=c,c.stores=[s]):(h=c.stores,h===null?c.stores=[s]:h.push(s))}function BC(s,c,h,Z){c.value=h,c.getSnapshot=Z,hc(c)&&Rd(s)}function _m(s,c,h){return h(function(){hc(c)&&Rd(s)})}function hc(s){var c=s.getSnapshot;s=s.value;try{var h=c();return!Ir(s,h)}catch{return!0}}function Rd(s){var c=mr(s,1);c!==null&&zl(c,s,1,-1)}function wu(s){var c=La();return typeof s=="function"&&(s=s()),c.memoizedState=c.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ru,lastRenderedState:s},c.queue=s,s=s.dispatch=CY.bind(null,Or,s),[c.memoizedState,s]}function aa(s,c,h,Z){return s={tag:s,create:c,destroy:h,deps:Z,next:null},c=Or.updateQueue,c===null?(c={lastEffect:null,stores:null},Or.updateQueue=c,c.lastEffect=s.next=s):(h=c.lastEffect,h===null?c.lastEffect=s.next=s:(Z=h.next,h.next=s,s.next=Z,c.lastEffect=s)),s}function Kl(){return oa().memoizedState}function Ma(s,c,h,Z){var k=La();Or.flags|=s,k.memoizedState=aa(1|c,h,void 0,Z===void 0?null:Z)}function hg(s,c,h,Z){var k=oa();Z=Z===void 0?null:Z;var K=void 0;if(Ai!==null){var ie=Ai.memoizedState;if(K=ie.destroy,Z!==null&&Gd(Z,ie.deps)){k.memoizedState=aa(c,h,K,Z);return}}Or.flags|=s,k.memoizedState=aa(1|c,h,K,Z)}function wd(s,c){return Ma(8390656,8,s,c)}function Wd(s,c){return hg(2048,8,s,c)}function Um(s,c){return hg(4,2,s,c)}function Vd(s,c){return hg(4,4,s,c)}function kd(s,c){if(typeof c=="function")return s=s(),c(s),function(){c(null)};if(c!=null)return s=s(),c.current=s,function(){c.current=null}}function E1(s,c,h){return h=h!=null?h.concat([s]):null,hg(4,4,kd.bind(null,c,s),h)}function u0(){}function F1(s,c){var h=oa();c=c===void 0?null:c;var Z=h.memoizedState;return Z!==null&&c!==null&&Gd(c,Z[1])?Z[0]:(h.memoizedState=[s,c],s)}function K1(s,c){var h=oa();c=c===void 0?null:c;var Z=h.memoizedState;return Z!==null&&c!==null&&Gd(c,Z[1])?Z[0]:(s=s(),h.memoizedState=[s,c],s)}function L1(s,c,h){return ul&21?(Ir(h,c)||(h=zn(),Or.lanes|=h,Wu|=h,s.baseState=!0),c):(s.baseState&&(s.baseState=!1,Ga=!0),s.memoizedState=h)}function dY(s,c){var h=Sn;Sn=h!==0&&4>h?h:4,s(!0);var Z=Zd.transition;Zd.transition={};try{s(!1),c()}finally{Sn=h,Zd.transition=Z}}function M1(){return oa().memoizedState}function IY(s,c,h){var Z=yc(s);if(h={lane:Z,action:h,hasEagerState:!1,eagerState:null,next:null},T1(s))z1(c,h);else if(h=Hl(s,c,h,Z),h!==null){var k=sa();zl(h,s,Z,k),D1(h,c,Z)}}function CY(s,c,h){var Z=yc(s),k={lane:Z,action:h,hasEagerState:!1,eagerState:null,next:null};if(T1(s))z1(c,k);else{var K=s.alternate;if(s.lanes===0&&(K===null||K.lanes===0)&&(K=c.lastRenderedReducer,K!==null))try{var ie=c.lastRenderedState,pe=K(ie,h);if(k.hasEagerState=!0,k.eagerState=pe,Ir(pe,ie)){var Be=c.interleaved;Be===null?(k.next=k,Gs(c)):(k.next=Be.next,Be.next=k),c.interleaved=k;return}}catch{}finally{}h=Hl(s,c,k,Z),h!==null&&(k=sa(),zl(h,s,Z,k),D1(h,c,Z))}}function T1(s){var c=s.alternate;return s===Or||c!==null&&c===Or}function z1(s,c){Fl=fc=!0;var h=s.pending;h===null?c.next=c:(c.next=h.next,h.next=c),s.pending=c}function D1(s,c,h){if(h&4194240){var Z=c.lanes;Z&=s.pendingLanes,h|=Z,c.lanes=h,Pr(s,h)}}var jm={readContext:hi,useCallback:ki,useContext:ki,useEffect:ki,useImperativeHandle:ki,useInsertionEffect:ki,useLayoutEffect:ki,useMemo:ki,useReducer:ki,useRef:ki,useState:ki,useDebugValue:ki,useDeferredValue:ki,useTransition:ki,useMutableSource:ki,useSyncExternalStore:ki,useId:ki,unstable_isNewReconciler:!1},fY={readContext:hi,useCallback:function(s,c){return La().memoizedState=[s,c===void 0?null:c],s},useContext:hi,useEffect:wd,useImperativeHandle:function(s,c,h){return h=h!=null?h.concat([s]):null,Ma(4194308,4,kd.bind(null,c,s),h)},useLayoutEffect:function(s,c){return Ma(4194308,4,s,c)},useInsertionEffect:function(s,c){return Ma(4,2,s,c)},useMemo:function(s,c){var h=La();return c=c===void 0?null:c,s=s(),h.memoizedState=[s,c],s},useReducer:function(s,c,h){var Z=La();return c=h!==void 0?h(c):c,Z.memoizedState=Z.baseState=c,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:c},Z.queue=s,s=s.dispatch=IY.bind(null,Or,s),[Z.memoizedState,s]},useRef:function(s){var c=La();return s={current:s},c.memoizedState=s},useState:wu,useDebugValue:u0,useDeferredValue:function(s){return La().memoizedState=s},useTransition:function(){var s=wu(!1),c=s[0];return s=dY.bind(null,s[1]),La().memoizedState=s,[c,s]},useMutableSource:function(){},useSyncExternalStore:function(s,c,h){var Z=Or,k=La();if(et){if(h===void 0)throw Error(n(407));h=h()}else{if(h=c(),go===null)throw Error(n(349));ul&30||Om(Z,c,h)}k.memoizedState=h;var K={value:h,getSnapshot:c};return k.queue=K,wd(_m.bind(null,Z,K,s),[s]),Z.flags|=2048,aa(9,BC.bind(null,Z,K,h,c),void 0,null),h},useId:function(){var s=La(),c=go.identifierPrefix;if(et){var h=Te,Z=Me;h=(Z&~(1<<32-Ar(Z)-1)).toString(32)+h,c=":"+c+"R"+h,h=mc++,0<h&&(c+="H"+h.toString(32)),c+=":"}else h=c0++,c=":"+c+"r"+h.toString(32)+":";return s.memoizedState=c},unstable_isNewReconciler:!1},mY={readContext:hi,useCallback:F1,useContext:hi,useEffect:Wd,useImperativeHandle:E1,useInsertionEffect:Um,useLayoutEffect:Vd,useMemo:K1,useReducer:Bd,useRef:Kl,useState:function(){return Bd(Ru)},useDebugValue:u0,useDeferredValue:function(s){var c=oa();return L1(c,Ai.memoizedState,s)},useTransition:function(){var s=Bd(Ru)[0],c=oa().memoizedState;return[s,c]},useMutableSource:Pm,useSyncExternalStore:GC,useId:M1,unstable_isNewReconciler:!1},hY={readContext:hi,useCallback:F1,useContext:hi,useEffect:Wd,useImperativeHandle:E1,useInsertionEffect:Um,useLayoutEffect:Vd,useMemo:K1,useReducer:Rs,useRef:Kl,useState:function(){return Rs(Ru)},useDebugValue:u0,useDeferredValue:function(s){var c=oa();return Ai===null?c.memoizedState=s:L1(c,Ai.memoizedState,s)},useTransition:function(){var s=Rs(Ru)[0],c=oa().memoizedState;return[s,c]},useMutableSource:Pm,useSyncExternalStore:GC,useId:M1,unstable_isNewReconciler:!1};function Ll(s,c){if(s&&s.defaultProps){c=j({},c),s=s.defaultProps;for(var h in s)c[h]===void 0&&(c[h]=s[h]);return c}return c}function d0(s,c,h,Z){c=s.memoizedState,h=h(Z,c),h=h==null?c:j({},c,h),s.memoizedState=h,s.lanes===0&&(s.updateQueue.baseState=h)}var Qm={isMounted:function(s){return(s=s._reactInternals)?qt(s)===s:!1},enqueueSetState:function(s,c,h){s=s._reactInternals;var Z=sa(),k=yc(s),K=va(Z,k);K.payload=c,h!=null&&(K.callback=h),c=Sa(s,K,k),c!==null&&(zl(c,s,k,Z),fg(c,s,k))},enqueueReplaceState:function(s,c,h){s=s._reactInternals;var Z=sa(),k=yc(s),K=va(Z,k);K.tag=1,K.payload=c,h!=null&&(K.callback=h),c=Sa(s,K,k),c!==null&&(zl(c,s,k,Z),fg(c,s,k))},enqueueForceUpdate:function(s,c){s=s._reactInternals;var h=sa(),Z=yc(s),k=va(h,Z);k.tag=2,c!=null&&(k.callback=c),c=Sa(s,k,Z),c!==null&&(zl(c,s,Z,h),fg(c,s,Z))}};function P1(s,c,h,Z,k,K,ie){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(Z,K,ie):c.prototype&&c.prototype.isPureReactComponent?!Vl(h,Z)||!Vl(k,K):!0}function O1(s,c,h){var Z=!1,k=Zs,K=c.contextType;return typeof K=="object"&&K!==null?K=hi(K):(k=Eo(c)?Ig:Ui.current,Z=c.contextTypes,K=(Z=Z!=null)?uc(s,k):Zs),c=new c(h,K),s.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=Qm,s.stateNode=c,c._reactInternals=s,Z&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=k,s.__reactInternalMemoizedMaskedChildContext=K),c}function _1(s,c,h,Z){s=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,Z),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,Z),c.state!==s&&Qm.enqueueReplaceState(c,c.state,null)}function I0(s,c,h,Z){var k=s.stateNode;k.props=h,k.state=s.memoizedState,k.refs={},vd(s);var K=c.contextType;typeof K=="object"&&K!==null?k.context=hi(K):(K=Eo(c)?Ig:Ui.current,k.context=uc(s,K)),k.state=s.memoizedState,K=c.getDerivedStateFromProps,typeof K=="function"&&(d0(s,c,K,h),k.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof k.getSnapshotBeforeUpdate=="function"||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(c=k.state,typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount(),c!==k.state&&Qm.enqueueReplaceState(k,k.state,null),Yl(s,h,k,Z),k.state=s.memoizedState),typeof k.componentDidMount=="function"&&(s.flags|=4194308)}function Nd(s,c){try{var h="",Z=c;do h+=Q(Z),Z=Z.return;while(Z);var k=h}catch(K){k=`
Error generating stack: `+K.message+`
`+K.stack}return{value:s,source:c,stack:k,digest:null}}function C0(s,c,h){return{value:s,source:null,stack:h??null,digest:c??null}}function f0(s,c){try{console.error(c.value)}catch(h){setTimeout(function(){throw h})}}var AY=typeof WeakMap=="function"?WeakMap:Map;function U1(s,c,h){h=va(-1,h),h.tag=3,h.payload={element:null};var Z=c.value;return h.callback=function(){ih||(ih=!0,V0=Z),f0(s,c)},h}function j1(s,c,h){h=va(-1,h),h.tag=3;var Z=s.type.getDerivedStateFromError;if(typeof Z=="function"){var k=c.value;h.payload=function(){return Z(k)},h.callback=function(){f0(s,c)}}var K=s.stateNode;return K!==null&&typeof K.componentDidCatch=="function"&&(h.callback=function(){f0(s,c),typeof Z!="function"&&(pc===null?pc=new Set([this]):pc.add(this));var ie=c.stack;this.componentDidCatch(c.value,{componentStack:ie!==null?ie:""})}),h}function Q1(s,c,h){var Z=s.pingCache;if(Z===null){Z=s.pingCache=new AY;var k=new Set;Z.set(c,k)}else k=Z.get(c),k===void 0&&(k=new Set,Z.set(c,k));k.has(h)||(k.add(h),s=NY.bind(null,s,c,h),c.then(s,s))}function $1(s){do{var c;if((c=s.tag===13)&&(c=s.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return s;s=s.return}while(s!==null);return null}function q1(s,c,h,Z,k){return s.mode&1?(s.flags|=65536,s.lanes=k,s):(s===c?s.flags|=65536:(s.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(c=va(-1,1),c.tag=2,Sa(h,c,1))),h.lanes|=1),s)}var pY=W.ReactCurrentOwner,Ga=!1;function la(s,c,h,Z){c.child=s===null?fr(c,null,h,Z):Wi(c,s.child,h,Z)}function eG(s,c,h,Z,k){h=h.render;var K=c.ref;return ei(c,k),Z=Bu(s,c,h,Z,K,k),h=dl(),s!==null&&!Ga?(c.updateQueue=s.updateQueue,c.flags&=-2053,s.lanes&=~k,Ag(s,c,k)):(et&&h&&je(c),c.flags|=1,la(s,c,Z,k),c.child)}function tG(s,c,h,Z,k){if(s===null){var K=h.type;return typeof K=="function"&&!Y0(K)&&K.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(c.tag=15,c.type=K,nG(s,c,K,Z,k)):(s=ch(h.type,null,Z,c,c.mode,k),s.ref=c.ref,s.return=c,c.child=s)}if(K=s.child,!(s.lanes&k)){var ie=K.memoizedProps;if(h=h.compare,h=h!==null?h:Vl,h(ie,Z)&&s.ref===c.ref)return Ag(s,c,k)}return c.flags|=1,s=Sc(K,Z),s.ref=c.ref,s.return=c,c.child=s}function nG(s,c,h,Z,k){if(s!==null){var K=s.memoizedProps;if(Vl(K,Z)&&s.ref===c.ref)if(Ga=!1,c.pendingProps=Z=K,(s.lanes&k)!==0)s.flags&131072&&(Ga=!0);else return c.lanes=s.lanes,Ag(s,c,k)}return m0(s,c,h,Z,k)}function rG(s,c,h){var Z=c.pendingProps,k=Z.children,K=s!==null?s.memoizedState:null;if(Z.mode==="hidden")if(!(c.mode&1))c.memoizedState={baseLanes:0,cachePool:null,transitions:null},wr(Jd,Ta),Ta|=h;else{if(!(h&1073741824))return s=K!==null?K.baseLanes|h:h,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:s,cachePool:null,transitions:null},c.updateQueue=null,wr(Jd,Ta),Ta|=s,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},Z=K!==null?K.baseLanes:h,wr(Jd,Ta),Ta|=Z}else K!==null?(Z=K.baseLanes|h,c.memoizedState=null):Z=h,wr(Jd,Ta),Ta|=Z;return la(s,c,k,h),c.child}function iG(s,c){var h=c.ref;(s===null&&h!==null||s!==null&&s.ref!==h)&&(c.flags|=512,c.flags|=2097152)}function m0(s,c,h,Z,k){var K=Eo(h)?Ig:Ui.current;return K=uc(c,K),ei(c,k),h=Bu(s,c,h,Z,K,k),Z=dl(),s!==null&&!Ga?(c.updateQueue=s.updateQueue,c.flags&=-2053,s.lanes&=~k,Ag(s,c,k)):(et&&Z&&je(c),c.flags|=1,la(s,c,h,k),c.child)}function oG(s,c,h,Z,k){if(Eo(h)){var K=!0;Cg(c)}else K=!1;if(ei(c,k),c.stateNode===null)qm(s,c),O1(c,h,Z),I0(c,h,Z,k),Z=!0;else if(s===null){var ie=c.stateNode,pe=c.memoizedProps;ie.props=pe;var Be=ie.context,Ue=h.contextType;typeof Ue=="object"&&Ue!==null?Ue=hi(Ue):(Ue=Eo(h)?Ig:Ui.current,Ue=uc(c,Ue));var bt=h.getDerivedStateFromProps,Zt=typeof bt=="function"||typeof ie.getSnapshotBeforeUpdate=="function";Zt||typeof ie.UNSAFE_componentWillReceiveProps!="function"&&typeof ie.componentWillReceiveProps!="function"||(pe!==Z||Be!==Ue)&&_1(c,ie,Z,Ue),gl=!1;var mt=c.memoizedState;ie.state=mt,Yl(c,Z,ie,k),Be=c.memoizedState,pe!==Z||mt!==Be||Yo.current||gl?(typeof bt=="function"&&(d0(c,h,bt,Z),Be=c.memoizedState),(pe=gl||P1(c,h,pe,Z,mt,Be,Ue))?(Zt||typeof ie.UNSAFE_componentWillMount!="function"&&typeof ie.componentWillMount!="function"||(typeof ie.componentWillMount=="function"&&ie.componentWillMount(),typeof ie.UNSAFE_componentWillMount=="function"&&ie.UNSAFE_componentWillMount()),typeof ie.componentDidMount=="function"&&(c.flags|=4194308)):(typeof ie.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=Z,c.memoizedState=Be),ie.props=Z,ie.state=Be,ie.context=Ue,Z=pe):(typeof ie.componentDidMount=="function"&&(c.flags|=4194308),Z=!1)}else{ie=c.stateNode,yC(s,c),pe=c.memoizedProps,Ue=c.type===c.elementType?pe:Ll(c.type,pe),ie.props=Ue,Zt=c.pendingProps,mt=ie.context,Be=h.contextType,typeof Be=="object"&&Be!==null?Be=hi(Be):(Be=Eo(h)?Ig:Ui.current,Be=uc(c,Be));var Ut=h.getDerivedStateFromProps;(bt=typeof Ut=="function"||typeof ie.getSnapshotBeforeUpdate=="function")||typeof ie.UNSAFE_componentWillReceiveProps!="function"&&typeof ie.componentWillReceiveProps!="function"||(pe!==Zt||mt!==Be)&&_1(c,ie,Z,Be),gl=!1,mt=c.memoizedState,ie.state=mt,Yl(c,Z,ie,k);var tn=c.memoizedState;pe!==Zt||mt!==tn||Yo.current||gl?(typeof Ut=="function"&&(d0(c,h,Ut,Z),tn=c.memoizedState),(Ue=gl||P1(c,h,Ue,Z,mt,tn,Be)||!1)?(bt||typeof ie.UNSAFE_componentWillUpdate!="function"&&typeof ie.componentWillUpdate!="function"||(typeof ie.componentWillUpdate=="function"&&ie.componentWillUpdate(Z,tn,Be),typeof ie.UNSAFE_componentWillUpdate=="function"&&ie.UNSAFE_componentWillUpdate(Z,tn,Be)),typeof ie.componentDidUpdate=="function"&&(c.flags|=4),typeof ie.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof ie.componentDidUpdate!="function"||pe===s.memoizedProps&&mt===s.memoizedState||(c.flags|=4),typeof ie.getSnapshotBeforeUpdate!="function"||pe===s.memoizedProps&&mt===s.memoizedState||(c.flags|=1024),c.memoizedProps=Z,c.memoizedState=tn),ie.props=Z,ie.state=tn,ie.context=Be,Z=Ue):(typeof ie.componentDidUpdate!="function"||pe===s.memoizedProps&&mt===s.memoizedState||(c.flags|=4),typeof ie.getSnapshotBeforeUpdate!="function"||pe===s.memoizedProps&&mt===s.memoizedState||(c.flags|=1024),Z=!1)}return h0(s,c,h,Z,K,k)}function h0(s,c,h,Z,k,K){iG(s,c);var ie=(c.flags&128)!==0;if(!Z&&!ie)return k&&zm(c,h,!1),Ag(s,c,K);Z=c.stateNode,pY.current=c;var pe=ie&&typeof h.getDerivedStateFromError!="function"?null:Z.render();return c.flags|=1,s!==null&&ie?(c.child=Wi(c,s.child,null,K),c.child=Wi(c,null,pe,K)):la(s,c,pe,K),c.memoizedState=Z.state,k&&zm(c,h,!0),c.child}function aG(s){var c=s.stateNode;c.pendingContext?Tm(s,c.pendingContext,c.pendingContext!==c.context):c.context&&Tm(s,c.context,!1),Cc(s,c.containerInfo)}function lG(s,c,h,Z,k){return Yn(),vr(k),c.flags|=256,la(s,c,h,Z),c.child}var A0={dehydrated:null,treeContext:null,retryLane:0};function p0(s){return{baseLanes:s,cachePool:null,transitions:null}}function sG(s,c,h){var Z=c.pendingProps,k=Lr.current,K=!1,ie=(c.flags&128)!==0,pe;if((pe=ie)||(pe=s!==null&&s.memoizedState===null?!1:(k&2)!==0),pe?(K=!0,c.flags&=-129):(s===null||s.memoizedState!==null)&&(k|=1),wr(Lr,k&1),s===null)return Lt(c),s=c.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(c.mode&1?s.data==="$!"?c.lanes=8:c.lanes=1073741824:c.lanes=1,null):(ie=Z.children,s=Z.fallback,K?(Z=c.mode,K=c.child,ie={mode:"hidden",children:ie},!(Z&1)&&K!==null?(K.childLanes=0,K.pendingProps=ie):K=uh(ie,Z,0,null),s=Xu(s,Z,h,null),K.return=c,s.return=c,K.sibling=s,c.child=K,c.child.memoizedState=p0(h),c.memoizedState=A0,s):b0(c,ie));if(k=s.memoizedState,k!==null&&(pe=k.dehydrated,pe!==null))return bY(s,c,ie,Z,pe,k,h);if(K){K=Z.fallback,ie=c.mode,k=s.child,pe=k.sibling;var Be={mode:"hidden",children:Z.children};return!(ie&1)&&c.child!==k?(Z=c.child,Z.childLanes=0,Z.pendingProps=Be,c.deletions=null):(Z=Sc(k,Be),Z.subtreeFlags=k.subtreeFlags&14680064),pe!==null?K=Sc(pe,K):(K=Xu(K,ie,h,null),K.flags|=2),K.return=c,Z.return=c,Z.sibling=K,c.child=Z,Z=K,K=c.child,ie=s.child.memoizedState,ie=ie===null?p0(h):{baseLanes:ie.baseLanes|h,cachePool:null,transitions:ie.transitions},K.memoizedState=ie,K.childLanes=s.childLanes&~h,c.memoizedState=A0,Z}return K=s.child,s=K.sibling,Z=Sc(K,{mode:"visible",children:Z.children}),!(c.mode&1)&&(Z.lanes=h),Z.return=c,Z.sibling=null,s!==null&&(h=c.deletions,h===null?(c.deletions=[s],c.flags|=16):h.push(s)),c.child=Z,c.memoizedState=null,Z}function b0(s,c){return c=uh({mode:"visible",children:c},s.mode,0,null),c.return=s,s.child=c}function $m(s,c,h,Z){return Z!==null&&vr(Z),Wi(c,s.child,null,h),s=b0(c,c.pendingProps.children),s.flags|=2,c.memoizedState=null,s}function bY(s,c,h,Z,k,K,ie){if(h)return c.flags&256?(c.flags&=-257,Z=C0(Error(n(422))),$m(s,c,ie,Z)):c.memoizedState!==null?(c.child=s.child,c.flags|=128,null):(K=Z.fallback,k=c.mode,Z=uh({mode:"visible",children:Z.children},k,0,null),K=Xu(K,k,ie,null),K.flags|=2,Z.return=c,K.return=c,Z.sibling=K,c.child=Z,c.mode&1&&Wi(c,s.child,null,ie),c.child.memoizedState=p0(ie),c.memoizedState=A0,K);if(!(c.mode&1))return $m(s,c,ie,null);if(k.data==="$!"){if(Z=k.nextSibling&&k.nextSibling.dataset,Z)var pe=Z.dgst;return Z=pe,K=Error(n(419)),Z=C0(K,Z,void 0),$m(s,c,ie,Z)}if(pe=(ie&s.childLanes)!==0,Ga||pe){if(Z=go,Z!==null){switch(ie&-ie){case 4:k=2;break;case 16:k=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:k=32;break;case 536870912:k=268435456;break;default:k=0}k=k&(Z.suspendedLanes|ie)?0:k,k!==0&&k!==K.retryLane&&(K.retryLane=k,mr(s,k),zl(Z,s,k,-1))}return H0(),Z=C0(Error(n(421))),$m(s,c,ie,Z)}return k.data==="$?"?(c.flags|=128,c.child=s.child,c=XY.bind(null,s),k._reactRetry=c,null):(s=K.treeContext,tt=So(k.nextSibling),We=c,et=!0,nt=null,s!==null&&(ge[de++]=Me,ge[de++]=Te,ge[de++]=Ze,Me=s.id,Te=s.overflow,Ze=c),c=b0(c,Z.children),c.flags|=4096,c)}function gG(s,c,h){s.lanes|=c;var Z=s.alternate;Z!==null&&(Z.lanes|=c),ya(s.return,c,h)}function y0(s,c,h,Z,k){var K=s.memoizedState;K===null?s.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:Z,tail:h,tailMode:k}:(K.isBackwards=c,K.rendering=null,K.renderingStartTime=0,K.last=Z,K.tail=h,K.tailMode=k)}function cG(s,c,h){var Z=c.pendingProps,k=Z.revealOrder,K=Z.tail;if(la(s,c,Z.children,h),Z=Lr.current,Z&2)Z=Z&1|2,c.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=c.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&gG(s,h,c);else if(s.tag===19)gG(s,h,c);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===c)break e;for(;s.sibling===null;){if(s.return===null||s.return===c)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}Z&=1}if(wr(Lr,Z),!(c.mode&1))c.memoizedState=null;else switch(k){case"forwards":for(h=c.child,k=null;h!==null;)s=h.alternate,s!==null&&Ka(s)===null&&(k=h),h=h.sibling;h=k,h===null?(k=c.child,c.child=null):(k=h.sibling,h.sibling=null),y0(c,!1,k,h,K);break;case"backwards":for(h=null,k=c.child,c.child=null;k!==null;){if(s=k.alternate,s!==null&&Ka(s)===null){c.child=k;break}s=k.sibling,k.sibling=h,h=k,k=s}y0(c,!0,h,null,K);break;case"together":y0(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function qm(s,c){!(c.mode&1)&&s!==null&&(s.alternate=null,c.alternate=null,c.flags|=2)}function Ag(s,c,h){if(s!==null&&(c.dependencies=s.dependencies),Wu|=c.lanes,!(h&c.childLanes))return null;if(s!==null&&c.child!==s.child)throw Error(n(153));if(c.child!==null){for(s=c.child,h=Sc(s,s.pendingProps),c.child=h,h.return=c;s.sibling!==null;)s=s.sibling,h=h.sibling=Sc(s,s.pendingProps),h.return=c;h.sibling=null}return c.child}function yY(s,c,h){switch(c.tag){case 3:aG(c),Yn();break;case 5:Dm(c);break;case 1:Eo(c.type)&&Cg(c);break;case 4:Cc(c,c.stateNode.containerInfo);break;case 10:var Z=c.type._context,k=c.memoizedProps.value;wr(lo,Z._currentValue),Z._currentValue=k;break;case 13:if(Z=c.memoizedState,Z!==null)return Z.dehydrated!==null?(wr(Lr,Lr.current&1),c.flags|=128,null):h&c.child.childLanes?sG(s,c,h):(wr(Lr,Lr.current&1),s=Ag(s,c,h),s!==null?s.sibling:null);wr(Lr,Lr.current&1);break;case 19:if(Z=(h&c.childLanes)!==0,s.flags&128){if(Z)return cG(s,c,h);c.flags|=128}if(k=c.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),wr(Lr,Lr.current),Z)break;return null;case 22:case 23:return c.lanes=0,rG(s,c,h)}return Ag(s,c,h)}var uG,v0,dG,IG;uG=function(s,c){for(var h=c.child;h!==null;){if(h.tag===5||h.tag===6)s.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},v0=function(){},dG=function(s,c,h,Z){var k=s.memoizedProps;if(k!==Z){s=c.stateNode,El(ia.current);var K=null;switch(h){case"input":k=Ne(s,k),Z=Ne(s,Z),K=[];break;case"select":k=j({},k,{value:void 0}),Z=j({},Z,{value:void 0}),K=[];break;case"textarea":k=Le(s,k),Z=Le(s,Z),K=[];break;default:typeof k.onClick!="function"&&typeof Z.onClick=="function"&&(s.onclick=sc)}dt(h,Z);var ie;h=null;for(Ue in k)if(!Z.hasOwnProperty(Ue)&&k.hasOwnProperty(Ue)&&k[Ue]!=null)if(Ue==="style"){var pe=k[Ue];for(ie in pe)pe.hasOwnProperty(ie)&&(h||(h={}),h[ie]="")}else Ue!=="dangerouslySetInnerHTML"&&Ue!=="children"&&Ue!=="suppressContentEditableWarning"&&Ue!=="suppressHydrationWarning"&&Ue!=="autoFocus"&&(i.hasOwnProperty(Ue)?K||(K=[]):(K=K||[]).push(Ue,null));for(Ue in Z){var Be=Z[Ue];if(pe=k!=null?k[Ue]:void 0,Z.hasOwnProperty(Ue)&&Be!==pe&&(Be!=null||pe!=null))if(Ue==="style")if(pe){for(ie in pe)!pe.hasOwnProperty(ie)||Be&&Be.hasOwnProperty(ie)||(h||(h={}),h[ie]="");for(ie in Be)Be.hasOwnProperty(ie)&&pe[ie]!==Be[ie]&&(h||(h={}),h[ie]=Be[ie])}else h||(K||(K=[]),K.push(Ue,h)),h=Be;else Ue==="dangerouslySetInnerHTML"?(Be=Be?Be.__html:void 0,pe=pe?pe.__html:void 0,Be!=null&&pe!==Be&&(K=K||[]).push(Ue,Be)):Ue==="children"?typeof Be!="string"&&typeof Be!="number"||(K=K||[]).push(Ue,""+Be):Ue!=="suppressContentEditableWarning"&&Ue!=="suppressHydrationWarning"&&(i.hasOwnProperty(Ue)?(Be!=null&&Ue==="onScroll"&&Xr("scroll",s),K||pe===Be||(K=[])):(K=K||[]).push(Ue,Be))}h&&(K=K||[]).push("style",h);var Ue=K;(c.updateQueue=Ue)&&(c.flags|=4)}},IG=function(s,c,h,Z){h!==Z&&(c.flags|=4)};function RC(s,c){if(!et)switch(s.tailMode){case"hidden":c=s.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?s.tail=null:h.sibling=null;break;case"collapsed":h=s.tail;for(var Z=null;h!==null;)h.alternate!==null&&(Z=h),h=h.sibling;Z===null?c||s.tail===null?s.tail=null:s.tail.sibling=null:Z.sibling=null}}function Ko(s){var c=s.alternate!==null&&s.alternate.child===s.child,h=0,Z=0;if(c)for(var k=s.child;k!==null;)h|=k.lanes|k.childLanes,Z|=k.subtreeFlags&14680064,Z|=k.flags&14680064,k.return=s,k=k.sibling;else for(k=s.child;k!==null;)h|=k.lanes|k.childLanes,Z|=k.subtreeFlags,Z|=k.flags,k.return=s,k=k.sibling;return s.subtreeFlags|=Z,s.childLanes=h,c}function vY(s,c,h){var Z=c.pendingProps;switch(we(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ko(c),null;case 1:return Eo(c.type)&&yd(),Ko(c),null;case 3:return Z=c.stateNode,cl(),yr(Yo),yr(Ui),ZC(),Z.pendingContext&&(Z.context=Z.pendingContext,Z.pendingContext=null),(s===null||s.child===null)&&(cr(c)?c.flags|=4:s===null||s.memoizedState.isDehydrated&&!(c.flags&256)||(c.flags|=1024,nt!==null&&(X0(nt),nt=null))),v0(s,c),Ko(c),null;case 5:vC(c);var k=El(Bs.current);if(h=c.type,s!==null&&c.stateNode!=null)dG(s,c,h,Z,k),s.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!Z){if(c.stateNode===null)throw Error(n(166));return Ko(c),null}if(s=El(ia.current),cr(c)){Z=c.stateNode,h=c.type;var K=c.memoizedProps;switch(Z[sl]=c,Z[gc]=K,s=(c.mode&1)!==0,h){case"dialog":Xr("cancel",Z),Xr("close",Z);break;case"iframe":case"object":case"embed":Xr("load",Z);break;case"video":case"audio":for(k=0;k<vs.length;k++)Xr(vs[k],Z);break;case"source":Xr("error",Z);break;case"img":case"image":case"link":Xr("error",Z),Xr("load",Z);break;case"details":Xr("toggle",Z);break;case"input":Ie(Z,K),Xr("invalid",Z);break;case"select":Z._wrapperState={wasMultiple:!!K.multiple},Xr("invalid",Z);break;case"textarea":Ye(Z,K),Xr("invalid",Z)}dt(h,K),k=null;for(var ie in K)if(K.hasOwnProperty(ie)){var pe=K[ie];ie==="children"?typeof pe=="string"?Z.textContent!==pe&&(K.suppressHydrationWarning!==!0&&bd(Z.textContent,pe,s),k=["children",pe]):typeof pe=="number"&&Z.textContent!==""+pe&&(K.suppressHydrationWarning!==!0&&bd(Z.textContent,pe,s),k=["children",""+pe]):i.hasOwnProperty(ie)&&pe!=null&&ie==="onScroll"&&Xr("scroll",Z)}switch(h){case"input":Ae(Z),Fe(Z,K,!0);break;case"textarea":Ae(Z),$e(Z);break;case"select":case"option":break;default:typeof K.onClick=="function"&&(Z.onclick=sc)}Z=k,c.updateQueue=Z,Z!==null&&(c.flags|=4)}else{ie=k.nodeType===9?k:k.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=ot(h)),s==="http://www.w3.org/1999/xhtml"?h==="script"?(s=ie.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof Z.is=="string"?s=ie.createElement(h,{is:Z.is}):(s=ie.createElement(h),h==="select"&&(ie=s,Z.multiple?ie.multiple=!0:Z.size&&(ie.size=Z.size))):s=ie.createElementNS(s,h),s[sl]=c,s[gc]=Z,uG(s,c,!1,!1),c.stateNode=s;e:{switch(ie=Wt(h,Z),h){case"dialog":Xr("cancel",s),Xr("close",s),k=Z;break;case"iframe":case"object":case"embed":Xr("load",s),k=Z;break;case"video":case"audio":for(k=0;k<vs.length;k++)Xr(vs[k],s);k=Z;break;case"source":Xr("error",s),k=Z;break;case"img":case"image":case"link":Xr("error",s),Xr("load",s),k=Z;break;case"details":Xr("toggle",s),k=Z;break;case"input":Ie(s,Z),k=Ne(s,Z),Xr("invalid",s);break;case"option":k=Z;break;case"select":s._wrapperState={wasMultiple:!!Z.multiple},k=j({},Z,{value:void 0}),Xr("invalid",s);break;case"textarea":Ye(s,Z),k=Le(s,Z),Xr("invalid",s);break;default:k=Z}dt(h,k),pe=k;for(K in pe)if(pe.hasOwnProperty(K)){var Be=pe[K];K==="style"?st(s,Be):K==="dangerouslySetInnerHTML"?(Be=Be?Be.__html:void 0,Be!=null&&it(s,Be)):K==="children"?typeof Be=="string"?(h!=="textarea"||Be!=="")&&It(s,Be):typeof Be=="number"&&It(s,""+Be):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(i.hasOwnProperty(K)?Be!=null&&K==="onScroll"&&Xr("scroll",s):Be!=null&&B(s,K,Be,ie))}switch(h){case"input":Ae(s),Fe(s,Z,!1);break;case"textarea":Ae(s),$e(s);break;case"option":Z.value!=null&&s.setAttribute("value",""+se(Z.value));break;case"select":s.multiple=!!Z.multiple,K=Z.value,K!=null?He(s,!!Z.multiple,K,!1):Z.defaultValue!=null&&He(s,!!Z.multiple,Z.defaultValue,!0);break;default:typeof k.onClick=="function"&&(s.onclick=sc)}switch(h){case"button":case"input":case"select":case"textarea":Z=!!Z.autoFocus;break e;case"img":Z=!0;break e;default:Z=!1}}Z&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Ko(c),null;case 6:if(s&&c.stateNode!=null)IG(s,c,s.memoizedProps,Z);else{if(typeof Z!="string"&&c.stateNode===null)throw Error(n(166));if(h=El(Bs.current),El(ia.current),cr(c)){if(Z=c.stateNode,h=c.memoizedProps,Z[sl]=c,(K=Z.nodeValue!==h)&&(s=We,s!==null))switch(s.tag){case 3:bd(Z.nodeValue,h,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&bd(Z.nodeValue,h,(s.mode&1)!==0)}K&&(c.flags|=4)}else Z=(h.nodeType===9?h:h.ownerDocument).createTextNode(Z),Z[sl]=c,c.stateNode=Z}return Ko(c),null;case 13:if(yr(Lr),Z=c.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(et&&tt!==null&&c.mode&1&&!(c.flags&128))ir(),Yn(),c.flags|=98560,K=!1;else if(K=cr(c),Z!==null&&Z.dehydrated!==null){if(s===null){if(!K)throw Error(n(318));if(K=c.memoizedState,K=K!==null?K.dehydrated:null,!K)throw Error(n(317));K[sl]=c}else Yn(),!(c.flags&128)&&(c.memoizedState=null),c.flags|=4;Ko(c),K=!1}else nt!==null&&(X0(nt),nt=null),K=!0;if(!K)return c.flags&65536?c:null}return c.flags&128?(c.lanes=h,c):(Z=Z!==null,Z!==(s!==null&&s.memoizedState!==null)&&Z&&(c.child.flags|=8192,c.mode&1&&(s===null||Lr.current&1?Qi===0&&(Qi=3):H0())),c.updateQueue!==null&&(c.flags|=4),Ko(c),null);case 4:return cl(),v0(s,c),s===null&&gg(c.stateNode.containerInfo),Ko(c),null;case 10:return Fo(c.type._context),Ko(c),null;case 17:return Eo(c.type)&&yd(),Ko(c),null;case 19:if(yr(Lr),K=c.memoizedState,K===null)return Ko(c),null;if(Z=(c.flags&128)!==0,ie=K.rendering,ie===null)if(Z)RC(K,!1);else{if(Qi!==0||s!==null&&s.flags&128)for(s=c.child;s!==null;){if(ie=Ka(s),ie!==null){for(c.flags|=128,RC(K,!1),Z=ie.updateQueue,Z!==null&&(c.updateQueue=Z,c.flags|=4),c.subtreeFlags=0,Z=h,h=c.child;h!==null;)K=h,s=Z,K.flags&=14680066,ie=K.alternate,ie===null?(K.childLanes=0,K.lanes=s,K.child=null,K.subtreeFlags=0,K.memoizedProps=null,K.memoizedState=null,K.updateQueue=null,K.dependencies=null,K.stateNode=null):(K.childLanes=ie.childLanes,K.lanes=ie.lanes,K.child=ie.child,K.subtreeFlags=0,K.deletions=null,K.memoizedProps=ie.memoizedProps,K.memoizedState=ie.memoizedState,K.updateQueue=ie.updateQueue,K.type=ie.type,s=ie.dependencies,K.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),h=h.sibling;return wr(Lr,Lr.current&1|2),c.child}s=s.sibling}K.tail!==null&&at()>xd&&(c.flags|=128,Z=!0,RC(K,!1),c.lanes=4194304)}else{if(!Z)if(s=Ka(ie),s!==null){if(c.flags|=128,Z=!0,h=s.updateQueue,h!==null&&(c.updateQueue=h,c.flags|=4),RC(K,!0),K.tail===null&&K.tailMode==="hidden"&&!ie.alternate&&!et)return Ko(c),null}else 2*at()-K.renderingStartTime>xd&&h!==1073741824&&(c.flags|=128,Z=!0,RC(K,!1),c.lanes=4194304);K.isBackwards?(ie.sibling=c.child,c.child=ie):(h=K.last,h!==null?h.sibling=ie:c.child=ie,K.last=ie)}return K.tail!==null?(c=K.tail,K.rendering=c,K.tail=c.sibling,K.renderingStartTime=at(),c.sibling=null,h=Lr.current,wr(Lr,Z?h&1|2:h&1),c):(Ko(c),null);case 22:case 23:return x0(),Z=c.memoizedState!==null,s!==null&&s.memoizedState!==null!==Z&&(c.flags|=8192),Z&&c.mode&1?Ta&1073741824&&(Ko(c),c.subtreeFlags&6&&(c.flags|=8192)):Ko(c),null;case 24:return null;case 25:return null}throw Error(n(156,c.tag))}function SY(s,c){switch(we(c),c.tag){case 1:return Eo(c.type)&&yd(),s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 3:return cl(),yr(Yo),yr(Ui),ZC(),s=c.flags,s&65536&&!(s&128)?(c.flags=s&-65537|128,c):null;case 5:return vC(c),null;case 13:if(yr(Lr),s=c.memoizedState,s!==null&&s.dehydrated!==null){if(c.alternate===null)throw Error(n(340));Yn()}return s=c.flags,s&65536?(c.flags=s&-65537|128,c):null;case 19:return yr(Lr),null;case 4:return cl(),null;case 10:return Fo(c.type._context),null;case 22:case 23:return x0(),null;case 24:return null;default:return null}}var eh=!1,Lo=!1,ZY=typeof WeakSet=="function"?WeakSet:Set,$t=null;function Xd(s,c){var h=s.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(Z){pi(s,c,Z)}else h.current=null}function S0(s,c,h){try{h()}catch(Z){pi(s,c,Z)}}var CG=!1;function GY(s,c){if(Su=Tg,s=mu(),og(s)){if("selectionStart"in s)var h={start:s.selectionStart,end:s.selectionEnd};else e:{h=(h=s.ownerDocument)&&h.defaultView||window;var Z=h.getSelection&&h.getSelection();if(Z&&Z.rangeCount!==0){h=Z.anchorNode;var k=Z.anchorOffset,K=Z.focusNode;Z=Z.focusOffset;try{h.nodeType,K.nodeType}catch{h=null;break e}var ie=0,pe=-1,Be=-1,Ue=0,bt=0,Zt=s,mt=null;t:for(;;){for(var Ut;Zt!==h||k!==0&&Zt.nodeType!==3||(pe=ie+k),Zt!==K||Z!==0&&Zt.nodeType!==3||(Be=ie+Z),Zt.nodeType===3&&(ie+=Zt.nodeValue.length),(Ut=Zt.firstChild)!==null;)mt=Zt,Zt=Ut;for(;;){if(Zt===s)break t;if(mt===h&&++Ue===k&&(pe=ie),mt===K&&++bt===Z&&(Be=ie),(Ut=Zt.nextSibling)!==null)break;Zt=mt,mt=Zt.parentNode}Zt=Ut}h=pe===-1||Be===-1?null:{start:pe,end:Be}}else h=null}h=h||{start:0,end:0}}else h=null;for(ug={focusedElem:s,selectionRange:h},Tg=!1,$t=c;$t!==null;)if(c=$t,s=c.child,(c.subtreeFlags&1028)!==0&&s!==null)s.return=c,$t=s;else for(;$t!==null;){c=$t;try{var tn=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if(tn!==null){var rn=tn.memoizedProps,Ni=tn.memoizedState,De=c.stateNode,Xe=De.getSnapshotBeforeUpdate(c.elementType===c.type?rn:Ll(c.type,rn),Ni);De.__reactInternalSnapshotBeforeUpdate=Xe}break;case 3:var Oe=c.stateNode.containerInfo;Oe.nodeType===1?Oe.textContent="":Oe.nodeType===9&&Oe.documentElement&&Oe.removeChild(Oe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Xt){pi(c,c.return,Xt)}if(s=c.sibling,s!==null){s.return=c.return,$t=s;break}$t=c.return}return tn=CG,CG=!1,tn}function wC(s,c,h){var Z=c.updateQueue;if(Z=Z!==null?Z.lastEffect:null,Z!==null){var k=Z=Z.next;do{if((k.tag&s)===s){var K=k.destroy;k.destroy=void 0,K!==void 0&&S0(c,h,K)}k=k.next}while(k!==Z)}}function th(s,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&s)===s){var Z=h.create;h.destroy=Z()}h=h.next}while(h!==c)}}function Z0(s){var c=s.ref;if(c!==null){var h=s.stateNode;switch(s.tag){case 5:s=h;break;default:s=h}typeof c=="function"?c(s):c.current=s}}function fG(s){var c=s.alternate;c!==null&&(s.alternate=null,fG(c)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(c=s.stateNode,c!==null&&(delete c[sl],delete c[gc],delete c[Ho],delete c[s0],delete c[g0])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function mG(s){return s.tag===5||s.tag===3||s.tag===4}function hG(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||mG(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function G0(s,c,h){var Z=s.tag;if(Z===5||Z===6)s=s.stateNode,c?h.nodeType===8?h.parentNode.insertBefore(s,c):h.insertBefore(s,c):(h.nodeType===8?(c=h.parentNode,c.insertBefore(s,h)):(c=h,c.appendChild(s)),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=sc));else if(Z!==4&&(s=s.child,s!==null))for(G0(s,c,h),s=s.sibling;s!==null;)G0(s,c,h),s=s.sibling}function B0(s,c,h){var Z=s.tag;if(Z===5||Z===6)s=s.stateNode,c?h.insertBefore(s,c):h.appendChild(s);else if(Z!==4&&(s=s.child,s!==null))for(B0(s,c,h),s=s.sibling;s!==null;)B0(s,c,h),s=s.sibling}var Go=null,Ml=!1;function Ac(s,c,h){for(h=h.child;h!==null;)AG(s,c,h),h=h.sibling}function AG(s,c,h){if(gn&&typeof gn.onCommitFiberUnmount=="function")try{gn.onCommitFiberUnmount(en,h)}catch{}switch(h.tag){case 5:Lo||Xd(h,c);case 6:var Z=Go,k=Ml;Go=null,Ac(s,c,h),Go=Z,Ml=k,Go!==null&&(Ml?(s=Go,h=h.stateNode,s.nodeType===8?s.parentNode.removeChild(h):s.removeChild(h)):Go.removeChild(h.stateNode));break;case 18:Go!==null&&(Ml?(s=Go,h=h.stateNode,s.nodeType===8?AC(s.parentNode,h):s.nodeType===1&&AC(s,h),no(s)):AC(Go,h.stateNode));break;case 4:Z=Go,k=Ml,Go=h.stateNode.containerInfo,Ml=!0,Ac(s,c,h),Go=Z,Ml=k;break;case 0:case 11:case 14:case 15:if(!Lo&&(Z=h.updateQueue,Z!==null&&(Z=Z.lastEffect,Z!==null))){k=Z=Z.next;do{var K=k,ie=K.destroy;K=K.tag,ie!==void 0&&(K&2||K&4)&&S0(h,c,ie),k=k.next}while(k!==Z)}Ac(s,c,h);break;case 1:if(!Lo&&(Xd(h,c),Z=h.stateNode,typeof Z.componentWillUnmount=="function"))try{Z.props=h.memoizedProps,Z.state=h.memoizedState,Z.componentWillUnmount()}catch(pe){pi(h,c,pe)}Ac(s,c,h);break;case 21:Ac(s,c,h);break;case 22:h.mode&1?(Lo=(Z=Lo)||h.memoizedState!==null,Ac(s,c,h),Lo=Z):Ac(s,c,h);break;default:Ac(s,c,h)}}function pG(s){var c=s.updateQueue;if(c!==null){s.updateQueue=null;var h=s.stateNode;h===null&&(h=s.stateNode=new ZY),c.forEach(function(Z){var k=JY.bind(null,s,Z);h.has(Z)||(h.add(Z),Z.then(k,k))})}}function Tl(s,c){var h=c.deletions;if(h!==null)for(var Z=0;Z<h.length;Z++){var k=h[Z];try{var K=s,ie=c,pe=ie;e:for(;pe!==null;){switch(pe.tag){case 5:Go=pe.stateNode,Ml=!1;break e;case 3:Go=pe.stateNode.containerInfo,Ml=!0;break e;case 4:Go=pe.stateNode.containerInfo,Ml=!0;break e}pe=pe.return}if(Go===null)throw Error(n(160));AG(K,ie,k),Go=null,Ml=!1;var Be=k.alternate;Be!==null&&(Be.return=null),k.return=null}catch(Ue){pi(k,c,Ue)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)bG(c,s),c=c.sibling}function bG(s,c){var h=s.alternate,Z=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Tl(c,s),ws(s),Z&4){try{wC(3,s,s.return),th(3,s)}catch(rn){pi(s,s.return,rn)}try{wC(5,s,s.return)}catch(rn){pi(s,s.return,rn)}}break;case 1:Tl(c,s),ws(s),Z&512&&h!==null&&Xd(h,h.return);break;case 5:if(Tl(c,s),ws(s),Z&512&&h!==null&&Xd(h,h.return),s.flags&32){var k=s.stateNode;try{It(k,"")}catch(rn){pi(s,s.return,rn)}}if(Z&4&&(k=s.stateNode,k!=null)){var K=s.memoizedProps,ie=h!==null?h.memoizedProps:K,pe=s.type,Be=s.updateQueue;if(s.updateQueue=null,Be!==null)try{pe==="input"&&K.type==="radio"&&K.name!=null&&ae(k,K),Wt(pe,ie);var Ue=Wt(pe,K);for(ie=0;ie<Be.length;ie+=2){var bt=Be[ie],Zt=Be[ie+1];bt==="style"?st(k,Zt):bt==="dangerouslySetInnerHTML"?it(k,Zt):bt==="children"?It(k,Zt):B(k,bt,Zt,Ue)}switch(pe){case"input":Ee(k,K);break;case"textarea":Pe(k,K);break;case"select":var mt=k._wrapperState.wasMultiple;k._wrapperState.wasMultiple=!!K.multiple;var Ut=K.value;Ut!=null?He(k,!!K.multiple,Ut,!1):mt!==!!K.multiple&&(K.defaultValue!=null?He(k,!!K.multiple,K.defaultValue,!0):He(k,!!K.multiple,K.multiple?[]:"",!1))}k[gc]=K}catch(rn){pi(s,s.return,rn)}}break;case 6:if(Tl(c,s),ws(s),Z&4){if(s.stateNode===null)throw Error(n(162));k=s.stateNode,K=s.memoizedProps;try{k.nodeValue=K}catch(rn){pi(s,s.return,rn)}}break;case 3:if(Tl(c,s),ws(s),Z&4&&h!==null&&h.memoizedState.isDehydrated)try{no(c.containerInfo)}catch(rn){pi(s,s.return,rn)}break;case 4:Tl(c,s),ws(s);break;case 13:Tl(c,s),ws(s),k=s.child,k.flags&8192&&(K=k.memoizedState!==null,k.stateNode.isHidden=K,!K||k.alternate!==null&&k.alternate.memoizedState!==null||(W0=at())),Z&4&&pG(s);break;case 22:if(bt=h!==null&&h.memoizedState!==null,s.mode&1?(Lo=(Ue=Lo)||bt,Tl(c,s),Lo=Ue):Tl(c,s),ws(s),Z&8192){if(Ue=s.memoizedState!==null,(s.stateNode.isHidden=Ue)&&!bt&&s.mode&1)for($t=s,bt=s.child;bt!==null;){for(Zt=$t=bt;$t!==null;){switch(mt=$t,Ut=mt.child,mt.tag){case 0:case 11:case 14:case 15:wC(4,mt,mt.return);break;case 1:Xd(mt,mt.return);var tn=mt.stateNode;if(typeof tn.componentWillUnmount=="function"){Z=mt,h=mt.return;try{c=Z,tn.props=c.memoizedProps,tn.state=c.memoizedState,tn.componentWillUnmount()}catch(rn){pi(Z,h,rn)}}break;case 5:Xd(mt,mt.return);break;case 22:if(mt.memoizedState!==null){SG(Zt);continue}}Ut!==null?(Ut.return=mt,$t=Ut):SG(Zt)}bt=bt.sibling}e:for(bt=null,Zt=s;;){if(Zt.tag===5){if(bt===null){bt=Zt;try{k=Zt.stateNode,Ue?(K=k.style,typeof K.setProperty=="function"?K.setProperty("display","none","important"):K.display="none"):(pe=Zt.stateNode,Be=Zt.memoizedProps.style,ie=Be!=null&&Be.hasOwnProperty("display")?Be.display:null,pe.style.display=Qe("display",ie))}catch(rn){pi(s,s.return,rn)}}}else if(Zt.tag===6){if(bt===null)try{Zt.stateNode.nodeValue=Ue?"":Zt.memoizedProps}catch(rn){pi(s,s.return,rn)}}else if((Zt.tag!==22&&Zt.tag!==23||Zt.memoizedState===null||Zt===s)&&Zt.child!==null){Zt.child.return=Zt,Zt=Zt.child;continue}if(Zt===s)break e;for(;Zt.sibling===null;){if(Zt.return===null||Zt.return===s)break e;bt===Zt&&(bt=null),Zt=Zt.return}bt===Zt&&(bt=null),Zt.sibling.return=Zt.return,Zt=Zt.sibling}}break;case 19:Tl(c,s),ws(s),Z&4&&pG(s);break;case 21:break;default:Tl(c,s),ws(s)}}function ws(s){var c=s.flags;if(c&2){try{e:{for(var h=s.return;h!==null;){if(mG(h)){var Z=h;break e}h=h.return}throw Error(n(160))}switch(Z.tag){case 5:var k=Z.stateNode;Z.flags&32&&(It(k,""),Z.flags&=-33);var K=hG(s);B0(s,K,k);break;case 3:case 4:var ie=Z.stateNode.containerInfo,pe=hG(s);G0(s,pe,ie);break;default:throw Error(n(161))}}catch(Be){pi(s,s.return,Be)}s.flags&=-3}c&4096&&(s.flags&=-4097)}function BY(s,c,h){$t=s,yG(s)}function yG(s,c,h){for(var Z=(s.mode&1)!==0;$t!==null;){var k=$t,K=k.child;if(k.tag===22&&Z){var ie=k.memoizedState!==null||eh;if(!ie){var pe=k.alternate,Be=pe!==null&&pe.memoizedState!==null||Lo;pe=eh;var Ue=Lo;if(eh=ie,(Lo=Be)&&!Ue)for($t=k;$t!==null;)ie=$t,Be=ie.child,ie.tag===22&&ie.memoizedState!==null?ZG(k):Be!==null?(Be.return=ie,$t=Be):ZG(k);for(;K!==null;)$t=K,yG(K),K=K.sibling;$t=k,eh=pe,Lo=Ue}vG(s)}else k.subtreeFlags&8772&&K!==null?(K.return=k,$t=K):vG(s)}}function vG(s){for(;$t!==null;){var c=$t;if(c.flags&8772){var h=c.alternate;try{if(c.flags&8772)switch(c.tag){case 0:case 11:case 15:Lo||th(5,c);break;case 1:var Z=c.stateNode;if(c.flags&4&&!Lo)if(h===null)Z.componentDidMount();else{var k=c.elementType===c.type?h.memoizedProps:Ll(c.type,h.memoizedProps);Z.componentDidUpdate(k,h.memoizedState,Z.__reactInternalSnapshotBeforeUpdate)}var K=c.updateQueue;K!==null&&mg(c,K,Z);break;case 3:var ie=c.updateQueue;if(ie!==null){if(h=null,c.child!==null)switch(c.child.tag){case 5:h=c.child.stateNode;break;case 1:h=c.child.stateNode}mg(c,ie,h)}break;case 5:var pe=c.stateNode;if(h===null&&c.flags&4){h=pe;var Be=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":Be.autoFocus&&h.focus();break;case"img":Be.src&&(h.src=Be.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var Ue=c.alternate;if(Ue!==null){var bt=Ue.memoizedState;if(bt!==null){var Zt=bt.dehydrated;Zt!==null&&no(Zt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Lo||c.flags&512&&Z0(c)}catch(mt){pi(c,c.return,mt)}}if(c===s){$t=null;break}if(h=c.sibling,h!==null){h.return=c.return,$t=h;break}$t=c.return}}function SG(s){for(;$t!==null;){var c=$t;if(c===s){$t=null;break}var h=c.sibling;if(h!==null){h.return=c.return,$t=h;break}$t=c.return}}function ZG(s){for(;$t!==null;){var c=$t;try{switch(c.tag){case 0:case 11:case 15:var h=c.return;try{th(4,c)}catch(Be){pi(c,h,Be)}break;case 1:var Z=c.stateNode;if(typeof Z.componentDidMount=="function"){var k=c.return;try{Z.componentDidMount()}catch(Be){pi(c,k,Be)}}var K=c.return;try{Z0(c)}catch(Be){pi(c,K,Be)}break;case 5:var ie=c.return;try{Z0(c)}catch(Be){pi(c,ie,Be)}}}catch(Be){pi(c,c.return,Be)}if(c===s){$t=null;break}var pe=c.sibling;if(pe!==null){pe.return=c.return,$t=pe;break}$t=c.return}}var RY=Math.ceil,nh=W.ReactCurrentDispatcher,R0=W.ReactCurrentOwner,Il=W.ReactCurrentBatchConfig,Cr=0,go=null,Li=null,Bo=0,Ta=0,Jd=Fa(0),Qi=0,WC=null,Wu=0,rh=0,w0=0,VC=null,Ba=null,W0=0,xd=1/0,pg=null,ih=!1,V0=null,pc=null,oh=!1,bc=null,ah=0,kC=0,k0=null,lh=-1,sh=0;function sa(){return Cr&6?at():lh!==-1?lh:lh=at()}function yc(s){return s.mode&1?Cr&2&&Bo!==0?Bo&-Bo:Wr.transition!==null?(sh===0&&(sh=zn()),sh):(s=Sn,s!==0||(s=window.event,s=s===void 0?16:cu(s.type)),s):1}function zl(s,c,h,Z){if(50<kC)throw kC=0,k0=null,Error(n(185));rr(s,h,Z),(!(Cr&2)||s!==go)&&(s===go&&(!(Cr&2)&&(rh|=h),Qi===4&&vc(s,Bo)),Ra(s,Z),h===1&&Cr===0&&!(c.mode&1)&&(xd=at()+500,Gu&&T()))}function Ra(s,c){var h=s.callbackNode;Nt(s,c);var Z=Gn(s,s===go?Bo:0);if(Z===0)h!==null&&At(h),s.callbackNode=null,s.callbackPriority=0;else if(c=Z&-Z,s.callbackPriority!==c){if(h!=null&&At(h),c===1)s.tag===0?N(BG.bind(null,s)):G(BG.bind(null,s)),a0(function(){!(Cr&6)&&T()}),h=null;else{switch(jr(Z)){case 1:h=An;break;case 4:h=Tn;break;case 16:h=tr;break;case 536870912:h=Kt;break;default:h=tr}h=JG(h,GG.bind(null,s))}s.callbackPriority=c,s.callbackNode=h}}function GG(s,c){if(lh=-1,sh=0,Cr&6)throw Error(n(327));var h=s.callbackNode;if(Hd()&&s.callbackNode!==h)return null;var Z=Gn(s,s===go?Bo:0);if(Z===0)return null;if(Z&30||Z&s.expiredLanes||c)c=gh(s,Z);else{c=Z;var k=Cr;Cr|=2;var K=wG();(go!==s||Bo!==c)&&(pg=null,xd=at()+500,ku(s,c));do try{VY();break}catch(pe){RG(s,pe)}while(!0);ji(),nh.current=K,Cr=k,Li!==null?c=0:(go=null,Bo=0,c=Qi)}if(c!==0){if(c===2&&(k=Kn(s),k!==0&&(Z=k,c=N0(s,k))),c===1)throw h=WC,ku(s,0),vc(s,Z),Ra(s,at()),h;if(c===6)vc(s,Z);else{if(k=s.current.alternate,!(Z&30)&&!wY(k)&&(c=gh(s,Z),c===2&&(K=Kn(s),K!==0&&(Z=K,c=N0(s,K))),c===1))throw h=WC,ku(s,0),vc(s,Z),Ra(s,at()),h;switch(s.finishedWork=k,s.finishedLanes=Z,c){case 0:case 1:throw Error(n(345));case 2:Nu(s,Ba,pg);break;case 3:if(vc(s,Z),(Z&130023424)===Z&&(c=W0+500-at(),10<c)){if(Gn(s,0)!==0)break;if(k=s.suspendedLanes,(k&Z)!==Z){sa(),s.pingedLanes|=s.suspendedLanes&k;break}s.timeoutHandle=hC(Nu.bind(null,s,Ba,pg),c);break}Nu(s,Ba,pg);break;case 4:if(vc(s,Z),(Z&4194240)===Z)break;for(c=s.eventTimes,k=-1;0<Z;){var ie=31-Ar(Z);K=1<<ie,ie=c[ie],ie>k&&(k=ie),Z&=~K}if(Z=k,Z=at()-Z,Z=(120>Z?120:480>Z?480:1080>Z?1080:1920>Z?1920:3e3>Z?3e3:4320>Z?4320:1960*RY(Z/1960))-Z,10<Z){s.timeoutHandle=hC(Nu.bind(null,s,Ba,pg),Z);break}Nu(s,Ba,pg);break;case 5:Nu(s,Ba,pg);break;default:throw Error(n(329))}}}return Ra(s,at()),s.callbackNode===h?GG.bind(null,s):null}function N0(s,c){var h=VC;return s.current.memoizedState.isDehydrated&&(ku(s,c).flags|=256),s=gh(s,c),s!==2&&(c=Ba,Ba=h,c!==null&&X0(c)),s}function X0(s){Ba===null?Ba=s:Ba.push.apply(Ba,s)}function wY(s){for(var c=s;;){if(c.flags&16384){var h=c.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var Z=0;Z<h.length;Z++){var k=h[Z],K=k.getSnapshot;k=k.value;try{if(!Ir(K(),k))return!1}catch{return!1}}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function vc(s,c){for(c&=~w0,c&=~rh,s.suspendedLanes|=c,s.pingedLanes&=~c,s=s.expirationTimes;0<c;){var h=31-Ar(c),Z=1<<h;s[h]=-1,c&=~Z}}function BG(s){if(Cr&6)throw Error(n(327));Hd();var c=Gn(s,0);if(!(c&1))return Ra(s,at()),null;var h=gh(s,c);if(s.tag!==0&&h===2){var Z=Kn(s);Z!==0&&(c=Z,h=N0(s,Z))}if(h===1)throw h=WC,ku(s,0),vc(s,c),Ra(s,at()),h;if(h===6)throw Error(n(345));return s.finishedWork=s.current.alternate,s.finishedLanes=c,Nu(s,Ba,pg),Ra(s,at()),null}function J0(s,c){var h=Cr;Cr|=1;try{return s(c)}finally{Cr=h,Cr===0&&(xd=at()+500,Gu&&T())}}function Vu(s){bc!==null&&bc.tag===0&&!(Cr&6)&&Hd();var c=Cr;Cr|=1;var h=Il.transition,Z=Sn;try{if(Il.transition=null,Sn=1,s)return s()}finally{Sn=Z,Il.transition=h,Cr=c,!(Cr&6)&&T()}}function x0(){Ta=Jd.current,yr(Jd)}function ku(s,c){s.finishedWork=null,s.finishedLanes=0;var h=s.timeoutHandle;if(h!==-1&&(s.timeoutHandle=-1,Lm(h)),Li!==null)for(h=Li.return;h!==null;){var Z=h;switch(we(Z),Z.tag){case 1:Z=Z.type.childContextTypes,Z!=null&&yd();break;case 3:cl(),yr(Yo),yr(Ui),ZC();break;case 5:vC(Z);break;case 4:cl();break;case 13:yr(Lr);break;case 19:yr(Lr);break;case 10:Fo(Z.type._context);break;case 22:case 23:x0()}h=h.return}if(go=s,Li=s=Sc(s.current,null),Bo=Ta=c,Qi=0,WC=null,w0=rh=Wu=0,Ba=VC=null,ra!==null){for(c=0;c<ra.length;c++)if(h=ra[c],Z=h.interleaved,Z!==null){h.interleaved=null;var k=Z.next,K=h.pending;if(K!==null){var ie=K.next;K.next=k,Z.next=ie}h.pending=Z}ra=null}return s}function RG(s,c){do{var h=Li;try{if(ji(),Sd.current=jm,fc){for(var Z=Or.memoizedState;Z!==null;){var k=Z.queue;k!==null&&(k.pending=null),Z=Z.next}fc=!1}if(ul=0,ci=Ai=Or=null,Fl=!1,mc=0,R0.current=null,h===null||h.return===null){Qi=1,WC=c,Li=null;break}e:{var K=s,ie=h.return,pe=h,Be=c;if(c=Bo,pe.flags|=32768,Be!==null&&typeof Be=="object"&&typeof Be.then=="function"){var Ue=Be,bt=pe,Zt=bt.tag;if(!(bt.mode&1)&&(Zt===0||Zt===11||Zt===15)){var mt=bt.alternate;mt?(bt.updateQueue=mt.updateQueue,bt.memoizedState=mt.memoizedState,bt.lanes=mt.lanes):(bt.updateQueue=null,bt.memoizedState=null)}var Ut=$1(ie);if(Ut!==null){Ut.flags&=-257,q1(Ut,ie,pe,K,c),Ut.mode&1&&Q1(K,Ue,c),c=Ut,Be=Ue;var tn=c.updateQueue;if(tn===null){var rn=new Set;rn.add(Be),c.updateQueue=rn}else tn.add(Be);break e}else{if(!(c&1)){Q1(K,Ue,c),H0();break e}Be=Error(n(426))}}else if(et&&pe.mode&1){var Ni=$1(ie);if(Ni!==null){!(Ni.flags&65536)&&(Ni.flags|=256),q1(Ni,ie,pe,K,c),vr(Nd(Be,pe));break e}}K=Be=Nd(Be,pe),Qi!==4&&(Qi=2),VC===null?VC=[K]:VC.push(K),K=ie;do{switch(K.tag){case 3:K.flags|=65536,c&=-c,K.lanes|=c;var De=U1(K,Be,c);Za(K,De);break e;case 1:pe=Be;var Xe=K.type,Oe=K.stateNode;if(!(K.flags&128)&&(typeof Xe.getDerivedStateFromError=="function"||Oe!==null&&typeof Oe.componentDidCatch=="function"&&(pc===null||!pc.has(Oe)))){K.flags|=65536,c&=-c,K.lanes|=c;var Xt=j1(K,pe,c);Za(K,Xt);break e}}K=K.return}while(K!==null)}VG(h)}catch(on){c=on,Li===h&&h!==null&&(Li=h=h.return);continue}break}while(!0)}function wG(){var s=nh.current;return nh.current=jm,s===null?jm:s}function H0(){(Qi===0||Qi===3||Qi===2)&&(Qi=4),go===null||!(Wu&268435455)&&!(rh&268435455)||vc(go,Bo)}function gh(s,c){var h=Cr;Cr|=2;var Z=wG();(go!==s||Bo!==c)&&(pg=null,ku(s,c));do try{WY();break}catch(k){RG(s,k)}while(!0);if(ji(),Cr=h,nh.current=Z,Li!==null)throw Error(n(261));return go=null,Bo=0,Qi}function WY(){for(;Li!==null;)WG(Li)}function VY(){for(;Li!==null&&!Ht();)WG(Li)}function WG(s){var c=XG(s.alternate,s,Ta);s.memoizedProps=s.pendingProps,c===null?VG(s):Li=c,R0.current=null}function VG(s){var c=s;do{var h=c.alternate;if(s=c.return,c.flags&32768){if(h=SY(h,c),h!==null){h.flags&=32767,Li=h;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Qi=6,Li=null;return}}else if(h=vY(h,c,Ta),h!==null){Li=h;return}if(c=c.sibling,c!==null){Li=c;return}Li=c=s}while(c!==null);Qi===0&&(Qi=5)}function Nu(s,c,h){var Z=Sn,k=Il.transition;try{Il.transition=null,Sn=1,kY(s,c,h,Z)}finally{Il.transition=k,Sn=Z}return null}function kY(s,c,h,Z){do Hd();while(bc!==null);if(Cr&6)throw Error(n(327));h=s.finishedWork;var k=s.finishedLanes;if(h===null)return null;if(s.finishedWork=null,s.finishedLanes=0,h===s.current)throw Error(n(177));s.callbackNode=null,s.callbackPriority=0;var K=h.lanes|h.childLanes;if(Bi(s,K),s===go&&(Li=go=null,Bo=0),!(h.subtreeFlags&2064)&&!(h.flags&2064)||oh||(oh=!0,JG(tr,function(){return Hd(),null})),K=(h.flags&15990)!==0,h.subtreeFlags&15990||K){K=Il.transition,Il.transition=null;var ie=Sn;Sn=1;var pe=Cr;Cr|=4,R0.current=null,GY(s,h),bG(h,s),ag(ug),Tg=!!Su,ug=Su=null,s.current=h,BY(h),Yt(),Cr=pe,Sn=ie,Il.transition=K}else s.current=h;if(oh&&(oh=!1,bc=s,ah=k),K=s.pendingLanes,K===0&&(pc=null),kr(h.stateNode),Ra(s,at()),c!==null)for(Z=s.onRecoverableError,h=0;h<c.length;h++)k=c[h],Z(k.value,{componentStack:k.stack,digest:k.digest});if(ih)throw ih=!1,s=V0,V0=null,s;return ah&1&&s.tag!==0&&Hd(),K=s.pendingLanes,K&1?s===k0?kC++:(kC=0,k0=s):kC=0,T(),null}function Hd(){if(bc!==null){var s=jr(ah),c=Il.transition,h=Sn;try{if(Il.transition=null,Sn=16>s?16:s,bc===null)var Z=!1;else{if(s=bc,bc=null,ah=0,Cr&6)throw Error(n(331));var k=Cr;for(Cr|=4,$t=s.current;$t!==null;){var K=$t,ie=K.child;if($t.flags&16){var pe=K.deletions;if(pe!==null){for(var Be=0;Be<pe.length;Be++){var Ue=pe[Be];for($t=Ue;$t!==null;){var bt=$t;switch(bt.tag){case 0:case 11:case 15:wC(8,bt,K)}var Zt=bt.child;if(Zt!==null)Zt.return=bt,$t=Zt;else for(;$t!==null;){bt=$t;var mt=bt.sibling,Ut=bt.return;if(fG(bt),bt===Ue){$t=null;break}if(mt!==null){mt.return=Ut,$t=mt;break}$t=Ut}}}var tn=K.alternate;if(tn!==null){var rn=tn.child;if(rn!==null){tn.child=null;do{var Ni=rn.sibling;rn.sibling=null,rn=Ni}while(rn!==null)}}$t=K}}if(K.subtreeFlags&2064&&ie!==null)ie.return=K,$t=ie;else e:for(;$t!==null;){if(K=$t,K.flags&2048)switch(K.tag){case 0:case 11:case 15:wC(9,K,K.return)}var De=K.sibling;if(De!==null){De.return=K.return,$t=De;break e}$t=K.return}}var Xe=s.current;for($t=Xe;$t!==null;){ie=$t;var Oe=ie.child;if(ie.subtreeFlags&2064&&Oe!==null)Oe.return=ie,$t=Oe;else e:for(ie=Xe;$t!==null;){if(pe=$t,pe.flags&2048)try{switch(pe.tag){case 0:case 11:case 15:th(9,pe)}}catch(on){pi(pe,pe.return,on)}if(pe===ie){$t=null;break e}var Xt=pe.sibling;if(Xt!==null){Xt.return=pe.return,$t=Xt;break e}$t=pe.return}}if(Cr=k,T(),gn&&typeof gn.onPostCommitFiberRoot=="function")try{gn.onPostCommitFiberRoot(en,s)}catch{}Z=!0}return Z}finally{Sn=h,Il.transition=c}}return!1}function kG(s,c,h){c=Nd(h,c),c=U1(s,c,1),s=Sa(s,c,1),c=sa(),s!==null&&(rr(s,1,c),Ra(s,c))}function pi(s,c,h){if(s.tag===3)kG(s,s,h);else for(;c!==null;){if(c.tag===3){kG(c,s,h);break}else if(c.tag===1){var Z=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof Z.componentDidCatch=="function"&&(pc===null||!pc.has(Z))){s=Nd(h,s),s=j1(c,s,1),c=Sa(c,s,1),s=sa(),c!==null&&(rr(c,1,s),Ra(c,s));break}}c=c.return}}function NY(s,c,h){var Z=s.pingCache;Z!==null&&Z.delete(c),c=sa(),s.pingedLanes|=s.suspendedLanes&h,go===s&&(Bo&h)===h&&(Qi===4||Qi===3&&(Bo&130023424)===Bo&&500>at()-W0?ku(s,0):w0|=h),Ra(s,c)}function NG(s,c){c===0&&(s.mode&1?(c=Ur,Ur<<=1,!(Ur&130023424)&&(Ur=4194304)):c=1);var h=sa();s=mr(s,c),s!==null&&(rr(s,c,h),Ra(s,h))}function XY(s){var c=s.memoizedState,h=0;c!==null&&(h=c.retryLane),NG(s,h)}function JY(s,c){var h=0;switch(s.tag){case 13:var Z=s.stateNode,k=s.memoizedState;k!==null&&(h=k.retryLane);break;case 19:Z=s.stateNode;break;default:throw Error(n(314))}Z!==null&&Z.delete(c),NG(s,h)}var XG;XG=function(s,c,h){if(s!==null)if(s.memoizedProps!==c.pendingProps||Yo.current)Ga=!0;else{if(!(s.lanes&h)&&!(c.flags&128))return Ga=!1,yY(s,c,h);Ga=!!(s.flags&131072)}else Ga=!1,et&&c.flags&1048576&&gt(c,le,c.index);switch(c.lanes=0,c.tag){case 2:var Z=c.type;qm(s,c),s=c.pendingProps;var k=uc(c,Ui.current);ei(c,h),k=Bu(null,c,Z,s,k,h);var K=dl();return c.flags|=1,typeof k=="object"&&k!==null&&typeof k.render=="function"&&k.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,Eo(Z)?(K=!0,Cg(c)):K=!1,c.memoizedState=k.state!==null&&k.state!==void 0?k.state:null,vd(c),k.updater=Qm,c.stateNode=k,k._reactInternals=c,I0(c,Z,s,h),c=h0(null,c,Z,!0,K,h)):(c.tag=0,et&&K&&je(c),la(null,c,k,h),c=c.child),c;case 16:Z=c.elementType;e:{switch(qm(s,c),s=c.pendingProps,k=Z._init,Z=k(Z._payload),c.type=Z,k=c.tag=HY(Z),s=Ll(Z,s),k){case 0:c=m0(null,c,Z,s,h);break e;case 1:c=oG(null,c,Z,s,h);break e;case 11:c=eG(null,c,Z,s,h);break e;case 14:c=tG(null,c,Z,Ll(Z.type,s),h);break e}throw Error(n(306,Z,""))}return c;case 0:return Z=c.type,k=c.pendingProps,k=c.elementType===Z?k:Ll(Z,k),m0(s,c,Z,k,h);case 1:return Z=c.type,k=c.pendingProps,k=c.elementType===Z?k:Ll(Z,k),oG(s,c,Z,k,h);case 3:e:{if(aG(c),s===null)throw Error(n(387));Z=c.pendingProps,K=c.memoizedState,k=K.element,yC(s,c),Yl(c,Z,null,h);var ie=c.memoizedState;if(Z=ie.element,K.isDehydrated)if(K={element:Z,isDehydrated:!1,cache:ie.cache,pendingSuspenseBoundaries:ie.pendingSuspenseBoundaries,transitions:ie.transitions},c.updateQueue.baseState=K,c.memoizedState=K,c.flags&256){k=Nd(Error(n(423)),c),c=lG(s,c,Z,h,k);break e}else if(Z!==k){k=Nd(Error(n(424)),c),c=lG(s,c,Z,h,k);break e}else for(tt=So(c.stateNode.containerInfo.firstChild),We=c,et=!0,nt=null,h=fr(c,null,Z,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(Yn(),Z===k){c=Ag(s,c,h);break e}la(s,c,Z,h)}c=c.child}return c;case 5:return Dm(c),s===null&&Lt(c),Z=c.type,k=c.pendingProps,K=s!==null?s.memoizedProps:null,ie=k.children,mC(Z,k)?ie=null:K!==null&&mC(Z,K)&&(c.flags|=32),iG(s,c),la(s,c,ie,h),c.child;case 6:return s===null&&Lt(c),null;case 13:return sG(s,c,h);case 4:return Cc(c,c.stateNode.containerInfo),Z=c.pendingProps,s===null?c.child=Wi(c,null,Z,h):la(s,c,Z,h),c.child;case 11:return Z=c.type,k=c.pendingProps,k=c.elementType===Z?k:Ll(Z,k),eG(s,c,Z,k,h);case 7:return la(s,c,c.pendingProps,h),c.child;case 8:return la(s,c,c.pendingProps.children,h),c.child;case 12:return la(s,c,c.pendingProps.children,h),c.child;case 10:e:{if(Z=c.type._context,k=c.pendingProps,K=c.memoizedProps,ie=k.value,wr(lo,Z._currentValue),Z._currentValue=ie,K!==null)if(Ir(K.value,ie)){if(K.children===k.children&&!Yo.current){c=Ag(s,c,h);break e}}else for(K=c.child,K!==null&&(K.return=c);K!==null;){var pe=K.dependencies;if(pe!==null){ie=K.child;for(var Be=pe.firstContext;Be!==null;){if(Be.context===Z){if(K.tag===1){Be=va(-1,h&-h),Be.tag=2;var Ue=K.updateQueue;if(Ue!==null){Ue=Ue.shared;var bt=Ue.pending;bt===null?Be.next=Be:(Be.next=bt.next,bt.next=Be),Ue.pending=Be}}K.lanes|=h,Be=K.alternate,Be!==null&&(Be.lanes|=h),ya(K.return,h,c),pe.lanes|=h;break}Be=Be.next}}else if(K.tag===10)ie=K.type===c.type?null:K.child;else if(K.tag===18){if(ie=K.return,ie===null)throw Error(n(341));ie.lanes|=h,pe=ie.alternate,pe!==null&&(pe.lanes|=h),ya(ie,h,c),ie=K.sibling}else ie=K.child;if(ie!==null)ie.return=K;else for(ie=K;ie!==null;){if(ie===c){ie=null;break}if(K=ie.sibling,K!==null){K.return=ie.return,ie=K;break}ie=ie.return}K=ie}la(s,c,k.children,h),c=c.child}return c;case 9:return k=c.type,Z=c.pendingProps.children,ei(c,h),k=hi(k),Z=Z(k),c.flags|=1,la(s,c,Z,h),c.child;case 14:return Z=c.type,k=Ll(Z,c.pendingProps),k=Ll(Z.type,k),tG(s,c,Z,k,h);case 15:return nG(s,c,c.type,c.pendingProps,h);case 17:return Z=c.type,k=c.pendingProps,k=c.elementType===Z?k:Ll(Z,k),qm(s,c),c.tag=1,Eo(Z)?(s=!0,Cg(c)):s=!1,ei(c,h),O1(c,Z,k),I0(c,Z,k,h),h0(null,c,Z,!0,s,h);case 19:return cG(s,c,h);case 22:return rG(s,c,h)}throw Error(n(156,c.tag))};function JG(s,c){return Pn(s,c)}function xY(s,c,h,Z){this.tag=s,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Z,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cl(s,c,h,Z){return new xY(s,c,h,Z)}function Y0(s){return s=s.prototype,!(!s||!s.isReactComponent)}function HY(s){if(typeof s=="function")return Y0(s)?1:0;if(s!=null){if(s=s.$$typeof,s===Y)return 11;if(s===$)return 14}return 2}function Sc(s,c){var h=s.alternate;return h===null?(h=Cl(s.tag,c,s.key,s.mode),h.elementType=s.elementType,h.type=s.type,h.stateNode=s.stateNode,h.alternate=s,s.alternate=h):(h.pendingProps=c,h.type=s.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=s.flags&14680064,h.childLanes=s.childLanes,h.lanes=s.lanes,h.child=s.child,h.memoizedProps=s.memoizedProps,h.memoizedState=s.memoizedState,h.updateQueue=s.updateQueue,c=s.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=s.sibling,h.index=s.index,h.ref=s.ref,h}function ch(s,c,h,Z,k,K){var ie=2;if(Z=s,typeof s=="function")Y0(s)&&(ie=1);else if(typeof s=="string")ie=5;else e:switch(s){case x:return Xu(h.children,k,K,c);case E:ie=8,k|=8;break;case F:return s=Cl(12,h,c,k|2),s.elementType=F,s.lanes=K,s;case M:return s=Cl(13,h,c,k),s.elementType=M,s.lanes=K,s;case L:return s=Cl(19,h,c,k),s.elementType=L,s.lanes=K,s;case _:return uh(h,k,K,c);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case w:ie=10;break e;case V:ie=9;break e;case Y:ie=11;break e;case $:ie=14;break e;case U:ie=16,Z=null;break e}throw Error(n(130,s==null?s:typeof s,""))}return c=Cl(ie,h,c,k),c.elementType=s,c.type=Z,c.lanes=K,c}function Xu(s,c,h,Z){return s=Cl(7,s,Z,c),s.lanes=h,s}function uh(s,c,h,Z){return s=Cl(22,s,Z,c),s.elementType=_,s.lanes=h,s.stateNode={isHidden:!1},s}function E0(s,c,h){return s=Cl(6,s,null,c),s.lanes=h,s}function F0(s,c,h){return c=Cl(4,s.children!==null?s.children:[],s.key,c),c.lanes=h,c.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},c}function YY(s,c,h,Z,k){this.tag=c,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nr(0),this.expirationTimes=nr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nr(0),this.identifierPrefix=Z,this.onRecoverableError=k,this.mutableSourceEagerHydrationData=null}function K0(s,c,h,Z,k,K,ie,pe,Be){return s=new YY(s,c,h,pe,Be),c===1?(c=1,K===!0&&(c|=8)):c=0,K=Cl(3,null,null,c),s.current=K,K.stateNode=s,K.memoizedState={element:Z,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},vd(K),s}function EY(s,c,h){var Z=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:H,key:Z==null?null:""+Z,children:s,containerInfo:c,implementation:h}}function xG(s){if(!s)return Zs;s=s._reactInternals;e:{if(qt(s)!==s||s.tag!==1)throw Error(n(170));var c=s;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(Eo(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(n(171))}if(s.tag===1){var h=s.type;if(Eo(h))return bC(s,h,c)}return c}function HG(s,c,h,Z,k,K,ie,pe,Be){return s=K0(h,Z,!0,s,k,K,ie,pe,Be),s.context=xG(null),h=s.current,Z=sa(),k=yc(h),K=va(Z,k),K.callback=c??null,Sa(h,K,k),s.current.lanes=k,rr(s,k,Z),Ra(s,Z),s}function dh(s,c,h,Z){var k=c.current,K=sa(),ie=yc(k);return h=xG(h),c.context===null?c.context=h:c.pendingContext=h,c=va(K,ie),c.payload={element:s},Z=Z===void 0?null:Z,Z!==null&&(c.callback=Z),s=Sa(k,c,ie),s!==null&&(zl(s,k,ie,K),fg(s,k,ie)),ie}function Ih(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function YG(s,c){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var h=s.retryLane;s.retryLane=h!==0&&h<c?h:c}}function L0(s,c){YG(s,c),(s=s.alternate)&&YG(s,c)}function FY(){return null}var EG=typeof reportError=="function"?reportError:function(s){console.error(s)};function M0(s){this._internalRoot=s}Ch.prototype.render=M0.prototype.render=function(s){var c=this._internalRoot;if(c===null)throw Error(n(409));dh(s,c,null,null)},Ch.prototype.unmount=M0.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var c=s.containerInfo;Vu(function(){dh(null,s,null,null)}),c[ao]=null}};function Ch(s){this._internalRoot=s}Ch.prototype.unstable_scheduleHydration=function(s){if(s){var c=Wo();s={blockedOn:null,target:s,priority:c};for(var h=0;h<ko.length&&c!==0&&c<ko[h].priority;h++);ko.splice(h,0,s),h===0&&Hr(s)}};function T0(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function fh(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function FG(){}function KY(s,c,h,Z,k){if(k){if(typeof Z=="function"){var K=Z;Z=function(){var Ue=Ih(ie);K.call(Ue)}}var ie=HG(c,Z,s,0,null,!1,!1,"",FG);return s._reactRootContainer=ie,s[ao]=ie.current,gg(s.nodeType===8?s.parentNode:s),Vu(),ie}for(;k=s.lastChild;)s.removeChild(k);if(typeof Z=="function"){var pe=Z;Z=function(){var Ue=Ih(Be);pe.call(Ue)}}var Be=K0(s,0,!1,null,null,!1,!1,"",FG);return s._reactRootContainer=Be,s[ao]=Be.current,gg(s.nodeType===8?s.parentNode:s),Vu(function(){dh(c,Be,h,Z)}),Be}function mh(s,c,h,Z,k){var K=h._reactRootContainer;if(K){var ie=K;if(typeof k=="function"){var pe=k;k=function(){var Be=Ih(ie);pe.call(Be)}}dh(c,ie,s,k)}else ie=KY(h,c,s,k,Z);return Ih(ie)}di=function(s){switch(s.tag){case 3:var c=s.stateNode;if(c.current.memoizedState.isDehydrated){var h=to(c.pendingLanes);h!==0&&(Pr(c,h|1),Ra(c,at()),!(Cr&6)&&(xd=at()+500,T()))}break;case 13:Vu(function(){var Z=mr(s,1);if(Z!==null){var k=sa();zl(Z,s,1,k)}}),L0(s,1)}},Fi=function(s){if(s.tag===13){var c=mr(s,134217728);if(c!==null){var h=sa();zl(c,s,134217728,h)}L0(s,134217728)}},Ii=function(s){if(s.tag===13){var c=yc(s),h=mr(s,c);if(h!==null){var Z=sa();zl(h,s,c,Z)}L0(s,c)}},Wo=function(){return Sn},Ci=function(s,c){var h=Sn;try{return Sn=s,c()}finally{Sn=h}},mn=function(s,c,h){switch(c){case"input":if(Ee(s,h),c=h.name,h.type==="radio"&&c!=null){for(h=s;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<h.length;c++){var Z=h[c];if(Z!==s&&Z.form===s.form){var k=Zu(Z);if(!k)throw Error(n(90));be(Z),Ee(Z,k)}}}break;case"textarea":Pe(s,h);break;case"select":c=h.value,c!=null&&He(s,!!h.multiple,c,!1)}},ln=J0,Vt=Vu;var LY={usingClientEntryPoint:!1,Events:[cc,dg,Zu,Jt,jt,J0]},NC={findFiberByHostInstance:Ss,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},MY={bundleType:NC.bundleType,version:NC.version,rendererPackageName:NC.rendererPackageName,rendererConfig:NC.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:W.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=ar(s),s===null?null:s.stateNode},findFiberByHostInstance:NC.findFiberByHostInstance||FY,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hh.isDisabled&&hh.supportsFiber)try{en=hh.inject(MY),gn=hh}catch{}}return wa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LY,wa.createPortal=function(s,c){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!T0(c))throw Error(n(200));return EY(s,c,null,h)},wa.createRoot=function(s,c){if(!T0(s))throw Error(n(299));var h=!1,Z="",k=EG;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(Z=c.identifierPrefix),c.onRecoverableError!==void 0&&(k=c.onRecoverableError)),c=K0(s,1,!1,null,null,h,!1,Z,k),s[ao]=c.current,gg(s.nodeType===8?s.parentNode:s),new M0(c)},wa.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var c=s._reactInternals;if(c===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=ar(c),s=s===null?null:s.stateNode,s},wa.flushSync=function(s){return Vu(s)},wa.hydrate=function(s,c,h){if(!fh(c))throw Error(n(200));return mh(null,s,c,!0,h)},wa.hydrateRoot=function(s,c,h){if(!T0(s))throw Error(n(405));var Z=h!=null&&h.hydratedSources||null,k=!1,K="",ie=EG;if(h!=null&&(h.unstable_strictMode===!0&&(k=!0),h.identifierPrefix!==void 0&&(K=h.identifierPrefix),h.onRecoverableError!==void 0&&(ie=h.onRecoverableError)),c=HG(c,null,s,1,h??null,k,!1,K,ie),s[ao]=c.current,gg(s),Z)for(s=0;s<Z.length;s++)h=Z[s],k=h._getVersion,k=k(h._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[h,k]:c.mutableSourceEagerHydrationData.push(h,k);return new Ch(c)},wa.render=function(s,c,h){if(!fh(c))throw Error(n(200));return mh(null,s,c,!1,h)},wa.unmountComponentAtNode=function(s){if(!fh(s))throw Error(n(40));return s._reactRootContainer?(Vu(function(){mh(null,null,s,!1,function(){s._reactRootContainer=null,s[ao]=null})}),!0):!1},wa.unstable_batchedUpdates=J0,wa.unstable_renderSubtreeIntoContainer=function(s,c,h,Z){if(!fh(h))throw Error(n(200));if(s==null||s._reactInternals===void 0)throw Error(n(38));return mh(s,c,h,!1,Z)},wa.version="18.3.1-next-f1338f8080-20240426",wa}var OG;function wV(){if(OG)return P0.exports;OG=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),P0.exports=jY(),P0.exports}var _G;function QY(){if(_G)return Ah;_G=1;var e=wV();return Ah.createRoot=e.createRoot,Ah.hydrateRoot=e.hydrateRoot,Ah}var $Y=QY(),JC={},UG;function qY(){if(UG)return JC;UG=1,Object.defineProperty(JC,"__esModule",{value:!0}),JC.parse=a,JC.serialize=u;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,o=(()=>{const f=function(){};return f.prototype=Object.create(null),f})();function a(f,m){const b=new o,p=f.length;if(p<2)return b;const y=(m==null?void 0:m.decode)||d;let S=0;do{const v=f.indexOf("=",S);if(v===-1)break;const B=f.indexOf(";",S),W=B===-1?p:B;if(v>W){S=f.lastIndexOf(";",v-1)+1;continue}const J=l(f,S,v),H=g(f,v,J),x=f.slice(J,H);if(b[x]===void 0){let E=l(f,v+1,W),F=g(f,W,E);const w=y(f.slice(E,F));b[x]=w}S=W+1}while(S<p);return b}function l(f,m,b){do{const p=f.charCodeAt(m);if(p!==32&&p!==9)return m}while(++m<b);return b}function g(f,m,b){for(;m>b;){const p=f.charCodeAt(--m);if(p!==32&&p!==9)return m+1}return b}function u(f,m,b){const p=(b==null?void 0:b.encode)||encodeURIComponent;if(!e.test(f))throw new TypeError(`argument name is invalid: ${f}`);const y=p(m);if(!t.test(y))throw new TypeError(`argument val is invalid: ${m}`);let S=f+"="+y;if(!b)return S;if(b.maxAge!==void 0){if(!Number.isInteger(b.maxAge))throw new TypeError(`option maxAge is invalid: ${b.maxAge}`);S+="; Max-Age="+b.maxAge}if(b.domain){if(!n.test(b.domain))throw new TypeError(`option domain is invalid: ${b.domain}`);S+="; Domain="+b.domain}if(b.path){if(!r.test(b.path))throw new TypeError(`option path is invalid: ${b.path}`);S+="; Path="+b.path}if(b.expires){if(!C(b.expires)||!Number.isFinite(b.expires.valueOf()))throw new TypeError(`option expires is invalid: ${b.expires}`);S+="; Expires="+b.expires.toUTCString()}if(b.httpOnly&&(S+="; HttpOnly"),b.secure&&(S+="; Secure"),b.partitioned&&(S+="; Partitioned"),b.priority)switch(typeof b.priority=="string"?b.priority.toLowerCase():void 0){case"low":S+="; Priority=Low";break;case"medium":S+="; Priority=Medium";break;case"high":S+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${b.priority}`)}if(b.sameSite)switch(typeof b.sameSite=="string"?b.sameSite.toLowerCase():b.sameSite){case!0:case"strict":S+="; SameSite=Strict";break;case"lax":S+="; SameSite=Lax";break;case"none":S+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${b.sameSite}`)}return S}function d(f){if(f.indexOf("%")===-1)return f;try{return decodeURIComponent(f)}catch{return f}}function C(f){return i.call(f)==="[object Date]"}return JC}qY();/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var jG="popstate";function e9(e={}){function t(r,i){let{pathname:o,search:a,hash:l}=r.location;return Hv("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Gf(i)}return n9(t,n,null,e)}function si(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ns(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function t9(){return Math.random().toString(36).substring(2,10)}function QG(e,t){return{usr:e.state,key:e.key,idx:t}}function Hv(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?UI(t):t,state:n,key:t&&t.key||r||t9()}}function Gf({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function UI(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function n9(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,l="POP",g=null,u=d();u==null&&(u=0,a.replaceState({...a.state,idx:u},""));function d(){return(a.state||{idx:null}).idx}function C(){l="POP";let y=d(),S=y==null?null:y-u;u=y,g&&g({action:l,location:p.location,delta:S})}function f(y,S){l="PUSH";let v=Hv(p.location,y,S);u=d()+1;let B=QG(v,u),W=p.createHref(v);try{a.pushState(B,"",W)}catch(J){if(J instanceof DOMException&&J.name==="DataCloneError")throw J;i.location.assign(W)}o&&g&&g({action:l,location:p.location,delta:1})}function m(y,S){l="REPLACE";let v=Hv(p.location,y,S);u=d();let B=QG(v,u),W=p.createHref(v);a.replaceState(B,"",W),o&&g&&g({action:l,location:p.location,delta:0})}function b(y){let S=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof y=="string"?y:Gf(y);return v=v.replace(/ $/,"%20"),si(S,`No window.location.(origin|href) available to create URL for href: ${v}`),new URL(v,S)}let p={get action(){return l},get location(){return e(i,a)},listen(y){if(g)throw new Error("A history only accepts one active listener");return i.addEventListener(jG,C),g=y,()=>{i.removeEventListener(jG,C),g=null}},createHref(y){return t(i,y)},createURL:b,encodeLocation(y){let S=b(y);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:f,replace:m,go(y){return a.go(y)}};return p}function WV(e,t,n="/"){return r9(e,t,n,!1)}function r9(e,t,n,r){let i=typeof t=="string"?UI(t):t,o=zc(i.pathname||"/",n);if(o==null)return null;let a=VV(e);i9(a);let l=null;for(let g=0;l==null&&g<a.length;++g){let u=f9(o);l=I9(a[g],u,r)}return l}function VV(e,t=[],n=[],r=""){let i=(o,a,l)=>{let g={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};g.relativePath.startsWith("/")&&(si(g.relativePath.startsWith(r),`Absolute route path "${g.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(r.length));let u=Rg([r,g.relativePath]),d=n.concat(g);o.children&&o.children.length>0&&(si(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),VV(o.children,t,d,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:u9(u,o.index),routesMeta:d})};return e.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))i(o,a);else for(let g of kV(o.path))i(o,a,g)}),t}function kV(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let a=kV(r.join("/")),l=[];return l.push(...a.map(g=>g===""?o:[o,g].join("/"))),i&&l.push(...a),l.map(g=>e.startsWith("/")&&g===""?"/":g)}function i9(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:d9(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var o9=/^:[\w-]+$/,a9=3,l9=2,s9=1,g9=10,c9=-2,$G=e=>e==="*";function u9(e,t){let n=e.split("/"),r=n.length;return n.some($G)&&(r+=c9),t&&(r+=l9),n.filter(i=>!$G(i)).reduce((i,o)=>i+(o9.test(o)?a9:o===""?s9:g9),r)}function d9(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function I9(e,t,n=!1){let{routesMeta:r}=e,i={},o="/",a=[];for(let l=0;l<r.length;++l){let g=r[l],u=l===r.length-1,d=o==="/"?t:t.slice(o.length)||"/",C=vA({path:g.relativePath,caseSensitive:g.caseSensitive,end:u},d),f=g.route;if(!C&&u&&n&&!r[r.length-1].route.index&&(C=vA({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},d)),!C)return null;Object.assign(i,C.params),a.push({params:i,pathname:Rg([o,C.pathname]),pathnameBase:p9(Rg([o,C.pathnameBase])),route:f}),C.pathnameBase!=="/"&&(o=Rg([o,C.pathnameBase]))}return a}function vA(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=C9(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((u,{paramName:d,isOptional:C},f)=>{if(d==="*"){let b=l[f]||"";a=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const m=l[f];return C&&!m?u[d]=void 0:u[d]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:a,pattern:e}}function C9(e,t=!1,n=!0){ns(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,g)=>(r.push({paramName:l,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function f9(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ns(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function zc(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function m9(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?UI(e):e;return{pathname:n?n.startsWith("/")?n:h9(n,t):t,search:b9(r),hash:y9(i)}}function h9(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function U0(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function A9(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function yS(e){let t=A9(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function vS(e,t,n,r=!1){let i;typeof e=="string"?i=UI(e):(i={...e},si(!i.pathname||!i.pathname.includes("?"),U0("?","pathname","search",i)),si(!i.pathname||!i.pathname.includes("#"),U0("#","pathname","hash",i)),si(!i.search||!i.search.includes("#"),U0("#","search","hash",i)));let o=e===""||i.pathname==="",a=o?"/":i.pathname,l;if(a==null)l=n;else{let C=t.length-1;if(!r&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),C-=1;i.pathname=f.join("/")}l=C>=0?t[C]:"/"}let g=m9(i,l),u=a&&a!=="/"&&a.endsWith("/"),d=(o||a===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(u||d)&&(g.pathname+="/"),g}var Rg=e=>e.join("/").replace(/\/\/+/g,"/"),p9=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),b9=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,y9=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function v9(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var NV=["POST","PUT","PATCH","DELETE"];new Set(NV);var S9=["GET",...NV];new Set(S9);var jI=I.createContext(null);jI.displayName="DataRouter";var Yp=I.createContext(null);Yp.displayName="DataRouterState";var XV=I.createContext({isTransitioning:!1});XV.displayName="ViewTransition";var Z9=I.createContext(new Map);Z9.displayName="Fetchers";var G9=I.createContext(null);G9.displayName="Await";var ls=I.createContext(null);ls.displayName="Navigation";var am=I.createContext(null);am.displayName="Location";var ss=I.createContext({outlet:null,matches:[],isDataRoute:!1});ss.displayName="Route";var SS=I.createContext(null);SS.displayName="RouteError";function B9(e,{relative:t}={}){si(QI(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=I.useContext(ls),{hash:i,pathname:o,search:a}=lm(e,{relative:t}),l=o;return n!=="/"&&(l=o==="/"?n:Rg([n,o])),r.createHref({pathname:l,search:a,hash:i})}function QI(){return I.useContext(am)!=null}function nu(){return si(QI(),"useLocation() may be used only in the context of a <Router> component."),I.useContext(am).location}var JV="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function xV(e){I.useContext(ls).static||I.useLayoutEffect(e)}function ru(){let{isDataRoute:e}=I.useContext(ss);return e?K9():R9()}function R9(){si(QI(),"useNavigate() may be used only in the context of a <Router> component.");let e=I.useContext(jI),{basename:t,navigator:n}=I.useContext(ls),{matches:r}=I.useContext(ss),{pathname:i}=nu(),o=JSON.stringify(yS(r)),a=I.useRef(!1);return xV(()=>{a.current=!0}),I.useCallback((g,u={})=>{if(ns(a.current,JV),!a.current)return;if(typeof g=="number"){n.go(g);return}let d=vS(g,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Rg([t,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[t,n,o,i,e])}I.createContext(null);function w9(){let{matches:e}=I.useContext(ss),t=e[e.length-1];return t?t.params:{}}function lm(e,{relative:t}={}){let{matches:n}=I.useContext(ss),{pathname:r}=nu(),i=JSON.stringify(yS(n));return I.useMemo(()=>vS(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function W9(e,t){return HV(e,t)}function HV(e,t,n,r){var v;si(QI(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:o}=I.useContext(ls),{matches:a}=I.useContext(ss),l=a[a.length-1],g=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",C=l&&l.route;{let B=C&&C.path||"";YV(u,!C||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let f=nu(),m;if(t){let B=typeof t=="string"?UI(t):t;si(d==="/"||((v=B.pathname)==null?void 0:v.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${B.pathname}" was given in the \`location\` prop.`),m=B}else m=f;let b=m.pathname||"/",p=b;if(d!=="/"){let B=d.replace(/^\//,"").split("/");p="/"+b.replace(/^\//,"").split("/").slice(B.length).join("/")}let y=!o&&n&&n.matches&&n.matches.length>0?n.matches:WV(e,{pathname:p});ns(C||y!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),ns(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=J9(y&&y.map(B=>Object.assign({},B,{params:Object.assign({},g,B.params),pathname:Rg([d,i.encodeLocation?i.encodeLocation(B.pathname).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?d:Rg([d,i.encodeLocation?i.encodeLocation(B.pathnameBase).pathname:B.pathnameBase])})),a,n,r);return t&&S?I.createElement(am.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},S):S}function V9(){let e=F9(),t=v9(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},a=null;return console.error("Error handled by React Router default ErrorBoundary:",e),a=I.createElement(I.Fragment,null,I.createElement("p",null," Hey developer "),I.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",I.createElement("code",{style:o},"ErrorBoundary")," or"," ",I.createElement("code",{style:o},"errorElement")," prop on your route.")),I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},t),n?I.createElement("pre",{style:i},n):null,a)}var k9=I.createElement(V9,null),N9=class extends I.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?I.createElement(ss.Provider,{value:this.props.routeContext},I.createElement(SS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function X9({routeContext:e,match:t,children:n}){let r=I.useContext(jI);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),I.createElement(ss.Provider,{value:e},n)}function J9(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,o=n==null?void 0:n.errors;if(o!=null){let g=i.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);si(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,g+1))}let a=!1,l=-1;if(n)for(let g=0;g<i.length;g++){let u=i[g];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=g),u.route.id){let{loaderData:d,errors:C}=n,f=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!C||C[u.route.id]===void 0);if(u.route.lazy||f){a=!0,l>=0?i=i.slice(0,l+1):i=[i[0]];break}}}return i.reduceRight((g,u,d)=>{let C,f=!1,m=null,b=null;n&&(C=o&&u.route.id?o[u.route.id]:void 0,m=u.route.errorElement||k9,a&&(l<0&&d===0?(YV("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,b=null):l===d&&(f=!0,b=u.route.hydrateFallbackElement||null)));let p=t.concat(i.slice(0,d+1)),y=()=>{let S;return C?S=m:f?S=b:u.route.Component?S=I.createElement(u.route.Component,null):u.route.element?S=u.route.element:S=g,I.createElement(X9,{match:u,routeContext:{outlet:g,matches:p,isDataRoute:n!=null},children:S})};return n&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?I.createElement(N9,{location:n.location,revalidation:n.revalidation,component:m,error:C,children:y(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):y()},null)}function ZS(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function x9(e){let t=I.useContext(jI);return si(t,ZS(e)),t}function H9(e){let t=I.useContext(Yp);return si(t,ZS(e)),t}function Y9(e){let t=I.useContext(ss);return si(t,ZS(e)),t}function GS(e){let t=Y9(e),n=t.matches[t.matches.length-1];return si(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function E9(){return GS("useRouteId")}function F9(){var r;let e=I.useContext(SS),t=H9("useRouteError"),n=GS("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function K9(){let{router:e}=x9("useNavigate"),t=GS("useNavigate"),n=I.useRef(!1);return xV(()=>{n.current=!0}),I.useCallback(async(i,o={})=>{ns(n.current,JV),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...o}))},[e,t])}var qG={};function YV(e,t,n){!t&&!qG[e]&&(qG[e]=!0,ns(!1,n))}I.memo(L9);function L9({routes:e,future:t,state:n}){return HV(e,void 0,n,t)}function xC({to:e,replace:t,state:n,relative:r}){si(QI(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=I.useContext(ls);ns(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=I.useContext(ss),{pathname:a}=nu(),l=ru(),g=vS(e,yS(o),a,r==="path"),u=JSON.stringify(g);return I.useEffect(()=>{l(JSON.parse(u),{replace:t,state:n,relative:r})},[l,u,r,t,n]),null}function Js(e){si(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function M9({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:o=!1}){si(!QI(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=e.replace(/^\/*/,"/"),l=I.useMemo(()=>({basename:a,navigator:i,static:o,future:{}}),[a,i,o]);typeof n=="string"&&(n=UI(n));let{pathname:g="/",search:u="",hash:d="",state:C=null,key:f="default"}=n,m=I.useMemo(()=>{let b=zc(g,a);return b==null?null:{location:{pathname:b,search:u,hash:d,state:C,key:f},navigationType:r}},[a,g,u,d,C,f,r]);return ns(m!=null,`<Router basename="${a}"> is not able to match the URL "${g}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:I.createElement(ls.Provider,{value:l},I.createElement(am.Provider,{children:t,value:m}))}function EV({children:e,location:t}){return W9(Yv(e),t)}function Yv(e,t=[]){let n=[];return I.Children.forEach(e,(r,i)=>{if(!I.isValidElement(r))return;let o=[...t,i];if(r.type===I.Fragment){n.push.apply(n,Yv(r.props.children,o));return}si(r.type===Js,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),si(!r.props.index||!r.props.children,"An index route cannot have child routes.");let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Yv(r.props.children,o)),n.push(a)}),n}var Oh="get",_h="application/x-www-form-urlencoded";function Ep(e){return e!=null&&typeof e.tagName=="string"}function T9(e){return Ep(e)&&e.tagName.toLowerCase()==="button"}function z9(e){return Ep(e)&&e.tagName.toLowerCase()==="form"}function D9(e){return Ep(e)&&e.tagName.toLowerCase()==="input"}function P9(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function O9(e,t){return e.button===0&&(!t||t==="_self")&&!P9(e)}var ph=null;function _9(){if(ph===null)try{new FormData(document.createElement("form"),0),ph=!1}catch{ph=!0}return ph}var U9=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function j0(e){return e!=null&&!U9.has(e)?(ns(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_h}"`),null):e}function j9(e,t){let n,r,i,o,a;if(z9(e)){let l=e.getAttribute("action");r=l?zc(l,t):null,n=e.getAttribute("method")||Oh,i=j0(e.getAttribute("enctype"))||_h,o=new FormData(e)}else if(T9(e)||D9(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=e.getAttribute("formaction")||l.getAttribute("action");if(r=g?zc(g,t):null,n=e.getAttribute("formmethod")||l.getAttribute("method")||Oh,i=j0(e.getAttribute("formenctype"))||j0(l.getAttribute("enctype"))||_h,o=new FormData(l,e),!_9()){let{name:u,type:d,value:C}=e;if(d==="image"){let f=u?`${u}.`:"";o.append(`${f}x`,"0"),o.append(`${f}y`,"0")}else u&&o.append(u,C)}}else{if(Ep(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Oh,r=null,i=_h,a=e}return o&&i==="text/plain"&&(a=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:a}}function BS(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function Q9(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function $9(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function q9(e,t,n){let r=await Promise.all(e.map(async i=>{let o=t.routes[i.route.id];if(o){let a=await Q9(o,n);return a.links?a.links():[]}return[]}));return rE(r.flat(1).filter($9).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function eB(e,t,n,r,i,o){let a=(g,u)=>n[u]?g.route.id!==n[u].route.id:!0,l=(g,u)=>{var d;return n[u].pathname!==g.pathname||((d=n[u].route.path)==null?void 0:d.endsWith("*"))&&n[u].params["*"]!==g.params["*"]};return o==="assets"?t.filter((g,u)=>a(g,u)||l(g,u)):o==="data"?t.filter((g,u)=>{var C;let d=r.routes[g.route.id];if(!d||!d.hasLoader)return!1;if(a(g,u)||l(g,u))return!0;if(g.route.shouldRevalidate){let f=g.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((C=n[0])==null?void 0:C.params)||{},nextUrl:new URL(e,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function eE(e,t){return tE(e.map(n=>{let r=t.routes[n.route.id];if(!r)return[];let i=[r.module];return r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function tE(e){return[...new Set(e)]}function nE(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function rE(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let o=JSON.stringify(nE(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}function iE(e){let t=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return t.pathname==="/"?t.pathname="_root.data":t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function oE(){let e=I.useContext(jI);return BS(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function aE(){let e=I.useContext(Yp);return BS(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var RS=I.createContext(void 0);RS.displayName="FrameworkContext";function FV(){let e=I.useContext(RS);return BS(e,"You must render this element inside a <HydratedRouter> element"),e}function lE(e,t){let n=I.useContext(RS),[r,i]=I.useState(!1),[o,a]=I.useState(!1),{onFocus:l,onBlur:g,onMouseEnter:u,onMouseLeave:d,onTouchStart:C}=t,f=I.useRef(null);I.useEffect(()=>{if(e==="render"&&a(!0),e==="viewport"){let p=S=>{S.forEach(v=>{a(v.isIntersecting)})},y=new IntersectionObserver(p,{threshold:.5});return f.current&&y.observe(f.current),()=>{y.disconnect()}}},[e]),I.useEffect(()=>{if(r){let p=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(p)}}},[r]);let m=()=>{i(!0)},b=()=>{i(!1),a(!1)};return n?e!=="intent"?[o,f,{}]:[o,f,{onFocus:HC(l,m),onBlur:HC(g,b),onMouseEnter:HC(u,m),onMouseLeave:HC(d,b),onTouchStart:HC(C,m)}]:[!1,f,{}]}function HC(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function sE({page:e,...t}){let{router:n}=oE(),r=I.useMemo(()=>WV(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?I.createElement(cE,{page:e,matches:r,...t}):null}function gE(e){let{manifest:t,routeModules:n}=FV(),[r,i]=I.useState([]);return I.useEffect(()=>{let o=!1;return q9(e,t,n).then(a=>{o||i(a)}),()=>{o=!0}},[e,t,n]),r}function cE({page:e,matches:t,...n}){let r=nu(),{manifest:i,routeModules:o}=FV(),{loaderData:a,matches:l}=aE(),g=I.useMemo(()=>eB(e,t,l,i,r,"data"),[e,t,l,i,r]),u=I.useMemo(()=>eB(e,t,l,i,r,"assets"),[e,t,l,i,r]),d=I.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let m=new Set,b=!1;if(t.forEach(y=>{var v;let S=i.routes[y.route.id];!S||!S.hasLoader||(!g.some(B=>B.route.id===y.route.id)&&y.route.id in a&&((v=o[y.route.id])!=null&&v.shouldRevalidate)||S.hasClientLoader?b=!0:m.add(y.route.id))}),m.size===0)return[];let p=iE(e);return b&&m.size>0&&p.searchParams.set("_routes",t.filter(y=>m.has(y.route.id)).map(y=>y.route.id).join(",")),[p.pathname+p.search]},[a,r,i,g,t,e,o]),C=I.useMemo(()=>eE(u,i),[u,i]),f=gE(u);return I.createElement(I.Fragment,null,d.map(m=>I.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...n})),C.map(m=>I.createElement("link",{key:m,rel:"modulepreload",href:m,...n})),f.map(({key:m,link:b})=>I.createElement("link",{key:m,...b})))}function uE(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var KV=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{KV&&(window.__reactRouterVersion="7.1.5")}catch{}function dE({basename:e,children:t,window:n}){let r=I.useRef();r.current==null&&(r.current=e9({window:n,v5Compat:!0}));let i=r.current,[o,a]=I.useState({action:i.action,location:i.location}),l=I.useCallback(g=>{I.startTransition(()=>a(g))},[a]);return I.useLayoutEffect(()=>i.listen(l),[i,l]),I.createElement(M9,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:i})}var LV=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fp=I.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:a,state:l,target:g,to:u,preventScrollReset:d,viewTransition:C,...f},m){let{basename:b}=I.useContext(ls),p=typeof u=="string"&&LV.test(u),y,S=!1;if(typeof u=="string"&&p&&(y=u,KV))try{let F=new URL(window.location.href),w=u.startsWith("//")?new URL(F.protocol+u):new URL(u),V=zc(w.pathname,b);w.origin===F.origin&&V!=null?u=V+w.search+w.hash:S=!0}catch{ns(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=B9(u,{relative:i}),[B,W,J]=lE(r,f),H=mE(u,{replace:a,state:l,target:g,preventScrollReset:d,relative:i,viewTransition:C});function x(F){t&&t(F),F.defaultPrevented||H(F)}let E=I.createElement("a",{...f,...J,href:y||v,onClick:S||o?t:x,ref:uE(m,W),target:g,"data-discover":!p&&n==="render"?"true":void 0});return B&&!p?I.createElement(I.Fragment,null,E,I.createElement(sE,{page:v})):E});Fp.displayName="Link";var IE=I.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:a,viewTransition:l,children:g,...u},d){let C=lm(a,{relative:u.relative}),f=nu(),m=I.useContext(Yp),{navigator:b,basename:p}=I.useContext(ls),y=m!=null&&yE(C)&&l===!0,S=b.encodeLocation?b.encodeLocation(C).pathname:C.pathname,v=f.pathname,B=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;n||(v=v.toLowerCase(),B=B?B.toLowerCase():null,S=S.toLowerCase()),B&&p&&(B=zc(B,p)||B);const W=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let J=v===S||!i&&v.startsWith(S)&&v.charAt(W)==="/",H=B!=null&&(B===S||!i&&B.startsWith(S)&&B.charAt(S.length)==="/"),x={isActive:J,isPending:H,isTransitioning:y},E=J?t:void 0,F;typeof r=="function"?F=r(x):F=[r,J?"active":null,H?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let w=typeof o=="function"?o(x):o;return I.createElement(Fp,{...u,"aria-current":E,className:F,ref:d,style:w,to:a,viewTransition:l},typeof g=="function"?g(x):g)});IE.displayName="NavLink";var CE=I.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:o,method:a=Oh,action:l,onSubmit:g,relative:u,preventScrollReset:d,viewTransition:C,...f},m)=>{let b=pE(),p=bE(l,{relative:u}),y=a.toLowerCase()==="get"?"get":"post",S=typeof l=="string"&&LV.test(l),v=B=>{if(g&&g(B),B.defaultPrevented)return;B.preventDefault();let W=B.nativeEvent.submitter,J=(W==null?void 0:W.getAttribute("formmethod"))||a;b(W||B.currentTarget,{fetcherKey:t,method:J,navigate:n,replace:i,state:o,relative:u,preventScrollReset:d,viewTransition:C})};return I.createElement("form",{ref:m,method:y,action:p,onSubmit:r?g:v,...f,"data-discover":!S&&e==="render"?"true":void 0})});CE.displayName="Form";function fE(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function MV(e){let t=I.useContext(jI);return si(t,fE(e)),t}function mE(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:a}={}){let l=ru(),g=nu(),u=lm(e,{relative:o});return I.useCallback(d=>{if(O9(d,t)){d.preventDefault();let C=n!==void 0?n:Gf(g)===Gf(u);l(e,{replace:C,state:r,preventScrollReset:i,relative:o,viewTransition:a})}},[g,l,u,n,r,t,e,i,o,a])}var hE=0,AE=()=>`__${String(++hE)}__`;function pE(){let{router:e}=MV("useSubmit"),{basename:t}=I.useContext(ls),n=E9();return I.useCallback(async(r,i={})=>{let{action:o,method:a,encType:l,formData:g,body:u}=j9(r,t);if(i.navigate===!1){let d=i.fetcherKey||AE();await e.fetch(d,n,i.action||o,{preventScrollReset:i.preventScrollReset,formData:g,body:u,formMethod:i.method||a,formEncType:i.encType||l,flushSync:i.flushSync})}else await e.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:g,body:u,formMethod:i.method||a,formEncType:i.encType||l,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function bE(e,{relative:t}={}){let{basename:n}=I.useContext(ls),r=I.useContext(ss);si(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...lm(e||".",{relative:t})},a=nu();if(e==null){o.search=a.search;let l=new URLSearchParams(o.search),g=l.getAll("index");if(g.some(d=>d==="")){l.delete("index"),g.filter(C=>C).forEach(C=>l.append("index",C));let d=l.toString();o.search=d?`?${d}`:""}}return(!e||e===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:Rg([n,o.pathname])),Gf(o)}function yE(e,t={}){let n=I.useContext(XV);si(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=MV("useViewTransitionState"),i=lm(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=zc(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=zc(n.nextLocation.pathname,r)||n.nextLocation.pathname;return vA(i.pathname,a)!=null||vA(i.pathname,o)!=null}new TextEncoder;var Dc=wV();const Ev=om(Dc),vE=RV({__proto__:null,default:Ev},[Dc]);var tB={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xt=function(e,t){if(!e)throw $I(t)},$I=function(e){return new Error("Firebase Database ("+TV.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zV=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},SE=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=e[n++],a=e[n++],l=e[n++],g=((i&7)<<18|(o&63)<<12|(a&63)<<6|l&63)-65536;t[r++]=String.fromCharCode(55296+(g>>10)),t[r++]=String.fromCharCode(56320+(g&1023))}else{const o=e[n++],a=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return t.join("")},wS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const o=e[i],a=i+1<e.length,l=a?e[i+1]:0,g=i+2<e.length,u=g?e[i+2]:0,d=o>>2,C=(o&3)<<4|l>>4;let f=(l&15)<<2|u>>6,m=u&63;g||(m=64,a||(f=64)),r.push(n[d],n[C],n[f],n[m])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(zV(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):SE(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const o=n[e.charAt(i++)],l=i<e.length?n[e.charAt(i)]:0;++i;const u=i<e.length?n[e.charAt(i)]:64;++i;const C=i<e.length?n[e.charAt(i)]:64;if(++i,o==null||l==null||u==null||C==null)throw new ZE;const f=o<<2|l>>4;if(r.push(f),u!==64){const m=l<<4&240|u>>2;if(r.push(m),C!==64){const b=u<<6&192|C;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class ZE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const DV=function(e){const t=zV(e);return wS.encodeByteArray(t,!0)},SA=function(e){return DV(e).replace(/\./g,"")},ZA=function(e){try{return wS.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(e){return PV(void 0,e)}function PV(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)!t.hasOwnProperty(n)||!BE(n)||(e[n]=PV(e[n],t[n]));return e}function BE(e){return e!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE=()=>RE().__FIREBASE_DEFAULTS__,WE=()=>{if(typeof process>"u"||typeof tB>"u")return;const e=tB.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},VE=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&ZA(e[1]);return t&&JSON.parse(t)},WS=()=>{try{return wE()||WE()||VE()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},OV=e=>{var t,n;return(n=(t=WS())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},kE=e=>{const t=OV(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},_V=()=>{var e;return(e=WS())===null||e===void 0?void 0:e.config},UV=e=>{var t;return(t=WS())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,o=e.sub||e.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},e);return[SA(JSON.stringify(n)),SA(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ca(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ca())}function XE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function JE(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function jV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function xE(){const e=ca();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function HE(){return TV.NODE_ADMIN===!0}function YE(){try{return typeof indexedDB=="object"}catch{return!1}}function EE(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;t(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE="FirebaseError";class iu extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=FE,Object.setPrototypeOf(this,iu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sm.prototype.create)}}class sm{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,o=this.errors[t],a=o?KE(o,r):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new iu(i,l,r)}}function KE(e,t){return e.replace(LE,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const LE=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(e){return JSON.parse(e)}function mo(e){return JSON.stringify(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV=function(e){let t={},n={},r={},i="";try{const o=e.split(".");t=Bf(ZA(o[0])||""),n=Bf(ZA(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:i}},ME=function(e){const t=QV(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},TE=function(e){const t=QV(e).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yg(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function wI(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function Fv(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function GA(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function BA(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const o=e[i],a=t[i];if(nB(o)&&nB(a)){if(!BA(o,a))return!1}else if(o!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function nB(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function af(e){const t={};return e.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");t[decodeURIComponent(i)]=decodeURIComponent(o)}}),t}function lf(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);const r=this.W_;if(typeof t=="string")for(let C=0;C<16;C++)r[C]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let C=0;C<16;C++)r[C]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let C=16;C<80;C++){const f=r[C-3]^r[C-8]^r[C-14]^r[C-16];r[C]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],g=this.chain_[4],u,d;for(let C=0;C<80;C++){C<40?C<20?(u=l^o&(a^l),d=1518500249):(u=o^a^l,d=1859775393):C<60?(u=o&a|l&(o|a),d=2400959708):(u=o^a^l,d=3395469782);const f=(i<<5|i>>>27)+u+g+d+r[C]&4294967295;g=l,l=a,a=(o<<30|o>>>2)&4294967295,o=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+g&4294967295}update(t,n){if(t==null)return;n===void 0&&(n=t.length);const r=n-this.blockSize;let i=0;const o=this.buf_;let a=this.inbuf_;for(;i<n;){if(a===0)for(;i<=r;)this.compress_(t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<n;)if(o[a]=t.charCodeAt(i),++a,++i,a===this.blockSize){this.compress_(o),a=0;break}}else for(;i<n;)if(o[a]=t[i],++a,++i,a===this.blockSize){this.compress_(o),a=0;break}}this.inbuf_=a,this.total_+=n}digest(){const t=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)t[r]=this.chain_[i]>>o&255,++r;return t}}function DE(e,t){const n=new PE(e,t);return n.subscribe.bind(n)}class PE{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");OE(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=Q0),i.error===void 0&&(i.error=Q0),i.complete===void 0&&(i.complete=Q0);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function OE(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Q0(){}function $V(e,t){return`${e} failed: ${t} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const o=i-55296;r++,xt(r<e.length,"Surrogate pair missing trail surrogate.");const a=e.charCodeAt(r)-56320;i=65536+(o<<10)+a}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},Kp=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(e){return e&&e._delegate?e._delegate:e}class Uu{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new VS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(QE(t))try{this.getOrInitializeService({instanceIdentifier:Yu})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(t=Yu){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Yu){return this.instances.has(t)}getOptions(t=Yu){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);r===l&&a.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(t),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&t(a,i),()=>{o.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:jE(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Yu){return this.component?this.component.multipleInstances?t:Yu:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jE(e){return e===Yu?void 0:e}function QE(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new UE(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fr;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Fr||(Fr={}));const qE={debug:Fr.DEBUG,verbose:Fr.VERBOSE,info:Fr.INFO,warn:Fr.WARN,error:Fr.ERROR,silent:Fr.SILENT},eF=Fr.INFO,tF={[Fr.DEBUG]:"log",[Fr.VERBOSE]:"log",[Fr.INFO]:"info",[Fr.WARN]:"warn",[Fr.ERROR]:"error"},nF=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=tF[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class NS{constructor(t){this.name=t,this._logLevel=eF,this._logHandler=nF,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Fr))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?qE[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Fr.DEBUG,...t),this._logHandler(this,Fr.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Fr.VERBOSE,...t),this._logHandler(this,Fr.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Fr.INFO,...t),this._logHandler(this,Fr.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Fr.WARN,...t),this._logHandler(this,Fr.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Fr.ERROR,...t),this._logHandler(this,Fr.ERROR,...t)}}const rF=(e,t)=>t.some(n=>e instanceof n);let rB,iB;function iF(){return rB||(rB=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oF(){return iB||(iB=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qV=new WeakMap,Kv=new WeakMap,ek=new WeakMap,$0=new WeakMap,XS=new WeakMap;function aF(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",a)},o=()=>{n(Kc(e.result)),i()},a=()=>{r(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&qV.set(n,e)}).catch(()=>{}),XS.set(t,e),t}function lF(e){if(Kv.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",a),e.removeEventListener("abort",a)},o=()=>{n(),i()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",a),e.addEventListener("abort",a)});Kv.set(e,t)}let Lv={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Kv.get(e);if(t==="objectStoreNames")return e.objectStoreNames||ek.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Kc(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function sF(e){Lv=e(Lv)}function gF(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(q0(this),t,...n);return ek.set(r,t.sort?t.sort():[t]),Kc(r)}:oF().includes(e)?function(...t){return e.apply(q0(this),t),Kc(qV.get(this))}:function(...t){return Kc(e.apply(q0(this),t))}}function cF(e){return typeof e=="function"?gF(e):(e instanceof IDBTransaction&&lF(e),rF(e,iF())?new Proxy(e,Lv):e)}function Kc(e){if(e instanceof IDBRequest)return aF(e);if($0.has(e))return $0.get(e);const t=cF(e);return t!==e&&($0.set(e,t),XS.set(t,e)),t}const q0=e=>XS.get(e);function uF(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const a=indexedDB.open(e,t),l=Kc(a);return r&&a.addEventListener("upgradeneeded",g=>{r(Kc(a.result),g.oldVersion,g.newVersion,Kc(a.transaction),g)}),n&&a.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),l.then(g=>{o&&g.addEventListener("close",()=>o()),i&&g.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const dF=["get","getKey","getAll","getAllKeys","count"],IF=["put","add","delete","clear"],ey=new Map;function oB(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(ey.get(t))return ey.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=IF.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||dF.includes(n)))return;const o=async function(a,...l){const g=this.transaction(a,i?"readwrite":"readonly");let u=g.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),i&&g.done]))[0]};return ey.set(t,o),o}sF(e=>({...e,get:(t,n,r)=>oB(t,n)||e.get(t,n,r),has:(t,n)=>!!oB(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(fF(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function fF(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Mv="@firebase/app",aB="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg=new NS("@firebase/app"),mF="@firebase/app-compat",hF="@firebase/analytics-compat",AF="@firebase/analytics",pF="@firebase/app-check-compat",bF="@firebase/app-check",yF="@firebase/auth",vF="@firebase/auth-compat",SF="@firebase/database",ZF="@firebase/data-connect",GF="@firebase/database-compat",BF="@firebase/functions",RF="@firebase/functions-compat",wF="@firebase/installations",WF="@firebase/installations-compat",VF="@firebase/messaging",kF="@firebase/messaging-compat",NF="@firebase/performance",XF="@firebase/performance-compat",JF="@firebase/remote-config",xF="@firebase/remote-config-compat",HF="@firebase/storage",YF="@firebase/storage-compat",EF="@firebase/firestore",FF="@firebase/vertexai",KF="@firebase/firestore-compat",LF="firebase",MF="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv="[DEFAULT]",TF={[Mv]:"fire-core",[mF]:"fire-core-compat",[AF]:"fire-analytics",[hF]:"fire-analytics-compat",[bF]:"fire-app-check",[pF]:"fire-app-check-compat",[yF]:"fire-auth",[vF]:"fire-auth-compat",[SF]:"fire-rtdb",[ZF]:"fire-data-connect",[GF]:"fire-rtdb-compat",[BF]:"fire-fn",[RF]:"fire-fn-compat",[wF]:"fire-iid",[WF]:"fire-iid-compat",[VF]:"fire-fcm",[kF]:"fire-fcm-compat",[NF]:"fire-perf",[XF]:"fire-perf-compat",[JF]:"fire-rc",[xF]:"fire-rc-compat",[HF]:"fire-gcs",[YF]:"fire-gcs-compat",[EF]:"fire-fst",[KF]:"fire-fst-compat",[FF]:"fire-vertex","fire-js":"fire-js",[LF]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA=new Map,zF=new Map,zv=new Map;function lB(e,t){try{e.container.addComponent(t)}catch(n){kg.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function WI(e){const t=e.name;if(zv.has(t))return kg.debug(`There were multiple attempts to register component ${t}.`),!1;zv.set(t,e);for(const n of RA.values())lB(n,e);for(const n of zF.values())lB(n,e);return!0}function JS(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Hs(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DF={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Lc=new sm("app","Firebase",DF);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Uu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Lc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC=MF;function tk(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:Tv,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw Lc.create("bad-app-name",{appName:String(i)});if(n||(n=_V()),!n)throw Lc.create("no-options");const o=RA.get(i);if(o){if(BA(n,o.options)&&BA(r,o.config))return o;throw Lc.create("duplicate-app",{appName:i})}const a=new $E(i);for(const g of zv.values())a.addComponent(g);const l=new PF(n,r,a);return RA.set(i,l),l}function nk(e=Tv){const t=RA.get(e);if(!t&&e===Tv&&_V())return tk();if(!t)throw Lc.create("no-app",{appName:e});return t}function Mc(e,t,n){var r;let i=(r=TF[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const l=[`Unable to register library "${i}" with version "${t}":`];o&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&l.push("and"),a&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),kg.warn(l.join(" "));return}WI(new Uu(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OF="firebase-heartbeat-database",_F=1,Rf="firebase-heartbeat-store";let ty=null;function rk(){return ty||(ty=uF(OF,_F,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Rf)}catch(n){console.warn(n)}}}}).catch(e=>{throw Lc.create("idb-open",{originalErrorMessage:e.message})})),ty}async function UF(e){try{const n=(await rk()).transaction(Rf),r=await n.objectStore(Rf).get(ik(e));return await n.done,r}catch(t){if(t instanceof iu)kg.warn(t.message);else{const n=Lc.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});kg.warn(n.message)}}}async function sB(e,t){try{const r=(await rk()).transaction(Rf,"readwrite");await r.objectStore(Rf).put(t,ik(e)),await r.done}catch(n){if(n instanceof iu)kg.warn(n.message);else{const r=Lc.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});kg.warn(r.message)}}}function ik(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jF=1024,QF=30*24*60*60*1e3;class $F{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new eK(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=gB();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const l=new Date(a.date).valueOf();return Date.now()-l<=QF}),this._storage.overwrite(this._heartbeatsCache))}catch(r){kg.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=gB(),{heartbeatsToSend:r,unsentEntries:i}=qF(this._heartbeatsCache.heartbeats),o=SA(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return kg.warn(n),""}}}function gB(){return new Date().toISOString().substring(0,10)}function qF(e,t=jF){const n=[];let r=e.slice();for(const i of e){const o=n.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),cB(n)>t){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),cB(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class eK{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YE()?EE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await UF(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return sB(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return sB(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function cB(e){return SA(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tK(e){WI(new Uu("platform-logger",t=>new CF(t),"PRIVATE")),WI(new Uu("heartbeat",t=>new $F(t),"PRIVATE")),Mc(Mv,aB,e),Mc(Mv,aB,"esm2017"),Mc("fire-js","")}tK("");var nK="firebase",rK="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mc(nK,rK,"app");function xS(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function ok(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const iK=ok,ak=new sm("auth","Firebase",ok());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA=new NS("@firebase/auth");function oK(e,...t){wA.logLevel<=Fr.WARN&&wA.warn(`Auth (${eC}): ${e}`,...t)}function Uh(e,...t){wA.logLevel<=Fr.ERROR&&wA.error(`Auth (${eC}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(e,...t){throw HS(e,...t)}function Fs(e,...t){return HS(e,...t)}function lk(e,t,n){const r=Object.assign(Object.assign({},iK()),{[t]:n});return new sm("auth","Firebase",r).create(t,{appName:e.name})}function wg(e){return lk(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function HS(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return ak.create(e,...t)}function Rn(e,t,...n){if(!e)throw HS(t,...n)}function Sg(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Uh(t),new Error(t)}function Ng(e,t){e||Sg(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function aK(){return uB()==="http:"||uB()==="https:"}function uB(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lK(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aK()||JE()||"connection"in navigator)?navigator.onLine:!0}function sK(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(t,n){this.shortDelay=t,this.longDelay=n,Ng(n>t,"Short delay should be less than long delay!"),this.isMobile=kS()||jV()}get(){return lK()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(e,t){Ng(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sg("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sg("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sg("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gK={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cK=new gm(3e4,6e4);function ou(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Eg(e,t,n,r,i={}){return gk(e,i,async()=>{let o={},a={};r&&(t==="GET"?a=r:o={body:JSON.stringify(r)});const l=qI(Object.assign({key:e.config.apiKey},a)).slice(1),g=await e._getAdditionalHeaders();g["Content-Type"]="application/json",e.languageCode&&(g["X-Firebase-Locale"]=e.languageCode);const u=Object.assign({method:t,headers:g},o);return XE()||(u.referrerPolicy="no-referrer"),sk.fetch()(ck(e,e.config.apiHost,n,l),u)})}async function gk(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},gK),t);try{const i=new dK(e),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw bh(e,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const l=o.ok?a.errorMessage:a.error.message,[g,u]=l.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw bh(e,"credential-already-in-use",a);if(g==="EMAIL_EXISTS")throw bh(e,"email-already-in-use",a);if(g==="USER_DISABLED")throw bh(e,"user-disabled",a);const d=r[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw lk(e,d,u);rs(e,d)}}catch(i){if(i instanceof iu)throw i;rs(e,"network-request-failed",{message:String(i)})}}async function cm(e,t,n,r,i={}){const o=await Eg(e,t,n,r,i);return"mfaPendingCredential"in o&&rs(e,"multi-factor-auth-required",{_serverResponse:o}),o}function ck(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?YS(e.config,i):`${e.config.apiScheme}://${i}`}function uK(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class dK{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Fs(this.auth,"network-request-failed")),cK.get())})}}function bh(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Fs(e,t,r);return i.customData._tokenResponse=n,i}function dB(e){return e!==void 0&&e.enterprise!==void 0}class IK{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return uK(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function CK(e,t){return Eg(e,"GET","/v2/recaptchaConfig",ou(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fK(e,t){return Eg(e,"POST","/v1/accounts:delete",t)}async function uk(e,t){return Eg(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function mK(e,t=!1){const n=Xa(e),r=await n.getIdToken(t),i=ES(r);Rn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:df(ny(i.auth_time)),issuedAtTime:df(ny(i.iat)),expirationTime:df(ny(i.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function ny(e){return Number(e)*1e3}function ES(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return Uh("JWT malformed, contained fewer than 3 sections"),null;try{const i=ZA(n);return i?JSON.parse(i):(Uh("Failed to decode base64 JWT payload"),null)}catch(i){return Uh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function IB(e){const t=ES(e);return Rn(t,"internal-error"),Rn(typeof t.exp<"u","internal-error"),Rn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VI(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof iu&&hK(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function hK({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AK{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=df(this.lastLoginAt),this.creationTime=df(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WA(e){var t;const n=e.auth,r=await e.getIdToken(),i=await VI(e,uk(n,{idToken:r}));Rn(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const a=!((t=o.providerUserInfo)===null||t===void 0)&&t.length?dk(o.providerUserInfo):[],l=bK(e.providerData,a),g=e.isAnonymous,u=!(e.email&&o.passwordHash)&&!(l!=null&&l.length),d=g?u:!1,C={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Pv(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(e,C)}async function pK(e){const t=Xa(e);await WA(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function bK(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function dk(e){return e.map(t=>{var{providerId:n}=t,r=xS(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yK(e,t){const n=await gk(e,{},async()=>{const r=qI({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:o}=e.config,a=ck(e,i,"/v1/token",`key=${o}`),l=await e._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",sk.fetch()(a,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function vK(e,t){return Eg(e,"POST","/v2/accounts:revokeToken",ou(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Rn(t.idToken,"internal-error"),Rn(typeof t.idToken<"u","internal-error"),Rn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):IB(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Rn(t.length!==0,"internal-error");const n=IB(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Rn(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await yK(t,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,a=new dI;return r&&(Rn(typeof r=="string","internal-error",{appName:t}),a.refreshToken=r),i&&(Rn(typeof i=="string","internal-error",{appName:t}),a.accessToken=i),o&&(Rn(typeof o=="number","internal-error",{appName:t}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new dI,this.toJSON())}_performRefresh(){return Sg("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(e,t){Rn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Zg{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,o=xS(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new AK(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Pv(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(t){const n=await VI(this,this.stsTokenManager.getToken(this.auth,t));return Rn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return mK(this,t)}reload(){return pK(this)}_assign(t){this!==t&&(Rn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Zg(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Rn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await WA(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hs(this.auth.app))return Promise.reject(wg(this.auth));const t=await this.getIdToken();return await VI(this,fK(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,o,a,l,g,u,d;const C=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,m=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,b=(a=n.photoURL)!==null&&a!==void 0?a:void 0,p=(l=n.tenantId)!==null&&l!==void 0?l:void 0,y=(g=n._redirectEventId)!==null&&g!==void 0?g:void 0,S=(u=n.createdAt)!==null&&u!==void 0?u:void 0,v=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:B,emailVerified:W,isAnonymous:J,providerData:H,stsTokenManager:x}=n;Rn(B&&x,t,"internal-error");const E=dI.fromJSON(this.name,x);Rn(typeof B=="string",t,"internal-error"),Gc(C,t.name),Gc(f,t.name),Rn(typeof W=="boolean",t,"internal-error"),Rn(typeof J=="boolean",t,"internal-error"),Gc(m,t.name),Gc(b,t.name),Gc(p,t.name),Gc(y,t.name),Gc(S,t.name),Gc(v,t.name);const F=new Zg({uid:B,auth:t,email:f,emailVerified:W,displayName:C,isAnonymous:J,photoURL:b,phoneNumber:m,tenantId:p,stsTokenManager:E,createdAt:S,lastLoginAt:v});return H&&Array.isArray(H)&&(F.providerData=H.map(w=>Object.assign({},w))),y&&(F._redirectEventId=y),F}static async _fromIdTokenResponse(t,n,r=!1){const i=new dI;i.updateFromServerResponse(n);const o=new Zg({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await WA(o),o}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];Rn(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?dk(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),l=new dI;l.updateFromIdToken(r);const g=new Zg({uid:i.localId,auth:t,stsTokenManager:l,isAnonymous:a}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Pv(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(g,u),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CB=new Map;function Gg(e){Ng(e instanceof Function,"Expected a class definition");let t=CB.get(e);return t?(Ng(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,CB.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}Ik.type="NONE";const fB=Ik;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jh(e,t,n){return`firebase:${e}:${t}:${n}`}class II{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=jh(this.userKey,i.apiKey,o),this.fullPersistenceKey=jh("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Zg._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new II(Gg(fB),t,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let o=i[0]||Gg(fB);const a=jh(r,t.config.apiKey,t.name);let l=null;for(const u of n)try{const d=await u._get(a);if(d){const C=Zg._fromJSON(t,d);u!==o&&(l=C),o=u;break}}catch{}const g=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!g.length?new II(o,t,r):(o=g[0],l&&await o._set(a,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==o)try{await u._remove(a)}catch{}})),new II(o,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mB(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(hk(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ck(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(pk(t))return"Blackberry";if(bk(t))return"Webos";if(fk(t))return"Safari";if((t.includes("chrome/")||mk(t))&&!t.includes("edge/"))return"Chrome";if(Ak(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Ck(e=ca()){return/firefox\//i.test(e)}function fk(e=ca()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function mk(e=ca()){return/crios\//i.test(e)}function hk(e=ca()){return/iemobile/i.test(e)}function Ak(e=ca()){return/android/i.test(e)}function pk(e=ca()){return/blackberry/i.test(e)}function bk(e=ca()){return/webos/i.test(e)}function FS(e=ca()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function SK(e=ca()){var t;return FS(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function ZK(){return xE()&&document.documentMode===10}function yk(e=ca()){return FS(e)||Ak(e)||bk(e)||pk(e)||/windows phone/i.test(e)||hk(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vk(e,t=[]){let n;switch(e){case"Browser":n=mB(ca());break;case"Worker":n=`${mB(ca())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${eC}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GK{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=o=>new Promise((a,l)=>{try{const g=t(o);a(g)}catch(g){l(g)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BK(e,t={}){return Eg(e,"GET","/v2/passwordPolicy",ou(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RK=6;class wK{constructor(t){var n,r,i,o;const a=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:RK,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=t.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,o,a,l;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,g),this.validatePasswordCharacterOptions(t,g),g.isValid&&(g.isValid=(n=g.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),g.isValid&&(g.isValid=(r=g.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),g.isValid&&(g.isValid=(i=g.containsLowercaseLetter)!==null&&i!==void 0?i:!0),g.isValid&&(g.isValid=(o=g.containsUppercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(a=g.containsNumericCharacter)!==null&&a!==void 0?a:!0),g.isValid&&(g.isValid=(l=g.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),g}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WK{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hB(this),this.idTokenSubscription=new hB(this),this.beforeStateQueue=new GK(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ak,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Gg(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await II.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await uk(this,{idToken:t}),r=await Zg._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(Hs(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,g=await this.tryRedirectSignIn(t);(!a||a===l)&&(g!=null&&g.user)&&(i=g.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Rn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await WA(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=sK()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Hs(this.app))return Promise.reject(wg(this));const n=t?Xa(t):null;return n&&Rn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Rn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Hs(this.app)?Promise.reject(wg(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Hs(this.app)?Promise.reject(wg(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gg(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await BK(this),n=new wK(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new sm("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await vK(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Gg(t)||this._popupRedirectResolver;Rn(n,this,"argument-error"),this.redirectPersistenceManager=await II.create(this,[Gg(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Rn(l,this,"internal-error"),l.then(()=>{a||o(this.currentUser)}),typeof n=="function"){const g=t.addObserver(n,r,i);return()=>{a=!0,g()}}else{const g=t.addObserver(n);return()=>{a=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Rn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=vk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&oK(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ld(e){return Xa(e)}class hB{constructor(t){this.auth=t,this.observer=null,this.addObserver=DE(n=>this.observer=n)}get next(){return Rn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function VK(e){Lp=e}function Sk(e){return Lp.loadJS(e)}function kK(){return Lp.recaptchaEnterpriseScript}function NK(){return Lp.gapiScript}function XK(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class JK{constructor(){this.enterprise=new xK}ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}class xK{ready(t){t()}execute(t,n){return Promise.resolve("token")}render(t,n){return""}}const HK="recaptcha-enterprise",Zk="NO_RECAPTCHA";class YK{constructor(t){this.type=HK,this.auth=ld(t)}async verify(t="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(a,l)=>{CK(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new IK(g);return o.tenantId==null?o._agentRecaptchaConfig=u:o._tenantRecaptchaConfigs[o.tenantId]=u,a(u.siteKey)}}).catch(g=>{l(g)})})}function i(o,a,l){const g=window.grecaptcha;dB(g)?g.enterprise.ready(()=>{g.enterprise.execute(o,{action:t}).then(u=>{a(u)}).catch(()=>{a(Zk)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new JK().execute("siteKey",{action:"verify"}):new Promise((o,a)=>{r(this.auth).then(l=>{if(!n&&dB(window.grecaptcha))i(l,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let g=kK();g.length!==0&&(g+=l),Sk(g).then(()=>{i(l,o,a)}).catch(u=>{a(u)})}}).catch(l=>{a(l)})})}}async function AB(e,t,n,r=!1,i=!1){const o=new YK(e);let a;if(i)a=Zk;else try{a=await o.verify(n)}catch{a=await o.verify(n,!0)}const l=Object.assign({},t);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const g=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const g=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Ov(e,t,n,r,i){var o;if(!((o=e._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await AB(e,t,n,n==="getOobCode");return r(e,a)}else return r(e,t).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await AB(e,t,n,n==="getOobCode");return r(e,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EK(e,t){const n=JS(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(BA(o,t??{}))return i;rs(i,"already-initialized")}return n.initialize({options:t})}function FK(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Gg);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function KK(e,t,n){const r=ld(e);Rn(r._canInitEmulator,r,"emulator-config-failed"),Rn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,o=Gk(t),{host:a,port:l}=LK(t),g=l===null?"":`:${l}`;r.config.emulator={url:`${o}//${a}${g}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),MK()}function Gk(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function LK(e){const t=Gk(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:pB(r.substr(o.length+1))}}else{const[o,a]=r.split(":");return{host:o,port:pB(a)}}}function pB(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function MK(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Sg("not implemented")}_getIdTokenResponse(t){return Sg("not implemented")}_linkToIdToken(t,n){return Sg("not implemented")}_getReauthenticationResolver(t){return Sg("not implemented")}}async function TK(e,t){return Eg(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zK(e,t){return cm(e,"POST","/v1/accounts:signInWithPassword",ou(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DK(e,t){return cm(e,"POST","/v1/accounts:signInWithEmailLink",ou(e,t))}async function PK(e,t){return cm(e,"POST","/v1/accounts:signInWithEmailLink",ou(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf extends KS{constructor(t,n,r,i=null){super("password",r),this._email=t,this._password=n,this._tenantId=i}static _fromEmailAndPassword(t,n){return new wf(t,n,"password")}static _fromEmailAndCode(t,n,r=null){return new wf(t,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ov(t,n,"signInWithPassword",zK);case"emailLink":return DK(t,{email:this._email,oobCode:this._password});default:rs(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ov(t,r,"signUpPassword",TK);case"emailLink":return PK(t,{idToken:n,email:this._email,oobCode:this._password});default:rs(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CI(e,t){return cm(e,"POST","/v1/accounts:signInWithIdp",ou(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OK="http://localhost";class ju extends KS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new ju(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):rs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,o=xS(n,["providerId","signInMethod"]);if(!r||!i)return null;const a=new ju(r,i);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(t){const n=this.buildRequest();return CI(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,CI(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,CI(t,n)}buildRequest(){const t={requestUri:OK,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=qI(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _K(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function UK(e){const t=af(lf(e)).link,n=t?af(lf(t)).deep_link_id:null,r=af(lf(e)).deep_link_id;return(r?af(lf(r)).link:null)||r||n||t||e}class LS{constructor(t){var n,r,i,o,a,l;const g=af(lf(t)),u=(n=g.apiKey)!==null&&n!==void 0?n:null,d=(r=g.oobCode)!==null&&r!==void 0?r:null,C=_K((i=g.mode)!==null&&i!==void 0?i:null);Rn(u&&d&&C,"argument-error"),this.apiKey=u,this.operation=C,this.code=d,this.continueUrl=(o=g.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(a=g.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(l=g.tenantId)!==null&&l!==void 0?l:null}static parseLink(t){const n=UK(t);try{return new LS(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(){this.providerId=tC.PROVIDER_ID}static credential(t,n){return wf._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const r=LS.parseLink(n);return Rn(r,"argument-error"),wf._fromEmailAndCode(t,r.code,r.tenantId)}}tC.PROVIDER_ID="password";tC.EMAIL_PASSWORD_SIGN_IN_METHOD="password";tC.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um extends Bk{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc extends um{constructor(){super("facebook.com")}static credential(t){return ju._fromParams({providerId:Nc.PROVIDER_ID,signInMethod:Nc.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Nc.credentialFromTaggedObject(t)}static credentialFromError(t){return Nc.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Nc.credential(t.oauthAccessToken)}catch{return null}}}Nc.FACEBOOK_SIGN_IN_METHOD="facebook.com";Nc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc extends um{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return ju._fromParams({providerId:Xc.PROVIDER_ID,signInMethod:Xc.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Xc.credentialFromTaggedObject(t)}static credentialFromError(t){return Xc.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Xc.credential(n,r)}catch{return null}}}Xc.GOOGLE_SIGN_IN_METHOD="google.com";Xc.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc extends um{constructor(){super("github.com")}static credential(t){return ju._fromParams({providerId:Jc.PROVIDER_ID,signInMethod:Jc.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Jc.credentialFromTaggedObject(t)}static credentialFromError(t){return Jc.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Jc.credential(t.oauthAccessToken)}catch{return null}}}Jc.GITHUB_SIGN_IN_METHOD="github.com";Jc.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc extends um{constructor(){super("twitter.com")}static credential(t,n){return ju._fromParams({providerId:xc.PROVIDER_ID,signInMethod:xc.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return xc.credentialFromTaggedObject(t)}static credentialFromError(t){return xc.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return xc.credential(n,r)}catch{return null}}}xc.TWITTER_SIGN_IN_METHOD="twitter.com";xc.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jK(e,t){return cm(e,"POST","/v1/accounts:signUp",ou(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const o=await Zg._fromIdTokenResponse(t,r,i),a=bB(r);return new Qu({user:o,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=bB(r);return new Qu({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function bB(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA extends iu{constructor(t,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,VA.prototype),this.customData={appName:t.name,tenantId:(o=t.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new VA(t,n,r,i)}}function Rk(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?VA._fromErrorAndOperation(e,o,t,r):o})}async function QK(e,t,n=!1){const r=await VI(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Qu._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $K(e,t,n=!1){const{auth:r}=e;if(Hs(r.app))return Promise.reject(wg(r));const i="reauthenticate";try{const o=await VI(e,Rk(r,i,t,e),n);Rn(o.idToken,r,"internal-error");const a=ES(o.idToken);Rn(a,r,"internal-error");const{sub:l}=a;return Rn(e.uid===l,r,"user-mismatch"),Qu._forOperation(e,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&rs(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wk(e,t,n=!1){if(Hs(e.app))return Promise.reject(wg(e));const r="signIn",i=await Rk(e,r,t),o=await Qu._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function qK(e,t){return wk(ld(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wk(e){const t=ld(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function eL(e,t,n){if(Hs(e.app))return Promise.reject(wg(e));const r=ld(e),a=await Ov(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",jK).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&Wk(e),g}),l=await Qu._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(l.user),l}function tL(e,t,n){return Hs(e.app)?Promise.reject(wg(e)):qK(Xa(e),tC.credential(t,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Wk(e),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nL(e,t){return Eg(e,"POST","/v1/accounts:update",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rL(e,{displayName:t,photoURL:n}){if(t===void 0&&n===void 0)return;const r=Xa(e),o={idToken:await r.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},a=await VI(r,nL(r.auth,o));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const l=r.providerData.find(({providerId:g})=>g==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function iL(e,t,n,r){return Xa(e).onIdTokenChanged(t,n,r)}function oL(e,t,n){return Xa(e).beforeAuthStateChanged(t,n)}function aL(e,t,n,r){return Xa(e).onAuthStateChanged(t,n,r)}function lL(e){return Xa(e).signOut()}const kA="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(kA,"1"),this.storage.removeItem(kA),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL=1e3,gL=10;class kk extends Vk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yk(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((a,l,g)=>{this.notifyListeners(a,g)});return}const r=t.key;n?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},o=this.storage.getItem(r);ZK()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,gL):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},sL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}kk.type="LOCAL";const cL=kk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk extends Vk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}Nk.type="SESSION";const Xk=Nk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uL(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new Mp(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:o}=n.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(a).map(async u=>u(n.origin,o)),g=await uL(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:g})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Mp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,a;return new Promise((l,g)=>{const u=MS("",20);i.port1.start();const d=setTimeout(()=>{g(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(C){const f=C;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(f.data.response);break;default:clearTimeout(d),clearTimeout(o),g(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:t,eventId:u,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ks(){return window}function IL(e){Ks().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jk(){return typeof Ks().WorkerGlobalScope<"u"&&typeof Ks().importScripts=="function"}async function CL(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fL(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function mL(){return Jk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk="firebaseLocalStorageDb",hL=1,NA="firebaseLocalStorage",Hk="fbase_key";class dm{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Tp(e,t){return e.transaction([NA],t?"readwrite":"readonly").objectStore(NA)}function AL(){const e=indexedDB.deleteDatabase(xk);return new dm(e).toPromise()}function _v(){const e=indexedDB.open(xk,hL);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(NA,{keyPath:Hk})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(NA)?t(r):(r.close(),await AL(),t(await _v()))})})}async function yB(e,t,n){const r=Tp(e,!0).put({[Hk]:t,value:n});return new dm(r).toPromise()}async function pL(e,t){const n=Tp(e,!1).get(t),r=await new dm(n).toPromise();return r===void 0?null:r.value}function vB(e,t){const n=Tp(e,!0).delete(t);return new dm(n).toPromise()}const bL=800,yL=3;class Yk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _v(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>yL)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Jk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mp._getInstance(mL()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await CL(),!this.activeServiceWorker)return;this.sender=new dL(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||fL()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await _v();return await yB(t,kA,"1"),await vB(t,kA),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>yB(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>pL(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>vB(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const o=Tp(i,!1).getAll();return new dm(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:o}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bL)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Yk.type="LOCAL";const vL=Yk;new gm(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SL(e,t){return t?Gg(t):(Rn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS extends KS{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return CI(t,this._buildIdpRequest())}_linkToIdToken(t,n){return CI(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return CI(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function ZL(e){return wk(e.auth,new TS(e),e.bypassAuthState)}function GL(e){const{auth:t,user:n}=e;return Rn(n,t,"internal-error"),$K(n,new TS(e),e.bypassAuthState)}async function BL(e){const{auth:t,user:n}=e;return Rn(n,t,"internal-error"),QK(n,new TS(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(t,n,r,i,o=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:a,type:l}=t;if(a){this.reject(a);return}const g={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(g))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return ZL;case"linkViaPopup":case"linkViaRedirect":return BL;case"reauthViaPopup":case"reauthViaRedirect":return GL;default:rs(this.auth,"internal-error")}}resolve(t){Ng(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ng(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL=new gm(2e3,1e4);class iI extends Ek{constructor(t,n,r,i,o){super(t,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,iI.currentPopupAction&&iI.currentPopupAction.cancel(),iI.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Rn(t,this.auth,"internal-error"),t}async onExecution(){Ng(this.filter.length===1,"Popup operations only handle one event");const t=MS();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Fs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Fs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,iI.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,RL.get())};t()}}iI.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wL="pendingRedirect",Qh=new Map;class WL extends Ek{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=Qh.get(this.auth._key());if(!t){try{const r=await VL(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}Qh.set(this.auth._key(),t)}return this.bypassAuthState||Qh.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function VL(e,t){const n=XL(t),r=NL(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function kL(e,t){Qh.set(e._key(),t)}function NL(e){return Gg(e._redirectPersistence)}function XL(e){return jh(wL,e.config.apiKey,e.name)}async function JL(e,t,n=!1){if(Hs(e.app))return Promise.reject(wg(e));const r=ld(e),i=SL(r,t),a=await new WL(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xL=10*60*1e3;class HL{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!YL(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!Fk(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Fs(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=xL&&this.cachedEventUids.clear(),this.cachedEventUids.has(SB(t))}saveEventToCache(t){this.cachedEventUids.add(SB(t)),this.lastProcessedEventTime=Date.now()}}function SB(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function Fk({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function YL(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Fk(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EL(e,t={}){return Eg(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,KL=/^https?/;async function LL(e){if(e.config.emulator)return;const{authorizedDomains:t}=await EL(e);for(const n of t)try{if(ML(n))return}catch{}rs(e,"unauthorized-domain")}function ML(e){const t=Dv(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return a.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!KL.test(n))return!1;if(FL.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL=new gm(3e4,6e4);function ZB(){const e=Ks().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function zL(e){return new Promise((t,n)=>{var r,i,o;function a(){ZB(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ZB(),n(Fs(e,"network-request-failed"))},timeout:TL.get()})}if(!((i=(r=Ks().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((o=Ks().gapi)===null||o===void 0)&&o.load)a();else{const l=XK("iframefcb");return Ks()[l]=()=>{gapi.load?a():n(Fs(e,"network-request-failed"))},Sk(`${NK()}?onload=${l}`).catch(g=>n(g))}}).catch(t=>{throw $h=null,t})}let $h=null;function DL(e){return $h=$h||zL(e),$h}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL=new gm(5e3,15e3),OL="__/auth/iframe",_L="emulator/auth/iframe",UL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function QL(e){const t=e.config;Rn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?YS(t,_L):`https://${e.config.authDomain}/${OL}`,r={apiKey:t.apiKey,appName:e.name,v:eC},i=jL.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${qI(r).slice(1)}`}async function $L(e){const t=await DL(e),n=Ks().gapi;return Rn(n,e,"internal-error"),t.open({where:document.body,url:QL(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:UL,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const a=Fs(e,"network-request-failed"),l=Ks().setTimeout(()=>{o(a)},PL.get());function g(){Ks().clearTimeout(l),i(r)}r.ping(g).then(g,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},eM=500,tM=600,nM="_blank",rM="http://localhost";class GB{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function iM(e,t,n,r=eM,i=tM){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const g=Object.assign(Object.assign({},qL),{width:r.toString(),height:i.toString(),top:o,left:a}),u=ca().toLowerCase();n&&(l=mk(u)?nM:n),Ck(u)&&(t=t||rM,g.scrollbars="yes");const d=Object.entries(g).reduce((f,[m,b])=>`${f}${m}=${b},`,"");if(SK(u)&&l!=="_self")return oM(t||"",l),new GB(null);const C=window.open(t||"",l,d);Rn(C,e,"popup-blocked");try{C.focus()}catch{}return new GB(C)}function oM(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM="__/auth/handler",lM="emulator/auth/handler",sM=encodeURIComponent("fac");async function BB(e,t,n,r,i,o){Rn(e.config.authDomain,e,"auth-domain-config-required"),Rn(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:eC,eventId:i};if(t instanceof Bk){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",Fv(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,C]of Object.entries({}))a[d]=C}if(t instanceof um){const d=t.getScopes().filter(C=>C!=="");d.length>0&&(a.scopes=d.join(","))}e.tenantId&&(a.tid=e.tenantId);const l=a;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const g=await e._getAppCheckToken(),u=g?`#${sM}=${encodeURIComponent(g)}`:"";return`${gM(e)}?${qI(l).slice(1)}${u}`}function gM({config:e}){return e.emulator?YS(e,lM):`https://${e.authDomain}/${aM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry="webStorageSupport";class cM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xk,this._completeRedirectFn=JL,this._overrideRedirectResult=kL}async _openPopup(t,n,r,i){var o;Ng((o=this.eventManagers[t._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await BB(t,n,r,Dv(),i);return iM(t,a,MS())}async _openRedirect(t,n,r,i){await this._originValidation(t);const o=await BB(t,n,r,Dv(),i);return IL(o),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Ng(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await $L(t),r=new HL(t);return n.register("authEvent",i=>(Rn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(ry,{type:ry},i=>{var o;const a=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[ry];a!==void 0&&n(!!a),rs(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=LL(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return yk()||fk()||FS()}}const uM=cM;var RB="@firebase/auth",wB="1.8.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Rn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IM(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function CM(e){WI(new Uu("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),o=t.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;Rn(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const g={apiKey:a,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vk(e)},u=new WK(r,i,o,g);return FK(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),WI(new Uu("auth-internal",t=>{const n=ld(t.getProvider("auth").getImmediate());return(r=>new dM(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mc(RB,wB,IM(e)),Mc(RB,wB,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM=5*60,mM=UV("authIdTokenMaxAge")||fM;let WB=null;const hM=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>mM)return;const i=n==null?void 0:n.token;WB!==i&&(WB=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function AM(e=nk()){const t=JS(e,"auth");if(t.isInitialized())return t.getImmediate();const n=EK(e,{popupRedirectResolver:uM,persistence:[vL,cL,Xk]}),r=UV("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const a=hM(o.toString());oL(n,a,()=>a(n.currentUser)),iL(n,l=>a(l))}}const i=OV("auth");return i&&KK(n,`http://${i}`),n}function pM(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}VK({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const o=Fs("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",pM().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});CM("Browser");var VB={};const kB="@firebase/database",NB="1.0.11";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kk="";function bM(e){Kk=e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),mo(n))}get(t){const n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:Bf(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n}get(t){return Yg(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new yM(t)}}catch{}return new vM},Tu=Lk("localStorage"),SM=Lk("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI=new NS("@firebase/database"),ZM=function(){let e=1;return function(){return e++}}(),Mk=function(e){const t=_E(e),n=new zE;n.update(t);const r=n.digest();return wS.encodeByteArray(r)},Im=function(...e){let t="";for(let n=0;n<e.length;n++){const r=e[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?t+=Im.apply(null,r):typeof r=="object"?t+=mo(r):t+=r,t+=" "}return t};let If=null,XB=!0;const GM=function(e,t){xt(!0,"Can't turn on custom loggers persistently."),fI.logLevel=Fr.VERBOSE,If=fI.log.bind(fI)},_o=function(...e){if(XB===!0&&(XB=!1,If===null&&SM.get("logging_enabled")===!0&&GM()),If){const t=Im.apply(null,e);If(t)}},Cm=function(e){return function(...t){_o(e,...t)}},Uv=function(...e){const t="FIREBASE INTERNAL ERROR: "+Im(...e);fI.error(t)},Xg=function(...e){const t=`FIREBASE FATAL ERROR: ${Im(...e)}`;throw fI.error(t),new Error(t)},Qa=function(...e){const t="FIREBASE WARNING: "+Im(...e);fI.warn(t)},BM=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Qa("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Tk=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},RM=function(e){if(document.readyState==="complete")e();else{let t=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},kI="[MIN_NAME]",$u="[MAX_NAME]",nC=function(e,t){if(e===t)return 0;if(e===kI||t===$u)return-1;if(t===kI||e===$u)return 1;{const n=JB(e),r=JB(t);return n!==null?r!==null?n-r===0?e.length-t.length:n-r:-1:r!==null?1:e<t?-1:1}},wM=function(e,t){return e===t?0:e<t?-1:1},YC=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+mo(t))},zS=function(e){if(typeof e!="object"||e===null)return mo(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)r!==0&&(n+=","),n+=mo(t[r]),n+=":",n+=zS(e[t[r]]);return n+="}",n},zk=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function ka(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const Dk=function(e){xt(!Tk(e),"Invalid JSON number");const t=11,n=52,r=(1<<t-1)-1;let i,o,a,l,g;e===0?(o=0,a=0,i=1/e===-1/0?1:0):(i=e<0,e=Math.abs(e),e>=Math.pow(2,1-r)?(l=Math.min(Math.floor(Math.log(e)/Math.LN2),r),o=l+r,a=Math.round(e*Math.pow(2,n-l)-Math.pow(2,n))):(o=0,a=Math.round(e/Math.pow(2,1-r-n))));const u=[];for(g=n;g;g-=1)u.push(a%2?1:0),a=Math.floor(a/2);for(g=t;g;g-=1)u.push(o%2?1:0),o=Math.floor(o/2);u.push(i?1:0),u.reverse();const d=u.join("");let C="";for(g=0;g<64;g+=8){let f=parseInt(d.substr(g,8),2).toString(16);f.length===1&&(f="0"+f),C=C+f}return C.toLowerCase()},WM=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},VM=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function kM(e,t){let n="Unknown Error";e==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?n="Client doesn't have permission to access the desired data.":e==="unavailable"&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}const NM=new RegExp("^-?(0*)\\d{1,10}$"),XM=-2147483648,JM=2147483647,JB=function(e){if(NM.test(e)){const t=Number(e);if(t>=XM&&t<=JM)return t}return null},fm=function(e){try{e()}catch(t){setTimeout(()=>{const n=t.stack||"";throw Qa("Exception was thrown by user callback.",n),t},Math.floor(0))}},xM=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Cf=function(e,t){const n=setTimeout(e,t);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(t,n){this.appName_=t,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(t))}notifyForInvalidToken(){Qa(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(t,n,r){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&n.code==="auth/token-not-initialized"?(_o("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Qa(t)}}class qh{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}qh.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS="5",Pk="v",Ok="s",_k="r",Uk="f",jk=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Qk="ls",$k="p",jv="ac",qk="websocket",eN="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(t,n,r,i,o=!1,a="",l=!1,g=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=a,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=g,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Tu.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Tu.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${n}`}}function EM(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function nN(e,t,n){xt(typeof t=="string","typeof type must == string"),xt(typeof n=="object","typeof params must == object");let r;if(t===qk)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===eN)r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);EM(e)&&(n.ns=e.namespace);const i=[];return ka(n,(o,a)=>{i.push(o+"="+a)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(){this.counters_={}}incrementCounter(t,n=1){Yg(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return GE(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy={},oy={};function PS(e){const t=e.toString();return iy[t]||(iy[t]=new FM),iy[t]}function KM(e,t){const n=e.toString();return oy[n]||(oy[n]=t()),oy[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&fm(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xB="start",MM="close",TM="pLPCommand",zM="pRTLPCB",rN="id",iN="pw",oN="ser",DM="cb",PM="seg",OM="ts",_M="d",UM="dframe",aN=1870,lN=30,jM=aN-lN,QM=25e3,$M=3e4;class oI{constructor(t,n,r,i,o,a,l){this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=a,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Cm(t),this.stats_=PS(n),this.urlFn=g=>(this.appCheckToken&&(g[jv]=this.appCheckToken),nN(n,eN,g))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new LM(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor($M)),RM(()=>{if(this.isClosed_)return;this.scriptTagHolder=new OS((...o)=>{const[a,l,g,u,d]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,a===xB)this.id=l,this.password=g;else if(a===MM)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+a)},(...o)=>{const[a,l]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(a,l)},()=>{this.onClosed_()},this.urlFn);const r={};r[xB]="t",r[oN]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[DM]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Pk]=DS,this.transportSessionId&&(r[Ok]=this.transportSessionId),this.lastSessionId&&(r[Qk]=this.lastSessionId),this.applicationId&&(r[$k]=this.applicationId),this.appCheckToken&&(r[jv]=this.appCheckToken),typeof location<"u"&&location.hostname&&jk.test(location.hostname)&&(r[_k]=Uk);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){oI.forceAllow_=!0}static forceDisallow(){oI.forceDisallow_=!0}static isAvailable(){return oI.forceAllow_?!0:!oI.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!WM()&&!VM()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const n=mo(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=DV(n),i=zk(r,jM);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(t,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[UM]="t",r[rN]=t,r[iN]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const n=mo(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class OS{constructor(t,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=ZM(),window[TM+this.uniqueCallbackIdentifier]=t,window[zM+this.uniqueCallbackIdentifier]=n,this.myIFrame=OS.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(l){_o("frame writing exception"),l.stack&&_o(l.stack),_o(l)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||_o("No IE domain setting required")}catch{const r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[rN]=this.myID,t[iN]=this.myPW,t[oN]=this.currentSerial;let n=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+lN+r.length<=aN;){const a=this.pendingSegs.shift();r=r+"&"+PM+i+"="+a.seg+"&"+OM+i+"="+a.ts+"&"+_M+i+"="+a.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(QM)),o=()=>{clearTimeout(i),r()};this.addTag(t,o)}addTag(t,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{_o("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM=16384,e4=45e3;let XA=null;typeof MozWebSocket<"u"?XA=MozWebSocket:typeof WebSocket<"u"&&(XA=WebSocket);class jl{constructor(t,n,r,i,o,a,l){this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Cm(this.connId),this.stats_=PS(n),this.connURL=jl.connectionURL_(n,a,l,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(t,n,r,i,o){const a={};return a[Pk]=DS,typeof location<"u"&&location.hostname&&jk.test(location.hostname)&&(a[_k]=Uk),n&&(a[Ok]=n),r&&(a[Qk]=r),i&&(a[jv]=i),o&&(a[$k]=o),nN(t,qk,a)}open(t,n){this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Tu.set("previous_websocket_failure",!0);try{let r;HE(),this.mySock=new XA(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){jl.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&XA!==null&&!jl.forceDisallow_}static previouslyFailed(){return Tu.isInMemoryStorage||Tu.get("previous_websocket_failure")===!0}markConnectionHealthy(){Tu.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Bf(n);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(xt(this.frames===null,"We already have a frame buffer"),t.length<=6){const n=Number(t);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const n=t.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const n=mo(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=zk(n,qM);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(e4))}sendString_(t){try{this.mySock.send(t)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}jl.responsesRequiredToBeHealthy=2;jl.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{static get ALL_TRANSPORTS(){return[oI,jl]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const n=jl&&jl.isAvailable();let r=n&&!jl.previouslyFailed();if(t.webSocketOnly&&(n||Qa("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[jl];else{const i=this.transports_=[];for(const o of Wf.ALL_TRANSPORTS)o&&o.isAvailable()&&i.push(o);Wf.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Wf.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t4=6e4,n4=5e3,r4=10*1024,i4=100*1024,ay="t",HB="d",o4="s",YB="r",a4="e",EB="o",FB="a",KB="n",LB="p",l4="h";class s4{constructor(t,n,r,i,o,a,l,g,u,d){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=a,this.onReady_=l,this.onDisconnect_=g,this.onKill_=u,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Cm("c:"+this.id+":"),this.transportManager_=new Wf(n),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Cf(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>i4?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>r4?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){const n={t:"d",d:t};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(ay in t){const n=t[ay];n===FB?this.upgradeIfSecondaryHealthy_():n===YB?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===EB&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const n=YC("t",t),r=YC("d",t);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:LB,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:FB,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:KB,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const n=YC("t",t),r=YC("d",t);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const n=YC(ay,t);if(HB in t){const r=t[HB];if(n===l4){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===KB){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===o4?this.onConnectionShutdown_(r):n===YB?this.onReset_(r):n===a4?Uv("Server Error: "+r):n===EB?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Uv("Unknown control packet command: "+n)}}onHandshake_(t){const n=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),DS!==r&&Qa("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Cf(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(t4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Cf(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(n4))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:LB,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Tu.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{put(t,n,r,i){}merge(t,n,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,r){}onDisconnectMerge(t,n,r){}onDisconnectCancel(t,n){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(t){this.allowedEvents_=t,this.listeners_={},xt(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){const r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});const i=this.getInitialEvent(t);i&&n.apply(r,i)}off(t,n,r){this.validateEventType_(t);const i=this.listeners_[t]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(t){xt(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA extends gN{static getInstance(){return new JA}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!kS()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return xt(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MB=32,TB=768;class Dr{constructor(t,n){if(n===void 0){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"}}function Gr(){return new Dr("")}function $n(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Pc(e){return e.pieces_.length-e.pieceNum_}function _r(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Dr(e.pieces_,t)}function cN(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function g4(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)e.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function uN(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function dN(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Dr(t,0)}function $i(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Dr)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Dr(n,0)}function qn(e){return e.pieceNum_>=e.pieces_.length}function Wa(e,t){const n=$n(e),r=$n(t);if(n===null)return t;if(n===r)return Wa(_r(e),_r(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function _S(e,t){if(Pc(e)!==Pc(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Ql(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(Pc(e)>Pc(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class c4{constructor(t,n){this.errorPrefix_=n,this.parts_=uN(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Kp(this.parts_[r]);IN(this)}}function u4(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Kp(t),IN(e)}function d4(e){const t=e.parts_.pop();e.byteLength_-=Kp(t),e.parts_.length>0&&(e.byteLength_-=1)}function IN(e){if(e.byteLength_>TB)throw new Error(e.errorPrefix_+"has a key path longer than "+TB+" bytes ("+e.byteLength_+").");if(e.parts_.length>MB)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+MB+") or object contains a cycle "+Eu(e))}function Eu(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US extends gN{static getInstance(){return new US}constructor(){super(["visible"]);let t,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(t){return xt(t==="visible","Unknown event type: "+t),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=1e3,I4=60*5*1e3,zB=30*1e3,C4=1.3,f4=3e4,m4="server_kill",DB=3;class Wg extends sN{constructor(t,n,r,i,o,a,l,g){if(super(),this.repoInfo_=t,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=g,this.id=Wg.nextPersistentConnectionId_++,this.log_=Cm("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=EC,this.maxReconnectDelay_=I4,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,g)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");US.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&JA.getInstance().on("online",this.onOnline_,this)}sendRequest(t,n,r){const i=++this.requestNumber_,o={r:i,a:t,b:n};this.log_(mo(o)),xt(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[i]=r)}get(t){this.initConnection_();const n=new VS,i={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const l=a.d;a.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),n.promise}listen(t,n,r,i){this.initConnection_();const o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),xt(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),xt(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const l={onComplete:i,hashFn:n,query:t,tag:r};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const n=this.outstandingGets_[t];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(t){const n=t.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const o={p:r},a="q";t.tag&&(o.q=n._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(a,o,l=>{const g=l.d,u=l.s;Wg.warnOnListenWarnings_(g,n),(this.listens.get(r)&&this.listens.get(r).get(i))===t&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(r,i),t.onComplete&&t.onComplete(u,g))})}static warnOnListenWarnings_(t,n){if(t&&typeof t=="object"&&Yg(t,"w")){const r=wI(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',o=n._path.toString();Qa(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||TE(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=zB)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,n=ME(t)?"auth":"gauth",r={cred:t};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const o=i.s,a=i.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const n=t.s,r=t.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(t,n){const r=t._path.toString(),i=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),xt(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,t._queryObject,n)}sendUnlisten_(t,n,r,i){this.log_("Unlisten on "+t+" for "+n);const o={p:t},a="n";i&&(o.q=r,o.t=i),this.sendRequest(a,o)}onDisconnectPut(t,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,n,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:n,onComplete:r})}onDisconnectMerge(t,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,n,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:n,onComplete:r})}onDisconnectCancel(t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(t,n,r,i){const o={p:n,d:r};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{i&&setTimeout(()=>{i(a.s,a.d)},Math.floor(0))})}put(t,n,r,i){this.putInternal("p",t,n,r,i)}merge(t,n,r,i){this.putInternal("m",t,n,r,i)}putInternal(t,n,r,i,o){this.initConnection_();const a={p:n,d:r};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:i}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(t){const n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,o=>{this.log_(n+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(o.s,o.d)})}reportStats(t){if(this.connected_){const n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+mo(t));const n=t.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,n){this.log_("handleServerMessage",t,n),t==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):t==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):t==="c"?this.onListenRevoked_(n.p,n.q):t==="ac"?this.onAuthRevoked_(n.s,n.d):t==="apc"?this.onAppCheckRevoked_(n.s,n.d):t==="sd"?this.onSecurityDebugPacket_(n):Uv("Unrecognized action received from server: "+mo(t)+`
Are you using the latest client?`)}onReady_(t,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){xt(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=EC,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=EC,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>f4&&(this.reconnectDelay_=EC),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-t);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*C4)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Wg.nextConnectionId_++,o=this.lastSessionId;let a=!1,l=null;const g=function(){l?l.close():(a=!0,r())},u=function(C){xt(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(C)};this.realtime_={close:g,sendRequest:u};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[C,f]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?_o("getToken() completed but was canceled"):(_o("getToken() completed. Creating connection."),this.authToken_=C&&C.accessToken,this.appCheckToken_=f&&f.token,l=new s4(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,m=>{Qa(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(m4)},o))}catch(C){this.log_("Failed to get token: "+C),a||(this.repoInfo_.nodeAdmin&&Qa(C),g())}}}interrupt(t){_o("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){_o("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Fv(this.interruptReasons_)&&(this.reconnectDelay_=EC,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const n=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const n=this.outstandingPuts_[t];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,n){let r;n?r=n.map(o=>zS(o)).join("$"):r="default";const i=this.removeListen_(t,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(t,n){const r=new Dr(t).toString();let i;if(this.listens.has(r)){const o=this.listens.get(r);i=o.get(n),o.delete(n),o.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(t,n){_o("Auth token revoked: "+t+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=DB&&(this.reconnectDelay_=zB,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,n){_o("App check token revoked: "+t+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=DB&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const n of t.values())this.sendListen_(n);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let n="js";t["sdk."+n+"."+Kk.replace(/\./g,"-")]=1,kS()?t["framework.cordova"]=1:jV()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=JA.getInstance().currentlyOnline();return Fv(this.interruptReasons_)&&t}}Wg.nextPersistentConnectionId_=0;Wg.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new Un(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){const r=new Un(kI,t),i=new Un(kI,n);return this.compare(r,i)!==0}minPost(){return Un.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yh;class CN extends zp{static get __EMPTY_NODE(){return yh}static set __EMPTY_NODE(t){yh=t}compare(t,n){return nC(t.name,n.name)}isDefinedOn(t){throw $I("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return Un.MIN}maxPost(){return new Un($u,yh)}makePost(t,n){return xt(typeof t=="string","KeyIndex indexValue must always be a string."),new Un(t,yh)}toString(){return".key"}}const mI=new CN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(t,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let a=1;for(;!t.isEmpty();)if(t=t,a=n?r(t.key,n):1,i&&(a*=-1),a<0)this.isReverse_?t=t.left:t=t.right;else if(a===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class Co{constructor(t,n,r,i,o){this.key=t,this.value=n,this.color=r??Co.RED,this.left=i??Va.EMPTY_NODE,this.right=o??Va.EMPTY_NODE}copy(t,n,r,i,o){return new Co(t??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const o=r(t,i.key);return o<0?i=i.copy(null,null,null,i.left.insert(t,n,r),null):o===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Va.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,n){let r,i;if(r=this,n(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(t,r.key)===0){if(r.right.isEmpty())return Va.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,Co.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,Co.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}Co.RED=!0;Co.BLACK=!1;class h4{copy(t,n,r,i,o){return this}insert(t,n,r){return new Co(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Va{constructor(t,n=Va.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new Va(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Co.BLACK,null,null))}remove(t){return new Va(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Co.BLACK,null,null))}get(t){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(t,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(t){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(t,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new vh(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new vh(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new vh(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new vh(this.root_,null,this.comparator_,!0,t)}}Va.EMPTY_NODE=new h4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4(e,t){return nC(e.name,t.name)}function jS(e,t){return nC(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qv;function p4(e){Qv=e}const fN=function(e){return typeof e=="number"?"number:"+Dk(e):"string:"+e},mN=function(e){if(e.isLeafNode()){const t=e.val();xt(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Yg(t,".sv"),"Priority must be a string or number.")}else xt(e===Qv||e.isEmpty(),"priority of unexpected type.");xt(e===Qv||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PB;class Io{static set __childrenNodeConstructor(t){PB=t}static get __childrenNodeConstructor(){return PB}constructor(t,n=Io.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=n,this.lazyHash_=null,xt(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),mN(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new Io(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:Io.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return qn(t)?this:$n(t)===".priority"?this.priorityNode_:Io.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,n){return null}updateImmediateChild(t,n){return t===".priority"?this.updatePriority(n):n.isEmpty()&&t!==".priority"?this:Io.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}updateChild(t,n){const r=$n(t);return r===null?n:n.isEmpty()&&r!==".priority"?this:(xt(r!==".priority"||Pc(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,Io.__childrenNodeConstructor.EMPTY_NODE.updateChild(_r(t),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,n){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+fN(this.priorityNode_.val())+":");const n=typeof this.value_;t+=n+":",n==="number"?t+=Dk(this.value_):t+=this.value_,this.lazyHash_=Mk(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===Io.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Io.__childrenNodeConstructor?-1:(xt(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const n=typeof t.value_,r=typeof this.value_,i=Io.VALUE_TYPE_ORDER.indexOf(n),o=Io.VALUE_TYPE_ORDER.indexOf(r);return xt(i>=0,"Unknown leaf type: "+n),xt(o>=0,"Unknown leaf type: "+r),i===o?r==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-i}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const n=t;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Io.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hN,AN;function b4(e){hN=e}function y4(e){AN=e}class v4 extends zp{compare(t,n){const r=t.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return o===0?nC(t.name,n.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return Un.MIN}maxPost(){return new Un($u,new Io("[PRIORITY-POST]",AN))}makePost(t,n){const r=hN(t);return new Un(n,new Io("[PRIORITY-POST]",r))}toString(){return".priority"}}const Zi=new v4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4=Math.log(2);class Z4{constructor(t){const n=o=>parseInt(Math.log(o)/S4,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=n(t+1),this.current_=this.count-1;const i=r(this.count);this.bits_=t+1&i}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const xA=function(e,t,n,r){e.sort(t);const i=function(g,u){const d=u-g;let C,f;if(d===0)return null;if(d===1)return C=e[g],f=n?n(C):C,new Co(f,C.node,Co.BLACK,null,null);{const m=parseInt(d/2,10)+g,b=i(g,m),p=i(m+1,u);return C=e[m],f=n?n(C):C,new Co(f,C.node,Co.BLACK,b,p)}},o=function(g){let u=null,d=null,C=e.length;const f=function(b,p){const y=C-b,S=C;C-=b;const v=i(y+1,S),B=e[y],W=n?n(B):B;m(new Co(W,B.node,p,null,v))},m=function(b){u?(u.left=b,u=b):(d=b,u=b)};for(let b=0;b<g.count;++b){const p=g.nextBitIsOne(),y=Math.pow(2,g.count-(b+1));p?f(y,Co.BLACK):(f(y,Co.BLACK),f(y,Co.RED))}return d},a=new Z4(e.length),l=o(a);return new Va(r||t,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ly;const Yd={};class Bg{static get Default(){return xt(Yd&&Zi,"ChildrenNode.ts has not been loaded"),ly=ly||new Bg({".priority":Yd},{".priority":Zi}),ly}constructor(t,n){this.indexes_=t,this.indexSet_=n}get(t){const n=wI(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof Va?n:null}hasIndex(t){return Yg(this.indexSet_,t.toString())}addIndex(t,n){xt(t!==mI,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=n.getIterator(Un.Wrap);let a=o.getNext();for(;a;)i=i||t.isDefinedOn(a.node),r.push(a),a=o.getNext();let l;i?l=xA(r,t.getCompare()):l=Yd;const g=t.toString(),u=Object.assign({},this.indexSet_);u[g]=t;const d=Object.assign({},this.indexes_);return d[g]=l,new Bg(d,u)}addToIndexes(t,n){const r=GA(this.indexes_,(i,o)=>{const a=wI(this.indexSet_,o);if(xt(a,"Missing index implementation for "+o),i===Yd)if(a.isDefinedOn(t.node)){const l=[],g=n.getIterator(Un.Wrap);let u=g.getNext();for(;u;)u.name!==t.name&&l.push(u),u=g.getNext();return l.push(t),xA(l,a.getCompare())}else return Yd;else{const l=n.get(t.name);let g=i;return l&&(g=g.remove(new Un(t.name,l))),g.insert(t,t.node)}});return new Bg(r,this.indexSet_)}removeFromIndexes(t,n){const r=GA(this.indexes_,i=>{if(i===Yd)return i;{const o=n.get(t.name);return o?i.remove(new Un(t.name,o)):i}});return new Bg(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FC;class wn{static get EMPTY_NODE(){return FC||(FC=new wn(new Va(jS),null,Bg.Default))}constructor(t,n,r){this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&mN(this.priorityNode_),this.children_.isEmpty()&&xt(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||FC}updatePriority(t){return this.children_.isEmpty()?this:new wn(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const n=this.children_.get(t);return n===null?FC:n}}getChild(t){const n=$n(t);return n===null?this:this.getImmediateChild(n).getChild(_r(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,n){if(xt(n,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(n);{const r=new Un(t,n);let i,o;n.isEmpty()?(i=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,n),o=this.indexMap_.addToIndexes(r,this.children_));const a=i.isEmpty()?FC:this.priorityNode_;return new wn(i,a,o)}}updateChild(t,n){const r=$n(t);if(r===null)return n;{xt($n(t)!==".priority"||Pc(t)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(_r(t),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const n={};let r=0,i=0,o=!0;if(this.forEachChild(Zi,(a,l)=>{n[a]=l.val(t),r++,o&&wn.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1}),!t&&o&&i<2*r){const a=[];for(const l in n)a[l]=n[l];return a}else return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+fN(this.getPriority().val())+":"),this.forEachChild(Zi,(n,r)=>{const i=r.hash();i!==""&&(t+=":"+n+":"+i)}),this.lazyHash_=t===""?"":Mk(t)}return this.lazyHash_}getPredecessorChildName(t,n,r){const i=this.resolveIndex_(r);if(i){const o=i.getPredecessorKey(new Un(t,n));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const n=this.resolveIndex_(t);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(t){const n=this.getFirstChildName(t);return n?new Un(n,this.children_.get(n)):null}getLastChildName(t){const n=this.resolveIndex_(t);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(t){const n=this.getLastChildName(t);return n?new Un(n,this.children_.get(n)):null}forEachChild(t,n){const r=this.resolveIndex_(t);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(t,i=>i);{const i=this.children_.getIteratorFrom(t.name,Un.Wrap);let o=i.peek();for(;o!=null&&n.compare(o,t)<0;)i.getNext(),o=i.peek();return i}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(t,i=>i);{const i=this.children_.getReverseIteratorFrom(t.name,Un.Wrap);let o=i.peek();for(;o!=null&&n.compare(o,t)>0;)i.getNext(),o=i.peek();return i}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===mm?-1:0}withIndex(t){if(t===mI||this.indexMap_.hasIndex(t))return this;{const n=this.indexMap_.addIndex(t,this.children_);return new wn(this.children_,this.priorityNode_,n)}}isIndexed(t){return t===mI||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const n=t;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(Zi),i=n.getIterator(Zi);let o=r.getNext(),a=i.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=r.getNext(),a=i.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===mI?null:this.indexMap_.get(t.toString())}}wn.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class G4 extends wn{constructor(){super(new Va(jS),wn.EMPTY_NODE,Bg.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return wn.EMPTY_NODE}isEmpty(){return!1}}const mm=new G4;Object.defineProperties(Un,{MIN:{value:new Un(kI,wn.EMPTY_NODE)},MAX:{value:new Un($u,mm)}});CN.__EMPTY_NODE=wn.EMPTY_NODE;Io.__childrenNodeConstructor=wn;p4(mm);y4(mm);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B4=!0;function Uo(e,t=null){if(e===null)return wn.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),xt(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){const n=e;return new Io(n,Uo(t))}if(!(e instanceof Array)&&B4){const n=[];let r=!1;if(ka(e,(a,l)=>{if(a.substring(0,1)!=="."){const g=Uo(l);g.isEmpty()||(r=r||!g.getPriority().isEmpty(),n.push(new Un(a,g)))}}),n.length===0)return wn.EMPTY_NODE;const o=xA(n,A4,a=>a.name,jS);if(r){const a=xA(n,Zi.getCompare());return new wn(o,Uo(t),new Bg({".priority":a},{".priority":Zi}))}else return new wn(o,Uo(t),Bg.Default)}else{let n=wn.EMPTY_NODE;return ka(e,(r,i)=>{if(Yg(e,r)&&r.substring(0,1)!=="."){const o=Uo(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(Uo(t))}}b4(Uo);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4 extends zp{constructor(t){super(),this.indexPath_=t,xt(!qn(t)&&$n(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){const r=this.extractChild(t.node),i=this.extractChild(n.node),o=r.compareTo(i);return o===0?nC(t.name,n.name):o}makePost(t,n){const r=Uo(t),i=wn.EMPTY_NODE.updateChild(this.indexPath_,r);return new Un(n,i)}maxPost(){const t=wn.EMPTY_NODE.updateChild(this.indexPath_,mm);return new Un($u,t)}toString(){return uN(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4 extends zp{compare(t,n){const r=t.node.compareTo(n.node);return r===0?nC(t.name,n.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return Un.MIN}maxPost(){return Un.MAX}makePost(t,n){const r=Uo(t);return new Un(n,r)}toString(){return".value"}}const W4=new w4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pN(e){return{type:"value",snapshotNode:e}}function NI(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Vf(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function kf(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function V4(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(t){this.index_=t}updateChild(t,n,r,i,o,a){xt(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=t.getImmediateChild(n);return l.getChild(i).equals(r.getChild(i))&&l.isEmpty()===r.isEmpty()||(a!=null&&(r.isEmpty()?t.hasChild(n)?a.trackChildChange(Vf(n,l)):xt(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?a.trackChildChange(NI(n,r)):a.trackChildChange(kf(n,r,l))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(t,n,r){return r!=null&&(t.isLeafNode()||t.forEachChild(Zi,(i,o)=>{n.hasChild(i)||r.trackChildChange(Vf(i,o))}),n.isLeafNode()||n.forEachChild(Zi,(i,o)=>{if(t.hasChild(i)){const a=t.getImmediateChild(i);a.equals(o)||r.trackChildChange(kf(i,o,a))}else r.trackChildChange(NI(i,o))})),n.withIndex(this.index_)}updatePriority(t,n){return t.isEmpty()?wn.EMPTY_NODE:t.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(t){this.indexedFilter_=new QS(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Nf.getStartPost_(t),this.endPost_=Nf.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,r=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return n&&r}updateChild(t,n,r,i,o,a){return this.matches(new Un(n,r))||(r=wn.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,r,i,o,a)}updateFullNode(t,n,r){n.isLeafNode()&&(n=wn.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(wn.EMPTY_NODE);const o=this;return n.forEachChild(Zi,(a,l)=>{o.matches(new Un(a,l))||(i=i.updateImmediateChild(a,wn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(t){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Nf(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,n,r,i,o,a){return this.rangedFilter_.matches(new Un(n,r))||(r=wn.EMPTY_NODE),t.getImmediateChild(n).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,r,i,o,a):this.fullLimitUpdateChild_(t,n,r,o,a)}updateFullNode(t,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=wn.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=wn.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let a=0;for(;o.hasNext()&&a<this.limit_;){const l=o.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))i=i.updateImmediateChild(l.name,l.node),a++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(wn.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let a=0;for(;o.hasNext();){const l=o.getNext();a<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?a++:i=i.updateImmediateChild(l.name,wn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,n,r,i,o){let a;if(this.reverse_){const C=this.index_.getCompare();a=(f,m)=>C(m,f)}else a=this.index_.getCompare();const l=t;xt(l.numChildren()===this.limit_,"");const g=new Un(n,r),u=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),d=this.rangedFilter_.matches(g);if(l.hasChild(n)){const C=l.getImmediateChild(n);let f=i.getChildAfterChild(this.index_,u,this.reverse_);for(;f!=null&&(f.name===n||l.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);const m=f==null?1:a(f,g);if(d&&!r.isEmpty()&&m>=0)return o!=null&&o.trackChildChange(kf(n,r,C)),l.updateImmediateChild(n,r);{o!=null&&o.trackChildChange(Vf(n,C));const p=l.updateImmediateChild(n,wn.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(o!=null&&o.trackChildChange(NI(f.name,f.node)),p.updateImmediateChild(f.name,f.node)):p}}else return r.isEmpty()?t:d&&a(u,g)>=0?(o!=null&&(o.trackChildChange(Vf(u.name,u.node)),o.trackChildChange(NI(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(u.name,wn.EMPTY_NODE)):t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Zi}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return xt(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return xt(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:kI}hasEnd(){return this.endSet_}getIndexEndValue(){return xt(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return xt(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:$u}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return xt(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Zi}copy(){const t=new $S;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function N4(e){return e.loadsAllData()?new QS(e.getIndex()):e.hasLimit()?new k4(e):new Nf(e)}function OB(e){const t={};if(e.isDefault())return t;let n;if(e.index_===Zi?n="$priority":e.index_===W4?n="$value":e.index_===mI?n="$key":(xt(e.index_ instanceof R4,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=mo(n),e.startSet_){const r=e.startAfterSet_?"startAfter":"startAt";t[r]=mo(e.indexStartValue_),e.startNameSet_&&(t[r]+=","+mo(e.indexStartName_))}if(e.endSet_){const r=e.endBeforeSet_?"endBefore":"endAt";t[r]=mo(e.indexEndValue_),e.endNameSet_&&(t[r]+=","+mo(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function _B(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;n===""&&(e.isViewFromLeft()?n="l":n="r"),t.vf=n}return e.index_!==Zi&&(t.i=e.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA extends sN{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return n!==void 0?"tag$"+n:(xt(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,n,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Cm("p:rest:"),this.listens_={}}listen(t,n,r,i){const o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);const a=HA.getListenId_(t,r),l={};this.listens_[a]=l;const g=OB(t._queryParams);this.restRequest_(o+".json",g,(u,d)=>{let C=d;if(u===404&&(C=null,u=null),u===null&&this.onDataUpdate_(o,C,!1,r),wI(this.listens_,a)===l){let f;u?u===401?f="permission_denied":f="rest_error:"+u:f="ok",i(f,null)}})}unlisten(t,n){const r=HA.getListenId_(t,n);delete this.listens_[r]}get(t){const n=OB(t._queryParams),r=t._path.toString(),i=new VS;return this.restRequest_(r+".json",n,(o,a)=>{let l=a;o===404&&(l=null,o=null),o===null?(this.onDataUpdate_(r,l,!1,null),i.resolve(l)):i.reject(new Error(l))}),i.promise}refreshAuthToken(t){}restRequest_(t,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+qI(n);this.log_("Sending REST request for "+a);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(r&&l.readyState===4){this.log_("REST Response for "+a+" received. status:",l.status,"response:",l.responseText);let g=null;if(l.status>=200&&l.status<300){try{g=Bf(l.responseText)}catch{Qa("Failed to parse JSON response for "+a+": "+l.responseText)}r(null,g)}else l.status!==401&&l.status!==404&&Qa("Got unsuccessful REST response for "+a+" Status: "+l.status),r(l.status);r=null}},l.open("GET",a,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4{constructor(){this.rootNode_=wn.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(){return{value:null,children:new Map}}function bN(e,t,n){if(qn(t))e.value=n,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,n);else{const r=$n(t);e.children.has(r)||e.children.set(r,YA());const i=e.children.get(r);t=_r(t),bN(i,t,n)}}function $v(e,t,n){e.value!==null?n(t,e.value):J4(e,(r,i)=>{const o=new Dr(t.toString()+"/"+r);$v(i,o,n)})}function J4(e,t){e.children.forEach((n,r)=>{t(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),n=Object.assign({},t);return this.last_&&ka(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UB=10*1e3,H4=30*1e3,Y4=5*60*1e3;class E4{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new x4(t);const r=UB+(H4-UB)*Math.random();Cf(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const t=this.statsListener_.get(),n={};let r=!1;ka(t,(i,o)=>{o>0&&Yg(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),Cf(this.reportStats_.bind(this),Math.floor(Math.random()*2*Y4))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $l;(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})($l||($l={}));function yN(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function qS(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function eZ(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=$l.ACK_USER_WRITE,this.source=yN()}operationForChild(t){if(qn(this.path)){if(this.affectedTree.value!=null)return xt(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Dr(t));return new EA(Gr(),n,this.revert)}}else return xt($n(this.path)===t,"operationForChild called for unrelated child."),new EA(_r(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(t,n){this.source=t,this.path=n,this.type=$l.LISTEN_COMPLETE}operationForChild(t){return qn(this.path)?new Xf(this.source,Gr()):new Xf(this.source,_r(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=$l.OVERWRITE}operationForChild(t){return qn(this.path)?new qu(this.source,Gr(),this.snap.getImmediateChild(t)):new qu(this.source,_r(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(t,n,r){this.source=t,this.path=n,this.children=r,this.type=$l.MERGE}operationForChild(t){if(qn(this.path)){const n=this.children.subtree(new Dr(t));return n.isEmpty()?null:n.value?new qu(this.source,Gr(),n.value):new Jf(this.source,Gr(),n)}else return xt($n(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new Jf(this.source,_r(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(qn(t))return this.isFullyInitialized()&&!this.filtered_;const n=$n(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function K4(e,t,n,r){const i=[],o=[];return t.forEach(a=>{a.type==="child_changed"&&e.index_.indexedValueChanged(a.oldSnap,a.snapshotNode)&&o.push(V4(a.childName,a.snapshotNode))}),KC(e,i,"child_removed",t,r,n),KC(e,i,"child_added",t,r,n),KC(e,i,"child_moved",o,r,n),KC(e,i,"child_changed",t,r,n),KC(e,i,"value",t,r,n),i}function KC(e,t,n,r,i,o){const a=r.filter(l=>l.type===n);a.sort((l,g)=>M4(e,l,g)),a.forEach(l=>{const g=L4(e,l,o);i.forEach(u=>{u.respondsTo(l.type)&&t.push(u.createEvent(g,e.query_))})})}function L4(e,t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function M4(e,t,n){if(t.childName==null||n.childName==null)throw $I("Should only compare child_ events.");const r=new Un(t.childName,t.snapshotNode),i=new Un(n.childName,n.snapshotNode);return e.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(e,t){return{eventCache:e,serverCache:t}}function ff(e,t,n,r){return Dp(new ed(t,n,r),e.serverCache)}function vN(e,t,n,r){return Dp(e.eventCache,new ed(t,n,r))}function qv(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function td(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sy;const T4=()=>(sy||(sy=new Va(wM)),sy);class ti{static fromObject(t){let n=new ti(null);return ka(t,(r,i)=>{n=n.set(new Dr(r),i)}),n}constructor(t,n=T4()){this.value=t,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(this.value!=null&&n(this.value))return{path:Gr(),value:this.value};if(qn(t))return null;{const r=$n(t),i=this.children.get(r);if(i!==null){const o=i.findRootMostMatchingPathAndValue(_r(t),n);return o!=null?{path:$i(new Dr(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(qn(t))return this;{const n=$n(t),r=this.children.get(n);return r!==null?r.subtree(_r(t)):new ti(null)}}set(t,n){if(qn(t))return new ti(n,this.children);{const r=$n(t),o=(this.children.get(r)||new ti(null)).set(_r(t),n),a=this.children.insert(r,o);return new ti(this.value,a)}}remove(t){if(qn(t))return this.children.isEmpty()?new ti(null):new ti(null,this.children);{const n=$n(t),r=this.children.get(n);if(r){const i=r.remove(_r(t));let o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?new ti(null):new ti(this.value,o)}else return this}}get(t){if(qn(t))return this.value;{const n=$n(t),r=this.children.get(n);return r?r.get(_r(t)):null}}setTree(t,n){if(qn(t))return n;{const r=$n(t),o=(this.children.get(r)||new ti(null)).setTree(_r(t),n);let a;return o.isEmpty()?a=this.children.remove(r):a=this.children.insert(r,o),new ti(this.value,a)}}fold(t){return this.fold_(Gr(),t)}fold_(t,n){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_($i(t,i),n)}),n(t,this.value,r)}findOnPath(t,n){return this.findOnPath_(t,Gr(),n)}findOnPath_(t,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(qn(t))return null;{const o=$n(t),a=this.children.get(o);return a?a.findOnPath_(_r(t),$i(n,o),r):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,Gr(),n)}foreachOnPath_(t,n,r){if(qn(t))return this;{this.value&&r(n,this.value);const i=$n(t),o=this.children.get(i);return o?o.foreachOnPath_(_r(t),$i(n,i),r):new ti(null)}}foreach(t){this.foreach_(Gr(),t)}foreach_(t,n){this.children.inorderTraversal((r,i)=>{i.foreach_($i(t,r),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,r)=>{r.value&&t(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(t){this.writeTree_=t}static empty(){return new ql(new ti(null))}}function mf(e,t,n){if(qn(t))return new ql(new ti(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(r!=null){const i=r.path;let o=r.value;const a=Wa(i,t);return o=o.updateChild(a,n),new ql(e.writeTree_.set(i,o))}else{const i=new ti(n),o=e.writeTree_.setTree(t,i);return new ql(o)}}}function jB(e,t,n){let r=e;return ka(n,(i,o)=>{r=mf(r,$i(t,i),o)}),r}function QB(e,t){if(qn(t))return ql.empty();{const n=e.writeTree_.setTree(t,new ti(null));return new ql(n)}}function e2(e,t){return sd(e,t)!=null}function sd(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(Wa(n.path,t)):null}function $B(e){const t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Zi,(r,i)=>{t.push(new Un(r,i))}):e.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&t.push(new Un(r,i.value))}),t}function Tc(e,t){if(qn(t))return e;{const n=sd(e,t);return n!=null?new ql(new ti(n)):new ql(e.writeTree_.subtree(t))}}function t2(e){return e.writeTree_.isEmpty()}function XI(e,t){return SN(Gr(),e.writeTree_,t)}function SN(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((i,o)=>{i===".priority"?(xt(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=SN($i(e,i),o,n)}),!n.getChild(e).isEmpty()&&r!==null&&(n=n.updateChild($i(e,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tZ(e,t){return RN(t,e)}function z4(e,t,n,r,i){xt(r>e.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=mf(e.visibleWrites,t,n)),e.lastWriteId=r}function D4(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}function P4(e,t){const n=e.allWrites.findIndex(l=>l.writeId===t);xt(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,o=!1,a=e.allWrites.length-1;for(;i&&a>=0;){const l=e.allWrites[a];l.visible&&(a>=n&&O4(l,r.path)?i=!1:Ql(r.path,l.path)&&(o=!0)),a--}if(i){if(o)return _4(e),!0;if(r.snap)e.visibleWrites=QB(e.visibleWrites,r.path);else{const l=r.children;ka(l,g=>{e.visibleWrites=QB(e.visibleWrites,$i(r.path,g))})}return!0}else return!1}function O4(e,t){if(e.snap)return Ql(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Ql($i(e.path,n),t))return!0;return!1}function _4(e){e.visibleWrites=ZN(e.allWrites,U4,Gr()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function U4(e){return e.visible}function ZN(e,t,n){let r=ql.empty();for(let i=0;i<e.length;++i){const o=e[i];if(t(o)){const a=o.path;let l;if(o.snap)Ql(n,a)?(l=Wa(n,a),r=mf(r,l,o.snap)):Ql(a,n)&&(l=Wa(a,n),r=mf(r,Gr(),o.snap.getChild(l)));else if(o.children){if(Ql(n,a))l=Wa(n,a),r=jB(r,l,o.children);else if(Ql(a,n))if(l=Wa(a,n),qn(l))r=jB(r,Gr(),o.children);else{const g=wI(o.children,$n(l));if(g){const u=g.getChild(_r(l));r=mf(r,Gr(),u)}}}else throw $I("WriteRecord should have .snap or .children")}}return r}function GN(e,t,n,r,i){if(!r&&!i){const o=sd(e.visibleWrites,t);if(o!=null)return o;{const a=Tc(e.visibleWrites,t);if(t2(a))return n;if(n==null&&!e2(a,Gr()))return null;{const l=n||wn.EMPTY_NODE;return XI(a,l)}}}else{const o=Tc(e.visibleWrites,t);if(!i&&t2(o))return n;if(!i&&n==null&&!e2(o,Gr()))return null;{const a=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(Ql(u.path,t)||Ql(t,u.path))},l=ZN(e.allWrites,a,t),g=n||wn.EMPTY_NODE;return XI(l,g)}}}function j4(e,t,n){let r=wn.EMPTY_NODE;const i=sd(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Zi,(o,a)=>{r=r.updateImmediateChild(o,a)}),r;if(n){const o=Tc(e.visibleWrites,t);return n.forEachChild(Zi,(a,l)=>{const g=XI(Tc(o,new Dr(a)),l);r=r.updateImmediateChild(a,g)}),$B(o).forEach(a=>{r=r.updateImmediateChild(a.name,a.node)}),r}else{const o=Tc(e.visibleWrites,t);return $B(o).forEach(a=>{r=r.updateImmediateChild(a.name,a.node)}),r}}function Q4(e,t,n,r,i){xt(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=$i(t,n);if(e2(e.visibleWrites,o))return null;{const a=Tc(e.visibleWrites,o);return t2(a)?i.getChild(n):XI(a,i.getChild(n))}}function $4(e,t,n,r){const i=$i(t,n),o=sd(e.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(n)){const a=Tc(e.visibleWrites,i);return XI(a,r.getNode().getImmediateChild(n))}else return null}function q4(e,t){return sd(e.visibleWrites,t)}function eT(e,t,n,r,i,o,a){let l;const g=Tc(e.visibleWrites,t),u=sd(g,Gr());if(u!=null)l=u;else if(n!=null)l=XI(g,n);else return[];if(l=l.withIndex(a),!l.isEmpty()&&!l.isLeafNode()){const d=[],C=a.getCompare(),f=o?l.getReverseIteratorFrom(r,a):l.getIteratorFrom(r,a);let m=f.getNext();for(;m&&d.length<i;)C(m,r)!==0&&d.push(m),m=f.getNext();return d}else return[]}function tT(){return{visibleWrites:ql.empty(),allWrites:[],lastWriteId:-1}}function FA(e,t,n,r){return GN(e.writeTree,e.treePath,t,n,r)}function nZ(e,t){return j4(e.writeTree,e.treePath,t)}function qB(e,t,n,r){return Q4(e.writeTree,e.treePath,t,n,r)}function KA(e,t){return q4(e.writeTree,$i(e.treePath,t))}function nT(e,t,n,r,i,o){return eT(e.writeTree,e.treePath,t,n,r,i,o)}function rZ(e,t,n){return $4(e.writeTree,e.treePath,t,n)}function BN(e,t){return RN($i(e.treePath,t),e.writeTree)}function RN(e,t){return{treePath:e,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(){this.changeMap=new Map}trackChildChange(t){const n=t.type,r=t.childName;xt(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),xt(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(r,kf(r,t.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(r,Vf(r,i.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(r,NI(r,t.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(r,kf(r,t.snapshotNode,i.oldSnap));else throw $I("Illegal combination of changes: "+t+" occurred after "+i)}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{getCompleteChild(t){return null}getChildAfterChild(t,n,r){return null}}const wN=new iT;class iZ{constructor(t,n,r=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(t){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{const r=this.optCompleteServerCache_!=null?new ed(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return rZ(this.writes_,t,r)}}getChildAfterChild(t,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:td(this.viewCache_),o=nT(this.writes_,i,n,1,r,t);return o.length===0?null:o[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(e){return{filter:e}}function aT(e,t){xt(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),xt(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function lT(e,t,n,r,i){const o=new rT;let a,l;if(n.type===$l.OVERWRITE){const u=n;u.source.fromUser?a=n2(e,t,u.path,u.snap,r,i,o):(xt(u.source.fromServer,"Unknown source."),l=u.source.tagged||t.serverCache.isFiltered()&&!qn(u.path),a=LA(e,t,u.path,u.snap,r,i,l,o))}else if(n.type===$l.MERGE){const u=n;u.source.fromUser?a=gT(e,t,u.path,u.children,r,i,o):(xt(u.source.fromServer,"Unknown source."),l=u.source.tagged||t.serverCache.isFiltered(),a=r2(e,t,u.path,u.children,r,i,l,o))}else if(n.type===$l.ACK_USER_WRITE){const u=n;u.revert?a=dT(e,t,u.path,r,i,o):a=cT(e,t,u.path,u.affectedTree,r,i,o)}else if(n.type===$l.LISTEN_COMPLETE)a=uT(e,t,n.path,r,o);else throw $I("Unknown operation type: "+n.type);const g=o.getChanges();return sT(t,a,g),{viewCache:a,changes:g}}function sT(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=qv(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(pN(qv(t)))}}function WN(e,t,n,r,i,o){const a=t.eventCache;if(KA(r,n)!=null)return t;{let l,g;if(qn(n))if(xt(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const u=td(t),d=u instanceof wn?u:wn.EMPTY_NODE,C=nZ(r,d);l=e.filter.updateFullNode(t.eventCache.getNode(),C,o)}else{const u=FA(r,td(t));l=e.filter.updateFullNode(t.eventCache.getNode(),u,o)}else{const u=$n(n);if(u===".priority"){xt(Pc(n)===1,"Can't have a priority with additional path components");const d=a.getNode();g=t.serverCache.getNode();const C=qB(r,n,d,g);C!=null?l=e.filter.updatePriority(d,C):l=a.getNode()}else{const d=_r(n);let C;if(a.isCompleteForChild(u)){g=t.serverCache.getNode();const f=qB(r,n,a.getNode(),g);f!=null?C=a.getNode().getImmediateChild(u).updateChild(d,f):C=a.getNode().getImmediateChild(u)}else C=rZ(r,u,t.serverCache);C!=null?l=e.filter.updateChild(a.getNode(),u,C,d,i,o):l=a.getNode()}}return ff(t,l,a.isFullyInitialized()||qn(n),e.filter.filtersNodes())}}function LA(e,t,n,r,i,o,a,l){const g=t.serverCache;let u;const d=a?e.filter:e.filter.getIndexedFilter();if(qn(n))u=d.updateFullNode(g.getNode(),r,null);else if(d.filtersNodes()&&!g.isFiltered()){const m=g.getNode().updateChild(n,r);u=d.updateFullNode(g.getNode(),m,null)}else{const m=$n(n);if(!g.isCompleteForPath(n)&&Pc(n)>1)return t;const b=_r(n),y=g.getNode().getImmediateChild(m).updateChild(b,r);m===".priority"?u=d.updatePriority(g.getNode(),y):u=d.updateChild(g.getNode(),m,y,b,wN,null)}const C=vN(t,u,g.isFullyInitialized()||qn(n),d.filtersNodes()),f=new iZ(i,C,o);return WN(e,C,n,i,f,l)}function n2(e,t,n,r,i,o,a){const l=t.eventCache;let g,u;const d=new iZ(i,t,o);if(qn(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,a),g=ff(t,u,!0,e.filter.filtersNodes());else{const C=$n(n);if(C===".priority")u=e.filter.updatePriority(t.eventCache.getNode(),r),g=ff(t,u,l.isFullyInitialized(),l.isFiltered());else{const f=_r(n),m=l.getNode().getImmediateChild(C);let b;if(qn(f))b=r;else{const p=d.getCompleteChild(C);p!=null?cN(f)===".priority"&&p.getChild(dN(f)).isEmpty()?b=p:b=p.updateChild(f,r):b=wn.EMPTY_NODE}if(m.equals(b))g=t;else{const p=e.filter.updateChild(l.getNode(),C,b,f,d,a);g=ff(t,p,l.isFullyInitialized(),e.filter.filtersNodes())}}}return g}function e5(e,t){return e.eventCache.isCompleteForChild(t)}function gT(e,t,n,r,i,o,a){let l=t;return r.foreach((g,u)=>{const d=$i(n,g);e5(t,$n(d))&&(l=n2(e,l,d,u,i,o,a))}),r.foreach((g,u)=>{const d=$i(n,g);e5(t,$n(d))||(l=n2(e,l,d,u,i,o,a))}),l}function t5(e,t,n){return n.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function r2(e,t,n,r,i,o,a,l){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let g=t,u;qn(n)?u=r:u=new ti(null).setTree(n,r);const d=t.serverCache.getNode();return u.children.inorderTraversal((C,f)=>{if(d.hasChild(C)){const m=t.serverCache.getNode().getImmediateChild(C),b=t5(e,m,f);g=LA(e,g,new Dr(C),b,i,o,a,l)}}),u.children.inorderTraversal((C,f)=>{const m=!t.serverCache.isCompleteForChild(C)&&f.value===null;if(!d.hasChild(C)&&!m){const b=t.serverCache.getNode().getImmediateChild(C),p=t5(e,b,f);g=LA(e,g,new Dr(C),p,i,o,a,l)}}),g}function cT(e,t,n,r,i,o,a){if(KA(i,n)!=null)return t;const l=t.serverCache.isFiltered(),g=t.serverCache;if(r.value!=null){if(qn(n)&&g.isFullyInitialized()||g.isCompleteForPath(n))return LA(e,t,n,g.getNode().getChild(n),i,o,l,a);if(qn(n)){let u=new ti(null);return g.getNode().forEachChild(mI,(d,C)=>{u=u.set(new Dr(d),C)}),r2(e,t,n,u,i,o,l,a)}else return t}else{let u=new ti(null);return r.foreach((d,C)=>{const f=$i(n,d);g.isCompleteForPath(f)&&(u=u.set(d,g.getNode().getChild(f)))}),r2(e,t,n,u,i,o,l,a)}}function uT(e,t,n,r,i){const o=t.serverCache,a=vN(t,o.getNode(),o.isFullyInitialized()||qn(n),o.isFiltered());return WN(e,a,n,r,wN,i)}function dT(e,t,n,r,i,o){let a;if(KA(r,n)!=null)return t;{const l=new iZ(r,t,i),g=t.eventCache.getNode();let u;if(qn(n)||$n(n)===".priority"){let d;if(t.serverCache.isFullyInitialized())d=FA(r,td(t));else{const C=t.serverCache.getNode();xt(C instanceof wn,"serverChildren would be complete if leaf node"),d=nZ(r,C)}d=d,u=e.filter.updateFullNode(g,d,o)}else{const d=$n(n);let C=rZ(r,d,t.serverCache);C==null&&t.serverCache.isCompleteForChild(d)&&(C=g.getImmediateChild(d)),C!=null?u=e.filter.updateChild(g,d,C,_r(n),l,o):t.eventCache.getNode().hasChild(d)?u=e.filter.updateChild(g,d,wn.EMPTY_NODE,_r(n),l,o):u=g,u.isEmpty()&&t.serverCache.isFullyInitialized()&&(a=FA(r,td(t)),a.isLeafNode()&&(u=e.filter.updateFullNode(u,a,o)))}return a=t.serverCache.isFullyInitialized()||KA(r,Gr())!=null,ff(t,u,a,e.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(t,n){this.query_=t,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new QS(r.getIndex()),o=N4(r);this.processor_=oT(o);const a=n.serverCache,l=n.eventCache,g=i.updateFullNode(wn.EMPTY_NODE,a.getNode(),null),u=o.updateFullNode(wn.EMPTY_NODE,l.getNode(),null),d=new ed(g,a.isFullyInitialized(),i.filtersNodes()),C=new ed(u,l.isFullyInitialized(),o.filtersNodes());this.viewCache_=Dp(C,d),this.eventGenerator_=new F4(this.query_)}get query(){return this.query_}}function CT(e){return e.viewCache_.serverCache.getNode()}function fT(e,t){const n=td(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!qn(t)&&!n.getImmediateChild($n(t)).isEmpty())?n.getChild(t):null}function n5(e){return e.eventRegistrations_.length===0}function mT(e,t){e.eventRegistrations_.push(t)}function r5(e,t,n){const r=[];if(n){xt(t==null,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach(o=>{const a=o.createCancelEvent(n,i);a&&r.push(a)})}if(t){let i=[];for(let o=0;o<e.eventRegistrations_.length;++o){const a=e.eventRegistrations_[o];if(!a.matches(t))i.push(a);else if(t.hasAnyCallback()){i=i.concat(e.eventRegistrations_.slice(o+1));break}}e.eventRegistrations_=i}else e.eventRegistrations_=[];return r}function i5(e,t,n,r){t.type===$l.MERGE&&t.source.queryId!==null&&(xt(td(e.viewCache_),"We should always have a full cache before handling merges"),xt(qv(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,o=lT(e.processor_,i,t,n,r);return aT(e.processor_,o.viewCache),xt(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,VN(e,o.changes,o.viewCache.eventCache.getNode(),null)}function hT(e,t){const n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Zi,(o,a)=>{r.push(NI(o,a))}),n.isFullyInitialized()&&r.push(pN(n.getNode())),VN(e,r,n.getNode(),t)}function VN(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return K4(e.eventGenerator_,t,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let MA;class AT{constructor(){this.views=new Map}}function pT(e){xt(!MA,"__referenceConstructor has already been defined"),MA=e}function bT(){return xt(MA,"Reference.ts has not been loaded"),MA}function yT(e){return e.views.size===0}function oZ(e,t,n,r){const i=t.source.queryId;if(i!==null){const o=e.views.get(i);return xt(o!=null,"SyncTree gave us an op for an invalid query."),i5(o,t,n,r)}else{let o=[];for(const a of e.views.values())o=o.concat(i5(a,t,n,r));return o}}function vT(e,t,n,r,i){const o=t._queryIdentifier,a=e.views.get(o);if(!a){let l=FA(n,i?r:null),g=!1;l?g=!0:r instanceof wn?(l=nZ(n,r),g=!1):(l=wn.EMPTY_NODE,g=!1);const u=Dp(new ed(l,g,!1),new ed(r,i,!1));return new IT(t,u)}return a}function ST(e,t,n,r,i,o){const a=vT(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,a),mT(a,n),hT(a,n)}function ZT(e,t,n,r){const i=t._queryIdentifier,o=[];let a=[];const l=Oc(e);if(i==="default")for(const[g,u]of e.views.entries())a=a.concat(r5(u,n,r)),n5(u)&&(e.views.delete(g),u.query._queryParams.loadsAllData()||o.push(u.query));else{const g=e.views.get(i);g&&(a=a.concat(r5(g,n,r)),n5(g)&&(e.views.delete(i),g.query._queryParams.loadsAllData()||o.push(g.query)))}return l&&!Oc(e)&&o.push(new(bT())(t._repo,t._path)),{removed:o,events:a}}function kN(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function hI(e,t){let n=null;for(const r of e.views.values())n=n||fT(r,t);return n}function NN(e,t){if(t._queryParams.loadsAllData())return Pp(e);{const r=t._queryIdentifier;return e.views.get(r)}}function XN(e,t){return NN(e,t)!=null}function Oc(e){return Pp(e)!=null}function Pp(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TA;function GT(e){xt(!TA,"__referenceConstructor has already been defined"),TA=e}function BT(){return xt(TA,"Reference.ts has not been loaded"),TA}let RT=1;class o5{constructor(t){this.listenProvider_=t,this.syncPointTree_=new ti(null),this.pendingWriteTree_=tT(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function wT(e,t,n,r,i){return z4(e.pendingWriteTree_,t,n,r,i),i?hm(e,new qu(yN(),t,n)):[]}function aI(e,t,n=!1){const r=D4(e.pendingWriteTree_,t);if(P4(e.pendingWriteTree_,t)){let o=new ti(null);return r.snap!=null?o=o.set(Gr(),!0):ka(r.children,a=>{o=o.set(new Dr(a),!0)}),hm(e,new EA(r.path,o,n))}else return[]}function Op(e,t,n){return hm(e,new qu(qS(),t,n))}function WT(e,t,n){const r=ti.fromObject(n);return hm(e,new Jf(qS(),t,r))}function VT(e,t){return hm(e,new Xf(qS(),t))}function kT(e,t,n){const r=aZ(e,n);if(r){const i=lZ(r),o=i.path,a=i.queryId,l=Wa(o,t),g=new Xf(eZ(a),l);return sZ(e,o,g)}else return[]}function i2(e,t,n,r,i=!1){const o=t._path,a=e.syncPointTree_.get(o);let l=[];if(a&&(t._queryIdentifier==="default"||XN(a,t))){const g=ZT(a,t,n,r);yT(a)&&(e.syncPointTree_=e.syncPointTree_.remove(o));const u=g.removed;if(l=g.events,!i){const d=u.findIndex(f=>f._queryParams.loadsAllData())!==-1,C=e.syncPointTree_.findOnPath(o,(f,m)=>Oc(m));if(d&&!C){const f=e.syncPointTree_.subtree(o);if(!f.isEmpty()){const m=JT(f);for(let b=0;b<m.length;++b){const p=m[b],y=p.query,S=YN(e,p);e.listenProvider_.startListening(hf(y),zA(e,y),S.hashFn,S.onComplete)}}}!C&&u.length>0&&!r&&(d?e.listenProvider_.stopListening(hf(t),null):u.forEach(f=>{const m=e.queryToTagMap.get(_p(f));e.listenProvider_.stopListening(hf(f),m)}))}xT(e,u)}return l}function NT(e,t,n,r){const i=aZ(e,r);if(i!=null){const o=lZ(i),a=o.path,l=o.queryId,g=Wa(a,t),u=new qu(eZ(l),g,n);return sZ(e,a,u)}else return[]}function XT(e,t,n,r){const i=aZ(e,r);if(i){const o=lZ(i),a=o.path,l=o.queryId,g=Wa(a,t),u=ti.fromObject(n),d=new Jf(eZ(l),g,u);return sZ(e,a,d)}else return[]}function a5(e,t,n,r=!1){const i=t._path;let o=null,a=!1;e.syncPointTree_.foreachOnPath(i,(f,m)=>{const b=Wa(f,i);o=o||hI(m,b),a=a||Oc(m)});let l=e.syncPointTree_.get(i);l?(a=a||Oc(l),o=o||hI(l,Gr())):(l=new AT,e.syncPointTree_=e.syncPointTree_.set(i,l));let g;o!=null?g=!0:(g=!1,o=wn.EMPTY_NODE,e.syncPointTree_.subtree(i).foreachChild((m,b)=>{const p=hI(b,Gr());p&&(o=o.updateImmediateChild(m,p))}));const u=XN(l,t);if(!u&&!t._queryParams.loadsAllData()){const f=_p(t);xt(!e.queryToTagMap.has(f),"View does not exist, but we have a tag");const m=HT();e.queryToTagMap.set(f,m),e.tagToQueryMap.set(m,f)}const d=tZ(e.pendingWriteTree_,i);let C=ST(l,t,n,d,o,g);if(!u&&!a&&!r){const f=NN(l,t);C=C.concat(YT(e,t,f))}return C}function JN(e,t,n){const i=e.pendingWriteTree_,o=e.syncPointTree_.findOnPath(t,(a,l)=>{const g=Wa(a,t),u=hI(l,g);if(u)return u});return GN(i,t,o,n,!0)}function hm(e,t){return xN(t,e.syncPointTree_,null,tZ(e.pendingWriteTree_,Gr()))}function xN(e,t,n,r){if(qn(e.path))return HN(e,t,n,r);{const i=t.get(Gr());n==null&&i!=null&&(n=hI(i,Gr()));let o=[];const a=$n(e.path),l=e.operationForChild(a),g=t.children.get(a);if(g&&l){const u=n?n.getImmediateChild(a):null,d=BN(r,a);o=o.concat(xN(l,g,u,d))}return i&&(o=o.concat(oZ(i,e,r,n))),o}}function HN(e,t,n,r){const i=t.get(Gr());n==null&&i!=null&&(n=hI(i,Gr()));let o=[];return t.children.inorderTraversal((a,l)=>{const g=n?n.getImmediateChild(a):null,u=BN(r,a),d=e.operationForChild(a);d&&(o=o.concat(HN(d,l,g,u)))}),i&&(o=o.concat(oZ(i,e,r,n))),o}function YN(e,t){const n=t.query,r=zA(e,n);return{hashFn:()=>(CT(t)||wn.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?kT(e,n._path,r):VT(e,n._path);{const o=kM(i,n);return i2(e,n,null,o)}}}}function zA(e,t){const n=_p(t);return e.queryToTagMap.get(n)}function _p(e){return e._path.toString()+"$"+e._queryIdentifier}function aZ(e,t){return e.tagToQueryMap.get(t)}function lZ(e){const t=e.indexOf("$");return xt(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Dr(e.substr(0,t))}}function sZ(e,t,n){const r=e.syncPointTree_.get(t);xt(r,"Missing sync point for query tag that we're tracking");const i=tZ(e.pendingWriteTree_,t);return oZ(r,n,i,null)}function JT(e){return e.fold((t,n,r)=>{if(n&&Oc(n))return[Pp(n)];{let i=[];return n&&(i=kN(n)),ka(r,(o,a)=>{i=i.concat(a)}),i}})}function hf(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(BT())(e._repo,e._path):e}function xT(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const i=_p(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}function HT(){return RT++}function YT(e,t,n){const r=t._path,i=zA(e,t),o=YN(e,n),a=e.listenProvider_.startListening(hf(t),i,o.hashFn,o.onComplete),l=e.syncPointTree_.subtree(r);if(i)xt(!Oc(l.value),"If we're adding a query, it shouldn't be shadowed");else{const g=l.fold((u,d,C)=>{if(!qn(u)&&d&&Oc(d))return[Pp(d).query];{let f=[];return d&&(f=f.concat(kN(d).map(m=>m.query))),ka(C,(m,b)=>{f=f.concat(b)}),f}});for(let u=0;u<g.length;++u){const d=g[u];e.listenProvider_.stopListening(hf(d),zA(e,d))}}return a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gZ{constructor(t){this.node_=t}getImmediateChild(t){const n=this.node_.getImmediateChild(t);return new gZ(n)}node(){return this.node_}}class cZ{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){const n=$i(this.path_,t);return new cZ(this.syncTree_,n)}node(){return JN(this.syncTree_,this.path_)}}const ET=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},l5=function(e,t,n){if(!e||typeof e!="object")return e;if(xt(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return FT(e[".sv"],t,n);if(typeof e[".sv"]=="object")return KT(e[".sv"],t);xt(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},FT=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:xt(!1,"Unexpected server value: "+e)}},KT=function(e,t,n){e.hasOwnProperty("increment")||xt(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;typeof r!="number"&&xt(!1,"Unexpected increment value: "+r);const i=t.node();if(xt(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const a=i.getValue();return typeof a!="number"?r:a+r},LT=function(e,t,n,r){return uZ(t,new cZ(n,e),r)},MT=function(e,t,n){return uZ(e,new gZ(t),n)};function uZ(e,t,n){const r=e.getPriority().val(),i=l5(r,t.getImmediateChild(".priority"),n);let o;if(e.isLeafNode()){const a=e,l=l5(a.getValue(),t,n);return l!==a.getValue()||i!==a.getPriority().val()?new Io(l,Uo(i)):e}else{const a=e;return o=a,i!==a.getPriority().val()&&(o=o.updatePriority(new Io(i))),a.forEachChild(Zi,(l,g)=>{const u=uZ(g,t.getImmediateChild(l),n);u!==g&&(o=o.updateImmediateChild(l,u))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dZ{constructor(t="",n=null,r={children:{},childCount:0}){this.name=t,this.parent=n,this.node=r}}function IZ(e,t){let n=t instanceof Dr?t:new Dr(t),r=e,i=$n(n);for(;i!==null;){const o=wI(r.node.children,i)||{children:{},childCount:0};r=new dZ(i,r,o),n=_r(n),i=$n(n)}return r}function rC(e){return e.node.value}function EN(e,t){e.node.value=t,o2(e)}function FN(e){return e.node.childCount>0}function TT(e){return rC(e)===void 0&&!FN(e)}function Up(e,t){ka(e.node.children,(n,r)=>{t(new dZ(n,e,r))})}function KN(e,t,n,r){n&&t(e),Up(e,i=>{KN(i,t,!0)})}function zT(e,t,n){let r=e.parent;for(;r!==null;){if(t(r))return!0;r=r.parent}return!1}function Am(e){return new Dr(e.parent===null?e.name:Am(e.parent)+"/"+e.name)}function o2(e){e.parent!==null&&DT(e.parent,e.name,e)}function DT(e,t,n){const r=TT(n),i=Yg(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,o2(e)):!r&&!i&&(e.node.children[t]=n.node,e.node.childCount++,o2(e))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT=/[\[\].#$\/\u0000-\u001F\u007F]/,OT=/[\[\].#$\u0000-\u001F\u007F]/,gy=10*1024*1024,LN=function(e){return typeof e=="string"&&e.length!==0&&!PT.test(e)},MN=function(e){return typeof e=="string"&&e.length!==0&&!OT.test(e)},_T=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),MN(e)},TN=function(e,t,n){const r=n instanceof Dr?new c4(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+Eu(r));if(typeof t=="function")throw new Error(e+"contains a function "+Eu(r)+" with contents = "+t.toString());if(Tk(t))throw new Error(e+"contains "+t.toString()+" "+Eu(r));if(typeof t=="string"&&t.length>gy/3&&Kp(t)>gy)throw new Error(e+"contains a string greater than "+gy+" utf8 bytes "+Eu(r)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let i=!1,o=!1;if(ka(t,(a,l)=>{if(a===".value")i=!0;else if(a!==".priority"&&a!==".sv"&&(o=!0,!LN(a)))throw new Error(e+" contains an invalid key ("+a+") "+Eu(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);u4(r,a),TN(e,l,r),d4(r)}),i&&o)throw new Error(e+' contains ".value" child '+Eu(r)+" in addition to actual children.")}},zN=function(e,t,n,r){if(!MN(n))throw new Error($V(e,t)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},UT=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),zN(e,t,n)},jT=function(e,t){const n=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!LN(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!_T(n))throw new Error($V(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function DN(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],o=i.getPath();n!==null&&!_S(o,n.path)&&(e.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function PN(e,t,n){DN(e,n),ON(e,r=>_S(r,t))}function gd(e,t,n){DN(e,n),ON(e,r=>Ql(r,t)||Ql(t,r))}function ON(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){const o=i.path;t(o)?($T(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function $T(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(n!==null){e.events[t]=null;const r=n.getEventRunner();If&&_o("event: "+n.toString()),fm(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT="repo_interrupt",ez=25;class tz{constructor(t,n,r,i){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new QT,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=YA(),this.transactionQueueTree_=new dZ,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function nz(e,t,n){if(e.stats_=PS(e.repoInfo_),e.forceRestClient_||xM())e.server_=new HA(e.repoInfo_,(r,i,o,a)=>{s5(e,r,i,o,a)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>g5(e,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{mo(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Wg(e.repoInfo_,t,(r,i,o,a)=>{s5(e,r,i,o,a)},r=>{g5(e,r)},r=>{iz(e,r)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(r=>{e.server_.refreshAuthToken(r)}),e.appCheckProvider_.addTokenChangeListener(r=>{e.server_.refreshAppCheckToken(r.token)}),e.statsReporter_=KM(e.repoInfo_,()=>new E4(e.stats_,e.server_)),e.infoData_=new X4,e.infoSyncTree_=new o5({startListening:(r,i,o,a)=>{let l=[];const g=e.infoData_.getNode(r._path);return g.isEmpty()||(l=Op(e.infoSyncTree_,r._path,g),setTimeout(()=>{a("ok")},0)),l},stopListening:()=>{}}),CZ(e,"connected",!1),e.serverSyncTree_=new o5({startListening:(r,i,o,a)=>(e.server_.listen(r,o,i,(l,g)=>{const u=a(l,g);gd(e.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{e.server_.unlisten(r,i)}})}function rz(e){const n=e.infoData_.getNode(new Dr(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function _N(e){return ET({timestamp:rz(e)})}function s5(e,t,n,r,i){e.dataUpdateCount++;const o=new Dr(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let a=[];if(i)if(r){const g=GA(n,u=>Uo(u));a=XT(e.serverSyncTree_,o,g,i)}else{const g=Uo(n);a=NT(e.serverSyncTree_,o,g,i)}else if(r){const g=GA(n,u=>Uo(u));a=WT(e.serverSyncTree_,o,g)}else{const g=Uo(n);a=Op(e.serverSyncTree_,o,g)}let l=o;a.length>0&&(l=mZ(e,o)),gd(e.eventQueue_,l,a)}function g5(e,t){CZ(e,"connected",t),t===!1&&az(e)}function iz(e,t){ka(t,(n,r)=>{CZ(e,n,r)})}function CZ(e,t,n){const r=new Dr("/.info/"+t),i=Uo(n);e.infoData_.updateSnapshot(r,i);const o=Op(e.infoSyncTree_,r,i);gd(e.eventQueue_,r,o)}function oz(e){return e.nextWriteId_++}function az(e){UN(e,"onDisconnectEvents");const t=_N(e),n=YA();$v(e.onDisconnect_,Gr(),(i,o)=>{const a=LT(i,o,e.serverSyncTree_,t);bN(n,i,a)});let r=[];$v(n,Gr(),(i,o)=>{r=r.concat(Op(e.serverSyncTree_,i,o));const a=dz(e,i);mZ(e,a)}),e.onDisconnect_=YA(),gd(e.eventQueue_,Gr(),r)}function lz(e,t,n){let r;$n(t._path)===".info"?r=a5(e.infoSyncTree_,t,n):r=a5(e.serverSyncTree_,t,n),PN(e.eventQueue_,t._path,r)}function sz(e,t,n){let r;$n(t._path)===".info"?r=i2(e.infoSyncTree_,t,n):r=i2(e.serverSyncTree_,t,n),PN(e.eventQueue_,t._path,r)}function gz(e){e.persistentConnection_&&e.persistentConnection_.interrupt(qT)}function UN(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),_o(n,...t)}function jN(e,t,n){return JN(e.serverSyncTree_,t,n)||wn.EMPTY_NODE}function fZ(e,t=e.transactionQueueTree_){if(t||jp(e,t),rC(t)){const n=$N(e,t);xt(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&cz(e,Am(t),n)}else FN(t)&&Up(t,n=>{fZ(e,n)})}function cz(e,t,n){const r=n.map(u=>u.currentWriteId),i=jN(e,t,r);let o=i;const a=i.hash();for(let u=0;u<n.length;u++){const d=n[u];xt(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const C=Wa(t,d.path);o=o.updateChild(C,d.currentOutputSnapshotRaw)}const l=o.val(!0),g=t;e.server_.put(g.toString(),l,u=>{UN(e,"transaction put response",{path:g.toString(),status:u});let d=[];if(u==="ok"){const C=[];for(let f=0;f<n.length;f++)n[f].status=2,d=d.concat(aI(e.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&C.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();jp(e,IZ(e.transactionQueueTree_,t)),fZ(e,e.transactionQueueTree_),gd(e.eventQueue_,t,d);for(let f=0;f<C.length;f++)fm(C[f])}else{if(u==="datastale")for(let C=0;C<n.length;C++)n[C].status===3?n[C].status=4:n[C].status=0;else{Qa("transaction at "+g.toString()+" failed: "+u);for(let C=0;C<n.length;C++)n[C].status=4,n[C].abortReason=u}mZ(e,t)}},a)}function mZ(e,t){const n=QN(e,t),r=Am(n),i=$N(e,n);return uz(e,i,r),r}function uz(e,t,n){if(t.length===0)return;const r=[];let i=[];const a=t.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<t.length;l++){const g=t[l],u=Wa(n,g.path);let d=!1,C;if(xt(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),g.status===4)d=!0,C=g.abortReason,i=i.concat(aI(e.serverSyncTree_,g.currentWriteId,!0));else if(g.status===0)if(g.retryCount>=ez)d=!0,C="maxretry",i=i.concat(aI(e.serverSyncTree_,g.currentWriteId,!0));else{const f=jN(e,g.path,a);g.currentInputSnapshot=f;const m=t[l].update(f.val());if(m!==void 0){TN("transaction failed: Data returned ",m,g.path);let b=Uo(m);typeof m=="object"&&m!=null&&Yg(m,".priority")||(b=b.updatePriority(f.getPriority()));const y=g.currentWriteId,S=_N(e),v=MT(b,f,S);g.currentOutputSnapshotRaw=b,g.currentOutputSnapshotResolved=v,g.currentWriteId=oz(e),a.splice(a.indexOf(y),1),i=i.concat(wT(e.serverSyncTree_,g.path,v,g.currentWriteId,g.applyLocally)),i=i.concat(aI(e.serverSyncTree_,y,!0))}else d=!0,C="nodata",i=i.concat(aI(e.serverSyncTree_,g.currentWriteId,!0))}gd(e.eventQueue_,n,i),i=[],d&&(t[l].status=2,function(f){setTimeout(f,Math.floor(0))}(t[l].unwatcher),t[l].onComplete&&(C==="nodata"?r.push(()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot)):r.push(()=>t[l].onComplete(new Error(C),!1,null))))}jp(e,e.transactionQueueTree_);for(let l=0;l<r.length;l++)fm(r[l]);fZ(e,e.transactionQueueTree_)}function QN(e,t){let n,r=e.transactionQueueTree_;for(n=$n(t);n!==null&&rC(r)===void 0;)r=IZ(r,n),t=_r(t),n=$n(t);return r}function $N(e,t){const n=[];return qN(e,t,n),n.sort((r,i)=>r.order-i.order),n}function qN(e,t,n){const r=rC(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Up(t,i=>{qN(e,i,n)})}function jp(e,t){const n=rC(t);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,EN(t,n.length>0?n:void 0)}Up(t,r=>{jp(e,r)})}function dz(e,t){const n=Am(QN(e,t)),r=IZ(e.transactionQueueTree_,t);return zT(r,i=>{cy(e,i)}),cy(e,r),KN(r,i=>{cy(e,i)}),n}function cy(e,t){const n=rC(t);if(n){const r=[];let i=[],o=-1;for(let a=0;a<n.length;a++)n[a].status===3||(n[a].status===1?(xt(o===a-1,"All SENT items should be at beginning of queue."),o=a,n[a].status=3,n[a].abortReason="set"):(xt(n[a].status===0,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(aI(e.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));o===-1?EN(t,void 0):n.length=o+1,gd(e.eventQueue_,Am(t),i);for(let a=0;a<r.length;a++)fm(r[a])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iz(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}function Cz(e){const t={};e.charAt(0)==="?"&&(e=e.substring(1));for(const n of e.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Qa(`Invalid query segment '${n}' in query '${e}'`)}return t}const c5=function(e,t){const n=fz(e),r=n.namespace;n.domain==="firebase.com"&&Xg(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Xg("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||BM();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new tN(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Dr(n.pathString)}},fz=function(e){let t="",n="",r="",i="",o="",a=!0,l="https",g=443;if(typeof e=="string"){let u=e.indexOf("//");u>=0&&(l=e.substring(0,u-1),e=e.substring(u+2));let d=e.indexOf("/");d===-1&&(d=e.length);let C=e.indexOf("?");C===-1&&(C=e.length),t=e.substring(0,Math.min(d,C)),d<C&&(i=Iz(e.substring(d,C)));const f=Cz(e.substring(Math.min(e.length,C)));u=t.indexOf(":"),u>=0?(a=l==="https"||l==="wss",g=parseInt(t.substring(u+1),10)):u=t.length;const m=t.slice(0,u);if(m.toLowerCase()==="localhost")n="localhost";else if(m.split(".").length<=2)n=m;else{const b=t.indexOf(".");r=t.substring(0,b).toLowerCase(),n=t.substring(b+1),o=r}"ns"in f&&(o=f.ns)}return{host:t,port:g,domain:n,subdomain:r,secure:a,scheme:l,pathString:i,namespace:o}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eX{constructor(t,n,r,i){this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+mo(this.snapshot.exportVal())}}class tX{constructor(t,n,r){this.eventRegistration=t,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mz{constructor(t,n){this.snapshotCallback=t,this.cancelCallback=n}onValue(t,n){this.snapshotCallback.call(null,t,n)}onCancel(t){return xt(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hZ{constructor(t,n,r,i){this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return qn(this._path)?null:cN(this._path)}get ref(){return new Fg(this._repo,this._path)}get _queryIdentifier(){const t=_B(this._queryParams),n=zS(t);return n==="{}"?"default":n}get _queryObject(){return _B(this._queryParams)}isEqual(t){if(t=Xa(t),!(t instanceof hZ))return!1;const n=this._repo===t._repo,r=_S(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+g4(this._path)}}class Fg extends hZ{constructor(t,n){super(t,n,new $S,!1)}get parent(){const t=dN(this._path);return t===null?null:new Fg(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class xf{constructor(t,n,r){this._node=t,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const n=new Dr(t),r=DA(this.ref,t);return new xf(this._node.getChild(n),r,Zi)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>t(new xf(i,DA(this.ref,r),Zi)))}hasChild(t){const n=new Dr(t);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function uy(e,t){return e=Xa(e),e._checkNotDeleted("ref"),t!==void 0?DA(e._root,t):e._root}function DA(e,t){return e=Xa(e),$n(e._path)===null?UT("child","path",t):zN("child","path",t),new Fg(e._repo,$i(e._path,t))}class AZ{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,n){const r=n._queryParams.getIndex();return new eX("value",this,new xf(t.snapshotNode,new Fg(n._repo,n._path),r))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new tX(this,t,n):null}matches(t){return t instanceof AZ?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class pZ{constructor(t,n){this.eventType=t,this.callbackContext=n}respondsTo(t){let n=t==="children_added"?"child_added":t;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new tX(this,t,n):null}createEvent(t,n){xt(t.childName!=null,"Child events should have a childName.");const r=DA(new Fg(n._repo,n._path),t.childName),i=n._queryParams.getIndex();return new eX(t.type,this,new xf(t.snapshotNode,r,i),t.prevName)}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof pZ?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function nX(e,t,n,r,i){const o=new mz(n,void 0),a=t==="value"?new AZ(o):new pZ(t,o);return lz(e._repo,e,a),()=>sz(e._repo,e,a)}function dy(e,t,n,r){return nX(e,"child_added",t)}function Iy(e,t,n,r){return nX(e,"child_removed",t)}pT(Fg);GT(Fg);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hz="FIREBASE_DATABASE_EMULATOR_HOST",a2={};let Az=!1;function pz(e,t,n,r){e.repoInfo_=new tN(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}function bz(e,t,n,r,i){let o=r||e.options.databaseURL;o===void 0&&(e.options.projectId||Xg("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_o("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let a=c5(o,i),l=a.repoInfo,g;typeof process<"u"&&VB&&(g=VB[hz]),g?(o=`http://${g}?ns=${l.namespace}`,a=c5(o,i),l=a.repoInfo):a.repoInfo.secure;const u=new YM(e.name,e.options,t);jT("Invalid Firebase Database URL",a),qn(a.path)||Xg("Database URL must point to the root of a Firebase Database (not including a child path).");const d=vz(l,e,u,new HM(e.name,n));return new Sz(d,e)}function yz(e,t){const n=a2[t];(!n||n[e.key]!==e)&&Xg(`Database ${t}(${e.repoInfo_}) has already been deleted.`),gz(e),delete n[e.key]}function vz(e,t,n,r){let i=a2[t.name];i||(i={},a2[t.name]=i);let o=i[e.toURLString()];return o&&Xg("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new tz(e,Az,n,r),i[e.toURLString()]=o,o}class Sz{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(nz(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Fg(this._repo,Gr())),this._rootInternal}_delete(){return this._rootInternal!==null&&(yz(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Xg("Cannot call "+t+" on a deleted database.")}}function Zz(e=nk(),t){const n=JS(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const r=kE("database");r&&Gz(n,...r)}return n}function Gz(e,t,n,r={}){e=Xa(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&Xg("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Xg('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new qh(qh.OWNER);else if(r.mockUserToken){const a=typeof r.mockUserToken=="string"?r.mockUserToken:NE(r.mockUserToken,e.app.options.projectId);o=new qh(a)}pz(i,t,n,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bz(e){bM(eC),WI(new Uu("database",(t,{instanceIdentifier:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return bz(r,i,o,n)},"PUBLIC").setMultipleInstances(!0)),Mc(kB,NB,e),Mc(kB,NB,"esm2017")}Wg.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};Wg.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};Bz();const Rz={apiKey:"AIzaSyBHGx-RviUAwE8KXnngEZk92vcmiBsyHjM",authDomain:"ridgeant-resources.firebaseapp.com",databaseURL:"https://ridgeant-resources-default-rtdb.firebaseio.com",projectId:"ridgeant-resources",storageBucket:"ridgeant-resources.firebasestorage.app",messagingSenderId:"1013704848288",appId:"1:1013704848288:web:317401a52d78766b08eac5",measurementId:"G-5YFGBX61RV"},rX=tk(Rz),pm=AM(rX),Cy=Zz(rX);var fy={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var u5;function iX(){return u5||(u5=1,function(e){(function(){var t={}.hasOwnProperty;function n(){for(var o="",a=0;a<arguments.length;a++){var l=arguments[a];l&&(o=i(o,r(l)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var a="";for(var l in o)t.call(o,l)&&o[l]&&(a=i(a,l));return a}function i(o,a){return a?o?o+" "+a:o+a:o}e.exports?(n.default=n,e.exports=n):window.classNames=n})()}(fy)),fy.exports}var wz=iX();const Re=om(wz);function lt(){return lt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lt.apply(null,arguments)}function wt(e){"@babel/helpers - typeof";return wt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wt(e)}var Wz=Symbol.for("react.element"),Vz=Symbol.for("react.transitional.element"),kz=Symbol.for("react.fragment");function oX(e){return e&&wt(e)==="object"&&(e.$$typeof===Wz||e.$$typeof===Vz)&&e.type===kz}function el(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[];return Ge.Children.forEach(e,function(r){r==null&&!t.keepEmpty||(Array.isArray(r)?n=n.concat(el(r)):oX(r)&&r.props?n=n.concat(el(r.props.children,t)):n.push(r))}),n}var l2={},Nz=function(t){};function Xz(e,t){}function Jz(e,t){}function xz(){l2={}}function aX(e,t,n){!t&&!l2[n]&&(e(!1,n),l2[n]=!0)}function wo(e,t){aX(Xz,e,t)}function Hz(e,t){aX(Jz,e,t)}wo.preMessage=Nz;wo.resetWarned=xz;wo.noteOnce=Hz;function Yz(e,t){if(wt(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(wt(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lX(e){var t=Yz(e,"string");return wt(t)=="symbol"?t:t+""}function fe(e,t,n){return(t=lX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?d5(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Hf(e){return e instanceof HTMLElement||e instanceof SVGElement}function Ez(e){return e&&wt(e)==="object"&&Hf(e.nativeElement)?e.nativeElement:Hf(e)?e:null}function Af(e){var t=Ez(e);if(t)return t;if(e instanceof Ge.Component){var n;return(n=Ev.findDOMNode)===null||n===void 0?void 0:n.call(Ev,e)}return null}var my={exports:{}},Vr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I5;function Fz(){if(I5)return Vr;I5=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),l=Symbol.for("react.server_context"),g=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen"),b;b=Symbol.for("react.module.reference");function p(y){if(typeof y=="object"&&y!==null){var S=y.$$typeof;switch(S){case e:switch(y=y.type,y){case n:case i:case r:case u:case d:return y;default:switch(y=y&&y.$$typeof,y){case l:case a:case g:case f:case C:case o:return y;default:return S}}case t:return S}}}return Vr.ContextConsumer=a,Vr.ContextProvider=o,Vr.Element=e,Vr.ForwardRef=g,Vr.Fragment=n,Vr.Lazy=f,Vr.Memo=C,Vr.Portal=t,Vr.Profiler=i,Vr.StrictMode=r,Vr.Suspense=u,Vr.SuspenseList=d,Vr.isAsyncMode=function(){return!1},Vr.isConcurrentMode=function(){return!1},Vr.isContextConsumer=function(y){return p(y)===a},Vr.isContextProvider=function(y){return p(y)===o},Vr.isElement=function(y){return typeof y=="object"&&y!==null&&y.$$typeof===e},Vr.isForwardRef=function(y){return p(y)===g},Vr.isFragment=function(y){return p(y)===n},Vr.isLazy=function(y){return p(y)===f},Vr.isMemo=function(y){return p(y)===C},Vr.isPortal=function(y){return p(y)===t},Vr.isProfiler=function(y){return p(y)===i},Vr.isStrictMode=function(y){return p(y)===r},Vr.isSuspense=function(y){return p(y)===u},Vr.isSuspenseList=function(y){return p(y)===d},Vr.isValidElementType=function(y){return typeof y=="string"||typeof y=="function"||y===n||y===i||y===r||y===u||y===d||y===m||typeof y=="object"&&y!==null&&(y.$$typeof===f||y.$$typeof===C||y.$$typeof===o||y.$$typeof===a||y.$$typeof===g||y.$$typeof===b||y.getModuleId!==void 0)},Vr.typeOf=p,Vr}var C5;function Kz(){return C5||(C5=1,my.exports=Fz()),my.exports}var hy=Kz();function bm(e,t,n){var r=I.useRef({});return(!("value"in r.current)||n(r.current.condition,t))&&(r.current.value=e(),r.current.condition=t),r.current.value}var bZ=function(t,n){typeof t=="function"?t(n):wt(t)==="object"&&t&&"current"in t&&(t.current=n)},vl=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter(Boolean);return i.length<=1?i[0]:function(o){n.forEach(function(a){bZ(a,o)})}},Ps=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return bm(function(){return vl.apply(void 0,n)},n,function(i,o){return i.length!==o.length||i.every(function(a,l){return a!==o[l]})})},au=function(t){var n,r;if(!t)return!1;if(yZ(t)&&t.props.propertyIsEnumerable("ref"))return!0;var i=hy.isMemo(t)?t.type.type:t.type;return!(typeof i=="function"&&!((n=i.prototype)!==null&&n!==void 0&&n.render)&&i.$$typeof!==hy.ForwardRef||typeof t=="function"&&!((r=t.prototype)!==null&&r!==void 0&&r.render)&&t.$$typeof!==hy.ForwardRef)};function yZ(e){return I.isValidElement(e)&&!oX(e)}var Lz=function(t){return yZ(t)&&au(t)},cd=function(t){if(t&&yZ(t)){var n=t;return n.props.propertyIsEnumerable("ref")?n.props.ref:n.ref}return null},s2=I.createContext(null);function Mz(e){var t=e.children,n=e.onBatchResize,r=I.useRef(0),i=I.useRef([]),o=I.useContext(s2),a=I.useCallback(function(l,g,u){r.current+=1;var d=r.current;i.current.push({size:l,element:g,data:u}),Promise.resolve().then(function(){d===r.current&&(n==null||n(i.current),i.current=[])}),o==null||o(l,g,u)},[n,o]);return I.createElement(s2.Provider,{value:a},t)}var sX=function(){if(typeof Map<"u")return Map;function e(t,n){var r=-1;return t.some(function(i,o){return i[0]===n?(r=o,!0):!1}),r}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(n){var r=e(this.__entries__,n),i=this.__entries__[r];return i&&i[1]},t.prototype.set=function(n,r){var i=e(this.__entries__,n);~i?this.__entries__[i][1]=r:this.__entries__.push([n,r])},t.prototype.delete=function(n){var r=this.__entries__,i=e(r,n);~i&&r.splice(i,1)},t.prototype.has=function(n){return!!~e(this.__entries__,n)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(n,r){r===void 0&&(r=null);for(var i=0,o=this.__entries__;i<o.length;i++){var a=o[i];n.call(r,a[1],a[0])}},t}()}(),g2=typeof window<"u"&&typeof document<"u"&&window.document===document,PA=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),Tz=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(PA):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),zz=2;function Dz(e,t){var n=!1,r=!1,i=0;function o(){n&&(n=!1,e()),r&&l()}function a(){Tz(o)}function l(){var g=Date.now();if(n){if(g-i<zz)return;r=!0}else n=!0,r=!1,setTimeout(a,t);i=g}return l}var Pz=20,Oz=["top","right","bottom","left","width","height","size","weight"],_z=typeof MutationObserver<"u",Uz=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Dz(this.refresh.bind(this),Pz)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var n=this.observers_,r=n.indexOf(t);~r&&n.splice(r,1),!n.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return t.forEach(function(n){return n.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!g2||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),_z?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!g2||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var n=t.propertyName,r=n===void 0?"":n,i=Oz.some(function(o){return!!~r.indexOf(o)});i&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),gX=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},JI=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||PA},cX=Qp(0,0,0,0);function OA(e){return parseFloat(e)||0}function f5(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(r,i){var o=e["border-"+i+"-width"];return r+OA(o)},0)}function jz(e){for(var t=["top","right","bottom","left"],n={},r=0,i=t;r<i.length;r++){var o=i[r],a=e["padding-"+o];n[o]=OA(a)}return n}function Qz(e){var t=e.getBBox();return Qp(0,0,t.width,t.height)}function $z(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return cX;var r=JI(e).getComputedStyle(e),i=jz(r),o=i.left+i.right,a=i.top+i.bottom,l=OA(r.width),g=OA(r.height);if(r.boxSizing==="border-box"&&(Math.round(l+o)!==t&&(l-=f5(r,"left","right")+o),Math.round(g+a)!==n&&(g-=f5(r,"top","bottom")+a)),!eD(e)){var u=Math.round(l+o)-t,d=Math.round(g+a)-n;Math.abs(u)!==1&&(l-=u),Math.abs(d)!==1&&(g-=d)}return Qp(i.left,i.top,l,g)}var qz=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof JI(e).SVGGraphicsElement}:function(e){return e instanceof JI(e).SVGElement&&typeof e.getBBox=="function"}}();function eD(e){return e===JI(e).document.documentElement}function tD(e){return g2?qz(e)?Qz(e):$z(e):cX}function nD(e){var t=e.x,n=e.y,r=e.width,i=e.height,o=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,a=Object.create(o.prototype);return gX(a,{x:t,y:n,width:r,height:i,top:n,right:t+r,bottom:i+n,left:t}),a}function Qp(e,t,n,r){return{x:e,y:t,width:n,height:r}}var rD=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Qp(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=tD(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),iD=function(){function e(t,n){var r=nD(n);gX(this,{target:t,contentRect:r})}return e}(),oD=function(){function e(t,n,r){if(this.activeObservations_=[],this.observations_=new sX,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=n,this.callbackCtx_=r}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof JI(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)||(n.set(t,new rD(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof JI(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)&&(n.delete(t),n.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&t.activeObservations_.push(n)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,n=this.activeObservations_.map(function(r){return new iD(r.target,r.broadcastRect())});this.callback_.call(t,n,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),uX=typeof WeakMap<"u"?new WeakMap:new sX,dX=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=Uz.getInstance(),r=new oD(t,n,this);uX.set(this,r)}return e}();["observe","unobserve","disconnect"].forEach(function(e){dX.prototype[e]=function(){var t;return(t=uX.get(this))[e].apply(t,arguments)}});var aD=function(){return typeof PA.ResizeObserver<"u"?PA.ResizeObserver:dX}(),Hc=new Map;function lD(e){e.forEach(function(t){var n,r=t.target;(n=Hc.get(r))===null||n===void 0||n.forEach(function(i){return i(r)})})}var IX=new aD(lD);function sD(e,t){Hc.has(e)||(Hc.set(e,new Set),IX.observe(e)),Hc.get(e).add(t)}function gD(e,t){Hc.has(e)&&(Hc.get(e).delete(t),Hc.get(e).size||(IX.unobserve(e),Hc.delete(e)))}function zi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lX(r.key),r)}}function Di(e,t,n){return t&&m5(e.prototype,t),n&&m5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Yf(e,t){return Yf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Yf(e,t)}function Kg(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yf(e,t)}function Ef(e){return Ef=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ef(e)}function vZ(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vZ=function(){return!!e})()}function On(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cD(e,t){if(t&&(wt(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return On(e)}function Lg(e){var t=vZ();return function(){var n,r=Ef(e);if(t){var i=Ef(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return cD(this,n)}}var uD=function(e){Kg(n,e);var t=Lg(n);function n(){return zi(this,n),t.apply(this,arguments)}return Di(n,[{key:"render",value:function(){return this.props.children}}]),n}(I.Component);function dD(e,t){var n=e.children,r=e.disabled,i=I.useRef(null),o=I.useRef(null),a=I.useContext(s2),l=typeof n=="function",g=l?n(i):n,u=I.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),d=!l&&I.isValidElement(g)&&au(g),C=d?cd(g):null,f=Ps(C,i),m=function(){var S;return Af(i.current)||(i.current&&wt(i.current)==="object"?Af((S=i.current)===null||S===void 0?void 0:S.nativeElement):null)||Af(o.current)};I.useImperativeHandle(t,function(){return m()});var b=I.useRef(e);b.current=e;var p=I.useCallback(function(y){var S=b.current,v=S.onResize,B=S.data,W=y.getBoundingClientRect(),J=W.width,H=W.height,x=y.offsetWidth,E=y.offsetHeight,F=Math.floor(J),w=Math.floor(H);if(u.current.width!==F||u.current.height!==w||u.current.offsetWidth!==x||u.current.offsetHeight!==E){var V={width:F,height:w,offsetWidth:x,offsetHeight:E};u.current=V;var Y=x===Math.round(J)?J:x,M=E===Math.round(H)?H:E,L=he(he({},V),{},{offsetWidth:Y,offsetHeight:M});a==null||a(L,y,B),v&&Promise.resolve().then(function(){v(L,y)})}},[]);return I.useEffect(function(){var y=m();return y&&!r&&sD(y,p),function(){return gD(y,p)}},[i.current,r]),I.createElement(uD,{ref:o},d?I.cloneElement(g,{ref:f}):g)}var ID=I.forwardRef(dD),CD="rc-observer-key";function fD(e,t){var n=e.children,r=typeof n=="function"?[n]:el(n);return r.map(function(i,o){var a=(i==null?void 0:i.key)||"".concat(CD,"-").concat(o);return I.createElement(ID,lt({},e,{key:a,ref:o===0?t:void 0}),i)})}var bl=I.forwardRef(fD);bl.Collection=Mz;function c2(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function mD(e){if(Array.isArray(e))return c2(e)}function CX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function SZ(e,t){if(e){if(typeof e=="string")return c2(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c2(e,t):void 0}}function hD(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gt(e){return mD(e)||CX(e)||SZ(e)||hD()}var fX=function(t){return+setTimeout(t,16)},mX=function(t){return clearTimeout(t)};typeof window<"u"&&"requestAnimationFrame"in window&&(fX=function(t){return window.requestAnimationFrame(t)},mX=function(t){return window.cancelAnimationFrame(t)});var h5=0,ZZ=new Map;function hX(e){ZZ.delete(e)}var Jr=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;h5+=1;var r=h5;function i(o){if(o===0)hX(r),t();else{var a=fX(function(){i(o-1)});ZZ.set(r,a)}}return i(n),r};Jr.cancel=function(e){var t=ZZ.get(e);return hX(e),mX(t)};function AX(e){if(Array.isArray(e))return e}function AD(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,i,o,a,l=[],g=!0,u=!1;try{if(o=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;g=!1}else for(;!(g=(r=o.call(n)).done)&&(l.push(r.value),l.length!==t);g=!0);}catch(d){u=!0,i=d}finally{try{if(!g&&n.return!=null&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return l}}function pX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xe(e,t){return AX(e)||AD(e,t)||SZ(e,t)||pX()}function Ff(e){for(var t=0,n,r=0,i=e.length;i>=4;++r,i-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}function Qo(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function u2(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}var A5="data-rc-order",p5="data-rc-priority",pD="rc-util-key",d2=new Map;function bX(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):pD}function $p(e){if(e.attachTo)return e.attachTo;var t=document.querySelector("head");return t||document.body}function bD(e){return e==="queue"?"prependQueue":e?"prepend":"append"}function GZ(e){return Array.from((d2.get(e)||e).children).filter(function(t){return t.tagName==="STYLE"})}function yX(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Qo())return null;var n=t.csp,r=t.prepend,i=t.priority,o=i===void 0?0:i,a=bD(r),l=a==="prependQueue",g=document.createElement("style");g.setAttribute(A5,a),l&&o&&g.setAttribute(p5,"".concat(o)),n!=null&&n.nonce&&(g.nonce=n==null?void 0:n.nonce),g.innerHTML=e;var u=$p(t),d=u.firstChild;if(r){if(l){var C=(t.styles||GZ(u)).filter(function(f){if(!["prepend","prependQueue"].includes(f.getAttribute(A5)))return!1;var m=Number(f.getAttribute(p5)||0);return o>=m});if(C.length)return u.insertBefore(g,C[C.length-1].nextSibling),g}u.insertBefore(g,d)}else u.appendChild(g);return g}function vX(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=$p(t);return(t.styles||GZ(n)).find(function(r){return r.getAttribute(bX(t))===e})}function Kf(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=vX(e,t);if(n){var r=$p(t);r.removeChild(n)}}function yD(e,t){var n=d2.get(e);if(!n||!u2(document,n)){var r=yX("",t),i=r.parentNode;d2.set(e,i),e.removeChild(r)}}function Vg(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=$p(n),i=GZ(r),o=he(he({},n),{},{styles:i});yD(r,o);var a=vX(t,o);if(a){var l,g;if((l=o.csp)!==null&&l!==void 0&&l.nonce&&a.nonce!==((g=o.csp)===null||g===void 0?void 0:g.nonce)){var u;a.nonce=(u=o.csp)===null||u===void 0?void 0:u.nonce}return a.innerHTML!==e&&(a.innerHTML=e),a}var d=yX(e,o);return d.setAttribute(bX(o),t),d}function vD(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}function Wn(e,t){if(e==null)return{};var n,r,i=vD(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Lf(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=new Set;function i(o,a){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,g=r.has(o);if(wo(!g,"Warning: There may be circular references"),g)return!1;if(o===a)return!0;if(n&&l>1)return!1;r.add(o);var u=l+1;if(Array.isArray(o)){if(!Array.isArray(a)||o.length!==a.length)return!1;for(var d=0;d<o.length;d++)if(!i(o[d],a[d],u))return!1;return!0}if(o&&a&&wt(o)==="object"&&wt(a)==="object"){var C=Object.keys(o);return C.length!==Object.keys(a).length?!1:C.every(function(f){return i(o[f],a[f],u)})}return!1}return i(e,t)}var SD="%";function I2(e){return e.join(SD)}var ZD=function(){function e(t){zi(this,e),fe(this,"instanceId",void 0),fe(this,"cache",new Map),this.instanceId=t}return Di(e,[{key:"get",value:function(n){return this.opGet(I2(n))}},{key:"opGet",value:function(n){return this.cache.get(n)||null}},{key:"update",value:function(n,r){return this.opUpdate(I2(n),r)}},{key:"opUpdate",value:function(n,r){var i=this.cache.get(n),o=r(i);o===null?this.cache.delete(n):this.cache.set(n,o)}}]),e}(),xI="data-token-hash",es="data-css-hash",Yc="__cssinjs_instance__";function GD(){var e=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var t=document.body.querySelectorAll("style[".concat(es,"]"))||[],n=document.head.firstChild;Array.from(t).forEach(function(i){i[Yc]=i[Yc]||e,i[Yc]===e&&document.head.insertBefore(i,n)});var r={};Array.from(document.querySelectorAll("style[".concat(es,"]"))).forEach(function(i){var o=i.getAttribute(es);if(r[o]){if(i[Yc]===e){var a;(a=i.parentNode)===null||a===void 0||a.removeChild(i)}}else r[o]=!0})}return new ZD(e)}var ym=I.createContext({hashPriority:"low",cache:GD(),defaultCache:!0});function BD(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var BZ=function(){function e(){zi(this,e),fe(this,"cache",void 0),fe(this,"keys",void 0),fe(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return Di(e,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(n){var r,i,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a={map:this.cache};return n.forEach(function(l){if(!a)a=void 0;else{var g;a=(g=a)===null||g===void 0||(g=g.map)===null||g===void 0?void 0:g.get(l)}}),(r=a)!==null&&r!==void 0&&r.value&&o&&(a.value[1]=this.cacheCallTimes++),(i=a)===null||i===void 0?void 0:i.value}},{key:"get",value:function(n){var r;return(r=this.internalGet(n,!0))===null||r===void 0?void 0:r[0]}},{key:"has",value:function(n){return!!this.internalGet(n)}},{key:"set",value:function(n,r){var i=this;if(!this.has(n)){if(this.size()+1>e.MAX_CACHE_SIZE+e.MAX_CACHE_OFFSET){var o=this.keys.reduce(function(u,d){var C=xe(u,2),f=C[1];return i.internalGet(d)[1]<f?[d,i.internalGet(d)[1]]:u},[this.keys[0],this.cacheCallTimes]),a=xe(o,1),l=a[0];this.delete(l)}this.keys.push(n)}var g=this.cache;n.forEach(function(u,d){if(d===n.length-1)g.set(u,{value:[r,i.cacheCallTimes++]});else{var C=g.get(u);C?C.map||(C.map=new Map):g.set(u,{map:new Map}),g=g.get(u).map}})}},{key:"deleteByPath",value:function(n,r){var i=n.get(r[0]);if(r.length===1){var o;return i.map?n.set(r[0],{map:i.map}):n.delete(r[0]),(o=i.value)===null||o===void 0?void 0:o[0]}var a=this.deleteByPath(i.map,r.slice(1));return(!i.map||i.map.size===0)&&!i.value&&n.delete(r[0]),a}},{key:"delete",value:function(n){if(this.has(n))return this.keys=this.keys.filter(function(r){return!BD(r,n)}),this.deleteByPath(this.cache,n)}}]),e}();fe(BZ,"MAX_CACHE_SIZE",20);fe(BZ,"MAX_CACHE_OFFSET",5);var b5=0,SX=function(){function e(t){zi(this,e),fe(this,"derivatives",void 0),fe(this,"id",void 0),this.derivatives=Array.isArray(t)?t:[t],this.id=b5,t.length===0&&(t.length>0,void 0),b5+=1}return Di(e,[{key:"getDerivativeToken",value:function(n){return this.derivatives.reduce(function(r,i){return i(n,r)},void 0)}}]),e}(),Ay=new BZ;function C2(e){var t=Array.isArray(e)?e:[e];return Ay.has(t)||Ay.set(t,new SX(t)),Ay.get(t)}var RD=new WeakMap,py={};function wD(e,t){for(var n=RD,r=0;r<t.length;r+=1){var i=t[r];n.has(i)||n.set(i,new WeakMap),n=n.get(i)}return n.has(py)||n.set(py,e()),n.get(py)}var y5=new WeakMap;function pf(e){var t=y5.get(e)||"";return t||(Object.keys(e).forEach(function(n){var r=e[n];t+=n,r instanceof SX?t+=r.id:r&&wt(r)==="object"?t+=pf(r):t+=r}),t=Ff(t),y5.set(e,t)),t}function v5(e,t){return Ff("".concat(t,"_").concat(pf(e)))}var f2=Qo();function Ve(e){return typeof e=="number"?"".concat(e,"px"):e}function _A(e,t,n){var r,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(o)return e;var a=he(he({},i),{},(r={},fe(r,xI,t),fe(r,es,n),r)),l=Object.keys(a).map(function(g){var u=a[g];return u?"".concat(g,'="').concat(u,'"'):null}).filter(function(g){return g}).join(" ");return"<style ".concat(l,">").concat(e,"</style>")}var eA=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return"--".concat(n?"".concat(n,"-"):"").concat(t).replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1-$2").replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase()},WD=function(t,n,r){return Object.keys(t).length?".".concat(n).concat(r!=null&&r.scope?".".concat(r.scope):"","{").concat(Object.entries(t).map(function(i){var o=xe(i,2),a=o[0],l=o[1];return"".concat(a,":").concat(l,";")}).join(""),"}"):""},ZX=function(t,n,r){var i={},o={};return Object.entries(t).forEach(function(a){var l,g,u=xe(a,2),d=u[0],C=u[1];if(r!=null&&(l=r.preserve)!==null&&l!==void 0&&l[d])o[d]=C;else if((typeof C=="string"||typeof C=="number")&&!(r!=null&&(g=r.ignore)!==null&&g!==void 0&&g[d])){var f,m=eA(d,r==null?void 0:r.prefix);i[m]=typeof C=="number"&&!(r!=null&&(f=r.unitless)!==null&&f!==void 0&&f[d])?"".concat(C,"px"):String(C),o[d]="var(".concat(m,")")}}),[o,WD(i,n,{scope:r==null?void 0:r.scope})]},S5=Qo()?I.useLayoutEffect:I.useEffect,ur=function(t,n){var r=I.useRef(!0);S5(function(){return t(r.current)},n),S5(function(){return r.current=!1,function(){r.current=!0}},[])},m2=function(t,n){ur(function(r){if(!r)return t()},n)},VD=he({},RI),Z5=VD.useInsertionEffect,kD=function(t,n,r){I.useMemo(t,r),ur(function(){return n(!0)},r)},ND=Z5?function(e,t,n){return Z5(function(){return e(),t()},n)}:kD,XD=he({},RI),JD=XD.useInsertionEffect,xD=function(t){var n=[],r=!1;function i(o){r||n.push(o)}return I.useEffect(function(){return r=!1,function(){r=!0,n.length&&n.forEach(function(o){return o()})}},t),i},HD=function(){return function(t){t()}},YD=typeof JD<"u"?xD:HD;function RZ(e,t,n,r,i){var o=I.useContext(ym),a=o.cache,l=[e].concat(Gt(t)),g=I2(l),u=YD([g]),d=function(b){a.opUpdate(g,function(p){var y=p||[void 0,void 0],S=xe(y,2),v=S[0],B=v===void 0?0:v,W=S[1],J=W,H=J||n(),x=[B,H];return b?b(x):x})};I.useMemo(function(){d()},[g]);var C=a.opGet(g),f=C[1];return ND(function(){i==null||i(f)},function(m){return d(function(b){var p=xe(b,2),y=p[0],S=p[1];return m&&y===0&&(i==null||i(f)),[y+1,S]}),function(){a.opUpdate(g,function(b){var p=b||[],y=xe(p,2),S=y[0],v=S===void 0?0:S,B=y[1],W=v-1;return W===0?(u(function(){(m||!a.opGet(g))&&(r==null||r(B,!1))}),null):[v-1,B]})}},[g]),f}var ED={},FD="css",Ku=new Map;function KD(e){Ku.set(e,(Ku.get(e)||0)+1)}function LD(e,t){if(typeof document<"u"){var n=document.querySelectorAll("style[".concat(xI,'="').concat(e,'"]'));n.forEach(function(r){if(r[Yc]===t){var i;(i=r.parentNode)===null||i===void 0||i.removeChild(r)}})}}var MD=0;function TD(e,t){Ku.set(e,(Ku.get(e)||0)-1);var n=Array.from(Ku.keys()),r=n.filter(function(i){var o=Ku.get(i)||0;return o<=0});n.length-r.length>MD&&r.forEach(function(i){LD(i,t),Ku.delete(i)})}var zD=function(t,n,r,i){var o=r.getDerivativeToken(t),a=he(he({},o),n);return i&&(a=i(a)),a},GX="token";function DD(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=I.useContext(ym),i=r.cache.instanceId,o=r.container,a=n.salt,l=a===void 0?"":a,g=n.override,u=g===void 0?ED:g,d=n.formatToken,C=n.getComputedToken,f=n.cssVar,m=wD(function(){return Object.assign.apply(Object,[{}].concat(Gt(t)))},t),b=pf(m),p=pf(u),y=f?pf(f):"",S=RZ(GX,[l,e.id,b,p,y],function(){var v,B=C?C(m,u,e):zD(m,u,e,d),W=he({},B),J="";if(f){var H=ZX(B,f.key,{prefix:f.prefix,ignore:f.ignore,unitless:f.unitless,preserve:f.preserve}),x=xe(H,2);B=x[0],J=x[1]}var E=v5(B,l);B._tokenKey=E,W._tokenKey=v5(W,l);var F=(v=f==null?void 0:f.key)!==null&&v!==void 0?v:E;B._themeKey=F,KD(F);var w="".concat(FD,"-").concat(Ff(E));return B._hashId=w,[B,w,W,J,(f==null?void 0:f.key)||""]},function(v){TD(v[0]._themeKey,i)},function(v){var B=xe(v,4),W=B[0],J=B[3];if(f&&J){var H=Vg(J,Ff("css-variables-".concat(W._themeKey)),{mark:es,prepend:"queue",attachTo:o,priority:-999});H[Yc]=i,H.setAttribute(xI,W._themeKey)}});return S}var PD=function(t,n,r){var i=xe(t,5),o=i[2],a=i[3],l=i[4],g=r||{},u=g.plain;if(!a)return null;var d=o._tokenKey,C=-999,f={"data-rc-order":"prependQueue","data-rc-priority":"".concat(C)},m=_A(a,l,d,f,u);return[C,d,m]},OD={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},BX="comm",RX="rule",wX="decl",_D="@import",UD="@keyframes",jD="@layer",WX=Math.abs,wZ=String.fromCharCode;function VX(e){return e.trim()}function tA(e,t,n){return e.replace(t,n)}function QD(e,t,n){return e.indexOf(t,n)}function AI(e,t){return e.charCodeAt(t)|0}function HI(e,t,n){return e.slice(t,n)}function ks(e){return e.length}function $D(e){return e.length}function Sh(e,t){return t.push(e),e}var qp=1,YI=1,kX=0,yl=0,Mi=0,iC="";function WZ(e,t,n,r,i,o,a,l){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:qp,column:YI,length:a,return:"",siblings:l}}function qD(){return Mi}function eP(){return Mi=yl>0?AI(iC,--yl):0,YI--,Mi===10&&(YI=1,qp--),Mi}function ts(){return Mi=yl<kX?AI(iC,yl++):0,YI++,Mi===10&&(YI=1,qp++),Mi}function Ec(){return AI(iC,yl)}function nA(){return yl}function eb(e,t){return HI(iC,e,t)}function Mf(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function tP(e){return qp=YI=1,kX=ks(iC=e),yl=0,[]}function nP(e){return iC="",e}function by(e){return VX(eb(yl-1,h2(e===91?e+2:e===40?e+1:e)))}function rP(e){for(;(Mi=Ec())&&Mi<33;)ts();return Mf(e)>2||Mf(Mi)>3?"":" "}function iP(e,t){for(;--t&&ts()&&!(Mi<48||Mi>102||Mi>57&&Mi<65||Mi>70&&Mi<97););return eb(e,nA()+(t<6&&Ec()==32&&ts()==32))}function h2(e){for(;ts();)switch(Mi){case e:return yl;case 34:case 39:e!==34&&e!==39&&h2(Mi);break;case 40:e===41&&h2(e);break;case 92:ts();break}return yl}function oP(e,t){for(;ts()&&e+Mi!==57;)if(e+Mi===84&&Ec()===47)break;return"/*"+eb(t,yl-1)+"*"+wZ(e===47?e:ts())}function aP(e){for(;!Mf(Ec());)ts();return eb(e,yl)}function lP(e){return nP(rA("",null,null,null,[""],e=tP(e),0,[0],e))}function rA(e,t,n,r,i,o,a,l,g){for(var u=0,d=0,C=a,f=0,m=0,b=0,p=1,y=1,S=1,v=0,B="",W=i,J=o,H=r,x=B;y;)switch(b=v,v=ts()){case 40:if(b!=108&&AI(x,C-1)==58){QD(x+=tA(by(v),"&","&\f"),"&\f",WX(u?l[u-1]:0))!=-1&&(S=-1);break}case 34:case 39:case 91:x+=by(v);break;case 9:case 10:case 13:case 32:x+=rP(b);break;case 92:x+=iP(nA()-1,7);continue;case 47:switch(Ec()){case 42:case 47:Sh(sP(oP(ts(),nA()),t,n,g),g),(Mf(b||1)==5||Mf(Ec()||1)==5)&&ks(x)&&HI(x,-1,void 0)!==" "&&(x+=" ");break;default:x+="/"}break;case 123*p:l[u++]=ks(x)*S;case 125*p:case 59:case 0:switch(v){case 0:case 125:y=0;case 59+d:S==-1&&(x=tA(x,/\f/g,"")),m>0&&(ks(x)-C||p===0&&b===47)&&Sh(m>32?B5(x+";",r,n,C-1,g):B5(tA(x," ","")+";",r,n,C-2,g),g);break;case 59:x+=";";default:if(Sh(H=G5(x,t,n,u,d,i,l,B,W=[],J=[],C,o),o),v===123)if(d===0)rA(x,t,H,H,W,o,C,l,J);else{switch(f){case 99:if(AI(x,3)===110)break;case 108:if(AI(x,2)===97)break;default:d=0;case 100:case 109:case 115:}d?rA(e,H,H,r&&Sh(G5(e,H,H,0,0,i,l,B,i,W=[],C,J),J),i,J,C,l,r?W:J):rA(x,H,H,H,[""],J,0,l,J)}}u=d=m=0,p=S=1,B=x="",C=a;break;case 58:C=1+ks(x),m=b;default:if(p<1){if(v==123)--p;else if(v==125&&p++==0&&eP()==125)continue}switch(x+=wZ(v),v*p){case 38:S=d>0?1:(x+="\f",-1);break;case 44:l[u++]=(ks(x)-1)*S,S=1;break;case 64:Ec()===45&&(x+=by(ts())),f=Ec(),d=C=ks(B=x+=aP(nA())),v++;break;case 45:b===45&&ks(x)==2&&(p=0)}}return o}function G5(e,t,n,r,i,o,a,l,g,u,d,C){for(var f=i-1,m=i===0?o:[""],b=$D(m),p=0,y=0,S=0;p<r;++p)for(var v=0,B=HI(e,f+1,f=WX(y=a[p])),W=e;v<b;++v)(W=VX(y>0?m[v]+" "+B:tA(B,/&\f/g,m[v])))&&(g[S++]=W);return WZ(e,t,n,i===0?RX:l,g,u,d,C)}function sP(e,t,n,r){return WZ(e,t,n,BX,wZ(qD()),HI(e,2,-2),0,r)}function B5(e,t,n,r,i){return WZ(e,t,n,wX,HI(e,0,r),HI(e,r+1,-1),r,i)}function A2(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function gP(e,t,n,r){switch(e.type){case jD:if(e.children.length)break;case _D:case wX:return e.return=e.return||e.value;case BX:return"";case UD:return e.return=e.value+"{"+A2(e.children,r)+"}";case RX:if(!ks(e.value=e.props.join(",")))return""}return ks(n=A2(e.children,r))?e.return=e.value+"{"+n+"}":""}var R5="data-ant-cssinjs-cache-path",NX="_FILE_STYLE__",Ou,XX=!0;function cP(){if(!Ou&&(Ou={},Qo())){var e=document.createElement("div");e.className=R5,e.style.position="fixed",e.style.visibility="hidden",e.style.top="-9999px",document.body.appendChild(e);var t=getComputedStyle(e).content||"";t=t.replace(/^"/,"").replace(/"$/,""),t.split(";").forEach(function(i){var o=i.split(":"),a=xe(o,2),l=a[0],g=a[1];Ou[l]=g});var n=document.querySelector("style[".concat(R5,"]"));if(n){var r;XX=!1,(r=n.parentNode)===null||r===void 0||r.removeChild(n)}document.body.removeChild(e)}}function uP(e){return cP(),!!Ou[e]}function dP(e){var t=Ou[e],n=null;if(t&&Qo())if(XX)n=NX;else{var r=document.querySelector("style[".concat(es,'="').concat(Ou[e],'"]'));r?n=r.innerHTML:delete Ou[e]}return[n,t]}var IP="_skip_check_",JX="_multi_value_";function iA(e){var t=A2(lP(e),gP);return t.replace(/\{%%%\:[^;];}/g,";")}function CP(e){return wt(e)==="object"&&e&&(IP in e||JX in e)}function w5(e,t,n){if(!t)return e;var r=".".concat(t),i=n==="low"?":where(".concat(r,")"):r,o=e.split(",").map(function(a){var l,g=a.trim().split(/\s+/),u=g[0]||"",d=((l=u.match(/^\w+/))===null||l===void 0?void 0:l[0])||"";return u="".concat(d).concat(i).concat(u.slice(d.length)),[u].concat(Gt(g.slice(1))).join(" ")});return o.join(",")}var fP=function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},i=r.root,o=r.injectHash,a=r.parentSelectors,l=n.hashId,g=n.layer;n.path;var u=n.hashPriority,d=n.transformers,C=d===void 0?[]:d;n.linters;var f="",m={};function b(S){var v=S.getName(l);if(!m[v]){var B=e(S.style,n,{root:!1,parentSelectors:a}),W=xe(B,1),J=W[0];m[v]="@keyframes ".concat(S.getName(l)).concat(J)}}function p(S){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return S.forEach(function(B){Array.isArray(B)?p(B,v):B&&v.push(B)}),v}var y=p(Array.isArray(t)?t:[t]);return y.forEach(function(S){var v=typeof S=="string"&&!i?{}:S;if(typeof v=="string")f+="".concat(v,`
`);else if(v._keyframe)b(v);else{var B=C.reduce(function(W,J){var H;return(J==null||(H=J.visit)===null||H===void 0?void 0:H.call(J,W))||W},v);Object.keys(B).forEach(function(W){var J=B[W];if(wt(J)==="object"&&J&&(W!=="animationName"||!J._keyframe)&&!CP(J)){var H=!1,x=W.trim(),E=!1;(i||o)&&l?x.startsWith("@")?H=!0:x==="&"?x=w5("",l,u):x=w5(W,l,u):i&&!l&&(x==="&"||x==="")&&(x="",E=!0);var F=e(J,n,{root:E,injectHash:H,parentSelectors:[].concat(Gt(a),[x])}),w=xe(F,2),V=w[0],Y=w[1];m=he(he({},m),Y),f+="".concat(x).concat(V)}else{let $=function(U,_){var P=U.replace(/[A-Z]/g,function(j){return"-".concat(j.toLowerCase())}),ee=_;!OD[U]&&typeof ee=="number"&&ee!==0&&(ee="".concat(ee,"px")),U==="animationName"&&_!==null&&_!==void 0&&_._keyframe&&(b(_),ee=_.getName(l)),f+="".concat(P,":").concat(ee,";")};var M,L=(M=J==null?void 0:J.value)!==null&&M!==void 0?M:J;wt(J)==="object"&&J!==null&&J!==void 0&&J[JX]&&Array.isArray(L)?L.forEach(function(U){$(W,U)}):$(W,L)}})}}),i?g&&(f&&(f="@layer ".concat(g.name," {").concat(f,"}")),g.dependencies&&(m["@layer ".concat(g.name)]=g.dependencies.map(function(S){return"@layer ".concat(S,", ").concat(g.name,";")}).join(`
`))):f="{".concat(f,"}"),[f,m]};function xX(e,t){return Ff("".concat(e.join("%")).concat(t))}function mP(){return null}var HX="style";function p2(e,t){var n=e.token,r=e.path,i=e.hashId,o=e.layer,a=e.nonce,l=e.clientOnly,g=e.order,u=g===void 0?0:g,d=I.useContext(ym),C=d.autoClear;d.mock;var f=d.defaultCache,m=d.hashPriority,b=d.container,p=d.ssrInline,y=d.transformers,S=d.linters,v=d.cache,B=d.layer,W=n._tokenKey,J=[W];B&&J.push("layer"),J.push.apply(J,Gt(r));var H=f2,x=RZ(HX,J,function(){var Y=J.join("|");if(uP(Y)){var M=dP(Y),L=xe(M,2),$=L[0],U=L[1];if($)return[$,W,U,{},l,u]}var _=t(),P=fP(_,{hashId:i,hashPriority:m,layer:B?o:void 0,path:r.join("-"),transformers:y,linters:S}),ee=xe(P,2),j=ee[0],O=ee[1],X=iA(j),D=xX(J,X);return[X,W,D,O,l,u]},function(Y,M){var L=xe(Y,3),$=L[2];(M||C)&&f2&&Kf($,{mark:es})},function(Y){var M=xe(Y,4),L=M[0];M[1];var $=M[2],U=M[3];if(H&&L!==NX){var _={mark:es,prepend:B?!1:"queue",attachTo:b,priority:u},P=typeof a=="function"?a():a;P&&(_.csp={nonce:P});var ee=[],j=[];Object.keys(U).forEach(function(X){X.startsWith("@layer")?ee.push(X):j.push(X)}),ee.forEach(function(X){Vg(iA(U[X]),"_layer-".concat(X),he(he({},_),{},{prepend:!0}))});var O=Vg(L,$,_);O[Yc]=v.instanceId,O.setAttribute(xI,W),j.forEach(function(X){Vg(iA(U[X]),"_effect-".concat(X),_)})}}),E=xe(x,3),F=E[0],w=E[1],V=E[2];return function(Y){var M;if(!p||H||!f)M=I.createElement(mP,null);else{var L;M=I.createElement("style",lt({},(L={},fe(L,xI,w),fe(L,es,V),L),{dangerouslySetInnerHTML:{__html:F}}))}return I.createElement(I.Fragment,null,M,Y)}}var hP=function(t,n,r){var i=xe(t,6),o=i[0],a=i[1],l=i[2],g=i[3],u=i[4],d=i[5],C=r||{},f=C.plain;if(u)return null;var m=o,b={"data-rc-order":"prependQueue","data-rc-priority":"".concat(d)};return m=_A(o,a,l,b,f),g&&Object.keys(g).forEach(function(p){if(!n[p]){n[p]=!0;var y=iA(g[p]),S=_A(y,a,"_effect-".concat(p),b,f);p.startsWith("@layer")?m=S+m:m+=S}}),[d,l,m]},YX="cssVar",AP=function(t,n){var r=t.key,i=t.prefix,o=t.unitless,a=t.ignore,l=t.token,g=t.scope,u=g===void 0?"":g,d=I.useContext(ym),C=d.cache.instanceId,f=d.container,m=l._tokenKey,b=[].concat(Gt(t.path),[r,u,m]),p=RZ(YX,b,function(){var y=n(),S=ZX(y,r,{prefix:i,unitless:o,ignore:a,scope:u}),v=xe(S,2),B=v[0],W=v[1],J=xX(b,W);return[B,W,J,r]},function(y){var S=xe(y,3),v=S[2];f2&&Kf(v,{mark:es})},function(y){var S=xe(y,3),v=S[1],B=S[2];if(v){var W=Vg(v,B,{mark:es,prepend:"queue",attachTo:f,priority:-999});W[Yc]=C,W.setAttribute(xI,r)}});return p},pP=function(t,n,r){var i=xe(t,4),o=i[1],a=i[2],l=i[3],g=r||{},u=g.plain;if(!o)return null;var d=-999,C={"data-rc-order":"prependQueue","data-rc-priority":"".concat(d)},f=_A(o,l,a,C,u);return[d,a,f]},LC;LC={},fe(LC,HX,hP),fe(LC,GX,PD),fe(LC,YX,pP);var lr=function(){function e(t,n){zi(this,e),fe(this,"name",void 0),fe(this,"style",void 0),fe(this,"_keyframe",!0),this.name=t,this.style=n}return Di(e,[{key:"getName",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return n?"".concat(n,"-").concat(this.name):this.name}}]),e}();function Ed(e){return e.notSplit=!0,e}Ed(["borderTop","borderBottom"]),Ed(["borderTop"]),Ed(["borderBottom"]),Ed(["borderLeft","borderRight"]),Ed(["borderLeft"]),Ed(["borderRight"]);var VZ=I.createContext({});function EX(e){return AX(e)||CX(e)||SZ(e)||pX()}function Ys(e,t){for(var n=e,r=0;r<t.length;r+=1){if(n==null)return;n=n[t[r]]}return n}function FX(e,t,n,r){if(!t.length)return n;var i=EX(t),o=i[0],a=i.slice(1),l;return!e&&typeof o=="number"?l=[]:Array.isArray(e)?l=Gt(e):l=he({},e),r&&n===void 0&&a.length===1?delete l[o][a[0]]:l[o]=FX(l[o],a,n,r),l}function _l(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return t.length&&r&&n===void 0&&!Ys(e,t.slice(0,-1))?e:FX(e,t,n,r)}function bP(e){return wt(e)==="object"&&e!==null&&Object.getPrototypeOf(e)===Object.prototype}function W5(e){return Array.isArray(e)?[]:{}}var yP=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function lI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=W5(t[0]);return t.forEach(function(i){function o(a,l){var g=new Set(l),u=Ys(i,a),d=Array.isArray(u);if(d||bP(u)){if(!g.has(u)){g.add(u);var C=Ys(r,a);d?r=_l(r,a,[]):(!C||wt(C)!=="object")&&(r=_l(r,a,W5(u))),yP(u).forEach(function(f){o([].concat(Gt(a),[f]),g)})}}else r=_l(r,a,u)}o([])}),r}function vP(){}const SP=I.createContext({}),tb=()=>{const e=()=>{};return e.deprecated=vP,e},ZP=I.createContext(void 0);var KX={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},GP={yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0},BP=he(he({},GP),{},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",dateFormat:"M/D/YYYY",dateTimeFormat:"M/D/YYYY HH:mm:ss",previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"});const LX={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},V5={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},BP),timePickerLocale:Object.assign({},LX)},za="${label} is not a valid ${type}",nd={locale:"en",Pagination:KX,DatePicker:V5,TimePicker:LX,Calendar:V5,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",deselectAll:"Deselect all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:za,method:za,array:za,object:za,number:za,date:za,boolean:za,integer:za,float:za,regexp:za,email:za,url:za,hex:za},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty",transparent:"Transparent",singleColor:"Single",gradientColor:"Gradient"}};let oA=Object.assign({},nd.Modal),aA=[];const k5=()=>aA.reduce((e,t)=>Object.assign(Object.assign({},e),t),nd.Modal);function RP(e){if(e){const t=Object.assign({},e);return aA.push(t),oA=k5(),()=>{aA=aA.filter(n=>n!==t),oA=k5()}}oA=Object.assign({},nd.Modal)}function MX(){return oA}const kZ=I.createContext(void 0),lu=(e,t)=>{const n=I.useContext(kZ),r=I.useMemo(()=>{var o;const a=t||nd[e],l=(o=n==null?void 0:n[e])!==null&&o!==void 0?o:{};return Object.assign(Object.assign({},typeof a=="function"?a():a),l||{})},[e,t,n]),i=I.useMemo(()=>{const o=n==null?void 0:n.locale;return n!=null&&n.exist&&!o?nd.locale:o},[n]);return[r,i]},wP="internalMark",WP=e=>{const{locale:t={},children:n,_ANT_MARK__:r}=e;I.useEffect(()=>RP(t==null?void 0:t.Modal),[t]);const i=I.useMemo(()=>Object.assign(Object.assign({},t),{exist:!0}),[t]);return I.createElement(kZ.Provider,{value:i},n)},TX={blue:"#1677FF",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#EB2F96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},Tf=Object.assign(Object.assign({},TX),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0}),uo=Math.round;function yy(e,t){const n=e.replace(/^[^(]*\((.*)/,"$1").replace(/\).*/,"").match(/\d*\.?\d+%?/g)||[],r=n.map(i=>parseFloat(i));for(let i=0;i<3;i+=1)r[i]=t(r[i]||0,n[i]||"",i);return n[3]?r[3]=n[3].includes("%")?r[3]/100:r[3]:r[3]=1,r}const N5=(e,t,n)=>n===0?e:e/100;function MC(e,t){const n=t||255;return e>n?n:e<0?0:e}class xr{constructor(t){fe(this,"isValid",!0),fe(this,"r",0),fe(this,"g",0),fe(this,"b",0),fe(this,"a",1),fe(this,"_h",void 0),fe(this,"_s",void 0),fe(this,"_l",void 0),fe(this,"_v",void 0),fe(this,"_max",void 0),fe(this,"_min",void 0),fe(this,"_brightness",void 0);function n(r){return r[0]in t&&r[1]in t&&r[2]in t}if(t)if(typeof t=="string"){let i=function(o){return r.startsWith(o)};const r=t.trim();/^#?[A-F\d]{3,8}$/i.test(r)?this.fromHexString(r):i("rgb")?this.fromRgbString(r):i("hsl")?this.fromHslString(r):(i("hsv")||i("hsb"))&&this.fromHsvString(r)}else if(t instanceof xr)this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this._h=t._h,this._s=t._s,this._l=t._l,this._v=t._v;else if(n("rgb"))this.r=MC(t.r),this.g=MC(t.g),this.b=MC(t.b),this.a=typeof t.a=="number"?MC(t.a,1):1;else if(n("hsl"))this.fromHsl(t);else if(n("hsv"))this.fromHsv(t);else throw new Error("@ant-design/fast-color: unsupported input "+JSON.stringify(t))}setR(t){return this._sc("r",t)}setG(t){return this._sc("g",t)}setB(t){return this._sc("b",t)}setA(t){return this._sc("a",t,1)}setHue(t){const n=this.toHsv();return n.h=t,this._c(n)}getLuminance(){function t(o){const a=o/255;return a<=.03928?a/12.92:Math.pow((a+.055)/1.055,2.4)}const n=t(this.r),r=t(this.g),i=t(this.b);return .2126*n+.7152*r+.0722*i}getHue(){if(typeof this._h>"u"){const t=this.getMax()-this.getMin();t===0?this._h=0:this._h=uo(60*(this.r===this.getMax()?(this.g-this.b)/t+(this.g<this.b?6:0):this.g===this.getMax()?(this.b-this.r)/t+2:(this.r-this.g)/t+4))}return this._h}getSaturation(){if(typeof this._s>"u"){const t=this.getMax()-this.getMin();t===0?this._s=0:this._s=t/this.getMax()}return this._s}getLightness(){return typeof this._l>"u"&&(this._l=(this.getMax()+this.getMin())/510),this._l}getValue(){return typeof this._v>"u"&&(this._v=this.getMax()/255),this._v}getBrightness(){return typeof this._brightness>"u"&&(this._brightness=(this.r*299+this.g*587+this.b*114)/1e3),this._brightness}darken(t=10){const n=this.getHue(),r=this.getSaturation();let i=this.getLightness()-t/100;return i<0&&(i=0),this._c({h:n,s:r,l:i,a:this.a})}lighten(t=10){const n=this.getHue(),r=this.getSaturation();let i=this.getLightness()+t/100;return i>1&&(i=1),this._c({h:n,s:r,l:i,a:this.a})}mix(t,n=50){const r=this._c(t),i=n/100,o=l=>(r[l]-this[l])*i+this[l],a={r:uo(o("r")),g:uo(o("g")),b:uo(o("b")),a:uo(o("a")*100)/100};return this._c(a)}tint(t=10){return this.mix({r:255,g:255,b:255,a:1},t)}shade(t=10){return this.mix({r:0,g:0,b:0,a:1},t)}onBackground(t){const n=this._c(t),r=this.a+n.a*(1-this.a),i=o=>uo((this[o]*this.a+n[o]*n.a*(1-this.a))/r);return this._c({r:i("r"),g:i("g"),b:i("b"),a:r})}isDark(){return this.getBrightness()<128}isLight(){return this.getBrightness()>=128}equals(t){return this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a}clone(){return this._c(this)}toHexString(){let t="#";const n=(this.r||0).toString(16);t+=n.length===2?n:"0"+n;const r=(this.g||0).toString(16);t+=r.length===2?r:"0"+r;const i=(this.b||0).toString(16);if(t+=i.length===2?i:"0"+i,typeof this.a=="number"&&this.a>=0&&this.a<1){const o=uo(this.a*255).toString(16);t+=o.length===2?o:"0"+o}return t}toHsl(){return{h:this.getHue(),s:this.getSaturation(),l:this.getLightness(),a:this.a}}toHslString(){const t=this.getHue(),n=uo(this.getSaturation()*100),r=uo(this.getLightness()*100);return this.a!==1?`hsla(${t},${n}%,${r}%,${this.a})`:`hsl(${t},${n}%,${r}%)`}toHsv(){return{h:this.getHue(),s:this.getSaturation(),v:this.getValue(),a:this.a}}toRgb(){return{r:this.r,g:this.g,b:this.b,a:this.a}}toRgbString(){return this.a!==1?`rgba(${this.r},${this.g},${this.b},${this.a})`:`rgb(${this.r},${this.g},${this.b})`}toString(){return this.toRgbString()}_sc(t,n,r){const i=this.clone();return i[t]=MC(n,r),i}_c(t){return new this.constructor(t)}getMax(){return typeof this._max>"u"&&(this._max=Math.max(this.r,this.g,this.b)),this._max}getMin(){return typeof this._min>"u"&&(this._min=Math.min(this.r,this.g,this.b)),this._min}fromHexString(t){const n=t.replace("#","");function r(i,o){return parseInt(n[i]+n[o||i],16)}n.length<6?(this.r=r(0),this.g=r(1),this.b=r(2),this.a=n[3]?r(3)/255:1):(this.r=r(0,1),this.g=r(2,3),this.b=r(4,5),this.a=n[6]?r(6,7)/255:1)}fromHsl({h:t,s:n,l:r,a:i}){if(this._h=t%360,this._s=n,this._l=r,this.a=typeof i=="number"?i:1,n<=0){const f=uo(r*255);this.r=f,this.g=f,this.b=f}let o=0,a=0,l=0;const g=t/60,u=(1-Math.abs(2*r-1))*n,d=u*(1-Math.abs(g%2-1));g>=0&&g<1?(o=u,a=d):g>=1&&g<2?(o=d,a=u):g>=2&&g<3?(a=u,l=d):g>=3&&g<4?(a=d,l=u):g>=4&&g<5?(o=d,l=u):g>=5&&g<6&&(o=u,l=d);const C=r-u/2;this.r=uo((o+C)*255),this.g=uo((a+C)*255),this.b=uo((l+C)*255)}fromHsv({h:t,s:n,v:r,a:i}){this._h=t%360,this._s=n,this._v=r,this.a=typeof i=="number"?i:1;const o=uo(r*255);if(this.r=o,this.g=o,this.b=o,n<=0)return;const a=t/60,l=Math.floor(a),g=a-l,u=uo(r*(1-n)*255),d=uo(r*(1-n*g)*255),C=uo(r*(1-n*(1-g))*255);switch(l){case 0:this.g=C,this.b=u;break;case 1:this.r=d,this.b=u;break;case 2:this.r=u,this.b=C;break;case 3:this.r=u,this.g=d;break;case 4:this.r=C,this.g=u;break;case 5:default:this.g=u,this.b=d;break}}fromHsvString(t){const n=yy(t,N5);this.fromHsv({h:n[0],s:n[1],v:n[2],a:n[3]})}fromHslString(t){const n=yy(t,N5);this.fromHsl({h:n[0],s:n[1],l:n[2],a:n[3]})}fromRgbString(t){const n=yy(t,(r,i)=>i.includes("%")?uo(r/100*255):r);this.r=n[0],this.g=n[1],this.b=n[2],this.a=n[3]}}var Zh=2,X5=.16,VP=.05,kP=.05,NP=.15,zX=5,DX=4,XP=[{index:7,amount:15},{index:6,amount:25},{index:5,amount:30},{index:5,amount:45},{index:5,amount:65},{index:5,amount:85},{index:4,amount:90},{index:3,amount:95},{index:2,amount:97},{index:1,amount:98}];function J5(e,t,n){var r;return Math.round(e.h)>=60&&Math.round(e.h)<=240?r=n?Math.round(e.h)-Zh*t:Math.round(e.h)+Zh*t:r=n?Math.round(e.h)+Zh*t:Math.round(e.h)-Zh*t,r<0?r+=360:r>=360&&(r-=360),r}function x5(e,t,n){if(e.h===0&&e.s===0)return e.s;var r;return n?r=e.s-X5*t:t===DX?r=e.s+X5:r=e.s+VP*t,r>1&&(r=1),n&&t===zX&&r>.1&&(r=.1),r<.06&&(r=.06),Math.round(r*100)/100}function H5(e,t,n){var r;return n?r=e.v+kP*t:r=e.v-NP*t,r=Math.max(0,Math.min(1,r)),Math.round(r*100)/100}function EI(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[],r=new xr(e),i=r.toHsv(),o=zX;o>0;o-=1){var a=new xr({h:J5(i,o,!0),s:x5(i,o,!0),v:H5(i,o,!0)});n.push(a)}n.push(r);for(var l=1;l<=DX;l+=1){var g=new xr({h:J5(i,l),s:x5(i,l),v:H5(i,l)});n.push(g)}return t.theme==="dark"?XP.map(function(u){var d=u.index,C=u.amount;return new xr(t.backgroundColor||"#141414").mix(n[d],C).toHexString()}):n.map(function(u){return u.toHexString()})}var lA={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},UA=["#fff1f0","#ffccc7","#ffa39e","#ff7875","#ff4d4f","#f5222d","#cf1322","#a8071a","#820014","#5c0011"];UA.primary=UA[5];var jA=["#fff2e8","#ffd8bf","#ffbb96","#ff9c6e","#ff7a45","#fa541c","#d4380d","#ad2102","#871400","#610b00"];jA.primary=jA[5];var QA=["#fff7e6","#ffe7ba","#ffd591","#ffc069","#ffa940","#fa8c16","#d46b08","#ad4e00","#873800","#612500"];QA.primary=QA[5];var zf=["#fffbe6","#fff1b8","#ffe58f","#ffd666","#ffc53d","#faad14","#d48806","#ad6800","#874d00","#613400"];zf.primary=zf[5];var $A=["#feffe6","#ffffb8","#fffb8f","#fff566","#ffec3d","#fadb14","#d4b106","#ad8b00","#876800","#614700"];$A.primary=$A[5];var qA=["#fcffe6","#f4ffb8","#eaff8f","#d3f261","#bae637","#a0d911","#7cb305","#5b8c00","#3f6600","#254000"];qA.primary=qA[5];var ep=["#f6ffed","#d9f7be","#b7eb8f","#95de64","#73d13d","#52c41a","#389e0d","#237804","#135200","#092b00"];ep.primary=ep[5];var tp=["#e6fffb","#b5f5ec","#87e8de","#5cdbd3","#36cfc9","#13c2c2","#08979c","#006d75","#00474f","#002329"];tp.primary=tp[5];var Df=["#e6f4ff","#bae0ff","#91caff","#69b1ff","#4096ff","#1677ff","#0958d9","#003eb3","#002c8c","#001d66"];Df.primary=Df[5];var np=["#f0f5ff","#d6e4ff","#adc6ff","#85a5ff","#597ef7","#2f54eb","#1d39c4","#10239e","#061178","#030852"];np.primary=np[5];var rp=["#f9f0ff","#efdbff","#d3adf7","#b37feb","#9254de","#722ed1","#531dab","#391085","#22075e","#120338"];rp.primary=rp[5];var ip=["#fff0f6","#ffd6e7","#ffadd2","#ff85c0","#f759ab","#eb2f96","#c41d7f","#9e1068","#780650","#520339"];ip.primary=ip[5];var Pf=["#a6a6a6","#999999","#8c8c8c","#808080","#737373","#666666","#404040","#1a1a1a","#000000","#000000"];Pf.primary=Pf[5];var JP=Pf,sA={red:UA,volcano:jA,orange:QA,gold:zf,yellow:$A,lime:qA,green:ep,cyan:tp,blue:Df,geekblue:np,purple:rp,magenta:ip,grey:Pf},op=["#2a1215","#431418","#58181c","#791a1f","#a61d24","#d32029","#e84749","#f37370","#f89f9a","#fac8c3"];op.primary=op[5];var ap=["#2b1611","#441d12","#592716","#7c3118","#aa3e19","#d84a1b","#e87040","#f3956a","#f8b692","#fad4bc"];ap.primary=ap[5];var lp=["#2b1d11","#442a11","#593815","#7c4a15","#aa6215","#d87a16","#e89a3c","#f3b765","#f8cf8d","#fae3b7"];lp.primary=lp[5];var sp=["#2b2111","#443111","#594214","#7c5914","#aa7714","#d89614","#e8b339","#f3cc62","#f8df8b","#faedb5"];sp.primary=sp[5];var gp=["#2b2611","#443b11","#595014","#7c6e14","#aa9514","#d8bd14","#e8d639","#f3ea62","#f8f48b","#fafab5"];gp.primary=gp[5];var cp=["#1f2611","#2e3c10","#3e4f13","#536d13","#6f9412","#8bbb11","#a9d134","#c9e75d","#e4f88b","#f0fab5"];cp.primary=cp[5];var up=["#162312","#1d3712","#274916","#306317","#3c8618","#49aa19","#6abe39","#8fd460","#b2e58b","#d5f2bb"];up.primary=up[5];var dp=["#112123","#113536","#144848","#146262","#138585","#13a8a8","#33bcb7","#58d1c9","#84e2d8","#b2f1e8"];dp.primary=dp[5];var Ip=["#111a2c","#112545","#15325b","#15417e","#1554ad","#1668dc","#3c89e8","#65a9f3","#8dc5f8","#b7dcfa"];Ip.primary=Ip[5];var Cp=["#131629","#161d40","#1c2755","#203175","#263ea0","#2b4acb","#5273e0","#7f9ef3","#a8c1f8","#d2e0fa"];Cp.primary=Cp[5];var fp=["#1a1325","#24163a","#301c4d","#3e2069","#51258f","#642ab5","#854eca","#ab7ae0","#cda8f0","#ebd7fa"];fp.primary=fp[5];var mp=["#291321","#40162f","#551c3b","#75204f","#a02669","#cb2b83","#e0529c","#f37fb7","#f8a8cc","#fad2e3"];mp.primary=mp[5];var hp=["#151515","#1f1f1f","#2d2d2d","#393939","#494949","#5a5a5a","#6a6a6a","#7b7b7b","#888888","#969696"];hp.primary=hp[5];var xP={red:op,volcano:ap,orange:lp,gold:sp,yellow:gp,lime:cp,green:up,cyan:dp,blue:Ip,geekblue:Cp,purple:fp,magenta:mp,grey:hp};const HP=Object.freeze(Object.defineProperty({__proto__:null,blue:Df,blueDark:Ip,cyan:tp,cyanDark:dp,geekblue:np,geekblueDark:Cp,generate:EI,gold:zf,goldDark:sp,gray:JP,green:ep,greenDark:up,grey:Pf,greyDark:hp,lime:qA,limeDark:cp,magenta:ip,magentaDark:mp,orange:QA,orangeDark:lp,presetDarkPalettes:xP,presetPalettes:sA,presetPrimaryColors:lA,purple:rp,purpleDark:fp,red:UA,redDark:op,volcano:jA,volcanoDark:ap,yellow:$A,yellowDark:gp},Symbol.toStringTag,{value:"Module"}));function YP(e,t){let{generateColorPalettes:n,generateNeutralColorPalettes:r}=t;const{colorSuccess:i,colorWarning:o,colorError:a,colorInfo:l,colorPrimary:g,colorBgBase:u,colorTextBase:d}=e,C=n(g),f=n(i),m=n(o),b=n(a),p=n(l),y=r(u,d),S=e.colorLink||e.colorInfo,v=n(S),B=new xr(b[1]).mix(new xr(b[3]),50).toHexString();return Object.assign(Object.assign({},y),{colorPrimaryBg:C[1],colorPrimaryBgHover:C[2],colorPrimaryBorder:C[3],colorPrimaryBorderHover:C[4],colorPrimaryHover:C[5],colorPrimary:C[6],colorPrimaryActive:C[7],colorPrimaryTextHover:C[8],colorPrimaryText:C[9],colorPrimaryTextActive:C[10],colorSuccessBg:f[1],colorSuccessBgHover:f[2],colorSuccessBorder:f[3],colorSuccessBorderHover:f[4],colorSuccessHover:f[4],colorSuccess:f[6],colorSuccessActive:f[7],colorSuccessTextHover:f[8],colorSuccessText:f[9],colorSuccessTextActive:f[10],colorErrorBg:b[1],colorErrorBgHover:b[2],colorErrorBgFilledHover:B,colorErrorBgActive:b[3],colorErrorBorder:b[3],colorErrorBorderHover:b[4],colorErrorHover:b[5],colorError:b[6],colorErrorActive:b[7],colorErrorTextHover:b[8],colorErrorText:b[9],colorErrorTextActive:b[10],colorWarningBg:m[1],colorWarningBgHover:m[2],colorWarningBorder:m[3],colorWarningBorderHover:m[4],colorWarningHover:m[4],colorWarning:m[6],colorWarningActive:m[7],colorWarningTextHover:m[8],colorWarningText:m[9],colorWarningTextActive:m[10],colorInfoBg:p[1],colorInfoBgHover:p[2],colorInfoBorder:p[3],colorInfoBorderHover:p[4],colorInfoHover:p[4],colorInfo:p[6],colorInfoActive:p[7],colorInfoTextHover:p[8],colorInfoText:p[9],colorInfoTextActive:p[10],colorLinkHover:v[4],colorLink:v[6],colorLinkActive:v[7],colorBgMask:new xr("#000").setA(.45).toRgbString(),colorWhite:"#fff"})}const EP=e=>{let t=e,n=e,r=e,i=e;return e<6&&e>=5?t=e+1:e<16&&e>=6?t=e+2:e>=16&&(t=16),e<7&&e>=5?n=4:e<8&&e>=7?n=5:e<14&&e>=8?n=6:e<16&&e>=14?n=7:e>=16&&(n=8),e<6&&e>=2?r=1:e>=6&&(r=2),e>4&&e<8?i=4:e>=8&&(i=6),{borderRadius:e,borderRadiusXS:r,borderRadiusSM:n,borderRadiusLG:t,borderRadiusOuter:i}};function FP(e){const{motionUnit:t,motionBase:n,borderRadius:r,lineWidth:i}=e;return Object.assign({motionDurationFast:`${(n+t).toFixed(1)}s`,motionDurationMid:`${(n+t*2).toFixed(1)}s`,motionDurationSlow:`${(n+t*3).toFixed(1)}s`,lineWidthBold:i+1},EP(r))}const KP=e=>{const{controlHeight:t}=e;return{controlHeightSM:t*.75,controlHeightXS:t*.5,controlHeightLG:t*1.25}};function gA(e){return(e+8)/e}function LP(e){const t=new Array(10).fill(null).map((n,r)=>{const i=r-1,o=e*Math.pow(Math.E,i/5),a=r>1?Math.floor(o):Math.ceil(o);return Math.floor(a/2)*2});return t[1]=e,t.map(n=>({size:n,lineHeight:gA(n)}))}const MP=e=>{const t=LP(e),n=t.map(d=>d.size),r=t.map(d=>d.lineHeight),i=n[1],o=n[0],a=n[2],l=r[1],g=r[0],u=r[2];return{fontSizeSM:o,fontSize:i,fontSizeLG:a,fontSizeXL:n[3],fontSizeHeading1:n[6],fontSizeHeading2:n[5],fontSizeHeading3:n[4],fontSizeHeading4:n[3],fontSizeHeading5:n[2],lineHeight:l,lineHeightLG:u,lineHeightSM:g,fontHeight:Math.round(l*i),fontHeightLG:Math.round(u*a),fontHeightSM:Math.round(g*o),lineHeightHeading1:r[6],lineHeightHeading2:r[5],lineHeightHeading3:r[4],lineHeightHeading4:r[3],lineHeightHeading5:r[2]}};function TP(e){const{sizeUnit:t,sizeStep:n}=e;return{sizeXXL:t*(n+8),sizeXL:t*(n+4),sizeLG:t*(n+2),sizeMD:t*(n+1),sizeMS:t*n,size:t*n,sizeSM:t*(n-1),sizeXS:t*(n-2),sizeXXS:t*(n-3)}}const fl=(e,t)=>new xr(e).setA(t).toRgbString(),TC=(e,t)=>new xr(e).darken(t).toHexString(),zP=e=>{const t=EI(e);return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[4],6:t[5],7:t[6],8:t[4],9:t[5],10:t[6]}},DP=(e,t)=>{const n=e||"#fff",r=t||"#000";return{colorBgBase:n,colorTextBase:r,colorText:fl(r,.88),colorTextSecondary:fl(r,.65),colorTextTertiary:fl(r,.45),colorTextQuaternary:fl(r,.25),colorFill:fl(r,.15),colorFillSecondary:fl(r,.06),colorFillTertiary:fl(r,.04),colorFillQuaternary:fl(r,.02),colorBgSolid:fl(r,1),colorBgSolidHover:fl(r,.75),colorBgSolidActive:fl(r,.95),colorBgLayout:TC(n,4),colorBgContainer:TC(n,0),colorBgElevated:TC(n,0),colorBgSpotlight:fl(r,.85),colorBgBlur:"transparent",colorBorder:TC(n,15),colorBorderSecondary:TC(n,6)}};function PP(e){lA.pink=lA.magenta,sA.pink=sA.magenta;const t=Object.keys(TX).map(n=>{const r=e[n]===lA[n]?sA[n]:EI(e[n]);return new Array(10).fill(1).reduce((i,o,a)=>(i[`${n}-${a+1}`]=r[a],i[`${n}${a+1}`]=r[a],i),{})}).reduce((n,r)=>(n=Object.assign(Object.assign({},n),r),n),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),t),YP(e,{generateColorPalettes:zP,generateNeutralColorPalettes:DP})),MP(e.fontSize)),TP(e)),KP(e)),FP(e))}const PX=C2(PP),b2={token:Tf,override:{override:Tf},hashed:!0},OX=Ge.createContext(b2),Of="ant",nb="anticon",OP=["outlined","borderless","filled"],_P=(e,t)=>t||(e?`${Of}-${e}`:Of),dn=I.createContext({getPrefixCls:_P,iconPrefixCls:nb}),{Consumer:dce}=dn,UP=`-ant-${Date.now()}-${Math.random()}`;function jP(e,t){const n={},r=(a,l)=>{let g=a.clone();return g=(l==null?void 0:l(g))||g,g.toRgbString()},i=(a,l)=>{const g=new xr(a),u=EI(g.toRgbString());n[`${l}-color`]=r(g),n[`${l}-color-disabled`]=u[1],n[`${l}-color-hover`]=u[4],n[`${l}-color-active`]=u[6],n[`${l}-color-outline`]=g.clone().setA(.2).toRgbString(),n[`${l}-color-deprecated-bg`]=u[0],n[`${l}-color-deprecated-border`]=u[2]};if(t.primaryColor){i(t.primaryColor,"primary");const a=new xr(t.primaryColor),l=EI(a.toRgbString());l.forEach((u,d)=>{n[`primary-${d+1}`]=u}),n["primary-color-deprecated-l-35"]=r(a,u=>u.lighten(35)),n["primary-color-deprecated-l-20"]=r(a,u=>u.lighten(20)),n["primary-color-deprecated-t-20"]=r(a,u=>u.tint(20)),n["primary-color-deprecated-t-50"]=r(a,u=>u.tint(50)),n["primary-color-deprecated-f-12"]=r(a,u=>u.setA(u.a*.12));const g=new xr(l[0]);n["primary-color-active-deprecated-f-30"]=r(g,u=>u.setA(u.a*.3)),n["primary-color-active-deprecated-d-02"]=r(g,u=>u.darken(2))}return t.successColor&&i(t.successColor,"success"),t.warningColor&&i(t.warningColor,"warning"),t.errorColor&&i(t.errorColor,"error"),t.infoColor&&i(t.infoColor,"info"),`
  :root {
    ${Object.keys(n).map(a=>`--${e}-${a}: ${n[a]};`).join(`
`)}
  }
  `.trim()}function QP(e,t){const n=jP(e,t);Qo()&&Vg(n,`${UP}-dynamic-theme`)}const _c=I.createContext(!1),_X=e=>{let{children:t,disabled:n}=e;const r=I.useContext(_c);return I.createElement(_c.Provider,{value:n??r},t)},FI=I.createContext(void 0),$P=e=>{let{children:t,size:n}=e;const r=I.useContext(FI);return I.createElement(FI.Provider,{value:n||r},t)};function qP(){const e=I.useContext(_c),t=I.useContext(FI);return{componentDisabled:e,componentSize:t}}var UX=Di(function e(){zi(this,e)}),jX="CALC_UNIT",eO=new RegExp(jX,"g");function vy(e){return typeof e=="number"?"".concat(e).concat(jX):e}var tO=function(e){Kg(n,e);var t=Lg(n);function n(r,i){var o;zi(this,n),o=t.call(this),fe(On(o),"result",""),fe(On(o),"unitlessCssVar",void 0),fe(On(o),"lowPriority",void 0);var a=wt(r);return o.unitlessCssVar=i,r instanceof n?o.result="(".concat(r.result,")"):a==="number"?o.result=vy(r):a==="string"&&(o.result=r),o}return Di(n,[{key:"add",value:function(i){return i instanceof n?this.result="".concat(this.result," + ").concat(i.getResult()):(typeof i=="number"||typeof i=="string")&&(this.result="".concat(this.result," + ").concat(vy(i))),this.lowPriority=!0,this}},{key:"sub",value:function(i){return i instanceof n?this.result="".concat(this.result," - ").concat(i.getResult()):(typeof i=="number"||typeof i=="string")&&(this.result="".concat(this.result," - ").concat(vy(i))),this.lowPriority=!0,this}},{key:"mul",value:function(i){return this.lowPriority&&(this.result="(".concat(this.result,")")),i instanceof n?this.result="".concat(this.result," * ").concat(i.getResult(!0)):(typeof i=="number"||typeof i=="string")&&(this.result="".concat(this.result," * ").concat(i)),this.lowPriority=!1,this}},{key:"div",value:function(i){return this.lowPriority&&(this.result="(".concat(this.result,")")),i instanceof n?this.result="".concat(this.result," / ").concat(i.getResult(!0)):(typeof i=="number"||typeof i=="string")&&(this.result="".concat(this.result," / ").concat(i)),this.lowPriority=!1,this}},{key:"getResult",value:function(i){return this.lowPriority||i?"(".concat(this.result,")"):this.result}},{key:"equal",value:function(i){var o=this,a=i||{},l=a.unit,g=!0;return typeof l=="boolean"?g=l:Array.from(this.unitlessCssVar).some(function(u){return o.result.includes(u)})&&(g=!1),this.result=this.result.replace(eO,g?"px":""),typeof this.lowPriority<"u"?"calc(".concat(this.result,")"):this.result}}]),n}(UX),nO=function(e){Kg(n,e);var t=Lg(n);function n(r){var i;return zi(this,n),i=t.call(this),fe(On(i),"result",0),r instanceof n?i.result=r.result:typeof r=="number"&&(i.result=r),i}return Di(n,[{key:"add",value:function(i){return i instanceof n?this.result+=i.result:typeof i=="number"&&(this.result+=i),this}},{key:"sub",value:function(i){return i instanceof n?this.result-=i.result:typeof i=="number"&&(this.result-=i),this}},{key:"mul",value:function(i){return i instanceof n?this.result*=i.result:typeof i=="number"&&(this.result*=i),this}},{key:"div",value:function(i){return i instanceof n?this.result/=i.result:typeof i=="number"&&(this.result/=i),this}},{key:"equal",value:function(){return this.result}}]),n}(UX),rO=function(t,n){var r=t==="css"?tO:nO;return function(i){return new r(i,n)}},Y5=function(t,n){return"".concat([n,t.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-"))};function ui(e){var t=I.useRef();t.current=e;var n=I.useCallback(function(){for(var r,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(r=t.current)===null||r===void 0?void 0:r.call.apply(r,[t].concat(o))},[]);return n}function KI(e){var t=I.useRef(!1),n=I.useState(e),r=xe(n,2),i=r[0],o=r[1];I.useEffect(function(){return t.current=!1,function(){t.current=!0}},[]);function a(l,g){g&&t.current||o(l)}return[i,a]}function Sy(e){return e!==void 0}function qi(e,t){var n=t||{},r=n.defaultValue,i=n.value,o=n.onChange,a=n.postState,l=KI(function(){return Sy(i)?i:Sy(r)?typeof r=="function"?r():r:typeof e=="function"?e():e}),g=xe(l,2),u=g[0],d=g[1],C=i!==void 0?i:u,f=a?a(C):C,m=ui(o),b=KI([C]),p=xe(b,2),y=p[0],S=p[1];m2(function(){var B=y[0];u!==B&&m(u,B)},[y]),m2(function(){Sy(i)||d(i)},[i]);var v=ui(function(B,W){d(B,W),S([C],W)});return[f,v]}function E5(e,t,n,r){var i=he({},t[e]);if(r!=null&&r.deprecatedTokens){var o=r.deprecatedTokens;o.forEach(function(l){var g=xe(l,2),u=g[0],d=g[1];if(i!=null&&i[u]||i!=null&&i[d]){var C;(C=i[d])!==null&&C!==void 0||(i[d]=i==null?void 0:i[u])}})}var a=he(he({},n),i);return Object.keys(a).forEach(function(l){a[l]===t[l]&&delete a[l]}),a}var QX=typeof CSSINJS_STATISTIC<"u",y2=!0;function Br(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!QX)return Object.assign.apply(Object,[{}].concat(t));y2=!1;var r={};return t.forEach(function(i){if(wt(i)==="object"){var o=Object.keys(i);o.forEach(function(a){Object.defineProperty(r,a,{configurable:!0,enumerable:!0,get:function(){return i[a]}})})}}),y2=!0,r}var F5={};function iO(){}var oO=function(t){var n,r=t,i=iO;return QX&&typeof Proxy<"u"&&(n=new Set,r=new Proxy(t,{get:function(a,l){if(y2){var g;(g=n)===null||g===void 0||g.add(l)}return a[l]}}),i=function(a,l){var g;F5[a]={global:Array.from(n),component:he(he({},(g=F5[a])===null||g===void 0?void 0:g.component),l)}}),{token:r,keys:n,flush:i}};function K5(e,t,n){if(typeof n=="function"){var r;return n(Br(t,(r=t[e])!==null&&r!==void 0?r:{}))}return n??{}}function aO(e){return e==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return"max(".concat(r.map(function(o){return Ve(o)}).join(","),")")},min:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return"min(".concat(r.map(function(o){return Ve(o)}).join(","),")")}}}var lO=1e3*60*10,sO=function(){function e(){zi(this,e),fe(this,"map",new Map),fe(this,"objectIDMap",new WeakMap),fe(this,"nextID",0),fe(this,"lastAccessBeat",new Map),fe(this,"accessBeat",0)}return Di(e,[{key:"set",value:function(n,r){this.clear();var i=this.getCompositeKey(n);this.map.set(i,r),this.lastAccessBeat.set(i,Date.now())}},{key:"get",value:function(n){var r=this.getCompositeKey(n),i=this.map.get(r);return this.lastAccessBeat.set(r,Date.now()),this.accessBeat+=1,i}},{key:"getCompositeKey",value:function(n){var r=this,i=n.map(function(o){return o&&wt(o)==="object"?"obj_".concat(r.getObjectID(o)):"".concat(wt(o),"_").concat(o)});return i.join("|")}},{key:"getObjectID",value:function(n){if(this.objectIDMap.has(n))return this.objectIDMap.get(n);var r=this.nextID;return this.objectIDMap.set(n,r),this.nextID+=1,r}},{key:"clear",value:function(){var n=this;if(this.accessBeat>1e4){var r=Date.now();this.lastAccessBeat.forEach(function(i,o){r-i>lO&&(n.map.delete(o),n.lastAccessBeat.delete(o))}),this.accessBeat=0}}}]),e}(),L5=new sO;function gO(e,t){return Ge.useMemo(function(){var n=L5.get(t);if(n)return n;var r=e();return L5.set(t,r),r},t)}var cO=function(){return{}};function uO(e){var t=e.useCSP,n=t===void 0?cO:t,r=e.useToken,i=e.usePrefix,o=e.getResetStyles,a=e.getCommonStyle,l=e.getCompUnitless;function g(f,m,b,p){var y=Array.isArray(f)?f[0]:f;function S(E){return"".concat(String(y)).concat(E.slice(0,1).toUpperCase()).concat(E.slice(1))}var v=(p==null?void 0:p.unitless)||{},B=typeof l=="function"?l(f):{},W=he(he({},B),{},fe({},S("zIndexPopup"),!0));Object.keys(v).forEach(function(E){W[S(E)]=v[E]});var J=he(he({},p),{},{unitless:W,prefixToken:S}),H=d(f,m,b,J),x=u(y,b,J);return function(E){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:E,w=H(E,F),V=xe(w,2),Y=V[1],M=x(F),L=xe(M,2),$=L[0],U=L[1];return[$,Y,U]}}function u(f,m,b){var p=b.unitless,y=b.injectStyle,S=y===void 0?!0:y,v=b.prefixToken,B=b.ignore,W=function(x){var E=x.rootCls,F=x.cssVar,w=F===void 0?{}:F,V=r(),Y=V.realToken;return AP({path:[f],prefix:w.prefix,key:w.key,unitless:p,ignore:B,token:Y,scope:E},function(){var M=K5(f,Y,m),L=E5(f,Y,M,{deprecatedTokens:b==null?void 0:b.deprecatedTokens});return Object.keys(M).forEach(function($){L[v($)]=L[$],delete L[$]}),L}),null},J=function(x){var E=r(),F=E.cssVar;return[function(w){return S&&F?Ge.createElement(Ge.Fragment,null,Ge.createElement(W,{rootCls:x,cssVar:F,component:f}),w):w},F==null?void 0:F.key]};return J}function d(f,m,b){var p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},y=Array.isArray(f)?f:[f,f],S=xe(y,1),v=S[0],B=y.join("-"),W=e.layer||{name:"antd"};return function(J){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:J,x=r(),E=x.theme,F=x.realToken,w=x.hashId,V=x.token,Y=x.cssVar,M=i(),L=M.rootPrefixCls,$=M.iconPrefixCls,U=n(),_=Y?"css":"js",P=gO(function(){var z=new Set;return Y&&Object.keys(p.unitless||{}).forEach(function(Q){z.add(eA(Q,Y.prefix)),z.add(eA(Q,Y5(v,Y.prefix)))}),rO(_,z)},[_,v,Y==null?void 0:Y.prefix]),ee=aO(_),j=ee.max,O=ee.min,X={theme:E,token:V,hashId:w,nonce:function(){return U.nonce},clientOnly:p.clientOnly,layer:W,order:p.order||-999};typeof o=="function"&&p2(he(he({},X),{},{clientOnly:!1,path:["Shared",L]}),function(){return o(V,{prefix:{rootPrefixCls:L,iconPrefixCls:$},csp:U})});var D=p2(he(he({},X),{},{path:[B,J,$]}),function(){if(p.injectStyle===!1)return[];var z=oO(V),Q=z.token,ne=z.flush,ce=K5(v,F,b),se=".".concat(J),ue=E5(v,F,ce,{deprecatedTokens:p.deprecatedTokens});Y&&ce&&wt(ce)==="object"&&Object.keys(ce).forEach(function(me){ce[me]="var(".concat(eA(me,Y5(v,Y.prefix)),")")});var ve=Br(Q,{componentCls:se,prefixCls:J,iconCls:".".concat($),antCls:".".concat(L),calc:P,max:j,min:O},Y?ce:ue),Ae=m(ve,{hashId:w,prefixCls:J,rootPrefixCls:L,iconPrefixCls:$});ne(v,ue);var be=typeof a=="function"?a(ve,J,H,p.resetFont):null;return[p.resetStyle===!1?null:be,Ae]});return[D,w]}}function C(f,m,b){var p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},y=d(f,m,b,he({resetStyle:!1,order:-998},p)),S=function(B){var W=B.prefixCls,J=B.rootCls,H=J===void 0?W:J;return y(W,H),null};return S}return{genStyleHooks:g,genSubStyleComponent:C,genComponentStyleHook:d}}const LI=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"],dO="5.23.3";function Zy(e){return e>=0&&e<=255}function Gh(e,t){const{r:n,g:r,b:i,a:o}=new xr(e).toRgb();if(o<1)return e;const{r:a,g:l,b:g}=new xr(t).toRgb();for(let u=.01;u<=1;u+=.01){const d=Math.round((n-a*(1-u))/u),C=Math.round((r-l*(1-u))/u),f=Math.round((i-g*(1-u))/u);if(Zy(d)&&Zy(C)&&Zy(f))return new xr({r:d,g:C,b:f,a:Math.round(u*100)/100}).toRgbString()}return new xr({r:n,g:r,b:i,a:1}).toRgbString()}var IO=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function $X(e){const{override:t}=e,n=IO(e,["override"]),r=Object.assign({},t);Object.keys(Tf).forEach(f=>{delete r[f]});const i=Object.assign(Object.assign({},n),r),o=480,a=576,l=768,g=992,u=1200,d=1600;if(i.motion===!1){const f="0s";i.motionDurationFast=f,i.motionDurationMid=f,i.motionDurationSlow=f}return Object.assign(Object.assign(Object.assign({},i),{colorFillContent:i.colorFillSecondary,colorFillContentHover:i.colorFill,colorFillAlter:i.colorFillQuaternary,colorBgContainerDisabled:i.colorFillTertiary,colorBorderBg:i.colorBgContainer,colorSplit:Gh(i.colorBorderSecondary,i.colorBgContainer),colorTextPlaceholder:i.colorTextQuaternary,colorTextDisabled:i.colorTextQuaternary,colorTextHeading:i.colorText,colorTextLabel:i.colorTextSecondary,colorTextDescription:i.colorTextTertiary,colorTextLightSolid:i.colorWhite,colorHighlight:i.colorError,colorBgTextHover:i.colorFillSecondary,colorBgTextActive:i.colorFill,colorIcon:i.colorTextTertiary,colorIconHover:i.colorText,colorErrorOutline:Gh(i.colorErrorBg,i.colorBgContainer),colorWarningOutline:Gh(i.colorWarningBg,i.colorBgContainer),fontSizeIcon:i.fontSizeSM,lineWidthFocus:i.lineWidth*3,lineWidth:i.lineWidth,controlOutlineWidth:i.lineWidth*2,controlInteractiveSize:i.controlHeight/2,controlItemBgHover:i.colorFillTertiary,controlItemBgActive:i.colorPrimaryBg,controlItemBgActiveHover:i.colorPrimaryBgHover,controlItemBgActiveDisabled:i.colorFill,controlTmpOutline:i.colorFillQuaternary,controlOutline:Gh(i.colorPrimaryBg,i.colorBgContainer),lineType:i.lineType,borderRadius:i.borderRadius,borderRadiusXS:i.borderRadiusXS,borderRadiusSM:i.borderRadiusSM,borderRadiusLG:i.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:i.sizeXXS,paddingXS:i.sizeXS,paddingSM:i.sizeSM,padding:i.size,paddingMD:i.sizeMD,paddingLG:i.sizeLG,paddingXL:i.sizeXL,paddingContentHorizontalLG:i.sizeLG,paddingContentVerticalLG:i.sizeMS,paddingContentHorizontal:i.sizeMS,paddingContentVertical:i.sizeSM,paddingContentHorizontalSM:i.size,paddingContentVerticalSM:i.sizeXS,marginXXS:i.sizeXXS,marginXS:i.sizeXS,marginSM:i.sizeSM,margin:i.size,marginMD:i.sizeMD,marginLG:i.sizeLG,marginXL:i.sizeXL,marginXXL:i.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:o,screenXSMin:o,screenXSMax:a-1,screenSM:a,screenSMMin:a,screenSMMax:l-1,screenMD:l,screenMDMin:l,screenMDMax:g-1,screenLG:g,screenLGMin:g,screenLGMax:u-1,screenXL:u,screenXLMin:u,screenXLMax:d-1,screenXXL:d,screenXXLMin:d,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new xr("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new xr("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new xr("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),r)}var M5=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const qX={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0,opacityImage:!0},CO={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},fO={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},e3=(e,t,n)=>{const r=n.getDerivativeToken(e),{override:i}=t,o=M5(t,["override"]);let a=Object.assign(Object.assign({},r),{override:i});return a=$X(a),o&&Object.entries(o).forEach(l=>{let[g,u]=l;const{theme:d}=u,C=M5(u,["theme"]);let f=C;d&&(f=e3(Object.assign(Object.assign({},a),C),{override:C},d)),a[g]=f}),a};function Ia(){const{token:e,hashed:t,theme:n,override:r,cssVar:i}=Ge.useContext(OX),o=`${dO}-${t||""}`,a=n||PX,[l,g,u]=DD(a,[Tf,e],{salt:o,override:r,getComputedToken:e3,formatToken:$X,cssVar:i&&{prefix:i.prefix,key:i.key,unitless:qX,ignore:CO,preserve:fO}});return[a,u,t?g:"",l,i]}const rd={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},Ca=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{boxSizing:"border-box",margin:0,padding:0,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,listStyle:"none",fontFamily:t?"inherit":e.fontFamily}},vm=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),Uc=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),mO=e=>({a:{color:e.colorLink,textDecoration:e.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive},"&:active, &:hover":{textDecoration:e.linkHoverDecoration,outline:0},"&:focus":{textDecoration:e.linkFocusDecoration,outline:0},"&[disabled]":{color:e.colorTextDisabled,cursor:"not-allowed"}}}),hO=(e,t,n,r)=>{const i=`[class^="${t}"], [class*=" ${t}"]`,o=n?`.${n}`:i,a={boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}};let l={};return r!==!1&&(l={fontFamily:e.fontFamily,fontSize:e.fontSize}),{[o]:Object.assign(Object.assign(Object.assign({},l),a),{[i]:a})}},MI=(e,t)=>({outline:`${Ve(e.lineWidthFocus)} solid ${e.colorPrimaryBorder}`,outlineOffset:t??1,transition:"outline-offset 0s, outline 0s"}),Ds=(e,t)=>({"&:focus-visible":Object.assign({},MI(e,t))}),t3=e=>({[`.${e}`]:Object.assign(Object.assign({},vm()),{[`.${e} .${e}-icon`]:{display:"block"}})}),n3=e=>Object.assign(Object.assign({color:e.colorLink,textDecoration:e.linkDecoration,outline:"none",cursor:"pointer",transition:`all ${e.motionDurationSlow}`,border:0,padding:0,background:"none",userSelect:"none"},Ds(e)),{"&:focus, &:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive}}),{genStyleHooks:Gi,genComponentStyleHook:AO,genSubStyleComponent:NZ}=uO({usePrefix:()=>{const{getPrefixCls:e,iconPrefixCls:t}=I.useContext(dn);return{rootPrefixCls:e(),iconPrefixCls:t}},useToken:()=>{const[e,t,n,r,i]=Ia();return{theme:e,realToken:t,hashId:n,token:r,cssVar:i}},useCSP:()=>{const{csp:e}=I.useContext(dn);return e??{}},getResetStyles:(e,t)=>{var n;return[{"&":mO(e)},t3((n=t==null?void 0:t.prefix.iconPrefixCls)!==null&&n!==void 0?n:nb)]},getCommonStyle:hO,getCompUnitless:()=>qX});function pO(e,t){return LI.reduce((n,r)=>{const i=e[`${r}1`],o=e[`${r}3`],a=e[`${r}6`],l=e[`${r}7`];return Object.assign(Object.assign({},n),t(r,{lightColor:i,lightBorderColor:o,darkColor:a,textColor:l}))},{})}const bO=(e,t)=>{const[n,r]=Ia();return p2({token:r,hashId:"",path:["ant-design-icons",e],nonce:()=>t==null?void 0:t.nonce,layer:{name:"antd"}},()=>[t3(e)])},yO=Object.assign({},RI),{useId:T5}=yO,vO=()=>"",SO=typeof T5>"u"?vO:T5;function ZO(e,t,n){var r;tb();const i=e||{},o=i.inherit===!1||!t?Object.assign(Object.assign({},b2),{hashed:(r=t==null?void 0:t.hashed)!==null&&r!==void 0?r:b2.hashed,cssVar:t==null?void 0:t.cssVar}):t,a=SO();return bm(()=>{var l,g;if(!e)return t;const u=Object.assign({},o.components);Object.keys(e.components||{}).forEach(f=>{u[f]=Object.assign(Object.assign({},u[f]),e.components[f])});const d=`css-var-${a.replace(/:/g,"")}`,C=((l=i.cssVar)!==null&&l!==void 0?l:o.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:n==null?void 0:n.prefixCls},typeof o.cssVar=="object"?o.cssVar:{}),typeof i.cssVar=="object"?i.cssVar:{}),{key:typeof i.cssVar=="object"&&((g=i.cssVar)===null||g===void 0?void 0:g.key)||d});return Object.assign(Object.assign(Object.assign({},o),i),{token:Object.assign(Object.assign({},o.token),i.token),components:u,cssVar:C})},[i,o],(l,g)=>l.some((u,d)=>{const C=g[d];return!Lf(u,C,!0)}))}var GO=["children"],r3=I.createContext({});function BO(e){var t=e.children,n=Wn(e,GO);return I.createElement(r3.Provider,{value:n},t)}var RO=function(e){Kg(n,e);var t=Lg(n);function n(){return zi(this,n),t.apply(this,arguments)}return Di(n,[{key:"render",value:function(){return this.props.children}}]),n}(I.Component);function wO(e){var t=I.useReducer(function(l){return l+1},0),n=xe(t,2),r=n[1],i=I.useRef(e),o=ui(function(){return i.current}),a=ui(function(l){i.current=typeof l=="function"?l(i.current):l,r()});return[o,a]}var Vc="none",Bh="appear",Rh="enter",wh="leave",z5="none",Ul="prepare",sI="start",gI="active",XZ="end",i3="prepared";function D5(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit".concat(e)]="webkit".concat(t),n["Moz".concat(e)]="moz".concat(t),n["ms".concat(e)]="MS".concat(t),n["O".concat(e)]="o".concat(t.toLowerCase()),n}function WO(e,t){var n={animationend:D5("Animation","AnimationEnd"),transitionend:D5("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete n.animationend.animation,"TransitionEvent"in t||delete n.transitionend.transition),n}var VO=WO(Qo(),typeof window<"u"?window:{}),o3={};if(Qo()){var kO=document.createElement("div");o3=kO.style}var Wh={};function a3(e){if(Wh[e])return Wh[e];var t=VO[e];if(t)for(var n=Object.keys(t),r=n.length,i=0;i<r;i+=1){var o=n[i];if(Object.prototype.hasOwnProperty.call(t,o)&&o in o3)return Wh[e]=t[o],Wh[e]}return""}var l3=a3("animationend"),s3=a3("transitionend"),g3=!!(l3&&s3),P5=l3||"animationend",O5=s3||"transitionend";function _5(e,t){if(!e)return null;if(wt(e)==="object"){var n=t.replace(/-\w/g,function(r){return r[1].toUpperCase()});return e[n]}return"".concat(e,"-").concat(t)}const NO=function(e){var t=I.useRef();function n(i){i&&(i.removeEventListener(O5,e),i.removeEventListener(P5,e))}function r(i){t.current&&t.current!==i&&n(t.current),i&&i!==t.current&&(i.addEventListener(O5,e),i.addEventListener(P5,e),t.current=i)}return I.useEffect(function(){return function(){n(t.current)}},[]),[r,n]};var c3=Qo()?I.useLayoutEffect:I.useEffect;const XO=function(){var e=I.useRef(null);function t(){Jr.cancel(e.current)}function n(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;t();var o=Jr(function(){i<=1?r({isCanceled:function(){return o!==e.current}}):n(r,i-1)});e.current=o}return I.useEffect(function(){return function(){t()}},[]),[n,t]};var JO=[Ul,sI,gI,XZ],xO=[Ul,i3],u3=!1,HO=!0;function d3(e){return e===gI||e===XZ}const YO=function(e,t,n){var r=KI(z5),i=xe(r,2),o=i[0],a=i[1],l=XO(),g=xe(l,2),u=g[0],d=g[1];function C(){a(Ul,!0)}var f=t?xO:JO;return c3(function(){if(o!==z5&&o!==XZ){var m=f.indexOf(o),b=f[m+1],p=n(o);p===u3?a(b,!0):b&&u(function(y){function S(){y.isCanceled()||a(b,!0)}p===!0?S():Promise.resolve(p).then(S)})}},[e,o]),I.useEffect(function(){return function(){d()}},[]),[C,o]};function EO(e,t,n,r){var i=r.motionEnter,o=i===void 0?!0:i,a=r.motionAppear,l=a===void 0?!0:a,g=r.motionLeave,u=g===void 0?!0:g,d=r.motionDeadline,C=r.motionLeaveImmediately,f=r.onAppearPrepare,m=r.onEnterPrepare,b=r.onLeavePrepare,p=r.onAppearStart,y=r.onEnterStart,S=r.onLeaveStart,v=r.onAppearActive,B=r.onEnterActive,W=r.onLeaveActive,J=r.onAppearEnd,H=r.onEnterEnd,x=r.onLeaveEnd,E=r.onVisibleChanged,F=KI(),w=xe(F,2),V=w[0],Y=w[1],M=wO(Vc),L=xe(M,2),$=L[0],U=L[1],_=KI(null),P=xe(_,2),ee=P[0],j=P[1],O=$(),X=I.useRef(!1),D=I.useRef(null);function z(){return n()}var Q=I.useRef(!1);function ne(){U(Vc),j(null,!0)}var ce=ui(function(He){var Le=$();if(Le!==Vc){var Ye=z();if(!(He&&!He.deadline&&He.target!==Ye)){var Pe=Q.current,$e;Le===Bh&&Pe?$e=J==null?void 0:J(Ye,He):Le===Rh&&Pe?$e=H==null?void 0:H(Ye,He):Le===wh&&Pe&&($e=x==null?void 0:x(Ye,He)),Pe&&$e!==!1&&ne()}}}),se=NO(ce),ue=xe(se,1),ve=ue[0],Ae=function(Le){switch(Le){case Bh:return fe(fe(fe({},Ul,f),sI,p),gI,v);case Rh:return fe(fe(fe({},Ul,m),sI,y),gI,B);case wh:return fe(fe(fe({},Ul,b),sI,S),gI,W);default:return{}}},be=I.useMemo(function(){return Ae(O)},[O]),me=YO(O,!e,function(He){if(He===Ul){var Le=be[Ul];return Le?Le(z()):u3}if(ae in be){var Ye;j(((Ye=be[ae])===null||Ye===void 0?void 0:Ye.call(be,z(),null))||null)}return ae===gI&&O!==Vc&&(ve(z()),d>0&&(clearTimeout(D.current),D.current=setTimeout(function(){ce({deadline:!0})},d))),ae===i3&&ne(),HO}),Ne=xe(me,2),Ie=Ne[0],ae=Ne[1],Ee=d3(ae);Q.current=Ee;var Fe=I.useRef(null);c3(function(){if(!(X.current&&Fe.current===t)){Y(t);var He=X.current;X.current=!0;var Le;!He&&t&&l&&(Le=Bh),He&&t&&o&&(Le=Rh),(He&&!t&&u||!He&&C&&!t&&u)&&(Le=wh);var Ye=Ae(Le);Le&&(e||Ye[Ul])?(U(Le),Ie()):U(Vc),Fe.current=t}},[t]),I.useEffect(function(){(O===Bh&&!l||O===Rh&&!o||O===wh&&!u)&&U(Vc)},[l,o,u]),I.useEffect(function(){return function(){X.current=!1,clearTimeout(D.current)}},[]);var ke=I.useRef(!1);I.useEffect(function(){V&&(ke.current=!0),V!==void 0&&O===Vc&&((ke.current||V)&&(E==null||E(V)),ke.current=!0)},[V,O]);var ze=ee;return be[Ul]&&ae===sI&&(ze=he({transition:"none"},ze)),[O,ae,ze,V??t]}function FO(e){var t=e;wt(e)==="object"&&(t=e.transitionSupport);function n(i,o){return!!(i.motionName&&t&&o!==!1)}var r=I.forwardRef(function(i,o){var a=i.visible,l=a===void 0?!0:a,g=i.removeOnLeave,u=g===void 0?!0:g,d=i.forceRender,C=i.children,f=i.motionName,m=i.leavedClassName,b=i.eventProps,p=I.useContext(r3),y=p.motion,S=n(i,y),v=I.useRef(),B=I.useRef();function W(){try{return v.current instanceof HTMLElement?v.current:Af(B.current)}catch{return null}}var J=EO(S,l,W,i),H=xe(J,4),x=H[0],E=H[1],F=H[2],w=H[3],V=I.useRef(w);w&&(V.current=!0);var Y=I.useCallback(function(P){v.current=P,bZ(o,P)},[o]),M,L=he(he({},b),{},{visible:l});if(!C)M=null;else if(x===Vc)w?M=C(he({},L),Y):!u&&V.current&&m?M=C(he(he({},L),{},{className:m}),Y):d||!u&&!m?M=C(he(he({},L),{},{style:{display:"none"}}),Y):M=null;else{var $;E===Ul?$="prepare":d3(E)?$="active":E===sI&&($="start");var U=_5(f,"".concat(x,"-").concat($));M=C(he(he({},L),{},{className:Re(_5(f,x),fe(fe({},U,U&&$),f,typeof f=="string")),style:F}),Y)}if(I.isValidElement(M)&&au(M)){var _=cd(M);_||(M=I.cloneElement(M,{ref:Y}))}return I.createElement(RO,{ref:B},M)});return r.displayName="CSSMotion",r}const is=FO(g3);var v2="add",S2="keep",Z2="remove",Gy="removed";function KO(e){var t;return e&&wt(e)==="object"&&"key"in e?t=e:t={key:e},he(he({},t),{},{key:String(t.key)})}function G2(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return e.map(KO)}function LO(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=[],r=0,i=t.length,o=G2(e),a=G2(t);o.forEach(function(u){for(var d=!1,C=r;C<i;C+=1){var f=a[C];if(f.key===u.key){r<C&&(n=n.concat(a.slice(r,C).map(function(m){return he(he({},m),{},{status:v2})})),r=C),n.push(he(he({},f),{},{status:S2})),r+=1,d=!0;break}}d||n.push(he(he({},u),{},{status:Z2}))}),r<i&&(n=n.concat(a.slice(r).map(function(u){return he(he({},u),{},{status:v2})})));var l={};n.forEach(function(u){var d=u.key;l[d]=(l[d]||0)+1});var g=Object.keys(l).filter(function(u){return l[u]>1});return g.forEach(function(u){n=n.filter(function(d){var C=d.key,f=d.status;return C!==u||f!==Z2}),n.forEach(function(d){d.key===u&&(d.status=S2)})}),n}var MO=["component","children","onVisibleChanged","onAllRemoved"],TO=["status"],zO=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function DO(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:is,n=function(r){Kg(o,r);var i=Lg(o);function o(){var a;zi(this,o);for(var l=arguments.length,g=new Array(l),u=0;u<l;u++)g[u]=arguments[u];return a=i.call.apply(i,[this].concat(g)),fe(On(a),"state",{keyEntities:[]}),fe(On(a),"removeKey",function(d){a.setState(function(C){var f=C.keyEntities.map(function(m){return m.key!==d?m:he(he({},m),{},{status:Gy})});return{keyEntities:f}},function(){var C=a.state.keyEntities,f=C.filter(function(m){var b=m.status;return b!==Gy}).length;f===0&&a.props.onAllRemoved&&a.props.onAllRemoved()})}),a}return Di(o,[{key:"render",value:function(){var l=this,g=this.state.keyEntities,u=this.props,d=u.component,C=u.children,f=u.onVisibleChanged;u.onAllRemoved;var m=Wn(u,MO),b=d||I.Fragment,p={};return zO.forEach(function(y){p[y]=m[y],delete m[y]}),delete m.keys,I.createElement(b,m,g.map(function(y,S){var v=y.status,B=Wn(y,TO),W=v===v2||v===S2;return I.createElement(t,lt({},p,{key:B.key,visible:W,eventProps:B,onVisibleChanged:function(H){f==null||f(H,{key:B.key}),H||l.removeKey(B.key)}}),function(J,H){return C(he(he({},J),{},{index:S}),H)})}))}}],[{key:"getDerivedStateFromProps",value:function(l,g){var u=l.keys,d=g.keyEntities,C=G2(u),f=LO(d,C);return{keyEntities:f.filter(function(m){var b=d.find(function(p){var y=p.key;return m.key===y});return!(b&&b.status===Gy&&m.status===Z2)})}}}]),o}(I.Component);return fe(n,"defaultProps",{component:"div"}),n}const PO=DO(g3);function OO(e){const{children:t}=e,[,n]=Ia(),{motion:r}=n,i=I.useRef(!1);return i.current=i.current||r===!1,i.current?I.createElement(BO,{motion:r},t):t}const _O=()=>null;var UO=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const jO=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"];let Ap,I3,C3,f3;function cA(){return Ap||Of}function QO(){return I3||nb}function $O(e){return Object.keys(e).some(t=>t.endsWith("Color"))}const qO=e=>{const{prefixCls:t,iconPrefixCls:n,theme:r,holderRender:i}=e;t!==void 0&&(Ap=t),n!==void 0&&(I3=n),"holderRender"in e&&(f3=i),r&&($O(r)?QP(cA(),r):C3=r)},m3=()=>({getPrefixCls:(e,t)=>t||(e?`${cA()}-${e}`:cA()),getIconPrefixCls:QO,getRootPrefixCls:()=>Ap||cA(),getTheme:()=>C3,holderRender:f3}),e_=e=>{const{children:t,csp:n,autoInsertSpaceInButton:r,alert:i,anchor:o,form:a,locale:l,componentSize:g,direction:u,space:d,splitter:C,virtual:f,dropdownMatchSelectWidth:m,popupMatchSelectWidth:b,popupOverflow:p,legacyLocale:y,parentContext:S,iconPrefixCls:v,theme:B,componentDisabled:W,segmented:J,statistic:H,spin:x,calendar:E,carousel:F,cascader:w,collapse:V,typography:Y,checkbox:M,descriptions:L,divider:$,drawer:U,skeleton:_,steps:P,image:ee,layout:j,list:O,mentions:X,modal:D,progress:z,result:Q,slider:ne,breadcrumb:ce,menu:se,pagination:ue,input:ve,textArea:Ae,empty:be,badge:me,radio:Ne,rate:Ie,switch:ae,transfer:Ee,avatar:Fe,message:ke,tag:ze,table:He,card:Le,tabs:Ye,timeline:Pe,timePicker:$e,upload:ot,notification:Ct,tree:pt,colorPicker:it,datePicker:It,rangePicker:_e,flex:Ot,wave:Qe,dropdown:st,warning:St,tour:dt,tooltip:Wt,popover:Et,popconfirm:hn,floatButtonGroup:mn,variant:Xn,inputNumber:Mn,treeSelect:In}=e,Jt=I.useCallback((kt,Tt)=>{const{prefixCls:Jn}=e;if(Tt)return Tt;const cn=Jn||S.getPrefixCls("");return kt?`${cn}-${kt}`:cn},[S.getPrefixCls,e.prefixCls]),jt=v||S.iconPrefixCls||nb,ln=n||S.csp;bO(jt,ln);const Vt=ZO(B,S.theme,{prefixCls:Jt("")}),Rt={csp:ln,autoInsertSpaceInButton:r,alert:i,anchor:o,locale:l||y,direction:u,space:d,splitter:C,virtual:f,popupMatchSelectWidth:b??m,popupOverflow:p,getPrefixCls:Jt,iconPrefixCls:jt,theme:Vt,segmented:J,statistic:H,spin:x,calendar:E,carousel:F,cascader:w,collapse:V,typography:Y,checkbox:M,descriptions:L,divider:$,drawer:U,skeleton:_,steps:P,image:ee,input:ve,textArea:Ae,layout:j,list:O,mentions:X,modal:D,progress:z,result:Q,slider:ne,breadcrumb:ce,menu:se,pagination:ue,empty:be,badge:me,radio:Ne,rate:Ie,switch:ae,transfer:Ee,avatar:Fe,message:ke,tag:ze,table:He,card:Le,tabs:Ye,timeline:Pe,timePicker:$e,upload:ot,notification:Ct,tree:pt,colorPicker:it,datePicker:It,rangePicker:_e,flex:Ot,wave:Qe,dropdown:st,warning:St,tour:dt,tooltip:Wt,popover:Et,popconfirm:hn,floatButtonGroup:mn,variant:Xn,inputNumber:Mn,treeSelect:In},yt=Object.assign({},S);Object.keys(Rt).forEach(kt=>{Rt[kt]!==void 0&&(yt[kt]=Rt[kt])}),jO.forEach(kt=>{const Tt=e[kt];Tt&&(yt[kt]=Tt)}),typeof r<"u"&&(yt.button=Object.assign({autoInsertSpace:r},yt.button));const ht=bm(()=>yt,yt,(kt,Tt)=>{const Jn=Object.keys(kt),cn=Object.keys(Tt);return Jn.length!==cn.length||Jn.some(yn=>kt[yn]!==Tt[yn])}),{layer:sn}=I.useContext(ym),ut=I.useMemo(()=>({prefixCls:jt,csp:ln,layer:sn?"antd":void 0}),[jt,ln,sn]);let ct=I.createElement(I.Fragment,null,I.createElement(_O,{dropdownMatchSelectWidth:m}),t);const vt=I.useMemo(()=>{var kt,Tt,Jn,cn;return lI(((kt=nd.Form)===null||kt===void 0?void 0:kt.defaultValidateMessages)||{},((Jn=(Tt=ht.locale)===null||Tt===void 0?void 0:Tt.Form)===null||Jn===void 0?void 0:Jn.defaultValidateMessages)||{},((cn=ht.form)===null||cn===void 0?void 0:cn.validateMessages)||{},(a==null?void 0:a.validateMessages)||{})},[ht,a==null?void 0:a.validateMessages]);Object.keys(vt).length>0&&(ct=I.createElement(ZP.Provider,{value:vt},ct)),l&&(ct=I.createElement(WP,{locale:l,_ANT_MARK__:wP},ct)),ct=I.createElement(VZ.Provider,{value:ut},ct),g&&(ct=I.createElement($P,{size:g},ct)),ct=I.createElement(OO,null,ct);const Bt=I.useMemo(()=>{const kt=Vt||{},{algorithm:Tt,token:Jn,components:cn,cssVar:yn}=kt,qt=UO(kt,["algorithm","token","components","cssVar"]),Vn=Tt&&(!Array.isArray(Tt)||Tt.length>0)?C2(Tt):PX,En={};Object.entries(cn||{}).forEach(ar=>{let[Ln,Pn]=ar;const At=Object.assign({},Pn);"algorithm"in At&&(At.algorithm===!0?At.theme=Vn:(Array.isArray(At.algorithm)||typeof At.algorithm=="function")&&(At.theme=C2(At.algorithm)),delete At.algorithm),En[Ln]=At});const Dn=Object.assign(Object.assign({},Tf),Jn);return Object.assign(Object.assign({},qt),{theme:Vn,token:Dn,components:En,override:Object.assign({override:Dn},En),cssVar:yn})},[Vt]);return B&&(ct=I.createElement(OX.Provider,{value:Bt},ct)),ht.warning&&(ct=I.createElement(SP.Provider,{value:ht.warning},ct)),W!==void 0&&(ct=I.createElement(_X,{disabled:W},ct)),I.createElement(dn.Provider,{value:ht},ct)},Mg=e=>{const t=I.useContext(dn),n=I.useContext(kZ);return I.createElement(e_,Object.assign({parentContext:t,legacyLocale:n},e))};Mg.ConfigContext=dn;Mg.SizeContext=FI;Mg.config=qO;Mg.useConfig=qP;Object.defineProperty(Mg,"SizeContext",{get:()=>FI});var t_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};function h3(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}function n_(e){return h3(e)instanceof ShadowRoot}function pp(e){return n_(e)?h3(e):null}function r_(e){return e.replace(/-(.)/g,function(t,n){return n.toUpperCase()})}function i_(e,t){wo(e,"[@ant-design/icons] ".concat(t))}function U5(e){return wt(e)==="object"&&typeof e.name=="string"&&typeof e.theme=="string"&&(wt(e.icon)==="object"||typeof e.icon=="function")}function j5(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(e).reduce(function(t,n){var r=e[n];switch(n){case"class":t.className=r,delete t.class;break;default:delete t[n],t[r_(n)]=r}return t},{})}function B2(e,t,n){return n?Ge.createElement(e.tag,he(he({key:t},j5(e.attrs)),n),(e.children||[]).map(function(r,i){return B2(r,"".concat(t,"-").concat(e.tag,"-").concat(i))})):Ge.createElement(e.tag,he({key:t},j5(e.attrs)),(e.children||[]).map(function(r,i){return B2(r,"".concat(t,"-").concat(e.tag,"-").concat(i))}))}function A3(e){return EI(e)[0]}function p3(e){return e?Array.isArray(e)?e:[e]:[]}var o_=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,a_=function(t){var n=I.useContext(VZ),r=n.csp,i=n.prefixCls,o=n.layer,a=o_;i&&(a=a.replace(/anticon/g,i)),o&&(a="@layer ".concat(o,` {
`).concat(a,`
}`)),I.useEffect(function(){var l=t.current,g=pp(l);Vg(a,"@ant-design-icons",{prepend:!0,csp:r,attachTo:g})},[])},l_=["icon","className","onClick","style","primaryColor","secondaryColor"],bf={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function s_(e){var t=e.primaryColor,n=e.secondaryColor;bf.primaryColor=t,bf.secondaryColor=n||A3(t),bf.calculated=!!n}function g_(){return he({},bf)}var oC=function(t){var n=t.icon,r=t.className,i=t.onClick,o=t.style,a=t.primaryColor,l=t.secondaryColor,g=Wn(t,l_),u=I.useRef(),d=bf;if(a&&(d={primaryColor:a,secondaryColor:l||A3(a)}),a_(u),i_(U5(n),"icon should be icon definiton, but got ".concat(n)),!U5(n))return null;var C=n;return C&&typeof C.icon=="function"&&(C=he(he({},C),{},{icon:C.icon(d.primaryColor,d.secondaryColor)})),B2(C.icon,"svg-".concat(C.name),he(he({className:r,onClick:i,style:o,"data-icon":C.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},g),{},{ref:u}))};oC.displayName="IconReact";oC.getTwoToneColors=g_;oC.setTwoToneColors=s_;function b3(e){var t=p3(e),n=xe(t,2),r=n[0],i=n[1];return oC.setTwoToneColors({primaryColor:r,secondaryColor:i})}function c_(){var e=oC.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor}var u_=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];b3(Df.primary);var er=I.forwardRef(function(e,t){var n=e.className,r=e.icon,i=e.spin,o=e.rotate,a=e.tabIndex,l=e.onClick,g=e.twoToneColor,u=Wn(e,u_),d=I.useContext(VZ),C=d.prefixCls,f=C===void 0?"anticon":C,m=d.rootClassName,b=Re(m,f,fe(fe({},"".concat(f,"-").concat(r.name),!!r.name),"".concat(f,"-spin"),!!i||r.name==="loading"),n),p=a;p===void 0&&l&&(p=-1);var y=o?{msTransform:"rotate(".concat(o,"deg)"),transform:"rotate(".concat(o,"deg)")}:void 0,S=p3(g),v=xe(S,2),B=v[0],W=v[1];return I.createElement("span",lt({role:"img","aria-label":r.name},u,{ref:t,tabIndex:p,onClick:l,className:b}),I.createElement(oC,{icon:r,primaryColor:B,secondaryColor:W,style:y}))});er.displayName="AntdIcon";er.getTwoToneColor=c_;er.setTwoToneColor=b3;var d_=function(t,n){return I.createElement(er,lt({},t,{ref:n,icon:t_}))},y3=I.forwardRef(d_),I_={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"},C_=function(t,n){return I.createElement(er,lt({},t,{ref:n,icon:I_}))},rb=I.forwardRef(C_),f_={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"},m_=function(t,n){return I.createElement(er,lt({},t,{ref:n,icon:f_}))},aC=I.forwardRef(m_),h_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},A_=function(t,n){return I.createElement(er,lt({},t,{ref:n,icon:h_}))},v3=I.forwardRef(A_),p_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},b_=function(t,n){return I.createElement(er,lt({},t,{ref:n,icon:p_}))},S3=I.forwardRef(b_),y_=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,v_=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,S_="".concat(y_," ").concat(v_).split(/[\s\n]+/),Z_="aria-",G_="data-";function Q5(e,t){return e.indexOf(t)===0}function tl(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n;t===!1?n={aria:!0,data:!0,attr:!0}:t===!0?n={aria:!0}:n=he({},t);var r={};return Object.keys(e).forEach(function(i){(n.aria&&(i==="role"||Q5(i,Z_))||n.data&&Q5(i,G_)||n.attr&&S_.includes(i))&&(r[i]=e[i])}),r}function Z3(e){return e&&Ge.isValidElement(e)&&e.type===Ge.Fragment}const B_=(e,t,n)=>Ge.isValidElement(e)?Ge.cloneElement(e,typeof n=="function"?n(e.props||{}):n):t;function os(e,t){return B_(e,e,t)}const gs=e=>{const[,,,,t]=Ia();return t?`${e}-css-var`:""};var Mt={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,CAPS_LOCK:20,ESC:27,SPACE:32,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,N:78,P:80,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,EQUALS:187,WIN_KEY:224},G3=I.forwardRef(function(e,t){var n=e.prefixCls,r=e.style,i=e.className,o=e.duration,a=o===void 0?4.5:o,l=e.showProgress,g=e.pauseOnHover,u=g===void 0?!0:g,d=e.eventKey,C=e.content,f=e.closable,m=e.closeIcon,b=m===void 0?"x":m,p=e.props,y=e.onClick,S=e.onNoticeClose,v=e.times,B=e.hovering,W=I.useState(!1),J=xe(W,2),H=J[0],x=J[1],E=I.useState(0),F=xe(E,2),w=F[0],V=F[1],Y=I.useState(0),M=xe(Y,2),L=M[0],$=M[1],U=B||H,_=a>0&&l,P=function(){S(d)},ee=function(Q){(Q.key==="Enter"||Q.code==="Enter"||Q.keyCode===Mt.ENTER)&&P()};I.useEffect(function(){if(!U&&a>0){var z=Date.now()-L,Q=setTimeout(function(){P()},a*1e3-L);return function(){u&&clearTimeout(Q),$(Date.now()-z)}}},[a,U,v]),I.useEffect(function(){if(!U&&_&&(u||L===0)){var z=performance.now(),Q,ne=function ce(){cancelAnimationFrame(Q),Q=requestAnimationFrame(function(se){var ue=se+L-z,ve=Math.min(ue/(a*1e3),1);V(ve*100),ve<1&&ce()})};return ne(),function(){u&&cancelAnimationFrame(Q)}}},[a,L,U,_,v]);var j=I.useMemo(function(){return wt(f)==="object"&&f!==null?f:f?{closeIcon:b}:{}},[f,b]),O=tl(j,!0),X=100-(!w||w<0?0:w>100?100:w),D="".concat(n,"-notice");return I.createElement("div",lt({},p,{ref:t,className:Re(D,i,fe({},"".concat(D,"-closable"),f)),style:r,onMouseEnter:function(Q){var ne;x(!0),p==null||(ne=p.onMouseEnter)===null||ne===void 0||ne.call(p,Q)},onMouseLeave:function(Q){var ne;x(!1),p==null||(ne=p.onMouseLeave)===null||ne===void 0||ne.call(p,Q)},onClick:y}),I.createElement("div",{className:"".concat(D,"-content")},C),f&&I.createElement("a",lt({tabIndex:0,className:"".concat(D,"-close"),onKeyDown:ee,"aria-label":"Close"},O,{onClick:function(Q){Q.preventDefault(),Q.stopPropagation(),P()}}),j.closeIcon),_&&I.createElement("progress",{className:"".concat(D,"-progress"),max:"100",value:X},X+"%"))}),B3=Ge.createContext({}),R_=function(t){var n=t.children,r=t.classNames;return Ge.createElement(B3.Provider,{value:{classNames:r}},n)},$5=8,q5=3,eR=16,w_=function(t){var n={offset:$5,threshold:q5,gap:eR};if(t&&wt(t)==="object"){var r,i,o;n.offset=(r=t.offset)!==null&&r!==void 0?r:$5,n.threshold=(i=t.threshold)!==null&&i!==void 0?i:q5,n.gap=(o=t.gap)!==null&&o!==void 0?o:eR}return[!!t,n]},W_=["className","style","classNames","styles"],V_=function(t){var n=t.configList,r=t.placement,i=t.prefixCls,o=t.className,a=t.style,l=t.motion,g=t.onAllNoticeRemoved,u=t.onNoticeClose,d=t.stack,C=I.useContext(B3),f=C.classNames,m=I.useRef({}),b=I.useState(null),p=xe(b,2),y=p[0],S=p[1],v=I.useState([]),B=xe(v,2),W=B[0],J=B[1],H=n.map(function(U){return{config:U,key:String(U.key)}}),x=w_(d),E=xe(x,2),F=E[0],w=E[1],V=w.offset,Y=w.threshold,M=w.gap,L=F&&(W.length>0||H.length<=Y),$=typeof l=="function"?l(r):l;return I.useEffect(function(){F&&W.length>1&&J(function(U){return U.filter(function(_){return H.some(function(P){var ee=P.key;return _===ee})})})},[W,H,F]),I.useEffect(function(){var U;if(F&&m.current[(U=H[H.length-1])===null||U===void 0?void 0:U.key]){var _;S(m.current[(_=H[H.length-1])===null||_===void 0?void 0:_.key])}},[H,F]),Ge.createElement(PO,lt({key:r,className:Re(i,"".concat(i,"-").concat(r),f==null?void 0:f.list,o,fe(fe({},"".concat(i,"-stack"),!!F),"".concat(i,"-stack-expanded"),L)),style:a,keys:H,motionAppear:!0},$,{onAllRemoved:function(){g(r)}}),function(U,_){var P=U.config,ee=U.className,j=U.style,O=U.index,X=P,D=X.key,z=X.times,Q=String(D),ne=P,ce=ne.className,se=ne.style,ue=ne.classNames,ve=ne.styles,Ae=Wn(ne,W_),be=H.findIndex(function(Pe){return Pe.key===Q}),me={};if(F){var Ne=H.length-1-(be>-1?be:O-1),Ie=r==="top"||r==="bottom"?"-50%":"0";if(Ne>0){var ae,Ee,Fe;me.height=L?(ae=m.current[Q])===null||ae===void 0?void 0:ae.offsetHeight:y==null?void 0:y.offsetHeight;for(var ke=0,ze=0;ze<Ne;ze++){var He;ke+=((He=m.current[H[H.length-1-ze].key])===null||He===void 0?void 0:He.offsetHeight)+M}var Le=(L?ke:Ne*V)*(r.startsWith("top")?1:-1),Ye=!L&&y!==null&&y!==void 0&&y.offsetWidth&&(Ee=m.current[Q])!==null&&Ee!==void 0&&Ee.offsetWidth?((y==null?void 0:y.offsetWidth)-V*2*(Ne<3?Ne:3))/((Fe=m.current[Q])===null||Fe===void 0?void 0:Fe.offsetWidth):1;me.transform="translate3d(".concat(Ie,", ").concat(Le,"px, 0) scaleX(").concat(Ye,")")}else me.transform="translate3d(".concat(Ie,", 0, 0)")}return Ge.createElement("div",{ref:_,className:Re("".concat(i,"-notice-wrapper"),ee,ue==null?void 0:ue.wrapper),style:he(he(he({},j),me),ve==null?void 0:ve.wrapper),onMouseEnter:function(){return J(function($e){return $e.includes(Q)?$e:[].concat(Gt($e),[Q])})},onMouseLeave:function(){return J(function($e){return $e.filter(function(ot){return ot!==Q})})}},Ge.createElement(G3,lt({},Ae,{ref:function($e){be>-1?m.current[Q]=$e:delete m.current[Q]},prefixCls:i,classNames:ue,styles:ve,className:Re(ce,f==null?void 0:f.notice),style:se,times:z,key:D,eventKey:D,onNoticeClose:u,hovering:F&&W.length>0})))})},k_=I.forwardRef(function(e,t){var n=e.prefixCls,r=n===void 0?"rc-notification":n,i=e.container,o=e.motion,a=e.maxCount,l=e.className,g=e.style,u=e.onAllRemoved,d=e.stack,C=e.renderNotifications,f=I.useState([]),m=xe(f,2),b=m[0],p=m[1],y=function(F){var w,V=b.find(function(Y){return Y.key===F});V==null||(w=V.onClose)===null||w===void 0||w.call(V),p(function(Y){return Y.filter(function(M){return M.key!==F})})};I.useImperativeHandle(t,function(){return{open:function(F){p(function(w){var V=Gt(w),Y=V.findIndex(function($){return $.key===F.key}),M=he({},F);if(Y>=0){var L;M.times=(((L=w[Y])===null||L===void 0?void 0:L.times)||0)+1,V[Y]=M}else M.times=0,V.push(M);return a>0&&V.length>a&&(V=V.slice(-a)),V})},close:function(F){y(F)},destroy:function(){p([])}}});var S=I.useState({}),v=xe(S,2),B=v[0],W=v[1];I.useEffect(function(){var E={};b.forEach(function(F){var w=F.placement,V=w===void 0?"topRight":w;V&&(E[V]=E[V]||[],E[V].push(F))}),Object.keys(B).forEach(function(F){E[F]=E[F]||[]}),W(E)},[b]);var J=function(F){W(function(w){var V=he({},w),Y=V[F]||[];return Y.length||delete V[F],V})},H=I.useRef(!1);if(I.useEffect(function(){Object.keys(B).length>0?H.current=!0:H.current&&(u==null||u(),H.current=!1)},[B]),!i)return null;var x=Object.keys(B);return Dc.createPortal(I.createElement(I.Fragment,null,x.map(function(E){var F=B[E],w=I.createElement(V_,{key:E,configList:F,placement:E,prefixCls:r,className:l==null?void 0:l(E),style:g==null?void 0:g(E),motion:o,onNoticeClose:y,onAllNoticeRemoved:J,stack:d});return C?C(w,{prefixCls:r,key:E}):w})),i)}),N_=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],X_=function(){return document.body},tR=0;function J_(){for(var e={},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach(function(i){i&&Object.keys(i).forEach(function(o){var a=i[o];a!==void 0&&(e[o]=a)})}),e}function x_(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.getContainer,n=t===void 0?X_:t,r=e.motion,i=e.prefixCls,o=e.maxCount,a=e.className,l=e.style,g=e.onAllRemoved,u=e.stack,d=e.renderNotifications,C=Wn(e,N_),f=I.useState(),m=xe(f,2),b=m[0],p=m[1],y=I.useRef(),S=I.createElement(k_,{container:b,ref:y,prefixCls:i,motion:r,maxCount:o,className:a,style:l,onAllRemoved:g,stack:u,renderNotifications:d}),v=I.useState([]),B=xe(v,2),W=B[0],J=B[1],H=I.useMemo(function(){return{open:function(E){var F=J_(C,E);(F.key===null||F.key===void 0)&&(F.key="rc-notification-".concat(tR),tR+=1),J(function(w){return[].concat(Gt(w),[{type:"open",config:F}])})},close:function(E){J(function(F){return[].concat(Gt(F),[{type:"close",key:E}])})},destroy:function(){J(function(E){return[].concat(Gt(E),[{type:"destroy"}])})}}},[]);return I.useEffect(function(){p(n())}),I.useEffect(function(){y.current&&W.length&&(W.forEach(function(x){switch(x.type){case"open":y.current.open(x.config);break;case"close":y.current.close(x.key);break;case"destroy":y.current.destroy();break}}),J(function(x){return x.filter(function(E){return!W.includes(E)})}))},[W]),[H,S]}var H_={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},Y_=function(t,n){return I.createElement(er,lt({},t,{ref:n,icon:H_}))},ib=I.forwardRef(Y_);const Sm=Ge.createContext(void 0),kc=100,E_=10,R3=kc*E_,w3={Modal:kc,Drawer:kc,Popover:kc,Popconfirm:kc,Tooltip:kc,Tour:kc,FloatButton:kc},F_={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function K_(e){return e in w3}const lC=(e,t)=>{const[,n]=Ia(),r=Ge.useContext(Sm),i=K_(e);let o;if(t!==void 0)o=[t,t];else{let a=r??0;i?a+=(r?0:n.zIndexPopupBase)+w3[e]:a+=F_[e],o=[r===void 0?t:a,a]}return o},L_=e=>{const{componentCls:t,iconCls:n,boxShadow:r,colorText:i,colorSuccess:o,colorError:a,colorWarning:l,colorInfo:g,fontSizeLG:u,motionEaseInOutCirc:d,motionDurationSlow:C,marginXS:f,paddingXS:m,borderRadiusLG:b,zIndexPopup:p,contentPadding:y,contentBg:S}=e,v=`${t}-notice`,B=new lr("MessageMoveIn",{"0%":{padding:0,transform:"translateY(-100%)",opacity:0},"100%":{padding:m,transform:"translateY(0)",opacity:1}}),W=new lr("MessageMoveOut",{"0%":{maxHeight:e.height,padding:m,opacity:1},"100%":{maxHeight:0,padding:0,opacity:0}}),J={padding:m,textAlign:"center",[`${t}-custom-content`]:{display:"flex",alignItems:"center"},[`${t}-custom-content > ${n}`]:{marginInlineEnd:f,fontSize:u},[`${v}-content`]:{display:"inline-block",padding:y,background:S,borderRadius:b,boxShadow:r,pointerEvents:"all"},[`${t}-success > ${n}`]:{color:o},[`${t}-error > ${n}`]:{color:a},[`${t}-warning > ${n}`]:{color:l},[`${t}-info > ${n},
      ${t}-loading > ${n}`]:{color:g}};return[{[t]:Object.assign(Object.assign({},Ca(e)),{color:i,position:"fixed",top:f,width:"100%",pointerEvents:"none",zIndex:p,[`${t}-move-up`]:{animationFillMode:"forwards"},[`
        ${t}-move-up-appear,
        ${t}-move-up-enter
      `]:{animationName:B,animationDuration:C,animationPlayState:"paused",animationTimingFunction:d},[`
        ${t}-move-up-appear${t}-move-up-appear-active,
        ${t}-move-up-enter${t}-move-up-enter-active
      `]:{animationPlayState:"running"},[`${t}-move-up-leave`]:{animationName:W,animationDuration:C,animationPlayState:"paused",animationTimingFunction:d},[`${t}-move-up-leave${t}-move-up-leave-active`]:{animationPlayState:"running"},"&-rtl":{direction:"rtl",span:{direction:"rtl"}}})},{[t]:{[`${v}-wrapper`]:Object.assign({},J)}},{[`${t}-notice-pure-panel`]:Object.assign(Object.assign({},J),{padding:0,textAlign:"start"})}]},M_=e=>({zIndexPopup:e.zIndexPopupBase+R3+10,contentBg:e.colorBgElevated,contentPadding:`${(e.controlHeightLG-e.fontSize*e.lineHeight)/2}px ${e.paddingSM}px`}),W3=Gi("Message",e=>{const t=Br(e,{height:150});return[L_(t)]},M_);var T_=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const z_={info:I.createElement(S3,null),success:I.createElement(y3,null),error:I.createElement(rb,null),warning:I.createElement(v3,null),loading:I.createElement(ib,null)},V3=e=>{let{prefixCls:t,type:n,icon:r,children:i}=e;return I.createElement("div",{className:Re(`${t}-custom-content`,`${t}-${n}`)},r||z_[n],I.createElement("span",null,i))},D_=e=>{const{prefixCls:t,className:n,type:r,icon:i,content:o}=e,a=T_(e,["prefixCls","className","type","icon","content"]),{getPrefixCls:l}=I.useContext(dn),g=t||l("message"),u=gs(g),[d,C,f]=W3(g,u);return d(I.createElement(G3,Object.assign({},a,{prefixCls:g,className:Re(n,C,`${g}-notice-pure-panel`,f,u),eventKey:"pure",duration:null,content:I.createElement(V3,{prefixCls:g,type:r,icon:i},o)})))};function P_(e,t){return{motionName:t??`${e}-move-up`}}function JZ(e){let t;const n=new Promise(i=>{t=e(()=>{i(!0)})}),r=()=>{t==null||t()};return r.then=(i,o)=>n.then(i,o),r.promise=n,r}var O_=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const __=8,U_=3,j_=e=>{let{children:t,prefixCls:n}=e;const r=gs(n),[i,o,a]=W3(n,r);return i(I.createElement(R_,{classNames:{list:Re(o,a,r)}},t))},Q_=(e,t)=>{let{prefixCls:n,key:r}=t;return I.createElement(j_,{prefixCls:n,key:r},e)},$_=I.forwardRef((e,t)=>{const{top:n,prefixCls:r,getContainer:i,maxCount:o,duration:a=U_,rtl:l,transitionName:g,onAllRemoved:u}=e,{getPrefixCls:d,getPopupContainer:C,message:f,direction:m}=I.useContext(dn),b=r||d("message"),p=()=>({left:"50%",transform:"translateX(-50%)",top:n??__}),y=()=>Re({[`${b}-rtl`]:l??m==="rtl"}),S=()=>P_(b,g),v=I.createElement("span",{className:`${b}-close-x`},I.createElement(aC,{className:`${b}-close-icon`})),[B,W]=x_({prefixCls:b,style:p,className:y,motion:S,closable:!1,closeIcon:v,duration:a,getContainer:()=>(i==null?void 0:i())||(C==null?void 0:C())||document.body,maxCount:o,onAllRemoved:u,renderNotifications:Q_});return I.useImperativeHandle(t,()=>Object.assign(Object.assign({},B),{prefixCls:b,message:f})),W});let nR=0;function k3(e){const t=I.useRef(null);return tb(),[I.useMemo(()=>{const r=g=>{var u;(u=t.current)===null||u===void 0||u.close(g)},i=g=>{if(!t.current){const H=()=>{};return H.then=()=>{},H}const{open:u,prefixCls:d,message:C}=t.current,f=`${d}-notice`,{content:m,icon:b,type:p,key:y,className:S,style:v,onClose:B}=g,W=O_(g,["content","icon","type","key","className","style","onClose"]);let J=y;return J==null&&(nR+=1,J=`antd-message-${nR}`),JZ(H=>(u(Object.assign(Object.assign({},W),{key:J,content:I.createElement(V3,{prefixCls:d,type:p,icon:b},m),placement:"top",className:Re(p&&`${f}-${p}`,S,C==null?void 0:C.className),style:Object.assign(Object.assign({},C==null?void 0:C.style),v),onClose:()=>{B==null||B(),H()}})),()=>{r(J)}))},a={open:i,destroy:g=>{var u;g!==void 0?r(g):(u=t.current)===null||u===void 0||u.destroy()}};return["info","success","warning","error","loading"].forEach(g=>{const u=(d,C,f)=>{let m;d&&typeof d=="object"&&"content"in d?m=d:m={content:d};let b,p;typeof C=="function"?p=C:(b=C,p=f);const y=Object.assign(Object.assign({onClose:p,duration:b},m),{type:g});return i(y)};a[g]=u}),a},[]),I.createElement($_,Object.assign({key:"message-holder"},e,{ref:t}))]}function q_(e){return k3(e)}function eU(){const[e,t]=I.useState([]),n=I.useCallback(r=>(t(i=>[].concat(Gt(i),[r])),()=>{t(i=>i.filter(o=>o!==r))}),[]);return[e,n]}function ua(){ua=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(U,_,P){U[_]=P.value},o=typeof Symbol=="function"?Symbol:{},a=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",g=o.toStringTag||"@@toStringTag";function u(U,_,P){return Object.defineProperty(U,_,{value:P,enumerable:!0,configurable:!0,writable:!0}),U[_]}try{u({},"")}catch{u=function(P,ee,j){return P[ee]=j}}function d(U,_,P,ee){var j=_&&_.prototype instanceof S?_:S,O=Object.create(j.prototype),X=new L(ee||[]);return i(O,"_invoke",{value:w(U,P,X)}),O}function C(U,_,P){try{return{type:"normal",arg:U.call(_,P)}}catch(ee){return{type:"throw",arg:ee}}}t.wrap=d;var f="suspendedStart",m="suspendedYield",b="executing",p="completed",y={};function S(){}function v(){}function B(){}var W={};u(W,a,function(){return this});var J=Object.getPrototypeOf,H=J&&J(J($([])));H&&H!==n&&r.call(H,a)&&(W=H);var x=B.prototype=S.prototype=Object.create(W);function E(U){["next","throw","return"].forEach(function(_){u(U,_,function(P){return this._invoke(_,P)})})}function F(U,_){function P(j,O,X,D){var z=C(U[j],U,O);if(z.type!=="throw"){var Q=z.arg,ne=Q.value;return ne&&wt(ne)=="object"&&r.call(ne,"__await")?_.resolve(ne.__await).then(function(ce){P("next",ce,X,D)},function(ce){P("throw",ce,X,D)}):_.resolve(ne).then(function(ce){Q.value=ce,X(Q)},function(ce){return P("throw",ce,X,D)})}D(z.arg)}var ee;i(this,"_invoke",{value:function(O,X){function D(){return new _(function(z,Q){P(O,X,z,Q)})}return ee=ee?ee.then(D,D):D()}})}function w(U,_,P){var ee=f;return function(j,O){if(ee===b)throw Error("Generator is already running");if(ee===p){if(j==="throw")throw O;return{value:e,done:!0}}for(P.method=j,P.arg=O;;){var X=P.delegate;if(X){var D=V(X,P);if(D){if(D===y)continue;return D}}if(P.method==="next")P.sent=P._sent=P.arg;else if(P.method==="throw"){if(ee===f)throw ee=p,P.arg;P.dispatchException(P.arg)}else P.method==="return"&&P.abrupt("return",P.arg);ee=b;var z=C(U,_,P);if(z.type==="normal"){if(ee=P.done?p:m,z.arg===y)continue;return{value:z.arg,done:P.done}}z.type==="throw"&&(ee=p,P.method="throw",P.arg=z.arg)}}}function V(U,_){var P=_.method,ee=U.iterator[P];if(ee===e)return _.delegate=null,P==="throw"&&U.iterator.return&&(_.method="return",_.arg=e,V(U,_),_.method==="throw")||P!=="return"&&(_.method="throw",_.arg=new TypeError("The iterator does not provide a '"+P+"' method")),y;var j=C(ee,U.iterator,_.arg);if(j.type==="throw")return _.method="throw",_.arg=j.arg,_.delegate=null,y;var O=j.arg;return O?O.done?(_[U.resultName]=O.value,_.next=U.nextLoc,_.method!=="return"&&(_.method="next",_.arg=e),_.delegate=null,y):O:(_.method="throw",_.arg=new TypeError("iterator result is not an object"),_.delegate=null,y)}function Y(U){var _={tryLoc:U[0]};1 in U&&(_.catchLoc=U[1]),2 in U&&(_.finallyLoc=U[2],_.afterLoc=U[3]),this.tryEntries.push(_)}function M(U){var _=U.completion||{};_.type="normal",delete _.arg,U.completion=_}function L(U){this.tryEntries=[{tryLoc:"root"}],U.forEach(Y,this),this.reset(!0)}function $(U){if(U||U===""){var _=U[a];if(_)return _.call(U);if(typeof U.next=="function")return U;if(!isNaN(U.length)){var P=-1,ee=function j(){for(;++P<U.length;)if(r.call(U,P))return j.value=U[P],j.done=!1,j;return j.value=e,j.done=!0,j};return ee.next=ee}}throw new TypeError(wt(U)+" is not iterable")}return v.prototype=B,i(x,"constructor",{value:B,configurable:!0}),i(B,"constructor",{value:v,configurable:!0}),v.displayName=u(B,g,"GeneratorFunction"),t.isGeneratorFunction=function(U){var _=typeof U=="function"&&U.constructor;return!!_&&(_===v||(_.displayName||_.name)==="GeneratorFunction")},t.mark=function(U){return Object.setPrototypeOf?Object.setPrototypeOf(U,B):(U.__proto__=B,u(U,g,"GeneratorFunction")),U.prototype=Object.create(x),U},t.awrap=function(U){return{__await:U}},E(F.prototype),u(F.prototype,l,function(){return this}),t.AsyncIterator=F,t.async=function(U,_,P,ee,j){j===void 0&&(j=Promise);var O=new F(d(U,_,P,ee),j);return t.isGeneratorFunction(_)?O:O.next().then(function(X){return X.done?X.value:O.next()})},E(x),u(x,g,"Generator"),u(x,a,function(){return this}),u(x,"toString",function(){return"[object Generator]"}),t.keys=function(U){var _=Object(U),P=[];for(var ee in _)P.push(ee);return P.reverse(),function j(){for(;P.length;){var O=P.pop();if(O in _)return j.value=O,j.done=!1,j}return j.done=!0,j}},t.values=$,L.prototype={constructor:L,reset:function(_){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!_)for(var P in this)P.charAt(0)==="t"&&r.call(this,P)&&!isNaN(+P.slice(1))&&(this[P]=e)},stop:function(){this.done=!0;var _=this.tryEntries[0].completion;if(_.type==="throw")throw _.arg;return this.rval},dispatchException:function(_){if(this.done)throw _;var P=this;function ee(Q,ne){return X.type="throw",X.arg=_,P.next=Q,ne&&(P.method="next",P.arg=e),!!ne}for(var j=this.tryEntries.length-1;j>=0;--j){var O=this.tryEntries[j],X=O.completion;if(O.tryLoc==="root")return ee("end");if(O.tryLoc<=this.prev){var D=r.call(O,"catchLoc"),z=r.call(O,"finallyLoc");if(D&&z){if(this.prev<O.catchLoc)return ee(O.catchLoc,!0);if(this.prev<O.finallyLoc)return ee(O.finallyLoc)}else if(D){if(this.prev<O.catchLoc)return ee(O.catchLoc,!0)}else{if(!z)throw Error("try statement without catch or finally");if(this.prev<O.finallyLoc)return ee(O.finallyLoc)}}}},abrupt:function(_,P){for(var ee=this.tryEntries.length-1;ee>=0;--ee){var j=this.tryEntries[ee];if(j.tryLoc<=this.prev&&r.call(j,"finallyLoc")&&this.prev<j.finallyLoc){var O=j;break}}O&&(_==="break"||_==="continue")&&O.tryLoc<=P&&P<=O.finallyLoc&&(O=null);var X=O?O.completion:{};return X.type=_,X.arg=P,O?(this.method="next",this.next=O.finallyLoc,y):this.complete(X)},complete:function(_,P){if(_.type==="throw")throw _.arg;return _.type==="break"||_.type==="continue"?this.next=_.arg:_.type==="return"?(this.rval=this.arg=_.arg,this.method="return",this.next="end"):_.type==="normal"&&P&&(this.next=P),y},finish:function(_){for(var P=this.tryEntries.length-1;P>=0;--P){var ee=this.tryEntries[P];if(ee.finallyLoc===_)return this.complete(ee.completion,ee.afterLoc),M(ee),y}},catch:function(_){for(var P=this.tryEntries.length-1;P>=0;--P){var ee=this.tryEntries[P];if(ee.tryLoc===_){var j=ee.completion;if(j.type==="throw"){var O=j.arg;M(ee)}return O}}throw Error("illegal catch attempt")},delegateYield:function(_,P,ee){return this.delegate={iterator:$(_),resultName:P,nextLoc:ee},this.method==="next"&&(this.arg=e),y}},t}function rR(e,t,n,r,i,o,a){try{var l=e[o](a),g=l.value}catch(u){return void n(u)}l.done?t(g):Promise.resolve(g).then(r,i)}function ud(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(g){rR(o,r,i,a,l,"next",g)}function l(g){rR(o,r,i,a,l,"throw",g)}a(void 0)})}}var Zm=he({},vE),tU=Zm.version,By=Zm.render,nU=Zm.unmountComponentAtNode,ob;try{var rU=Number((tU||"").split(".")[0]);rU>=18&&(ob=Zm.createRoot)}catch{}function iR(e){var t=Zm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&wt(t)==="object"&&(t.usingClientEntryPoint=e)}var bp="__rc_react_root__";function iU(e,t){iR(!0);var n=t[bp]||ob(t);iR(!1),n.render(e),t[bp]=n}function oU(e,t){By==null||By(e,t)}function aU(e,t){if(ob){iU(e,t);return}oU(e,t)}function lU(e){return R2.apply(this,arguments)}function R2(){return R2=ud(ua().mark(function e(t){return ua().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Promise.resolve().then(function(){var i;(i=t[bp])===null||i===void 0||i.unmount(),delete t[bp]}));case 1:case"end":return r.stop()}},e)})),R2.apply(this,arguments)}function sU(e){nU(e)}function gU(e){return w2.apply(this,arguments)}function w2(){return w2=ud(ua().mark(function e(t){return ua().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(ob===void 0){r.next=2;break}return r.abrupt("return",lU(t));case 2:sU(t);case 3:case"end":return r.stop()}},e)})),w2.apply(this,arguments)}const cU=(e,t)=>(aU(e,t),()=>gU(t));let uU=cU;function xZ(){return uU}const Ry=()=>({height:0,opacity:0}),oR=e=>{const{scrollHeight:t}=e;return{height:t,opacity:1}},dU=e=>({height:e?e.offsetHeight:0}),wy=(e,t)=>(t==null?void 0:t.deadline)===!0||t.propertyName==="height",IU=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:Of}-motion-collapse`,onAppearStart:Ry,onEnterStart:Ry,onAppearActive:oR,onEnterActive:oR,onLeaveStart:dU,onLeaveActive:Ry,onAppearEnd:wy,onEnterEnd:wy,onLeaveEnd:wy,motionDeadline:500}},Jg=(e,t,n)=>n!==void 0?n:`${e}-${t}`;function Pi(e,t){var n=Object.assign({},e);return Array.isArray(t)&&t.forEach(function(r){delete n[r]}),n}const HZ=function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox(),n=t.width,r=t.height;if(n||r)return!0}if(e.getBoundingClientRect){var i=e.getBoundingClientRect(),o=i.width,a=i.height;if(o||a)return!0}}return!1},CU=e=>{const{componentCls:t,colorPrimary:n}=e;return{[t]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${n})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${e.motionEaseOutCirc}`,`opacity 2s ${e.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow ${e.motionDurationSlow} ${e.motionEaseInOut}`,`opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`].join(",")}}}}},fU=AO("Wave",e=>[CU(e)]),N3=`${Of}-wave-target`;function Wy(e){return e&&e!=="#fff"&&e!=="#ffffff"&&e!=="rgb(255, 255, 255)"&&e!=="rgba(255, 255, 255, 1)"&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&e!=="transparent"}function mU(e){const{borderTopColor:t,borderColor:n,backgroundColor:r}=getComputedStyle(e);return Wy(t)?t:Wy(n)?n:Wy(r)?r:null}function Vy(e){return Number.isNaN(e)?0:e}const hU=e=>{const{className:t,target:n,component:r,registerUnmount:i}=e,o=I.useRef(null),a=I.useRef(null);I.useEffect(()=>{a.current=i()},[]);const[l,g]=I.useState(null),[u,d]=I.useState([]),[C,f]=I.useState(0),[m,b]=I.useState(0),[p,y]=I.useState(0),[S,v]=I.useState(0),[B,W]=I.useState(!1),J={left:C,top:m,width:p,height:S,borderRadius:u.map(E=>`${E}px`).join(" ")};l&&(J["--wave-color"]=l);function H(){const E=getComputedStyle(n);g(mU(n));const F=E.position==="static",{borderLeftWidth:w,borderTopWidth:V}=E;f(F?n.offsetLeft:Vy(-parseFloat(w))),b(F?n.offsetTop:Vy(-parseFloat(V))),y(n.offsetWidth),v(n.offsetHeight);const{borderTopLeftRadius:Y,borderTopRightRadius:M,borderBottomLeftRadius:L,borderBottomRightRadius:$}=E;d([Y,M,$,L].map(U=>Vy(parseFloat(U))))}if(I.useEffect(()=>{if(n){const E=Jr(()=>{H(),W(!0)});let F;return typeof ResizeObserver<"u"&&(F=new ResizeObserver(H),F.observe(n)),()=>{Jr.cancel(E),F==null||F.disconnect()}}},[]),!B)return null;const x=(r==="Checkbox"||r==="Radio")&&(n==null?void 0:n.classList.contains(N3));return I.createElement(is,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(E,F)=>{var w,V;if(F.deadline||F.propertyName==="opacity"){const Y=(w=o.current)===null||w===void 0?void 0:w.parentElement;(V=a.current)===null||V===void 0||V.call(a).then(()=>{Y==null||Y.remove()})}return!1}},(E,F)=>{let{className:w}=E;return I.createElement("div",{ref:vl(o,F),className:Re(t,w,{"wave-quick":x}),style:J})})},AU=(e,t)=>{var n;const{component:r}=t;if(r==="Checkbox"&&!(!((n=e.querySelector("input"))===null||n===void 0)&&n.checked))return;const i=document.createElement("div");i.style.position="absolute",i.style.left="0px",i.style.top="0px",e==null||e.insertBefore(i,e==null?void 0:e.firstChild);const o=xZ();let a=null;function l(){return a}a=o(I.createElement(hU,Object.assign({},t,{target:e,registerUnmount:l})),i)},pU=(e,t,n)=>{const{wave:r}=I.useContext(dn),[,i,o]=Ia(),a=ui(u=>{const d=e.current;if(r!=null&&r.disabled||!d)return;const C=d.querySelector(`.${N3}`)||d,{showEffect:f}=r||{};(f||AU)(C,{className:t,token:i,component:n,event:u,hashId:o})}),l=I.useRef(null);return u=>{Jr.cancel(l.current),l.current=Jr(()=>{a(u)})}},bU=e=>{const{children:t,disabled:n,component:r}=e,{getPrefixCls:i}=I.useContext(dn),o=I.useRef(null),a=i("wave"),[,l]=fU(a),g=pU(o,Re(a,l),r);if(Ge.useEffect(()=>{const d=o.current;if(!d||d.nodeType!==1||n)return;const C=f=>{!HZ(f.target)||!d.getAttribute||d.getAttribute("disabled")||d.disabled||d.className.includes("disabled")||d.className.includes("-leave")||g(f)};return d.addEventListener("click",C,!0),()=>{d.removeEventListener("click",C,!0)}},[n]),!Ge.isValidElement(t))return t??null;const u=au(t)?vl(cd(t),o):o;return os(t,{ref:u})},Os=e=>{const t=Ge.useContext(FI);return Ge.useMemo(()=>e?typeof e=="string"?e??t:e instanceof Function?e(t):t:t,[e,t])},yU=e=>{const{componentCls:t}=e;return{[t]:{"&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}}}},vU=e=>{const{componentCls:t,antCls:n}=e;return{[t]:{display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}},[`${t}-item:empty`]:{display:"none"},[`${t}-item > ${n}-badge-not-a-wrapper:only-child`]:{display:"block"}}}},SU=e=>{const{componentCls:t}=e;return{[t]:{"&-gap-row-small":{rowGap:e.spaceGapSmallSize},"&-gap-row-middle":{rowGap:e.spaceGapMiddleSize},"&-gap-row-large":{rowGap:e.spaceGapLargeSize},"&-gap-col-small":{columnGap:e.spaceGapSmallSize},"&-gap-col-middle":{columnGap:e.spaceGapMiddleSize},"&-gap-col-large":{columnGap:e.spaceGapLargeSize}}}},X3=Gi("Space",e=>{const t=Br(e,{spaceGapSmallSize:e.paddingXS,spaceGapMiddleSize:e.padding,spaceGapLargeSize:e.paddingLG});return[vU(t),SU(t),yU(t)]},()=>({}),{resetStyle:!1});var J3=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const ab=I.createContext(null),Gm=(e,t)=>{const n=I.useContext(ab),r=I.useMemo(()=>{if(!n)return"";const{compactDirection:i,isFirstItem:o,isLastItem:a}=n,l=i==="vertical"?"-vertical-":"-";return Re(`${e}-compact${l}item`,{[`${e}-compact${l}first-item`]:o,[`${e}-compact${l}last-item`]:a,[`${e}-compact${l}item-rtl`]:t==="rtl"})},[e,t,n]);return{compactSize:n==null?void 0:n.compactSize,compactDirection:n==null?void 0:n.compactDirection,compactItemClassnames:r}},ZU=e=>{const{children:t}=e;return I.createElement(ab.Provider,{value:null},t)},GU=e=>{const{children:t}=e,n=J3(e,["children"]);return I.createElement(ab.Provider,{value:I.useMemo(()=>n,[n])},t)},BU=e=>{const{getPrefixCls:t,direction:n}=I.useContext(dn),{size:r,direction:i,block:o,prefixCls:a,className:l,rootClassName:g,children:u}=e,d=J3(e,["size","direction","block","prefixCls","className","rootClassName","children"]),C=Os(B=>r??B),f=t("space-compact",a),[m,b]=X3(f),p=Re(f,b,{[`${f}-rtl`]:n==="rtl",[`${f}-block`]:o,[`${f}-vertical`]:i==="vertical"},l,g),y=I.useContext(ab),S=el(u),v=I.useMemo(()=>S.map((B,W)=>{const J=(B==null?void 0:B.key)||`${f}-item-${W}`;return I.createElement(GU,{key:J,compactSize:C,compactDirection:i,isFirstItem:W===0&&(!y||(y==null?void 0:y.isFirstItem)),isLastItem:W===S.length-1&&(!y||(y==null?void 0:y.isLastItem))},B)}),[r,S,y]);return S.length===0?null:m(I.createElement("div",Object.assign({className:p},d),v))};var RU=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const x3=I.createContext(void 0),wU=e=>{const{getPrefixCls:t,direction:n}=I.useContext(dn),{prefixCls:r,size:i,className:o}=e,a=RU(e,["prefixCls","size","className"]),l=t("btn-group",r),[,,g]=Ia(),u=I.useMemo(()=>{switch(i){case"large":return"lg";case"small":return"sm";default:return""}},[i]),d=Re(l,{[`${l}-${u}`]:u,[`${l}-rtl`]:n==="rtl"},o,g);return I.createElement(x3.Provider,{value:i},I.createElement("div",Object.assign({},a,{className:d})))},aR=/^[\u4E00-\u9FA5]{2}$/,W2=aR.test.bind(aR);function H3(e){return e==="danger"?{danger:!0}:{type:e}}function lR(e){return typeof e=="string"}function ky(e){return e==="text"||e==="link"}function WU(e,t){if(e==null)return;const n=t?" ":"";return typeof e!="string"&&typeof e!="number"&&lR(e.type)&&W2(e.props.children)?os(e,{children:e.props.children.split("").join(n)}):lR(e)?W2(e)?Ge.createElement("span",null,e.split("").join(n)):Ge.createElement("span",null,e):Z3(e)?Ge.createElement("span",null,e):e}function VU(e,t){let n=!1;const r=[];return Ge.Children.forEach(e,i=>{const o=typeof i,a=o==="string"||o==="number";if(n&&a){const l=r.length-1,g=r[l];r[l]=`${g}${i}`}else r.push(i);n=a}),Ge.Children.map(r,i=>WU(i,t))}["default","primary","danger"].concat(Gt(LI));const V2=I.forwardRef((e,t)=>{const{className:n,style:r,children:i,prefixCls:o}=e,a=Re(`${o}-icon`,n);return Ge.createElement("span",{ref:t,className:a,style:r},i)}),sR=I.forwardRef((e,t)=>{const{prefixCls:n,className:r,style:i,iconClassName:o}=e,a=Re(`${n}-loading-icon`,r);return Ge.createElement(V2,{prefixCls:n,className:a,style:i,ref:t},Ge.createElement(ib,{className:o}))}),Ny=()=>({width:0,opacity:0,transform:"scale(0)"}),Xy=e=>({width:e.scrollWidth,opacity:1,transform:"scale(1)"}),kU=e=>{const{prefixCls:t,loading:n,existIcon:r,className:i,style:o,mount:a}=e,l=!!n;return r?Ge.createElement(sR,{prefixCls:t,className:i,style:o}):Ge.createElement(is,{visible:l,motionName:`${t}-loading-icon-motion`,motionAppear:!a,motionEnter:!a,motionLeave:!a,removeOnLeave:!0,onAppearStart:Ny,onAppearActive:Xy,onEnterStart:Ny,onEnterActive:Xy,onLeaveStart:Xy,onLeaveActive:Ny},(g,u)=>{let{className:d,style:C}=g;const f=Object.assign(Object.assign({},o),C);return Ge.createElement(sR,{prefixCls:t,className:Re(i,d),style:f,ref:u})})},gR=(e,t)=>({[`> span, > ${e}`]:{"&:not(:last-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineEndColor:t}}},"&:not(:first-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineStartColor:t}}}}}),NU=e=>{const{componentCls:t,fontSize:n,lineWidth:r,groupBorderColor:i,colorErrorHover:o}=e;return{[`${t}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${t}`]:{"&:not(:last-child)":{[`&, & > ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:e.calc(r).mul(-1).equal(),[`&, & > ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[t]:{position:"relative",zIndex:1,"&:hover, &:focus, &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${t}-icon-only`]:{fontSize:n}},gR(`${t}-primary`,i),gR(`${t}-danger`,o)]}};var XU=["b"],JU=["v"],Jy=function(t){return Math.round(Number(t||0))},xU=function(t){if(t instanceof xr)return t;if(t&&wt(t)==="object"&&"h"in t&&"b"in t){var n=t,r=n.b,i=Wn(n,XU);return he(he({},i),{},{v:r})}return typeof t=="string"&&/hsb/.test(t)?t.replace(/hsb/,"hsv"):t},_f=function(e){Kg(n,e);var t=Lg(n);function n(r){return zi(this,n),t.call(this,xU(r))}return Di(n,[{key:"toHsbString",value:function(){var i=this.toHsb(),o=Jy(i.s*100),a=Jy(i.b*100),l=Jy(i.h),g=i.a,u="hsb(".concat(l,", ").concat(o,"%, ").concat(a,"%)"),d="hsba(".concat(l,", ").concat(o,"%, ").concat(a,"%, ").concat(g.toFixed(g===0?0:2),")");return g===1?u:d}},{key:"toHsb",value:function(){var i=this.toHsv(),o=i.v,a=Wn(i,JU);return he(he({},a),{},{b:o,a:this.a})}}]),n}(xr),HU=function(t){return t instanceof _f?t:new _f(t)};HU("#1677ff");const YU=(e,t)=>(e==null?void 0:e.replace(/[^\w/]/g,"").slice(0,t?8:6))||"",EU=(e,t)=>e?YU(e,t):"";let FU=function(){function e(t){zi(this,e);var n;if(this.cleared=!1,t instanceof e){this.metaColor=t.metaColor.clone(),this.colors=(n=t.colors)===null||n===void 0?void 0:n.map(i=>({color:new e(i.color),percent:i.percent})),this.cleared=t.cleared;return}const r=Array.isArray(t);r&&t.length?(this.colors=t.map(i=>{let{color:o,percent:a}=i;return{color:new e(o),percent:a}}),this.metaColor=new _f(this.colors[0].color.metaColor)):this.metaColor=new _f(r?"":t),(!t||r&&!this.colors)&&(this.metaColor=this.metaColor.setA(0),this.cleared=!0)}return Di(e,[{key:"toHsb",value:function(){return this.metaColor.toHsb()}},{key:"toHsbString",value:function(){return this.metaColor.toHsbString()}},{key:"toHex",value:function(){return EU(this.toHexString(),this.metaColor.a<1)}},{key:"toHexString",value:function(){return this.metaColor.toHexString()}},{key:"toRgb",value:function(){return this.metaColor.toRgb()}},{key:"toRgbString",value:function(){return this.metaColor.toRgbString()}},{key:"isGradient",value:function(){return!!this.colors&&!this.cleared}},{key:"getColors",value:function(){return this.colors||[{color:this,percent:0}]}},{key:"toCssString",value:function(){const{colors:n}=this;return n?`linear-gradient(90deg, ${n.map(i=>`${i.color.toRgbString()} ${i.percent}%`).join(", ")})`:this.metaColor.toRgbString()}},{key:"equals",value:function(n){return!n||this.isGradient()!==n.isGradient()?!1:this.isGradient()?this.colors.length===n.colors.length&&this.colors.every((r,i)=>{const o=n.colors[i];return r.percent===o.percent&&r.color.equals(o.color)}):this.toHexString()===n.toHexString()}}])}();var KU={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"},LU=function(t,n){return I.createElement(er,lt({},t,{ref:n,icon:KU}))},Uf=I.forwardRef(LU);const MU=e=>({[e.componentCls]:{[`${e.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${e.motionDurationMid} ${e.motionEaseInOut},
        opacity ${e.motionDurationMid} ${e.motionEaseInOut} !important`}},[`${e.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${e.motionDurationMid} ${e.motionEaseInOut},
        opacity ${e.motionDurationMid} ${e.motionEaseInOut} !important`}}}),TU=e=>({animationDuration:e,animationFillMode:"both"}),zU=e=>({animationDuration:e,animationFillMode:"both"}),lb=function(e,t,n,r){const o=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${o}${e}-enter,
      ${o}${e}-appear
    `]:Object.assign(Object.assign({},TU(r)),{animationPlayState:"paused"}),[`${o}${e}-leave`]:Object.assign(Object.assign({},zU(r)),{animationPlayState:"paused"}),[`
      ${o}${e}-enter${e}-enter-active,
      ${o}${e}-appear${e}-appear-active
    `]:{animationName:t,animationPlayState:"running"},[`${o}${e}-leave${e}-leave-active`]:{animationName:n,animationPlayState:"running",pointerEvents:"none"}}},DU=new lr("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),PU=new lr("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),OU=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{antCls:n}=e,r=`${n}-fade`,i=t?"&":"";return[lb(r,DU,PU,e.motionDurationMid,t),{[`
        ${i}${r}-enter,
        ${i}${r}-appear
      `]:{opacity:0,animationTimingFunction:"linear"},[`${i}${r}-leave`]:{animationTimingFunction:"linear"}}]},_U=new lr("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),UU=new lr("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),jU=new lr("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),QU=new lr("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),$U=new lr("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),qU=new lr("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),e8=new lr("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),t8=new lr("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}}),n8={"move-up":{inKeyframes:e8,outKeyframes:t8},"move-down":{inKeyframes:_U,outKeyframes:UU},"move-left":{inKeyframes:jU,outKeyframes:QU},"move-right":{inKeyframes:$U,outKeyframes:qU}},yp=(e,t)=>{const{antCls:n}=e,r=`${n}-${t}`,{inKeyframes:i,outKeyframes:o}=n8[t];return[lb(r,i,o,e.motionDurationMid),{[`
        ${r}-enter,
        ${r}-appear
      `]:{opacity:0,animationTimingFunction:e.motionEaseOutCirc},[`${r}-leave`]:{animationTimingFunction:e.motionEaseInOutCirc}}]},YZ=new lr("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),EZ=new lr("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),FZ=new lr("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),KZ=new lr("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),r8=new lr("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),i8=new lr("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),o8=new lr("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),a8=new lr("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),l8={"slide-up":{inKeyframes:YZ,outKeyframes:EZ},"slide-down":{inKeyframes:FZ,outKeyframes:KZ},"slide-left":{inKeyframes:r8,outKeyframes:i8},"slide-right":{inKeyframes:o8,outKeyframes:a8}},jc=(e,t)=>{const{antCls:n}=e,r=`${n}-${t}`,{inKeyframes:i,outKeyframes:o}=l8[t];return[lb(r,i,o,e.motionDurationMid),{[`
      ${r}-enter,
      ${r}-appear
    `]:{transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:e.motionEaseOutQuint,"&-prepare":{transform:"scale(1)"}},[`${r}-leave`]:{animationTimingFunction:e.motionEaseInQuint}}]},s8=new lr("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),g8=new lr("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),cR=new lr("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),uR=new lr("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),c8=new lr("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),u8=new lr("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),d8=new lr("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),I8=new lr("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),C8=new lr("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),f8=new lr("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),m8=new lr("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),h8=new lr("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),A8={zoom:{inKeyframes:s8,outKeyframes:g8},"zoom-big":{inKeyframes:cR,outKeyframes:uR},"zoom-big-fast":{inKeyframes:cR,outKeyframes:uR},"zoom-left":{inKeyframes:d8,outKeyframes:I8},"zoom-right":{inKeyframes:C8,outKeyframes:f8},"zoom-up":{inKeyframes:c8,outKeyframes:u8},"zoom-down":{inKeyframes:m8,outKeyframes:h8}},sb=(e,t)=>{const{antCls:n}=e,r=`${n}-${t}`,{inKeyframes:i,outKeyframes:o}=A8[t];return[lb(r,i,o,t==="zoom-big-fast"?e.motionDurationFast:e.motionDurationMid),{[`
        ${r}-enter,
        ${r}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:e.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${r}-leave`]:{animationTimingFunction:e.motionEaseInOutCirc}}]},p8=(e,t)=>{const{r:n,g:r,b:i,a:o}=e.toRgb(),a=new _f(e.toRgbString()).onBackground(t).toHsv();return o<=.5?a.v>.5:n*.299+r*.587+i*.114>192},Y3=e=>{const{paddingInline:t,onlyIconSize:n}=e;return Br(e,{buttonPaddingHorizontal:t,buttonPaddingVertical:0,buttonIconOnlyFontSize:n})},E3=e=>{var t,n,r,i,o,a;const l=(t=e.contentFontSize)!==null&&t!==void 0?t:e.fontSize,g=(n=e.contentFontSizeSM)!==null&&n!==void 0?n:e.fontSize,u=(r=e.contentFontSizeLG)!==null&&r!==void 0?r:e.fontSizeLG,d=(i=e.contentLineHeight)!==null&&i!==void 0?i:gA(l),C=(o=e.contentLineHeightSM)!==null&&o!==void 0?o:gA(g),f=(a=e.contentLineHeightLG)!==null&&a!==void 0?a:gA(u),m=p8(new FU(e.colorBgSolid),"#fff")?"#000":"#fff";return{fontWeight:400,defaultShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlTmpOutline}`,primaryShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlOutline}`,dangerShadow:`0 ${e.controlOutlineWidth}px 0 ${e.colorErrorOutline}`,primaryColor:e.colorTextLightSolid,dangerColor:e.colorTextLightSolid,borderColorDisabled:e.colorBorder,defaultGhostColor:e.colorBgContainer,ghostBg:"transparent",defaultGhostBorderColor:e.colorBgContainer,paddingInline:e.paddingContentHorizontal-e.lineWidth,paddingInlineLG:e.paddingContentHorizontal-e.lineWidth,paddingInlineSM:8-e.lineWidth,onlyIconSize:"inherit",onlyIconSizeSM:"inherit",onlyIconSizeLG:"inherit",groupBorderColor:e.colorPrimaryHover,linkHoverBg:"transparent",textTextColor:e.colorText,textTextHoverColor:e.colorText,textTextActiveColor:e.colorText,textHoverBg:e.colorFillTertiary,defaultColor:e.colorText,defaultBg:e.colorBgContainer,defaultBorderColor:e.colorBorder,defaultBorderColorDisabled:e.colorBorder,defaultHoverBg:e.colorBgContainer,defaultHoverColor:e.colorPrimaryHover,defaultHoverBorderColor:e.colorPrimaryHover,defaultActiveBg:e.colorBgContainer,defaultActiveColor:e.colorPrimaryActive,defaultActiveBorderColor:e.colorPrimaryActive,solidTextColor:m,contentFontSize:l,contentFontSizeSM:g,contentFontSizeLG:u,contentLineHeight:d,contentLineHeightSM:C,contentLineHeightLG:f,paddingBlock:Math.max((e.controlHeight-l*d)/2-e.lineWidth,0),paddingBlockSM:Math.max((e.controlHeightSM-g*C)/2-e.lineWidth,0),paddingBlockLG:Math.max((e.controlHeightLG-u*f)/2-e.lineWidth,0)}},b8=e=>{const{componentCls:t,iconCls:n,fontWeight:r,opacityLoading:i,motionDurationSlow:o,motionEaseInOut:a,marginXS:l,calc:g}=e;return{[t]:{outline:"none",position:"relative",display:"inline-flex",gap:e.marginXS,alignItems:"center",justifyContent:"center",fontWeight:r,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",background:"transparent",border:`${Ve(e.lineWidth)} ${e.lineType} transparent`,cursor:"pointer",transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",color:e.colorText,"&:disabled > *":{pointerEvents:"none"},[`${t}-icon > svg`]:vm(),"> a":{color:"currentColor"},"&:not(:disabled)":Ds(e),[`&${t}-two-chinese-chars::first-letter`]:{letterSpacing:"0.34em"},[`&${t}-two-chinese-chars > *:not(${n})`]:{marginInlineEnd:"-0.34em",letterSpacing:"0.34em"},[`&${t}-icon-only`]:{paddingInline:0,[`&${t}-compact-item`]:{flex:"none"},[`&${t}-round`]:{width:"auto"}},[`&${t}-loading`]:{opacity:i,cursor:"default"},[`${t}-loading-icon`]:{transition:["width","opacity","margin"].map(u=>`${u} ${o} ${a}`).join(",")},[`&:not(${t}-icon-end)`]:{[`${t}-loading-icon-motion`]:{"&-appear-start, &-enter-start":{marginInlineEnd:g(l).mul(-1).equal()},"&-appear-active, &-enter-active":{marginInlineEnd:0},"&-leave-start":{marginInlineEnd:0},"&-leave-active":{marginInlineEnd:g(l).mul(-1).equal()}}},"&-icon-end":{flexDirection:"row-reverse",[`${t}-loading-icon-motion`]:{"&-appear-start, &-enter-start":{marginInlineStart:g(l).mul(-1).equal()},"&-appear-active, &-enter-active":{marginInlineStart:0},"&-leave-start":{marginInlineStart:0},"&-leave-active":{marginInlineStart:g(l).mul(-1).equal()}}}}}},F3=(e,t,n)=>({[`&:not(:disabled):not(${e}-disabled)`]:{"&:hover":t,"&:active":n}}),y8=e=>({minWidth:e.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),v8=e=>({borderRadius:e.controlHeight,paddingInlineStart:e.calc(e.controlHeight).div(2).equal(),paddingInlineEnd:e.calc(e.controlHeight).div(2).equal()}),S8=e=>({cursor:"not-allowed",borderColor:e.borderColorDisabled,color:e.colorTextDisabled,background:e.colorBgContainerDisabled,boxShadow:"none"}),LZ=(e,t,n,r,i,o,a,l)=>({[`&${e}-background-ghost`]:Object.assign(Object.assign({color:n||void 0,background:t,borderColor:r||void 0,boxShadow:"none"},F3(e,Object.assign({background:t},a),Object.assign({background:t},l))),{"&:disabled":{cursor:"not-allowed",color:i||void 0,borderColor:o||void 0}})}),Z8=e=>({[`&:disabled, &${e.componentCls}-disabled`]:Object.assign({},S8(e))}),G8=e=>({[`&:disabled, &${e.componentCls}-disabled`]:{cursor:"not-allowed",color:e.colorTextDisabled}}),gb=(e,t,n,r)=>{const o=r&&["link","text"].includes(r)?G8:Z8;return Object.assign(Object.assign({},o(e)),F3(e.componentCls,t,n))},cb=(e,t,n,r,i)=>({[`&${e.componentCls}-variant-solid`]:Object.assign({color:t,background:n},gb(e,r,i))}),ub=(e,t,n,r,i)=>({[`&${e.componentCls}-variant-outlined, &${e.componentCls}-variant-dashed`]:Object.assign({borderColor:t,background:n},gb(e,r,i))}),db=e=>({[`&${e.componentCls}-variant-dashed`]:{borderStyle:"dashed"}}),Ib=(e,t,n,r)=>({[`&${e.componentCls}-variant-filled`]:Object.assign({boxShadow:"none",background:t},gb(e,n,r))}),Qc=(e,t,n,r,i)=>({[`&${e.componentCls}-variant-${n}`]:Object.assign({color:t,boxShadow:"none"},gb(e,r,i,n))}),B8=e=>{const{componentCls:t}=e;return LI.reduce((n,r)=>{const i=e[`${r}6`],o=e[`${r}1`],a=e[`${r}5`],l=e[`${r}2`],g=e[`${r}3`],u=e[`${r}7`],d=`0 ${Ve(e.controlOutlineWidth)} 0 ${e[`${r}1`]}`;return Object.assign(Object.assign({},n),{[`&${t}-color-${r}`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:i,boxShadow:d},cb(e,e.colorTextLightSolid,i,{background:a},{background:u})),ub(e,i,e.colorBgContainer,{color:a,borderColor:a,background:e.colorBgContainer},{color:u,borderColor:u,background:e.colorBgContainer})),db(e)),Ib(e,o,{background:l},{background:g})),Qc(e,i,"link",{color:a},{color:u})),Qc(e,i,"text",{color:a,background:o},{color:u,background:g}))})},{})},R8=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:e.defaultColor,boxShadow:e.defaultShadow},cb(e,e.solidTextColor,e.colorBgSolid,{color:e.solidTextColor,background:e.colorBgSolidHover},{color:e.solidTextColor,background:e.colorBgSolidActive})),db(e)),Ib(e,e.colorFillTertiary,{background:e.colorFillSecondary},{background:e.colorFill})),Qc(e,e.textTextColor,"link",{color:e.colorLinkHover,background:e.linkHoverBg},{color:e.colorLinkActive})),LZ(e.componentCls,e.ghostBg,e.defaultGhostColor,e.defaultGhostBorderColor,e.colorTextDisabled,e.colorBorder)),w8=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:e.colorPrimary,boxShadow:e.primaryShadow},ub(e,e.colorPrimary,e.colorBgContainer,{color:e.colorPrimaryTextHover,borderColor:e.colorPrimaryHover,background:e.colorBgContainer},{color:e.colorPrimaryTextActive,borderColor:e.colorPrimaryActive,background:e.colorBgContainer})),db(e)),Ib(e,e.colorPrimaryBg,{background:e.colorPrimaryBgHover},{background:e.colorPrimaryBorder})),Qc(e,e.colorLink,"text",{color:e.colorPrimaryTextHover,background:e.colorPrimaryBg},{color:e.colorPrimaryTextActive,background:e.colorPrimaryBorder})),LZ(e.componentCls,e.ghostBg,e.colorPrimary,e.colorPrimary,e.colorTextDisabled,e.colorBorder,{color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),W8=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:e.colorError,boxShadow:e.dangerShadow},cb(e,e.dangerColor,e.colorError,{background:e.colorErrorHover},{background:e.colorErrorActive})),ub(e,e.colorError,e.colorBgContainer,{color:e.colorErrorHover,borderColor:e.colorErrorBorderHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),db(e)),Ib(e,e.colorErrorBg,{background:e.colorErrorBgFilledHover},{background:e.colorErrorBgActive})),Qc(e,e.colorError,"text",{color:e.colorErrorHover,background:e.colorErrorBg},{color:e.colorErrorHover,background:e.colorErrorBgActive})),Qc(e,e.colorError,"link",{color:e.colorErrorHover},{color:e.colorErrorActive})),LZ(e.componentCls,e.ghostBg,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder,{color:e.colorErrorHover,borderColor:e.colorErrorHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),V8=e=>{const{componentCls:t}=e;return Object.assign({[`${t}-color-default`]:R8(e),[`${t}-color-primary`]:w8(e),[`${t}-color-dangerous`]:W8(e)},B8(e))},k8=e=>Object.assign(Object.assign(Object.assign(Object.assign({},ub(e,e.defaultBorderColor,e.defaultBg,{color:e.defaultHoverColor,borderColor:e.defaultHoverBorderColor,background:e.defaultHoverBg},{color:e.defaultActiveColor,borderColor:e.defaultActiveBorderColor,background:e.defaultActiveBg})),Qc(e,e.textTextColor,"text",{color:e.textTextHoverColor,background:e.textHoverBg},{color:e.textTextActiveColor,background:e.colorBgTextActive})),cb(e,e.primaryColor,e.colorPrimary,{background:e.colorPrimaryHover,color:e.primaryColor},{background:e.colorPrimaryActive,color:e.primaryColor})),Qc(e,e.colorLink,"link",{color:e.colorLinkHover,background:e.linkHoverBg},{color:e.colorLinkActive})),MZ=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const{componentCls:n,controlHeight:r,fontSize:i,borderRadius:o,buttonPaddingHorizontal:a,iconCls:l,buttonPaddingVertical:g,buttonIconOnlyFontSize:u}=e;return[{[t]:{fontSize:i,height:r,padding:`${Ve(g)} ${Ve(a)}`,borderRadius:o,[`&${n}-icon-only`]:{width:r,[l]:{fontSize:u}}}},{[`${n}${n}-circle${t}`]:y8(e)},{[`${n}${n}-round${t}`]:v8(e)}]},N8=e=>{const t=Br(e,{fontSize:e.contentFontSize});return MZ(t,e.componentCls)},X8=e=>{const t=Br(e,{controlHeight:e.controlHeightSM,fontSize:e.contentFontSizeSM,padding:e.paddingXS,buttonPaddingHorizontal:e.paddingInlineSM,buttonPaddingVertical:0,borderRadius:e.borderRadiusSM,buttonIconOnlyFontSize:e.onlyIconSizeSM});return MZ(t,`${e.componentCls}-sm`)},J8=e=>{const t=Br(e,{controlHeight:e.controlHeightLG,fontSize:e.contentFontSizeLG,buttonPaddingHorizontal:e.paddingInlineLG,buttonPaddingVertical:0,borderRadius:e.borderRadiusLG,buttonIconOnlyFontSize:e.onlyIconSizeLG});return MZ(t,`${e.componentCls}-lg`)},x8=e=>{const{componentCls:t}=e;return{[t]:{[`&${t}-block`]:{width:"100%"}}}},H8=Gi("Button",e=>{const t=Y3(e);return[b8(t),N8(t),X8(t),J8(t),x8(t),V8(t),k8(t),NU(t)]},E3,{unitless:{fontWeight:!0,contentLineHeight:!0,contentLineHeightSM:!0,contentLineHeightLG:!0}});function Y8(e,t,n){const{focusElCls:r,focus:i,borderElCls:o}=n,a=o?"> *":"",l=["hover",i?"focus":null,"active"].filter(Boolean).map(g=>`&:${g} ${a}`).join(",");return{[`&-item:not(${t}-last-item)`]:{marginInlineEnd:e.calc(e.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[l]:{zIndex:2}},r?{[`&${r}`]:{zIndex:2}}:{}),{[`&[disabled] ${a}`]:{zIndex:0}})}}function E8(e,t,n){const{borderElCls:r}=n,i=r?`> ${r}`:"";return{[`&-item:not(${t}-first-item):not(${t}-last-item) ${i}`]:{borderRadius:0},[`&-item:not(${t}-last-item)${t}-first-item`]:{[`& ${i}, &${e}-sm ${i}, &${e}-lg ${i}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${t}-first-item)${t}-last-item`]:{[`& ${i}, &${e}-sm ${i}, &${e}-lg ${i}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function TZ(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:n}=e,r=`${n}-compact`;return{[r]:Object.assign(Object.assign({},Y8(e,r,t)),E8(n,r,t))}}function F8(e,t){return{[`&-item:not(${t}-last-item)`]:{marginBottom:e.calc(e.lineWidth).mul(-1).equal()},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function K8(e,t){return{[`&-item:not(${t}-first-item):not(${t}-last-item)`]:{borderRadius:0},[`&-item${t}-first-item:not(${t}-last-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${t}-last-item:not(${t}-first-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function L8(e){const t=`${e.componentCls}-compact-vertical`;return{[t]:Object.assign(Object.assign({},F8(e,t)),K8(e.componentCls,t))}}const M8=e=>{const{componentCls:t,colorPrimaryHover:n,lineWidth:r,calc:i}=e,o=i(r).mul(-1).equal(),a=l=>{const g=`${t}-compact${l?"-vertical":""}-item${t}-primary:not([disabled])`;return{[`${g} + ${g}::before`]:{position:"absolute",top:l?o:0,insetInlineStart:l?0:o,backgroundColor:n,content:'""',width:l?"100%":r,height:l?r:"100%"}}};return Object.assign(Object.assign({},a()),a(!0))},T8=NZ(["Button","compact"],e=>{const t=Y3(e);return[TZ(t),L8(t),M8(t)]},E3);var z8=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function D8(e){if(typeof e=="object"&&e){let t=e==null?void 0:e.delay;return t=!Number.isNaN(t)&&typeof t=="number"?t:0,{loading:t<=0,delay:t}}return{loading:!!e,delay:0}}const P8={default:["default","outlined"],primary:["primary","solid"],dashed:["default","dashed"],link:["primary","link"],text:["default","text"]},O8=Ge.forwardRef((e,t)=>{var n,r,i,o;const{loading:a=!1,prefixCls:l,color:g,variant:u,type:d,danger:C=!1,shape:f="default",size:m,styles:b,disabled:p,className:y,rootClassName:S,children:v,icon:B,iconPosition:W="start",ghost:J=!1,block:H=!1,htmlType:x="button",classNames:E,style:F={},autoInsertSpace:w,autoFocus:V}=e,Y=z8(e,["loading","prefixCls","color","variant","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","iconPosition","ghost","block","htmlType","classNames","style","autoInsertSpace","autoFocus"]),M=d||"default",[L,$]=I.useMemo(()=>{if(g&&u)return[g,u];const Qe=P8[M]||[];return C?["danger",Qe[1]]:Qe},[d,g,u,C]),_=L==="danger"?"dangerous":L,{getPrefixCls:P,direction:ee,button:j}=I.useContext(dn),O=(n=w??(j==null?void 0:j.autoInsertSpace))!==null&&n!==void 0?n:!0,X=P("btn",l),[D,z,Q]=H8(X),ne=I.useContext(_c),ce=p??ne,se=I.useContext(x3),ue=I.useMemo(()=>D8(a),[a]),[ve,Ae]=I.useState(ue.loading),[be,me]=I.useState(!1),Ne=I.useRef(null),Ie=Ps(t,Ne),ae=I.Children.count(v)===1&&!B&&!ky($),Ee=I.useRef(!0);Ge.useEffect(()=>(Ee.current=!1,()=>{Ee.current=!0}),[]),I.useEffect(()=>{let Qe=null;ue.delay>0?Qe=setTimeout(()=>{Qe=null,Ae(!0)},ue.delay):Ae(ue.loading);function st(){Qe&&(clearTimeout(Qe),Qe=null)}return st},[ue]),I.useEffect(()=>{if(!Ne.current||!O)return;const Qe=Ne.current.textContent||"";ae&&W2(Qe)?be||me(!0):be&&me(!1)}),I.useEffect(()=>{V&&Ne.current&&Ne.current.focus()},[]);const Fe=Ge.useCallback(Qe=>{var st;if(ve||ce){Qe.preventDefault();return}(st=e.onClick)===null||st===void 0||st.call(e,Qe)},[e.onClick,ve,ce]),{compactSize:ke,compactItemClassnames:ze}=Gm(X,ee),He={large:"lg",small:"sm",middle:void 0},Le=Os(Qe=>{var st,St;return(St=(st=m??ke)!==null&&st!==void 0?st:se)!==null&&St!==void 0?St:Qe}),Ye=Le&&(r=He[Le])!==null&&r!==void 0?r:"",Pe=ve?"loading":B,$e=Pi(Y,["navigate"]),ot=Re(X,z,Q,{[`${X}-${f}`]:f!=="default"&&f,[`${X}-${M}`]:M,[`${X}-dangerous`]:C,[`${X}-color-${_}`]:_,[`${X}-variant-${$}`]:$,[`${X}-${Ye}`]:Ye,[`${X}-icon-only`]:!v&&v!==0&&!!Pe,[`${X}-background-ghost`]:J&&!ky($),[`${X}-loading`]:ve,[`${X}-two-chinese-chars`]:be&&O&&!ve,[`${X}-block`]:H,[`${X}-rtl`]:ee==="rtl",[`${X}-icon-end`]:W==="end"},ze,y,S,j==null?void 0:j.className),Ct=Object.assign(Object.assign({},j==null?void 0:j.style),F),pt=Re(E==null?void 0:E.icon,(i=j==null?void 0:j.classNames)===null||i===void 0?void 0:i.icon),it=Object.assign(Object.assign({},(b==null?void 0:b.icon)||{}),((o=j==null?void 0:j.styles)===null||o===void 0?void 0:o.icon)||{}),It=B&&!ve?Ge.createElement(V2,{prefixCls:X,className:pt,style:it},B):a&&typeof a=="object"&&a.icon?Ge.createElement(V2,{prefixCls:X,className:pt,style:it},a.icon):Ge.createElement(kU,{existIcon:!!B,prefixCls:X,loading:ve,mount:Ee.current}),_e=v||v===0?VU(v,ae&&O):null;if($e.href!==void 0)return D(Ge.createElement("a",Object.assign({},$e,{className:Re(ot,{[`${X}-disabled`]:ce}),href:ce?void 0:$e.href,style:Ct,onClick:Fe,ref:Ie,tabIndex:ce?-1:0}),It,_e));let Ot=Ge.createElement("button",Object.assign({},Y,{type:x,className:ot,style:Ct,onClick:Fe,disabled:ce,ref:Ie}),It,_e,ze&&Ge.createElement(T8,{prefixCls:X}));return ky($)||(Ot=Ge.createElement(bU,{component:"Button",disabled:ve},Ot)),D(Ot)}),da=O8;da.Group=wU;da.__ANT_BUTTON=!0;function xy(e){return!!(e!=null&&e.then)}const K3=e=>{const{type:t,children:n,prefixCls:r,buttonProps:i,close:o,autoFocus:a,emitEvent:l,isSilent:g,quitOnNullishReturnValue:u,actionFn:d}=e,C=I.useRef(!1),f=I.useRef(null),[m,b]=KI(!1),p=function(){o==null||o.apply(void 0,arguments)};I.useEffect(()=>{let v=null;return a&&(v=setTimeout(()=>{var B;(B=f.current)===null||B===void 0||B.focus({preventScroll:!0})})),()=>{v&&clearTimeout(v)}},[]);const y=v=>{xy(v)&&(b(!0),v.then(function(){b(!1,!0),p.apply(void 0,arguments),C.current=!1},B=>{if(b(!1,!0),C.current=!1,!(g!=null&&g()))return Promise.reject(B)}))},S=v=>{if(C.current)return;if(C.current=!0,!d){p();return}let B;if(l){if(B=d(v),u&&!xy(B)){C.current=!1,p(v);return}}else if(d.length)B=d(o),C.current=!1;else if(B=d(),!xy(B)){p();return}y(B)};return I.createElement(da,Object.assign({},H3(t),{onClick:S,loading:m,prefixCls:r},i,{ref:f}),n)},Bm=Ge.createContext({}),{Provider:L3}=Bm,dR=()=>{const{autoFocusButton:e,cancelButtonProps:t,cancelTextLocale:n,isSilent:r,mergedOkCancel:i,rootPrefixCls:o,close:a,onCancel:l,onConfirm:g}=I.useContext(Bm);return i?Ge.createElement(K3,{isSilent:r,actionFn:l,close:function(){a==null||a.apply(void 0,arguments),g==null||g(!1)},autoFocus:e==="cancel",buttonProps:t,prefixCls:`${o}-btn`},n):null},IR=()=>{const{autoFocusButton:e,close:t,isSilent:n,okButtonProps:r,rootPrefixCls:i,okTextLocale:o,okType:a,onConfirm:l,onOk:g}=I.useContext(Bm);return Ge.createElement(K3,{isSilent:n,type:a||"primary",actionFn:g,close:function(){t==null||t.apply(void 0,arguments),l==null||l(!0)},autoFocus:e==="ok",buttonProps:r,prefixCls:`${i}-btn`},o)};var M3=I.createContext(null),CR=[];function _8(e,t){var n=I.useState(function(){if(!Qo())return null;var b=document.createElement("div");return b}),r=xe(n,1),i=r[0],o=I.useRef(!1),a=I.useContext(M3),l=I.useState(CR),g=xe(l,2),u=g[0],d=g[1],C=a||(o.current?void 0:function(b){d(function(p){var y=[b].concat(Gt(p));return y})});function f(){i.parentElement||document.body.appendChild(i),o.current=!0}function m(){var b;(b=i.parentElement)===null||b===void 0||b.removeChild(i),o.current=!1}return ur(function(){return e?a?a(f):f():m(),m},[e]),ur(function(){u.length&&(u.forEach(function(b){return b()}),d(CR))},[u]),[i,C]}function U8(e){var t="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),n=document.createElement("div");n.id=t;var r=n.style;r.position="absolute",r.left="0",r.top="0",r.width="100px",r.height="100px",r.overflow="scroll";var i,o;if(e){var a=getComputedStyle(e);r.scrollbarColor=a.scrollbarColor,r.scrollbarWidth=a.scrollbarWidth;var l=getComputedStyle(e,"::-webkit-scrollbar"),g=parseInt(l.width,10),u=parseInt(l.height,10);try{var d=g?"width: ".concat(l.width,";"):"",C=u?"height: ".concat(l.height,";"):"";Vg(`
#`.concat(t,`::-webkit-scrollbar {
`).concat(d,`
`).concat(C,`
}`),t)}catch(b){console.error(b),i=g,o=u}}document.body.appendChild(n);var f=e&&i&&!isNaN(i)?i:n.offsetWidth-n.clientWidth,m=e&&o&&!isNaN(o)?o:n.offsetHeight-n.clientHeight;return document.body.removeChild(n),Kf(t),{width:f,height:m}}function j8(e){return typeof document>"u"||!e||!(e instanceof Element)?{width:0,height:0}:U8(e)}function Q8(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var $8="rc-util-locker-".concat(Date.now()),fR=0;function q8(e){var t=!!e,n=I.useState(function(){return fR+=1,"".concat($8,"_").concat(fR)}),r=xe(n,1),i=r[0];ur(function(){if(t){var o=j8(document.body).width,a=Q8();Vg(`
html body {
  overflow-y: hidden;
  `.concat(a?"width: calc(100% - ".concat(o,"px);"):"",`
}`),i)}else Kf(i);return function(){Kf(i)}},[t,i])}var ej=!1;function tj(e){return ej}var mR=function(t){return t===!1?!1:!Qo()||!t?null:typeof t=="string"?document.querySelector(t):typeof t=="function"?t():t},Cb=I.forwardRef(function(e,t){var n=e.open,r=e.autoLock,i=e.getContainer;e.debug;var o=e.autoDestroy,a=o===void 0?!0:o,l=e.children,g=I.useState(n),u=xe(g,2),d=u[0],C=u[1],f=d||n;I.useEffect(function(){(a||n)&&C(n)},[n,a]);var m=I.useState(function(){return mR(i)}),b=xe(m,2),p=b[0],y=b[1];I.useEffect(function(){var V=mR(i);y(V??null)});var S=_8(f&&!p),v=xe(S,2),B=v[0],W=v[1],J=p??B;q8(r&&n&&Qo()&&(J===B||J===document.body));var H=null;if(l&&au(l)&&t){var x=l;H=x.ref}var E=Ps(H,t);if(!f||!Qo()||p===void 0)return null;var F=J===!1||tj(),w=l;return t&&(w=I.cloneElement(l,{ref:E})),I.createElement(M3.Provider,{value:W},F?w:Dc.createPortal(w,J))}),T3=I.createContext({});function nj(){var e=he({},RI);return e.useId}var hR=0,AR=nj();const z3=AR?function(t){var n=AR();return t||n}:function(t){var n=I.useState("ssr-id"),r=xe(n,2),i=r[0],o=r[1];return I.useEffect(function(){var a=hR;hR+=1,o("rc_unique_".concat(a))},[]),t||i};function pR(e,t,n){var r=t;return!r&&n&&(r="".concat(e,"-").concat(n)),r}function bR(e,t){var n=e["page".concat(t?"Y":"X","Offset")],r="scroll".concat(t?"Top":"Left");if(typeof n!="number"){var i=e.document;n=i.documentElement[r],typeof n!="number"&&(n=i.body[r])}return n}function rj(e){var t=e.getBoundingClientRect(),n={left:t.left,top:t.top},r=e.ownerDocument,i=r.defaultView||r.parentWindow;return n.left+=bR(i),n.top+=bR(i,!0),n}const ij=I.memo(function(e){var t=e.children;return t},function(e,t){var n=t.shouldUpdate;return!n});var oj={width:0,height:0,overflow:"hidden",outline:"none"},aj={outline:"none"},D3=Ge.forwardRef(function(e,t){var n=e.prefixCls,r=e.className,i=e.style,o=e.title,a=e.ariaId,l=e.footer,g=e.closable,u=e.closeIcon,d=e.onClose,C=e.children,f=e.bodyStyle,m=e.bodyProps,b=e.modalRender,p=e.onMouseDown,y=e.onMouseUp,S=e.holderRef,v=e.visible,B=e.forceRender,W=e.width,J=e.height,H=e.classNames,x=e.styles,E=Ge.useContext(T3),F=E.panel,w=Ps(S,F),V=I.useRef(),Y=I.useRef();Ge.useImperativeHandle(t,function(){return{focus:function(){var X;(X=V.current)===null||X===void 0||X.focus({preventScroll:!0})},changeActive:function(X){var D=document,z=D.activeElement;X&&z===Y.current?V.current.focus({preventScroll:!0}):!X&&z===V.current&&Y.current.focus({preventScroll:!0})}}});var M={};W!==void 0&&(M.width=W),J!==void 0&&(M.height=J);var L=l?Ge.createElement("div",{className:Re("".concat(n,"-footer"),H==null?void 0:H.footer),style:he({},x==null?void 0:x.footer)},l):null,$=o?Ge.createElement("div",{className:Re("".concat(n,"-header"),H==null?void 0:H.header),style:he({},x==null?void 0:x.header)},Ge.createElement("div",{className:"".concat(n,"-title"),id:a},o)):null,U=I.useMemo(function(){return wt(g)==="object"&&g!==null?g:g?{closeIcon:u??Ge.createElement("span",{className:"".concat(n,"-close-x")})}:{}},[g,u,n]),_=tl(U,!0),P=wt(g)==="object"&&g.disabled,ee=g?Ge.createElement("button",lt({type:"button",onClick:d,"aria-label":"Close"},_,{className:"".concat(n,"-close"),disabled:P}),U.closeIcon):null,j=Ge.createElement("div",{className:Re("".concat(n,"-content"),H==null?void 0:H.content),style:x==null?void 0:x.content},ee,$,Ge.createElement("div",lt({className:Re("".concat(n,"-body"),H==null?void 0:H.body),style:he(he({},f),x==null?void 0:x.body)},m),C),L);return Ge.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":o?a:null,"aria-modal":"true",ref:w,style:he(he({},i),M),className:Re(n,r),onMouseDown:p,onMouseUp:y},Ge.createElement("div",{ref:V,tabIndex:0,style:aj},Ge.createElement(ij,{shouldUpdate:v||B},b?b(j):j)),Ge.createElement("div",{tabIndex:0,ref:Y,style:oj}))}),P3=I.forwardRef(function(e,t){var n=e.prefixCls,r=e.title,i=e.style,o=e.className,a=e.visible,l=e.forceRender,g=e.destroyOnClose,u=e.motionName,d=e.ariaId,C=e.onVisibleChanged,f=e.mousePosition,m=I.useRef(),b=I.useState(),p=xe(b,2),y=p[0],S=p[1],v={};y&&(v.transformOrigin=y);function B(){var W=rj(m.current);S(f&&(f.x||f.y)?"".concat(f.x-W.left,"px ").concat(f.y-W.top,"px"):"")}return I.createElement(is,{visible:a,onVisibleChanged:C,onAppearPrepare:B,onEnterPrepare:B,forceRender:l,motionName:u,removeOnLeave:g,ref:m},function(W,J){var H=W.className,x=W.style;return I.createElement(D3,lt({},e,{ref:t,title:r,ariaId:d,prefixCls:n,holderRef:J,style:he(he(he({},x),i),v),className:Re(o,H)}))})});P3.displayName="Content";var lj=function(t){var n=t.prefixCls,r=t.style,i=t.visible,o=t.maskProps,a=t.motionName,l=t.className;return I.createElement(is,{key:"mask",visible:i,motionName:a,leavedClassName:"".concat(n,"-mask-hidden")},function(g,u){var d=g.className,C=g.style;return I.createElement("div",lt({ref:u,style:he(he({},C),r),className:Re("".concat(n,"-mask"),d,l)},o))})},sj=function(t){var n=t.prefixCls,r=n===void 0?"rc-dialog":n,i=t.zIndex,o=t.visible,a=o===void 0?!1:o,l=t.keyboard,g=l===void 0?!0:l,u=t.focusTriggerAfterClose,d=u===void 0?!0:u,C=t.wrapStyle,f=t.wrapClassName,m=t.wrapProps,b=t.onClose,p=t.afterOpenChange,y=t.afterClose,S=t.transitionName,v=t.animation,B=t.closable,W=B===void 0?!0:B,J=t.mask,H=J===void 0?!0:J,x=t.maskTransitionName,E=t.maskAnimation,F=t.maskClosable,w=F===void 0?!0:F,V=t.maskStyle,Y=t.maskProps,M=t.rootClassName,L=t.classNames,$=t.styles,U=I.useRef(),_=I.useRef(),P=I.useRef(),ee=I.useState(a),j=xe(ee,2),O=j[0],X=j[1],D=z3();function z(){u2(_.current,document.activeElement)||(U.current=document.activeElement)}function Q(){if(!u2(_.current,document.activeElement)){var Ie;(Ie=P.current)===null||Ie===void 0||Ie.focus()}}function ne(Ie){if(Ie)Q();else{if(X(!1),H&&U.current&&d){try{U.current.focus({preventScroll:!0})}catch{}U.current=null}O&&(y==null||y())}p==null||p(Ie)}function ce(Ie){b==null||b(Ie)}var se=I.useRef(!1),ue=I.useRef(),ve=function(){clearTimeout(ue.current),se.current=!0},Ae=function(){ue.current=setTimeout(function(){se.current=!1})},be=null;w&&(be=function(ae){se.current?se.current=!1:_.current===ae.target&&ce(ae)});function me(Ie){if(g&&Ie.keyCode===Mt.ESC){Ie.stopPropagation(),ce(Ie);return}a&&Ie.keyCode===Mt.TAB&&P.current.changeActive(!Ie.shiftKey)}I.useEffect(function(){a&&(X(!0),z())},[a]),I.useEffect(function(){return function(){clearTimeout(ue.current)}},[]);var Ne=he(he(he({zIndex:i},C),$==null?void 0:$.wrapper),{},{display:O?null:"none"});return I.createElement("div",lt({className:Re("".concat(r,"-root"),M)},tl(t,{data:!0})),I.createElement(lj,{prefixCls:r,visible:H&&a,motionName:pR(r,x,E),style:he(he({zIndex:i},V),$==null?void 0:$.mask),maskProps:Y,className:L==null?void 0:L.mask}),I.createElement("div",lt({tabIndex:-1,onKeyDown:me,className:Re("".concat(r,"-wrap"),f,L==null?void 0:L.wrapper),ref:_,onClick:be,style:Ne},m),I.createElement(P3,lt({},t,{onMouseDown:ve,onMouseUp:Ae,ref:P,closable:W,ariaId:D,prefixCls:r,visible:a&&O,onClose:ce,onVisibleChanged:ne,motionName:pR(r,S,v)}))))},O3=function(t){var n=t.visible,r=t.getContainer,i=t.forceRender,o=t.destroyOnClose,a=o===void 0?!1:o,l=t.afterClose,g=t.panelRef,u=I.useState(n),d=xe(u,2),C=d[0],f=d[1],m=I.useMemo(function(){return{panel:g}},[g]);return I.useEffect(function(){n&&f(!0)},[n]),!i&&a&&!C?null:I.createElement(T3.Provider,{value:m},I.createElement(Cb,{open:n||i||C,autoDestroy:!1,getContainer:r,autoLock:n||C},I.createElement(sj,lt({},t,{destroyOnClose:a,afterClose:function(){l==null||l(),f(!1)}}))))};O3.displayName="Dialog";var zu="RC_FORM_INTERNAL_HOOKS",Yr=function(){wo(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},TI=I.createContext({getFieldValue:Yr,getFieldsValue:Yr,getFieldError:Yr,getFieldWarning:Yr,getFieldsError:Yr,isFieldsTouched:Yr,isFieldTouched:Yr,isFieldValidating:Yr,isFieldsValidating:Yr,resetFields:Yr,setFields:Yr,setFieldValue:Yr,setFieldsValue:Yr,validateFields:Yr,submit:Yr,getInternalHooks:function(){return Yr(),{dispatch:Yr,initEntityValue:Yr,registerField:Yr,useSubscribe:Yr,setInitialValues:Yr,destroyForm:Yr,setCallbacks:Yr,registerWatch:Yr,getFields:Yr,setValidateMessages:Yr,setPreserve:Yr,getInitialValue:Yr}}}),vp=I.createContext(null);function k2(e){return e==null?[]:Array.isArray(e)?e:[e]}function gj(e){return e&&!!e._init}function N2(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var X2=N2();function cj(e){try{return Function.toString.call(e).indexOf("[native code]")!==-1}catch{return typeof e=="function"}}function uj(e,t,n){if(vZ())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var i=new(e.bind.apply(e,r));return n&&Yf(i,n.prototype),i}function J2(e){var t=typeof Map=="function"?new Map:void 0;return J2=function(r){if(r===null||!cj(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(t!==void 0){if(t.has(r))return t.get(r);t.set(r,i)}function i(){return uj(r,arguments,Ef(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Yf(i,r)},J2(e)}var dj=/%[sdj%]/g,Ij=function(){};function x2(e){if(!e||!e.length)return null;var t={};return e.forEach(function(n){var r=n.field;t[r]=t[r]||[],t[r].push(n)}),t}function Ua(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=0,o=n.length;if(typeof e=="function")return e.apply(null,n);if(typeof e=="string"){var a=e.replace(dj,function(l){if(l==="%%")return"%";if(i>=o)return l;switch(l){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch{return"[Circular]"}break;default:return l}});return a}return e}function Cj(e){return e==="string"||e==="url"||e==="hex"||e==="email"||e==="date"||e==="pattern"}function eo(e,t){return!!(e==null||t==="array"&&Array.isArray(e)&&!e.length||Cj(t)&&typeof e=="string"&&!e)}function fj(e,t,n){var r=[],i=0,o=e.length;function a(l){r.push.apply(r,Gt(l||[])),i++,i===o&&n(r)}e.forEach(function(l){t(l,a)})}function yR(e,t,n){var r=0,i=e.length;function o(a){if(a&&a.length){n(a);return}var l=r;r=r+1,l<i?t(e[l],o):n([])}o([])}function mj(e){var t=[];return Object.keys(e).forEach(function(n){t.push.apply(t,Gt(e[n]||[]))}),t}var vR=function(e){Kg(n,e);var t=Lg(n);function n(r,i){var o;return zi(this,n),o=t.call(this,"Async Validation Error"),fe(On(o),"errors",void 0),fe(On(o),"fields",void 0),o.errors=r,o.fields=i,o}return Di(n)}(J2(Error));function hj(e,t,n,r,i){if(t.first){var o=new Promise(function(f,m){var b=function(S){return r(S),S.length?m(new vR(S,x2(S))):f(i)},p=mj(e);yR(p,n,b)});return o.catch(function(f){return f}),o}var a=t.firstFields===!0?Object.keys(e):t.firstFields||[],l=Object.keys(e),g=l.length,u=0,d=[],C=new Promise(function(f,m){var b=function(y){if(d.push.apply(d,y),u++,u===g)return r(d),d.length?m(new vR(d,x2(d))):f(i)};l.length||(r(d),f(i)),l.forEach(function(p){var y=e[p];a.indexOf(p)!==-1?yR(y,n,b):fj(y,n,b)})});return C.catch(function(f){return f}),C}function Aj(e){return!!(e&&e.message!==void 0)}function pj(e,t){for(var n=e,r=0;r<t.length;r++){if(n==null)return n;n=n[t[r]]}return n}function SR(e,t){return function(n){var r;return e.fullFields?r=pj(t,e.fullFields):r=t[n.field||e.fullField],Aj(n)?(n.field=n.field||e.fullField,n.fieldValue=r,n):{message:typeof n=="function"?n():n,fieldValue:r,field:n.field||e.fullField}}}function ZR(e,t){if(t){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];wt(r)==="object"&&wt(e[n])==="object"?e[n]=he(he({},e[n]),r):e[n]=r}}return e}var Fd="enum",bj=function(t,n,r,i,o){t[Fd]=Array.isArray(t[Fd])?t[Fd]:[],t[Fd].indexOf(n)===-1&&i.push(Ua(o.messages[Fd],t.fullField,t[Fd].join(", ")))},yj=function(t,n,r,i,o){if(t.pattern){if(t.pattern instanceof RegExp)t.pattern.lastIndex=0,t.pattern.test(n)||i.push(Ua(o.messages.pattern.mismatch,t.fullField,n,t.pattern));else if(typeof t.pattern=="string"){var a=new RegExp(t.pattern);a.test(n)||i.push(Ua(o.messages.pattern.mismatch,t.fullField,n,t.pattern))}}},vj=function(t,n,r,i,o){var a=typeof t.len=="number",l=typeof t.min=="number",g=typeof t.max=="number",u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,d=n,C=null,f=typeof n=="number",m=typeof n=="string",b=Array.isArray(n);if(f?C="number":m?C="string":b&&(C="array"),!C)return!1;b&&(d=n.length),m&&(d=n.replace(u,"_").length),a?d!==t.len&&i.push(Ua(o.messages[C].len,t.fullField,t.len)):l&&!g&&d<t.min?i.push(Ua(o.messages[C].min,t.fullField,t.min)):g&&!l&&d>t.max?i.push(Ua(o.messages[C].max,t.fullField,t.max)):l&&g&&(d<t.min||d>t.max)&&i.push(Ua(o.messages[C].range,t.fullField,t.min,t.max))},_3=function(t,n,r,i,o,a){t.required&&(!r.hasOwnProperty(t.field)||eo(n,a||t.type))&&i.push(Ua(o.messages.required,t.fullField))},Vh;const Sj=function(){if(Vh)return Vh;var e="[a-fA-F\\d:]",t=function(H){return H&&H.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(e,")|(?<=").concat(e,")(?=\\s|$))"):""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",i=["(?:".concat(r,":){7}(?:").concat(r,"|:)"),"(?:".concat(r,":){6}(?:").concat(n,"|:").concat(r,"|:)"),"(?:".concat(r,":){5}(?::").concat(n,"|(?::").concat(r,"){1,2}|:)"),"(?:".concat(r,":){4}(?:(?::").concat(r,"){0,1}:").concat(n,"|(?::").concat(r,"){1,3}|:)"),"(?:".concat(r,":){3}(?:(?::").concat(r,"){0,2}:").concat(n,"|(?::").concat(r,"){1,4}|:)"),"(?:".concat(r,":){2}(?:(?::").concat(r,"){0,3}:").concat(n,"|(?::").concat(r,"){1,5}|:)"),"(?:".concat(r,":){1}(?:(?::").concat(r,"){0,4}:").concat(n,"|(?::").concat(r,"){1,6}|:)"),"(?::(?:(?::".concat(r,"){0,5}:").concat(n,"|(?::").concat(r,"){1,7}|:))")],o="(?:%[0-9a-zA-Z]{1,})?",a="(?:".concat(i.join("|"),")").concat(o),l=new RegExp("(?:^".concat(n,"$)|(?:^").concat(a,"$)")),g=new RegExp("^".concat(n,"$")),u=new RegExp("^".concat(a,"$")),d=function(H){return H&&H.exact?l:new RegExp("(?:".concat(t(H)).concat(n).concat(t(H),")|(?:").concat(t(H)).concat(a).concat(t(H),")"),"g")};d.v4=function(J){return J&&J.exact?g:new RegExp("".concat(t(J)).concat(n).concat(t(J)),"g")},d.v6=function(J){return J&&J.exact?u:new RegExp("".concat(t(J)).concat(a).concat(t(J)),"g")};var C="(?:(?:[a-z]+:)?//)",f="(?:\\S+(?::\\S*)?@)?",m=d.v4().source,b=d.v6().source,p="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",y="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",S="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",v="(?::\\d{2,5})?",B='(?:[/?#][^\\s"]*)?',W="(?:".concat(C,"|www\\.)").concat(f,"(?:localhost|").concat(m,"|").concat(b,"|").concat(p).concat(y).concat(S,")").concat(v).concat(B);return Vh=new RegExp("(?:^".concat(W,"$)"),"i"),Vh};var GR={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},sf={integer:function(t){return sf.number(t)&&parseInt(t,10)===t},float:function(t){return sf.number(t)&&!sf.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch{return!1}},date:function(t){return typeof t.getTime=="function"&&typeof t.getMonth=="function"&&typeof t.getYear=="function"&&!isNaN(t.getTime())},number:function(t){return isNaN(t)?!1:typeof t=="number"},object:function(t){return wt(t)==="object"&&!sf.array(t)},method:function(t){return typeof t=="function"},email:function(t){return typeof t=="string"&&t.length<=320&&!!t.match(GR.email)},url:function(t){return typeof t=="string"&&t.length<=2048&&!!t.match(Sj())},hex:function(t){return typeof t=="string"&&!!t.match(GR.hex)}},Zj=function(t,n,r,i,o){if(t.required&&n===void 0){_3(t,n,r,i,o);return}var a=["integer","float","array","regexp","object","method","email","number","date","url","hex"],l=t.type;a.indexOf(l)>-1?sf[l](n)||i.push(Ua(o.messages.types[l],t.fullField,t.type)):l&&wt(n)!==t.type&&i.push(Ua(o.messages.types[l],t.fullField,t.type))},Gj=function(t,n,r,i,o){(/^\s+$/.test(n)||n==="")&&i.push(Ua(o.messages.whitespace,t.fullField))};const or={required:_3,whitespace:Gj,type:Zj,range:vj,enum:bj,pattern:yj};var Bj=function(t,n,r,i,o){var a=[],l=t.required||!t.required&&i.hasOwnProperty(t.field);if(l){if(eo(n)&&!t.required)return r();or.required(t,n,i,a,o)}r(a)},Rj=function(t,n,r,i,o){var a=[],l=t.required||!t.required&&i.hasOwnProperty(t.field);if(l){if(n==null&&!t.required)return r();or.required(t,n,i,a,o,"array"),n!=null&&(or.type(t,n,i,a,o),or.range(t,n,i,a,o))}r(a)},wj=function(t,n,r,i,o){var a=[],l=t.required||!t.required&&i.hasOwnProperty(t.field);if(l){if(eo(n)&&!t.required)return r();or.required(t,n,i,a,o),n!==void 0&&or.type(t,n,i,a,o)}r(a)},Wj=function(t,n,r,i,o){var a=[],l=t.required||!t.required&&i.hasOwnProperty(t.field);if(l){if(eo(n,"date")&&!t.required)return r();if(or.required(t,n,i,a,o),!eo(n,"date")){var g;n instanceof Date?g=n:g=new Date(n),or.type(t,g,i,a,o),g&&or.range(t,g.getTime(),i,a,o)}}r(a)},Vj="enum",kj=function(t,n,r,i,o){var a=[],l=t.required||!t.required&&i.hasOwnProperty(t.field);if(l){if(eo(n)&&!t.required)return r();or.required(t,n,i,a,o),n!==void 0&&or[Vj](t,n,i,a,o)}r(a)},Nj=function(t,n,r,i,o){var a=[],l=t.required||!t.required&&i.hasOwnProperty(t.field);if(l){if(eo(n)&&!t.required)return r();or.required(t,n,i,a,o),n!==void 0&&(or.type(t,n,i,a,o),or.range(t,n,i,a,o))}r(a)},Xj=function(t,n,r,i,o){var a=[],l=t.required||!t.required&&i.hasOwnProperty(t.field);if(l){if(eo(n)&&!t.required)return r();or.required(t,n,i,a,o),n!==void 0&&(or.type(t,n,i,a,o),or.range(t,n,i,a,o))}r(a)},Jj=function(t,n,r,i,o){var a=[],l=t.required||!t.required&&i.hasOwnProperty(t.field);if(l){if(eo(n)&&!t.required)return r();or.required(t,n,i,a,o),n!==void 0&&or.type(t,n,i,a,o)}r(a)},xj=function(t,n,r,i,o){var a=[],l=t.required||!t.required&&i.hasOwnProperty(t.field);if(l){if(n===""&&(n=void 0),eo(n)&&!t.required)return r();or.required(t,n,i,a,o),n!==void 0&&(or.type(t,n,i,a,o),or.range(t,n,i,a,o))}r(a)},Hj=function(t,n,r,i,o){var a=[],l=t.required||!t.required&&i.hasOwnProperty(t.field);if(l){if(eo(n)&&!t.required)return r();or.required(t,n,i,a,o),n!==void 0&&or.type(t,n,i,a,o)}r(a)},Yj=function(t,n,r,i,o){var a=[],l=t.required||!t.required&&i.hasOwnProperty(t.field);if(l){if(eo(n,"string")&&!t.required)return r();or.required(t,n,i,a,o),eo(n,"string")||or.pattern(t,n,i,a,o)}r(a)},Ej=function(t,n,r,i,o){var a=[],l=t.required||!t.required&&i.hasOwnProperty(t.field);if(l){if(eo(n)&&!t.required)return r();or.required(t,n,i,a,o),eo(n)||or.type(t,n,i,a,o)}r(a)},Fj=function(t,n,r,i,o){var a=[],l=Array.isArray(n)?"array":wt(n);or.required(t,n,i,a,o,l),r(a)},Kj=function(t,n,r,i,o){var a=[],l=t.required||!t.required&&i.hasOwnProperty(t.field);if(l){if(eo(n,"string")&&!t.required)return r();or.required(t,n,i,a,o,"string"),eo(n,"string")||(or.type(t,n,i,a,o),or.range(t,n,i,a,o),or.pattern(t,n,i,a,o),t.whitespace===!0&&or.whitespace(t,n,i,a,o))}r(a)},Hy=function(t,n,r,i,o){var a=t.type,l=[],g=t.required||!t.required&&i.hasOwnProperty(t.field);if(g){if(eo(n,a)&&!t.required)return r();or.required(t,n,i,l,o,a),eo(n,a)||or.type(t,n,i,l,o)}r(l)};const yf={string:Kj,method:Jj,number:xj,boolean:wj,regexp:Ej,integer:Xj,float:Nj,array:Rj,object:Hj,enum:kj,pattern:Yj,date:Wj,url:Hy,hex:Hy,email:Hy,required:Fj,any:Bj};var Rm=function(){function e(t){zi(this,e),fe(this,"rules",null),fe(this,"_messages",X2),this.define(t)}return Di(e,[{key:"define",value:function(n){var r=this;if(!n)throw new Error("Cannot configure a schema with no rules");if(wt(n)!=="object"||Array.isArray(n))throw new Error("Rules must be an object");this.rules={},Object.keys(n).forEach(function(i){var o=n[i];r.rules[i]=Array.isArray(o)?o:[o]})}},{key:"messages",value:function(n){return n&&(this._messages=ZR(N2(),n)),this._messages}},{key:"validate",value:function(n){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},a=n,l=i,g=o;if(typeof l=="function"&&(g=l,l={}),!this.rules||Object.keys(this.rules).length===0)return g&&g(null,a),Promise.resolve(a);function u(b){var p=[],y={};function S(B){if(Array.isArray(B)){var W;p=(W=p).concat.apply(W,Gt(B))}else p.push(B)}for(var v=0;v<b.length;v++)S(b[v]);p.length?(y=x2(p),g(p,y)):g(null,a)}if(l.messages){var d=this.messages();d===X2&&(d=N2()),ZR(d,l.messages),l.messages=d}else l.messages=this.messages();var C={},f=l.keys||Object.keys(this.rules);f.forEach(function(b){var p=r.rules[b],y=a[b];p.forEach(function(S){var v=S;typeof v.transform=="function"&&(a===n&&(a=he({},a)),y=a[b]=v.transform(y),y!=null&&(v.type=v.type||(Array.isArray(y)?"array":wt(y)))),typeof v=="function"?v={validator:v}:v=he({},v),v.validator=r.getValidationMethod(v),v.validator&&(v.field=b,v.fullField=v.fullField||b,v.type=r.getType(v),C[b]=C[b]||[],C[b].push({rule:v,value:y,source:a,field:b}))})});var m={};return hj(C,l,function(b,p){var y=b.rule,S=(y.type==="object"||y.type==="array")&&(wt(y.fields)==="object"||wt(y.defaultField)==="object");S=S&&(y.required||!y.required&&b.value),y.field=b.field;function v(x,E){return he(he({},E),{},{fullField:"".concat(y.fullField,".").concat(x),fullFields:y.fullFields?[].concat(Gt(y.fullFields),[x]):[x]})}function B(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],E=Array.isArray(x)?x:[x];!l.suppressWarning&&E.length&&e.warning("async-validator:",E),E.length&&y.message!==void 0&&(E=[].concat(y.message));var F=E.map(SR(y,a));if(l.first&&F.length)return m[y.field]=1,p(F);if(!S)p(F);else{if(y.required&&!b.value)return y.message!==void 0?F=[].concat(y.message).map(SR(y,a)):l.error&&(F=[l.error(y,Ua(l.messages.required,y.field))]),p(F);var w={};y.defaultField&&Object.keys(b.value).map(function(M){w[M]=y.defaultField}),w=he(he({},w),b.rule.fields);var V={};Object.keys(w).forEach(function(M){var L=w[M],$=Array.isArray(L)?L:[L];V[M]=$.map(v.bind(null,M))});var Y=new e(V);Y.messages(l.messages),b.rule.options&&(b.rule.options.messages=l.messages,b.rule.options.error=l.error),Y.validate(b.value,b.rule.options||l,function(M){var L=[];F&&F.length&&L.push.apply(L,Gt(F)),M&&M.length&&L.push.apply(L,Gt(M)),p(L.length?L:null)})}}var W;if(y.asyncValidator)W=y.asyncValidator(y,b.value,B,b.source,l);else if(y.validator){try{W=y.validator(y,b.value,B,b.source,l)}catch(x){var J,H;(J=(H=console).error)===null||J===void 0||J.call(H,x),l.suppressValidatorError||setTimeout(function(){throw x},0),B(x.message)}W===!0?B():W===!1?B(typeof y.message=="function"?y.message(y.fullField||y.field):y.message||"".concat(y.fullField||y.field," fails")):W instanceof Array?B(W):W instanceof Error&&B(W.message)}W&&W.then&&W.then(function(){return B()},function(x){return B(x)})},function(b){u(b)},a)}},{key:"getType",value:function(n){if(n.type===void 0&&n.pattern instanceof RegExp&&(n.type="pattern"),typeof n.validator!="function"&&n.type&&!yf.hasOwnProperty(n.type))throw new Error(Ua("Unknown rule type %s",n.type));return n.type||"string"}},{key:"getValidationMethod",value:function(n){if(typeof n.validator=="function")return n.validator;var r=Object.keys(n),i=r.indexOf("message");return i!==-1&&r.splice(i,1),r.length===1&&r[0]==="required"?yf.required:yf[this.getType(n)]||void 0}}]),e}();fe(Rm,"register",function(t,n){if(typeof n!="function")throw new Error("Cannot register a validator by type, validator is not a function");yf[t]=n});fe(Rm,"warning",Ij);fe(Rm,"messages",X2);fe(Rm,"validators",yf);var Da="'${name}' is not a valid ${type}",U3={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:Da,method:Da,array:Da,object:Da,number:Da,date:Da,boolean:Da,integer:Da,float:Da,regexp:Da,email:Da,url:Da,hex:Da},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},BR=Rm;function Lj(e,t){return e.replace(/\\?\$\{\w+\}/g,function(n){if(n.startsWith("\\"))return n.slice(1);var r=n.slice(2,-1);return t[r]})}var RR="CODE_LOGIC_ERROR";function H2(e,t,n,r,i){return Y2.apply(this,arguments)}function Y2(){return Y2=ud(ua().mark(function e(t,n,r,i,o){var a,l,g,u,d,C,f,m,b;return ua().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return a=he({},r),delete a.ruleIndex,BR.warning=function(){},a.validator&&(l=a.validator,a.validator=function(){try{return l.apply(void 0,arguments)}catch(S){return console.error(S),Promise.reject(RR)}}),g=null,a&&a.type==="array"&&a.defaultField&&(g=a.defaultField,delete a.defaultField),u=new BR(fe({},t,[a])),d=lI(U3,i.validateMessages),u.messages(d),C=[],y.prev=10,y.next=13,Promise.resolve(u.validate(fe({},t,n),he({},i)));case 13:y.next=18;break;case 15:y.prev=15,y.t0=y.catch(10),y.t0.errors&&(C=y.t0.errors.map(function(S,v){var B=S.message,W=B===RR?d.default:B;return I.isValidElement(W)?I.cloneElement(W,{key:"error_".concat(v)}):W}));case 18:if(!(!C.length&&g)){y.next=23;break}return y.next=21,Promise.all(n.map(function(S,v){return H2("".concat(t,".").concat(v),S,g,i,o)}));case 21:return f=y.sent,y.abrupt("return",f.reduce(function(S,v){return[].concat(Gt(S),Gt(v))},[]));case 23:return m=he(he({},r),{},{name:t,enum:(r.enum||[]).join(", ")},o),b=C.map(function(S){return typeof S=="string"?Lj(S,m):S}),y.abrupt("return",b);case 26:case"end":return y.stop()}},e,null,[[10,15]])})),Y2.apply(this,arguments)}function Mj(e,t,n,r,i,o){var a=e.join("."),l=n.map(function(d,C){var f=d.validator,m=he(he({},d),{},{ruleIndex:C});return f&&(m.validator=function(b,p,y){var S=!1,v=function(){for(var J=arguments.length,H=new Array(J),x=0;x<J;x++)H[x]=arguments[x];Promise.resolve().then(function(){wo(!S,"Your validator function has already return a promise. `callback` will be ignored."),S||y.apply(void 0,H)})},B=f(b,p,v);S=B&&typeof B.then=="function"&&typeof B.catch=="function",wo(S,"`callback` is deprecated. Please return a promise instead."),S&&B.then(function(){y()}).catch(function(W){y(W||" ")})}),m}).sort(function(d,C){var f=d.warningOnly,m=d.ruleIndex,b=C.warningOnly,p=C.ruleIndex;return!!f==!!b?m-p:f?1:-1}),g;if(i===!0)g=new Promise(function(){var d=ud(ua().mark(function C(f,m){var b,p,y;return ua().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:b=0;case 1:if(!(b<l.length)){v.next=12;break}return p=l[b],v.next=5,H2(a,t,p,r,o);case 5:if(y=v.sent,!y.length){v.next=9;break}return m([{errors:y,rule:p}]),v.abrupt("return");case 9:b+=1,v.next=1;break;case 12:f([]);case 13:case"end":return v.stop()}},C)}));return function(C,f){return d.apply(this,arguments)}}());else{var u=l.map(function(d){return H2(a,t,d,r,o).then(function(C){return{errors:C,rule:d}})});g=(i?zj(u):Tj(u)).then(function(d){return Promise.reject(d)})}return g.catch(function(d){return d}),g}function Tj(e){return E2.apply(this,arguments)}function E2(){return E2=ud(ua().mark(function e(t){return ua().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Promise.all(t).then(function(i){var o,a=(o=[]).concat.apply(o,Gt(i));return a}));case 1:case"end":return r.stop()}},e)})),E2.apply(this,arguments)}function zj(e){return F2.apply(this,arguments)}function F2(){return F2=ud(ua().mark(function e(t){var n;return ua().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return n=0,i.abrupt("return",new Promise(function(o){t.forEach(function(a){a.then(function(l){l.errors.length&&o([l]),n+=1,n===t.length&&o([])})})}));case 2:case"end":return i.stop()}},e)})),F2.apply(this,arguments)}function Xi(e){return k2(e)}function wR(e,t){var n={};return t.forEach(function(r){var i=Ys(e,r);n=_l(n,r,i)}),n}function pI(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return e&&e.some(function(r){return j3(t,r,n)})}function j3(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!e||!t||!n&&e.length!==t.length?!1:t.every(function(r,i){return e[i]===r})}function Dj(e,t){if(e===t)return!0;if(!e&&t||e&&!t||!e||!t||wt(e)!=="object"||wt(t)!=="object")return!1;var n=Object.keys(e),r=Object.keys(t),i=new Set([].concat(n,r));return Gt(i).every(function(o){var a=e[o],l=t[o];return typeof a=="function"&&typeof l=="function"?!0:a===l})}function Pj(e){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&wt(t.target)==="object"&&e in t.target?t.target[e]:t}function WR(e,t,n){var r=e.length;if(t<0||t>=r||n<0||n>=r)return e;var i=e[t],o=t-n;return o>0?[].concat(Gt(e.slice(0,n)),[i],Gt(e.slice(n,t)),Gt(e.slice(t+1,r))):o<0?[].concat(Gt(e.slice(0,t)),Gt(e.slice(t+1,n+1)),[i],Gt(e.slice(n+1,r))):e}var Oj=["name"],ml=[];function Yy(e,t,n,r,i,o){return typeof e=="function"?e(t,n,"source"in o?{source:o.source}:{}):r!==i}var zZ=function(e){Kg(n,e);var t=Lg(n);function n(r){var i;if(zi(this,n),i=t.call(this,r),fe(On(i),"state",{resetCount:0}),fe(On(i),"cancelRegisterFunc",null),fe(On(i),"mounted",!1),fe(On(i),"touched",!1),fe(On(i),"dirty",!1),fe(On(i),"validatePromise",void 0),fe(On(i),"prevValidating",void 0),fe(On(i),"errors",ml),fe(On(i),"warnings",ml),fe(On(i),"cancelRegister",function(){var g=i.props,u=g.preserve,d=g.isListField,C=g.name;i.cancelRegisterFunc&&i.cancelRegisterFunc(d,u,Xi(C)),i.cancelRegisterFunc=null}),fe(On(i),"getNamePath",function(){var g=i.props,u=g.name,d=g.fieldContext,C=d.prefixName,f=C===void 0?[]:C;return u!==void 0?[].concat(Gt(f),Gt(u)):[]}),fe(On(i),"getRules",function(){var g=i.props,u=g.rules,d=u===void 0?[]:u,C=g.fieldContext;return d.map(function(f){return typeof f=="function"?f(C):f})}),fe(On(i),"refresh",function(){i.mounted&&i.setState(function(g){var u=g.resetCount;return{resetCount:u+1}})}),fe(On(i),"metaCache",null),fe(On(i),"triggerMetaEvent",function(g){var u=i.props.onMetaChange;if(u){var d=he(he({},i.getMeta()),{},{destroy:g});Lf(i.metaCache,d)||u(d),i.metaCache=d}else i.metaCache=null}),fe(On(i),"onStoreChange",function(g,u,d){var C=i.props,f=C.shouldUpdate,m=C.dependencies,b=m===void 0?[]:m,p=C.onReset,y=d.store,S=i.getNamePath(),v=i.getValue(g),B=i.getValue(y),W=u&&pI(u,S);switch(d.type==="valueUpdate"&&d.source==="external"&&!Lf(v,B)&&(i.touched=!0,i.dirty=!0,i.validatePromise=null,i.errors=ml,i.warnings=ml,i.triggerMetaEvent()),d.type){case"reset":if(!u||W){i.touched=!1,i.dirty=!1,i.validatePromise=void 0,i.errors=ml,i.warnings=ml,i.triggerMetaEvent(),p==null||p(),i.refresh();return}break;case"remove":{if(f&&Yy(f,g,y,v,B,d)){i.reRender();return}break}case"setField":{var J=d.data;if(W){"touched"in J&&(i.touched=J.touched),"validating"in J&&!("originRCField"in J)&&(i.validatePromise=J.validating?Promise.resolve([]):null),"errors"in J&&(i.errors=J.errors||ml),"warnings"in J&&(i.warnings=J.warnings||ml),i.dirty=!0,i.triggerMetaEvent(),i.reRender();return}else if("value"in J&&pI(u,S,!0)){i.reRender();return}if(f&&!S.length&&Yy(f,g,y,v,B,d)){i.reRender();return}break}case"dependenciesUpdate":{var H=b.map(Xi);if(H.some(function(x){return pI(d.relatedFields,x)})){i.reRender();return}break}default:if(W||(!b.length||S.length||f)&&Yy(f,g,y,v,B,d)){i.reRender();return}break}f===!0&&i.reRender()}),fe(On(i),"validateRules",function(g){var u=i.getNamePath(),d=i.getValue(),C=g||{},f=C.triggerName,m=C.validateOnly,b=m===void 0?!1:m,p=Promise.resolve().then(ud(ua().mark(function y(){var S,v,B,W,J,H,x;return ua().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(i.mounted){F.next=2;break}return F.abrupt("return",[]);case 2:if(S=i.props,v=S.validateFirst,B=v===void 0?!1:v,W=S.messageVariables,J=S.validateDebounce,H=i.getRules(),f&&(H=H.filter(function(w){return w}).filter(function(w){var V=w.validateTrigger;if(!V)return!0;var Y=k2(V);return Y.includes(f)})),!(J&&f)){F.next=10;break}return F.next=8,new Promise(function(w){setTimeout(w,J)});case 8:if(i.validatePromise===p){F.next=10;break}return F.abrupt("return",[]);case 10:return x=Mj(u,d,H,g,B,W),x.catch(function(w){return w}).then(function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ml;if(i.validatePromise===p){var V;i.validatePromise=null;var Y=[],M=[];(V=w.forEach)===null||V===void 0||V.call(w,function(L){var $=L.rule.warningOnly,U=L.errors,_=U===void 0?ml:U;$?M.push.apply(M,Gt(_)):Y.push.apply(Y,Gt(_))}),i.errors=Y,i.warnings=M,i.triggerMetaEvent(),i.reRender()}}),F.abrupt("return",x);case 13:case"end":return F.stop()}},y)})));return b||(i.validatePromise=p,i.dirty=!0,i.errors=ml,i.warnings=ml,i.triggerMetaEvent(),i.reRender()),p}),fe(On(i),"isFieldValidating",function(){return!!i.validatePromise}),fe(On(i),"isFieldTouched",function(){return i.touched}),fe(On(i),"isFieldDirty",function(){if(i.dirty||i.props.initialValue!==void 0)return!0;var g=i.props.fieldContext,u=g.getInternalHooks(zu),d=u.getInitialValue;return d(i.getNamePath())!==void 0}),fe(On(i),"getErrors",function(){return i.errors}),fe(On(i),"getWarnings",function(){return i.warnings}),fe(On(i),"isListField",function(){return i.props.isListField}),fe(On(i),"isList",function(){return i.props.isList}),fe(On(i),"isPreserve",function(){return i.props.preserve}),fe(On(i),"getMeta",function(){i.prevValidating=i.isFieldValidating();var g={touched:i.isFieldTouched(),validating:i.prevValidating,errors:i.errors,warnings:i.warnings,name:i.getNamePath(),validated:i.validatePromise===null};return g}),fe(On(i),"getOnlyChild",function(g){if(typeof g=="function"){var u=i.getMeta();return he(he({},i.getOnlyChild(g(i.getControlled(),u,i.props.fieldContext))),{},{isFunction:!0})}var d=el(g);return d.length!==1||!I.isValidElement(d[0])?{child:d,isFunction:!1}:{child:d[0],isFunction:!1}}),fe(On(i),"getValue",function(g){var u=i.props.fieldContext.getFieldsValue,d=i.getNamePath();return Ys(g||u(!0),d)}),fe(On(i),"getControlled",function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=i.props,d=u.name,C=u.trigger,f=u.validateTrigger,m=u.getValueFromEvent,b=u.normalize,p=u.valuePropName,y=u.getValueProps,S=u.fieldContext,v=f!==void 0?f:S.validateTrigger,B=i.getNamePath(),W=S.getInternalHooks,J=S.getFieldsValue,H=W(zu),x=H.dispatch,E=i.getValue(),F=y||function(L){return fe({},p,L)},w=g[C],V=d!==void 0?F(E):{},Y=he(he({},g),V);Y[C]=function(){i.touched=!0,i.dirty=!0,i.triggerMetaEvent();for(var L,$=arguments.length,U=new Array($),_=0;_<$;_++)U[_]=arguments[_];m?L=m.apply(void 0,U):L=Pj.apply(void 0,[p].concat(U)),b&&(L=b(L,E,J(!0))),L!==E&&x({type:"updateValue",namePath:B,value:L}),w&&w.apply(void 0,U)};var M=k2(v||[]);return M.forEach(function(L){var $=Y[L];Y[L]=function(){$&&$.apply(void 0,arguments);var U=i.props.rules;U&&U.length&&x({type:"validateField",namePath:B,triggerName:L})}}),Y}),r.fieldContext){var o=r.fieldContext.getInternalHooks,a=o(zu),l=a.initEntityValue;l(On(i))}return i}return Di(n,[{key:"componentDidMount",value:function(){var i=this.props,o=i.shouldUpdate,a=i.fieldContext;if(this.mounted=!0,a){var l=a.getInternalHooks,g=l(zu),u=g.registerField;this.cancelRegisterFunc=u(this)}o===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var i=this.state.resetCount,o=this.props.children,a=this.getOnlyChild(o),l=a.child,g=a.isFunction,u;return g?u=l:I.isValidElement(l)?u=I.cloneElement(l,this.getControlled(l.props)):(wo(!l,"`children` of Field is not validate ReactElement."),u=l),I.createElement(I.Fragment,{key:i},u)}}]),n}(I.Component);fe(zZ,"contextType",TI);fe(zZ,"defaultProps",{trigger:"onChange",valuePropName:"value"});function Q3(e){var t,n=e.name,r=Wn(e,Oj),i=I.useContext(TI),o=I.useContext(vp),a=n!==void 0?Xi(n):void 0,l=(t=r.isListField)!==null&&t!==void 0?t:!!o,g="keep";return l||(g="_".concat((a||[]).join("_"))),I.createElement(zZ,lt({key:g,name:a,isListField:l},r,{fieldContext:i}))}function _j(e){var t=e.name,n=e.initialValue,r=e.children,i=e.rules,o=e.validateTrigger,a=e.isListField,l=I.useContext(TI),g=I.useContext(vp),u=I.useRef({keys:[],id:0}),d=u.current,C=I.useMemo(function(){var p=Xi(l.prefixName)||[];return[].concat(Gt(p),Gt(Xi(t)))},[l.prefixName,t]),f=I.useMemo(function(){return he(he({},l),{},{prefixName:C})},[l,C]),m=I.useMemo(function(){return{getKey:function(y){var S=C.length,v=y[S];return[d.keys[v],y.slice(S+1)]}}},[C]);if(typeof r!="function")return wo(!1,"Form.List only accepts function as children."),null;var b=function(y,S,v){var B=v.source;return B==="internal"?!1:y!==S};return I.createElement(vp.Provider,{value:m},I.createElement(TI.Provider,{value:f},I.createElement(Q3,{name:[],shouldUpdate:b,rules:i,validateTrigger:o,initialValue:n,isList:!0,isListField:a??!!g},function(p,y){var S=p.value,v=S===void 0?[]:S,B=p.onChange,W=l.getFieldValue,J=function(){var F=W(C||[]);return F||[]},H={add:function(F,w){var V=J();w>=0&&w<=V.length?(d.keys=[].concat(Gt(d.keys.slice(0,w)),[d.id],Gt(d.keys.slice(w))),B([].concat(Gt(V.slice(0,w)),[F],Gt(V.slice(w))))):(d.keys=[].concat(Gt(d.keys),[d.id]),B([].concat(Gt(V),[F]))),d.id+=1},remove:function(F){var w=J(),V=new Set(Array.isArray(F)?F:[F]);V.size<=0||(d.keys=d.keys.filter(function(Y,M){return!V.has(M)}),B(w.filter(function(Y,M){return!V.has(M)})))},move:function(F,w){if(F!==w){var V=J();F<0||F>=V.length||w<0||w>=V.length||(d.keys=WR(d.keys,F,w),B(WR(V,F,w)))}}},x=v||[];return Array.isArray(x)||(x=[]),r(x.map(function(E,F){var w=d.keys[F];return w===void 0&&(d.keys[F]=d.id,w=d.keys[F],d.id+=1),{name:F,key:w,isListField:!0}}),H,y)})))}function Uj(e){var t=!1,n=e.length,r=[];return e.length?new Promise(function(i,o){e.forEach(function(a,l){a.catch(function(g){return t=!0,g}).then(function(g){n-=1,r[l]=g,!(n>0)&&(t&&o(r),i(r))})})}):Promise.resolve([])}var $3="__@field_split__";function Ey(e){return e.map(function(t){return"".concat(wt(t),":").concat(t)}).join($3)}var Kd=function(){function e(){zi(this,e),fe(this,"kvs",new Map)}return Di(e,[{key:"set",value:function(n,r){this.kvs.set(Ey(n),r)}},{key:"get",value:function(n){return this.kvs.get(Ey(n))}},{key:"update",value:function(n,r){var i=this.get(n),o=r(i);o?this.set(n,o):this.delete(n)}},{key:"delete",value:function(n){this.kvs.delete(Ey(n))}},{key:"map",value:function(n){return Gt(this.kvs.entries()).map(function(r){var i=xe(r,2),o=i[0],a=i[1],l=o.split($3);return n({key:l.map(function(g){var u=g.match(/^([^:]*):(.*)$/),d=xe(u,3),C=d[1],f=d[2];return C==="number"?Number(f):f}),value:a})})}},{key:"toJSON",value:function(){var n={};return this.map(function(r){var i=r.key,o=r.value;return n[i.join(".")]=o,null}),n}}]),e}(),jj=["name"],Qj=Di(function e(t){var n=this;zi(this,e),fe(this,"formHooked",!1),fe(this,"forceRootUpdate",void 0),fe(this,"subscribable",!0),fe(this,"store",{}),fe(this,"fieldEntities",[]),fe(this,"initialValues",{}),fe(this,"callbacks",{}),fe(this,"validateMessages",null),fe(this,"preserve",null),fe(this,"lastValidatePromise",null),fe(this,"getForm",function(){return{getFieldValue:n.getFieldValue,getFieldsValue:n.getFieldsValue,getFieldError:n.getFieldError,getFieldWarning:n.getFieldWarning,getFieldsError:n.getFieldsError,isFieldsTouched:n.isFieldsTouched,isFieldTouched:n.isFieldTouched,isFieldValidating:n.isFieldValidating,isFieldsValidating:n.isFieldsValidating,resetFields:n.resetFields,setFields:n.setFields,setFieldValue:n.setFieldValue,setFieldsValue:n.setFieldsValue,validateFields:n.validateFields,submit:n.submit,_init:!0,getInternalHooks:n.getInternalHooks}}),fe(this,"getInternalHooks",function(r){return r===zu?(n.formHooked=!0,{dispatch:n.dispatch,initEntityValue:n.initEntityValue,registerField:n.registerField,useSubscribe:n.useSubscribe,setInitialValues:n.setInitialValues,destroyForm:n.destroyForm,setCallbacks:n.setCallbacks,setValidateMessages:n.setValidateMessages,getFields:n.getFields,setPreserve:n.setPreserve,getInitialValue:n.getInitialValue,registerWatch:n.registerWatch}):(wo(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)}),fe(this,"useSubscribe",function(r){n.subscribable=r}),fe(this,"prevWithoutPreserves",null),fe(this,"setInitialValues",function(r,i){if(n.initialValues=r||{},i){var o,a=lI(r,n.store);(o=n.prevWithoutPreserves)===null||o===void 0||o.map(function(l){var g=l.key;a=_l(a,g,Ys(r,g))}),n.prevWithoutPreserves=null,n.updateStore(a)}}),fe(this,"destroyForm",function(r){if(r)n.updateStore({});else{var i=new Kd;n.getFieldEntities(!0).forEach(function(o){n.isMergedPreserve(o.isPreserve())||i.set(o.getNamePath(),!0)}),n.prevWithoutPreserves=i}}),fe(this,"getInitialValue",function(r){var i=Ys(n.initialValues,r);return r.length?lI(i):i}),fe(this,"setCallbacks",function(r){n.callbacks=r}),fe(this,"setValidateMessages",function(r){n.validateMessages=r}),fe(this,"setPreserve",function(r){n.preserve=r}),fe(this,"watchList",[]),fe(this,"registerWatch",function(r){return n.watchList.push(r),function(){n.watchList=n.watchList.filter(function(i){return i!==r})}}),fe(this,"notifyWatch",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(n.watchList.length){var i=n.getFieldsValue(),o=n.getFieldsValue(!0);n.watchList.forEach(function(a){a(i,o,r)})}}),fe(this,"timeoutId",null),fe(this,"warningUnhooked",function(){}),fe(this,"updateStore",function(r){n.store=r}),fe(this,"getFieldEntities",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return r?n.fieldEntities.filter(function(i){return i.getNamePath().length}):n.fieldEntities}),fe(this,"getFieldsMap",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=new Kd;return n.getFieldEntities(r).forEach(function(o){var a=o.getNamePath();i.set(a,o)}),i}),fe(this,"getFieldEntitiesForNamePathList",function(r){if(!r)return n.getFieldEntities(!0);var i=n.getFieldsMap(!0);return r.map(function(o){var a=Xi(o);return i.get(a)||{INVALIDATE_NAME_PATH:Xi(o)}})}),fe(this,"getFieldsValue",function(r,i){n.warningUnhooked();var o,a,l;if(r===!0||Array.isArray(r)?(o=r,a=i):r&&wt(r)==="object"&&(l=r.strict,a=r.filter),o===!0&&!a)return n.store;var g=n.getFieldEntitiesForNamePathList(Array.isArray(o)?o:null),u=[];return g.forEach(function(d){var C,f,m="INVALIDATE_NAME_PATH"in d?d.INVALIDATE_NAME_PATH:d.getNamePath();if(l){var b,p;if((b=(p=d).isList)!==null&&b!==void 0&&b.call(p))return}else if(!o&&(C=(f=d).isListField)!==null&&C!==void 0&&C.call(f))return;if(!a)u.push(m);else{var y="getMeta"in d?d.getMeta():null;a(y)&&u.push(m)}}),wR(n.store,u.map(Xi))}),fe(this,"getFieldValue",function(r){n.warningUnhooked();var i=Xi(r);return Ys(n.store,i)}),fe(this,"getFieldsError",function(r){n.warningUnhooked();var i=n.getFieldEntitiesForNamePathList(r);return i.map(function(o,a){return o&&!("INVALIDATE_NAME_PATH"in o)?{name:o.getNamePath(),errors:o.getErrors(),warnings:o.getWarnings()}:{name:Xi(r[a]),errors:[],warnings:[]}})}),fe(this,"getFieldError",function(r){n.warningUnhooked();var i=Xi(r),o=n.getFieldsError([i])[0];return o.errors}),fe(this,"getFieldWarning",function(r){n.warningUnhooked();var i=Xi(r),o=n.getFieldsError([i])[0];return o.warnings}),fe(this,"isFieldsTouched",function(){n.warningUnhooked();for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=i[0],l=i[1],g,u=!1;i.length===0?g=null:i.length===1?Array.isArray(a)?(g=a.map(Xi),u=!1):(g=null,u=a):(g=a.map(Xi),u=l);var d=n.getFieldEntities(!0),C=function(y){return y.isFieldTouched()};if(!g)return u?d.every(function(p){return C(p)||p.isList()}):d.some(C);var f=new Kd;g.forEach(function(p){f.set(p,[])}),d.forEach(function(p){var y=p.getNamePath();g.forEach(function(S){S.every(function(v,B){return y[B]===v})&&f.update(S,function(v){return[].concat(Gt(v),[p])})})});var m=function(y){return y.some(C)},b=f.map(function(p){var y=p.value;return y});return u?b.every(m):b.some(m)}),fe(this,"isFieldTouched",function(r){return n.warningUnhooked(),n.isFieldsTouched([r])}),fe(this,"isFieldsValidating",function(r){n.warningUnhooked();var i=n.getFieldEntities();if(!r)return i.some(function(a){return a.isFieldValidating()});var o=r.map(Xi);return i.some(function(a){var l=a.getNamePath();return pI(o,l)&&a.isFieldValidating()})}),fe(this,"isFieldValidating",function(r){return n.warningUnhooked(),n.isFieldsValidating([r])}),fe(this,"resetWithFieldInitialValue",function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=new Kd,o=n.getFieldEntities(!0);o.forEach(function(g){var u=g.props.initialValue,d=g.getNamePath();if(u!==void 0){var C=i.get(d)||new Set;C.add({entity:g,value:u}),i.set(d,C)}});var a=function(u){u.forEach(function(d){var C=d.props.initialValue;if(C!==void 0){var f=d.getNamePath(),m=n.getInitialValue(f);if(m!==void 0)wo(!1,"Form already set 'initialValues' with path '".concat(f.join("."),"'. Field can not overwrite it."));else{var b=i.get(f);if(b&&b.size>1)wo(!1,"Multiple Field with path '".concat(f.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(b){var p=n.getFieldValue(f),y=d.isListField();!y&&(!r.skipExist||p===void 0)&&n.updateStore(_l(n.store,f,Gt(b)[0].value))}}}})},l;r.entities?l=r.entities:r.namePathList?(l=[],r.namePathList.forEach(function(g){var u=i.get(g);if(u){var d;(d=l).push.apply(d,Gt(Gt(u).map(function(C){return C.entity})))}})):l=o,a(l)}),fe(this,"resetFields",function(r){n.warningUnhooked();var i=n.store;if(!r){n.updateStore(lI(n.initialValues)),n.resetWithFieldInitialValue(),n.notifyObservers(i,null,{type:"reset"}),n.notifyWatch();return}var o=r.map(Xi);o.forEach(function(a){var l=n.getInitialValue(a);n.updateStore(_l(n.store,a,l))}),n.resetWithFieldInitialValue({namePathList:o}),n.notifyObservers(i,o,{type:"reset"}),n.notifyWatch(o)}),fe(this,"setFields",function(r){n.warningUnhooked();var i=n.store,o=[];r.forEach(function(a){var l=a.name,g=Wn(a,jj),u=Xi(l);o.push(u),"value"in g&&n.updateStore(_l(n.store,u,g.value)),n.notifyObservers(i,[u],{type:"setField",data:a})}),n.notifyWatch(o)}),fe(this,"getFields",function(){var r=n.getFieldEntities(!0),i=r.map(function(o){var a=o.getNamePath(),l=o.getMeta(),g=he(he({},l),{},{name:a,value:n.getFieldValue(a)});return Object.defineProperty(g,"originRCField",{value:!0}),g});return i}),fe(this,"initEntityValue",function(r){var i=r.props.initialValue;if(i!==void 0){var o=r.getNamePath(),a=Ys(n.store,o);a===void 0&&n.updateStore(_l(n.store,o,i))}}),fe(this,"isMergedPreserve",function(r){var i=r!==void 0?r:n.preserve;return i??!0}),fe(this,"registerField",function(r){n.fieldEntities.push(r);var i=r.getNamePath();if(n.notifyWatch([i]),r.props.initialValue!==void 0){var o=n.store;n.resetWithFieldInitialValue({entities:[r],skipExist:!0}),n.notifyObservers(o,[r.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(a,l){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(n.fieldEntities=n.fieldEntities.filter(function(C){return C!==r}),!n.isMergedPreserve(l)&&(!a||g.length>1)){var u=a?void 0:n.getInitialValue(i);if(i.length&&n.getFieldValue(i)!==u&&n.fieldEntities.every(function(C){return!j3(C.getNamePath(),i)})){var d=n.store;n.updateStore(_l(d,i,u,!0)),n.notifyObservers(d,[i],{type:"remove"}),n.triggerDependenciesUpdate(d,i)}}n.notifyWatch([i])}}),fe(this,"dispatch",function(r){switch(r.type){case"updateValue":{var i=r.namePath,o=r.value;n.updateValue(i,o);break}case"validateField":{var a=r.namePath,l=r.triggerName;n.validateFields([a],{triggerName:l});break}}}),fe(this,"notifyObservers",function(r,i,o){if(n.subscribable){var a=he(he({},o),{},{store:n.getFieldsValue(!0)});n.getFieldEntities().forEach(function(l){var g=l.onStoreChange;g(r,i,a)})}else n.forceRootUpdate()}),fe(this,"triggerDependenciesUpdate",function(r,i){var o=n.getDependencyChildrenFields(i);return o.length&&n.validateFields(o),n.notifyObservers(r,o,{type:"dependenciesUpdate",relatedFields:[i].concat(Gt(o))}),o}),fe(this,"updateValue",function(r,i){var o=Xi(r),a=n.store;n.updateStore(_l(n.store,o,i)),n.notifyObservers(a,[o],{type:"valueUpdate",source:"internal"}),n.notifyWatch([o]);var l=n.triggerDependenciesUpdate(a,o),g=n.callbacks.onValuesChange;if(g){var u=wR(n.store,[o]);g(u,n.getFieldsValue())}n.triggerOnFieldsChange([o].concat(Gt(l)))}),fe(this,"setFieldsValue",function(r){n.warningUnhooked();var i=n.store;if(r){var o=lI(n.store,r);n.updateStore(o)}n.notifyObservers(i,null,{type:"valueUpdate",source:"external"}),n.notifyWatch()}),fe(this,"setFieldValue",function(r,i){n.setFields([{name:r,value:i,errors:[],warnings:[]}])}),fe(this,"getDependencyChildrenFields",function(r){var i=new Set,o=[],a=new Kd;n.getFieldEntities().forEach(function(g){var u=g.props.dependencies;(u||[]).forEach(function(d){var C=Xi(d);a.update(C,function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return f.add(g),f})})});var l=function g(u){var d=a.get(u)||new Set;d.forEach(function(C){if(!i.has(C)){i.add(C);var f=C.getNamePath();C.isFieldDirty()&&f.length&&(o.push(f),g(f))}})};return l(r),o}),fe(this,"triggerOnFieldsChange",function(r,i){var o=n.callbacks.onFieldsChange;if(o){var a=n.getFields();if(i){var l=new Kd;i.forEach(function(u){var d=u.name,C=u.errors;l.set(d,C)}),a.forEach(function(u){u.errors=l.get(u.name)||u.errors})}var g=a.filter(function(u){var d=u.name;return pI(r,d)});g.length&&o(g,a)}}),fe(this,"validateFields",function(r,i){n.warningUnhooked();var o,a;Array.isArray(r)||typeof r=="string"||typeof i=="string"?(o=r,a=i):a=r;var l=!!o,g=l?o.map(Xi):[],u=[],d=String(Date.now()),C=new Set,f=a||{},m=f.recursive,b=f.dirty;n.getFieldEntities(!0).forEach(function(v){if(l||g.push(v.getNamePath()),!(!v.props.rules||!v.props.rules.length)&&!(b&&!v.isFieldDirty())){var B=v.getNamePath();if(C.add(B.join(d)),!l||pI(g,B,m)){var W=v.validateRules(he({validateMessages:he(he({},U3),n.validateMessages)},a));u.push(W.then(function(){return{name:B,errors:[],warnings:[]}}).catch(function(J){var H,x=[],E=[];return(H=J.forEach)===null||H===void 0||H.call(J,function(F){var w=F.rule.warningOnly,V=F.errors;w?E.push.apply(E,Gt(V)):x.push.apply(x,Gt(V))}),x.length?Promise.reject({name:B,errors:x,warnings:E}):{name:B,errors:x,warnings:E}}))}}});var p=Uj(u);n.lastValidatePromise=p,p.catch(function(v){return v}).then(function(v){var B=v.map(function(W){var J=W.name;return J});n.notifyObservers(n.store,B,{type:"validateFinish"}),n.triggerOnFieldsChange(B,v)});var y=p.then(function(){return n.lastValidatePromise===p?Promise.resolve(n.getFieldsValue(g)):Promise.reject([])}).catch(function(v){var B=v.filter(function(W){return W&&W.errors.length});return Promise.reject({values:n.getFieldsValue(g),errorFields:B,outOfDate:n.lastValidatePromise!==p})});y.catch(function(v){return v});var S=g.filter(function(v){return C.has(v.join(d))});return n.triggerOnFieldsChange(S),y}),fe(this,"submit",function(){n.warningUnhooked(),n.validateFields().then(function(r){var i=n.callbacks.onFinish;if(i)try{i(r)}catch(o){console.error(o)}}).catch(function(r){var i=n.callbacks.onFinishFailed;i&&i(r)})}),this.forceRootUpdate=t});function q3(e){var t=I.useRef(),n=I.useState({}),r=xe(n,2),i=r[1];if(!t.current)if(e)t.current=e;else{var o=function(){i({})},a=new Qj(o);t.current=a.getForm()}return[t.current]}var K2=I.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),$j=function(t){var n=t.validateMessages,r=t.onFormChange,i=t.onFormFinish,o=t.children,a=I.useContext(K2),l=I.useRef({});return I.createElement(K2.Provider,{value:he(he({},a),{},{validateMessages:he(he({},a.validateMessages),n),triggerFormChange:function(u,d){r&&r(u,{changedFields:d,forms:l.current}),a.triggerFormChange(u,d)},triggerFormFinish:function(u,d){i&&i(u,{values:d,forms:l.current}),a.triggerFormFinish(u,d)},registerForm:function(u,d){u&&(l.current=he(he({},l.current),{},fe({},u,d))),a.registerForm(u,d)},unregisterForm:function(u){var d=he({},l.current);delete d[u],l.current=d,a.unregisterForm(u)}})},o)},qj=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed","clearOnDestroy"],eQ=function(t,n){var r=t.name,i=t.initialValues,o=t.fields,a=t.form,l=t.preserve,g=t.children,u=t.component,d=u===void 0?"form":u,C=t.validateMessages,f=t.validateTrigger,m=f===void 0?"onChange":f,b=t.onValuesChange,p=t.onFieldsChange,y=t.onFinish,S=t.onFinishFailed,v=t.clearOnDestroy,B=Wn(t,qj),W=I.useRef(null),J=I.useContext(K2),H=q3(a),x=xe(H,1),E=x[0],F=E.getInternalHooks(zu),w=F.useSubscribe,V=F.setInitialValues,Y=F.setCallbacks,M=F.setValidateMessages,L=F.setPreserve,$=F.destroyForm;I.useImperativeHandle(n,function(){return he(he({},E),{},{nativeElement:W.current})}),I.useEffect(function(){return J.registerForm(r,E),function(){J.unregisterForm(r)}},[J,E,r]),M(he(he({},J.validateMessages),C)),Y({onValuesChange:b,onFieldsChange:function(z){if(J.triggerFormChange(r,z),p){for(var Q=arguments.length,ne=new Array(Q>1?Q-1:0),ce=1;ce<Q;ce++)ne[ce-1]=arguments[ce];p.apply(void 0,[z].concat(ne))}},onFinish:function(z){J.triggerFormFinish(r,z),y&&y(z)},onFinishFailed:S}),L(l);var U=I.useRef(null);V(i,!U.current),U.current||(U.current=!0),I.useEffect(function(){return function(){return $(v)}},[]);var _,P=typeof g=="function";if(P){var ee=E.getFieldsValue(!0);_=g(ee,E)}else _=g;w(!P);var j=I.useRef();I.useEffect(function(){Dj(j.current||[],o||[])||E.setFields(o||[]),j.current=o},[o,E]);var O=I.useMemo(function(){return he(he({},E),{},{validateTrigger:m})},[E,m]),X=I.createElement(vp.Provider,{value:null},I.createElement(TI.Provider,{value:O},_));return d===!1?X:I.createElement(d,lt({},B,{ref:W,onSubmit:function(z){z.preventDefault(),z.stopPropagation(),E.submit()},onReset:function(z){var Q;z.preventDefault(),E.resetFields(),(Q=B.onReset)===null||Q===void 0||Q.call(B,z)}}),X)};function VR(e){try{return JSON.stringify(e)}catch{return Math.random()}}function tQ(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],o=i===void 0?{}:i,a=gj(o)?{form:o}:o,l=a.form,g=I.useState(),u=xe(g,2),d=u[0],C=u[1],f=I.useMemo(function(){return VR(d)},[d]),m=I.useRef(f);m.current=f;var b=I.useContext(TI),p=l||b,y=p&&p._init,S=Xi(r),v=I.useRef(S);return v.current=S,I.useEffect(function(){if(y){var B=p.getFieldsValue,W=p.getInternalHooks,J=W(zu),H=J.registerWatch,x=function(V,Y){var M=a.preserve?Y:V;return typeof r=="function"?r(M):Ys(M,v.current)},E=H(function(w,V){var Y=x(w,V),M=VR(Y);m.current!==M&&(m.current=M,C(Y))}),F=x(B(),B(!0));return d!==F&&C(F),E}},[y]),d}var nQ=I.forwardRef(eQ),wm=nQ;wm.FormProvider=$j;wm.Field=Q3;wm.List=_j;wm.useForm=q3;wm.useWatch=tQ;const xg=I.createContext({}),rQ=e=>{let{children:t,status:n,override:r}=e;const i=I.useContext(xg),o=I.useMemo(()=>{const a=Object.assign({},i);return r&&delete a.isFormItemInput,n&&(delete a.status,delete a.hasFeedback,delete a.feedbackIcon),a},[n,r,i]);return I.createElement(xg.Provider,{value:o},t)},iQ=I.createContext(void 0),zI=e=>{const{space:t,form:n,children:r}=e;if(r==null)return null;let i=r;return n&&(i=Ge.createElement(rQ,{override:!0,status:!0},i)),t&&(i=Ge.createElement(ZU,null,i)),i};function Sp(e){if(e)return{closable:e.closable,closeIcon:e.closeIcon}}function kR(e){const{closable:t,closeIcon:n}=e||{};return Ge.useMemo(()=>{if(!t&&(t===!1||n===!1||n===null))return!1;if(t===void 0&&n===void 0)return null;let r={closeIcon:typeof n!="boolean"&&n!==null?n:void 0};return t&&typeof t=="object"&&(r=Object.assign(Object.assign({},r),t)),r},[t,n])}function NR(){const e={};for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach(i=>{i&&Object.keys(i).forEach(o=>{i[o]!==void 0&&(e[o]=i[o])})}),e}const oQ={};function eJ(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:oQ;const r=kR(e),i=kR(t),o=typeof r!="boolean"?!!(r!=null&&r.disabled):!1,a=Ge.useMemo(()=>Object.assign({closeIcon:Ge.createElement(aC,null)},n),[n]),l=Ge.useMemo(()=>r===!1?!1:r?NR(a,i,r):i===!1?!1:i?NR(a,i):a.closable?a:!1,[r,i,a]);return Ge.useMemo(()=>{if(l===!1)return[!1,null,o];const{closeIconRender:g}=a,{closeIcon:u}=l;let d=u;if(d!=null){g&&(d=g(u));const C=tl(l,!0);Object.keys(C).length&&(d=Ge.isValidElement(d)?Ge.cloneElement(d,C):Ge.createElement("span",Object.assign({},C),d))}return[!0,d,o]},[l,a])}var aQ=function(t){if(Qo()&&window.document.documentElement){var n=Array.isArray(t)?t:[t],r=window.document.documentElement;return n.some(function(i){return i in r.style})}return!1};function XR(e,t){return aQ(e)}const lQ=()=>Qo()&&window.document.documentElement,fb=e=>{const{prefixCls:t,className:n,style:r,size:i,shape:o}=e,a=Re({[`${t}-lg`]:i==="large",[`${t}-sm`]:i==="small"}),l=Re({[`${t}-circle`]:o==="circle",[`${t}-square`]:o==="square",[`${t}-round`]:o==="round"}),g=I.useMemo(()=>typeof i=="number"?{width:i,height:i,lineHeight:`${i}px`}:{},[i]);return I.createElement("span",{className:Re(t,a,l,n),style:Object.assign(Object.assign({},g),r)})},sQ=new lr("ant-skeleton-loading",{"0%":{backgroundPosition:"100% 50%"},"100%":{backgroundPosition:"0 50%"}}),mb=e=>({height:e,lineHeight:Ve(e)}),bI=e=>Object.assign({width:e},mb(e)),gQ=e=>({background:e.skeletonLoadingBackground,backgroundSize:"400% 100%",animationName:sQ,animationDuration:e.skeletonLoadingMotionDuration,animationTimingFunction:"ease",animationIterationCount:"infinite"}),Fy=(e,t)=>Object.assign({width:t(e).mul(5).equal(),minWidth:t(e).mul(5).equal()},mb(e)),cQ=e=>{const{skeletonAvatarCls:t,gradientFromColor:n,controlHeight:r,controlHeightLG:i,controlHeightSM:o}=e;return{[t]:Object.assign({display:"inline-block",verticalAlign:"top",background:n},bI(r)),[`${t}${t}-circle`]:{borderRadius:"50%"},[`${t}${t}-lg`]:Object.assign({},bI(i)),[`${t}${t}-sm`]:Object.assign({},bI(o))}},uQ=e=>{const{controlHeight:t,borderRadiusSM:n,skeletonInputCls:r,controlHeightLG:i,controlHeightSM:o,gradientFromColor:a,calc:l}=e;return{[r]:Object.assign({display:"inline-block",verticalAlign:"top",background:a,borderRadius:n},Fy(t,l)),[`${r}-lg`]:Object.assign({},Fy(i,l)),[`${r}-sm`]:Object.assign({},Fy(o,l))}},JR=e=>Object.assign({width:e},mb(e)),dQ=e=>{const{skeletonImageCls:t,imageSizeBase:n,gradientFromColor:r,borderRadiusSM:i,calc:o}=e;return{[t]:Object.assign(Object.assign({display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"middle",background:r,borderRadius:i},JR(o(n).mul(2).equal())),{[`${t}-path`]:{fill:"#bfbfbf"},[`${t}-svg`]:Object.assign(Object.assign({},JR(n)),{maxWidth:o(n).mul(4).equal(),maxHeight:o(n).mul(4).equal()}),[`${t}-svg${t}-svg-circle`]:{borderRadius:"50%"}}),[`${t}${t}-circle`]:{borderRadius:"50%"}}},Ky=(e,t,n)=>{const{skeletonButtonCls:r}=e;return{[`${n}${r}-circle`]:{width:t,minWidth:t,borderRadius:"50%"},[`${n}${r}-round`]:{borderRadius:t}}},Ly=(e,t)=>Object.assign({width:t(e).mul(2).equal(),minWidth:t(e).mul(2).equal()},mb(e)),IQ=e=>{const{borderRadiusSM:t,skeletonButtonCls:n,controlHeight:r,controlHeightLG:i,controlHeightSM:o,gradientFromColor:a,calc:l}=e;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({[n]:Object.assign({display:"inline-block",verticalAlign:"top",background:a,borderRadius:t,width:l(r).mul(2).equal(),minWidth:l(r).mul(2).equal()},Ly(r,l))},Ky(e,r,n)),{[`${n}-lg`]:Object.assign({},Ly(i,l))}),Ky(e,i,`${n}-lg`)),{[`${n}-sm`]:Object.assign({},Ly(o,l))}),Ky(e,o,`${n}-sm`))},CQ=e=>{const{componentCls:t,skeletonAvatarCls:n,skeletonTitleCls:r,skeletonParagraphCls:i,skeletonButtonCls:o,skeletonInputCls:a,skeletonImageCls:l,controlHeight:g,controlHeightLG:u,controlHeightSM:d,gradientFromColor:C,padding:f,marginSM:m,borderRadius:b,titleHeight:p,blockRadius:y,paragraphLiHeight:S,controlHeightXS:v,paragraphMarginTop:B}=e;return{[t]:{display:"table",width:"100%",[`${t}-header`]:{display:"table-cell",paddingInlineEnd:f,verticalAlign:"top",[n]:Object.assign({display:"inline-block",verticalAlign:"top",background:C},bI(g)),[`${n}-circle`]:{borderRadius:"50%"},[`${n}-lg`]:Object.assign({},bI(u)),[`${n}-sm`]:Object.assign({},bI(d))},[`${t}-content`]:{display:"table-cell",width:"100%",verticalAlign:"top",[r]:{width:"100%",height:p,background:C,borderRadius:y,[`+ ${i}`]:{marginBlockStart:d}},[i]:{padding:0,"> li":{width:"100%",height:S,listStyle:"none",background:C,borderRadius:y,"+ li":{marginBlockStart:v}}},[`${i}> li:last-child:not(:first-child):not(:nth-child(2))`]:{width:"61%"}},[`&-round ${t}-content`]:{[`${r}, ${i} > li`]:{borderRadius:b}}},[`${t}-with-avatar ${t}-content`]:{[r]:{marginBlockStart:m,[`+ ${i}`]:{marginBlockStart:B}}},[`${t}${t}-element`]:Object.assign(Object.assign(Object.assign(Object.assign({display:"inline-block",width:"auto"},IQ(e)),cQ(e)),uQ(e)),dQ(e)),[`${t}${t}-block`]:{width:"100%",[o]:{width:"100%"},[a]:{width:"100%"}},[`${t}${t}-active`]:{[`
        ${r},
        ${i} > li,
        ${n},
        ${o},
        ${a},
        ${l}
      `]:Object.assign({},gQ(e))}}},fQ=e=>{const{colorFillContent:t,colorFill:n}=e,r=t,i=n;return{color:r,colorGradientEnd:i,gradientFromColor:r,gradientToColor:i,titleHeight:e.controlHeight/2,blockRadius:e.borderRadiusSM,paragraphMarginTop:e.marginLG+e.marginXXS,paragraphLiHeight:e.controlHeight/2}},sC=Gi("Skeleton",e=>{const{componentCls:t,calc:n}=e,r=Br(e,{skeletonAvatarCls:`${t}-avatar`,skeletonTitleCls:`${t}-title`,skeletonParagraphCls:`${t}-paragraph`,skeletonButtonCls:`${t}-button`,skeletonInputCls:`${t}-input`,skeletonImageCls:`${t}-image`,imageSizeBase:n(e.controlHeight).mul(1.5).equal(),borderRadius:100,skeletonLoadingBackground:`linear-gradient(90deg, ${e.gradientFromColor} 25%, ${e.gradientToColor} 37%, ${e.gradientFromColor} 63%)`,skeletonLoadingMotionDuration:"1.4s"});return[CQ(r)]},fQ,{deprecatedTokens:[["color","gradientFromColor"],["colorGradientEnd","gradientToColor"]]}),mQ=e=>{const{prefixCls:t,className:n,rootClassName:r,active:i,shape:o="circle",size:a="default"}=e,{getPrefixCls:l}=I.useContext(dn),g=l("skeleton",t),[u,d,C]=sC(g),f=Pi(e,["prefixCls","className"]),m=Re(g,`${g}-element`,{[`${g}-active`]:i},n,r,d,C);return u(I.createElement("div",{className:m},I.createElement(fb,Object.assign({prefixCls:`${g}-avatar`,shape:o,size:a},f))))},hQ=e=>{const{prefixCls:t,className:n,rootClassName:r,active:i,block:o=!1,size:a="default"}=e,{getPrefixCls:l}=I.useContext(dn),g=l("skeleton",t),[u,d,C]=sC(g),f=Pi(e,["prefixCls"]),m=Re(g,`${g}-element`,{[`${g}-active`]:i,[`${g}-block`]:o},n,r,d,C);return u(I.createElement("div",{className:m},I.createElement(fb,Object.assign({prefixCls:`${g}-button`,size:a},f))))},AQ="M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",pQ=e=>{const{prefixCls:t,className:n,rootClassName:r,style:i,active:o}=e,{getPrefixCls:a}=I.useContext(dn),l=a("skeleton",t),[g,u,d]=sC(l),C=Re(l,`${l}-element`,{[`${l}-active`]:o},n,r,u,d);return g(I.createElement("div",{className:C},I.createElement("div",{className:Re(`${l}-image`,n),style:i},I.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:`${l}-image-svg`},I.createElement("title",null,"Image placeholder"),I.createElement("path",{d:AQ,className:`${l}-image-path`})))))},bQ=e=>{const{prefixCls:t,className:n,rootClassName:r,active:i,block:o,size:a="default"}=e,{getPrefixCls:l}=I.useContext(dn),g=l("skeleton",t),[u,d,C]=sC(g),f=Pi(e,["prefixCls"]),m=Re(g,`${g}-element`,{[`${g}-active`]:i,[`${g}-block`]:o},n,r,d,C);return u(I.createElement("div",{className:m},I.createElement(fb,Object.assign({prefixCls:`${g}-input`,size:a},f))))},yQ=e=>{const{prefixCls:t,className:n,rootClassName:r,style:i,active:o,children:a}=e,{getPrefixCls:l}=I.useContext(dn),g=l("skeleton",t),[u,d,C]=sC(g),f=Re(g,`${g}-element`,{[`${g}-active`]:o},d,n,r,C);return u(I.createElement("div",{className:f},I.createElement("div",{className:Re(`${g}-image`,n),style:i},a)))},vQ=(e,t)=>{const{width:n,rows:r=2}=t;if(Array.isArray(n))return n[e];if(r-1===e)return n},SQ=e=>{const{prefixCls:t,className:n,style:r,rows:i}=e,o=Gt(new Array(i)).map((a,l)=>I.createElement("li",{key:l,style:{width:vQ(l,e)}}));return I.createElement("ul",{className:Re(t,n),style:r},o)},ZQ=e=>{let{prefixCls:t,className:n,width:r,style:i}=e;return I.createElement("h3",{className:Re(t,n),style:Object.assign({width:r},i)})};function My(e){return e&&typeof e=="object"?e:{}}function GQ(e,t){return e&&!t?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}function BQ(e,t){return!e&&t?{width:"38%"}:e&&t?{width:"50%"}:{}}function RQ(e,t){const n={};return(!e||!t)&&(n.width="61%"),!e&&t?n.rows=3:n.rows=2,n}const su=e=>{const{prefixCls:t,loading:n,className:r,rootClassName:i,style:o,children:a,avatar:l=!1,title:g=!0,paragraph:u=!0,active:d,round:C}=e,{getPrefixCls:f,direction:m,skeleton:b}=I.useContext(dn),p=f("skeleton",t),[y,S,v]=sC(p);if(n||!("loading"in e)){const B=!!l,W=!!g,J=!!u;let H;if(B){const F=Object.assign(Object.assign({prefixCls:`${p}-avatar`},GQ(W,J)),My(l));H=I.createElement("div",{className:`${p}-header`},I.createElement(fb,Object.assign({},F)))}let x;if(W||J){let F;if(W){const V=Object.assign(Object.assign({prefixCls:`${p}-title`},BQ(B,J)),My(g));F=I.createElement(ZQ,Object.assign({},V))}let w;if(J){const V=Object.assign(Object.assign({prefixCls:`${p}-paragraph`},RQ(B,W)),My(u));w=I.createElement(SQ,Object.assign({},V))}x=I.createElement("div",{className:`${p}-content`},F,w)}const E=Re(p,{[`${p}-with-avatar`]:B,[`${p}-active`]:d,[`${p}-rtl`]:m==="rtl",[`${p}-round`]:C},b==null?void 0:b.className,r,i,S,v);return y(I.createElement("div",{className:E,style:Object.assign(Object.assign({},b==null?void 0:b.style),o)},H,x))}return a??null};su.Button=hQ;su.Avatar=mQ;su.Input=bQ;su.Image=pQ;su.Node=yQ;function xR(){}const wQ=I.createContext({add:xR,remove:xR});function tJ(e){const t=I.useContext(wQ),n=I.useRef(null);return ui(i=>{if(i){const o=e?i.querySelector(e):i;t.add(o),n.current=o}else t.remove(n.current)})}const HR=()=>{const{cancelButtonProps:e,cancelTextLocale:t,onCancel:n}=I.useContext(Bm);return Ge.createElement(da,Object.assign({onClick:n},e),t)},YR=()=>{const{confirmLoading:e,okButtonProps:t,okType:n,okTextLocale:r,onOk:i}=I.useContext(Bm);return Ge.createElement(da,Object.assign({},H3(n),{loading:e,onClick:i},t),r)};function nJ(e,t){return Ge.createElement("span",{className:`${e}-close-x`},t||Ge.createElement(aC,{className:`${e}-close-icon`}))}const rJ=e=>{const{okText:t,okType:n="primary",cancelText:r,confirmLoading:i,onOk:o,onCancel:a,okButtonProps:l,cancelButtonProps:g,footer:u}=e,[d]=lu("Modal",MX()),C=t||(d==null?void 0:d.okText),f=r||(d==null?void 0:d.cancelText),m={confirmLoading:i,okButtonProps:l,cancelButtonProps:g,okTextLocale:C,cancelTextLocale:f,okType:n,onOk:o,onCancel:a},b=Ge.useMemo(()=>m,Gt(Object.values(m)));let p;return typeof u=="function"||typeof u>"u"?(p=Ge.createElement(Ge.Fragment,null,Ge.createElement(HR,null),Ge.createElement(YR,null)),typeof u=="function"&&(p=u(p,{OkBtn:YR,CancelBtn:HR})),p=Ge.createElement(L3,{value:b},p)):p=u,Ge.createElement(_X,{disabled:!1},p)},WQ=e=>{const{componentCls:t}=e;return{[t]:{display:"flex",flexFlow:"row wrap",minWidth:0,"&::before, &::after":{display:"flex"},"&-no-wrap":{flexWrap:"nowrap"},"&-start":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"flex-end"},"&-space-between":{justifyContent:"space-between"},"&-space-around":{justifyContent:"space-around"},"&-space-evenly":{justifyContent:"space-evenly"},"&-top":{alignItems:"flex-start"},"&-middle":{alignItems:"center"},"&-bottom":{alignItems:"flex-end"}}}},VQ=e=>{const{componentCls:t}=e;return{[t]:{position:"relative",maxWidth:"100%",minHeight:1}}},kQ=(e,t)=>{const{prefixCls:n,componentCls:r,gridColumns:i}=e,o={};for(let a=i;a>=0;a--)a===0?(o[`${r}${t}-${a}`]={display:"none"},o[`${r}-push-${a}`]={insetInlineStart:"auto"},o[`${r}-pull-${a}`]={insetInlineEnd:"auto"},o[`${r}${t}-push-${a}`]={insetInlineStart:"auto"},o[`${r}${t}-pull-${a}`]={insetInlineEnd:"auto"},o[`${r}${t}-offset-${a}`]={marginInlineStart:0},o[`${r}${t}-order-${a}`]={order:0}):(o[`${r}${t}-${a}`]=[{"--ant-display":"block",display:"block"},{display:"var(--ant-display)",flex:`0 0 ${a/i*100}%`,maxWidth:`${a/i*100}%`}],o[`${r}${t}-push-${a}`]={insetInlineStart:`${a/i*100}%`},o[`${r}${t}-pull-${a}`]={insetInlineEnd:`${a/i*100}%`},o[`${r}${t}-offset-${a}`]={marginInlineStart:`${a/i*100}%`},o[`${r}${t}-order-${a}`]={order:a});return o[`${r}${t}-flex`]={flex:`var(--${n}${t}-flex)`},o},L2=(e,t)=>kQ(e,t),NQ=(e,t,n)=>({[`@media (min-width: ${Ve(t)})`]:Object.assign({},L2(e,n))}),XQ=()=>({}),JQ=()=>({});Gi("Grid",WQ,XQ);const iJ=e=>({xs:e.screenXSMin,sm:e.screenSMMin,md:e.screenMDMin,lg:e.screenLGMin,xl:e.screenXLMin,xxl:e.screenXXLMin});Gi("Grid",e=>{const t=Br(e,{gridColumns:24}),n=iJ(t);return delete n.xs,[VQ(t),L2(t,""),L2(t,"-xs"),Object.keys(n).map(r=>NQ(t,n[r],`-${r}`)).reduce((r,i)=>Object.assign(Object.assign({},r),i),{})]},JQ);function ER(e){return{position:e,inset:0}}const xQ=e=>{const{componentCls:t,antCls:n}=e;return[{[`${t}-root`]:{[`${t}${n}-zoom-enter, ${t}${n}-zoom-appear`]:{transform:"none",opacity:0,animationDuration:e.motionDurationSlow,userSelect:"none"},[`${t}${n}-zoom-leave ${t}-content`]:{pointerEvents:"none"},[`${t}-mask`]:Object.assign(Object.assign({},ER("fixed")),{zIndex:e.zIndexPopupBase,height:"100%",backgroundColor:e.colorBgMask,pointerEvents:"none",[`${t}-hidden`]:{display:"none"}}),[`${t}-wrap`]:Object.assign(Object.assign({},ER("fixed")),{zIndex:e.zIndexPopupBase,overflow:"auto",outline:0,WebkitOverflowScrolling:"touch"})}},{[`${t}-root`]:OU(e)}]},HQ=e=>{const{componentCls:t}=e;return[{[`${t}-root`]:{[`${t}-wrap-rtl`]:{direction:"rtl"},[`${t}-centered`]:{textAlign:"center","&::before":{display:"inline-block",width:0,height:"100%",verticalAlign:"middle",content:'""'},[t]:{top:0,display:"inline-block",paddingBottom:0,textAlign:"start",verticalAlign:"middle"}},[`@media (max-width: ${e.screenSMMax}px)`]:{[t]:{maxWidth:"calc(100vw - 16px)",margin:`${Ve(e.marginXS)} auto`},[`${t}-centered`]:{[t]:{flex:1}}}}},{[t]:Object.assign(Object.assign({},Ca(e)),{pointerEvents:"none",position:"relative",top:100,width:"auto",maxWidth:`calc(100vw - ${Ve(e.calc(e.margin).mul(2).equal())})`,margin:"0 auto",paddingBottom:e.paddingLG,[`${t}-title`]:{margin:0,color:e.titleColor,fontWeight:e.fontWeightStrong,fontSize:e.titleFontSize,lineHeight:e.titleLineHeight,wordWrap:"break-word"},[`${t}-content`]:{position:"relative",backgroundColor:e.contentBg,backgroundClip:"padding-box",border:0,borderRadius:e.borderRadiusLG,boxShadow:e.boxShadow,pointerEvents:"auto",padding:e.contentPadding},[`${t}-close`]:Object.assign({position:"absolute",top:e.calc(e.modalHeaderHeight).sub(e.modalCloseBtnSize).div(2).equal(),insetInlineEnd:e.calc(e.modalHeaderHeight).sub(e.modalCloseBtnSize).div(2).equal(),zIndex:e.calc(e.zIndexPopupBase).add(10).equal(),padding:0,color:e.modalCloseIconColor,fontWeight:e.fontWeightStrong,lineHeight:1,textDecoration:"none",background:"transparent",borderRadius:e.borderRadiusSM,width:e.modalCloseBtnSize,height:e.modalCloseBtnSize,border:0,outline:0,cursor:"pointer",transition:`color ${e.motionDurationMid}, background-color ${e.motionDurationMid}`,"&-x":{display:"flex",fontSize:e.fontSizeLG,fontStyle:"normal",lineHeight:Ve(e.modalCloseBtnSize),justifyContent:"center",textTransform:"none",textRendering:"auto"},"&:disabled":{pointerEvents:"none"},"&:hover":{color:e.modalCloseIconHoverColor,backgroundColor:e.colorBgTextHover,textDecoration:"none"},"&:active":{backgroundColor:e.colorBgTextActive}},Ds(e)),[`${t}-header`]:{color:e.colorText,background:e.headerBg,borderRadius:`${Ve(e.borderRadiusLG)} ${Ve(e.borderRadiusLG)} 0 0`,marginBottom:e.headerMarginBottom,padding:e.headerPadding,borderBottom:e.headerBorderBottom},[`${t}-body`]:{fontSize:e.fontSize,lineHeight:e.lineHeight,wordWrap:"break-word",padding:e.bodyPadding,[`${t}-body-skeleton`]:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",margin:`${Ve(e.margin)} auto`}},[`${t}-footer`]:{textAlign:"end",background:e.footerBg,marginTop:e.footerMarginTop,padding:e.footerPadding,borderTop:e.footerBorderTop,borderRadius:e.footerBorderRadius,[`> ${e.antCls}-btn + ${e.antCls}-btn`]:{marginInlineStart:e.marginXS}},[`${t}-open`]:{overflow:"hidden"}})},{[`${t}-pure-panel`]:{top:"auto",padding:0,display:"flex",flexDirection:"column",[`${t}-content,
          ${t}-body,
          ${t}-confirm-body-wrapper`]:{display:"flex",flexDirection:"column",flex:"auto"},[`${t}-confirm-body`]:{marginBottom:"auto"}}}]},YQ=e=>{const{componentCls:t}=e;return{[`${t}-root`]:{[`${t}-wrap-rtl`]:{direction:"rtl",[`${t}-confirm-body`]:{direction:"rtl"}}}}},EQ=e=>{const{componentCls:t}=e,n=iJ(e);delete n.xs;const r=Object.keys(n).map(i=>({[`@media (min-width: ${Ve(n[i])})`]:{width:`var(--${t.replace(".","")}-${i}-width)`}}));return{[`${t}-root`]:{[t]:[{width:`var(--${t.replace(".","")}-xs-width)`}].concat(Gt(r))}}},oJ=e=>{const t=e.padding,n=e.fontSizeHeading5,r=e.lineHeightHeading5;return Br(e,{modalHeaderHeight:e.calc(e.calc(r).mul(n).equal()).add(e.calc(t).mul(2).equal()).equal(),modalFooterBorderColorSplit:e.colorSplit,modalFooterBorderStyle:e.lineType,modalFooterBorderWidth:e.lineWidth,modalCloseIconColor:e.colorIcon,modalCloseIconHoverColor:e.colorIconHover,modalCloseBtnSize:e.controlHeight,modalConfirmIconSize:e.fontHeight,modalTitleHeight:e.calc(e.titleFontSize).mul(e.titleLineHeight).equal()})},aJ=e=>({footerBg:"transparent",headerBg:e.colorBgElevated,titleLineHeight:e.lineHeightHeading5,titleFontSize:e.fontSizeHeading5,contentBg:e.colorBgElevated,titleColor:e.colorTextHeading,contentPadding:e.wireframe?0:`${Ve(e.paddingMD)} ${Ve(e.paddingContentHorizontalLG)}`,headerPadding:e.wireframe?`${Ve(e.padding)} ${Ve(e.paddingLG)}`:0,headerBorderBottom:e.wireframe?`${Ve(e.lineWidth)} ${e.lineType} ${e.colorSplit}`:"none",headerMarginBottom:e.wireframe?0:e.marginXS,bodyPadding:e.wireframe?e.paddingLG:0,footerPadding:e.wireframe?`${Ve(e.paddingXS)} ${Ve(e.padding)}`:0,footerBorderTop:e.wireframe?`${Ve(e.lineWidth)} ${e.lineType} ${e.colorSplit}`:"none",footerBorderRadius:e.wireframe?`0 0 ${Ve(e.borderRadiusLG)} ${Ve(e.borderRadiusLG)}`:0,footerMarginTop:e.wireframe?0:e.marginSM,confirmBodyPadding:e.wireframe?`${Ve(e.padding*2)} ${Ve(e.padding*2)} ${Ve(e.paddingLG)}`:0,confirmIconMarginInlineEnd:e.wireframe?e.margin:e.marginSM,confirmBtnsMarginTop:e.wireframe?e.marginLG:e.marginSM}),lJ=Gi("Modal",e=>{const t=oJ(e);return[HQ(t),YQ(t),xQ(t),sb(t,"zoom"),EQ(t)]},aJ,{unitless:{titleLineHeight:!0}});var FQ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};let M2;const KQ=e=>{M2={x:e.pageX,y:e.pageY},setTimeout(()=>{M2=null},100)};lQ()&&document.documentElement.addEventListener("click",KQ,!0);const sJ=e=>{var t;const{getPopupContainer:n,getPrefixCls:r,direction:i,modal:o}=I.useContext(dn),a=ne=>{const{onCancel:ce}=e;ce==null||ce(ne)},l=ne=>{const{onOk:ce}=e;ce==null||ce(ne)},{prefixCls:g,className:u,rootClassName:d,open:C,wrapClassName:f,centered:m,getContainer:b,focusTriggerAfterClose:p=!0,style:y,visible:S,width:v=520,footer:B,classNames:W,styles:J,children:H,loading:x}=e,E=FQ(e,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","focusTriggerAfterClose","style","visible","width","footer","classNames","styles","children","loading"]),F=r("modal",g),w=r(),V=gs(F),[Y,M,L]=lJ(F,V),$=Re(f,{[`${F}-centered`]:!!m,[`${F}-wrap-rtl`]:i==="rtl"}),U=B!==null&&!x?I.createElement(rJ,Object.assign({},e,{onOk:l,onCancel:a})):null,[_,P,ee]=eJ(Sp(e),Sp(o),{closable:!0,closeIcon:I.createElement(aC,{className:`${F}-close-icon`}),closeIconRender:ne=>nJ(F,ne)}),j=tJ(`.${F}-content`),[O,X]=lC("Modal",E.zIndex),[D,z]=I.useMemo(()=>v&&typeof v=="object"?[void 0,v]:[v,void 0],[v]),Q=I.useMemo(()=>{const ne={};return z&&Object.keys(z).forEach(ce=>{const se=z[ce];se!==void 0&&(ne[`--${F}-${ce}-width`]=typeof se=="number"?`${se}px`:se)}),ne},[z]);return Y(I.createElement(zI,{form:!0,space:!0},I.createElement(Sm.Provider,{value:X},I.createElement(O3,Object.assign({width:D},E,{zIndex:O,getContainer:b===void 0?n:b,prefixCls:F,rootClassName:Re(M,d,L,V),footer:U,visible:C??S,mousePosition:(t=E.mousePosition)!==null&&t!==void 0?t:M2,onClose:a,closable:_&&{disabled:ee,closeIcon:P},closeIcon:P,focusTriggerAfterClose:p,transitionName:Jg(w,"zoom",e.transitionName),maskTransitionName:Jg(w,"fade",e.maskTransitionName),className:Re(M,u,o==null?void 0:o.className),style:Object.assign(Object.assign(Object.assign({},o==null?void 0:o.style),y),Q),classNames:Object.assign(Object.assign(Object.assign({},o==null?void 0:o.classNames),W),{wrapper:Re($,W==null?void 0:W.wrapper)}),styles:Object.assign(Object.assign({},o==null?void 0:o.styles),J),panelRef:j}),x?I.createElement(su,{active:!0,title:!1,paragraph:{rows:4},className:`${F}-body-skeleton`}):H))))},LQ=e=>{const{componentCls:t,titleFontSize:n,titleLineHeight:r,modalConfirmIconSize:i,fontSize:o,lineHeight:a,modalTitleHeight:l,fontHeight:g,confirmBodyPadding:u}=e,d=`${t}-confirm`;return{[d]:{"&-rtl":{direction:"rtl"},[`${e.antCls}-modal-header`]:{display:"none"},[`${d}-body-wrapper`]:Object.assign({},Uc()),[`&${t} ${t}-body`]:{padding:u},[`${d}-body`]:{display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${e.iconCls}`]:{flex:"none",fontSize:i,marginInlineEnd:e.confirmIconMarginInlineEnd,marginTop:e.calc(e.calc(g).sub(i).equal()).div(2).equal()},[`&-has-title > ${e.iconCls}`]:{marginTop:e.calc(e.calc(l).sub(i).equal()).div(2).equal()}},[`${d}-paragraph`]:{display:"flex",flexDirection:"column",flex:"auto",rowGap:e.marginXS,maxWidth:`calc(100% - ${Ve(e.marginSM)})`},[`${e.iconCls} + ${d}-paragraph`]:{maxWidth:`calc(100% - ${Ve(e.calc(e.modalConfirmIconSize).add(e.marginSM).equal())})`},[`${d}-title`]:{color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:n,lineHeight:r},[`${d}-content`]:{color:e.colorText,fontSize:o,lineHeight:a},[`${d}-btns`]:{textAlign:"end",marginTop:e.confirmBtnsMarginTop,[`${e.antCls}-btn + ${e.antCls}-btn`]:{marginBottom:0,marginInlineStart:e.marginXS}}},[`${d}-error ${d}-body > ${e.iconCls}`]:{color:e.colorError},[`${d}-warning ${d}-body > ${e.iconCls},
        ${d}-confirm ${d}-body > ${e.iconCls}`]:{color:e.colorWarning},[`${d}-info ${d}-body > ${e.iconCls}`]:{color:e.colorInfo},[`${d}-success ${d}-body > ${e.iconCls}`]:{color:e.colorSuccess}}},MQ=NZ(["Modal","confirm"],e=>{const t=oJ(e);return[LQ(t)]},aJ,{order:-1e3});var TQ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function gJ(e){const{prefixCls:t,icon:n,okText:r,cancelText:i,confirmPrefixCls:o,type:a,okCancel:l,footer:g,locale:u}=e,d=TQ(e,["prefixCls","icon","okText","cancelText","confirmPrefixCls","type","okCancel","footer","locale"]);let C=n;if(!n&&n!==null)switch(a){case"info":C=I.createElement(S3,null);break;case"success":C=I.createElement(y3,null);break;case"error":C=I.createElement(rb,null);break;default:C=I.createElement(v3,null)}const f=l??a==="confirm",m=e.autoFocusButton===null?!1:e.autoFocusButton||"ok",[b]=lu("Modal"),p=u||b,y=r||(f?p==null?void 0:p.okText:p==null?void 0:p.justOkText),S=i||(p==null?void 0:p.cancelText),v=Object.assign({autoFocusButton:m,cancelTextLocale:S,okTextLocale:y,mergedOkCancel:f},d),B=I.useMemo(()=>v,Gt(Object.values(v))),W=I.createElement(I.Fragment,null,I.createElement(dR,null),I.createElement(IR,null)),J=e.title!==void 0&&e.title!==null,H=`${o}-body`;return I.createElement("div",{className:`${o}-body-wrapper`},I.createElement("div",{className:Re(H,{[`${H}-has-title`]:J})},C,I.createElement("div",{className:`${o}-paragraph`},J&&I.createElement("span",{className:`${o}-title`},e.title),I.createElement("div",{className:`${o}-content`},e.content))),g===void 0||typeof g=="function"?I.createElement(L3,{value:B},I.createElement("div",{className:`${o}-btns`},typeof g=="function"?g(W,{OkBtn:IR,CancelBtn:dR}):W)):g,I.createElement(MQ,{prefixCls:t}))}const zQ=e=>{const{close:t,zIndex:n,maskStyle:r,direction:i,prefixCls:o,wrapClassName:a,rootPrefixCls:l,bodyStyle:g,closable:u=!1,onConfirm:d,styles:C}=e,f=`${o}-confirm`,m=e.width||416,b=e.style||{},p=e.mask===void 0?!0:e.mask,y=e.maskClosable===void 0?!1:e.maskClosable,S=Re(f,`${f}-${e.type}`,{[`${f}-rtl`]:i==="rtl"},e.className),[,v]=Ia(),B=I.useMemo(()=>n!==void 0?n:v.zIndexPopupBase+R3,[n,v]);return I.createElement(sJ,Object.assign({},e,{className:S,wrapClassName:Re({[`${f}-centered`]:!!e.centered},a),onCancel:()=>{t==null||t({triggerCancel:!0}),d==null||d(!1)},title:"",footer:null,transitionName:Jg(l||"","zoom",e.transitionName),maskTransitionName:Jg(l||"","fade",e.maskTransitionName),mask:p,maskClosable:y,style:b,styles:Object.assign({body:g,mask:r},C),width:m,zIndex:B,closable:u}),I.createElement(gJ,Object.assign({},e,{confirmPrefixCls:f})))},cJ=e=>{const{rootPrefixCls:t,iconPrefixCls:n,direction:r,theme:i}=e;return I.createElement(Mg,{prefixCls:t,iconPrefixCls:n,direction:r,theme:i},I.createElement(zQ,Object.assign({},e)))},Du=[];let uJ="";function dJ(){return uJ}const DQ=e=>{var t,n;const{prefixCls:r,getContainer:i,direction:o}=e,a=MX(),l=I.useContext(dn),g=dJ()||l.getPrefixCls(),u=r||`${g}-modal`;let d=i;return d===!1&&(d=void 0),Ge.createElement(cJ,Object.assign({},e,{rootPrefixCls:g,prefixCls:u,iconPrefixCls:l.iconPrefixCls,theme:l.theme,direction:o??l.direction,locale:(n=(t=l.locale)===null||t===void 0?void 0:t.Modal)!==null&&n!==void 0?n:a,getContainer:d}))};function Wm(e){const t=m3(),n=document.createDocumentFragment();let r=Object.assign(Object.assign({},e),{close:g,open:!0}),i,o;function a(){for(var d,C=arguments.length,f=new Array(C),m=0;m<C;m++)f[m]=arguments[m];if(f.some(y=>y==null?void 0:y.triggerCancel)){var p;(d=e.onCancel)===null||d===void 0||(p=d).call.apply(p,[e,()=>{}].concat(Gt(f.slice(1))))}for(let y=0;y<Du.length;y++)if(Du[y]===g){Du.splice(y,1);break}o()}function l(d){clearTimeout(i),i=setTimeout(()=>{const C=t.getPrefixCls(void 0,dJ()),f=t.getIconPrefixCls(),m=t.getTheme(),b=Ge.createElement(DQ,Object.assign({},d));o=xZ()(Ge.createElement(Mg,{prefixCls:C,iconPrefixCls:f,theme:m},t.holderRender?t.holderRender(b):b),n)})}function g(){for(var d=arguments.length,C=new Array(d),f=0;f<d;f++)C[f]=arguments[f];r=Object.assign(Object.assign({},r),{open:!1,afterClose:()=>{typeof e.afterClose=="function"&&e.afterClose(),a.apply(this,C)}}),r.visible&&delete r.visible,l(r)}function u(d){typeof d=="function"?r=d(r):r=Object.assign(Object.assign({},r),d),l(r)}return l(r),Du.push(g),{destroy:g,update:u}}function IJ(e){return Object.assign(Object.assign({},e),{type:"warning"})}function CJ(e){return Object.assign(Object.assign({},e),{type:"info"})}function fJ(e){return Object.assign(Object.assign({},e),{type:"success"})}function mJ(e){return Object.assign(Object.assign({},e),{type:"error"})}function hJ(e){return Object.assign(Object.assign({},e),{type:"confirm"})}function PQ(e){let{rootPrefixCls:t}=e;uJ=t}var OQ=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const _Q=(e,t)=>{var n,{afterClose:r,config:i}=e,o=OQ(e,["afterClose","config"]);const[a,l]=I.useState(!0),[g,u]=I.useState(i),{direction:d,getPrefixCls:C}=I.useContext(dn),f=C("modal"),m=C(),b=()=>{var v;r(),(v=g.afterClose)===null||v===void 0||v.call(g)},p=function(){var v;l(!1);for(var B=arguments.length,W=new Array(B),J=0;J<B;J++)W[J]=arguments[J];if(W.some(E=>E==null?void 0:E.triggerCancel)){var x;(v=g.onCancel)===null||v===void 0||(x=v).call.apply(x,[g,()=>{}].concat(Gt(W.slice(1))))}};I.useImperativeHandle(t,()=>({destroy:p,update:v=>{u(B=>Object.assign(Object.assign({},B),v))}}));const y=(n=g.okCancel)!==null&&n!==void 0?n:g.type==="confirm",[S]=lu("Modal",nd.Modal);return I.createElement(cJ,Object.assign({prefixCls:f,rootPrefixCls:m},g,{close:p,open:a,afterClose:b,okText:g.okText||(y?S==null?void 0:S.okText:S==null?void 0:S.justOkText),direction:g.direction||d,cancelText:g.cancelText||(S==null?void 0:S.cancelText)},o))},UQ=I.forwardRef(_Q);let FR=0;const jQ=I.memo(I.forwardRef((e,t)=>{const[n,r]=eU();return I.useImperativeHandle(t,()=>({patchElement:r}),[]),I.createElement(I.Fragment,null,n)}));function QQ(){const e=I.useRef(null),[t,n]=I.useState([]);I.useEffect(()=>{t.length&&(Gt(t).forEach(a=>{a()}),n([]))},[t]);const r=I.useCallback(o=>function(l){var g;FR+=1;const u=I.createRef();let d;const C=new Promise(y=>{d=y});let f=!1,m;const b=I.createElement(UQ,{key:`modal-${FR}`,config:o(l),ref:u,afterClose:()=>{m==null||m()},isSilent:()=>f,onConfirm:y=>{d(y)}});return m=(g=e.current)===null||g===void 0?void 0:g.patchElement(b),m&&Du.push(m),{destroy:()=>{function y(){var S;(S=u.current)===null||S===void 0||S.destroy()}u.current?y():n(S=>[].concat(Gt(S),[y]))},update:y=>{function S(){var v;(v=u.current)===null||v===void 0||v.update(y)}u.current?S():n(v=>[].concat(Gt(v),[S]))},then:y=>(f=!0,C.then(y))}},[]);return[I.useMemo(()=>({info:r(CJ),success:r(fJ),error:r(mJ),warning:r(IJ),confirm:r(hJ)}),[]),I.createElement(jQ,{key:"modal-holder",ref:e})]}const $Q=Ge.createContext({});function AJ(e){return t=>I.createElement(Mg,{theme:{token:{motion:!1,zIndexPopupBase:0}}},I.createElement(e,Object.assign({},t)))}const pJ=(e,t,n,r,i)=>AJ(a=>{const{prefixCls:l,style:g}=a,u=I.useRef(null),[d,C]=I.useState(0),[f,m]=I.useState(0),[b,p]=qi(!1,{value:a.open}),{getPrefixCls:y}=I.useContext(dn),S=y(r||"select",l);I.useEffect(()=>{if(p(!0),typeof ResizeObserver<"u"){const W=new ResizeObserver(H=>{const x=H[0].target;C(x.offsetHeight+8),m(x.offsetWidth)}),J=setInterval(()=>{var H;const x=i?`.${i(S)}`:`.${S}-dropdown`,E=(H=u.current)===null||H===void 0?void 0:H.querySelector(x);E&&(clearInterval(J),W.observe(E))},10);return()=>{clearInterval(J),W.disconnect()}}},[]);let v=Object.assign(Object.assign({},a),{style:Object.assign(Object.assign({},g),{margin:0}),open:b,visible:b,getPopupContainer:()=>u.current});t&&Object.assign(v,{[t]:{overflow:{adjustX:!1,adjustY:!1}}});const B={paddingBottom:d,position:"relative",minWidth:f};return I.createElement("div",{ref:u,style:B},I.createElement(e,Object.assign({},v)))}),DZ=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e==null?void 0:e.substr(0,4))};var hb=function(t){var n=t.className,r=t.customizeIcon,i=t.customizeIconProps,o=t.children,a=t.onMouseDown,l=t.onClick,g=typeof r=="function"?r(i):r;return I.createElement("span",{className:n,onMouseDown:function(d){d.preventDefault(),a==null||a(d)},style:{userSelect:"none",WebkitUserSelect:"none"},unselectable:"on",onClick:l,"aria-hidden":!0},g!==void 0?g:I.createElement("span",{className:Re(n.split(/\s+/).map(function(u){return"".concat(u,"-icon")}))},o))},qQ=function(t,n,r,i,o){var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!1,l=arguments.length>6?arguments[6]:void 0,g=arguments.length>7?arguments[7]:void 0,u=Ge.useMemo(function(){if(wt(i)==="object")return i.clearIcon;if(o)return o},[i,o]),d=Ge.useMemo(function(){return!!(!a&&i&&(r.length||l)&&!(g==="combobox"&&l===""))},[i,a,r.length,l,g]);return{allowClear:d,clearIcon:Ge.createElement(hb,{className:"".concat(t,"-clear"),onMouseDown:n,customizeIcon:u},"")}},bJ=I.createContext(null);function e7(){return I.useContext(bJ)}function t7(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:10,t=I.useState(!1),n=xe(t,2),r=n[0],i=n[1],o=I.useRef(null),a=function(){window.clearTimeout(o.current)};I.useEffect(function(){return a},[]);var l=function(u,d){a(),o.current=window.setTimeout(function(){i(u),d&&d()},e)};return[r,l,a]}function yJ(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:250,t=I.useRef(null),n=I.useRef(null);I.useEffect(function(){return function(){window.clearTimeout(n.current)}},[]);function r(i){(i||t.current===null)&&(t.current=i),window.clearTimeout(n.current),n.current=window.setTimeout(function(){t.current=null},e)}return[function(){return t.current},r]}function n7(e,t,n,r){var i=I.useRef(null);i.current={open:t,triggerOpen:n,customizedTrigger:r},I.useEffect(function(){function o(a){var l;if(!((l=i.current)!==null&&l!==void 0&&l.customizedTrigger)){var g=a.target;g.shadowRoot&&a.composed&&(g=a.composedPath()[0]||g),i.current.open&&e().filter(function(u){return u}).every(function(u){return!u.contains(g)&&u!==g})&&i.current.triggerOpen(!1)}}return window.addEventListener("mousedown",o),function(){return window.removeEventListener("mousedown",o)}},[])}function r7(e){return e&&![Mt.ESC,Mt.SHIFT,Mt.BACKSPACE,Mt.TAB,Mt.WIN_KEY,Mt.ALT,Mt.META,Mt.WIN_KEY_RIGHT,Mt.CTRL,Mt.SEMICOLON,Mt.EQUALS,Mt.CAPS_LOCK,Mt.CONTEXT_MENU,Mt.F1,Mt.F2,Mt.F3,Mt.F4,Mt.F5,Mt.F6,Mt.F7,Mt.F8,Mt.F9,Mt.F10,Mt.F11,Mt.F12].includes(e)}var i7=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],Ld=void 0;function o7(e,t){var n=e.prefixCls,r=e.invalidate,i=e.item,o=e.renderItem,a=e.responsive,l=e.responsiveDisabled,g=e.registerSize,u=e.itemKey,d=e.className,C=e.style,f=e.children,m=e.display,b=e.order,p=e.component,y=p===void 0?"div":p,S=Wn(e,i7),v=a&&!m;function B(E){g(u,E)}I.useEffect(function(){return function(){B(null)}},[]);var W=o&&i!==Ld?o(i,{index:b}):f,J;r||(J={opacity:v?0:1,height:v?0:Ld,overflowY:v?"hidden":Ld,order:a?b:Ld,pointerEvents:v?"none":Ld,position:v?"absolute":Ld});var H={};v&&(H["aria-hidden"]=!0);var x=I.createElement(y,lt({className:Re(!r&&n,d),style:he(he({},J),C)},H,S,{ref:t}),W);return a&&(x=I.createElement(bl,{onResize:function(F){var w=F.offsetWidth;B(w)},disabled:l},x)),x}var vf=I.forwardRef(o7);vf.displayName="Item";function a7(e){if(typeof MessageChannel>"u")Jr(e);else{var t=new MessageChannel;t.port1.onmessage=function(){return e()},t.port2.postMessage(void 0)}}function l7(){var e=I.useRef(null),t=function(r){e.current||(e.current=[],a7(function(){Dc.unstable_batchedUpdates(function(){e.current.forEach(function(i){i()}),e.current=null})})),e.current.push(r)};return t}function zC(e,t){var n=I.useState(t),r=xe(n,2),i=r[0],o=r[1],a=ui(function(l){e(function(){o(l)})});return[i,a]}var Zp=Ge.createContext(null),s7=["component"],g7=["className"],c7=["className"],u7=function(t,n){var r=I.useContext(Zp);if(!r){var i=t.component,o=i===void 0?"div":i,a=Wn(t,s7);return I.createElement(o,lt({},a,{ref:n}))}var l=r.className,g=Wn(r,g7),u=t.className,d=Wn(t,c7);return I.createElement(Zp.Provider,{value:null},I.createElement(vf,lt({ref:n,className:Re(l,u)},g,d)))},vJ=I.forwardRef(u7);vJ.displayName="RawItem";var d7=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],SJ="responsive",ZJ="invalidate";function I7(e){return"+ ".concat(e.length," ...")}function C7(e,t){var n=e.prefixCls,r=n===void 0?"rc-overflow":n,i=e.data,o=i===void 0?[]:i,a=e.renderItem,l=e.renderRawItem,g=e.itemKey,u=e.itemWidth,d=u===void 0?10:u,C=e.ssr,f=e.style,m=e.className,b=e.maxCount,p=e.renderRest,y=e.renderRawRest,S=e.suffix,v=e.component,B=v===void 0?"div":v,W=e.itemComponent,J=e.onVisibleChange,H=Wn(e,d7),x=C==="full",E=l7(),F=zC(E,null),w=xe(F,2),V=w[0],Y=w[1],M=V||0,L=zC(E,new Map),$=xe(L,2),U=$[0],_=$[1],P=zC(E,0),ee=xe(P,2),j=ee[0],O=ee[1],X=zC(E,0),D=xe(X,2),z=D[0],Q=D[1],ne=zC(E,0),ce=xe(ne,2),se=ce[0],ue=ce[1],ve=I.useState(null),Ae=xe(ve,2),be=Ae[0],me=Ae[1],Ne=I.useState(null),Ie=xe(Ne,2),ae=Ie[0],Ee=Ie[1],Fe=I.useMemo(function(){return ae===null&&x?Number.MAX_SAFE_INTEGER:ae||0},[ae,V]),ke=I.useState(!1),ze=xe(ke,2),He=ze[0],Le=ze[1],Ye="".concat(r,"-item"),Pe=Math.max(j,z),$e=b===SJ,ot=o.length&&$e,Ct=b===ZJ,pt=ot||typeof b=="number"&&o.length>b,it=I.useMemo(function(){var Vt=o;return ot?V===null&&x?Vt=o:Vt=o.slice(0,Math.min(o.length,M/d)):typeof b=="number"&&(Vt=o.slice(0,b)),Vt},[o,d,V,b,ot]),It=I.useMemo(function(){return ot?o.slice(Fe+1):o.slice(it.length)},[o,it,ot,Fe]),_e=I.useCallback(function(Vt,Rt){var yt;return typeof g=="function"?g(Vt):(yt=g&&(Vt==null?void 0:Vt[g]))!==null&&yt!==void 0?yt:Rt},[g]),Ot=I.useCallback(a||function(Vt){return Vt},[a]);function Qe(Vt,Rt,yt){ae===Vt&&(Rt===void 0||Rt===be)||(Ee(Vt),yt||(Le(Vt<o.length-1),J==null||J(Vt)),Rt!==void 0&&me(Rt))}function st(Vt,Rt){Y(Rt.clientWidth)}function St(Vt,Rt){_(function(yt){var ht=new Map(yt);return Rt===null?ht.delete(Vt):ht.set(Vt,Rt),ht})}function dt(Vt,Rt){Q(Rt),O(z)}function Wt(Vt,Rt){ue(Rt)}function Et(Vt){return U.get(_e(it[Vt],Vt))}ur(function(){if(M&&typeof Pe=="number"&&it){var Vt=se,Rt=it.length,yt=Rt-1;if(!Rt){Qe(0,null);return}for(var ht=0;ht<Rt;ht+=1){var sn=Et(ht);if(x&&(sn=sn||0),sn===void 0){Qe(ht-1,void 0,!0);break}if(Vt+=sn,yt===0&&Vt<=M||ht===yt-1&&Vt+Et(yt)<=M){Qe(yt,null);break}else if(Vt+Pe>M){Qe(ht-1,Vt-sn-se+z);break}}S&&Et(0)+se>M&&me(null)}},[M,U,z,se,_e,it]);var hn=He&&!!It.length,mn={};be!==null&&ot&&(mn={position:"absolute",left:be,top:0});var Xn={prefixCls:Ye,responsive:ot,component:W,invalidate:Ct},Mn=l?function(Vt,Rt){var yt=_e(Vt,Rt);return I.createElement(Zp.Provider,{key:yt,value:he(he({},Xn),{},{order:Rt,item:Vt,itemKey:yt,registerSize:St,display:Rt<=Fe})},l(Vt,Rt))}:function(Vt,Rt){var yt=_e(Vt,Rt);return I.createElement(vf,lt({},Xn,{order:Rt,key:yt,item:Vt,renderItem:Ot,itemKey:yt,registerSize:St,display:Rt<=Fe}))},In={order:hn?Fe:Number.MAX_SAFE_INTEGER,className:"".concat(Ye,"-rest"),registerSize:dt,display:hn},Jt=p||I7,jt=y?I.createElement(Zp.Provider,{value:he(he({},Xn),In)},y(It)):I.createElement(vf,lt({},Xn,In),typeof Jt=="function"?Jt(It):Jt),ln=I.createElement(B,lt({className:Re(!Ct&&r,m),style:f,ref:t},H),it.map(Mn),pt?jt:null,S&&I.createElement(vf,lt({},Xn,{responsive:$e,responsiveDisabled:!ot,order:Fe,className:"".concat(Ye,"-suffix"),registerSize:Wt,display:!0,style:mn}),S));return $e?I.createElement(bl,{onResize:st,disabled:!ot},ln):ln}var Ls=I.forwardRef(C7);Ls.displayName="Overflow";Ls.Item=vJ;Ls.RESPONSIVE=SJ;Ls.INVALIDATE=ZJ;var f7=function(t,n){var r,i=t.prefixCls,o=t.id,a=t.inputElement,l=t.disabled,g=t.tabIndex,u=t.autoFocus,d=t.autoComplete,C=t.editable,f=t.activeDescendantId,m=t.value,b=t.maxLength,p=t.onKeyDown,y=t.onMouseDown,S=t.onChange,v=t.onPaste,B=t.onCompositionStart,W=t.onCompositionEnd,J=t.onBlur,H=t.open,x=t.attrs,E=a||I.createElement("input",null),F=E,w=F.ref,V=F.props,Y=V.onKeyDown,M=V.onChange,L=V.onMouseDown,$=V.onCompositionStart,U=V.onCompositionEnd,_=V.onBlur,P=V.style;return"maxLength"in E.props,E=I.cloneElement(E,he(he(he({type:"search"},V),{},{id:o,ref:vl(n,w),disabled:l,tabIndex:g,autoComplete:d||"off",autoFocus:u,className:Re("".concat(i,"-selection-search-input"),(r=E)===null||r===void 0||(r=r.props)===null||r===void 0?void 0:r.className),role:"combobox","aria-expanded":H||!1,"aria-haspopup":"listbox","aria-owns":"".concat(o,"_list"),"aria-autocomplete":"list","aria-controls":"".concat(o,"_list"),"aria-activedescendant":H?f:void 0},x),{},{value:C?m:"",maxLength:b,readOnly:!C,unselectable:C?null:"on",style:he(he({},P),{},{opacity:C?null:0}),onKeyDown:function(j){p(j),Y&&Y(j)},onMouseDown:function(j){y(j),L&&L(j)},onChange:function(j){S(j),M&&M(j)},onCompositionStart:function(j){B(j),$&&$(j)},onCompositionEnd:function(j){W(j),U&&U(j)},onPaste:v,onBlur:function(j){J(j),_&&_(j)}})),E},GJ=I.forwardRef(f7);function BJ(e){return Array.isArray(e)?e:e!==void 0?[e]:[]}var m7=typeof window<"u"&&window.document&&window.document.documentElement,h7=m7;function A7(e){return e!=null}function p7(e){return!e&&e!==0}function KR(e){return["string","number"].includes(wt(e))}function RJ(e){var t=void 0;return e&&(KR(e.title)?t=e.title.toString():KR(e.label)&&(t=e.label.toString())),t}function b7(e,t){h7?I.useLayoutEffect(e,t):I.useEffect(e,t)}function y7(e){var t;return(t=e.key)!==null&&t!==void 0?t:e.value}var LR=function(t){t.preventDefault(),t.stopPropagation()},v7=function(t){var n=t.id,r=t.prefixCls,i=t.values,o=t.open,a=t.searchValue,l=t.autoClearSearchValue,g=t.inputRef,u=t.placeholder,d=t.disabled,C=t.mode,f=t.showSearch,m=t.autoFocus,b=t.autoComplete,p=t.activeDescendantId,y=t.tabIndex,S=t.removeIcon,v=t.maxTagCount,B=t.maxTagTextLength,W=t.maxTagPlaceholder,J=W===void 0?function(Ne){return"+ ".concat(Ne.length," ...")}:W,H=t.tagRender,x=t.onToggleOpen,E=t.onRemove,F=t.onInputChange,w=t.onInputPaste,V=t.onInputKeyDown,Y=t.onInputMouseDown,M=t.onInputCompositionStart,L=t.onInputCompositionEnd,$=t.onInputBlur,U=I.useRef(null),_=I.useState(0),P=xe(_,2),ee=P[0],j=P[1],O=I.useState(!1),X=xe(O,2),D=X[0],z=X[1],Q="".concat(r,"-selection"),ne=o||C==="multiple"&&l===!1||C==="tags"?a:"",ce=C==="tags"||C==="multiple"&&l===!1||f&&(o||D);b7(function(){j(U.current.scrollWidth)},[ne]);var se=function(Ie,ae,Ee,Fe,ke){return I.createElement("span",{title:RJ(Ie),className:Re("".concat(Q,"-item"),fe({},"".concat(Q,"-item-disabled"),Ee))},I.createElement("span",{className:"".concat(Q,"-item-content")},ae),Fe&&I.createElement(hb,{className:"".concat(Q,"-item-remove"),onMouseDown:LR,onClick:ke,customizeIcon:S},""))},ue=function(Ie,ae,Ee,Fe,ke,ze){var He=function(Ye){LR(Ye),x(!o)};return I.createElement("span",{onMouseDown:He},H({label:ae,value:Ie,disabled:Ee,closable:Fe,onClose:ke,isMaxTag:!!ze}))},ve=function(Ie){var ae=Ie.disabled,Ee=Ie.label,Fe=Ie.value,ke=!d&&!ae,ze=Ee;if(typeof B=="number"&&(typeof Ee=="string"||typeof Ee=="number")){var He=String(ze);He.length>B&&(ze="".concat(He.slice(0,B),"..."))}var Le=function(Pe){Pe&&Pe.stopPropagation(),E(Ie)};return typeof H=="function"?ue(Fe,ze,ae,ke,Le):se(Ie,ze,ae,ke,Le)},Ae=function(Ie){if(!i.length)return null;var ae=typeof J=="function"?J(Ie):J;return typeof H=="function"?ue(void 0,ae,!1,!1,void 0,!0):se({title:ae},ae,!1)},be=I.createElement("div",{className:"".concat(Q,"-search"),style:{width:ee},onFocus:function(){z(!0)},onBlur:function(){z(!1)}},I.createElement(GJ,{ref:g,open:o,prefixCls:r,id:n,inputElement:null,disabled:d,autoFocus:m,autoComplete:b,editable:ce,activeDescendantId:p,value:ne,onKeyDown:V,onMouseDown:Y,onChange:F,onPaste:w,onCompositionStart:M,onCompositionEnd:L,onBlur:$,tabIndex:y,attrs:tl(t,!0)}),I.createElement("span",{ref:U,className:"".concat(Q,"-search-mirror"),"aria-hidden":!0},ne,"")),me=I.createElement(Ls,{prefixCls:"".concat(Q,"-overflow"),data:i,renderItem:ve,renderRest:Ae,suffix:be,itemKey:y7,maxCount:v});return I.createElement("span",{className:"".concat(Q,"-wrap")},me,!i.length&&!ne&&I.createElement("span",{className:"".concat(Q,"-placeholder")},u))},S7=function(t){var n=t.inputElement,r=t.prefixCls,i=t.id,o=t.inputRef,a=t.disabled,l=t.autoFocus,g=t.autoComplete,u=t.activeDescendantId,d=t.mode,C=t.open,f=t.values,m=t.placeholder,b=t.tabIndex,p=t.showSearch,y=t.searchValue,S=t.activeValue,v=t.maxLength,B=t.onInputKeyDown,W=t.onInputMouseDown,J=t.onInputChange,H=t.onInputPaste,x=t.onInputCompositionStart,E=t.onInputCompositionEnd,F=t.onInputBlur,w=t.title,V=I.useState(!1),Y=xe(V,2),M=Y[0],L=Y[1],$=d==="combobox",U=$||p,_=f[0],P=y||"";$&&S&&!M&&(P=S),I.useEffect(function(){$&&L(!1)},[$,S]);var ee=d!=="combobox"&&!C&&!p?!1:!!P,j=w===void 0?RJ(_):w,O=I.useMemo(function(){return _?null:I.createElement("span",{className:"".concat(r,"-selection-placeholder"),style:ee?{visibility:"hidden"}:void 0},m)},[_,ee,m,r]);return I.createElement("span",{className:"".concat(r,"-selection-wrap")},I.createElement("span",{className:"".concat(r,"-selection-search")},I.createElement(GJ,{ref:o,prefixCls:r,id:i,open:C,inputElement:n,disabled:a,autoFocus:l,autoComplete:g,editable:U,activeDescendantId:u,value:P,onKeyDown:B,onMouseDown:W,onChange:function(D){L(!0),J(D)},onPaste:H,onCompositionStart:x,onCompositionEnd:E,onBlur:F,tabIndex:b,attrs:tl(t,!0),maxLength:$?v:void 0})),!$&&_?I.createElement("span",{className:"".concat(r,"-selection-item"),title:j,style:ee?{visibility:"hidden"}:void 0},_.label):null,O)},Z7=function(t,n){var r=I.useRef(null),i=I.useRef(!1),o=t.prefixCls,a=t.open,l=t.mode,g=t.showSearch,u=t.tokenWithEnter,d=t.disabled,C=t.prefix,f=t.autoClearSearchValue,m=t.onSearch,b=t.onSearchSubmit,p=t.onToggleOpen,y=t.onInputKeyDown,S=t.onInputBlur,v=t.domRef;I.useImperativeHandle(n,function(){return{focus:function(j){r.current.focus(j)},blur:function(){r.current.blur()}}});var B=yJ(0),W=xe(B,2),J=W[0],H=W[1],x=function(j){var O=j.which,X=r.current instanceof HTMLTextAreaElement;!X&&a&&(O===Mt.UP||O===Mt.DOWN)&&j.preventDefault(),y&&y(j),O===Mt.ENTER&&l==="tags"&&!i.current&&!a&&(b==null||b(j.target.value)),!(X&&!a&&~[Mt.UP,Mt.DOWN,Mt.LEFT,Mt.RIGHT].indexOf(O))&&r7(O)&&p(!0)},E=function(){H(!0)},F=I.useRef(null),w=function(j){m(j,!0,i.current)!==!1&&p(!0)},V=function(){i.current=!0},Y=function(j){i.current=!1,l!=="combobox"&&w(j.target.value)},M=function(j){var O=j.target.value;if(u&&F.current&&/[\r\n]/.test(F.current)){var X=F.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");O=O.replace(X,F.current)}F.current=null,w(O)},L=function(j){var O=j.clipboardData,X=O==null?void 0:O.getData("text");F.current=X||""},$=function(j){var O=j.target;if(O!==r.current){var X=document.body.style.msTouchAction!==void 0;X?setTimeout(function(){r.current.focus()}):r.current.focus()}},U=function(j){var O=J();j.target!==r.current&&!O&&!(l==="combobox"&&d)&&j.preventDefault(),(l!=="combobox"&&(!g||!O)||!a)&&(a&&f!==!1&&m("",!0,!1),p())},_={inputRef:r,onInputKeyDown:x,onInputMouseDown:E,onInputChange:M,onInputPaste:L,onInputCompositionStart:V,onInputCompositionEnd:Y,onInputBlur:S},P=l==="multiple"||l==="tags"?I.createElement(v7,lt({},t,_)):I.createElement(S7,lt({},t,_));return I.createElement("div",{ref:v,className:"".concat(o,"-selector"),onClick:$,onMouseDown:U},C&&I.createElement("div",{className:"".concat(o,"-prefix")},C),P)},G7=I.forwardRef(Z7);function B7(e){var t=e.prefixCls,n=e.align,r=e.arrow,i=e.arrowPos,o=r||{},a=o.className,l=o.content,g=i.x,u=g===void 0?0:g,d=i.y,C=d===void 0?0:d,f=I.useRef();if(!n||!n.points)return null;var m={position:"absolute"};if(n.autoArrow!==!1){var b=n.points[0],p=n.points[1],y=b[0],S=b[1],v=p[0],B=p[1];y===v||!["t","b"].includes(y)?m.top=C:y==="t"?m.top=0:m.bottom=0,S===B||!["l","r"].includes(S)?m.left=u:S==="l"?m.left=0:m.right=0}return I.createElement("div",{ref:f,className:Re("".concat(t,"-arrow"),a),style:m},l)}function R7(e){var t=e.prefixCls,n=e.open,r=e.zIndex,i=e.mask,o=e.motion;return i?I.createElement(is,lt({},o,{motionAppear:!0,visible:n,removeOnLeave:!0}),function(a){var l=a.className;return I.createElement("div",{style:{zIndex:r},className:Re("".concat(t,"-mask"),l)})}):null}var w7=I.memo(function(e){var t=e.children;return t},function(e,t){return t.cache}),W7=I.forwardRef(function(e,t){var n=e.popup,r=e.className,i=e.prefixCls,o=e.style,a=e.target,l=e.onVisibleChanged,g=e.open,u=e.keepDom,d=e.fresh,C=e.onClick,f=e.mask,m=e.arrow,b=e.arrowPos,p=e.align,y=e.motion,S=e.maskMotion,v=e.forceRender,B=e.getPopupContainer,W=e.autoDestroy,J=e.portal,H=e.zIndex,x=e.onMouseEnter,E=e.onMouseLeave,F=e.onPointerEnter,w=e.onPointerDownCapture,V=e.ready,Y=e.offsetX,M=e.offsetY,L=e.offsetR,$=e.offsetB,U=e.onAlign,_=e.onPrepare,P=e.stretch,ee=e.targetWidth,j=e.targetHeight,O=typeof n=="function"?n():n,X=g||u,D=(B==null?void 0:B.length)>0,z=I.useState(!B||!D),Q=xe(z,2),ne=Q[0],ce=Q[1];if(ur(function(){!ne&&D&&a&&ce(!0)},[ne,D,a]),!ne)return null;var se="auto",ue={left:"-1000vw",top:"-1000vh",right:se,bottom:se};if(V||!g){var ve,Ae=p.points,be=p.dynamicInset||((ve=p._experimental)===null||ve===void 0?void 0:ve.dynamicInset),me=be&&Ae[0][1]==="r",Ne=be&&Ae[0][0]==="b";me?(ue.right=L,ue.left=se):(ue.left=Y,ue.right=se),Ne?(ue.bottom=$,ue.top=se):(ue.top=M,ue.bottom=se)}var Ie={};return P&&(P.includes("height")&&j?Ie.height=j:P.includes("minHeight")&&j&&(Ie.minHeight=j),P.includes("width")&&ee?Ie.width=ee:P.includes("minWidth")&&ee&&(Ie.minWidth=ee)),g||(Ie.pointerEvents="none"),I.createElement(J,{open:v||X,getContainer:B&&function(){return B(a)},autoDestroy:W},I.createElement(R7,{prefixCls:i,open:g,zIndex:H,mask:f,motion:S}),I.createElement(bl,{onResize:U,disabled:!g},function(ae){return I.createElement(is,lt({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:v,leavedClassName:"".concat(i,"-hidden")},y,{onAppearPrepare:_,onEnterPrepare:_,visible:g,onVisibleChanged:function(Fe){var ke;y==null||(ke=y.onVisibleChanged)===null||ke===void 0||ke.call(y,Fe),l(Fe)}}),function(Ee,Fe){var ke=Ee.className,ze=Ee.style,He=Re(i,ke,r);return I.createElement("div",{ref:vl(ae,t,Fe),className:He,style:he(he(he(he({"--arrow-x":"".concat(b.x||0,"px"),"--arrow-y":"".concat(b.y||0,"px")},ue),Ie),ze),{},{boxSizing:"border-box",zIndex:H},o),onMouseEnter:x,onMouseLeave:E,onPointerEnter:F,onClick:C,onPointerDownCapture:w},m&&I.createElement(B7,{prefixCls:i,arrow:m,arrowPos:b,align:p}),I.createElement(w7,{cache:!g&&!d},O))})}))}),V7=I.forwardRef(function(e,t){var n=e.children,r=e.getTriggerDOMNode,i=au(n),o=I.useCallback(function(l){bZ(t,r?r(l):l)},[r]),a=Ps(o,cd(n));return i?I.cloneElement(n,{ref:a}):n}),MR=I.createContext(null);function TR(e){return e?Array.isArray(e)?e:[e]:[]}function k7(e,t,n,r){return I.useMemo(function(){var i=TR(n??t),o=TR(r??t),a=new Set(i),l=new Set(o);return e&&(a.has("hover")&&(a.delete("hover"),a.add("click")),l.has("hover")&&(l.delete("hover"),l.add("click"))),[a,l]},[e,t,n,r])}function N7(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;return n?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function X7(e,t,n,r){for(var i=n.points,o=Object.keys(e),a=0;a<o.length;a+=1){var l,g=o[a];if(N7((l=e[g])===null||l===void 0?void 0:l.points,i,r))return"".concat(t,"-placement-").concat(g)}return""}function zR(e,t,n,r){return t||(n?{motionName:"".concat(e,"-").concat(n)}:r?{motionName:r}:null)}function Vm(e){return e.ownerDocument.defaultView}function T2(e){for(var t=[],n=e==null?void 0:e.parentElement,r=["hidden","scroll","clip","auto"];n;){var i=Vm(n).getComputedStyle(n),o=i.overflowX,a=i.overflowY,l=i.overflow;[o,a,l].some(function(g){return r.includes(g)})&&t.push(n),n=n.parentElement}return t}function jf(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(e)?t:e}function DC(e){return jf(parseFloat(e),0)}function DR(e,t){var n=he({},e);return(t||[]).forEach(function(r){if(!(r instanceof HTMLBodyElement||r instanceof HTMLHtmlElement)){var i=Vm(r).getComputedStyle(r),o=i.overflow,a=i.overflowClipMargin,l=i.borderTopWidth,g=i.borderBottomWidth,u=i.borderLeftWidth,d=i.borderRightWidth,C=r.getBoundingClientRect(),f=r.offsetHeight,m=r.clientHeight,b=r.offsetWidth,p=r.clientWidth,y=DC(l),S=DC(g),v=DC(u),B=DC(d),W=jf(Math.round(C.width/b*1e3)/1e3),J=jf(Math.round(C.height/f*1e3)/1e3),H=(b-p-v-B)*W,x=(f-m-y-S)*J,E=y*J,F=S*J,w=v*W,V=B*W,Y=0,M=0;if(o==="clip"){var L=DC(a);Y=L*W,M=L*J}var $=C.x+w-Y,U=C.y+E-M,_=$+C.width+2*Y-w-V-H,P=U+C.height+2*M-E-F-x;n.left=Math.max(n.left,$),n.top=Math.max(n.top,U),n.right=Math.min(n.right,_),n.bottom=Math.min(n.bottom,P)}}),n}function PR(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n="".concat(t),r=n.match(/^(.*)\%$/);return r?e*(parseFloat(r[1])/100):parseFloat(n)}function OR(e,t){var n=t||[],r=xe(n,2),i=r[0],o=r[1];return[PR(e.width,i),PR(e.height,o)]}function _R(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[e[0],e[1]]}function Md(e,t){var n=t[0],r=t[1],i,o;return n==="t"?o=e.y:n==="b"?o=e.y+e.height:o=e.y+e.height/2,r==="l"?i=e.x:r==="r"?i=e.x+e.width:i=e.x+e.width/2,{x:i,y:o}}function Bc(e,t){var n={t:"b",b:"t",l:"r",r:"l"};return e.map(function(r,i){return i===t?n[r]||"c":r}).join("")}function J7(e,t,n,r,i,o,a){var l=I.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:i[r]||{}}),g=xe(l,2),u=g[0],d=g[1],C=I.useRef(0),f=I.useMemo(function(){return t?T2(t):[]},[t]),m=I.useRef({}),b=function(){m.current={}};e||b();var p=ui(function(){if(t&&n&&e){let Ci=function(Vo,sr){var Ri=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Pe,Oi=z.x+Vo,Cn=z.y+sr,xa=Oi+me,ko=Cn+be,No=Math.max(Oi,Ri.left),_t=Math.max(Cn,Ri.top),an=Math.min(xa,Ri.right),dr=Math.min(ko,Ri.bottom);return Math.max(0,(an-No)*(dr-_t))},$o=function(){Vn=z.y+yt,En=Vn+be,Dn=z.x+Rt,ar=Dn+me};var v,B,W,J,H=t,x=H.ownerDocument,E=Vm(H),F=E.getComputedStyle(H),w=F.width,V=F.height,Y=F.position,M=H.style.left,L=H.style.top,$=H.style.right,U=H.style.bottom,_=H.style.overflow,P=he(he({},i[r]),o),ee=x.createElement("div");(v=H.parentElement)===null||v===void 0||v.appendChild(ee),ee.style.left="".concat(H.offsetLeft,"px"),ee.style.top="".concat(H.offsetTop,"px"),ee.style.position=Y,ee.style.height="".concat(H.offsetHeight,"px"),ee.style.width="".concat(H.offsetWidth,"px"),H.style.left="0",H.style.top="0",H.style.right="auto",H.style.bottom="auto",H.style.overflow="hidden";var j;if(Array.isArray(n))j={x:n[0],y:n[1],width:0,height:0};else{var O,X,D=n.getBoundingClientRect();D.x=(O=D.x)!==null&&O!==void 0?O:D.left,D.y=(X=D.y)!==null&&X!==void 0?X:D.top,j={x:D.x,y:D.y,width:D.width,height:D.height}}var z=H.getBoundingClientRect();z.x=(B=z.x)!==null&&B!==void 0?B:z.left,z.y=(W=z.y)!==null&&W!==void 0?W:z.top;var Q=x.documentElement,ne=Q.clientWidth,ce=Q.clientHeight,se=Q.scrollWidth,ue=Q.scrollHeight,ve=Q.scrollTop,Ae=Q.scrollLeft,be=z.height,me=z.width,Ne=j.height,Ie=j.width,ae={left:0,top:0,right:ne,bottom:ce},Ee={left:-Ae,top:-ve,right:se-Ae,bottom:ue-ve},Fe=P.htmlRegion,ke="visible",ze="visibleFirst";Fe!=="scroll"&&Fe!==ze&&(Fe=ke);var He=Fe===ze,Le=DR(Ee,f),Ye=DR(ae,f),Pe=Fe===ke?Ye:Le,$e=He?Ye:Pe;H.style.left="auto",H.style.top="auto",H.style.right="0",H.style.bottom="0";var ot=H.getBoundingClientRect();H.style.left=M,H.style.top=L,H.style.right=$,H.style.bottom=U,H.style.overflow=_,(J=H.parentElement)===null||J===void 0||J.removeChild(ee);var Ct=jf(Math.round(me/parseFloat(w)*1e3)/1e3),pt=jf(Math.round(be/parseFloat(V)*1e3)/1e3);if(Ct===0||pt===0||Hf(n)&&!HZ(n))return;var it=P.offset,It=P.targetOffset,_e=OR(z,it),Ot=xe(_e,2),Qe=Ot[0],st=Ot[1],St=OR(j,It),dt=xe(St,2),Wt=dt[0],Et=dt[1];j.x-=Wt,j.y-=Et;var hn=P.points||[],mn=xe(hn,2),Xn=mn[0],Mn=mn[1],In=_R(Mn),Jt=_R(Xn),jt=Md(j,In),ln=Md(z,Jt),Vt=he({},P),Rt=jt.x-ln.x+Qe,yt=jt.y-ln.y+st,ht=Ci(Rt,yt),sn=Ci(Rt,yt,Ye),ut=Md(j,["t","l"]),ct=Md(z,["t","l"]),vt=Md(j,["b","r"]),Bt=Md(z,["b","r"]),kt=P.overflow||{},Tt=kt.adjustX,Jn=kt.adjustY,cn=kt.shiftX,yn=kt.shiftY,qt=function(sr){return typeof sr=="boolean"?sr:sr>=0},Vn,En,Dn,ar;$o();var Ln=qt(Jn),Pn=Jt[0]===In[0];if(Ln&&Jt[0]==="t"&&(En>$e.bottom||m.current.bt)){var At=yt;Pn?At-=be-Ne:At=ut.y-Bt.y-st;var Ht=Ci(Rt,At),Yt=Ci(Rt,At,Ye);Ht>ht||Ht===ht&&(!He||Yt>=sn)?(m.current.bt=!0,yt=At,st=-st,Vt.points=[Bc(Jt,0),Bc(In,0)]):m.current.bt=!1}if(Ln&&Jt[0]==="b"&&(Vn<$e.top||m.current.tb)){var at=yt;Pn?at+=be-Ne:at=vt.y-ct.y-st;var Qt=Ci(Rt,at),An=Ci(Rt,at,Ye);Qt>ht||Qt===ht&&(!He||An>=sn)?(m.current.tb=!0,yt=at,st=-st,Vt.points=[Bc(Jt,0),Bc(In,0)]):m.current.tb=!1}var Tn=qt(Tt),tr=Jt[1]===In[1];if(Tn&&Jt[1]==="l"&&(ar>$e.right||m.current.rl)){var Rr=Rt;tr?Rr-=me-Ie:Rr=ut.x-Bt.x-Qe;var Kt=Ci(Rr,yt),en=Ci(Rr,yt,Ye);Kt>ht||Kt===ht&&(!He||en>=sn)?(m.current.rl=!0,Rt=Rr,Qe=-Qe,Vt.points=[Bc(Jt,1),Bc(In,1)]):m.current.rl=!1}if(Tn&&Jt[1]==="r"&&(Dn<$e.left||m.current.lr)){var gn=Rt;tr?gn+=me-Ie:gn=vt.x-ct.x-Qe;var kr=Ci(gn,yt),Ar=Ci(gn,yt,Ye);kr>ht||kr===ht&&(!He||Ar>=sn)?(m.current.lr=!0,Rt=gn,Qe=-Qe,Vt.points=[Bc(Jt,1),Bc(In,1)]):m.current.lr=!1}$o();var Fn=cn===!0?0:cn;typeof Fn=="number"&&(Dn<Ye.left&&(Rt-=Dn-Ye.left-Qe,j.x+Ie<Ye.left+Fn&&(Rt+=j.x-Ye.left+Ie-Fn)),ar>Ye.right&&(Rt-=ar-Ye.right-Qe,j.x>Ye.right-Fn&&(Rt+=j.x-Ye.right+Fn)));var ri=yn===!0?0:yn;typeof ri=="number"&&(Vn<Ye.top&&(yt-=Vn-Ye.top-st,j.y+Ne<Ye.top+ri&&(yt+=j.y-Ye.top+Ne-ri)),En>Ye.bottom&&(yt-=En-Ye.bottom-st,j.y>Ye.bottom-ri&&(yt+=j.y-Ye.bottom+ri)));var Ao=z.x+Rt,Ei=Ao+me,Ur=z.y+yt,to=Ur+be,Gn=j.x,zt=Gn+Ie,Nt=j.y,Kn=Nt+Ne,zn=Math.max(Ao,Gn),nr=Math.min(Ei,zt),rr=(zn+nr)/2,Bi=rr-Ao,Pr=Math.max(Ur,Nt),Sn=Math.min(to,Kn),jr=(Pr+Sn)/2,di=jr-Ur;a==null||a(t,Vt);var Fi=ot.right-z.x-(Rt+z.width),Ii=ot.bottom-z.y-(yt+z.height);Ct===1&&(Rt=Math.round(Rt),Fi=Math.round(Fi)),pt===1&&(yt=Math.round(yt),Ii=Math.round(Ii));var Wo={ready:!0,offsetX:Rt/Ct,offsetY:yt/pt,offsetR:Fi/Ct,offsetB:Ii/pt,arrowX:Bi/Ct,arrowY:di/pt,scaleX:Ct,scaleY:pt,align:Vt};d(Wo)}}),y=function(){C.current+=1;var B=C.current;Promise.resolve().then(function(){C.current===B&&p()})},S=function(){d(function(B){return he(he({},B),{},{ready:!1})})};return ur(S,[r]),ur(function(){e||S()},[e]),[u.ready,u.offsetX,u.offsetY,u.offsetR,u.offsetB,u.arrowX,u.arrowY,u.scaleX,u.scaleY,u.align,y]}function x7(e,t,n,r,i){ur(function(){if(e&&t&&n){let C=function(){r(),i()};var o=t,a=n,l=T2(o),g=T2(a),u=Vm(a),d=new Set([u].concat(Gt(l),Gt(g)));return d.forEach(function(f){f.addEventListener("scroll",C,{passive:!0})}),u.addEventListener("resize",C,{passive:!0}),r(),function(){d.forEach(function(f){f.removeEventListener("scroll",C),u.removeEventListener("resize",C)})}}},[e,t,n])}function H7(e,t,n,r,i,o,a,l){var g=I.useRef(e);g.current=e;var u=I.useRef(!1);I.useEffect(function(){if(t&&r&&(!i||o)){var C=function(){u.current=!1},f=function(y){var S;g.current&&!a(((S=y.composedPath)===null||S===void 0||(S=S.call(y))===null||S===void 0?void 0:S[0])||y.target)&&!u.current&&l(!1)},m=Vm(r);m.addEventListener("pointerdown",C,!0),m.addEventListener("mousedown",f,!0),m.addEventListener("contextmenu",f,!0);var b=pp(n);return b&&(b.addEventListener("mousedown",f,!0),b.addEventListener("contextmenu",f,!0)),function(){m.removeEventListener("pointerdown",C,!0),m.removeEventListener("mousedown",f,!0),m.removeEventListener("contextmenu",f,!0),b&&(b.removeEventListener("mousedown",f,!0),b.removeEventListener("contextmenu",f,!0))}}},[t,n,r,i,o]);function d(){u.current=!0}return d}var Y7=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function E7(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Cb,t=I.forwardRef(function(n,r){var i=n.prefixCls,o=i===void 0?"rc-trigger-popup":i,a=n.children,l=n.action,g=l===void 0?"hover":l,u=n.showAction,d=n.hideAction,C=n.popupVisible,f=n.defaultPopupVisible,m=n.onPopupVisibleChange,b=n.afterPopupVisibleChange,p=n.mouseEnterDelay,y=n.mouseLeaveDelay,S=y===void 0?.1:y,v=n.focusDelay,B=n.blurDelay,W=n.mask,J=n.maskClosable,H=J===void 0?!0:J,x=n.getPopupContainer,E=n.forceRender,F=n.autoDestroy,w=n.destroyPopupOnHide,V=n.popup,Y=n.popupClassName,M=n.popupStyle,L=n.popupPlacement,$=n.builtinPlacements,U=$===void 0?{}:$,_=n.popupAlign,P=n.zIndex,ee=n.stretch,j=n.getPopupClassNameFromAlign,O=n.fresh,X=n.alignPoint,D=n.onPopupClick,z=n.onPopupAlign,Q=n.arrow,ne=n.popupMotion,ce=n.maskMotion,se=n.popupTransitionName,ue=n.popupAnimation,ve=n.maskTransitionName,Ae=n.maskAnimation,be=n.className,me=n.getTriggerDOMNode,Ne=Wn(n,Y7),Ie=F||w||!1,ae=I.useState(!1),Ee=xe(ae,2),Fe=Ee[0],ke=Ee[1];ur(function(){ke(DZ())},[]);var ze=I.useRef({}),He=I.useContext(MR),Le=I.useMemo(function(){return{registerSubPopup:function(an,dr){ze.current[an]=dr,He==null||He.registerSubPopup(an,dr)}}},[He]),Ye=z3(),Pe=I.useState(null),$e=xe(Pe,2),ot=$e[0],Ct=$e[1],pt=I.useRef(null),it=ui(function(_t){pt.current=_t,Hf(_t)&&ot!==_t&&Ct(_t),He==null||He.registerSubPopup(Ye,_t)}),It=I.useState(null),_e=xe(It,2),Ot=_e[0],Qe=_e[1],st=I.useRef(null),St=ui(function(_t){Hf(_t)&&Ot!==_t&&(Qe(_t),st.current=_t)}),dt=I.Children.only(a),Wt=(dt==null?void 0:dt.props)||{},Et={},hn=ui(function(_t){var an,dr,Hr=Ot;return(Hr==null?void 0:Hr.contains(_t))||((an=pp(Hr))===null||an===void 0?void 0:an.host)===_t||_t===Hr||(ot==null?void 0:ot.contains(_t))||((dr=pp(ot))===null||dr===void 0?void 0:dr.host)===_t||_t===ot||Object.values(ze.current).some(function(pr){return(pr==null?void 0:pr.contains(_t))||_t===pr})}),mn=zR(o,ne,ue,se),Xn=zR(o,ce,Ae,ve),Mn=I.useState(f||!1),In=xe(Mn,2),Jt=In[0],jt=In[1],ln=C??Jt,Vt=ui(function(_t){C===void 0&&jt(_t)});ur(function(){jt(C||!1)},[C]);var Rt=I.useRef(ln);Rt.current=ln;var yt=I.useRef([]);yt.current=[];var ht=ui(function(_t){var an;Vt(_t),((an=yt.current[yt.current.length-1])!==null&&an!==void 0?an:ln)!==_t&&(yt.current.push(_t),m==null||m(_t))}),sn=I.useRef(),ut=function(){clearTimeout(sn.current)},ct=function(an){var dr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;ut(),dr===0?ht(an):sn.current=setTimeout(function(){ht(an)},dr*1e3)};I.useEffect(function(){return ut},[]);var vt=I.useState(!1),Bt=xe(vt,2),kt=Bt[0],Tt=Bt[1];ur(function(_t){(!_t||ln)&&Tt(!0)},[ln]);var Jn=I.useState(null),cn=xe(Jn,2),yn=cn[0],qt=cn[1],Vn=I.useState(null),En=xe(Vn,2),Dn=En[0],ar=En[1],Ln=function(an){ar([an.clientX,an.clientY])},Pn=J7(ln,ot,X&&Dn!==null?Dn:Ot,L,U,_,z),At=xe(Pn,11),Ht=At[0],Yt=At[1],at=At[2],Qt=At[3],An=At[4],Tn=At[5],tr=At[6],Rr=At[7],Kt=At[8],en=At[9],gn=At[10],kr=k7(Fe,g,u,d),Ar=xe(kr,2),Fn=Ar[0],ri=Ar[1],Ao=Fn.has("click"),Ei=ri.has("click")||ri.has("contextMenu"),Ur=ui(function(){kt||gn()}),to=function(){Rt.current&&X&&Ei&&ct(!1)};x7(ln,Ot,ot,Ur,to),ur(function(){Ur()},[Dn,L]),ur(function(){ln&&!(U!=null&&U[L])&&Ur()},[JSON.stringify(_)]);var Gn=I.useMemo(function(){var _t=X7(U,o,en,X);return Re(_t,j==null?void 0:j(en))},[en,j,U,o,X]);I.useImperativeHandle(r,function(){return{nativeElement:st.current,popupElement:pt.current,forceAlign:Ur}});var zt=I.useState(0),Nt=xe(zt,2),Kn=Nt[0],zn=Nt[1],nr=I.useState(0),rr=xe(nr,2),Bi=rr[0],Pr=rr[1],Sn=function(){if(ee&&Ot){var an=Ot.getBoundingClientRect();zn(an.width),Pr(an.height)}},jr=function(){Sn(),Ur()},di=function(an){Tt(!1),gn(),b==null||b(an)},Fi=function(){return new Promise(function(an){Sn(),qt(function(){return an})})};ur(function(){yn&&(gn(),yn(),qt(null))},[yn]);function Ii(_t,an,dr,Hr){Et[_t]=function(pr){var Zl;Hr==null||Hr(pr),ct(an,dr);for(var js=arguments.length,fa=new Array(js>1?js-1:0),no=1;no<js;no++)fa[no-1]=arguments[no];(Zl=Wt[_t])===null||Zl===void 0||Zl.call.apply(Zl,[Wt,pr].concat(fa))}}(Ao||Ei)&&(Et.onClick=function(_t){var an;Rt.current&&Ei?ct(!1):!Rt.current&&Ao&&(Ln(_t),ct(!0));for(var dr=arguments.length,Hr=new Array(dr>1?dr-1:0),pr=1;pr<dr;pr++)Hr[pr-1]=arguments[pr];(an=Wt.onClick)===null||an===void 0||an.call.apply(an,[Wt,_t].concat(Hr))});var Wo=H7(ln,Ei,Ot,ot,W,H,hn,ct),Ci=Fn.has("hover"),$o=ri.has("hover"),Vo,sr;Ci&&(Ii("onMouseEnter",!0,p,function(_t){Ln(_t)}),Ii("onPointerEnter",!0,p,function(_t){Ln(_t)}),Vo=function(an){(ln||kt)&&ot!==null&&ot!==void 0&&ot.contains(an.target)&&ct(!0,p)},X&&(Et.onMouseMove=function(_t){var an;(an=Wt.onMouseMove)===null||an===void 0||an.call(Wt,_t)})),$o&&(Ii("onMouseLeave",!1,S),Ii("onPointerLeave",!1,S),sr=function(){ct(!1,S)}),Fn.has("focus")&&Ii("onFocus",!0,v),ri.has("focus")&&Ii("onBlur",!1,B),Fn.has("contextMenu")&&(Et.onContextMenu=function(_t){var an;Rt.current&&ri.has("contextMenu")?ct(!1):(Ln(_t),ct(!0)),_t.preventDefault();for(var dr=arguments.length,Hr=new Array(dr>1?dr-1:0),pr=1;pr<dr;pr++)Hr[pr-1]=arguments[pr];(an=Wt.onContextMenu)===null||an===void 0||an.call.apply(an,[Wt,_t].concat(Hr))}),be&&(Et.className=Re(Wt.className,be));var Ri=he(he({},Wt),Et),Oi={},Cn=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];Cn.forEach(function(_t){Ne[_t]&&(Oi[_t]=function(){for(var an,dr=arguments.length,Hr=new Array(dr),pr=0;pr<dr;pr++)Hr[pr]=arguments[pr];(an=Ri[_t])===null||an===void 0||an.call.apply(an,[Ri].concat(Hr)),Ne[_t].apply(Ne,Hr)})});var xa=I.cloneElement(dt,he(he({},Ri),Oi)),ko={x:Tn,y:tr},No=Q?he({},Q!==!0?Q:{}):null;return I.createElement(I.Fragment,null,I.createElement(bl,{disabled:!ln,ref:St,onResize:jr},I.createElement(V7,{getTriggerDOMNode:me},xa)),I.createElement(MR.Provider,{value:Le},I.createElement(W7,{portal:e,ref:it,prefixCls:o,popup:V,className:Re(Y,Gn),style:M,target:Ot,onMouseEnter:Vo,onMouseLeave:sr,onPointerEnter:Vo,zIndex:P,open:ln,keepDom:kt,fresh:O,onClick:D,onPointerDownCapture:Wo,mask:W,motion:mn,maskMotion:Xn,onVisibleChanged:di,onPrepare:Fi,forceRender:E,autoDestroy:Ie,getPopupContainer:x,align:en,arrow:No,arrowPos:ko,ready:Ht,offsetX:Yt,offsetY:at,offsetR:Qt,offsetB:An,onAlign:Ur,stretch:ee,targetWidth:Kn/Rr,targetHeight:Bi/Kt})))});return t}const Ab=E7(Cb);var F7=["prefixCls","disabled","visible","children","popupElement","animation","transitionName","dropdownStyle","dropdownClassName","direction","placement","builtinPlacements","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","getPopupContainer","empty","getTriggerDOMNode","onPopupVisibleChange","onPopupMouseEnter"],K7=function(t){var n=t===!0?0:1;return{bottomLeft:{points:["tl","bl"],offset:[0,4],overflow:{adjustX:n,adjustY:1},htmlRegion:"scroll"},bottomRight:{points:["tr","br"],offset:[0,4],overflow:{adjustX:n,adjustY:1},htmlRegion:"scroll"},topLeft:{points:["bl","tl"],offset:[0,-4],overflow:{adjustX:n,adjustY:1},htmlRegion:"scroll"},topRight:{points:["br","tr"],offset:[0,-4],overflow:{adjustX:n,adjustY:1},htmlRegion:"scroll"}}},L7=function(t,n){var r=t.prefixCls;t.disabled;var i=t.visible,o=t.children,a=t.popupElement,l=t.animation,g=t.transitionName,u=t.dropdownStyle,d=t.dropdownClassName,C=t.direction,f=C===void 0?"ltr":C,m=t.placement,b=t.builtinPlacements,p=t.dropdownMatchSelectWidth,y=t.dropdownRender,S=t.dropdownAlign,v=t.getPopupContainer,B=t.empty,W=t.getTriggerDOMNode,J=t.onPopupVisibleChange,H=t.onPopupMouseEnter,x=Wn(t,F7),E="".concat(r,"-dropdown"),F=a;y&&(F=y(a));var w=I.useMemo(function(){return b||K7(p)},[b,p]),V=l?"".concat(E,"-").concat(l):g,Y=typeof p=="number",M=I.useMemo(function(){return Y?null:p===!1?"minWidth":"width"},[p,Y]),L=u;Y&&(L=he(he({},L),{},{width:p}));var $=I.useRef(null);return I.useImperativeHandle(n,function(){return{getPopupElement:function(){var _;return(_=$.current)===null||_===void 0?void 0:_.popupElement}}}),I.createElement(Ab,lt({},x,{showAction:J?["click"]:[],hideAction:J?["click"]:[],popupPlacement:m||(f==="rtl"?"bottomRight":"bottomLeft"),builtinPlacements:w,prefixCls:E,popupTransitionName:V,popup:I.createElement("div",{onMouseEnter:H},F),ref:$,stretch:M,popupAlign:S,popupVisible:i,getPopupContainer:v,popupClassName:Re(d,fe({},"".concat(E,"-empty"),B)),popupStyle:L,getTriggerDOMNode:W,onPopupVisibleChange:J}),o)},M7=I.forwardRef(L7);function UR(e,t){var n=e.key,r;return"value"in e&&(r=e.value),n??(r!==void 0?r:"rc-index-key-".concat(t))}function z2(e){return typeof e<"u"&&!Number.isNaN(e)}function wJ(e,t){var n=e||{},r=n.label,i=n.value,o=n.options,a=n.groupLabel,l=r||(t?"children":"label");return{label:l,value:i||"value",options:o||"options",groupLabel:a||l}}function T7(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.fieldNames,r=t.childrenAsData,i=[],o=wJ(n,!1),a=o.label,l=o.value,g=o.options,u=o.groupLabel;function d(C,f){Array.isArray(C)&&C.forEach(function(m){if(f||!(g in m)){var b=m[l];i.push({key:UR(m,i.length),groupOption:f,data:m,label:m[a],value:b})}else{var p=m[u];p===void 0&&r&&(p=m.label),i.push({key:UR(m,i.length),group:!0,data:m,label:p}),d(m[g],!0)}})}return d(e,!1),i}function D2(e){var t=he({},e);return"props"in t||Object.defineProperty(t,"props",{get:function(){return wo(!1,"Return type is option instead of Option instance. Please read value directly instead of reading from `props`."),t}}),t}var z7=function(t,n,r){if(!n||!n.length)return null;var i=!1,o=function l(g,u){var d=EX(u),C=d[0],f=d.slice(1);if(!C)return[g];var m=g.split(C);return i=i||m.length>1,m.reduce(function(b,p){return[].concat(Gt(b),Gt(l(p,f)))},[]).filter(Boolean)},a=o(t,n);return i?typeof r<"u"?a.slice(0,r):a:null},PZ=I.createContext(null);function D7(e){var t=e.visible,n=e.values;if(!t)return null;var r=50;return I.createElement("span",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"".concat(n.slice(0,r).map(function(i){var o=i.label,a=i.value;return["number","string"].includes(wt(o))?o:a}).join(", ")),n.length>r?", ...":null)}var P7=["id","prefixCls","className","showSearch","tagRender","direction","omitDomProps","displayValues","onDisplayValuesChange","emptyOptions","notFoundContent","onClear","mode","disabled","loading","getInputElement","getRawInputElement","open","defaultOpen","onDropdownVisibleChange","activeValue","onActiveValueChange","activeDescendantId","searchValue","autoClearSearchValue","onSearch","onSearchSplit","tokenSeparators","allowClear","prefix","suffixIcon","clearIcon","OptionList","animation","transitionName","dropdownStyle","dropdownClassName","dropdownMatchSelectWidth","dropdownRender","dropdownAlign","placement","builtinPlacements","getPopupContainer","showAction","onFocus","onBlur","onKeyUp","onKeyDown","onMouseDown"],O7=["value","onChange","removeIcon","placeholder","autoFocus","maxTagCount","maxTagTextLength","maxTagPlaceholder","choiceTransitionName","onInputKeyDown","onPopupScroll","tabIndex"],P2=function(t){return t==="tags"||t==="multiple"},_7=I.forwardRef(function(e,t){var n,r=e.id,i=e.prefixCls,o=e.className,a=e.showSearch,l=e.tagRender,g=e.direction,u=e.omitDomProps,d=e.displayValues,C=e.onDisplayValuesChange,f=e.emptyOptions,m=e.notFoundContent,b=m===void 0?"Not Found":m,p=e.onClear,y=e.mode,S=e.disabled,v=e.loading,B=e.getInputElement,W=e.getRawInputElement,J=e.open,H=e.defaultOpen,x=e.onDropdownVisibleChange,E=e.activeValue,F=e.onActiveValueChange,w=e.activeDescendantId,V=e.searchValue,Y=e.autoClearSearchValue,M=e.onSearch,L=e.onSearchSplit,$=e.tokenSeparators,U=e.allowClear,_=e.prefix,P=e.suffixIcon,ee=e.clearIcon,j=e.OptionList,O=e.animation,X=e.transitionName,D=e.dropdownStyle,z=e.dropdownClassName,Q=e.dropdownMatchSelectWidth,ne=e.dropdownRender,ce=e.dropdownAlign,se=e.placement,ue=e.builtinPlacements,ve=e.getPopupContainer,Ae=e.showAction,be=Ae===void 0?[]:Ae,me=e.onFocus,Ne=e.onBlur,Ie=e.onKeyUp,ae=e.onKeyDown,Ee=e.onMouseDown,Fe=Wn(e,P7),ke=P2(y),ze=(a!==void 0?a:ke)||y==="combobox",He=he({},Fe);O7.forEach(function(zt){delete He[zt]}),u==null||u.forEach(function(zt){delete He[zt]});var Le=I.useState(!1),Ye=xe(Le,2),Pe=Ye[0],$e=Ye[1];I.useEffect(function(){$e(DZ())},[]);var ot=I.useRef(null),Ct=I.useRef(null),pt=I.useRef(null),it=I.useRef(null),It=I.useRef(null),_e=I.useRef(!1),Ot=t7(),Qe=xe(Ot,3),st=Qe[0],St=Qe[1],dt=Qe[2];I.useImperativeHandle(t,function(){var zt,Nt;return{focus:(zt=it.current)===null||zt===void 0?void 0:zt.focus,blur:(Nt=it.current)===null||Nt===void 0?void 0:Nt.blur,scrollTo:function(zn){var nr;return(nr=It.current)===null||nr===void 0?void 0:nr.scrollTo(zn)},nativeElement:ot.current||Ct.current}});var Wt=I.useMemo(function(){var zt;if(y!=="combobox")return V;var Nt=(zt=d[0])===null||zt===void 0?void 0:zt.value;return typeof Nt=="string"||typeof Nt=="number"?String(Nt):""},[V,y,d]),Et=y==="combobox"&&typeof B=="function"&&B()||null,hn=typeof W=="function"&&W(),mn=Ps(Ct,hn==null||(n=hn.props)===null||n===void 0?void 0:n.ref),Xn=I.useState(!1),Mn=xe(Xn,2),In=Mn[0],Jt=Mn[1];ur(function(){Jt(!0)},[]);var jt=qi(!1,{defaultValue:H,value:J}),ln=xe(jt,2),Vt=ln[0],Rt=ln[1],yt=In?Vt:!1,ht=!b&&f;(S||ht&&yt&&y==="combobox")&&(yt=!1);var sn=ht?!1:yt,ut=I.useCallback(function(zt){var Nt=zt!==void 0?zt:!yt;S||(Rt(Nt),yt!==Nt&&(x==null||x(Nt)))},[S,yt,Rt,x]),ct=I.useMemo(function(){return($||[]).some(function(zt){return[`
`,`\r
`].includes(zt)})},[$]),vt=I.useContext(PZ)||{},Bt=vt.maxCount,kt=vt.rawValues,Tt=function(Nt,Kn,zn){if(!(ke&&z2(Bt)&&(kt==null?void 0:kt.size)>=Bt)){var nr=!0,rr=Nt;F==null||F(null);var Bi=z7(Nt,$,z2(Bt)?Bt-kt.size:void 0),Pr=zn?null:Bi;return y!=="combobox"&&Pr&&(rr="",L==null||L(Pr),ut(!1),nr=!1),M&&Wt!==rr&&M(rr,{source:Kn?"typing":"effect"}),nr}},Jn=function(Nt){!Nt||!Nt.trim()||M(Nt,{source:"submit"})};I.useEffect(function(){!yt&&!ke&&y!=="combobox"&&Tt("",!1,!1)},[yt]),I.useEffect(function(){Vt&&S&&Rt(!1),S&&!_e.current&&St(!1)},[S]);var cn=yJ(),yn=xe(cn,2),qt=yn[0],Vn=yn[1],En=I.useRef(!1),Dn=function(Nt){var Kn=qt(),zn=Nt.key,nr=zn==="Enter";if(nr&&(y!=="combobox"&&Nt.preventDefault(),yt||ut(!0)),Vn(!!Wt),zn==="Backspace"&&!Kn&&ke&&!Wt&&d.length){for(var rr=Gt(d),Bi=null,Pr=rr.length-1;Pr>=0;Pr-=1){var Sn=rr[Pr];if(!Sn.disabled){rr.splice(Pr,1),Bi=Sn;break}}Bi&&C(rr,{type:"remove",values:[Bi]})}for(var jr=arguments.length,di=new Array(jr>1?jr-1:0),Fi=1;Fi<jr;Fi++)di[Fi-1]=arguments[Fi];if(yt&&(!nr||!En.current)){var Ii;nr&&(En.current=!0),(Ii=It.current)===null||Ii===void 0||Ii.onKeyDown.apply(Ii,[Nt].concat(di))}ae==null||ae.apply(void 0,[Nt].concat(di))},ar=function(Nt){for(var Kn=arguments.length,zn=new Array(Kn>1?Kn-1:0),nr=1;nr<Kn;nr++)zn[nr-1]=arguments[nr];if(yt){var rr;(rr=It.current)===null||rr===void 0||rr.onKeyUp.apply(rr,[Nt].concat(zn))}Nt.key==="Enter"&&(En.current=!1),Ie==null||Ie.apply(void 0,[Nt].concat(zn))},Ln=function(Nt){var Kn=d.filter(function(zn){return zn!==Nt});C(Kn,{type:"remove",values:[Nt]})},Pn=function(){En.current=!1},At=I.useRef(!1),Ht=function(){St(!0),S||(me&&!At.current&&me.apply(void 0,arguments),be.includes("focus")&&ut(!0)),At.current=!0},Yt=function(){_e.current=!0,St(!1,function(){At.current=!1,_e.current=!1,ut(!1)}),!S&&(Wt&&(y==="tags"?M(Wt,{source:"submit"}):y==="multiple"&&M("",{source:"blur"})),Ne&&Ne.apply(void 0,arguments))},at=[];I.useEffect(function(){return function(){at.forEach(function(zt){return clearTimeout(zt)}),at.splice(0,at.length)}},[]);var Qt=function(Nt){var Kn,zn=Nt.target,nr=(Kn=pt.current)===null||Kn===void 0?void 0:Kn.getPopupElement();if(nr&&nr.contains(zn)){var rr=setTimeout(function(){var jr=at.indexOf(rr);if(jr!==-1&&at.splice(jr,1),dt(),!Pe&&!nr.contains(document.activeElement)){var di;(di=it.current)===null||di===void 0||di.focus()}});at.push(rr)}for(var Bi=arguments.length,Pr=new Array(Bi>1?Bi-1:0),Sn=1;Sn<Bi;Sn++)Pr[Sn-1]=arguments[Sn];Ee==null||Ee.apply(void 0,[Nt].concat(Pr))},An=I.useState({}),Tn=xe(An,2),tr=Tn[1];function Rr(){tr({})}var Kt;hn&&(Kt=function(Nt){ut(Nt)}),n7(function(){var zt;return[ot.current,(zt=pt.current)===null||zt===void 0?void 0:zt.getPopupElement()]},sn,ut,!!hn);var en=I.useMemo(function(){return he(he({},e),{},{notFoundContent:b,open:yt,triggerOpen:sn,id:r,showSearch:ze,multiple:ke,toggleOpen:ut})},[e,b,sn,yt,r,ze,ke,ut]),gn=!!P||v,kr;gn&&(kr=I.createElement(hb,{className:Re("".concat(i,"-arrow"),fe({},"".concat(i,"-arrow-loading"),v)),customizeIcon:P,customizeIconProps:{loading:v,searchValue:Wt,open:yt,focused:st,showSearch:ze}}));var Ar=function(){var Nt;p==null||p(),(Nt=it.current)===null||Nt===void 0||Nt.focus(),C([],{type:"clear",values:d}),Tt("",!1,!1)},Fn=qQ(i,Ar,d,U,ee,S,Wt,y),ri=Fn.allowClear,Ao=Fn.clearIcon,Ei=I.createElement(j,{ref:It}),Ur=Re(i,o,fe(fe(fe(fe(fe(fe(fe(fe(fe(fe({},"".concat(i,"-focused"),st),"".concat(i,"-multiple"),ke),"".concat(i,"-single"),!ke),"".concat(i,"-allow-clear"),U),"".concat(i,"-show-arrow"),gn),"".concat(i,"-disabled"),S),"".concat(i,"-loading"),v),"".concat(i,"-open"),yt),"".concat(i,"-customize-input"),Et),"".concat(i,"-show-search"),ze)),to=I.createElement(M7,{ref:pt,disabled:S,prefixCls:i,visible:sn,popupElement:Ei,animation:O,transitionName:X,dropdownStyle:D,dropdownClassName:z,direction:g,dropdownMatchSelectWidth:Q,dropdownRender:ne,dropdownAlign:ce,placement:se,builtinPlacements:ue,getPopupContainer:ve,empty:f,getTriggerDOMNode:function(Nt){return Ct.current||Nt},onPopupVisibleChange:Kt,onPopupMouseEnter:Rr},hn?I.cloneElement(hn,{ref:mn}):I.createElement(G7,lt({},e,{domRef:Ct,prefixCls:i,inputElement:Et,ref:it,id:r,prefix:_,showSearch:ze,autoClearSearchValue:Y,mode:y,activeDescendantId:w,tagRender:l,values:d,open:yt,onToggleOpen:ut,activeValue:E,searchValue:Wt,onSearch:Tt,onSearchSubmit:Jn,onRemove:Ln,tokenWithEnter:ct,onInputBlur:Pn}))),Gn;return hn?Gn=to:Gn=I.createElement("div",lt({className:Ur},He,{ref:ot,onMouseDown:Qt,onKeyDown:Dn,onKeyUp:ar,onFocus:Ht,onBlur:Yt}),I.createElement(D7,{visible:st&&!yt,values:d}),to,kr,ri&&Ao),I.createElement(bJ.Provider,{value:en},Gn)}),OZ=function(){return null};OZ.isSelectOptGroup=!0;var _Z=function(){return null};_Z.isSelectOption=!0;var WJ=I.forwardRef(function(e,t){var n=e.height,r=e.offsetY,i=e.offsetX,o=e.children,a=e.prefixCls,l=e.onInnerResize,g=e.innerProps,u=e.rtl,d=e.extra,C={},f={display:"flex",flexDirection:"column"};return r!==void 0&&(C={height:n,position:"relative",overflow:"hidden"},f=he(he({},f),{},fe(fe(fe(fe(fe({transform:"translateY(".concat(r,"px)")},u?"marginRight":"marginLeft",-i),"position","absolute"),"left",0),"right",0),"top",0))),I.createElement("div",{style:C},I.createElement(bl,{onResize:function(b){var p=b.offsetHeight;p&&l&&l()}},I.createElement("div",lt({style:f,className:Re(fe({},"".concat(a,"-holder-inner"),a)),ref:t},g),o,d)))});WJ.displayName="Filler";function U7(e){var t=e.children,n=e.setRef,r=I.useCallback(function(i){n(i)},[]);return I.cloneElement(t,{ref:r})}function j7(e,t,n,r,i,o,a,l){var g=l.getKey;return e.slice(t,n+1).map(function(u,d){var C=t+d,f=a(u,C,{style:{width:r},offsetX:i}),m=g(u);return I.createElement(U7,{key:m,setRef:function(p){return o(u,p)}},f)})}function Q7(e,t,n){var r=e.length,i=t.length,o,a;if(r===0&&i===0)return null;r<i?(o=e,a=t):(o=t,a=e);var l={__EMPTY_ITEM__:!0};function g(b){return b!==void 0?n(b):l}for(var u=null,d=Math.abs(r-i)!==1,C=0;C<a.length;C+=1){var f=g(o[C]),m=g(a[C]);if(f!==m){u=C,d=d||f!==g(a[C+1]);break}}return u===null?null:{index:u,multiple:d}}function $7(e,t,n){var r=I.useState(e),i=xe(r,2),o=i[0],a=i[1],l=I.useState(null),g=xe(l,2),u=g[0],d=g[1];return I.useEffect(function(){var C=Q7(o||[],e||[],t);(C==null?void 0:C.index)!==void 0&&d(e[C.index]),a(e)},[e]),[u]}var jR=(typeof navigator>"u"?"undefined":wt(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const VJ=function(e,t,n,r){var i=I.useRef(!1),o=I.useRef(null);function a(){clearTimeout(o.current),i.current=!0,o.current=setTimeout(function(){i.current=!1},50)}var l=I.useRef({top:e,bottom:t,left:n,right:r});return l.current.top=e,l.current.bottom=t,l.current.left=n,l.current.right=r,function(g,u){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,C=g?u<0&&l.current.left||u>0&&l.current.right:u<0&&l.current.top||u>0&&l.current.bottom;return d&&C?(clearTimeout(o.current),i.current=!1):(!C||i.current)&&a(),!i.current&&C}};function q7(e,t,n,r,i,o,a){var l=I.useRef(0),g=I.useRef(null),u=I.useRef(null),d=I.useRef(!1),C=VJ(t,n,r,i);function f(v,B){if(Jr.cancel(g.current),!C(!1,B)){var W=v;if(!W._virtualHandled)W._virtualHandled=!0;else return;l.current+=B,u.current=B,jR||W.preventDefault(),g.current=Jr(function(){var J=d.current?10:1;a(l.current*J,!1),l.current=0})}}function m(v,B){a(B,!0),jR||v.preventDefault()}var b=I.useRef(null),p=I.useRef(null);function y(v){if(e){Jr.cancel(p.current),p.current=Jr(function(){b.current=null},2);var B=v.deltaX,W=v.deltaY,J=v.shiftKey,H=B,x=W;(b.current==="sx"||!b.current&&J&&W&&!B)&&(H=W,x=0,b.current="sx");var E=Math.abs(H),F=Math.abs(x);b.current===null&&(b.current=o&&E>F?"x":"y"),b.current==="y"?f(v,x):m(v,H)}}function S(v){e&&(d.current=v.detail===u.current)}return[y,S]}function e6(e,t,n,r){var i=I.useMemo(function(){return[new Map,[]]},[e,n.id,r]),o=xe(i,2),a=o[0],l=o[1],g=function(d){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d,f=a.get(d),m=a.get(C);if(f===void 0||m===void 0)for(var b=e.length,p=l.length;p<b;p+=1){var y,S=e[p],v=t(S);a.set(v,p);var B=(y=n.get(v))!==null&&y!==void 0?y:r;if(l[p]=(l[p-1]||0)+B,v===d&&(f=p),v===C&&(m=p),f!==void 0&&m!==void 0)break}return{top:l[f-1]||0,bottom:l[m]}};return g}var t6=function(){function e(){zi(this,e),fe(this,"maps",void 0),fe(this,"id",0),fe(this,"diffKeys",new Set),this.maps=Object.create(null)}return Di(e,[{key:"set",value:function(n,r){this.maps[n]=r,this.id+=1,this.diffKeys.add(n)}},{key:"get",value:function(n){return this.maps[n]}},{key:"resetRecord",value:function(){this.diffKeys.clear()}},{key:"getRecord",value:function(){return this.diffKeys}}]),e}();function QR(e){var t=parseFloat(e);return isNaN(t)?0:t}function n6(e,t,n){var r=I.useState(0),i=xe(r,2),o=i[0],a=i[1],l=I.useRef(new Map),g=I.useRef(new t6),u=I.useRef(0);function d(){u.current+=1}function C(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;d();var b=function(){var S=!1;l.current.forEach(function(v,B){if(v&&v.offsetParent){var W=Af(v),J=W.offsetHeight,H=getComputedStyle(W),x=H.marginTop,E=H.marginBottom,F=QR(x),w=QR(E),V=J+F+w;g.current.get(B)!==V&&(g.current.set(B,V),S=!0)}}),S&&a(function(v){return v+1})};if(m)b();else{u.current+=1;var p=u.current;Promise.resolve().then(function(){p===u.current&&b()})}}function f(m,b){var p=e(m);l.current.get(p),b?(l.current.set(p,b),C()):l.current.delete(p)}return I.useEffect(function(){return d},[]),[f,C,g.current,o]}var $R=14/15;function r6(e,t,n){var r=I.useRef(!1),i=I.useRef(0),o=I.useRef(0),a=I.useRef(null),l=I.useRef(null),g,u=function(m){if(r.current){var b=Math.ceil(m.touches[0].pageX),p=Math.ceil(m.touches[0].pageY),y=i.current-b,S=o.current-p,v=Math.abs(y)>Math.abs(S);v?i.current=b:o.current=p;var B=n(v,v?y:S,!1,m);B&&m.preventDefault(),clearInterval(l.current),B&&(l.current=setInterval(function(){v?y*=$R:S*=$R;var W=Math.floor(v?y:S);(!n(v,W,!0)||Math.abs(W)<=.1)&&clearInterval(l.current)},16))}},d=function(){r.current=!1,g()},C=function(m){g(),m.touches.length===1&&!r.current&&(r.current=!0,i.current=Math.ceil(m.touches[0].pageX),o.current=Math.ceil(m.touches[0].pageY),a.current=m.target,a.current.addEventListener("touchmove",u,{passive:!1}),a.current.addEventListener("touchend",d,{passive:!0}))};g=function(){a.current&&(a.current.removeEventListener("touchmove",u),a.current.removeEventListener("touchend",d))},ur(function(){return e&&t.current.addEventListener("touchstart",C,{passive:!0}),function(){var f;(f=t.current)===null||f===void 0||f.removeEventListener("touchstart",C),g(),clearInterval(l.current)}},[e])}function qR(e){return Math.floor(Math.pow(e,.5))}function O2(e,t){var n="touches"in e?e.touches[0]:e;return n[t?"pageX":"pageY"]-window[t?"scrollX":"scrollY"]}function i6(e,t,n){I.useEffect(function(){var r=t.current;if(e&&r){var i=!1,o,a,l=function(){Jr.cancel(o)},g=function f(){l(),o=Jr(function(){n(a),f()})},u=function(m){var b=m;b._virtualHandled||(b._virtualHandled=!0,i=!0)},d=function(){i=!1,l()},C=function(m){if(i){var b=O2(m,!1),p=r.getBoundingClientRect(),y=p.top,S=p.bottom;if(b<=y){var v=y-b;a=-qR(v),g()}else if(b>=S){var B=b-S;a=qR(B),g()}else l()}};return r.addEventListener("mousedown",u),r.ownerDocument.addEventListener("mouseup",d),r.ownerDocument.addEventListener("mousemove",C),function(){r.removeEventListener("mousedown",u),r.ownerDocument.removeEventListener("mouseup",d),r.ownerDocument.removeEventListener("mousemove",C),l()}}},[e])}var o6=10;function a6(e,t,n,r,i,o,a,l){var g=I.useRef(),u=I.useState(null),d=xe(u,2),C=d[0],f=d[1];return ur(function(){if(C&&C.times<o6){if(!e.current){f(function(ee){return he({},ee)});return}o();var m=C.targetAlign,b=C.originAlign,p=C.index,y=C.offset,S=e.current.clientHeight,v=!1,B=m,W=null;if(S){for(var J=m||b,H=0,x=0,E=0,F=Math.min(t.length-1,p),w=0;w<=F;w+=1){var V=i(t[w]);x=H;var Y=n.get(V);E=x+(Y===void 0?r:Y),H=E}for(var M=J==="top"?y:S-y,L=F;L>=0;L-=1){var $=i(t[L]),U=n.get($);if(U===void 0){v=!0;break}if(M-=U,M<=0)break}switch(J){case"top":W=x-y;break;case"bottom":W=E-S+y;break;default:{var _=e.current.scrollTop,P=_+S;x<_?B="top":E>P&&(B="bottom")}}W!==null&&a(W),W!==C.lastTop&&(v=!0)}v&&f(he(he({},C),{},{times:C.times+1,targetAlign:B,lastTop:W}))}},[C,e.current]),function(m){if(m==null){l();return}if(Jr.cancel(g.current),typeof m=="number")a(m);else if(m&&wt(m)==="object"){var b,p=m.align;"index"in m?b=m.index:b=t.findIndex(function(v){return i(v)===m.key});var y=m.offset,S=y===void 0?0:y;f({times:0,index:b,offset:S,originAlign:p})}}}var ew=I.forwardRef(function(e,t){var n=e.prefixCls,r=e.rtl,i=e.scrollOffset,o=e.scrollRange,a=e.onStartMove,l=e.onStopMove,g=e.onScroll,u=e.horizontal,d=e.spinSize,C=e.containerSize,f=e.style,m=e.thumbStyle,b=e.showScrollBar,p=I.useState(!1),y=xe(p,2),S=y[0],v=y[1],B=I.useState(null),W=xe(B,2),J=W[0],H=W[1],x=I.useState(null),E=xe(x,2),F=E[0],w=E[1],V=!r,Y=I.useRef(),M=I.useRef(),L=I.useState(b),$=xe(L,2),U=$[0],_=$[1],P=I.useRef(),ee=function(){b===!0||b===!1||(clearTimeout(P.current),_(!0),P.current=setTimeout(function(){_(!1)},3e3))},j=o-C||0,O=C-d||0,X=I.useMemo(function(){if(i===0||j===0)return 0;var Ae=i/j;return Ae*O},[i,j,O]),D=function(be){be.stopPropagation(),be.preventDefault()},z=I.useRef({top:X,dragging:S,pageY:J,startTop:F});z.current={top:X,dragging:S,pageY:J,startTop:F};var Q=function(be){v(!0),H(O2(be,u)),w(z.current.top),a(),be.stopPropagation(),be.preventDefault()};I.useEffect(function(){var Ae=function(Ie){Ie.preventDefault()},be=Y.current,me=M.current;return be.addEventListener("touchstart",Ae,{passive:!1}),me.addEventListener("touchstart",Q,{passive:!1}),function(){be.removeEventListener("touchstart",Ae),me.removeEventListener("touchstart",Q)}},[]);var ne=I.useRef();ne.current=j;var ce=I.useRef();ce.current=O,I.useEffect(function(){if(S){var Ae,be=function(Ie){var ae=z.current,Ee=ae.dragging,Fe=ae.pageY,ke=ae.startTop;Jr.cancel(Ae);var ze=Y.current.getBoundingClientRect(),He=C/(u?ze.width:ze.height);if(Ee){var Le=(O2(Ie,u)-Fe)*He,Ye=ke;!V&&u?Ye-=Le:Ye+=Le;var Pe=ne.current,$e=ce.current,ot=$e?Ye/$e:0,Ct=Math.ceil(ot*Pe);Ct=Math.max(Ct,0),Ct=Math.min(Ct,Pe),Ae=Jr(function(){g(Ct,u)})}},me=function(){v(!1),l()};return window.addEventListener("mousemove",be,{passive:!0}),window.addEventListener("touchmove",be,{passive:!0}),window.addEventListener("mouseup",me,{passive:!0}),window.addEventListener("touchend",me,{passive:!0}),function(){window.removeEventListener("mousemove",be),window.removeEventListener("touchmove",be),window.removeEventListener("mouseup",me),window.removeEventListener("touchend",me),Jr.cancel(Ae)}}},[S]),I.useEffect(function(){return ee(),function(){clearTimeout(P.current)}},[i]),I.useImperativeHandle(t,function(){return{delayHidden:ee}});var se="".concat(n,"-scrollbar"),ue={position:"absolute",visibility:U?null:"hidden"},ve={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return u?(ue.height=8,ue.left=0,ue.right=0,ue.bottom=0,ve.height="100%",ve.width=d,V?ve.left=X:ve.right=X):(ue.width=8,ue.top=0,ue.bottom=0,V?ue.right=0:ue.left=0,ve.width="100%",ve.height=d,ve.top=X),I.createElement("div",{ref:Y,className:Re(se,fe(fe(fe({},"".concat(se,"-horizontal"),u),"".concat(se,"-vertical"),!u),"".concat(se,"-visible"),U)),style:he(he({},ue),f),onMouseDown:D,onMouseMove:ee},I.createElement("div",{ref:M,className:Re("".concat(se,"-thumb"),fe({},"".concat(se,"-thumb-moving"),S)),style:he(he({},ve),m),onMouseDown:Q}))}),l6=20;function tw(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=e/t*e;return isNaN(n)&&(n=0),n=Math.max(n,l6),Math.floor(n)}var s6=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles","showScrollBar"],g6=[],c6={overflowY:"auto",overflowAnchor:"none"};function u6(e,t){var n=e.prefixCls,r=n===void 0?"rc-virtual-list":n,i=e.className,o=e.height,a=e.itemHeight,l=e.fullHeight,g=l===void 0?!0:l,u=e.style,d=e.data,C=e.children,f=e.itemKey,m=e.virtual,b=e.direction,p=e.scrollWidth,y=e.component,S=y===void 0?"div":y,v=e.onScroll,B=e.onVirtualScroll,W=e.onVisibleChange,J=e.innerProps,H=e.extraRender,x=e.styles,E=e.showScrollBar,F=E===void 0?"optional":E,w=Wn(e,s6),V=I.useCallback(function(At){return typeof f=="function"?f(At):At==null?void 0:At[f]},[f]),Y=n6(V),M=xe(Y,4),L=M[0],$=M[1],U=M[2],_=M[3],P=!!(m!==!1&&o&&a),ee=I.useMemo(function(){return Object.values(U.maps).reduce(function(At,Ht){return At+Ht},0)},[U.id,U.maps]),j=P&&d&&(Math.max(a*d.length,ee)>o||!!p),O=b==="rtl",X=Re(r,fe({},"".concat(r,"-rtl"),O),i),D=d||g6,z=I.useRef(),Q=I.useRef(),ne=I.useRef(),ce=I.useState(0),se=xe(ce,2),ue=se[0],ve=se[1],Ae=I.useState(0),be=xe(Ae,2),me=be[0],Ne=be[1],Ie=I.useState(!1),ae=xe(Ie,2),Ee=ae[0],Fe=ae[1],ke=function(){Fe(!0)},ze=function(){Fe(!1)},He={getKey:V};function Le(At){ve(function(Ht){var Yt;typeof At=="function"?Yt=At(Ht):Yt=At;var at=Jt(Yt);return z.current.scrollTop=at,at})}var Ye=I.useRef({start:0,end:D.length}),Pe=I.useRef(),$e=$7(D,V),ot=xe($e,1),Ct=ot[0];Pe.current=Ct;var pt=I.useMemo(function(){if(!P)return{scrollHeight:void 0,start:0,end:D.length-1,offset:void 0};if(!j){var At;return{scrollHeight:((At=Q.current)===null||At===void 0?void 0:At.offsetHeight)||0,start:0,end:D.length-1,offset:void 0}}for(var Ht=0,Yt,at,Qt,An=D.length,Tn=0;Tn<An;Tn+=1){var tr=D[Tn],Rr=V(tr),Kt=U.get(Rr),en=Ht+(Kt===void 0?a:Kt);en>=ue&&Yt===void 0&&(Yt=Tn,at=Ht),en>ue+o&&Qt===void 0&&(Qt=Tn),Ht=en}return Yt===void 0&&(Yt=0,at=0,Qt=Math.ceil(o/a)),Qt===void 0&&(Qt=D.length-1),Qt=Math.min(Qt+1,D.length-1),{scrollHeight:Ht,start:Yt,end:Qt,offset:at}},[j,P,ue,D,_,o]),it=pt.scrollHeight,It=pt.start,_e=pt.end,Ot=pt.offset;Ye.current.start=It,Ye.current.end=_e,I.useLayoutEffect(function(){var At=U.getRecord();if(At.size===1){var Ht=Array.from(At)[0],Yt=V(D[It]);if(Yt===Ht){var at=U.get(Ht),Qt=at-a;Le(function(An){return An+Qt})}}U.resetRecord()},[it]);var Qe=I.useState({width:0,height:o}),st=xe(Qe,2),St=st[0],dt=st[1],Wt=function(Ht){dt({width:Ht.offsetWidth,height:Ht.offsetHeight})},Et=I.useRef(),hn=I.useRef(),mn=I.useMemo(function(){return tw(St.width,p)},[St.width,p]),Xn=I.useMemo(function(){return tw(St.height,it)},[St.height,it]),Mn=it-o,In=I.useRef(Mn);In.current=Mn;function Jt(At){var Ht=At;return Number.isNaN(In.current)||(Ht=Math.min(Ht,In.current)),Ht=Math.max(Ht,0),Ht}var jt=ue<=0,ln=ue>=Mn,Vt=me<=0,Rt=me>=p,yt=VJ(jt,ln,Vt,Rt),ht=function(){return{x:O?-me:me,y:ue}},sn=I.useRef(ht()),ut=ui(function(At){if(B){var Ht=he(he({},ht()),At);(sn.current.x!==Ht.x||sn.current.y!==Ht.y)&&(B(Ht),sn.current=Ht)}});function ct(At,Ht){var Yt=At;Ht?(Dc.flushSync(function(){Ne(Yt)}),ut()):Le(Yt)}function vt(At){var Ht=At.currentTarget.scrollTop;Ht!==ue&&Le(Ht),v==null||v(At),ut()}var Bt=function(Ht){var Yt=Ht,at=p?p-St.width:0;return Yt=Math.max(Yt,0),Yt=Math.min(Yt,at),Yt},kt=ui(function(At,Ht){Ht?(Dc.flushSync(function(){Ne(function(Yt){var at=Yt+(O?-At:At);return Bt(at)})}),ut()):Le(function(Yt){var at=Yt+At;return at})}),Tt=q7(P,jt,ln,Vt,Rt,!!p,kt),Jn=xe(Tt,2),cn=Jn[0],yn=Jn[1];r6(P,z,function(At,Ht,Yt,at){var Qt=at;return yt(At,Ht,Yt)?!1:!Qt||!Qt._virtualHandled?(Qt&&(Qt._virtualHandled=!0),cn({preventDefault:function(){},deltaX:At?Ht:0,deltaY:At?0:Ht}),!0):!1}),i6(j,z,function(At){Le(function(Ht){return Ht+At})}),ur(function(){function At(Yt){var at=jt&&Yt.detail<0,Qt=ln&&Yt.detail>0;P&&!at&&!Qt&&Yt.preventDefault()}var Ht=z.current;return Ht.addEventListener("wheel",cn,{passive:!1}),Ht.addEventListener("DOMMouseScroll",yn,{passive:!0}),Ht.addEventListener("MozMousePixelScroll",At,{passive:!1}),function(){Ht.removeEventListener("wheel",cn),Ht.removeEventListener("DOMMouseScroll",yn),Ht.removeEventListener("MozMousePixelScroll",At)}},[P,jt,ln]),ur(function(){if(p){var At=Bt(me);Ne(At),ut({x:At})}},[St.width,p]);var qt=function(){var Ht,Yt;(Ht=Et.current)===null||Ht===void 0||Ht.delayHidden(),(Yt=hn.current)===null||Yt===void 0||Yt.delayHidden()},Vn=a6(z,D,U,a,V,function(){return $(!0)},Le,qt);I.useImperativeHandle(t,function(){return{nativeElement:ne.current,getScrollInfo:ht,scrollTo:function(Ht){function Yt(at){return at&&wt(at)==="object"&&("left"in at||"top"in at)}Yt(Ht)?(Ht.left!==void 0&&Ne(Bt(Ht.left)),Vn(Ht.top)):Vn(Ht)}}}),ur(function(){if(W){var At=D.slice(It,_e+1);W(At,D)}},[It,_e,D]);var En=e6(D,V,U,a),Dn=H==null?void 0:H({start:It,end:_e,virtual:j,offsetX:me,offsetY:Ot,rtl:O,getSize:En}),ar=j7(D,It,_e,p,me,L,C,He),Ln=null;o&&(Ln=he(fe({},g?"height":"maxHeight",o),c6),P&&(Ln.overflowY="hidden",p&&(Ln.overflowX="hidden"),Ee&&(Ln.pointerEvents="none")));var Pn={};return O&&(Pn.dir="rtl"),I.createElement("div",lt({ref:ne,style:he(he({},u),{},{position:"relative"}),className:X},Pn,w),I.createElement(bl,{onResize:Wt},I.createElement(S,{className:"".concat(r,"-holder"),style:Ln,ref:z,onScroll:vt,onMouseEnter:qt},I.createElement(WJ,{prefixCls:r,height:it,offsetX:me,offsetY:Ot,scrollWidth:p,onInnerResize:$,ref:Q,innerProps:J,rtl:O,extra:Dn},ar))),j&&it>o&&I.createElement(ew,{ref:Et,prefixCls:r,scrollOffset:ue,scrollRange:it,rtl:O,onScroll:ct,onStartMove:ke,onStopMove:ze,spinSize:Xn,containerSize:St.height,style:x==null?void 0:x.verticalScrollBar,thumbStyle:x==null?void 0:x.verticalScrollBarThumb,showScrollBar:F}),j&&p>St.width&&I.createElement(ew,{ref:hn,prefixCls:r,scrollOffset:me,scrollRange:p,rtl:O,onScroll:ct,onStartMove:ke,onStopMove:ze,spinSize:mn,containerSize:St.width,horizontal:!0,style:x==null?void 0:x.horizontalScrollBar,thumbStyle:x==null?void 0:x.horizontalScrollBarThumb,showScrollBar:F}))}var kJ=I.forwardRef(u6);kJ.displayName="List";function d6(){return/(mac\sos|macintosh)/i.test(navigator.appVersion)}var I6=["disabled","title","children","style","className"];function nw(e){return typeof e=="string"||typeof e=="number"}var C6=function(t,n){var r=e7(),i=r.prefixCls,o=r.id,a=r.open,l=r.multiple,g=r.mode,u=r.searchValue,d=r.toggleOpen,C=r.notFoundContent,f=r.onPopupScroll,m=I.useContext(PZ),b=m.maxCount,p=m.flattenOptions,y=m.onActiveValue,S=m.defaultActiveFirstOption,v=m.onSelect,B=m.menuItemSelectedIcon,W=m.rawValues,J=m.fieldNames,H=m.virtual,x=m.direction,E=m.listHeight,F=m.listItemHeight,w=m.optionRender,V="".concat(i,"-item"),Y=bm(function(){return p},[a,p],function(Ae,be){return be[0]&&Ae[1]!==be[1]}),M=I.useRef(null),L=I.useMemo(function(){return l&&z2(b)&&(W==null?void 0:W.size)>=b},[l,b,W==null?void 0:W.size]),$=function(be){be.preventDefault()},U=function(be){var me;(me=M.current)===null||me===void 0||me.scrollTo(typeof be=="number"?{index:be}:be)},_=I.useCallback(function(Ae){return g==="combobox"?!1:W.has(Ae)},[g,Gt(W).toString(),W.size]),P=function(be){for(var me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,Ne=Y.length,Ie=0;Ie<Ne;Ie+=1){var ae=(be+Ie*me+Ne)%Ne,Ee=Y[ae]||{},Fe=Ee.group,ke=Ee.data;if(!Fe&&!(ke!=null&&ke.disabled)&&(_(ke.value)||!L))return ae}return-1},ee=I.useState(function(){return P(0)}),j=xe(ee,2),O=j[0],X=j[1],D=function(be){var me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;X(be);var Ne={source:me?"keyboard":"mouse"},Ie=Y[be];if(!Ie){y(null,-1,Ne);return}y(Ie.value,be,Ne)};I.useEffect(function(){D(S!==!1?P(0):-1)},[Y.length,u]);var z=I.useCallback(function(Ae){return g==="combobox"?String(Ae).toLowerCase()===u.toLowerCase():W.has(Ae)},[g,u,Gt(W).toString(),W.size]);I.useEffect(function(){var Ae=setTimeout(function(){if(!l&&a&&W.size===1){var me=Array.from(W)[0],Ne=Y.findIndex(function(Ie){var ae=Ie.data;return ae.value===me});Ne!==-1&&(D(Ne),U(Ne))}});if(a){var be;(be=M.current)===null||be===void 0||be.scrollTo(void 0)}return function(){return clearTimeout(Ae)}},[a,u]);var Q=function(be){be!==void 0&&v(be,{selected:!W.has(be)}),l||d(!1)};if(I.useImperativeHandle(n,function(){return{onKeyDown:function(be){var me=be.which,Ne=be.ctrlKey;switch(me){case Mt.N:case Mt.P:case Mt.UP:case Mt.DOWN:{var Ie=0;if(me===Mt.UP?Ie=-1:me===Mt.DOWN?Ie=1:d6()&&Ne&&(me===Mt.N?Ie=1:me===Mt.P&&(Ie=-1)),Ie!==0){var ae=P(O+Ie,Ie);U(ae),D(ae,!0)}break}case Mt.TAB:case Mt.ENTER:{var Ee,Fe=Y[O];Fe&&!(Fe!=null&&(Ee=Fe.data)!==null&&Ee!==void 0&&Ee.disabled)&&!L?Q(Fe.value):Q(void 0),a&&be.preventDefault();break}case Mt.ESC:d(!1),a&&be.stopPropagation()}},onKeyUp:function(){},scrollTo:function(be){U(be)}}}),Y.length===0)return I.createElement("div",{role:"listbox",id:"".concat(o,"_list"),className:"".concat(V,"-empty"),onMouseDown:$},C);var ne=Object.keys(J).map(function(Ae){return J[Ae]}),ce=function(be){return be.label};function se(Ae,be){var me=Ae.group;return{role:me?"presentation":"option",id:"".concat(o,"_list_").concat(be)}}var ue=function(be){var me=Y[be];if(!me)return null;var Ne=me.data||{},Ie=Ne.value,ae=me.group,Ee=tl(Ne,!0),Fe=ce(me);return me?I.createElement("div",lt({"aria-label":typeof Fe=="string"&&!ae?Fe:null},Ee,{key:be},se(me,be),{"aria-selected":z(Ie)}),Ie):null},ve={role:"listbox",id:"".concat(o,"_list")};return I.createElement(I.Fragment,null,H&&I.createElement("div",lt({},ve,{style:{height:0,width:0,overflow:"hidden"}}),ue(O-1),ue(O),ue(O+1)),I.createElement(kJ,{itemKey:"key",ref:M,data:Y,height:E,itemHeight:F,fullHeight:!1,onMouseDown:$,onScroll:f,virtual:H,direction:x,innerProps:H?null:ve},function(Ae,be){var me=Ae.group,Ne=Ae.groupOption,Ie=Ae.data,ae=Ae.label,Ee=Ae.value,Fe=Ie.key;if(me){var ke,ze=(ke=Ie.title)!==null&&ke!==void 0?ke:nw(ae)?ae.toString():void 0;return I.createElement("div",{className:Re(V,"".concat(V,"-group"),Ie.className),title:ze},ae!==void 0?ae:Fe)}var He=Ie.disabled,Le=Ie.title;Ie.children;var Ye=Ie.style,Pe=Ie.className,$e=Wn(Ie,I6),ot=Pi($e,ne),Ct=_(Ee),pt=He||!Ct&&L,it="".concat(V,"-option"),It=Re(V,it,Pe,fe(fe(fe(fe({},"".concat(it,"-grouped"),Ne),"".concat(it,"-active"),O===be&&!pt),"".concat(it,"-disabled"),pt),"".concat(it,"-selected"),Ct)),_e=ce(Ae),Ot=!B||typeof B=="function"||Ct,Qe=typeof _e=="number"?_e:_e||Ee,st=nw(Qe)?Qe.toString():void 0;return Le!==void 0&&(st=Le),I.createElement("div",lt({},tl(ot),H?{}:se(Ae,be),{"aria-selected":z(Ee),className:It,title:st,onMouseMove:function(){O===be||pt||D(be)},onClick:function(){pt||Q(Ee)},style:Ye}),I.createElement("div",{className:"".concat(it,"-content")},typeof w=="function"?w(Ae,{index:be}):Qe),I.isValidElement(B)||Ct,Ot&&I.createElement(hb,{className:"".concat(V,"-option-state"),customizeIcon:B,customizeIconProps:{value:Ee,disabled:pt,isSelected:Ct}},Ct?"":null))}))},f6=I.forwardRef(C6);const m6=function(e,t){var n=I.useRef({values:new Map,options:new Map}),r=I.useMemo(function(){var o=n.current,a=o.values,l=o.options,g=e.map(function(C){if(C.label===void 0){var f;return he(he({},C),{},{label:(f=a.get(C.value))===null||f===void 0?void 0:f.label})}return C}),u=new Map,d=new Map;return g.forEach(function(C){u.set(C.value,C),d.set(C.value,t.get(C.value)||l.get(C.value))}),n.current.values=u,n.current.options=d,g},[e,t]),i=I.useCallback(function(o){return t.get(o)||n.current.options.get(o)},[t]);return[r,i]};function Ty(e,t){return BJ(e).join("").toUpperCase().includes(t)}const h6=function(e,t,n,r,i){return I.useMemo(function(){if(!n||r===!1)return e;var o=t.options,a=t.label,l=t.value,g=[],u=typeof r=="function",d=n.toUpperCase(),C=u?r:function(m,b){return i?Ty(b[i],d):b[o]?Ty(b[a!=="children"?a:"label"],d):Ty(b[l],d)},f=u?function(m){return D2(m)}:function(m){return m};return e.forEach(function(m){if(m[o]){var b=C(n,f(m));if(b)g.push(m);else{var p=m[o].filter(function(y){return C(n,f(y))});p.length&&g.push(he(he({},m),{},fe({},o,p)))}return}C(n,f(m))&&g.push(m)}),g},[e,r,i,n,t])};var rw=0,A6=Qo();function p6(){var e;return A6?(e=rw,rw+=1):e="TEST_OR_SSR",e}function b6(e){var t=I.useState(),n=xe(t,2),r=n[0],i=n[1];return I.useEffect(function(){i("rc_select_".concat(p6()))},[]),e||r}var y6=["children","value"],v6=["children"];function S6(e){var t=e,n=t.key,r=t.props,i=r.children,o=r.value,a=Wn(r,y6);return he({key:n,value:o!==void 0?o:n,children:i},a)}function NJ(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return el(e).map(function(n,r){if(!I.isValidElement(n)||!n.type)return null;var i=n,o=i.type.isSelectOptGroup,a=i.key,l=i.props,g=l.children,u=Wn(l,v6);return t||!o?S6(n):he(he({key:"__RC_SELECT_GRP__".concat(a===null?r:a,"__"),label:a},u),{},{options:NJ(g)})}).filter(function(n){return n})}var Z6=function(t,n,r,i,o){return I.useMemo(function(){var a=t,l=!t;l&&(a=NJ(n));var g=new Map,u=new Map,d=function(m,b,p){p&&typeof p=="string"&&m.set(b[p],b)},C=function f(m){for(var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,p=0;p<m.length;p+=1){var y=m[p];!y[r.options]||b?(g.set(y[r.value],y),d(u,y,r.label),d(u,y,i),d(u,y,o)):f(y[r.options],!0)}};return C(a),{options:a,valueOptions:g,labelOptions:u}},[t,n,r,i,o])};function iw(e){var t=I.useRef();t.current=e;var n=I.useCallback(function(){return t.current.apply(t,arguments)},[]);return n}var G6=["id","mode","prefixCls","backfill","fieldNames","inputValue","searchValue","onSearch","autoClearSearchValue","onSelect","onDeselect","dropdownMatchSelectWidth","filterOption","filterSort","optionFilterProp","optionLabelProp","options","optionRender","children","defaultActiveFirstOption","menuItemSelectedIcon","virtual","direction","listHeight","listItemHeight","labelRender","value","defaultValue","labelInValue","onChange","maxCount"],B6=["inputValue"];function R6(e){return!e||wt(e)!=="object"}var w6=I.forwardRef(function(e,t){var n=e.id,r=e.mode,i=e.prefixCls,o=i===void 0?"rc-select":i,a=e.backfill,l=e.fieldNames,g=e.inputValue,u=e.searchValue,d=e.onSearch,C=e.autoClearSearchValue,f=C===void 0?!0:C,m=e.onSelect,b=e.onDeselect,p=e.dropdownMatchSelectWidth,y=p===void 0?!0:p,S=e.filterOption,v=e.filterSort,B=e.optionFilterProp,W=e.optionLabelProp,J=e.options,H=e.optionRender,x=e.children,E=e.defaultActiveFirstOption,F=e.menuItemSelectedIcon,w=e.virtual,V=e.direction,Y=e.listHeight,M=Y===void 0?200:Y,L=e.listItemHeight,$=L===void 0?20:L,U=e.labelRender,_=e.value,P=e.defaultValue,ee=e.labelInValue,j=e.onChange,O=e.maxCount,X=Wn(e,G6),D=b6(n),z=P2(r),Q=!!(!J&&x),ne=I.useMemo(function(){return S===void 0&&r==="combobox"?!1:S},[S,r]),ce=I.useMemo(function(){return wJ(l,Q)},[JSON.stringify(l),Q]),se=qi("",{value:u!==void 0?u:g,postState:function(ct){return ct||""}}),ue=xe(se,2),ve=ue[0],Ae=ue[1],be=Z6(J,x,ce,B,W),me=be.valueOptions,Ne=be.labelOptions,Ie=be.options,ae=I.useCallback(function(ut){var ct=BJ(ut);return ct.map(function(vt){var Bt,kt,Tt,Jn,cn;if(R6(vt))Bt=vt;else{var yn;Tt=vt.key,kt=vt.label,Bt=(yn=vt.value)!==null&&yn!==void 0?yn:Tt}var qt=me.get(Bt);if(qt){var Vn;kt===void 0&&(kt=qt==null?void 0:qt[W||ce.label]),Tt===void 0&&(Tt=(Vn=qt==null?void 0:qt.key)!==null&&Vn!==void 0?Vn:Bt),Jn=qt==null?void 0:qt.disabled,cn=qt==null?void 0:qt.title}return{label:kt,value:Bt,key:Tt,disabled:Jn,title:cn}})},[ce,W,me]),Ee=qi(P,{value:_}),Fe=xe(Ee,2),ke=Fe[0],ze=Fe[1],He=I.useMemo(function(){var ut,ct=z&&ke===null?[]:ke,vt=ae(ct);return r==="combobox"&&p7((ut=vt[0])===null||ut===void 0?void 0:ut.value)?[]:vt},[ke,ae,r,z]),Le=m6(He,me),Ye=xe(Le,2),Pe=Ye[0],$e=Ye[1],ot=I.useMemo(function(){if(!r&&Pe.length===1){var ut=Pe[0];if(ut.value===null&&(ut.label===null||ut.label===void 0))return[]}return Pe.map(function(ct){var vt;return he(he({},ct),{},{label:(vt=typeof U=="function"?U(ct):ct.label)!==null&&vt!==void 0?vt:ct.value})})},[r,Pe,U]),Ct=I.useMemo(function(){return new Set(Pe.map(function(ut){return ut.value}))},[Pe]);I.useEffect(function(){if(r==="combobox"){var ut,ct=(ut=Pe[0])===null||ut===void 0?void 0:ut.value;Ae(A7(ct)?String(ct):"")}},[Pe]);var pt=iw(function(ut,ct){var vt=ct??ut;return fe(fe({},ce.value,ut),ce.label,vt)}),it=I.useMemo(function(){if(r!=="tags")return Ie;var ut=Gt(Ie),ct=function(Bt){return me.has(Bt)};return Gt(Pe).sort(function(vt,Bt){return vt.value<Bt.value?-1:1}).forEach(function(vt){var Bt=vt.value;ct(Bt)||ut.push(pt(Bt,vt.label))}),ut},[pt,Ie,me,Pe,r]),It=h6(it,ce,ve,ne,B),_e=I.useMemo(function(){return r!=="tags"||!ve||It.some(function(ut){return ut[B||"value"]===ve})||It.some(function(ut){return ut[ce.value]===ve})?It:[pt(ve)].concat(Gt(It))},[pt,B,r,It,ve,ce]),Ot=function ut(ct){var vt=Gt(ct).sort(function(Bt,kt){return v(Bt,kt,{searchValue:ve})});return vt.map(function(Bt){return Array.isArray(Bt.options)?he(he({},Bt),{},{options:Bt.options.length>0?ut(Bt.options):Bt.options}):Bt})},Qe=I.useMemo(function(){return v?Ot(_e):_e},[_e,v,ve]),st=I.useMemo(function(){return T7(Qe,{fieldNames:ce,childrenAsData:Q})},[Qe,ce,Q]),St=function(ct){var vt=ae(ct);if(ze(vt),j&&(vt.length!==Pe.length||vt.some(function(Tt,Jn){var cn;return((cn=Pe[Jn])===null||cn===void 0?void 0:cn.value)!==(Tt==null?void 0:Tt.value)}))){var Bt=ee?vt:vt.map(function(Tt){return Tt.value}),kt=vt.map(function(Tt){return D2($e(Tt.value))});j(z?Bt:Bt[0],z?kt:kt[0])}},dt=I.useState(null),Wt=xe(dt,2),Et=Wt[0],hn=Wt[1],mn=I.useState(0),Xn=xe(mn,2),Mn=Xn[0],In=Xn[1],Jt=E!==void 0?E:r!=="combobox",jt=I.useCallback(function(ut,ct){var vt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Bt=vt.source,kt=Bt===void 0?"keyboard":Bt;In(ct),a&&r==="combobox"&&ut!==null&&kt==="keyboard"&&hn(String(ut))},[a,r]),ln=function(ct,vt,Bt){var kt=function(){var Ln,Pn=$e(ct);return[ee?{label:Pn==null?void 0:Pn[ce.label],value:ct,key:(Ln=Pn==null?void 0:Pn.key)!==null&&Ln!==void 0?Ln:ct}:ct,D2(Pn)]};if(vt&&m){var Tt=kt(),Jn=xe(Tt,2),cn=Jn[0],yn=Jn[1];m(cn,yn)}else if(!vt&&b&&Bt!=="clear"){var qt=kt(),Vn=xe(qt,2),En=Vn[0],Dn=Vn[1];b(En,Dn)}},Vt=iw(function(ut,ct){var vt,Bt=z?ct.selected:!0;Bt?vt=z?[].concat(Gt(Pe),[ut]):[ut]:vt=Pe.filter(function(kt){return kt.value!==ut}),St(vt),ln(ut,Bt),r==="combobox"?hn(""):(!P2||f)&&(Ae(""),hn(""))}),Rt=function(ct,vt){St(ct);var Bt=vt.type,kt=vt.values;(Bt==="remove"||Bt==="clear")&&kt.forEach(function(Tt){ln(Tt.value,!1,Bt)})},yt=function(ct,vt){if(Ae(ct),hn(null),vt.source==="submit"){var Bt=(ct||"").trim();if(Bt){var kt=Array.from(new Set([].concat(Gt(Ct),[Bt])));St(kt),ln(Bt,!0),Ae("")}return}vt.source!=="blur"&&(r==="combobox"&&St(ct),d==null||d(ct))},ht=function(ct){var vt=ct;r!=="tags"&&(vt=ct.map(function(kt){var Tt=Ne.get(kt);return Tt==null?void 0:Tt.value}).filter(function(kt){return kt!==void 0}));var Bt=Array.from(new Set([].concat(Gt(Ct),Gt(vt))));St(Bt),Bt.forEach(function(kt){ln(kt,!0)})},sn=I.useMemo(function(){var ut=w!==!1&&y!==!1;return he(he({},be),{},{flattenOptions:st,onActiveValue:jt,defaultActiveFirstOption:Jt,onSelect:Vt,menuItemSelectedIcon:F,rawValues:Ct,fieldNames:ce,virtual:ut,direction:V,listHeight:M,listItemHeight:$,childrenAsData:Q,maxCount:O,optionRender:H})},[O,be,st,jt,Jt,Vt,F,Ct,ce,w,y,V,M,$,Q,H]);return I.createElement(PZ.Provider,{value:sn},I.createElement(_7,lt({},X,{id:D,prefixCls:o,ref:t,omitDomProps:B6,mode:r,displayValues:ot,onDisplayValuesChange:Rt,direction:V,searchValue:ve,onSearch:yt,autoClearSearchValue:f,onSearchSplit:ht,dropdownMatchSelectWidth:y,OptionList:f6,emptyOptions:!st.length,activeValue:Et,activeDescendantId:"".concat(D,"_list_").concat(Mn)})))}),UZ=w6;UZ.Option=_Z;UZ.OptGroup=OZ;function Gp(e,t,n){return Re({[`${e}-status-success`]:t==="success",[`${e}-status-warning`]:t==="warning",[`${e}-status-error`]:t==="error",[`${e}-status-validating`]:t==="validating",[`${e}-has-feedback`]:n})}const pb=(e,t)=>t||e,W6=()=>{const[,e]=Ia(),[t]=lu("Empty"),r=new xr(e.colorBgBase).toHsl().l<.5?{opacity:.65}:{};return I.createElement("svg",{style:r,width:"184",height:"152",viewBox:"0 0 184 152",xmlns:"http://www.w3.org/2000/svg"},I.createElement("title",null,(t==null?void 0:t.description)||"Empty"),I.createElement("g",{fill:"none",fillRule:"evenodd"},I.createElement("g",{transform:"translate(24 31.67)"},I.createElement("ellipse",{fillOpacity:".8",fill:"#F5F5F7",cx:"67.797",cy:"106.89",rx:"67.797",ry:"12.668"}),I.createElement("path",{d:"M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",fill:"#AEB8C2"}),I.createElement("path",{d:"M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z",fill:"url(#linearGradient-1)",transform:"translate(13.56)"}),I.createElement("path",{d:"M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",fill:"#F5F5F7"}),I.createElement("path",{d:"M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",fill:"#DCE0E6"})),I.createElement("path",{d:"M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",fill:"#DCE0E6"}),I.createElement("g",{transform:"translate(149.65 15.383)",fill:"#FFF"},I.createElement("ellipse",{cx:"20.654",cy:"3.167",rx:"2.849",ry:"2.815"}),I.createElement("path",{d:"M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"}))))},V6=()=>{const[,e]=Ia(),[t]=lu("Empty"),{colorFill:n,colorFillTertiary:r,colorFillQuaternary:i,colorBgContainer:o}=e,{borderColor:a,shadowColor:l,contentColor:g}=I.useMemo(()=>({borderColor:new xr(n).onBackground(o).toHexString(),shadowColor:new xr(r).onBackground(o).toHexString(),contentColor:new xr(i).onBackground(o).toHexString()}),[n,r,i,o]);return I.createElement("svg",{width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg"},I.createElement("title",null,(t==null?void 0:t.description)||"Empty"),I.createElement("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd"},I.createElement("ellipse",{fill:l,cx:"32",cy:"33",rx:"32",ry:"7"}),I.createElement("g",{fillRule:"nonzero",stroke:a},I.createElement("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),I.createElement("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:g}))))},k6=e=>{const{componentCls:t,margin:n,marginXS:r,marginXL:i,fontSize:o,lineHeight:a}=e;return{[t]:{marginInline:r,fontSize:o,lineHeight:a,textAlign:"center",[`${t}-image`]:{height:e.emptyImgHeight,marginBottom:r,opacity:e.opacityImage,img:{height:"100%"},svg:{maxWidth:"100%",height:"100%",margin:"auto"}},[`${t}-description`]:{color:e.colorTextDescription},[`${t}-footer`]:{marginTop:n},"&-normal":{marginBlock:i,color:e.colorTextDescription,[`${t}-description`]:{color:e.colorTextDescription},[`${t}-image`]:{height:e.emptyImgHeightMD}},"&-small":{marginBlock:r,color:e.colorTextDescription,[`${t}-image`]:{height:e.emptyImgHeightSM}}}}},N6=Gi("Empty",e=>{const{componentCls:t,controlHeightLG:n,calc:r}=e,i=Br(e,{emptyImgCls:`${t}-img`,emptyImgHeight:r(n).mul(2.5).equal(),emptyImgHeightMD:n,emptyImgHeightSM:r(n).mul(.875).equal()});return[k6(i)]});var X6=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const XJ=I.createElement(W6,null),JJ=I.createElement(V6,null),Lu=e=>{var t,n,r,i,o,a,l,g;const{className:u,rootClassName:d,prefixCls:C,image:f=XJ,description:m,children:b,imageStyle:p,style:y,classNames:S,styles:v}=e,B=X6(e,["className","rootClassName","prefixCls","image","description","children","imageStyle","style","classNames","styles"]),{getPrefixCls:W,direction:J,empty:H}=I.useContext(dn),x=W("empty",C),[E,F,w]=N6(x),[V]=lu("Empty"),Y=typeof m<"u"?m:V==null?void 0:V.description,M=typeof Y=="string"?Y:"empty";let L=null;return typeof f=="string"?L=I.createElement("img",{alt:M,src:f}):L=f,E(I.createElement("div",Object.assign({className:Re(F,w,x,H==null?void 0:H.className,{[`${x}-normal`]:f===JJ,[`${x}-rtl`]:J==="rtl"},u,d,(t=H==null?void 0:H.classNames)===null||t===void 0?void 0:t.root,S==null?void 0:S.root),style:Object.assign(Object.assign(Object.assign(Object.assign({},(n=H==null?void 0:H.styles)===null||n===void 0?void 0:n.root),H==null?void 0:H.style),v==null?void 0:v.root),y)},B),I.createElement("div",{className:Re(`${x}-image`,(r=H==null?void 0:H.classNames)===null||r===void 0?void 0:r.image,S==null?void 0:S.image),style:Object.assign(Object.assign(Object.assign({},p),(i=H==null?void 0:H.styles)===null||i===void 0?void 0:i.image),v==null?void 0:v.image)},L),Y&&I.createElement("div",{className:Re(`${x}-description`,(o=H==null?void 0:H.classNames)===null||o===void 0?void 0:o.description,S==null?void 0:S.description),style:Object.assign(Object.assign({},(a=H==null?void 0:H.styles)===null||a===void 0?void 0:a.description),v==null?void 0:v.description)},Y),b&&I.createElement("div",{className:Re(`${x}-footer`,(l=H==null?void 0:H.classNames)===null||l===void 0?void 0:l.footer,S==null?void 0:S.footer),style:Object.assign(Object.assign({},(g=H==null?void 0:H.styles)===null||g===void 0?void 0:g.footer),v==null?void 0:v.footer)},b)))};Lu.PRESENTED_IMAGE_DEFAULT=XJ;Lu.PRESENTED_IMAGE_SIMPLE=JJ;const J6=e=>{const{componentName:t}=e,{getPrefixCls:n}=I.useContext(dn),r=n("empty");switch(t){case"Table":case"List":return Ge.createElement(Lu,{image:Lu.PRESENTED_IMAGE_SIMPLE});case"Select":case"TreeSelect":case"Cascader":case"Transfer":case"Mentions":return Ge.createElement(Lu,{image:Lu.PRESENTED_IMAGE_SIMPLE,className:`${r}-small`});case"Table.filter":return null;default:return Ge.createElement(Lu,null)}},jZ=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;var r,i;const{variant:o,[e]:a}=I.useContext(dn),l=I.useContext(iQ),g=a==null?void 0:a.variant;let u;typeof t<"u"?u=t:n===!1?u="borderless":u=(i=(r=l??g)!==null&&r!==void 0?r:o)!==null&&i!==void 0?i:"outlined";const d=OP.includes(u);return[u,d]},x6=e=>{const n={overflow:{adjustX:!0,adjustY:!0,shiftY:!0},htmlRegion:e==="scroll"?"scroll":"visible",dynamicInset:!0};return{bottomLeft:Object.assign(Object.assign({},n),{points:["tl","bl"],offset:[0,4]}),bottomRight:Object.assign(Object.assign({},n),{points:["tr","br"],offset:[0,4]}),topLeft:Object.assign(Object.assign({},n),{points:["bl","tl"],offset:[0,-4]}),topRight:Object.assign(Object.assign({},n),{points:["br","tr"],offset:[0,-4]})}};function H6(e,t){return e||x6(t)}const ow=e=>{const{optionHeight:t,optionFontSize:n,optionLineHeight:r,optionPadding:i}=e;return{position:"relative",display:"block",minHeight:t,padding:i,color:e.colorText,fontWeight:"normal",fontSize:n,lineHeight:r,boxSizing:"border-box"}},Y6=e=>{const{antCls:t,componentCls:n}=e,r=`${n}-item`,i=`&${t}-slide-up-enter${t}-slide-up-enter-active`,o=`&${t}-slide-up-appear${t}-slide-up-appear-active`,a=`&${t}-slide-up-leave${t}-slide-up-leave-active`,l=`${n}-dropdown-placement-`,g=`${r}-option-selected`;return[{[`${n}-dropdown`]:Object.assign(Object.assign({},Ca(e)),{position:"absolute",top:-9999,zIndex:e.zIndexPopup,boxSizing:"border-box",padding:e.paddingXXS,overflow:"hidden",fontSize:e.fontSize,fontVariant:"initial",backgroundColor:e.colorBgElevated,borderRadius:e.borderRadiusLG,outline:"none",boxShadow:e.boxShadowSecondary,[`
          ${i}${l}bottomLeft,
          ${o}${l}bottomLeft
        `]:{animationName:YZ},[`
          ${i}${l}topLeft,
          ${o}${l}topLeft,
          ${i}${l}topRight,
          ${o}${l}topRight
        `]:{animationName:FZ},[`${a}${l}bottomLeft`]:{animationName:EZ},[`
          ${a}${l}topLeft,
          ${a}${l}topRight
        `]:{animationName:KZ},"&-hidden":{display:"none"},[r]:Object.assign(Object.assign({},ow(e)),{cursor:"pointer",transition:`background ${e.motionDurationSlow} ease`,borderRadius:e.borderRadiusSM,"&-group":{color:e.colorTextDescription,fontSize:e.fontSizeSM,cursor:"default"},"&-option":{display:"flex","&-content":Object.assign({flex:"auto"},rd),"&-state":{flex:"none",display:"flex",alignItems:"center"},[`&-active:not(${r}-option-disabled)`]:{backgroundColor:e.optionActiveBg},[`&-selected:not(${r}-option-disabled)`]:{color:e.optionSelectedColor,fontWeight:e.optionSelectedFontWeight,backgroundColor:e.optionSelectedBg,[`${r}-option-state`]:{color:e.colorPrimary}},"&-disabled":{[`&${r}-option-selected`]:{backgroundColor:e.colorBgContainerDisabled},color:e.colorTextDisabled,cursor:"not-allowed"},"&-grouped":{paddingInlineStart:e.calc(e.controlPaddingHorizontal).mul(2).equal()}},"&-empty":Object.assign(Object.assign({},ow(e)),{color:e.colorTextDisabled})}),[`${g}:has(+ ${g})`]:{borderEndStartRadius:0,borderEndEndRadius:0,[`& + ${g}`]:{borderStartStartRadius:0,borderStartEndRadius:0}},"&-rtl":{direction:"rtl"}})},jc(e,"slide-up"),jc(e,"slide-down"),yp(e,"move-up"),yp(e,"move-down")]},E6=e=>{const{multipleSelectItemHeight:t,paddingXXS:n,lineWidth:r,INTERNAL_FIXED_ITEM_MARGIN:i}=e,o=e.max(e.calc(n).sub(r).equal(),0),a=e.max(e.calc(o).sub(i).equal(),0);return{basePadding:o,containerPadding:a,itemHeight:Ve(t),itemLineHeight:Ve(e.calc(t).sub(e.calc(e.lineWidth).mul(2)).equal())}},F6=e=>{const{multipleSelectItemHeight:t,selectHeight:n,lineWidth:r}=e;return e.calc(n).sub(t).div(2).sub(r).equal()},K6=e=>{const{componentCls:t,iconCls:n,borderRadiusSM:r,motionDurationSlow:i,paddingXS:o,multipleItemColorDisabled:a,multipleItemBorderColorDisabled:l,colorIcon:g,colorIconHover:u,INTERNAL_FIXED_ITEM_MARGIN:d}=e;return{[`${t}-selection-overflow`]:{position:"relative",display:"flex",flex:"auto",flexWrap:"wrap",maxWidth:"100%","&-item":{flex:"none",alignSelf:"center",maxWidth:"100%",display:"inline-flex"},[`${t}-selection-item`]:{display:"flex",alignSelf:"center",flex:"none",boxSizing:"border-box",maxWidth:"100%",marginBlock:d,borderRadius:r,cursor:"default",transition:`font-size ${i}, line-height ${i}, height ${i}`,marginInlineEnd:e.calc(d).mul(2).equal(),paddingInlineStart:o,paddingInlineEnd:e.calc(o).div(2).equal(),[`${t}-disabled&`]:{color:a,borderColor:l,cursor:"not-allowed"},"&-content":{display:"inline-block",marginInlineEnd:e.calc(o).div(2).equal(),overflow:"hidden",whiteSpace:"pre",textOverflow:"ellipsis"},"&-remove":Object.assign(Object.assign({},vm()),{display:"inline-flex",alignItems:"center",color:g,fontWeight:"bold",fontSize:10,lineHeight:"inherit",cursor:"pointer",[`> ${n}`]:{verticalAlign:"-0.2em"},"&:hover":{color:u}})}}}},L6=(e,t)=>{const{componentCls:n,INTERNAL_FIXED_ITEM_MARGIN:r}=e,i=`${n}-selection-overflow`,o=e.multipleSelectItemHeight,a=F6(e),l=t?`${n}-${t}`:"",g=E6(e);return{[`${n}-multiple${l}`]:Object.assign(Object.assign({},K6(e)),{[`${n}-selector`]:{display:"flex",alignItems:"center",width:"100%",height:"100%",paddingInline:g.basePadding,paddingBlock:g.containerPadding,borderRadius:e.borderRadius,[`${n}-disabled&`]:{background:e.multipleSelectorBgDisabled,cursor:"not-allowed"},"&:after":{display:"inline-block",width:0,margin:`${Ve(r)} 0`,lineHeight:Ve(o),visibility:"hidden",content:'"\\a0"'}},[`${n}-selection-item`]:{height:g.itemHeight,lineHeight:Ve(g.itemLineHeight)},[`${n}-selection-wrap`]:{alignSelf:"flex-start","&:after":{lineHeight:Ve(o),marginBlock:r}},[`${n}-prefix`]:{marginInlineStart:e.calc(e.inputPaddingHorizontalBase).sub(g.basePadding).equal()},[`${i}-item + ${i}-item,
        ${n}-prefix + ${n}-selection-wrap
      `]:{[`${n}-selection-search`]:{marginInlineStart:0},[`${n}-selection-placeholder`]:{insetInlineStart:0}},[`${i}-item-suffix`]:{minHeight:g.itemHeight,marginBlock:r},[`${n}-selection-search`]:{display:"inline-flex",position:"relative",maxWidth:"100%",marginInlineStart:e.calc(e.inputPaddingHorizontalBase).sub(a).equal(),"\n          &-input,\n          &-mirror\n        ":{height:o,fontFamily:e.fontFamily,lineHeight:Ve(o),transition:`all ${e.motionDurationSlow}`},"&-input":{width:"100%",minWidth:4.1},"&-mirror":{position:"absolute",top:0,insetInlineStart:0,insetInlineEnd:"auto",zIndex:999,whiteSpace:"pre",visibility:"hidden"}},[`${n}-selection-placeholder`]:{position:"absolute",top:"50%",insetInlineStart:e.calc(e.inputPaddingHorizontalBase).sub(g.basePadding).equal(),insetInlineEnd:e.inputPaddingHorizontalBase,transform:"translateY(-50%)",transition:`all ${e.motionDurationSlow}`}})}};function zy(e,t){const{componentCls:n}=e,r=t?`${n}-${t}`:"",i={[`${n}-multiple${r}`]:{fontSize:e.fontSize,[`${n}-selector`]:{[`${n}-show-search&`]:{cursor:"text"}},[`
        &${n}-show-arrow ${n}-selector,
        &${n}-allow-clear ${n}-selector
      `]:{paddingInlineEnd:e.calc(e.fontSizeIcon).add(e.controlPaddingHorizontal).equal()}}};return[L6(e,t),i]}const M6=e=>{const{componentCls:t}=e,n=Br(e,{selectHeight:e.controlHeightSM,multipleSelectItemHeight:e.multipleItemHeightSM,borderRadius:e.borderRadiusSM,borderRadiusSM:e.borderRadiusXS}),r=Br(e,{fontSize:e.fontSizeLG,selectHeight:e.controlHeightLG,multipleSelectItemHeight:e.multipleItemHeightLG,borderRadius:e.borderRadiusLG,borderRadiusSM:e.borderRadius});return[zy(e),zy(n,"sm"),{[`${t}-multiple${t}-sm`]:{[`${t}-selection-placeholder`]:{insetInline:e.calc(e.controlPaddingHorizontalSM).sub(e.lineWidth).equal()},[`${t}-selection-search`]:{marginInlineStart:2}}},zy(r,"lg")]};function Dy(e,t){const{componentCls:n,inputPaddingHorizontalBase:r,borderRadius:i}=e,o=e.calc(e.controlHeight).sub(e.calc(e.lineWidth).mul(2)).equal(),a=t?`${n}-${t}`:"";return{[`${n}-single${a}`]:{fontSize:e.fontSize,height:e.controlHeight,[`${n}-selector`]:Object.assign(Object.assign({},Ca(e,!0)),{display:"flex",borderRadius:i,flex:"1 1 auto",[`${n}-selection-search`]:{position:"absolute",inset:0,width:"100%","&-input":{width:"100%",WebkitAppearance:"textfield"}},[`
          ${n}-selection-item,
          ${n}-selection-placeholder
        `]:{display:"block",padding:0,lineHeight:Ve(o),transition:`all ${e.motionDurationSlow}, visibility 0s`,alignSelf:"center"},[`${n}-selection-placeholder`]:{transition:"none",pointerEvents:"none"},[["&:after",`${n}-selection-item:empty:after`,`${n}-selection-placeholder:empty:after`].join(",")]:{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'}}),[`
        &${n}-show-arrow ${n}-selection-item,
        &${n}-show-arrow ${n}-selection-search,
        &${n}-show-arrow ${n}-selection-placeholder
      `]:{paddingInlineEnd:e.showArrowPaddingInlineEnd},[`&${n}-open ${n}-selection-item`]:{color:e.colorTextPlaceholder},[`&:not(${n}-customize-input)`]:{[`${n}-selector`]:{width:"100%",height:"100%",alignItems:"center",padding:`0 ${Ve(r)}`,[`${n}-selection-search-input`]:{height:o},"&:after":{lineHeight:Ve(o)}}},[`&${n}-customize-input`]:{[`${n}-selector`]:{"&:after":{display:"none"},[`${n}-selection-search`]:{position:"static",width:"100%"},[`${n}-selection-placeholder`]:{position:"absolute",insetInlineStart:0,insetInlineEnd:0,padding:`0 ${Ve(r)}`,"&:after":{display:"none"}}}}}}}function T6(e){const{componentCls:t}=e,n=e.calc(e.controlPaddingHorizontalSM).sub(e.lineWidth).equal();return[Dy(e),Dy(Br(e,{controlHeight:e.controlHeightSM,borderRadius:e.borderRadiusSM}),"sm"),{[`${t}-single${t}-sm`]:{[`&:not(${t}-customize-input)`]:{[`${t}-selector`]:{padding:`0 ${Ve(n)}`},[`&${t}-show-arrow ${t}-selection-search`]:{insetInlineEnd:e.calc(n).add(e.calc(e.fontSize).mul(1.5)).equal()},[`
            &${t}-show-arrow ${t}-selection-item,
            &${t}-show-arrow ${t}-selection-placeholder
          `]:{paddingInlineEnd:e.calc(e.fontSize).mul(1.5).equal()}}}},Dy(Br(e,{controlHeight:e.singleItemHeightLG,fontSize:e.fontSizeLG,borderRadius:e.borderRadiusLG}),"lg")]}const z6=e=>{const{fontSize:t,lineHeight:n,lineWidth:r,controlHeight:i,controlHeightSM:o,controlHeightLG:a,paddingXXS:l,controlPaddingHorizontal:g,zIndexPopupBase:u,colorText:d,fontWeightStrong:C,controlItemBgActive:f,controlItemBgHover:m,colorBgContainer:b,colorFillSecondary:p,colorBgContainerDisabled:y,colorTextDisabled:S,colorPrimaryHover:v,colorPrimary:B,controlOutline:W}=e,J=l*2,H=r*2,x=Math.min(i-J,i-H),E=Math.min(o-J,o-H),F=Math.min(a-J,a-H);return{INTERNAL_FIXED_ITEM_MARGIN:Math.floor(l/2),zIndexPopup:u+50,optionSelectedColor:d,optionSelectedFontWeight:C,optionSelectedBg:f,optionActiveBg:m,optionPadding:`${(i-t*n)/2}px ${g}px`,optionFontSize:t,optionLineHeight:n,optionHeight:i,selectorBg:b,clearBg:b,singleItemHeightLG:a,multipleItemBg:p,multipleItemBorderColor:"transparent",multipleItemHeight:x,multipleItemHeightSM:E,multipleItemHeightLG:F,multipleSelectorBgDisabled:y,multipleItemColorDisabled:S,multipleItemBorderColorDisabled:"transparent",showArrowPaddingInlineEnd:Math.ceil(e.fontSize*1.25),hoverBorderColor:v,activeBorderColor:B,activeOutlineColor:W,selectAffixPadding:l}},xJ=(e,t)=>{const{componentCls:n,antCls:r,controlOutlineWidth:i}=e;return{[`&:not(${n}-customize-input) ${n}-selector`]:{border:`${Ve(e.lineWidth)} ${e.lineType} ${t.borderColor}`,background:e.selectorBg},[`&:not(${n}-disabled):not(${n}-customize-input):not(${r}-pagination-size-changer)`]:{[`&:hover ${n}-selector`]:{borderColor:t.hoverBorderHover},[`${n}-focused& ${n}-selector`]:{borderColor:t.activeBorderColor,boxShadow:`0 0 0 ${Ve(i)} ${t.activeOutlineColor}`,outline:0},[`${n}-prefix`]:{color:t.color}}}},aw=(e,t)=>({[`&${e.componentCls}-status-${t.status}`]:Object.assign({},xJ(e,t))}),D6=e=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign({},xJ(e,{borderColor:e.colorBorder,hoverBorderHover:e.hoverBorderColor,activeBorderColor:e.activeBorderColor,activeOutlineColor:e.activeOutlineColor,color:e.colorText})),aw(e,{status:"error",borderColor:e.colorError,hoverBorderHover:e.colorErrorHover,activeBorderColor:e.colorError,activeOutlineColor:e.colorErrorOutline,color:e.colorError})),aw(e,{status:"warning",borderColor:e.colorWarning,hoverBorderHover:e.colorWarningHover,activeBorderColor:e.colorWarning,activeOutlineColor:e.colorWarningOutline,color:e.colorWarning})),{[`&${e.componentCls}-disabled`]:{[`&:not(${e.componentCls}-customize-input) ${e.componentCls}-selector`]:{background:e.colorBgContainerDisabled,color:e.colorTextDisabled}},[`&${e.componentCls}-multiple ${e.componentCls}-selection-item`]:{background:e.multipleItemBg,border:`${Ve(e.lineWidth)} ${e.lineType} ${e.multipleItemBorderColor}`}})}),HJ=(e,t)=>{const{componentCls:n,antCls:r}=e;return{[`&:not(${n}-customize-input) ${n}-selector`]:{background:t.bg,border:`${Ve(e.lineWidth)} ${e.lineType} transparent`,color:t.color},[`&:not(${n}-disabled):not(${n}-customize-input):not(${r}-pagination-size-changer)`]:{[`&:hover ${n}-selector`]:{background:t.hoverBg},[`${n}-focused& ${n}-selector`]:{background:e.selectorBg,borderColor:t.activeBorderColor,outline:0}}}},lw=(e,t)=>({[`&${e.componentCls}-status-${t.status}`]:Object.assign({},HJ(e,t))}),P6=e=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign({},HJ(e,{bg:e.colorFillTertiary,hoverBg:e.colorFillSecondary,activeBorderColor:e.activeBorderColor,color:e.colorText})),lw(e,{status:"error",bg:e.colorErrorBg,hoverBg:e.colorErrorBgHover,activeBorderColor:e.colorError,color:e.colorError})),lw(e,{status:"warning",bg:e.colorWarningBg,hoverBg:e.colorWarningBgHover,activeBorderColor:e.colorWarning,color:e.colorWarning})),{[`&${e.componentCls}-disabled`]:{[`&:not(${e.componentCls}-customize-input) ${e.componentCls}-selector`]:{borderColor:e.colorBorder,background:e.colorBgContainerDisabled,color:e.colorTextDisabled}},[`&${e.componentCls}-multiple ${e.componentCls}-selection-item`]:{background:e.colorBgContainer,border:`${Ve(e.lineWidth)} ${e.lineType} ${e.colorSplit}`}})}),O6=e=>({"&-borderless":{[`${e.componentCls}-selector`]:{background:"transparent",border:`${Ve(e.lineWidth)} ${e.lineType} transparent`},[`&${e.componentCls}-disabled`]:{[`&:not(${e.componentCls}-customize-input) ${e.componentCls}-selector`]:{color:e.colorTextDisabled}},[`&${e.componentCls}-multiple ${e.componentCls}-selection-item`]:{background:e.multipleItemBg,border:`${Ve(e.lineWidth)} ${e.lineType} ${e.multipleItemBorderColor}`},[`&${e.componentCls}-status-error`]:{[`${e.componentCls}-prefix, ${e.componentCls}-selection-item`]:{color:e.colorError}},[`&${e.componentCls}-status-warning`]:{[`${e.componentCls}-prefix, ${e.componentCls}-selection-item`]:{color:e.colorWarning}}}}),_6=e=>({[e.componentCls]:Object.assign(Object.assign(Object.assign({},D6(e)),P6(e)),O6(e))}),U6=e=>{const{componentCls:t}=e;return{position:"relative",transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,input:{cursor:"pointer"},[`${t}-show-search&`]:{cursor:"text",input:{cursor:"auto",color:"inherit",height:"100%"}},[`${t}-disabled&`]:{cursor:"not-allowed",input:{cursor:"not-allowed"}}}},j6=e=>{const{componentCls:t}=e;return{[`${t}-selection-search-input`]:{margin:0,padding:0,background:"transparent",border:"none",outline:"none",appearance:"none",fontFamily:"inherit","&::-webkit-search-cancel-button":{display:"none","-webkit-appearance":"none"}}}},Q6=e=>{const{antCls:t,componentCls:n,inputPaddingHorizontalBase:r,iconCls:i}=e;return{[n]:Object.assign(Object.assign({},Ca(e)),{position:"relative",display:"inline-flex",cursor:"pointer",[`&:not(${n}-customize-input) ${n}-selector`]:Object.assign(Object.assign({},U6(e)),j6(e)),[`${n}-selection-item`]:Object.assign(Object.assign({flex:1,fontWeight:"normal",position:"relative",userSelect:"none"},rd),{[`> ${t}-typography`]:{display:"inline"}}),[`${n}-selection-placeholder`]:Object.assign(Object.assign({},rd),{flex:1,color:e.colorTextPlaceholder,pointerEvents:"none"}),[`${n}-arrow`]:Object.assign(Object.assign({},vm()),{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:r,height:e.fontSizeIcon,marginTop:e.calc(e.fontSizeIcon).mul(-1).div(2).equal(),color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,lineHeight:1,textAlign:"center",pointerEvents:"none",display:"flex",alignItems:"center",transition:`opacity ${e.motionDurationSlow} ease`,[i]:{verticalAlign:"top",transition:`transform ${e.motionDurationSlow}`,"> svg":{verticalAlign:"top"},[`&:not(${n}-suffix)`]:{pointerEvents:"auto"}},[`${n}-disabled &`]:{cursor:"not-allowed"},"> *:not(:last-child)":{marginInlineEnd:8}}),[`${n}-selection-wrap`]:{display:"flex",width:"100%",position:"relative",minWidth:0,"&:after":{content:'"\\a0"',width:0,overflow:"hidden"}},[`${n}-prefix`]:{flex:"none",marginInlineEnd:e.selectAffixPadding},[`${n}-clear`]:{position:"absolute",top:"50%",insetInlineStart:"auto",insetInlineEnd:r,zIndex:1,display:"inline-block",width:e.fontSizeIcon,height:e.fontSizeIcon,marginTop:e.calc(e.fontSizeIcon).mul(-1).div(2).equal(),color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",cursor:"pointer",opacity:0,transition:`color ${e.motionDurationMid} ease, opacity ${e.motionDurationSlow} ease`,textRendering:"auto","&:before":{display:"block"},"&:hover":{color:e.colorTextTertiary}},[`&:hover ${n}-clear`]:{opacity:1,background:e.colorBgBase,borderRadius:"50%"}}),[`${n}-status`]:{"&-error, &-warning, &-success, &-validating":{[`&${n}-has-feedback`]:{[`${n}-clear`]:{insetInlineEnd:e.calc(r).add(e.fontSize).add(e.paddingXS).equal()}}}}}},$6=e=>{const{componentCls:t}=e;return[{[t]:{[`&${t}-in-form-item`]:{width:"100%"}}},Q6(e),T6(e),M6(e),Y6(e),{[`${t}-rtl`]:{direction:"rtl"}},TZ(e,{borderElCls:`${t}-selector`,focusElCls:`${t}-focused`})]},q6=Gi("Select",(e,t)=>{let{rootPrefixCls:n}=t;const r=Br(e,{rootPrefixCls:n,inputPaddingHorizontalBase:e.calc(e.paddingSM).sub(1).equal(),multipleSelectItemHeight:e.multipleItemHeight,selectHeight:e.controlHeight});return[$6(r),_6(r)]},z6,{unitless:{optionLineHeight:!0,optionSelectedFontWeight:!0}});var e$={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},t$=function(t,n){return I.createElement(er,lt({},t,{ref:n,icon:e$}))},YJ=I.forwardRef(t$),n$={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"},r$=function(t,n){return I.createElement(er,lt({},t,{ref:n,icon:n$}))},EJ=I.forwardRef(r$),i$={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},o$=function(t,n){return I.createElement(er,lt({},t,{ref:n,icon:i$}))},QZ=I.forwardRef(o$);function a$(e){let{suffixIcon:t,clearIcon:n,menuItemSelectedIcon:r,removeIcon:i,loading:o,multiple:a,hasFeedback:l,prefixCls:g,showSuffixIcon:u,feedbackIcon:d,showArrow:C,componentName:f}=e;const m=n??I.createElement(rb,null),b=v=>t===null&&!l&&!C?null:I.createElement(I.Fragment,null,u!==!1&&v,l&&d);let p=null;if(t!==void 0)p=b(t);else if(o)p=b(I.createElement(ib,{spin:!0}));else{const v=`${g}-suffix`;p=B=>{let{open:W,showSearch:J}=B;return b(W&&J?I.createElement(QZ,{className:v}):I.createElement(EJ,{className:v}))}}let y=null;r!==void 0?y=r:a?y=I.createElement(YJ,null):y=null;let S=null;return i!==void 0?S=i:S=I.createElement(aC,null),{clearIcon:m,suffixIcon:p,itemIcon:y,removeIcon:S}}function l$(e,t){return t!==void 0?t:e!==null}var s$=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const FJ="SECRET_COMBOBOX_MODE_DO_NOT_USE",g$=(e,t)=>{var n;const{prefixCls:r,bordered:i,className:o,rootClassName:a,getPopupContainer:l,popupClassName:g,dropdownClassName:u,listHeight:d=256,placement:C,listItemHeight:f,size:m,disabled:b,notFoundContent:p,status:y,builtinPlacements:S,dropdownMatchSelectWidth:v,popupMatchSelectWidth:B,direction:W,style:J,allowClear:H,variant:x,dropdownStyle:E,transitionName:F,tagRender:w,maxCount:V,prefix:Y}=e,M=s$(e,["prefixCls","bordered","className","rootClassName","getPopupContainer","popupClassName","dropdownClassName","listHeight","placement","listItemHeight","size","disabled","notFoundContent","status","builtinPlacements","dropdownMatchSelectWidth","popupMatchSelectWidth","direction","style","allowClear","variant","dropdownStyle","transitionName","tagRender","maxCount","prefix"]),{getPopupContainer:L,getPrefixCls:$,renderEmpty:U,direction:_,virtual:P,popupMatchSelectWidth:ee,popupOverflow:j,select:O}=I.useContext(dn),[,X]=Ia(),D=f??(X==null?void 0:X.controlHeight),z=$("select",r),Q=$(),ne=W??_,{compactSize:ce,compactItemClassnames:se}=Gm(z,ne),[ue,ve]=jZ("select",x,i),Ae=gs(z),[be,me,Ne]=q6(z,Ae),Ie=I.useMemo(()=>{const{mode:Et}=e;if(Et!=="combobox")return Et===FJ?"combobox":Et},[e.mode]),ae=Ie==="multiple"||Ie==="tags",Ee=l$(e.suffixIcon,e.showArrow),Fe=(n=B??v)!==null&&n!==void 0?n:ee,{status:ke,hasFeedback:ze,isFormItemInput:He,feedbackIcon:Le}=I.useContext(xg),Ye=pb(ke,y);let Pe;p!==void 0?Pe=p:Ie==="combobox"?Pe=null:Pe=(U==null?void 0:U("Select"))||I.createElement(J6,{componentName:"Select"});const{suffixIcon:$e,itemIcon:ot,removeIcon:Ct,clearIcon:pt}=a$(Object.assign(Object.assign({},M),{multiple:ae,hasFeedback:ze,feedbackIcon:Le,showSuffixIcon:Ee,prefixCls:z,componentName:"Select"})),it=H===!0?{clearIcon:pt}:H,It=Pi(M,["suffixIcon","itemIcon"]),_e=Re(g||u,{[`${z}-dropdown-${ne}`]:ne==="rtl"},a,Ne,Ae,me),Ot=Os(Et=>{var hn;return(hn=m??ce)!==null&&hn!==void 0?hn:Et}),Qe=I.useContext(_c),st=b??Qe,St=Re({[`${z}-lg`]:Ot==="large",[`${z}-sm`]:Ot==="small",[`${z}-rtl`]:ne==="rtl",[`${z}-${ue}`]:ve,[`${z}-in-form-item`]:He},Gp(z,Ye,ze),se,O==null?void 0:O.className,o,a,Ne,Ae,me),dt=I.useMemo(()=>C!==void 0?C:ne==="rtl"?"bottomRight":"bottomLeft",[C,ne]),[Wt]=lC("SelectLike",E==null?void 0:E.zIndex);return be(I.createElement(UZ,Object.assign({ref:t,virtual:P,showSearch:O==null?void 0:O.showSearch},It,{style:Object.assign(Object.assign({},O==null?void 0:O.style),J),dropdownMatchSelectWidth:Fe,transitionName:Jg(Q,"slide-up",F),builtinPlacements:H6(S,j),listHeight:d,listItemHeight:D,mode:Ie,prefixCls:z,placement:dt,direction:ne,prefix:Y,suffixIcon:$e,menuItemSelectedIcon:ot,removeIcon:Ct,allowClear:it,notFoundContent:Pe,className:St,getPopupContainer:l||L,dropdownClassName:_e,disabled:st,dropdownStyle:Object.assign(Object.assign({},E),{zIndex:Wt}),maxCount:ae?V:void 0,tagRender:ae?w:void 0})))},gC=I.forwardRef(g$),c$=pJ(gC,"dropdownAlign");gC.SECRET_COMBOBOX_MODE_DO_NOT_USE=FJ;gC.Option=_Z;gC.OptGroup=OZ;gC._InternalPanelDoNotUseOrYouWillBeFired=c$;const u$=["xxl","xl","lg","md","sm","xs"],d$=e=>({xs:`(max-width: ${e.screenXSMax}px)`,sm:`(min-width: ${e.screenSM}px)`,md:`(min-width: ${e.screenMD}px)`,lg:`(min-width: ${e.screenLG}px)`,xl:`(min-width: ${e.screenXL}px)`,xxl:`(min-width: ${e.screenXXL}px)`}),I$=e=>{const t=e,n=[].concat(u$).reverse();return n.forEach((r,i)=>{const o=r.toUpperCase(),a=`screen${o}Min`,l=`screen${o}`;if(!(t[a]<=t[l]))throw new Error(`${a}<=${l} fails : !(${t[a]}<=${t[l]})`);if(i<n.length-1){const g=`screen${o}Max`;if(!(t[l]<=t[g]))throw new Error(`${l}<=${g} fails : !(${t[l]}<=${t[g]})`);const d=`screen${n[i+1].toUpperCase()}Min`;if(!(t[g]<=t[d]))throw new Error(`${g}<=${d} fails : !(${t[g]}<=${t[d]})`)}}),e};function C$(){const[,e]=Ia(),t=d$(I$(e));return Ge.useMemo(()=>{const n=new Map;let r=-1,i={};return{matchHandlers:{},dispatch(o){return i=o,n.forEach(a=>a(i)),n.size>=1},subscribe(o){return n.size||this.register(),r+=1,n.set(r,o),o(i),r},unsubscribe(o){n.delete(o),n.size||this.unregister()},unregister(){Object.keys(t).forEach(o=>{const a=t[o],l=this.matchHandlers[a];l==null||l.mql.removeListener(l==null?void 0:l.listener)}),n.clear()},register(){Object.keys(t).forEach(o=>{const a=t[o],l=u=>{let{matches:d}=u;this.dispatch(Object.assign(Object.assign({},i),{[o]:d}))},g=window.matchMedia(a);g.addListener(l),this.matchHandlers[a]={mql:g,listener:l},l(g)})},responsiveMap:t}},[e])}function f$(){const[,e]=I.useReducer(t=>t+1,0);return e}function m$(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const t=I.useRef({}),n=f$(),r=C$();return ur(()=>{const i=r.subscribe(o=>{t.current=o,e&&n()});return()=>r.unsubscribe(i)},[]),t.current}function KJ(e){var t=e.children,n=e.prefixCls,r=e.id,i=e.overlayInnerStyle,o=e.bodyClassName,a=e.className,l=e.style;return I.createElement("div",{className:Re("".concat(n,"-content"),a),style:l},I.createElement("div",{className:Re("".concat(n,"-inner"),o),id:r,role:"tooltip",style:i},typeof t=="function"?t():t))}var Td={shiftX:64,adjustY:1},zd={adjustX:1,shiftY:!0},hl=[0,0],h$={left:{points:["cr","cl"],overflow:zd,offset:[-4,0],targetOffset:hl},right:{points:["cl","cr"],overflow:zd,offset:[4,0],targetOffset:hl},top:{points:["bc","tc"],overflow:Td,offset:[0,-4],targetOffset:hl},bottom:{points:["tc","bc"],overflow:Td,offset:[0,4],targetOffset:hl},topLeft:{points:["bl","tl"],overflow:Td,offset:[0,-4],targetOffset:hl},leftTop:{points:["tr","tl"],overflow:zd,offset:[-4,0],targetOffset:hl},topRight:{points:["br","tr"],overflow:Td,offset:[0,-4],targetOffset:hl},rightTop:{points:["tl","tr"],overflow:zd,offset:[4,0],targetOffset:hl},bottomRight:{points:["tr","br"],overflow:Td,offset:[0,4],targetOffset:hl},rightBottom:{points:["bl","br"],overflow:zd,offset:[4,0],targetOffset:hl},bottomLeft:{points:["tl","bl"],overflow:Td,offset:[0,4],targetOffset:hl},leftBottom:{points:["br","bl"],overflow:zd,offset:[-4,0],targetOffset:hl}},A$=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow","classNames","styles"],p$=function(t,n){var r=t.overlayClassName,i=t.trigger,o=i===void 0?["hover"]:i,a=t.mouseEnterDelay,l=a===void 0?0:a,g=t.mouseLeaveDelay,u=g===void 0?.1:g,d=t.overlayStyle,C=t.prefixCls,f=C===void 0?"rc-tooltip":C,m=t.children,b=t.onVisibleChange,p=t.afterVisibleChange,y=t.transitionName,S=t.animation,v=t.motion,B=t.placement,W=B===void 0?"right":B,J=t.align,H=J===void 0?{}:J,x=t.destroyTooltipOnHide,E=x===void 0?!1:x,F=t.defaultVisible,w=t.getTooltipContainer,V=t.overlayInnerStyle;t.arrowContent;var Y=t.overlay,M=t.id,L=t.showArrow,$=L===void 0?!0:L,U=t.classNames,_=t.styles,P=Wn(t,A$),ee=I.useRef(null);I.useImperativeHandle(n,function(){return ee.current});var j=he({},P);"visible"in t&&(j.popupVisible=t.visible);var O=function(){return I.createElement(KJ,{key:"content",prefixCls:f,id:M,bodyClassName:U==null?void 0:U.body,overlayInnerStyle:he(he({},V),_==null?void 0:_.body)},Y)};return I.createElement(Ab,lt({popupClassName:Re(r,U==null?void 0:U.root),prefixCls:f,popup:O,action:o,builtinPlacements:h$,popupPlacement:W,ref:ee,popupAlign:H,getPopupContainer:w,onPopupVisibleChange:b,afterPopupVisibleChange:p,popupTransitionName:y,popupAnimation:S,popupMotion:v,defaultPopupVisible:F,autoDestroy:E,mouseLeaveDelay:u,popupStyle:he(he({},d),_==null?void 0:_.root),mouseEnterDelay:l,arrow:$},j),m)};const b$=I.forwardRef(p$);function LJ(e){const{sizePopupArrow:t,borderRadiusXS:n,borderRadiusOuter:r}=e,i=t/2,o=0,a=i,l=r*1/Math.sqrt(2),g=i-r*(1-1/Math.sqrt(2)),u=i-n*(1/Math.sqrt(2)),d=r*(Math.sqrt(2)-1)+n*(1/Math.sqrt(2)),C=2*i-u,f=d,m=2*i-l,b=g,p=2*i-o,y=a,S=i*Math.sqrt(2)+r*(Math.sqrt(2)-2),v=r*(Math.sqrt(2)-1),B=`polygon(${v}px 100%, 50% ${v}px, ${2*i-v}px 100%, ${v}px 100%)`,W=`path('M ${o} ${a} A ${r} ${r} 0 0 0 ${l} ${g} L ${u} ${d} A ${n} ${n} 0 0 1 ${C} ${f} L ${m} ${b} A ${r} ${r} 0 0 0 ${p} ${y} Z')`;return{arrowShadowWidth:S,arrowPath:W,arrowPolygon:B}}const y$=(e,t,n)=>{const{sizePopupArrow:r,arrowPolygon:i,arrowPath:o,arrowShadowWidth:a,borderRadiusXS:l,calc:g}=e;return{pointerEvents:"none",width:r,height:r,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:r,height:g(r).div(2).equal(),background:t,clipPath:{_multi_value_:!0,value:[i,o]},content:'""'},"&::after":{content:'""',position:"absolute",width:a,height:a,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${Ve(l)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:n,zIndex:0,background:"transparent"}}},MJ=8;function $Z(e){const{contentRadius:t,limitVerticalRadius:n}=e,r=t>12?t+2:12;return{arrowOffsetHorizontal:r,arrowOffsetVertical:n?MJ:r}}function kh(e,t){return e?t:{}}function TJ(e,t,n){const{componentCls:r,boxShadowPopoverArrow:i,arrowOffsetVertical:o,arrowOffsetHorizontal:a}=e,{arrowDistance:l=0,arrowPlacement:g={left:!0,right:!0,top:!0,bottom:!0}}=n||{};return{[r]:Object.assign(Object.assign(Object.assign(Object.assign({[`${r}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},y$(e,t,i)),{"&:before":{background:t}})]},kh(!!g.top,{[[`&-placement-top > ${r}-arrow`,`&-placement-topLeft > ${r}-arrow`,`&-placement-topRight > ${r}-arrow`].join(",")]:{bottom:l,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top > ${r}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},"&-placement-topLeft":{"--arrow-offset-horizontal":a,[`> ${r}-arrow`]:{left:{_skip_check_:!0,value:a}}},"&-placement-topRight":{"--arrow-offset-horizontal":`calc(100% - ${Ve(a)})`,[`> ${r}-arrow`]:{right:{_skip_check_:!0,value:a}}}})),kh(!!g.bottom,{[[`&-placement-bottom > ${r}-arrow`,`&-placement-bottomLeft > ${r}-arrow`,`&-placement-bottomRight > ${r}-arrow`].join(",")]:{top:l,transform:"translateY(-100%)"},[`&-placement-bottom > ${r}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},"&-placement-bottomLeft":{"--arrow-offset-horizontal":a,[`> ${r}-arrow`]:{left:{_skip_check_:!0,value:a}}},"&-placement-bottomRight":{"--arrow-offset-horizontal":`calc(100% - ${Ve(a)})`,[`> ${r}-arrow`]:{right:{_skip_check_:!0,value:a}}}})),kh(!!g.left,{[[`&-placement-left > ${r}-arrow`,`&-placement-leftTop > ${r}-arrow`,`&-placement-leftBottom > ${r}-arrow`].join(",")]:{right:{_skip_check_:!0,value:l},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left > ${r}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop > ${r}-arrow`]:{top:o},[`&-placement-leftBottom > ${r}-arrow`]:{bottom:o}})),kh(!!g.right,{[[`&-placement-right > ${r}-arrow`,`&-placement-rightTop > ${r}-arrow`,`&-placement-rightBottom > ${r}-arrow`].join(",")]:{left:{_skip_check_:!0,value:l},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right > ${r}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop > ${r}-arrow`]:{top:o},[`&-placement-rightBottom > ${r}-arrow`]:{bottom:o}}))}}function v$(e,t,n,r){if(r===!1)return{adjustX:!1,adjustY:!1};const i=r&&typeof r=="object"?r:{},o={};switch(e){case"top":case"bottom":o.shiftX=t.arrowOffsetHorizontal*2+n,o.shiftY=!0,o.adjustY=!0;break;case"left":case"right":o.shiftY=t.arrowOffsetVertical*2+n,o.shiftX=!0,o.adjustX=!0;break}const a=Object.assign(Object.assign({},o),i);return a.shiftX||(a.adjustX=!0),a.shiftY||(a.adjustY=!0),a}const sw={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},S$={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},Z$=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function zJ(e){const{arrowWidth:t,autoAdjustOverflow:n,arrowPointAtCenter:r,offset:i,borderRadius:o,visibleFirst:a}=e,l=t/2,g={};return Object.keys(sw).forEach(u=>{const d=r&&S$[u]||sw[u],C=Object.assign(Object.assign({},d),{offset:[0,0],dynamicInset:!0});switch(g[u]=C,Z$.has(u)&&(C.autoArrow=!1),u){case"top":case"topLeft":case"topRight":C.offset[1]=-l-i;break;case"bottom":case"bottomLeft":case"bottomRight":C.offset[1]=l+i;break;case"left":case"leftTop":case"leftBottom":C.offset[0]=-l-i;break;case"right":case"rightTop":case"rightBottom":C.offset[0]=l+i;break}const f=$Z({contentRadius:o,limitVerticalRadius:!0});if(r)switch(u){case"topLeft":case"bottomLeft":C.offset[0]=-f.arrowOffsetHorizontal-l;break;case"topRight":case"bottomRight":C.offset[0]=f.arrowOffsetHorizontal+l;break;case"leftTop":case"rightTop":C.offset[1]=-f.arrowOffsetHorizontal*2+l;break;case"leftBottom":case"rightBottom":C.offset[1]=f.arrowOffsetHorizontal*2-l;break}C.overflow=v$(u,f,t,n),a&&(C.htmlRegion="visibleFirst")}),g}const G$=e=>{const{calc:t,componentCls:n,tooltipMaxWidth:r,tooltipColor:i,tooltipBg:o,tooltipBorderRadius:a,zIndexPopup:l,controlHeight:g,boxShadowSecondary:u,paddingSM:d,paddingXS:C,arrowOffsetHorizontal:f,sizePopupArrow:m}=e,b=t(a).add(m).add(f).equal(),p=t(a).mul(2).add(m).equal();return[{[n]:Object.assign(Object.assign(Object.assign(Object.assign({},Ca(e)),{position:"absolute",zIndex:l,display:"block",width:"max-content",maxWidth:r,visibility:"visible","--valid-offset-x":"var(--arrow-offset-horizontal, var(--arrow-x))",transformOrigin:["var(--valid-offset-x, 50%)","var(--arrow-y, 50%)"].join(" "),"&-hidden":{display:"none"},"--antd-arrow-background-color":o,[`${n}-inner`]:{minWidth:p,minHeight:g,padding:`${Ve(e.calc(d).div(2).equal())} ${Ve(C)}`,color:i,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:o,borderRadius:a,boxShadow:u,boxSizing:"border-box"},[["&-placement-topLeft","&-placement-topRight","&-placement-bottomLeft","&-placement-bottomRight"].join(",")]:{minWidth:b},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${n}-inner`]:{borderRadius:e.min(a,MJ)}},[`${n}-content`]:{position:"relative"}}),pO(e,(y,S)=>{let{darkColor:v}=S;return{[`&${n}-${y}`]:{[`${n}-inner`]:{backgroundColor:v},[`${n}-arrow`]:{"--antd-arrow-background-color":v}}}})),{"&-rtl":{direction:"rtl"}})},TJ(e,"var(--antd-arrow-background-color)"),{[`${n}-pure`]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow}}]},B$=e=>Object.assign(Object.assign({zIndexPopup:e.zIndexPopupBase+70},$Z({contentRadius:e.borderRadius,limitVerticalRadius:!0})),LJ(Br(e,{borderRadiusOuter:Math.min(e.borderRadiusOuter,4)}))),DJ=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Gi("Tooltip",r=>{const{borderRadius:i,colorTextLightSolid:o,colorBgSpotlight:a}=r,l=Br(r,{tooltipMaxWidth:250,tooltipColor:o,tooltipBorderRadius:i,tooltipBg:a});return[G$(l),sb(r,"zoom-big-fast")]},B$,{resetStyle:!1,injectStyle:t})(e)},R$=LI.map(e=>`${e}-inverse`);function w$(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat(Gt(R$),Gt(LI)).includes(e):LI.includes(e)}function PJ(e,t){const n=w$(t),r=Re({[`${e}-${t}`]:t&&n}),i={},o={};return t&&!n&&(i.background=t,o["--antd-arrow-background-color"]=t),{className:r,overlayStyle:i,arrowStyle:o}}const W$=e=>{const{prefixCls:t,className:n,placement:r="top",title:i,color:o,overlayInnerStyle:a}=e,{getPrefixCls:l}=I.useContext(dn),g=l("tooltip",t),[u,d,C]=DJ(g),f=PJ(g,o),m=f.arrowStyle,b=Object.assign(Object.assign({},a),f.overlayStyle),p=Re(d,C,g,`${g}-pure`,`${g}-placement-${r}`,n,f.className);return u(I.createElement("div",{className:p,style:m},I.createElement("div",{className:`${g}-arrow`}),I.createElement(KJ,Object.assign({},e,{className:d,prefixCls:g,overlayInnerStyle:b}),i)))};var V$=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const k$=I.forwardRef((e,t)=>{var n,r,i,o,a,l;const{prefixCls:g,openClassName:u,getTooltipContainer:d,color:C,overlayInnerStyle:f,children:m,afterOpenChange:b,afterVisibleChange:p,destroyTooltipOnHide:y,arrow:S=!0,title:v,overlay:B,builtinPlacements:W,arrowPointAtCenter:J=!1,autoAdjustOverflow:H=!0,motion:x,getPopupContainer:E,placement:F="top",mouseEnterDelay:w=.1,mouseLeaveDelay:V=.1,overlayStyle:Y,rootClassName:M,overlayClassName:L,styles:$,classNames:U}=e,_=V$(e,["prefixCls","openClassName","getTooltipContainer","color","overlayInnerStyle","children","afterOpenChange","afterVisibleChange","destroyTooltipOnHide","arrow","title","overlay","builtinPlacements","arrowPointAtCenter","autoAdjustOverflow","motion","getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName","overlayClassName","styles","classNames"]),P=!!S,[,ee]=Ia(),{getPopupContainer:j,getPrefixCls:O,direction:X,tooltip:D}=I.useContext(dn),z=tb(),Q=I.useRef(null),ne=()=>{var _e;(_e=Q.current)===null||_e===void 0||_e.forceAlign()};I.useImperativeHandle(t,()=>{var _e;return{forceAlign:ne,forcePopupAlign:()=>{z.deprecated(!1,"forcePopupAlign","forceAlign"),ne()},nativeElement:(_e=Q.current)===null||_e===void 0?void 0:_e.nativeElement}});const[ce,se]=qi(!1,{value:(n=e.open)!==null&&n!==void 0?n:e.visible,defaultValue:(r=e.defaultOpen)!==null&&r!==void 0?r:e.defaultVisible}),ue=!v&&!B&&v!==0,ve=_e=>{var Ot,Qe;se(ue?!1:_e),ue||((Ot=e.onOpenChange)===null||Ot===void 0||Ot.call(e,_e),(Qe=e.onVisibleChange)===null||Qe===void 0||Qe.call(e,_e))},Ae=I.useMemo(()=>{var _e,Ot;let Qe=J;return typeof S=="object"&&(Qe=(Ot=(_e=S.pointAtCenter)!==null&&_e!==void 0?_e:S.arrowPointAtCenter)!==null&&Ot!==void 0?Ot:J),W||zJ({arrowPointAtCenter:Qe,autoAdjustOverflow:H,arrowWidth:P?ee.sizePopupArrow:0,borderRadius:ee.borderRadius,offset:ee.marginXXS,visibleFirst:!0})},[J,S,W,ee]),be=I.useMemo(()=>v===0?v:B||v||"",[B,v]),me=I.createElement(zI,{space:!0},typeof be=="function"?be():be),Ne=O("tooltip",g),Ie=O(),ae=e["data-popover-inject"];let Ee=ce;!("open"in e)&&!("visible"in e)&&ue&&(Ee=!1);const Fe=I.isValidElement(m)&&!Z3(m)?m:I.createElement("span",null,m),ke=Fe.props,ze=!ke.className||typeof ke.className=="string"?Re(ke.className,u||`${Ne}-open`):ke.className,[He,Le,Ye]=DJ(Ne,!ae),Pe=PJ(Ne,C),$e=Pe.arrowStyle,ot=Re(L,{[`${Ne}-rtl`]:X==="rtl"},Pe.className,M,Le,Ye,D==null?void 0:D.className,(i=D==null?void 0:D.classNames)===null||i===void 0?void 0:i.root,U==null?void 0:U.root),Ct=Re((o=D==null?void 0:D.classNames)===null||o===void 0?void 0:o.body,U==null?void 0:U.body),[pt,it]=lC("Tooltip",_.zIndex),It=I.createElement(b$,Object.assign({},_,{zIndex:pt,showArrow:P,placement:F,mouseEnterDelay:w,mouseLeaveDelay:V,prefixCls:Ne,classNames:{root:ot,body:Ct},styles:{root:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},$e),(a=D==null?void 0:D.styles)===null||a===void 0?void 0:a.root),D==null?void 0:D.style),Y),$==null?void 0:$.root),body:Object.assign(Object.assign(Object.assign(Object.assign({},(l=D==null?void 0:D.styles)===null||l===void 0?void 0:l.body),f),$==null?void 0:$.body),Pe.overlayStyle)},getTooltipContainer:E||d||j,ref:Q,builtinPlacements:Ae,overlay:me,visible:Ee,onVisibleChange:ve,afterVisibleChange:b??p,arrowContent:I.createElement("span",{className:`${Ne}-arrow-content`}),motion:{motionName:Jg(Ie,"zoom-big-fast",e.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!y}),Ee?os(Fe,{className:ze}):Fe);return He(I.createElement(Sm.Provider,{value:it},It))}),km=k$;km._InternalPanelDoNotUseOrYouWillBeFired=W$;var N$=Mt.ESC,X$=Mt.TAB;function J$(e){var t=e.visible,n=e.triggerRef,r=e.onVisibleChange,i=e.autoFocus,o=e.overlayRef,a=I.useRef(!1),l=function(){if(t){var C,f;(C=n.current)===null||C===void 0||(f=C.focus)===null||f===void 0||f.call(C),r==null||r(!1)}},g=function(){var C;return(C=o.current)!==null&&C!==void 0&&C.focus?(o.current.focus(),a.current=!0,!0):!1},u=function(C){switch(C.keyCode){case N$:l();break;case X$:{var f=!1;a.current||(f=g()),f?C.preventDefault():l();break}}};I.useEffect(function(){return t?(window.addEventListener("keydown",u),i&&Jr(g,3),function(){window.removeEventListener("keydown",u),a.current=!1}):function(){a.current=!1}},[t])}var x$=I.forwardRef(function(e,t){var n=e.overlay,r=e.arrow,i=e.prefixCls,o=I.useMemo(function(){var l;return typeof n=="function"?l=n():l=n,l},[n]),a=vl(t,cd(o));return Ge.createElement(Ge.Fragment,null,r&&Ge.createElement("div",{className:"".concat(i,"-arrow")}),Ge.cloneElement(o,{ref:au(o)?a:void 0}))}),Dd={adjustX:1,adjustY:1},Pd=[0,0],H$={topLeft:{points:["bl","tl"],overflow:Dd,offset:[0,-4],targetOffset:Pd},top:{points:["bc","tc"],overflow:Dd,offset:[0,-4],targetOffset:Pd},topRight:{points:["br","tr"],overflow:Dd,offset:[0,-4],targetOffset:Pd},bottomLeft:{points:["tl","bl"],overflow:Dd,offset:[0,4],targetOffset:Pd},bottom:{points:["tc","bc"],overflow:Dd,offset:[0,4],targetOffset:Pd},bottomRight:{points:["tr","br"],overflow:Dd,offset:[0,4],targetOffset:Pd}},Y$=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus","overlay","children","onVisibleChange"];function E$(e,t){var n,r=e.arrow,i=r===void 0?!1:r,o=e.prefixCls,a=o===void 0?"rc-dropdown":o,l=e.transitionName,g=e.animation,u=e.align,d=e.placement,C=d===void 0?"bottomLeft":d,f=e.placements,m=f===void 0?H$:f,b=e.getPopupContainer,p=e.showAction,y=e.hideAction,S=e.overlayClassName,v=e.overlayStyle,B=e.visible,W=e.trigger,J=W===void 0?["hover"]:W,H=e.autoFocus,x=e.overlay,E=e.children,F=e.onVisibleChange,w=Wn(e,Y$),V=Ge.useState(),Y=xe(V,2),M=Y[0],L=Y[1],$="visible"in e?B:M,U=Ge.useRef(null),_=Ge.useRef(null),P=Ge.useRef(null);Ge.useImperativeHandle(t,function(){return U.current});var ee=function(se){L(se),F==null||F(se)};J$({visible:$,triggerRef:P,onVisibleChange:ee,autoFocus:H,overlayRef:_});var j=function(se){var ue=e.onOverlayClick;L(!1),ue&&ue(se)},O=function(){return Ge.createElement(x$,{ref:_,overlay:x,prefixCls:a,arrow:i})},X=function(){return typeof x=="function"?O:O()},D=function(){var se=e.minOverlayWidthMatchTrigger,ue=e.alignPoint;return"minOverlayWidthMatchTrigger"in e?se:!ue},z=function(){var se=e.openClassName;return se!==void 0?se:"".concat(a,"-open")},Q=Ge.cloneElement(E,{className:Re((n=E.props)===null||n===void 0?void 0:n.className,$&&z()),ref:au(E)?vl(P,cd(E)):void 0}),ne=y;return!ne&&J.indexOf("contextMenu")!==-1&&(ne=["click"]),Ge.createElement(Ab,lt({builtinPlacements:m},w,{prefixCls:a,ref:U,popupClassName:Re(S,fe({},"".concat(a,"-show-arrow"),i)),popupStyle:v,action:J,showAction:p,hideAction:ne,popupPlacement:C,popupAlign:u,popupTransitionName:l,popupAnimation:g,popupVisible:$,stretch:D()?"minWidth":"",popup:X(),onPopupVisibleChange:ee,onPopupClick:j,getPopupContainer:b}),Q)}const OJ=Ge.forwardRef(E$),F$=e=>typeof e!="object"&&typeof e!="function"||e===null;var _J=I.createContext(null);function UJ(e,t){return e===void 0?null:"".concat(e,"-").concat(t)}function jJ(e){var t=I.useContext(_J);return UJ(t,e)}var K$=["children","locked"],as=I.createContext(null);function L$(e,t){var n=he({},e);return Object.keys(t).forEach(function(r){var i=t[r];i!==void 0&&(n[r]=i)}),n}function Qf(e){var t=e.children,n=e.locked,r=Wn(e,K$),i=I.useContext(as),o=bm(function(){return L$(i,r)},[i,r],function(a,l){return!n&&(a[0]!==l[0]||!Lf(a[1],l[1],!0))});return I.createElement(as.Provider,{value:o},t)}var M$=[],QJ=I.createContext(null);function bb(){return I.useContext(QJ)}var $J=I.createContext(M$);function cC(e){var t=I.useContext($J);return I.useMemo(function(){return e!==void 0?[].concat(Gt(t),[e]):t},[t,e])}var qJ=I.createContext(null),qZ=I.createContext({});function gw(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(HZ(e)){var n=e.nodeName.toLowerCase(),r=["input","select","textarea","button"].includes(n)||e.isContentEditable||n==="a"&&!!e.getAttribute("href"),i=e.getAttribute("tabindex"),o=Number(i),a=null;return i&&!Number.isNaN(o)?a=o:r&&a===null&&(a=0),r&&e.disabled&&(a=null),a!==null&&(a>=0||t&&a<0)}return!1}function T$(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=Gt(e.querySelectorAll("*")).filter(function(r){return gw(r,t)});return gw(e,t)&&n.unshift(e),n}var _2=Mt.LEFT,U2=Mt.RIGHT,j2=Mt.UP,uA=Mt.DOWN,dA=Mt.ENTER,ex=Mt.ESC,PC=Mt.HOME,OC=Mt.END,cw=[j2,uA,_2,U2];function z$(e,t,n,r){var i,o="prev",a="next",l="children",g="parent";if(e==="inline"&&r===dA)return{inlineTrigger:!0};var u=fe(fe({},j2,o),uA,a),d=fe(fe(fe(fe({},_2,n?a:o),U2,n?o:a),uA,l),dA,l),C=fe(fe(fe(fe(fe(fe({},j2,o),uA,a),dA,l),ex,g),_2,n?l:g),U2,n?g:l),f={inline:u,horizontal:d,vertical:C,inlineSub:u,horizontalSub:C,verticalSub:C},m=(i=f["".concat(e).concat(t?"":"Sub")])===null||i===void 0?void 0:i[r];switch(m){case o:return{offset:-1,sibling:!0};case a:return{offset:1,sibling:!0};case g:return{offset:-1,sibling:!1};case l:return{offset:1,sibling:!1};default:return null}}function D$(e){for(var t=e;t;){if(t.getAttribute("data-menu-list"))return t;t=t.parentElement}return null}function P$(e,t){for(var n=e||document.activeElement;n;){if(t.has(n))return n;n=n.parentElement}return null}function e1(e,t){var n=T$(e,!0);return n.filter(function(r){return t.has(r)})}function uw(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(!e)return null;var i=e1(e,t),o=i.length,a=i.findIndex(function(l){return n===l});return r<0?a===-1?a=o-1:a-=1:r>0&&(a+=1),a=(a+o)%o,i[a]}var Q2=function(t,n){var r=new Set,i=new Map,o=new Map;return t.forEach(function(a){var l=document.querySelector("[data-menu-id='".concat(UJ(n,a),"']"));l&&(r.add(l),o.set(l,a),i.set(a,l))}),{elements:r,key2element:i,element2key:o}};function O$(e,t,n,r,i,o,a,l,g,u){var d=I.useRef(),C=I.useRef();C.current=t;var f=function(){Jr.cancel(d.current)};return I.useEffect(function(){return function(){f()}},[]),function(m){var b=m.which;if([].concat(cw,[dA,ex,PC,OC]).includes(b)){var p=o(),y=Q2(p,r),S=y,v=S.elements,B=S.key2element,W=S.element2key,J=B.get(t),H=P$(J,v),x=W.get(H),E=z$(e,a(x,!0).length===1,n,b);if(!E&&b!==PC&&b!==OC)return;(cw.includes(b)||[PC,OC].includes(b))&&m.preventDefault();var F=function(_){if(_){var P=_,ee=_.querySelector("a");ee!=null&&ee.getAttribute("href")&&(P=ee);var j=W.get(_);l(j),f(),d.current=Jr(function(){C.current===j&&P.focus()})}};if([PC,OC].includes(b)||E.sibling||!H){var w;!H||e==="inline"?w=i.current:w=D$(H);var V,Y=e1(w,v);b===PC?V=Y[0]:b===OC?V=Y[Y.length-1]:V=uw(w,v,H,E.offset),F(V)}else if(E.inlineTrigger)g(x);else if(E.offset>0)g(x,!0),f(),d.current=Jr(function(){y=Q2(p,r);var U=H.getAttribute("aria-controls"),_=document.getElementById(U),P=uw(_,y.elements);F(P)},5);else if(E.offset<0){var M=a(x,!0),L=M[M.length-2],$=B.get(L);g(L,!1),F($)}}u==null||u(m)}}function _$(e){Promise.resolve().then(e)}var t1="__RC_UTIL_PATH_SPLIT__",dw=function(t){return t.join(t1)},U$=function(t){return t.split(t1)},$2="rc-menu-more";function j$(){var e=I.useState({}),t=xe(e,2),n=t[1],r=I.useRef(new Map),i=I.useRef(new Map),o=I.useState([]),a=xe(o,2),l=a[0],g=a[1],u=I.useRef(0),d=I.useRef(!1),C=function(){d.current||n({})},f=I.useCallback(function(B,W){var J=dw(W);i.current.set(J,B),r.current.set(B,J),u.current+=1;var H=u.current;_$(function(){H===u.current&&C()})},[]),m=I.useCallback(function(B,W){var J=dw(W);i.current.delete(J),r.current.delete(B)},[]),b=I.useCallback(function(B){g(B)},[]),p=I.useCallback(function(B,W){var J=r.current.get(B)||"",H=U$(J);return W&&l.includes(H[0])&&H.unshift($2),H},[l]),y=I.useCallback(function(B,W){return B.filter(function(J){return J!==void 0}).some(function(J){var H=p(J,!0);return H.includes(W)})},[p]),S=function(){var W=Gt(r.current.keys());return l.length&&W.push($2),W},v=I.useCallback(function(B){var W="".concat(r.current.get(B)).concat(t1),J=new Set;return Gt(i.current.keys()).forEach(function(H){H.startsWith(W)&&J.add(i.current.get(H))}),J},[]);return I.useEffect(function(){return function(){d.current=!0}},[]),{registerPath:f,unregisterPath:m,refreshOverflowKeys:b,isSubPathKey:y,getKeyPath:p,getKeys:S,getSubPathKeys:v}}function gf(e){var t=I.useRef(e);t.current=e;var n=I.useCallback(function(){for(var r,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(r=t.current)===null||r===void 0?void 0:r.call.apply(r,[t].concat(o))},[]);return e?n:void 0}var Q$=Math.random().toFixed(5).toString().slice(2),Iw=0;function $$(e){var t=qi(e,{value:e}),n=xe(t,2),r=n[0],i=n[1];return I.useEffect(function(){Iw+=1;var o="".concat(Q$,"-").concat(Iw);i("rc-menu-uuid-".concat(o))},[]),r}function tx(e,t,n,r){var i=I.useContext(as),o=i.activeKey,a=i.onActive,l=i.onInactive,g={active:o===e};return t||(g.onMouseEnter=function(u){n==null||n({key:e,domEvent:u}),a(e)},g.onMouseLeave=function(u){r==null||r({key:e,domEvent:u}),l(e)}),g}function nx(e){var t=I.useContext(as),n=t.mode,r=t.rtl,i=t.inlineIndent;if(n!=="inline")return null;var o=e;return r?{paddingRight:o*i}:{paddingLeft:o*i}}function rx(e){var t=e.icon,n=e.props,r=e.children,i;return t===null||t===!1?null:(typeof t=="function"?i=I.createElement(t,he({},n)):typeof t!="boolean"&&(i=t),i||r||null)}var q$=["item"];function Bp(e){var t=e.item,n=Wn(e,q$);return Object.defineProperty(n,"item",{get:function(){return wo(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),t}}),n}var eq=["title","attribute","elementRef"],tq=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],nq=["active"],rq=function(e){Kg(n,e);var t=Lg(n);function n(){return zi(this,n),t.apply(this,arguments)}return Di(n,[{key:"render",value:function(){var i=this.props,o=i.title,a=i.attribute,l=i.elementRef,g=Wn(i,eq),u=Pi(g,["eventKey","popupClassName","popupOffset","onTitleClick"]);return wo(!a,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),I.createElement(Ls.Item,lt({},a,{title:typeof o=="string"?o:void 0},u,{ref:l}))}}]),n}(I.Component),iq=I.forwardRef(function(e,t){var n=e.style,r=e.className,i=e.eventKey;e.warnKey;var o=e.disabled,a=e.itemIcon,l=e.children,g=e.role,u=e.onMouseEnter,d=e.onMouseLeave,C=e.onClick,f=e.onKeyDown,m=e.onFocus,b=Wn(e,tq),p=jJ(i),y=I.useContext(as),S=y.prefixCls,v=y.onItemClick,B=y.disabled,W=y.overflowDisabled,J=y.itemIcon,H=y.selectedKeys,x=y.onActive,E=I.useContext(qZ),F=E._internalRenderMenuItem,w="".concat(S,"-item"),V=I.useRef(),Y=I.useRef(),M=B||o,L=Ps(t,Y),$=cC(i),U=function(ue){return{key:i,keyPath:Gt($).reverse(),item:V.current,domEvent:ue}},_=a||J,P=tx(i,M,u,d),ee=P.active,j=Wn(P,nq),O=H.includes(i),X=nx($.length),D=function(ue){if(!M){var ve=U(ue);C==null||C(Bp(ve)),v(ve)}},z=function(ue){if(f==null||f(ue),ue.which===Mt.ENTER){var ve=U(ue);C==null||C(Bp(ve)),v(ve)}},Q=function(ue){x(i),m==null||m(ue)},ne={};e.role==="option"&&(ne["aria-selected"]=O);var ce=I.createElement(rq,lt({ref:V,elementRef:L,role:g===null?"none":g||"menuitem",tabIndex:o?null:-1,"data-menu-id":W&&p?null:p},Pi(b,["extra"]),j,ne,{component:"li","aria-disabled":o,style:he(he({},X),n),className:Re(w,fe(fe(fe({},"".concat(w,"-active"),ee),"".concat(w,"-selected"),O),"".concat(w,"-disabled"),M),r),onClick:D,onKeyDown:z,onFocus:Q}),l,I.createElement(rx,{props:he(he({},e),{},{isSelected:O}),icon:_}));return F&&(ce=F(ce,e,{selected:O})),ce});function oq(e,t){var n=e.eventKey,r=bb(),i=cC(n);return I.useEffect(function(){if(r)return r.registerPath(n,i),function(){r.unregisterPath(n,i)}},[i]),r?null:I.createElement(iq,lt({},e,{ref:t}))}const Nm=I.forwardRef(oq);var aq=["className","children"],lq=function(t,n){var r=t.className,i=t.children,o=Wn(t,aq),a=I.useContext(as),l=a.prefixCls,g=a.mode,u=a.rtl;return I.createElement("ul",lt({className:Re(l,u&&"".concat(l,"-rtl"),"".concat(l,"-sub"),"".concat(l,"-").concat(g==="inline"?"inline":"vertical"),r),role:"menu"},o,{"data-menu-list":!0,ref:n}),i)},n1=I.forwardRef(lq);n1.displayName="SubMenuList";function r1(e,t){return el(e).map(function(n,r){if(I.isValidElement(n)){var i,o,a=n.key,l=(i=(o=n.props)===null||o===void 0?void 0:o.eventKey)!==null&&i!==void 0?i:a,g=l==null;g&&(l="tmp_key-".concat([].concat(Gt(t),[r]).join("-")));var u={key:l,eventKey:l};return I.cloneElement(n,u)}return n})}var Oo={adjustX:1,adjustY:1},sq={topLeft:{points:["bl","tl"],overflow:Oo},topRight:{points:["br","tr"],overflow:Oo},bottomLeft:{points:["tl","bl"],overflow:Oo},bottomRight:{points:["tr","br"],overflow:Oo},leftTop:{points:["tr","tl"],overflow:Oo},leftBottom:{points:["br","bl"],overflow:Oo},rightTop:{points:["tl","tr"],overflow:Oo},rightBottom:{points:["bl","br"],overflow:Oo}},gq={topLeft:{points:["bl","tl"],overflow:Oo},topRight:{points:["br","tr"],overflow:Oo},bottomLeft:{points:["tl","bl"],overflow:Oo},bottomRight:{points:["tr","br"],overflow:Oo},rightTop:{points:["tr","tl"],overflow:Oo},rightBottom:{points:["br","bl"],overflow:Oo},leftTop:{points:["tl","tr"],overflow:Oo},leftBottom:{points:["bl","br"],overflow:Oo}};function ix(e,t,n){if(t)return t;if(n)return n[e]||n.other}var cq={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function uq(e){var t=e.prefixCls,n=e.visible,r=e.children,i=e.popup,o=e.popupStyle,a=e.popupClassName,l=e.popupOffset,g=e.disabled,u=e.mode,d=e.onVisibleChange,C=I.useContext(as),f=C.getPopupContainer,m=C.rtl,b=C.subMenuOpenDelay,p=C.subMenuCloseDelay,y=C.builtinPlacements,S=C.triggerSubMenuAction,v=C.forceSubMenuRender,B=C.rootClassName,W=C.motion,J=C.defaultMotions,H=I.useState(!1),x=xe(H,2),E=x[0],F=x[1],w=he(m?he({},gq):he({},sq),y),V=cq[u],Y=ix(u,W,J),M=I.useRef(Y);u!=="inline"&&(M.current=Y);var L=he(he({},M.current),{},{leavedClassName:"".concat(t,"-hidden"),removeOnLeave:!1,motionAppear:!0}),$=I.useRef();return I.useEffect(function(){return $.current=Jr(function(){F(n)}),function(){Jr.cancel($.current)}},[n]),I.createElement(Ab,{prefixCls:t,popupClassName:Re("".concat(t,"-popup"),fe({},"".concat(t,"-rtl"),m),a,B),stretch:u==="horizontal"?"minWidth":null,getPopupContainer:f,builtinPlacements:w,popupPlacement:V,popupVisible:E,popup:i,popupStyle:o,popupAlign:l&&{offset:l},action:g?[]:[S],mouseEnterDelay:b,mouseLeaveDelay:p,onPopupVisibleChange:d,forceRender:v,popupMotion:L,fresh:!0},r)}function dq(e){var t=e.id,n=e.open,r=e.keyPath,i=e.children,o="inline",a=I.useContext(as),l=a.prefixCls,g=a.forceSubMenuRender,u=a.motion,d=a.defaultMotions,C=a.mode,f=I.useRef(!1);f.current=C===o;var m=I.useState(!f.current),b=xe(m,2),p=b[0],y=b[1],S=f.current?n:!1;I.useEffect(function(){f.current&&y(!1)},[C]);var v=he({},ix(o,u,d));r.length>1&&(v.motionAppear=!1);var B=v.onVisibleChanged;return v.onVisibleChanged=function(W){return!f.current&&!W&&y(!0),B==null?void 0:B(W)},p?null:I.createElement(Qf,{mode:o,locked:!f.current},I.createElement(is,lt({visible:S},v,{forceRender:g,removeOnLeave:!1,leavedClassName:"".concat(l,"-hidden")}),function(W){var J=W.className,H=W.style;return I.createElement(n1,{id:t,className:J,style:H},i)}))}var Iq=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","popupStyle","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],Cq=["active"],fq=I.forwardRef(function(e,t){var n=e.style,r=e.className,i=e.title,o=e.eventKey;e.warnKey;var a=e.disabled,l=e.internalPopupClose,g=e.children,u=e.itemIcon,d=e.expandIcon,C=e.popupClassName,f=e.popupOffset,m=e.popupStyle,b=e.onClick,p=e.onMouseEnter,y=e.onMouseLeave,S=e.onTitleClick,v=e.onTitleMouseEnter,B=e.onTitleMouseLeave,W=Wn(e,Iq),J=jJ(o),H=I.useContext(as),x=H.prefixCls,E=H.mode,F=H.openKeys,w=H.disabled,V=H.overflowDisabled,Y=H.activeKey,M=H.selectedKeys,L=H.itemIcon,$=H.expandIcon,U=H.onItemClick,_=H.onOpenChange,P=H.onActive,ee=I.useContext(qZ),j=ee._internalRenderSubMenuItem,O=I.useContext(qJ),X=O.isSubPathKey,D=cC(),z="".concat(x,"-submenu"),Q=w||a,ne=I.useRef(),ce=I.useRef(),se=u??L,ue=d??$,ve=F.includes(o),Ae=!V&&ve,be=X(M,o),me=tx(o,Q,v,B),Ne=me.active,Ie=Wn(me,Cq),ae=I.useState(!1),Ee=xe(ae,2),Fe=Ee[0],ke=Ee[1],ze=function(St){Q||ke(St)},He=function(St){ze(!0),p==null||p({key:o,domEvent:St})},Le=function(St){ze(!1),y==null||y({key:o,domEvent:St})},Ye=I.useMemo(function(){return Ne||(E!=="inline"?Fe||X([Y],o):!1)},[E,Ne,Y,Fe,o,X]),Pe=nx(D.length),$e=function(St){Q||(S==null||S({key:o,domEvent:St}),E==="inline"&&_(o,!ve))},ot=gf(function(st){b==null||b(Bp(st)),U(st)}),Ct=function(St){E!=="inline"&&_(o,St)},pt=function(){P(o)},it=J&&"".concat(J,"-popup"),It=I.createElement("div",lt({role:"menuitem",style:Pe,className:"".concat(z,"-title"),tabIndex:Q?null:-1,ref:ne,title:typeof i=="string"?i:null,"data-menu-id":V&&J?null:J,"aria-expanded":Ae,"aria-haspopup":!0,"aria-controls":it,"aria-disabled":Q,onClick:$e,onFocus:pt},Ie),i,I.createElement(rx,{icon:E!=="horizontal"?ue:void 0,props:he(he({},e),{},{isOpen:Ae,isSubMenu:!0})},I.createElement("i",{className:"".concat(z,"-arrow")}))),_e=I.useRef(E);if(E!=="inline"&&D.length>1?_e.current="vertical":_e.current=E,!V){var Ot=_e.current;It=I.createElement(uq,{mode:Ot,prefixCls:z,visible:!l&&Ae&&E!=="inline",popupClassName:C,popupOffset:f,popupStyle:m,popup:I.createElement(Qf,{mode:Ot==="horizontal"?"vertical":Ot},I.createElement(n1,{id:it,ref:ce},g)),disabled:Q,onVisibleChange:Ct},It)}var Qe=I.createElement(Ls.Item,lt({ref:t,role:"none"},W,{component:"li",style:n,className:Re(z,"".concat(z,"-").concat(E),r,fe(fe(fe(fe({},"".concat(z,"-open"),Ae),"".concat(z,"-active"),Ye),"".concat(z,"-selected"),be),"".concat(z,"-disabled"),Q)),onMouseEnter:He,onMouseLeave:Le}),It,!V&&I.createElement(dq,{id:it,open:Ae,keyPath:D},g));return j&&(Qe=j(Qe,e,{selected:be,active:Ye,open:Ae,disabled:Q})),I.createElement(Qf,{onItemClick:ot,mode:E==="horizontal"?"vertical":E,itemIcon:se,expandIcon:ue},Qe)}),yb=I.forwardRef(function(e,t){var n=e.eventKey,r=e.children,i=cC(n),o=r1(r,i),a=bb();I.useEffect(function(){if(a)return a.registerPath(n,i),function(){a.unregisterPath(n,i)}},[i]);var l;return a?l=o:l=I.createElement(fq,lt({ref:t},e),o),I.createElement($J.Provider,{value:i},l)});function i1(e){var t=e.className,n=e.style,r=I.useContext(as),i=r.prefixCls,o=bb();return o?null:I.createElement("li",{role:"separator",className:Re("".concat(i,"-item-divider"),t),style:n})}var mq=["className","title","eventKey","children"],hq=I.forwardRef(function(e,t){var n=e.className,r=e.title;e.eventKey;var i=e.children,o=Wn(e,mq),a=I.useContext(as),l=a.prefixCls,g="".concat(l,"-item-group");return I.createElement("li",lt({ref:t,role:"presentation"},o,{onClick:function(d){return d.stopPropagation()},className:Re(g,n)}),I.createElement("div",{role:"presentation",className:"".concat(g,"-title"),title:typeof r=="string"?r:void 0},r),I.createElement("ul",{role:"group",className:"".concat(g,"-list")},i))}),o1=I.forwardRef(function(e,t){var n=e.eventKey,r=e.children,i=cC(n),o=r1(r,i),a=bb();return a?o:I.createElement(hq,lt({ref:t},Pi(e,["warnKey"])),o)}),Aq=["label","children","key","type","extra"];function q2(e,t,n){var r=t.item,i=t.group,o=t.submenu,a=t.divider;return(e||[]).map(function(l,g){if(l&&wt(l)==="object"){var u=l,d=u.label,C=u.children,f=u.key,m=u.type,b=u.extra,p=Wn(u,Aq),y=f??"tmp-".concat(g);return C||m==="group"?m==="group"?I.createElement(i,lt({key:y},p,{title:d}),q2(C,t,n)):I.createElement(o,lt({key:y},p,{title:d}),q2(C,t,n)):m==="divider"?I.createElement(a,lt({key:y},p)):I.createElement(r,lt({key:y},p,{extra:b}),d,(!!b||b===0)&&I.createElement("span",{className:"".concat(n,"-item-extra")},b))}return null}).filter(function(l){return l})}function Cw(e,t,n,r,i){var o=e,a=he({divider:i1,item:Nm,group:o1,submenu:yb},r);return t&&(o=q2(t,a,i)),r1(o,n)}var pq=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem","_internalComponents"],Ju=[],bq=I.forwardRef(function(e,t){var n,r=e,i=r.prefixCls,o=i===void 0?"rc-menu":i,a=r.rootClassName,l=r.style,g=r.className,u=r.tabIndex,d=u===void 0?0:u,C=r.items,f=r.children,m=r.direction,b=r.id,p=r.mode,y=p===void 0?"vertical":p,S=r.inlineCollapsed,v=r.disabled,B=r.disabledOverflow,W=r.subMenuOpenDelay,J=W===void 0?.1:W,H=r.subMenuCloseDelay,x=H===void 0?.1:H,E=r.forceSubMenuRender,F=r.defaultOpenKeys,w=r.openKeys,V=r.activeKey,Y=r.defaultActiveFirst,M=r.selectable,L=M===void 0?!0:M,$=r.multiple,U=$===void 0?!1:$,_=r.defaultSelectedKeys,P=r.selectedKeys,ee=r.onSelect,j=r.onDeselect,O=r.inlineIndent,X=O===void 0?24:O,D=r.motion,z=r.defaultMotions,Q=r.triggerSubMenuAction,ne=Q===void 0?"hover":Q,ce=r.builtinPlacements,se=r.itemIcon,ue=r.expandIcon,ve=r.overflowedIndicator,Ae=ve===void 0?"...":ve,be=r.overflowedIndicatorPopupClassName,me=r.getPopupContainer,Ne=r.onClick,Ie=r.onOpenChange,ae=r.onKeyDown;r.openAnimation,r.openTransitionName;var Ee=r._internalRenderMenuItem,Fe=r._internalRenderSubMenuItem,ke=r._internalComponents,ze=Wn(r,pq),He=I.useMemo(function(){return[Cw(f,C,Ju,ke,o),Cw(f,C,Ju,{},o)]},[f,C,ke]),Le=xe(He,2),Ye=Le[0],Pe=Le[1],$e=I.useState(!1),ot=xe($e,2),Ct=ot[0],pt=ot[1],it=I.useRef(),It=$$(b),_e=m==="rtl",Ot=qi(F,{value:w,postState:function(zt){return zt||Ju}}),Qe=xe(Ot,2),st=Qe[0],St=Qe[1],dt=function(zt){var Nt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;function Kn(){St(zt),Ie==null||Ie(zt)}Nt?Dc.flushSync(Kn):Kn()},Wt=I.useState(st),Et=xe(Wt,2),hn=Et[0],mn=Et[1],Xn=I.useRef(!1),Mn=I.useMemo(function(){return(y==="inline"||y==="vertical")&&S?["vertical",S]:[y,!1]},[y,S]),In=xe(Mn,2),Jt=In[0],jt=In[1],ln=Jt==="inline",Vt=I.useState(Jt),Rt=xe(Vt,2),yt=Rt[0],ht=Rt[1],sn=I.useState(jt),ut=xe(sn,2),ct=ut[0],vt=ut[1];I.useEffect(function(){ht(Jt),vt(jt),Xn.current&&(ln?St(hn):dt(Ju))},[Jt,jt]);var Bt=I.useState(0),kt=xe(Bt,2),Tt=kt[0],Jn=kt[1],cn=Tt>=Ye.length-1||yt!=="horizontal"||B;I.useEffect(function(){ln&&mn(st)},[st]),I.useEffect(function(){return Xn.current=!0,function(){Xn.current=!1}},[]);var yn=j$(),qt=yn.registerPath,Vn=yn.unregisterPath,En=yn.refreshOverflowKeys,Dn=yn.isSubPathKey,ar=yn.getKeyPath,Ln=yn.getKeys,Pn=yn.getSubPathKeys,At=I.useMemo(function(){return{registerPath:qt,unregisterPath:Vn}},[qt,Vn]),Ht=I.useMemo(function(){return{isSubPathKey:Dn}},[Dn]);I.useEffect(function(){En(cn?Ju:Ye.slice(Tt+1).map(function(Gn){return Gn.key}))},[Tt,cn]);var Yt=qi(V||Y&&((n=Ye[0])===null||n===void 0?void 0:n.key),{value:V}),at=xe(Yt,2),Qt=at[0],An=at[1],Tn=gf(function(Gn){An(Gn)}),tr=gf(function(){An(void 0)});I.useImperativeHandle(t,function(){return{list:it.current,focus:function(zt){var Nt,Kn=Ln(),zn=Q2(Kn,It),nr=zn.elements,rr=zn.key2element,Bi=zn.element2key,Pr=e1(it.current,nr),Sn=Qt??(Pr[0]?Bi.get(Pr[0]):(Nt=Ye.find(function(Fi){return!Fi.props.disabled}))===null||Nt===void 0?void 0:Nt.key),jr=rr.get(Sn);if(Sn&&jr){var di;jr==null||(di=jr.focus)===null||di===void 0||di.call(jr,zt)}}}});var Rr=qi(_||[],{value:P,postState:function(zt){return Array.isArray(zt)?zt:zt==null?Ju:[zt]}}),Kt=xe(Rr,2),en=Kt[0],gn=Kt[1],kr=function(zt){if(L){var Nt=zt.key,Kn=en.includes(Nt),zn;U?Kn?zn=en.filter(function(rr){return rr!==Nt}):zn=[].concat(Gt(en),[Nt]):zn=[Nt],gn(zn);var nr=he(he({},zt),{},{selectedKeys:zn});Kn?j==null||j(nr):ee==null||ee(nr)}!U&&st.length&&yt!=="inline"&&dt(Ju)},Ar=gf(function(Gn){Ne==null||Ne(Bp(Gn)),kr(Gn)}),Fn=gf(function(Gn,zt){var Nt=st.filter(function(zn){return zn!==Gn});if(zt)Nt.push(Gn);else if(yt!=="inline"){var Kn=Pn(Gn);Nt=Nt.filter(function(zn){return!Kn.has(zn)})}Lf(st,Nt,!0)||dt(Nt,!0)}),ri=function(zt,Nt){var Kn=Nt??!st.includes(zt);Fn(zt,Kn)},Ao=O$(yt,Qt,_e,It,it,Ln,ar,An,ri,ae);I.useEffect(function(){pt(!0)},[]);var Ei=I.useMemo(function(){return{_internalRenderMenuItem:Ee,_internalRenderSubMenuItem:Fe}},[Ee,Fe]),Ur=yt!=="horizontal"||B?Ye:Ye.map(function(Gn,zt){return I.createElement(Qf,{key:Gn.key,overflowDisabled:zt>Tt},Gn)}),to=I.createElement(Ls,lt({id:b,ref:it,prefixCls:"".concat(o,"-overflow"),component:"ul",itemComponent:Nm,className:Re(o,"".concat(o,"-root"),"".concat(o,"-").concat(yt),g,fe(fe({},"".concat(o,"-inline-collapsed"),ct),"".concat(o,"-rtl"),_e),a),dir:m,style:l,role:"menu",tabIndex:d,data:Ur,renderRawItem:function(zt){return zt},renderRawRest:function(zt){var Nt=zt.length,Kn=Nt?Ye.slice(-Nt):null;return I.createElement(yb,{eventKey:$2,title:Ae,disabled:cn,internalPopupClose:Nt===0,popupClassName:be},Kn)},maxCount:yt!=="horizontal"||B?Ls.INVALIDATE:Ls.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(zt){Jn(zt)},onKeyDown:Ao},ze));return I.createElement(qZ.Provider,{value:Ei},I.createElement(_J.Provider,{value:It},I.createElement(Qf,{prefixCls:o,rootClassName:a,mode:yt,openKeys:st,rtl:_e,disabled:v,motion:Ct?D:null,defaultMotions:Ct?z:null,activeKey:Qt,onActive:Tn,onInactive:tr,selectedKeys:en,inlineIndent:X,subMenuOpenDelay:J,subMenuCloseDelay:x,forceSubMenuRender:E,builtinPlacements:ce,triggerSubMenuAction:ne,getPopupContainer:me,itemIcon:se,expandIcon:ue,onItemClick:Ar,onOpenChange:Fn},I.createElement(qJ.Provider,{value:Ht},to),I.createElement("div",{style:{display:"none"},"aria-hidden":!0},I.createElement(QJ.Provider,{value:At},Pe)))))}),uC=bq;uC.Item=Nm;uC.SubMenu=yb;uC.ItemGroup=o1;uC.Divider=i1;var yq={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"bars",theme:"outlined"},vq=function(t,n){return I.createElement(er,lt({},t,{ref:n,icon:yq}))},Sq=I.forwardRef(vq),Zq={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 000 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}}]},name:"left",theme:"outlined"},Gq=function(t,n){return I.createElement(er,lt({},t,{ref:n,icon:Zq}))},Rp=I.forwardRef(Gq);const ox=I.createContext({siderHook:{addSider:()=>null,removeSider:()=>null}}),Bq=e=>{const{antCls:t,componentCls:n,colorText:r,footerBg:i,headerHeight:o,headerPadding:a,headerColor:l,footerPadding:g,fontSize:u,bodyBg:d,headerBg:C}=e;return{[n]:{display:"flex",flex:"auto",flexDirection:"column",minHeight:0,background:d,"&, *":{boxSizing:"border-box"},[`&${n}-has-sider`]:{flexDirection:"row",[`> ${n}, > ${n}-content`]:{width:0}},[`${n}-header, &${n}-footer`]:{flex:"0 0 auto"},"&-rtl":{direction:"rtl"}},[`${n}-header`]:{height:o,padding:a,color:l,lineHeight:Ve(o),background:C,[`${t}-menu`]:{lineHeight:"inherit"}},[`${n}-footer`]:{padding:g,color:r,fontSize:u,background:i},[`${n}-content`]:{flex:"auto",color:r,minHeight:0}}},ax=e=>{const{colorBgLayout:t,controlHeight:n,controlHeightLG:r,colorText:i,controlHeightSM:o,marginXXS:a,colorTextLightSolid:l,colorBgContainer:g}=e,u=r*1.25;return{colorBgHeader:"#001529",colorBgBody:t,colorBgTrigger:"#002140",bodyBg:t,headerBg:"#001529",headerHeight:n*2,headerPadding:`0 ${u}px`,headerColor:i,footerPadding:`${o}px ${u}px`,footerBg:t,siderBg:"#001529",triggerHeight:r+a*2,triggerBg:"#002140",triggerColor:l,zeroTriggerWidth:r,zeroTriggerHeight:r,lightSiderBg:g,lightTriggerBg:g,lightTriggerColor:i}},lx=[["colorBgBody","bodyBg"],["colorBgHeader","headerBg"],["colorBgTrigger","triggerBg"]],sx=Gi("Layout",e=>[Bq(e)],ax,{deprecatedTokens:lx}),Rq=e=>{const{componentCls:t,siderBg:n,motionDurationMid:r,motionDurationSlow:i,antCls:o,triggerHeight:a,triggerColor:l,triggerBg:g,headerHeight:u,zeroTriggerWidth:d,zeroTriggerHeight:C,borderRadiusLG:f,lightSiderBg:m,lightTriggerColor:b,lightTriggerBg:p,bodyBg:y}=e;return{[t]:{position:"relative",minWidth:0,background:n,transition:`all ${r}, background 0s`,"&-has-trigger":{paddingBottom:a},"&-right":{order:1},[`${t}-children`]:{height:"100%",marginTop:-.1,paddingTop:.1,[`${o}-menu${o}-menu-inline-collapsed`]:{width:"auto"}},[`${t}-trigger`]:{position:"fixed",bottom:0,zIndex:1,height:a,color:l,lineHeight:Ve(a),textAlign:"center",background:g,cursor:"pointer",transition:`all ${r}`},[`${t}-zero-width`]:{"> *":{overflow:"hidden"},"&-trigger":{position:"absolute",top:u,insetInlineEnd:e.calc(d).mul(-1).equal(),zIndex:1,width:d,height:C,color:l,fontSize:e.fontSizeXL,display:"flex",alignItems:"center",justifyContent:"center",background:n,borderRadius:`0 ${Ve(f)} ${Ve(f)} 0`,cursor:"pointer",transition:`background ${i} ease`,"&::after":{position:"absolute",inset:0,background:"transparent",transition:`all ${i}`,content:'""'},"&:hover::after":{background:"rgba(255, 255, 255, 0.2)"},"&-right":{insetInlineStart:e.calc(d).mul(-1).equal(),borderRadius:`${Ve(f)} 0 0 ${Ve(f)}`}}},"&-light":{background:m,[`${t}-trigger`]:{color:b,background:p},[`${t}-zero-width-trigger`]:{color:b,background:p,border:`1px solid ${y}`,borderInlineStart:0}}}}},wq=Gi(["Layout","Sider"],e=>[Rq(e)],ax,{deprecatedTokens:lx});var Wq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const fw={xs:"479.98px",sm:"575.98px",md:"767.98px",lg:"991.98px",xl:"1199.98px",xxl:"1599.98px"},Vq=e=>!Number.isNaN(Number.parseFloat(e))&&isFinite(e),vb=I.createContext({}),kq=(()=>{let e=0;return function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return e+=1,`${t}${e}`}})(),gx=I.forwardRef((e,t)=>{const{prefixCls:n,className:r,trigger:i,children:o,defaultCollapsed:a=!1,theme:l="dark",style:g={},collapsible:u=!1,reverseArrow:d=!1,width:C=200,collapsedWidth:f=80,zeroWidthTriggerStyle:m,breakpoint:b,onCollapse:p,onBreakpoint:y}=e,S=Wq(e,["prefixCls","className","trigger","children","defaultCollapsed","theme","style","collapsible","reverseArrow","width","collapsedWidth","zeroWidthTriggerStyle","breakpoint","onCollapse","onBreakpoint"]),{siderHook:v}=I.useContext(ox),[B,W]=I.useState("collapsed"in e?e.collapsed:a),[J,H]=I.useState(!1);I.useEffect(()=>{"collapsed"in e&&W(e.collapsed)},[e.collapsed]);const x=(se,ue)=>{"collapsed"in e||W(se),p==null||p(se,ue)},{getPrefixCls:E,direction:F}=I.useContext(dn),w=E("layout-sider",n),[V,Y,M]=wq(w),L=I.useRef(null);L.current=se=>{H(se.matches),y==null||y(se.matches),B!==se.matches&&x(se.matches,"responsive")},I.useEffect(()=>{function se(ve){return L.current(ve)}let ue;if(typeof window<"u"){const{matchMedia:ve}=window;if(ve&&b&&b in fw){ue=ve(`screen and (max-width: ${fw[b]})`);try{ue.addEventListener("change",se)}catch{ue.addListener(se)}se(ue)}}return()=>{try{ue==null||ue.removeEventListener("change",se)}catch{ue==null||ue.removeListener(se)}}},[b]),I.useEffect(()=>{const se=kq("ant-sider-");return v.addSider(se),()=>v.removeSider(se)},[]);const $=()=>{x(!B,"clickTrigger")},U=Pi(S,["collapsed"]),_=B?f:C,P=Vq(_)?`${_}px`:String(_),ee=parseFloat(String(f||0))===0?I.createElement("span",{onClick:$,className:Re(`${w}-zero-width-trigger`,`${w}-zero-width-trigger-${d?"right":"left"}`),style:m},i||I.createElement(Sq,null)):null,j=F==="rtl"==!d,D={expanded:j?I.createElement(Uf,null):I.createElement(Rp,null),collapsed:j?I.createElement(Rp,null):I.createElement(Uf,null)}[B?"collapsed":"expanded"],z=i!==null?ee||I.createElement("div",{className:`${w}-trigger`,onClick:$,style:{width:P}},i||D):null,Q=Object.assign(Object.assign({},g),{flex:`0 0 ${P}`,maxWidth:P,minWidth:P,width:P}),ne=Re(w,`${w}-${l}`,{[`${w}-collapsed`]:!!B,[`${w}-has-trigger`]:u&&i!==null&&!ee,[`${w}-below`]:!!J,[`${w}-zero-width`]:parseFloat(P)===0},r,Y,M),ce=I.useMemo(()=>({siderCollapsed:B}),[B]);return V(I.createElement(vb.Provider,{value:ce},I.createElement("aside",Object.assign({className:ne},U,{style:Q,ref:t}),I.createElement("div",{className:`${w}-children`},o),u||J&&ee?z:null)))});var Nq={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"},Xq=function(t,n){return I.createElement(er,lt({},t,{ref:n,icon:Nq}))},a1=I.forwardRef(Xq);const wp=I.createContext({prefixCls:"",firstLevel:!0,inlineCollapsed:!1});var Jq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const cx=e=>{const{prefixCls:t,className:n,dashed:r}=e,i=Jq(e,["prefixCls","className","dashed"]),{getPrefixCls:o}=I.useContext(dn),a=o("menu",t),l=Re({[`${a}-item-divider-dashed`]:!!r},n);return I.createElement(i1,Object.assign({className:l},i))},ux=e=>{var t;const{className:n,children:r,icon:i,title:o,danger:a,extra:l}=e,{prefixCls:g,firstLevel:u,direction:d,disableMenuItemTitleTooltip:C,inlineCollapsed:f}=I.useContext(wp),m=B=>{const W=r==null?void 0:r[0],J=I.createElement("span",{className:Re(`${g}-title-content`,{[`${g}-title-content-with-extra`]:!!l||l===0})},r);return(!i||I.isValidElement(r)&&r.type==="span")&&r&&B&&u&&typeof W=="string"?I.createElement("div",{className:`${g}-inline-collapsed-noicon`},W.charAt(0)):J},{siderCollapsed:b}=I.useContext(vb);let p=o;typeof o>"u"?p=u?r:"":o===!1&&(p="");const y={title:p};!b&&!f&&(y.title=null,y.open=!1);const S=el(r).length;let v=I.createElement(Nm,Object.assign({},Pi(e,["title","icon","danger"]),{className:Re({[`${g}-item-danger`]:a,[`${g}-item-only-child`]:(i?S+1:S)===1},n),title:typeof o=="string"?o:void 0}),os(i,{className:Re(I.isValidElement(i)?(t=i.props)===null||t===void 0?void 0:t.className:"",`${g}-item-icon`)}),m(f));return C||(v=I.createElement(km,Object.assign({},y,{placement:d==="rtl"?"left":"right",classNames:{root:`${g}-inline-collapsed-tooltip`}}),v)),v};var xq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Wp=I.createContext(null),Hq=I.forwardRef((e,t)=>{const{children:n}=e,r=xq(e,["children"]),i=I.useContext(Wp),o=I.useMemo(()=>Object.assign(Object.assign({},i),r),[i,r.prefixCls,r.mode,r.selectable,r.rootClassName]),a=Lz(n),l=Ps(t,a?cd(n):null);return I.createElement(Wp.Provider,{value:o},I.createElement(zI,{space:!0},a?I.cloneElement(n,{ref:l}):n))}),Yq=e=>{const{componentCls:t,motionDurationSlow:n,horizontalLineHeight:r,colorSplit:i,lineWidth:o,lineType:a,itemPaddingInline:l}=e;return{[`${t}-horizontal`]:{lineHeight:r,border:0,borderBottom:`${Ve(o)} ${a} ${i}`,boxShadow:"none","&::after":{display:"block",clear:"both",height:0,content:'"\\20"'},[`${t}-item, ${t}-submenu`]:{position:"relative",display:"inline-block",verticalAlign:"bottom",paddingInline:l},[`> ${t}-item:hover,
        > ${t}-item-active,
        > ${t}-submenu ${t}-submenu-title:hover`]:{backgroundColor:"transparent"},[`${t}-item, ${t}-submenu-title`]:{transition:[`border-color ${n}`,`background ${n}`].join(",")},[`${t}-submenu-arrow`]:{display:"none"}}}},Eq=e=>{let{componentCls:t,menuArrowOffset:n,calc:r}=e;return{[`${t}-rtl`]:{direction:"rtl"},[`${t}-submenu-rtl`]:{transformOrigin:"100% 0"},[`${t}-rtl${t}-vertical,
    ${t}-submenu-rtl ${t}-vertical`]:{[`${t}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateY(${Ve(r(n).mul(-1).equal())})`},"&::after":{transform:`rotate(45deg) translateY(${Ve(n)})`}}}}},mw=e=>Object.assign({},MI(e)),hw=(e,t)=>{const{componentCls:n,itemColor:r,itemSelectedColor:i,subMenuItemSelectedColor:o,groupTitleColor:a,itemBg:l,subMenuItemBg:g,itemSelectedBg:u,activeBarHeight:d,activeBarWidth:C,activeBarBorderWidth:f,motionDurationSlow:m,motionEaseInOut:b,motionEaseOut:p,itemPaddingInline:y,motionDurationMid:S,itemHoverColor:v,lineType:B,colorSplit:W,itemDisabledColor:J,dangerItemColor:H,dangerItemHoverColor:x,dangerItemSelectedColor:E,dangerItemActiveBg:F,dangerItemSelectedBg:w,popupBg:V,itemHoverBg:Y,itemActiveBg:M,menuSubMenuBg:L,horizontalItemSelectedColor:$,horizontalItemSelectedBg:U,horizontalItemBorderRadius:_,horizontalItemHoverBg:P}=e;return{[`${n}-${t}, ${n}-${t} > ${n}`]:{color:r,background:l,[`&${n}-root:focus-visible`]:Object.assign({},mw(e)),[`${n}-item`]:{"&-group-title, &-extra":{color:a}},[`${n}-submenu-selected > ${n}-submenu-title`]:{color:o},[`${n}-item, ${n}-submenu-title`]:{color:r,[`&:not(${n}-item-disabled):focus-visible`]:Object.assign({},mw(e))},[`${n}-item-disabled, ${n}-submenu-disabled`]:{color:`${J} !important`},[`${n}-item:not(${n}-item-selected):not(${n}-submenu-selected)`]:{[`&:hover, > ${n}-submenu-title:hover`]:{color:v}},[`&:not(${n}-horizontal)`]:{[`${n}-item:not(${n}-item-selected)`]:{"&:hover":{backgroundColor:Y},"&:active":{backgroundColor:M}},[`${n}-submenu-title`]:{"&:hover":{backgroundColor:Y},"&:active":{backgroundColor:M}}},[`${n}-item-danger`]:{color:H,[`&${n}-item:hover`]:{[`&:not(${n}-item-selected):not(${n}-submenu-selected)`]:{color:x}},[`&${n}-item:active`]:{background:F}},[`${n}-item a`]:{"&, &:hover":{color:"inherit"}},[`${n}-item-selected`]:{color:i,[`&${n}-item-danger`]:{color:E},"a, a:hover":{color:"inherit"}},[`& ${n}-item-selected`]:{backgroundColor:u,[`&${n}-item-danger`]:{backgroundColor:w}},[`&${n}-submenu > ${n}`]:{backgroundColor:L},[`&${n}-popup > ${n}`]:{backgroundColor:V},[`&${n}-submenu-popup > ${n}`]:{backgroundColor:V},[`&${n}-horizontal`]:Object.assign(Object.assign({},t==="dark"?{borderBottom:0}:{}),{[`> ${n}-item, > ${n}-submenu`]:{top:f,marginTop:e.calc(f).mul(-1).equal(),marginBottom:0,borderRadius:_,"&::after":{position:"absolute",insetInline:y,bottom:0,borderBottom:`${Ve(d)} solid transparent`,transition:`border-color ${m} ${b}`,content:'""'},"&:hover, &-active, &-open":{background:P,"&::after":{borderBottomWidth:d,borderBottomColor:$}},"&-selected":{color:$,backgroundColor:U,"&:hover":{backgroundColor:U},"&::after":{borderBottomWidth:d,borderBottomColor:$}}}}),[`&${n}-root`]:{[`&${n}-inline, &${n}-vertical`]:{borderInlineEnd:`${Ve(f)} ${B} ${W}`}},[`&${n}-inline`]:{[`${n}-sub${n}-inline`]:{background:g},[`${n}-item`]:{position:"relative","&::after":{position:"absolute",insetBlock:0,insetInlineEnd:0,borderInlineEnd:`${Ve(C)} solid ${i}`,transform:"scaleY(0.0001)",opacity:0,transition:[`transform ${S} ${p}`,`opacity ${S} ${p}`].join(","),content:'""'},[`&${n}-item-danger`]:{"&::after":{borderInlineEndColor:E}}},[`${n}-selected, ${n}-item-selected`]:{"&::after":{transform:"scaleY(1)",opacity:1,transition:[`transform ${S} ${b}`,`opacity ${S} ${b}`].join(",")}}}}}},Aw=e=>{const{componentCls:t,itemHeight:n,itemMarginInline:r,padding:i,menuArrowSize:o,marginXS:a,itemMarginBlock:l,itemWidth:g,itemPaddingInline:u}=e,d=e.calc(o).add(i).add(a).equal();return{[`${t}-item`]:{position:"relative",overflow:"hidden"},[`${t}-item, ${t}-submenu-title`]:{height:n,lineHeight:Ve(n),paddingInline:u,overflow:"hidden",textOverflow:"ellipsis",marginInline:r,marginBlock:l,width:g},[`> ${t}-item,
            > ${t}-submenu > ${t}-submenu-title`]:{height:n,lineHeight:Ve(n)},[`${t}-item-group-list ${t}-submenu-title,
            ${t}-submenu-title`]:{paddingInlineEnd:d}}},Fq=e=>{const{componentCls:t,iconCls:n,itemHeight:r,colorTextLightSolid:i,dropdownWidth:o,controlHeightLG:a,motionEaseOut:l,paddingXL:g,itemMarginInline:u,fontSizeLG:d,motionDurationFast:C,motionDurationSlow:f,paddingXS:m,boxShadowSecondary:b,collapsedWidth:p,collapsedIconSize:y}=e,S={height:r,lineHeight:Ve(r),listStylePosition:"inside",listStyleType:"disc"};return[{[t]:{"&-inline, &-vertical":Object.assign({[`&${t}-root`]:{boxShadow:"none"}},Aw(e))},[`${t}-submenu-popup`]:{[`${t}-vertical`]:Object.assign(Object.assign({},Aw(e)),{boxShadow:b})}},{[`${t}-submenu-popup ${t}-vertical${t}-sub`]:{minWidth:o,maxHeight:`calc(100vh - ${Ve(e.calc(a).mul(2.5).equal())})`,padding:"0",overflow:"hidden",borderInlineEnd:0,"&:not([class*='-active'])":{overflowX:"hidden",overflowY:"auto"}}},{[`${t}-inline`]:{width:"100%",[`&${t}-root`]:{[`${t}-item, ${t}-submenu-title`]:{display:"flex",alignItems:"center",transition:[`border-color ${f}`,`background ${f}`,`padding ${C} ${l}`].join(","),[`> ${t}-title-content`]:{flex:"auto",minWidth:0,overflow:"hidden",textOverflow:"ellipsis"},"> *":{flex:"none"}}},[`${t}-sub${t}-inline`]:{padding:0,border:0,borderRadius:0,boxShadow:"none",[`& > ${t}-submenu > ${t}-submenu-title`]:S,[`& ${t}-item-group-title`]:{paddingInlineStart:g}},[`${t}-item`]:S}},{[`${t}-inline-collapsed`]:{width:p,[`&${t}-root`]:{[`${t}-item, ${t}-submenu ${t}-submenu-title`]:{[`> ${t}-inline-collapsed-noicon`]:{fontSize:d,textAlign:"center"}}},[`> ${t}-item,
          > ${t}-item-group > ${t}-item-group-list > ${t}-item,
          > ${t}-item-group > ${t}-item-group-list > ${t}-submenu > ${t}-submenu-title,
          > ${t}-submenu > ${t}-submenu-title`]:{insetInlineStart:0,paddingInline:`calc(50% - ${Ve(e.calc(y).div(2).equal())} - ${Ve(u)})`,textOverflow:"clip",[`
            ${t}-submenu-arrow,
            ${t}-submenu-expand-icon
          `]:{opacity:0},[`${t}-item-icon, ${n}`]:{margin:0,fontSize:y,lineHeight:Ve(r),"+ span":{display:"inline-block",opacity:0}}},[`${t}-item-icon, ${n}`]:{display:"inline-block"},"&-tooltip":{pointerEvents:"none",[`${t}-item-icon, ${n}`]:{display:"none"},"a, a:hover":{color:i}},[`${t}-item-group-title`]:Object.assign(Object.assign({},rd),{paddingInline:m})}}]},pw=e=>{const{componentCls:t,motionDurationSlow:n,motionDurationMid:r,motionEaseInOut:i,motionEaseOut:o,iconCls:a,iconSize:l,iconMarginInlineEnd:g}=e;return{[`${t}-item, ${t}-submenu-title`]:{position:"relative",display:"block",margin:0,whiteSpace:"nowrap",cursor:"pointer",transition:[`border-color ${n}`,`background ${n}`,`padding calc(${n} + 0.1s) ${i}`].join(","),[`${t}-item-icon, ${a}`]:{minWidth:l,fontSize:l,transition:[`font-size ${r} ${o}`,`margin ${n} ${i}`,`color ${n}`].join(","),"+ span":{marginInlineStart:g,opacity:1,transition:[`opacity ${n} ${i}`,`margin ${n}`,`color ${n}`].join(",")}},[`${t}-item-icon`]:Object.assign({},vm()),[`&${t}-item-only-child`]:{[`> ${a}, > ${t}-item-icon`]:{marginInlineEnd:0}}},[`${t}-item-disabled, ${t}-submenu-disabled`]:{background:"none !important",cursor:"not-allowed","&::after":{borderColor:"transparent !important"},a:{color:"inherit !important",cursor:"not-allowed",pointerEvents:"none"},[`> ${t}-submenu-title`]:{color:"inherit !important",cursor:"not-allowed"}}}},bw=e=>{const{componentCls:t,motionDurationSlow:n,motionEaseInOut:r,borderRadius:i,menuArrowSize:o,menuArrowOffset:a}=e;return{[`${t}-submenu`]:{"&-expand-icon, &-arrow":{position:"absolute",top:"50%",insetInlineEnd:e.margin,width:o,color:"currentcolor",transform:"translateY(-50%)",transition:`transform ${n} ${r}, opacity ${n}`},"&-arrow":{"&::before, &::after":{position:"absolute",width:e.calc(o).mul(.6).equal(),height:e.calc(o).mul(.15).equal(),backgroundColor:"currentcolor",borderRadius:i,transition:[`background ${n} ${r}`,`transform ${n} ${r}`,`top ${n} ${r}`,`color ${n} ${r}`].join(","),content:'""'},"&::before":{transform:`rotate(45deg) translateY(${Ve(e.calc(a).mul(-1).equal())})`},"&::after":{transform:`rotate(-45deg) translateY(${Ve(a)})`}}}}},Kq=e=>{const{antCls:t,componentCls:n,fontSize:r,motionDurationSlow:i,motionDurationMid:o,motionEaseInOut:a,paddingXS:l,padding:g,colorSplit:u,lineWidth:d,zIndexPopup:C,borderRadiusLG:f,subMenuItemBorderRadius:m,menuArrowSize:b,menuArrowOffset:p,lineType:y,groupTitleLineHeight:S,groupTitleFontSize:v}=e;return[{"":{[n]:Object.assign(Object.assign({},Uc()),{"&-hidden":{display:"none"}})},[`${n}-submenu-hidden`]:{display:"none"}},{[n]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ca(e)),Uc()),{marginBottom:0,paddingInlineStart:0,fontSize:r,lineHeight:0,listStyle:"none",outline:"none",transition:`width ${i} cubic-bezier(0.2, 0, 0, 1) 0s`,"ul, ol":{margin:0,padding:0,listStyle:"none"},"&-overflow":{display:"flex",[`${n}-item`]:{flex:"none"}},[`${n}-item, ${n}-submenu, ${n}-submenu-title`]:{borderRadius:e.itemBorderRadius},[`${n}-item-group-title`]:{padding:`${Ve(l)} ${Ve(g)}`,fontSize:v,lineHeight:S,transition:`all ${i}`},[`&-horizontal ${n}-submenu`]:{transition:[`border-color ${i} ${a}`,`background ${i} ${a}`].join(",")},[`${n}-submenu, ${n}-submenu-inline`]:{transition:[`border-color ${i} ${a}`,`background ${i} ${a}`,`padding ${o} ${a}`].join(",")},[`${n}-submenu ${n}-sub`]:{cursor:"initial",transition:[`background ${i} ${a}`,`padding ${i} ${a}`].join(",")},[`${n}-title-content`]:{transition:`color ${i}`,"&-with-extra":{display:"inline-flex",alignItems:"center",width:"100%"},[`> ${t}-typography-ellipsis-single-line`]:{display:"inline",verticalAlign:"unset"},[`${n}-item-extra`]:{marginInlineStart:"auto",paddingInlineStart:e.padding}},[`${n}-item a`]:{"&::before":{position:"absolute",inset:0,backgroundColor:"transparent",content:'""'}},[`${n}-item-divider`]:{overflow:"hidden",lineHeight:0,borderColor:u,borderStyle:y,borderWidth:0,borderTopWidth:d,marginBlock:d,padding:0,"&-dashed":{borderStyle:"dashed"}}}),pw(e)),{[`${n}-item-group`]:{[`${n}-item-group-list`]:{margin:0,padding:0,[`${n}-item, ${n}-submenu-title`]:{paddingInline:`${Ve(e.calc(r).mul(2).equal())} ${Ve(g)}`}}},"&-submenu":{"&-popup":{position:"absolute",zIndex:C,borderRadius:f,boxShadow:"none",transformOrigin:"0 0",[`&${n}-submenu`]:{background:"transparent"},"&::before":{position:"absolute",inset:0,zIndex:-1,width:"100%",height:"100%",opacity:0,content:'""'},[`> ${n}`]:Object.assign(Object.assign(Object.assign({borderRadius:f},pw(e)),bw(e)),{[`${n}-item, ${n}-submenu > ${n}-submenu-title`]:{borderRadius:m},[`${n}-submenu-title::after`]:{transition:`transform ${i} ${a}`}})},"\n          &-placement-leftTop,\n          &-placement-bottomRight,\n          ":{transformOrigin:"100% 0"},"\n          &-placement-leftBottom,\n          &-placement-topRight,\n          ":{transformOrigin:"100% 100%"},"\n          &-placement-rightBottom,\n          &-placement-topLeft,\n          ":{transformOrigin:"0 100%"},"\n          &-placement-bottomLeft,\n          &-placement-rightTop,\n          ":{transformOrigin:"0 0"},"\n          &-placement-leftTop,\n          &-placement-leftBottom\n          ":{paddingInlineEnd:e.paddingXS},"\n          &-placement-rightTop,\n          &-placement-rightBottom\n          ":{paddingInlineStart:e.paddingXS},"\n          &-placement-topRight,\n          &-placement-topLeft\n          ":{paddingBottom:e.paddingXS},"\n          &-placement-bottomRight,\n          &-placement-bottomLeft\n          ":{paddingTop:e.paddingXS}}}),bw(e)),{[`&-inline-collapsed ${n}-submenu-arrow,
        &-inline ${n}-submenu-arrow`]:{"&::before":{transform:`rotate(-45deg) translateX(${Ve(p)})`},"&::after":{transform:`rotate(45deg) translateX(${Ve(e.calc(p).mul(-1).equal())})`}},[`${n}-submenu-open${n}-submenu-inline > ${n}-submenu-title > ${n}-submenu-arrow`]:{transform:`translateY(${Ve(e.calc(b).mul(.2).mul(-1).equal())})`,"&::after":{transform:`rotate(-45deg) translateX(${Ve(e.calc(p).mul(-1).equal())})`},"&::before":{transform:`rotate(45deg) translateX(${Ve(p)})`}}})},{[`${t}-layout-header`]:{[n]:{lineHeight:"inherit"}}}]},Lq=e=>{var t,n,r;const{colorPrimary:i,colorError:o,colorTextDisabled:a,colorErrorBg:l,colorText:g,colorTextDescription:u,colorBgContainer:d,colorFillAlter:C,colorFillContent:f,lineWidth:m,lineWidthBold:b,controlItemBgActive:p,colorBgTextHover:y,controlHeightLG:S,lineHeight:v,colorBgElevated:B,marginXXS:W,padding:J,fontSize:H,controlHeightSM:x,fontSizeLG:E,colorTextLightSolid:F,colorErrorHover:w}=e,V=(t=e.activeBarWidth)!==null&&t!==void 0?t:0,Y=(n=e.activeBarBorderWidth)!==null&&n!==void 0?n:m,M=(r=e.itemMarginInline)!==null&&r!==void 0?r:e.marginXXS,L=new xr(F).setA(.65).toRgbString();return{dropdownWidth:160,zIndexPopup:e.zIndexPopupBase+50,radiusItem:e.borderRadiusLG,itemBorderRadius:e.borderRadiusLG,radiusSubMenuItem:e.borderRadiusSM,subMenuItemBorderRadius:e.borderRadiusSM,colorItemText:g,itemColor:g,colorItemTextHover:g,itemHoverColor:g,colorItemTextHoverHorizontal:i,horizontalItemHoverColor:i,colorGroupTitle:u,groupTitleColor:u,colorItemTextSelected:i,itemSelectedColor:i,subMenuItemSelectedColor:i,colorItemTextSelectedHorizontal:i,horizontalItemSelectedColor:i,colorItemBg:d,itemBg:d,colorItemBgHover:y,itemHoverBg:y,colorItemBgActive:f,itemActiveBg:p,colorSubItemBg:C,subMenuItemBg:C,colorItemBgSelected:p,itemSelectedBg:p,colorItemBgSelectedHorizontal:"transparent",horizontalItemSelectedBg:"transparent",colorActiveBarWidth:0,activeBarWidth:V,colorActiveBarHeight:b,activeBarHeight:b,colorActiveBarBorderSize:m,activeBarBorderWidth:Y,colorItemTextDisabled:a,itemDisabledColor:a,colorDangerItemText:o,dangerItemColor:o,colorDangerItemTextHover:o,dangerItemHoverColor:o,colorDangerItemTextSelected:o,dangerItemSelectedColor:o,colorDangerItemBgActive:l,dangerItemActiveBg:l,colorDangerItemBgSelected:l,dangerItemSelectedBg:l,itemMarginInline:M,horizontalItemBorderRadius:0,horizontalItemHoverBg:"transparent",itemHeight:S,groupTitleLineHeight:v,collapsedWidth:S*2,popupBg:B,itemMarginBlock:W,itemPaddingInline:J,horizontalLineHeight:`${S*1.15}px`,iconSize:H,iconMarginInlineEnd:x-H,collapsedIconSize:E,groupTitleFontSize:H,darkItemDisabledColor:new xr(F).setA(.25).toRgbString(),darkItemColor:L,darkDangerItemColor:o,darkItemBg:"#001529",darkPopupBg:"#001529",darkSubMenuItemBg:"#000c17",darkItemSelectedColor:F,darkItemSelectedBg:i,darkDangerItemSelectedBg:o,darkItemHoverBg:"transparent",darkGroupTitleColor:L,darkItemHoverColor:F,darkDangerItemHoverColor:w,darkDangerItemSelectedColor:F,darkDangerItemActiveBg:o,itemWidth:V?`calc(100% + ${Y}px)`:`calc(100% - ${M*2}px)`}},Mq=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return Gi("Menu",i=>{const{colorBgElevated:o,controlHeightLG:a,fontSize:l,darkItemColor:g,darkDangerItemColor:u,darkItemBg:d,darkSubMenuItemBg:C,darkItemSelectedColor:f,darkItemSelectedBg:m,darkDangerItemSelectedBg:b,darkItemHoverBg:p,darkGroupTitleColor:y,darkItemHoverColor:S,darkItemDisabledColor:v,darkDangerItemHoverColor:B,darkDangerItemSelectedColor:W,darkDangerItemActiveBg:J,popupBg:H,darkPopupBg:x}=i,E=i.calc(l).div(7).mul(5).equal(),F=Br(i,{menuArrowSize:E,menuHorizontalHeight:i.calc(a).mul(1.15).equal(),menuArrowOffset:i.calc(E).mul(.25).equal(),menuSubMenuBg:o,calc:i.calc,popupBg:H}),w=Br(F,{itemColor:g,itemHoverColor:S,groupTitleColor:y,itemSelectedColor:f,itemBg:d,popupBg:x,subMenuItemBg:C,itemActiveBg:"transparent",itemSelectedBg:m,activeBarHeight:0,activeBarBorderWidth:0,itemHoverBg:p,itemDisabledColor:v,dangerItemColor:u,dangerItemHoverColor:B,dangerItemSelectedColor:W,dangerItemActiveBg:J,dangerItemSelectedBg:b,menuSubMenuBg:C,horizontalItemSelectedColor:f,horizontalItemSelectedBg:m});return[Kq(F),Yq(F),Fq(F),hw(F,"light"),hw(w,"dark"),Eq(F),MU(F),jc(F,"slide-up"),jc(F,"slide-down"),sb(F,"zoom-big")]},Lq,{deprecatedTokens:[["colorGroupTitle","groupTitleColor"],["radiusItem","itemBorderRadius"],["radiusSubMenuItem","subMenuItemBorderRadius"],["colorItemText","itemColor"],["colorItemTextHover","itemHoverColor"],["colorItemTextHoverHorizontal","horizontalItemHoverColor"],["colorItemTextSelected","itemSelectedColor"],["colorItemTextSelectedHorizontal","horizontalItemSelectedColor"],["colorItemTextDisabled","itemDisabledColor"],["colorDangerItemText","dangerItemColor"],["colorDangerItemTextHover","dangerItemHoverColor"],["colorDangerItemTextSelected","dangerItemSelectedColor"],["colorDangerItemBgActive","dangerItemActiveBg"],["colorDangerItemBgSelected","dangerItemSelectedBg"],["colorItemBg","itemBg"],["colorItemBgHover","itemHoverBg"],["colorSubItemBg","subMenuItemBg"],["colorItemBgActive","itemActiveBg"],["colorItemBgSelectedHorizontal","horizontalItemSelectedBg"],["colorActiveBarWidth","activeBarWidth"],["colorActiveBarHeight","activeBarHeight"],["colorActiveBarBorderSize","activeBarBorderWidth"],["colorItemBgSelected","itemSelectedBg"]],injectStyle:n,unitless:{groupTitleLineHeight:!0}})(e,t)},dx=e=>{var t;const{popupClassName:n,icon:r,title:i,theme:o}=e,a=I.useContext(wp),{prefixCls:l,inlineCollapsed:g,theme:u}=a,d=cC();let C;if(!r)C=g&&!d.length&&i&&typeof i=="string"?I.createElement("div",{className:`${l}-inline-collapsed-noicon`},i.charAt(0)):I.createElement("span",{className:`${l}-title-content`},i);else{const b=I.isValidElement(i)&&i.type==="span";C=I.createElement(I.Fragment,null,os(r,{className:Re(I.isValidElement(r)?(t=r.props)===null||t===void 0?void 0:t.className:"",`${l}-item-icon`)}),b?i:I.createElement("span",{className:`${l}-title-content`},i))}const f=I.useMemo(()=>Object.assign(Object.assign({},a),{firstLevel:!1}),[a]),[m]=lC("Menu");return I.createElement(wp.Provider,{value:f},I.createElement(yb,Object.assign({},Pi(e,["icon"]),{title:C,popupClassName:Re(l,n,`${l}-${o||u}`),popupStyle:Object.assign({zIndex:m},e.popupStyle)})))};var Tq=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Py(e){return e===null||e===!1}const zq={item:ux,submenu:dx,divider:cx},Dq=I.forwardRef((e,t)=>{var n;const r=I.useContext(Wp),i=r||{},{getPrefixCls:o,getPopupContainer:a,direction:l,menu:g}=I.useContext(dn),u=o(),{prefixCls:d,className:C,style:f,theme:m="light",expandIcon:b,_internalDisableMenuItemTitleTooltip:p,inlineCollapsed:y,siderCollapsed:S,rootClassName:v,mode:B,selectable:W,onClick:J,overflowedIndicatorPopupClassName:H}=e,x=Tq(e,["prefixCls","className","style","theme","expandIcon","_internalDisableMenuItemTitleTooltip","inlineCollapsed","siderCollapsed","rootClassName","mode","selectable","onClick","overflowedIndicatorPopupClassName"]),E=Pi(x,["collapsedWidth"]);(n=i.validator)===null||n===void 0||n.call(i,{mode:B});const F=ui(function(){var X;J==null||J.apply(void 0,arguments),(X=i.onClick)===null||X===void 0||X.call(i)}),w=i.mode||B,V=W??i.selectable,Y=y??S,M={horizontal:{motionName:`${u}-slide-up`},inline:IU(u),other:{motionName:`${u}-zoom-big`}},L=o("menu",d||i.prefixCls),$=gs(L),[U,_,P]=Mq(L,$,!r),ee=Re(`${L}-${m}`,g==null?void 0:g.className,C),j=I.useMemo(()=>{var X,D;if(typeof b=="function"||Py(b))return b||null;if(typeof i.expandIcon=="function"||Py(i.expandIcon))return i.expandIcon||null;if(typeof(g==null?void 0:g.expandIcon)=="function"||Py(g==null?void 0:g.expandIcon))return(g==null?void 0:g.expandIcon)||null;const z=(X=b??(i==null?void 0:i.expandIcon))!==null&&X!==void 0?X:g==null?void 0:g.expandIcon;return os(z,{className:Re(`${L}-submenu-expand-icon`,I.isValidElement(z)?(D=z.props)===null||D===void 0?void 0:D.className:void 0)})},[b,i==null?void 0:i.expandIcon,g==null?void 0:g.expandIcon,L]),O=I.useMemo(()=>({prefixCls:L,inlineCollapsed:Y||!1,direction:l,firstLevel:!0,theme:m,mode:w,disableMenuItemTitleTooltip:p}),[L,Y,l,p,m]);return U(I.createElement(Wp.Provider,{value:null},I.createElement(wp.Provider,{value:O},I.createElement(uC,Object.assign({getPopupContainer:a,overflowedIndicator:I.createElement(a1,null),overflowedIndicatorPopupClassName:Re(L,`${L}-${m}`,H),mode:w,selectable:V,onClick:F},E,{inlineCollapsed:Y,style:Object.assign(Object.assign({},g==null?void 0:g.style),f),className:ee,prefixCls:L,direction:l,defaultMotions:M,expandIcon:j,ref:t,rootClassName:Re(v,_,i.rootClassName,P,$),_internalComponents:zq})))))}),xs=I.forwardRef((e,t)=>{const n=I.useRef(null),r=I.useContext(vb);return I.useImperativeHandle(t,()=>({menu:n.current,focus:i=>{var o;(o=n.current)===null||o===void 0||o.focus(i)}})),I.createElement(Dq,Object.assign({ref:n},e,r))});xs.Item=ux;xs.SubMenu=dx;xs.Divider=cx;xs.ItemGroup=o1;const Pq=e=>{const{componentCls:t,menuCls:n,colorError:r,colorTextLightSolid:i}=e,o=`${n}-item`;return{[`${t}, ${t}-menu-submenu`]:{[`${n} ${o}`]:{[`&${o}-danger:not(${o}-disabled)`]:{color:r,"&:hover":{color:i,backgroundColor:r}}}}}},Oq=e=>{const{componentCls:t,menuCls:n,zIndexPopup:r,dropdownArrowDistance:i,sizePopupArrow:o,antCls:a,iconCls:l,motionDurationMid:g,paddingBlock:u,fontSize:d,dropdownEdgeChildPadding:C,colorTextDisabled:f,fontSizeIcon:m,controlPaddingHorizontal:b,colorBgElevated:p}=e;return[{[t]:{position:"absolute",top:-9999,left:{_skip_check_:!0,value:-9999},zIndex:r,display:"block","&::before":{position:"absolute",insetBlock:e.calc(o).div(2).sub(i).equal(),zIndex:-9999,opacity:1e-4,content:'""'},"&-menu-vertical":{maxHeight:"100vh",overflowY:"auto"},[`&-trigger${a}-btn`]:{[`& > ${l}-down, & > ${a}-btn-icon > ${l}-down`]:{fontSize:m}},[`${t}-wrap`]:{position:"relative",[`${a}-btn > ${l}-down`]:{fontSize:m},[`${l}-down::before`]:{transition:`transform ${g}`}},[`${t}-wrap-open`]:{[`${l}-down::before`]:{transform:"rotate(180deg)"}},"\n        &-hidden,\n        &-menu-hidden,\n        &-menu-submenu-hidden\n      ":{display:"none"},[`&${a}-slide-down-enter${a}-slide-down-enter-active${t}-placement-bottomLeft,
          &${a}-slide-down-appear${a}-slide-down-appear-active${t}-placement-bottomLeft,
          &${a}-slide-down-enter${a}-slide-down-enter-active${t}-placement-bottom,
          &${a}-slide-down-appear${a}-slide-down-appear-active${t}-placement-bottom,
          &${a}-slide-down-enter${a}-slide-down-enter-active${t}-placement-bottomRight,
          &${a}-slide-down-appear${a}-slide-down-appear-active${t}-placement-bottomRight`]:{animationName:YZ},[`&${a}-slide-up-enter${a}-slide-up-enter-active${t}-placement-topLeft,
          &${a}-slide-up-appear${a}-slide-up-appear-active${t}-placement-topLeft,
          &${a}-slide-up-enter${a}-slide-up-enter-active${t}-placement-top,
          &${a}-slide-up-appear${a}-slide-up-appear-active${t}-placement-top,
          &${a}-slide-up-enter${a}-slide-up-enter-active${t}-placement-topRight,
          &${a}-slide-up-appear${a}-slide-up-appear-active${t}-placement-topRight`]:{animationName:FZ},[`&${a}-slide-down-leave${a}-slide-down-leave-active${t}-placement-bottomLeft,
          &${a}-slide-down-leave${a}-slide-down-leave-active${t}-placement-bottom,
          &${a}-slide-down-leave${a}-slide-down-leave-active${t}-placement-bottomRight`]:{animationName:EZ},[`&${a}-slide-up-leave${a}-slide-up-leave-active${t}-placement-topLeft,
          &${a}-slide-up-leave${a}-slide-up-leave-active${t}-placement-top,
          &${a}-slide-up-leave${a}-slide-up-leave-active${t}-placement-topRight`]:{animationName:KZ}}},TJ(e,p,{arrowPlacement:{top:!0,bottom:!0}}),{[`${t} ${n}`]:{position:"relative",margin:0},[`${n}-submenu-popup`]:{position:"absolute",zIndex:r,background:"transparent",boxShadow:"none",transformOrigin:"0 0","ul, li":{listStyle:"none",margin:0}},[`${t}, ${t}-menu-submenu`]:Object.assign(Object.assign({},Ca(e)),{[n]:Object.assign(Object.assign({padding:C,listStyleType:"none",backgroundColor:p,backgroundClip:"padding-box",borderRadius:e.borderRadiusLG,outline:"none",boxShadow:e.boxShadowSecondary},Ds(e)),{"&:empty":{padding:0,boxShadow:"none"},[`${n}-item-group-title`]:{padding:`${Ve(u)} ${Ve(b)}`,color:e.colorTextDescription,transition:`all ${g}`},[`${n}-item`]:{position:"relative",display:"flex",alignItems:"center"},[`${n}-item-icon`]:{minWidth:d,marginInlineEnd:e.marginXS,fontSize:e.fontSizeSM},[`${n}-title-content`]:{flex:"auto","&-with-extra":{display:"inline-flex",alignItems:"center",width:"100%"},"> a":{color:"inherit",transition:`all ${g}`,"&:hover":{color:"inherit"},"&::after":{position:"absolute",inset:0,content:'""'}},[`${n}-item-extra`]:{paddingInlineStart:e.padding,marginInlineStart:"auto",fontSize:e.fontSizeSM,color:e.colorTextDescription}},[`${n}-item, ${n}-submenu-title`]:Object.assign(Object.assign({display:"flex",margin:0,padding:`${Ve(u)} ${Ve(b)}`,color:e.colorText,fontWeight:"normal",fontSize:d,lineHeight:e.lineHeight,cursor:"pointer",transition:`all ${g}`,borderRadius:e.borderRadiusSM,"&:hover, &-active":{backgroundColor:e.controlItemBgHover}},Ds(e)),{"&-selected":{color:e.colorPrimary,backgroundColor:e.controlItemBgActive,"&:hover, &-active":{backgroundColor:e.controlItemBgActiveHover}},"&-disabled":{color:f,cursor:"not-allowed","&:hover":{color:f,backgroundColor:p,cursor:"not-allowed"},a:{pointerEvents:"none"}},"&-divider":{height:1,margin:`${Ve(e.marginXXS)} 0`,overflow:"hidden",lineHeight:0,backgroundColor:e.colorSplit},[`${t}-menu-submenu-expand-icon`]:{position:"absolute",insetInlineEnd:e.paddingXS,[`${t}-menu-submenu-arrow-icon`]:{marginInlineEnd:"0 !important",color:e.colorTextDescription,fontSize:m,fontStyle:"normal"}}}),[`${n}-item-group-list`]:{margin:`0 ${Ve(e.marginXS)}`,padding:0,listStyle:"none"},[`${n}-submenu-title`]:{paddingInlineEnd:e.calc(b).add(e.fontSizeSM).equal()},[`${n}-submenu-vertical`]:{position:"relative"},[`${n}-submenu${n}-submenu-disabled ${t}-menu-submenu-title`]:{[`&, ${t}-menu-submenu-arrow-icon`]:{color:f,backgroundColor:p,cursor:"not-allowed"}},[`${n}-submenu-selected ${t}-menu-submenu-title`]:{color:e.colorPrimary}})})},[jc(e,"slide-up"),jc(e,"slide-down"),yp(e,"move-up"),yp(e,"move-down"),sb(e,"zoom-big")]]},_q=e=>Object.assign(Object.assign({zIndexPopup:e.zIndexPopupBase+50,paddingBlock:(e.controlHeight-e.fontSize*e.lineHeight)/2},$Z({contentRadius:e.borderRadiusLG,limitVerticalRadius:!0})),LJ(e)),Uq=Gi("Dropdown",e=>{const{marginXXS:t,sizePopupArrow:n,paddingXXS:r,componentCls:i}=e,o=Br(e,{menuCls:`${i}-menu`,dropdownArrowDistance:e.calc(n).div(2).add(t).equal(),dropdownEdgeChildPadding:r});return[Oq(o),Pq(o)]},_q,{resetStyle:!1}),Sb=e=>{var t;const{menu:n,arrow:r,prefixCls:i,children:o,trigger:a,disabled:l,dropdownRender:g,getPopupContainer:u,overlayClassName:d,rootClassName:C,overlayStyle:f,open:m,onOpenChange:b,visible:p,onVisibleChange:y,mouseEnterDelay:S=.15,mouseLeaveDelay:v=.1,autoAdjustOverflow:B=!0,placement:W="",overlay:J,transitionName:H}=e,{getPopupContainer:x,getPrefixCls:E,direction:F,dropdown:w}=I.useContext(dn);tb();const V=I.useMemo(()=>{const me=E();return H!==void 0?H:W.includes("top")?`${me}-slide-down`:`${me}-slide-up`},[E,W,H]),Y=I.useMemo(()=>W?W.includes("Center")?W.slice(0,W.indexOf("Center")):W:F==="rtl"?"bottomRight":"bottomLeft",[W,F]),M=E("dropdown",i),L=gs(M),[$,U,_]=Uq(M,L),[,P]=Ia(),ee=I.Children.only(F$(o)?I.createElement("span",null,o):o),j=os(ee,{className:Re(`${M}-trigger`,{[`${M}-rtl`]:F==="rtl"},ee.props.className),disabled:(t=ee.props.disabled)!==null&&t!==void 0?t:l}),O=l?[]:a,X=!!(O!=null&&O.includes("contextMenu")),[D,z]=qi(!1,{value:m??p}),Q=ui(me=>{b==null||b(me,{source:"trigger"}),y==null||y(me),z(me)}),ne=Re(d,C,U,_,L,w==null?void 0:w.className,{[`${M}-rtl`]:F==="rtl"}),ce=zJ({arrowPointAtCenter:typeof r=="object"&&r.pointAtCenter,autoAdjustOverflow:B,offset:P.marginXXS,arrowWidth:r?P.sizePopupArrow:0,borderRadius:P.borderRadius}),se=I.useCallback(()=>{n!=null&&n.selectable&&(n!=null&&n.multiple)||(b==null||b(!1,{source:"menu"}),z(!1))},[n==null?void 0:n.selectable,n==null?void 0:n.multiple]),ue=()=>{let me;return n!=null&&n.items?me=I.createElement(xs,Object.assign({},n)):typeof J=="function"?me=J():me=J,g&&(me=g(me)),me=I.Children.only(typeof me=="string"?I.createElement("span",null,me):me),I.createElement(Hq,{prefixCls:`${M}-menu`,rootClassName:Re(_,L),expandIcon:I.createElement("span",{className:`${M}-menu-submenu-arrow`},I.createElement(Uf,{className:`${M}-menu-submenu-arrow-icon`})),mode:"vertical",selectable:!1,onClick:se,validator:Ne=>{let{mode:Ie}=Ne}},me)},[ve,Ae]=lC("Dropdown",f==null?void 0:f.zIndex);let be=I.createElement(OJ,Object.assign({alignPoint:X},Pi(e,["rootClassName"]),{mouseEnterDelay:S,mouseLeaveDelay:v,visible:D,builtinPlacements:ce,arrow:!!r,overlayClassName:ne,prefixCls:M,getPopupContainer:u||x,transitionName:V,trigger:O,overlay:ue,placement:Y,onVisibleChange:Q,overlayStyle:Object.assign(Object.assign(Object.assign({},w==null?void 0:w.style),f),{zIndex:ve})}),j);return ve&&(be=I.createElement(Sm.Provider,{value:Ae},be)),$(be)},jq=pJ(Sb,"align",void 0,"dropdown",e=>e),Qq=e=>I.createElement(jq,Object.assign({},e),I.createElement("span",null));Sb._InternalPanelDoNotUseOrYouWillBeFired=Qq;function l1(e){return Br(e,{inputAffixPadding:e.paddingXXS})}const s1=e=>{const{controlHeight:t,fontSize:n,lineHeight:r,lineWidth:i,controlHeightSM:o,controlHeightLG:a,fontSizeLG:l,lineHeightLG:g,paddingSM:u,controlPaddingHorizontalSM:d,controlPaddingHorizontal:C,colorFillAlter:f,colorPrimaryHover:m,colorPrimary:b,controlOutlineWidth:p,controlOutline:y,colorErrorOutline:S,colorWarningOutline:v,colorBgContainer:B}=e;return{paddingBlock:Math.max(Math.round((t-n*r)/2*10)/10-i,0),paddingBlockSM:Math.max(Math.round((o-n*r)/2*10)/10-i,0),paddingBlockLG:Math.ceil((a-l*g)/2*10)/10-i,paddingInline:u-i,paddingInlineSM:d-i,paddingInlineLG:C-i,addonBg:f,activeBorderColor:b,hoverBorderColor:m,activeShadow:`0 0 0 ${p}px ${y}`,errorActiveShadow:`0 0 0 ${p}px ${S}`,warningActiveShadow:`0 0 0 ${p}px ${v}`,hoverBg:B,activeBg:B,inputFontSize:n,inputFontSizeLG:l,inputFontSizeSM:n}},$q=e=>({borderColor:e.hoverBorderColor,backgroundColor:e.hoverBg}),Zb=e=>({color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"input[disabled], textarea[disabled]":{cursor:"not-allowed"},"&:hover:not([disabled])":Object.assign({},$q(Br(e,{hoverBorderColor:e.colorBorder,hoverBg:e.colorBgContainerDisabled})))}),g1=(e,t)=>({background:e.colorBgContainer,borderWidth:e.lineWidth,borderStyle:e.lineType,borderColor:t.borderColor,"&:hover":{borderColor:t.hoverBorderColor,backgroundColor:e.hoverBg},"&:focus, &:focus-within":{borderColor:t.activeBorderColor,boxShadow:t.activeShadow,outline:0,backgroundColor:e.activeBg}}),yw=(e,t)=>({[`&${e.componentCls}-status-${t.status}:not(${e.componentCls}-disabled)`]:Object.assign(Object.assign({},g1(e,t)),{[`${e.componentCls}-prefix, ${e.componentCls}-suffix`]:{color:t.affixColor}}),[`&${e.componentCls}-status-${t.status}${e.componentCls}-disabled`]:{borderColor:t.borderColor}}),qq=(e,t)=>({"&-outlined":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},g1(e,{borderColor:e.colorBorder,hoverBorderColor:e.hoverBorderColor,activeBorderColor:e.activeBorderColor,activeShadow:e.activeShadow})),{[`&${e.componentCls}-disabled, &[disabled]`]:Object.assign({},Zb(e))}),yw(e,{status:"error",borderColor:e.colorError,hoverBorderColor:e.colorErrorBorderHover,activeBorderColor:e.colorError,activeShadow:e.errorActiveShadow,affixColor:e.colorError})),yw(e,{status:"warning",borderColor:e.colorWarning,hoverBorderColor:e.colorWarningBorderHover,activeBorderColor:e.colorWarning,activeShadow:e.warningActiveShadow,affixColor:e.colorWarning})),t)}),vw=(e,t)=>({[`&${e.componentCls}-group-wrapper-status-${t.status}`]:{[`${e.componentCls}-group-addon`]:{borderColor:t.addonBorderColor,color:t.addonColor}}}),eee=e=>({"&-outlined":Object.assign(Object.assign(Object.assign({[`${e.componentCls}-group`]:{"&-addon":{background:e.addonBg,border:`${Ve(e.lineWidth)} ${e.lineType} ${e.colorBorder}`},"&-addon:first-child":{borderInlineEnd:0},"&-addon:last-child":{borderInlineStart:0}}},vw(e,{status:"error",addonBorderColor:e.colorError,addonColor:e.colorErrorText})),vw(e,{status:"warning",addonBorderColor:e.colorWarning,addonColor:e.colorWarningText})),{[`&${e.componentCls}-group-wrapper-disabled`]:{[`${e.componentCls}-group-addon`]:Object.assign({},Zb(e))}})}),tee=(e,t)=>{const{componentCls:n}=e;return{"&-borderless":Object.assign({background:"transparent",border:"none","&:focus, &:focus-within":{outline:"none"},[`&${n}-disabled, &[disabled]`]:{color:e.colorTextDisabled,cursor:"not-allowed"},[`&${n}-status-error`]:{"&, & input, & textarea":{color:e.colorError}},[`&${n}-status-warning`]:{"&, & input, & textarea":{color:e.colorWarning}}},t)}},Ix=(e,t)=>({background:t.bg,borderWidth:e.lineWidth,borderStyle:e.lineType,borderColor:"transparent","input&, & input, textarea&, & textarea":{color:t==null?void 0:t.inputColor},"&:hover":{background:t.hoverBg},"&:focus, &:focus-within":{outline:0,borderColor:t.activeBorderColor,backgroundColor:e.activeBg}}),Sw=(e,t)=>({[`&${e.componentCls}-status-${t.status}:not(${e.componentCls}-disabled)`]:Object.assign(Object.assign({},Ix(e,t)),{[`${e.componentCls}-prefix, ${e.componentCls}-suffix`]:{color:t.affixColor}})}),nee=(e,t)=>({"&-filled":Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ix(e,{bg:e.colorFillTertiary,hoverBg:e.colorFillSecondary,activeBorderColor:e.activeBorderColor})),{[`&${e.componentCls}-disabled, &[disabled]`]:Object.assign({},Zb(e))}),Sw(e,{status:"error",bg:e.colorErrorBg,hoverBg:e.colorErrorBgHover,activeBorderColor:e.colorError,inputColor:e.colorErrorText,affixColor:e.colorError})),Sw(e,{status:"warning",bg:e.colorWarningBg,hoverBg:e.colorWarningBgHover,activeBorderColor:e.colorWarning,inputColor:e.colorWarningText,affixColor:e.colorWarning})),t)}),Zw=(e,t)=>({[`&${e.componentCls}-group-wrapper-status-${t.status}`]:{[`${e.componentCls}-group-addon`]:{background:t.addonBg,color:t.addonColor}}}),ree=e=>({"&-filled":Object.assign(Object.assign(Object.assign({[`${e.componentCls}-group`]:{"&-addon":{background:e.colorFillTertiary},[`${e.componentCls}-filled:not(:focus):not(:focus-within)`]:{"&:not(:first-child)":{borderInlineStart:`${Ve(e.lineWidth)} ${e.lineType} ${e.colorSplit}`},"&:not(:last-child)":{borderInlineEnd:`${Ve(e.lineWidth)} ${e.lineType} ${e.colorSplit}`}}}},Zw(e,{status:"error",addonBg:e.colorErrorBg,addonColor:e.colorErrorText})),Zw(e,{status:"warning",addonBg:e.colorWarningBg,addonColor:e.colorWarningText})),{[`&${e.componentCls}-group-wrapper-disabled`]:{[`${e.componentCls}-group`]:{"&-addon":{background:e.colorFillTertiary,color:e.colorTextDisabled},"&-addon:first-child":{borderInlineStart:`${Ve(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderTop:`${Ve(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderBottom:`${Ve(e.lineWidth)} ${e.lineType} ${e.colorBorder}`},"&-addon:last-child":{borderInlineEnd:`${Ve(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderTop:`${Ve(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderBottom:`${Ve(e.lineWidth)} ${e.lineType} ${e.colorBorder}`}}}})}),iee=e=>({"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:e,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),Cx=e=>{const{paddingBlockLG:t,lineHeightLG:n,borderRadiusLG:r,paddingInlineLG:i}=e;return{padding:`${Ve(t)} ${Ve(i)}`,fontSize:e.inputFontSizeLG,lineHeight:n,borderRadius:r}},c1=e=>({padding:`${Ve(e.paddingBlockSM)} ${Ve(e.paddingInlineSM)}`,fontSize:e.inputFontSizeSM,borderRadius:e.borderRadiusSM}),u1=e=>Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:`${Ve(e.paddingBlock)} ${Ve(e.paddingInline)}`,color:e.colorText,fontSize:e.inputFontSize,lineHeight:e.lineHeight,borderRadius:e.borderRadius,transition:`all ${e.motionDurationMid}`},iee(e.colorTextPlaceholder)),{"textarea&":{maxWidth:"100%",height:"auto",minHeight:e.controlHeight,lineHeight:e.lineHeight,verticalAlign:"bottom",transition:`all ${e.motionDurationSlow}, height 0s`,resize:"vertical"},"&-lg":Object.assign({},Cx(e)),"&-sm":Object.assign({},c1(e)),"&-rtl, &-textarea-rtl":{direction:"rtl"}}),oee=e=>{const{componentCls:t,antCls:n}=e;return{position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0,"&[class*='col-']":{paddingInlineEnd:e.paddingXS,"&:last-child":{paddingInlineEnd:0}},[`&-lg ${t}, &-lg > ${t}-group-addon`]:Object.assign({},Cx(e)),[`&-sm ${t}, &-sm > ${t}-group-addon`]:Object.assign({},c1(e)),[`&-lg ${n}-select-single ${n}-select-selector`]:{height:e.controlHeightLG},[`&-sm ${n}-select-single ${n}-select-selector`]:{height:e.controlHeightSM},[`> ${t}`]:{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}},[`${t}-group`]:{"&-addon, &-wrap":{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}},"&-wrap > *":{display:"block !important"},"&-addon":{position:"relative",padding:`0 ${Ve(e.paddingInline)}`,color:e.colorText,fontWeight:"normal",fontSize:e.inputFontSize,textAlign:"center",borderRadius:e.borderRadius,transition:`all ${e.motionDurationSlow}`,lineHeight:1,[`${n}-select`]:{margin:`${Ve(e.calc(e.paddingBlock).add(1).mul(-1).equal())} ${Ve(e.calc(e.paddingInline).mul(-1).equal())}`,[`&${n}-select-single:not(${n}-select-customize-input):not(${n}-pagination-size-changer)`]:{[`${n}-select-selector`]:{backgroundColor:"inherit",border:`${Ve(e.lineWidth)} ${e.lineType} transparent`,boxShadow:"none"}}},[`${n}-cascader-picker`]:{margin:`-9px ${Ve(e.calc(e.paddingInline).mul(-1).equal())}`,backgroundColor:"transparent",[`${n}-cascader-input`]:{textAlign:"start",border:0,boxShadow:"none"}}}},[t]:{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":{zIndex:1,borderInlineEndWidth:1,[`${t}-search-with-button &`]:{zIndex:0}}},[`> ${t}:first-child, ${t}-group-addon:first-child`]:{borderStartEndRadius:0,borderEndEndRadius:0,[`${n}-select ${n}-select-selector`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${t}-affix-wrapper`]:{[`&:not(:first-child) ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0},[`&:not(:last-child) ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`> ${t}:last-child, ${t}-group-addon:last-child`]:{borderStartStartRadius:0,borderEndStartRadius:0,[`${n}-select ${n}-select-selector`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`${t}-affix-wrapper`]:{"&:not(:last-child)":{borderStartEndRadius:0,borderEndEndRadius:0,[`${t}-search &`]:{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius}},[`&:not(:first-child), ${t}-search &:not(:first-child)`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&${t}-group-compact`]:Object.assign(Object.assign({display:"block"},Uc()),{[`${t}-group-addon, ${t}-group-wrap, > ${t}`]:{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:e.lineWidth,"&:hover, &:focus":{zIndex:1}}},"& > *":{display:"inline-flex",float:"none",verticalAlign:"top",borderRadius:0},[`
        & > ${t}-affix-wrapper,
        & > ${t}-number-affix-wrapper,
        & > ${n}-picker-range
      `]:{display:"inline-flex"},"& > *:not(:last-child)":{marginInlineEnd:e.calc(e.lineWidth).mul(-1).equal(),borderInlineEndWidth:e.lineWidth},[t]:{float:"none"},[`& > ${n}-select > ${n}-select-selector,
      & > ${n}-select-auto-complete ${t},
      & > ${n}-cascader-picker ${t},
      & > ${t}-group-wrapper ${t}`]:{borderInlineEndWidth:e.lineWidth,borderRadius:0,"&:hover, &:focus":{zIndex:1}},[`& > ${n}-select-focused`]:{zIndex:1},[`& > ${n}-select > ${n}-select-arrow`]:{zIndex:1},[`& > *:first-child,
      & > ${n}-select:first-child > ${n}-select-selector,
      & > ${n}-select-auto-complete:first-child ${t},
      & > ${n}-cascader-picker:first-child ${t}`]:{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius},[`& > *:last-child,
      & > ${n}-select:last-child > ${n}-select-selector,
      & > ${n}-cascader-picker:last-child ${t},
      & > ${n}-cascader-picker-focused:last-child ${t}`]:{borderInlineEndWidth:e.lineWidth,borderStartEndRadius:e.borderRadius,borderEndEndRadius:e.borderRadius},[`& > ${n}-select-auto-complete ${t}`]:{verticalAlign:"top"},[`${t}-group-wrapper + ${t}-group-wrapper`]:{marginInlineStart:e.calc(e.lineWidth).mul(-1).equal(),[`${t}-affix-wrapper`]:{borderRadius:0}},[`${t}-group-wrapper:not(:last-child)`]:{[`&${t}-search > ${t}-group`]:{[`& > ${t}-group-addon > ${t}-search-button`]:{borderRadius:0},[`& > ${t}`]:{borderStartStartRadius:e.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:e.borderRadius}}}})}},aee=e=>{const{componentCls:t,controlHeightSM:n,lineWidth:r,calc:i}=e,a=i(n).sub(i(r).mul(2)).sub(16).div(2).equal();return{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ca(e)),u1(e)),qq(e)),nee(e)),tee(e)),{'&[type="color"]':{height:e.controlHeight,[`&${t}-lg`]:{height:e.controlHeightLG},[`&${t}-sm`]:{height:n,paddingTop:a,paddingBottom:a}},'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}})}},lee=e=>{const{componentCls:t}=e;return{[`${t}-clear-icon`]:{margin:0,padding:0,lineHeight:0,color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:`color ${e.motionDurationSlow}`,border:"none",outline:"none",backgroundColor:"transparent","&:hover":{color:e.colorTextTertiary},"&:active":{color:e.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:`0 ${Ve(e.inputAffixPadding)}`}}}},see=e=>{const{componentCls:t,inputAffixPadding:n,colorTextDescription:r,motionDurationSlow:i,colorIcon:o,colorIconHover:a,iconCls:l}=e,g=`${t}-affix-wrapper`,u=`${t}-affix-wrapper-disabled`;return{[g]:Object.assign(Object.assign(Object.assign(Object.assign({},u1(e)),{display:"inline-flex",[`&:not(${t}-disabled):hover`]:{zIndex:1,[`${t}-search-with-button &`]:{zIndex:0}},"&-focused, &:focus":{zIndex:1},[`> input${t}`]:{padding:0},[`> input${t}, > textarea${t}`]:{fontSize:"inherit",border:"none",borderRadius:0,outline:"none",background:"transparent",color:"inherit","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}},"&::before":{display:"inline-block",width:0,visibility:"hidden",content:'"\\a0"'},[t]:{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:e.paddingXS}},"&-show-count-suffix":{color:r},"&-show-count-has-suffix":{marginInlineEnd:e.paddingXXS},"&-prefix":{marginInlineEnd:n},"&-suffix":{marginInlineStart:n}}}),lee(e)),{[`${l}${t}-password-icon`]:{color:o,cursor:"pointer",transition:`all ${i}`,"&:hover":{color:a}}}),[u]:{[`${l}${t}-password-icon`]:{color:o,cursor:"not-allowed","&:hover":{color:o}}}}},gee=e=>{const{componentCls:t,borderRadiusLG:n,borderRadiusSM:r}=e;return{[`${t}-group`]:Object.assign(Object.assign(Object.assign({},Ca(e)),oee(e)),{"&-rtl":{direction:"rtl"},"&-wrapper":Object.assign(Object.assign(Object.assign({display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":{[`${t}-group-addon`]:{borderRadius:n,fontSize:e.inputFontSizeLG}},"&-sm":{[`${t}-group-addon`]:{borderRadius:r}}},eee(e)),ree(e)),{[`&:not(${t}-compact-first-item):not(${t}-compact-last-item)${t}-compact-item`]:{[`${t}, ${t}-group-addon`]:{borderRadius:0}},[`&:not(${t}-compact-last-item)${t}-compact-first-item`]:{[`${t}, ${t}-group-addon`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${t}-compact-first-item)${t}-compact-last-item`]:{[`${t}, ${t}-group-addon`]:{borderStartStartRadius:0,borderEndStartRadius:0}},[`&:not(${t}-compact-last-item)${t}-compact-item`]:{[`${t}-affix-wrapper`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&:not(${t}-compact-first-item)${t}-compact-item`]:{[`${t}-affix-wrapper`]:{borderStartStartRadius:0,borderEndStartRadius:0}}})})}},cee=e=>{const{componentCls:t,antCls:n}=e,r=`${t}-search`;return{[r]:{[t]:{"&:hover, &:focus":{[`+ ${t}-group-addon ${r}-button:not(${n}-btn-primary)`]:{borderInlineStartColor:e.colorPrimaryHover}}},[`${t}-affix-wrapper`]:{height:e.controlHeight,borderRadius:0},[`${t}-lg`]:{lineHeight:e.calc(e.lineHeightLG).sub(2e-4).equal()},[`> ${t}-group`]:{[`> ${t}-group-addon:last-child`]:{insetInlineStart:-1,padding:0,border:0,[`${r}-button`]:{marginInlineEnd:-1,borderStartStartRadius:0,borderEndStartRadius:0,boxShadow:"none"},[`${r}-button:not(${n}-btn-primary)`]:{color:e.colorTextDescription,"&:hover":{color:e.colorPrimaryHover},"&:active":{color:e.colorPrimaryActive},[`&${n}-btn-loading::before`]:{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0}}}},[`${r}-button`]:{height:e.controlHeight,"&:hover, &:focus":{zIndex:1}},"&-large":{[`${t}-affix-wrapper, ${r}-button`]:{height:e.controlHeightLG}},"&-small":{[`${t}-affix-wrapper, ${r}-button`]:{height:e.controlHeightSM}},"&-rtl":{direction:"rtl"},[`&${t}-compact-item`]:{[`&:not(${t}-compact-last-item)`]:{[`${t}-group-addon`]:{[`${t}-search-button`]:{marginInlineEnd:e.calc(e.lineWidth).mul(-1).equal(),borderRadius:0}}},[`&:not(${t}-compact-first-item)`]:{[`${t},${t}-affix-wrapper`]:{borderRadius:0}},[`> ${t}-group-addon ${t}-search-button,
        > ${t},
        ${t}-affix-wrapper`]:{"&:hover, &:focus, &:active":{zIndex:2}},[`> ${t}-affix-wrapper-focused`]:{zIndex:2}}}}},uee=e=>{const{componentCls:t,paddingLG:n}=e,r=`${t}-textarea`;return{[r]:{position:"relative","&-show-count":{[`> ${t}`]:{height:"100%"},[`${t}-data-count`]:{position:"absolute",bottom:e.calc(e.fontSize).mul(e.lineHeight).mul(-1).equal(),insetInlineEnd:0,color:e.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}},[`
        &-allow-clear > ${t},
        &-affix-wrapper${r}-has-feedback ${t}
      `]:{paddingInlineEnd:n},[`&-affix-wrapper${t}-affix-wrapper`]:{padding:0,[`> textarea${t}`]:{fontSize:"inherit",border:"none",outline:"none",background:"transparent","&:focus":{boxShadow:"none !important"}},[`${t}-suffix`]:{margin:0,"> *:not(:last-child)":{marginInline:0},[`${t}-clear-icon`]:{position:"absolute",insetInlineEnd:e.paddingInline,insetBlockStart:e.paddingXS},[`${r}-suffix`]:{position:"absolute",top:0,insetInlineEnd:e.paddingInline,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}}},[`&-affix-wrapper${t}-affix-wrapper-sm`]:{[`${t}-suffix`]:{[`${t}-clear-icon`]:{insetInlineEnd:e.paddingInlineSM}}}}}},dee=e=>{const{componentCls:t}=e;return{[`${t}-out-of-range`]:{[`&, & input, & textarea, ${t}-show-count-suffix, ${t}-data-count`]:{color:e.colorError}}}},d1=Gi("Input",e=>{const t=Br(e,l1(e));return[aee(t),uee(t),see(t),gee(t),cee(t),dee(t),TZ(t)]},s1,{resetFont:!1});var Iee={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},Cee=function(t,n){return I.createElement(er,lt({},t,{ref:n,icon:Iee}))},fee=I.forwardRef(Cee);const Gb=I.createContext(null);var mee=function(t){var n=t.activeTabOffset,r=t.horizontal,i=t.rtl,o=t.indicator,a=o===void 0?{}:o,l=a.size,g=a.align,u=g===void 0?"center":g,d=I.useState(),C=xe(d,2),f=C[0],m=C[1],b=I.useRef(),p=Ge.useCallback(function(S){return typeof l=="function"?l(S):typeof l=="number"?l:S},[l]);function y(){Jr.cancel(b.current)}return I.useEffect(function(){var S={};if(n)if(r){S.width=p(n.width);var v=i?"right":"left";u==="start"&&(S[v]=n[v]),u==="center"&&(S[v]=n[v]+n.width/2,S.transform=i?"translateX(50%)":"translateX(-50%)"),u==="end"&&(S[v]=n[v]+n.width,S.transform="translateX(-100%)")}else S.height=p(n.height),u==="start"&&(S.top=n.top),u==="center"&&(S.top=n.top+n.height/2,S.transform="translateY(-50%)"),u==="end"&&(S.top=n.top+n.height,S.transform="translateY(-100%)");return y(),b.current=Jr(function(){m(S)}),y},[n,r,i,u,p]),{style:f}},Gw={width:0,height:0,left:0,top:0};function hee(e,t,n){return I.useMemo(function(){for(var r,i=new Map,o=t.get((r=e[0])===null||r===void 0?void 0:r.key)||Gw,a=o.left+o.width,l=0;l<e.length;l+=1){var g=e[l].key,u=t.get(g);if(!u){var d;u=t.get((d=e[l-1])===null||d===void 0?void 0:d.key)||Gw}var C=i.get(g)||he({},u);C.right=a-C.left-C.width,i.set(g,C)}return i},[e.map(function(r){return r.key}).join("_"),t,n])}function Bw(e,t){var n=I.useRef(e),r=I.useState({}),i=xe(r,2),o=i[1];function a(l){var g=typeof l=="function"?l(n.current):l;g!==n.current&&t(g,n.current),n.current=g,o({})}return[n.current,a]}var Aee=.1,Rw=.01,IA=20,ww=Math.pow(.995,IA);function pee(e,t){var n=I.useState(),r=xe(n,2),i=r[0],o=r[1],a=I.useState(0),l=xe(a,2),g=l[0],u=l[1],d=I.useState(0),C=xe(d,2),f=C[0],m=C[1],b=I.useState(),p=xe(b,2),y=p[0],S=p[1],v=I.useRef();function B(F){var w=F.touches[0],V=w.screenX,Y=w.screenY;o({x:V,y:Y}),window.clearInterval(v.current)}function W(F){if(i){var w=F.touches[0],V=w.screenX,Y=w.screenY;o({x:V,y:Y});var M=V-i.x,L=Y-i.y;t(M,L);var $=Date.now();u($),m($-g),S({x:M,y:L})}}function J(){if(i&&(o(null),S(null),y)){var F=y.x/f,w=y.y/f,V=Math.abs(F),Y=Math.abs(w);if(Math.max(V,Y)<Aee)return;var M=F,L=w;v.current=window.setInterval(function(){if(Math.abs(M)<Rw&&Math.abs(L)<Rw){window.clearInterval(v.current);return}M*=ww,L*=ww,t(M*IA,L*IA)},IA)}}var H=I.useRef();function x(F){var w=F.deltaX,V=F.deltaY,Y=0,M=Math.abs(w),L=Math.abs(V);M===L?Y=H.current==="x"?w:V:M>L?(Y=w,H.current="x"):(Y=V,H.current="y"),t(-Y,-Y)&&F.preventDefault()}var E=I.useRef(null);E.current={onTouchStart:B,onTouchMove:W,onTouchEnd:J,onWheel:x},I.useEffect(function(){function F(M){E.current.onTouchStart(M)}function w(M){E.current.onTouchMove(M)}function V(M){E.current.onTouchEnd(M)}function Y(M){E.current.onWheel(M)}return document.addEventListener("touchmove",w,{passive:!1}),document.addEventListener("touchend",V,{passive:!0}),e.current.addEventListener("touchstart",F,{passive:!0}),e.current.addEventListener("wheel",Y,{passive:!1}),function(){document.removeEventListener("touchmove",w),document.removeEventListener("touchend",V)}},[])}function fx(e){var t=I.useState(0),n=xe(t,2),r=n[0],i=n[1],o=I.useRef(0),a=I.useRef();return a.current=e,m2(function(){var l;(l=a.current)===null||l===void 0||l.call(a)},[r]),function(){o.current===r&&(o.current+=1,i(o.current))}}function bee(e){var t=I.useRef([]),n=I.useState({}),r=xe(n,2),i=r[1],o=I.useRef(typeof e=="function"?e():e),a=fx(function(){var g=o.current;t.current.forEach(function(u){g=u(g)}),t.current=[],o.current=g,i({})});function l(g){t.current.push(g),a()}return[o.current,l]}var Ww={width:0,height:0,left:0,top:0,right:0};function yee(e,t,n,r,i,o,a){var l=a.tabs,g=a.tabPosition,u=a.rtl,d,C,f;return["top","bottom"].includes(g)?(d="width",C=u?"right":"left",f=Math.abs(n)):(d="height",C="top",f=-n),I.useMemo(function(){if(!l.length)return[0,0];for(var m=l.length,b=m,p=0;p<m;p+=1){var y=e.get(l[p].key)||Ww;if(Math.floor(y[C]+y[d])>Math.floor(f+t)){b=p-1;break}}for(var S=0,v=m-1;v>=0;v-=1){var B=e.get(l[v].key)||Ww;if(B[C]<f){S=v+1;break}}return S>=b?[0,0]:[S,b]},[e,t,r,i,o,f,g,l.map(function(m){return m.key}).join("_"),u])}function Vw(e){var t;return e instanceof Map?(t={},e.forEach(function(n,r){t[r]=n})):t=e,JSON.stringify(t)}var vee="TABS_DQ";function mx(e){return String(e).replace(/"/g,vee)}function I1(e,t,n,r){return!(!n||r||e===!1||e===void 0&&(t===!1||t===null))}var hx=I.forwardRef(function(e,t){var n=e.prefixCls,r=e.editable,i=e.locale,o=e.style;return!r||r.showAdd===!1?null:I.createElement("button",{ref:t,type:"button",className:"".concat(n,"-nav-add"),style:o,"aria-label":(i==null?void 0:i.addAriaLabel)||"Add tab",onClick:function(l){r.onEdit("add",{event:l})}},r.addIcon||"+")}),kw=I.forwardRef(function(e,t){var n=e.position,r=e.prefixCls,i=e.extra;if(!i)return null;var o,a={};return wt(i)==="object"&&!I.isValidElement(i)?a=i:a.right=i,n==="right"&&(o=a.right),n==="left"&&(o=a.left),o?I.createElement("div",{className:"".concat(r,"-extra-content"),ref:t},o):null}),See=I.forwardRef(function(e,t){var n=e.prefixCls,r=e.id,i=e.tabs,o=e.locale,a=e.mobile,l=e.more,g=l===void 0?{}:l,u=e.style,d=e.className,C=e.editable,f=e.tabBarGutter,m=e.rtl,b=e.removeAriaLabel,p=e.onTabClick,y=e.getPopupContainer,S=e.popupClassName,v=I.useState(!1),B=xe(v,2),W=B[0],J=B[1],H=I.useState(null),x=xe(H,2),E=x[0],F=x[1],w=g.icon,V=w===void 0?"More":w,Y="".concat(r,"-more-popup"),M="".concat(n,"-dropdown"),L=E!==null?"".concat(Y,"-").concat(E):null,$=o==null?void 0:o.dropdownAriaLabel;function U(D,z){D.preventDefault(),D.stopPropagation(),C.onEdit("remove",{key:z,event:D})}var _=I.createElement(uC,{onClick:function(z){var Q=z.key,ne=z.domEvent;p(Q,ne),J(!1)},prefixCls:"".concat(M,"-menu"),id:Y,tabIndex:-1,role:"listbox","aria-activedescendant":L,selectedKeys:[E],"aria-label":$!==void 0?$:"expanded dropdown"},i.map(function(D){var z=D.closable,Q=D.disabled,ne=D.closeIcon,ce=D.key,se=D.label,ue=I1(z,ne,C,Q);return I.createElement(Nm,{key:ce,id:"".concat(Y,"-").concat(ce),role:"option","aria-controls":r&&"".concat(r,"-panel-").concat(ce),disabled:Q},I.createElement("span",null,se),ue&&I.createElement("button",{type:"button","aria-label":b||"remove",tabIndex:0,className:"".concat(M,"-menu-item-remove"),onClick:function(Ae){Ae.stopPropagation(),U(Ae,ce)}},ne||C.removeIcon||""))}));function P(D){for(var z=i.filter(function(ue){return!ue.disabled}),Q=z.findIndex(function(ue){return ue.key===E})||0,ne=z.length,ce=0;ce<ne;ce+=1){Q=(Q+D+ne)%ne;var se=z[Q];if(!se.disabled){F(se.key);return}}}function ee(D){var z=D.which;if(!W){[Mt.DOWN,Mt.SPACE,Mt.ENTER].includes(z)&&(J(!0),D.preventDefault());return}switch(z){case Mt.UP:P(-1),D.preventDefault();break;case Mt.DOWN:P(1),D.preventDefault();break;case Mt.ESC:J(!1);break;case Mt.SPACE:case Mt.ENTER:E!==null&&p(E,D);break}}I.useEffect(function(){var D=document.getElementById(L);D&&D.scrollIntoView&&D.scrollIntoView(!1)},[E]),I.useEffect(function(){W||F(null)},[W]);var j=fe({},m?"marginRight":"marginLeft",f);i.length||(j.visibility="hidden",j.order=1);var O=Re(fe({},"".concat(M,"-rtl"),m)),X=a?null:I.createElement(OJ,lt({prefixCls:M,overlay:_,visible:i.length?W:!1,onVisibleChange:J,overlayClassName:Re(O,S),mouseEnterDelay:.1,mouseLeaveDelay:.1,getPopupContainer:y},g),I.createElement("button",{type:"button",className:"".concat(n,"-nav-more"),style:j,tabIndex:-1,"aria-hidden":"true","aria-haspopup":"listbox","aria-controls":Y,id:"".concat(r,"-more"),"aria-expanded":W,onKeyDown:ee},V));return I.createElement("div",{className:Re("".concat(n,"-nav-operations"),d),style:u,ref:t},X,I.createElement(hx,{prefixCls:n,locale:o,editable:C}))});const Zee=I.memo(See,function(e,t){return t.tabMoving});var Gee=function(t){var n=t.prefixCls,r=t.id,i=t.active,o=t.focus,a=t.tab,l=a.key,g=a.label,u=a.disabled,d=a.closeIcon,C=a.icon,f=t.closable,m=t.renderWrapper,b=t.removeAriaLabel,p=t.editable,y=t.onClick,S=t.onFocus,v=t.onBlur,B=t.onKeyDown,W=t.onMouseDown,J=t.onMouseUp,H=t.style,x=t.tabCount,E=t.currentPosition,F="".concat(n,"-tab"),w=I1(f,d,p,u);function V(U){u||y(U)}function Y(U){U.preventDefault(),U.stopPropagation(),p.onEdit("remove",{key:l,event:U})}var M=I.useMemo(function(){return C&&typeof g=="string"?I.createElement("span",null,g):g},[g,C]),L=I.useRef(null);I.useEffect(function(){o&&L.current&&L.current.focus()},[o]);var $=I.createElement("div",{key:l,"data-node-key":mx(l),className:Re(F,fe(fe(fe(fe({},"".concat(F,"-with-remove"),w),"".concat(F,"-active"),i),"".concat(F,"-disabled"),u),"".concat(F,"-focus"),o)),style:H,onClick:V},I.createElement("div",{ref:L,role:"tab","aria-selected":i,id:r&&"".concat(r,"-tab-").concat(l),className:"".concat(F,"-btn"),"aria-controls":r&&"".concat(r,"-panel-").concat(l),"aria-disabled":u,tabIndex:u?null:i?0:-1,onClick:function(_){_.stopPropagation(),V(_)},onKeyDown:B,onMouseDown:W,onMouseUp:J,onFocus:S,onBlur:v},o&&I.createElement("div",{"aria-live":"polite",style:{width:0,height:0,position:"absolute",overflow:"hidden",opacity:0}},"Tab ".concat(E," of ").concat(x)),C&&I.createElement("span",{className:"".concat(F,"-icon")},C),g&&M),w&&I.createElement("button",{type:"button","aria-label":b||"remove",tabIndex:i?0:-1,className:"".concat(F,"-remove"),onClick:function(_){_.stopPropagation(),Y(_)}},d||p.removeIcon||""));return m?m($):$},Bee=function(t,n){var r=t.offsetWidth,i=t.offsetHeight,o=t.offsetTop,a=t.offsetLeft,l=t.getBoundingClientRect(),g=l.width,u=l.height,d=l.left,C=l.top;return Math.abs(g-r)<1?[g,u,d-n.left,C-n.top]:[r,i,a,o]},Od=function(t){var n=t.current||{},r=n.offsetWidth,i=r===void 0?0:r,o=n.offsetHeight,a=o===void 0?0:o;if(t.current){var l=t.current.getBoundingClientRect(),g=l.width,u=l.height;if(Math.abs(g-i)<1)return[g,u]}return[i,a]},Nh=function(t,n){return t[n?0:1]},Nw=I.forwardRef(function(e,t){var n=e.className,r=e.style,i=e.id,o=e.animated,a=e.activeKey,l=e.rtl,g=e.extra,u=e.editable,d=e.locale,C=e.tabPosition,f=e.tabBarGutter,m=e.children,b=e.onTabClick,p=e.onTabScroll,y=e.indicator,S=I.useContext(Gb),v=S.prefixCls,B=S.tabs,W=I.useRef(null),J=I.useRef(null),H=I.useRef(null),x=I.useRef(null),E=I.useRef(null),F=I.useRef(null),w=I.useRef(null),V=C==="top"||C==="bottom",Y=Bw(0,function(Yt,at){V&&p&&p({direction:Yt>at?"left":"right"})}),M=xe(Y,2),L=M[0],$=M[1],U=Bw(0,function(Yt,at){!V&&p&&p({direction:Yt>at?"top":"bottom"})}),_=xe(U,2),P=_[0],ee=_[1],j=I.useState([0,0]),O=xe(j,2),X=O[0],D=O[1],z=I.useState([0,0]),Q=xe(z,2),ne=Q[0],ce=Q[1],se=I.useState([0,0]),ue=xe(se,2),ve=ue[0],Ae=ue[1],be=I.useState([0,0]),me=xe(be,2),Ne=me[0],Ie=me[1],ae=bee(new Map),Ee=xe(ae,2),Fe=Ee[0],ke=Ee[1],ze=hee(B,Fe,ne[0]),He=Nh(X,V),Le=Nh(ne,V),Ye=Nh(ve,V),Pe=Nh(Ne,V),$e=Math.floor(He)<Math.floor(Le+Ye),ot=$e?He-Pe:He-Ye,Ct="".concat(v,"-nav-operations-hidden"),pt=0,it=0;V&&l?(pt=0,it=Math.max(0,Le-ot)):(pt=Math.min(0,ot-Le),it=0);function It(Yt){return Yt<pt?pt:Yt>it?it:Yt}var _e=I.useRef(null),Ot=I.useState(),Qe=xe(Ot,2),st=Qe[0],St=Qe[1];function dt(){St(Date.now())}function Wt(){_e.current&&clearTimeout(_e.current)}pee(x,function(Yt,at){function Qt(An,Tn){An(function(tr){var Rr=It(tr+Tn);return Rr})}return $e?(V?Qt($,Yt):Qt(ee,at),Wt(),dt(),!0):!1}),I.useEffect(function(){return Wt(),st&&(_e.current=setTimeout(function(){St(0)},100)),Wt},[st]);var Et=yee(ze,ot,V?L:P,Le,Ye,Pe,he(he({},e),{},{tabs:B})),hn=xe(Et,2),mn=hn[0],Xn=hn[1],Mn=ui(function(){var Yt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a,at=ze.get(Yt)||{width:0,height:0,left:0,right:0,top:0};if(V){var Qt=L;l?at.right<L?Qt=at.right:at.right+at.width>L+ot&&(Qt=at.right+at.width-ot):at.left<-L?Qt=-at.left:at.left+at.width>-L+ot&&(Qt=-(at.left+at.width-ot)),ee(0),$(It(Qt))}else{var An=P;at.top<-P?An=-at.top:at.top+at.height>-P+ot&&(An=-(at.top+at.height-ot)),$(0),ee(It(An))}}),In=I.useState(),Jt=xe(In,2),jt=Jt[0],ln=Jt[1],Vt=I.useState(!1),Rt=xe(Vt,2),yt=Rt[0],ht=Rt[1],sn=B.filter(function(Yt){return!Yt.disabled}).map(function(Yt){return Yt.key}),ut=function(at){var Qt=sn.indexOf(jt||a),An=sn.length,Tn=(Qt+at+An)%An,tr=sn[Tn];ln(tr)},ct=function(at){var Qt=at.code,An=l&&V,Tn=sn[0],tr=sn[sn.length-1];switch(Qt){case"ArrowLeft":{V&&ut(An?1:-1);break}case"ArrowRight":{V&&ut(An?-1:1);break}case"ArrowUp":{at.preventDefault(),V||ut(-1);break}case"ArrowDown":{at.preventDefault(),V||ut(1);break}case"Home":{at.preventDefault(),ln(Tn);break}case"End":{at.preventDefault(),ln(tr);break}case"Enter":case"Space":{at.preventDefault(),b(jt,at);break}case"Backspace":case"Delete":{var Rr=sn.indexOf(jt),Kt=B.find(function(gn){return gn.key===jt}),en=I1(Kt==null?void 0:Kt.closable,Kt==null?void 0:Kt.closeIcon,u,Kt==null?void 0:Kt.disabled);en&&(at.preventDefault(),at.stopPropagation(),u.onEdit("remove",{key:jt,event:at}),Rr===sn.length-1?ut(-1):ut(1));break}}},vt={};V?vt[l?"marginRight":"marginLeft"]=f:vt.marginTop=f;var Bt=B.map(function(Yt,at){var Qt=Yt.key;return I.createElement(Gee,{id:i,prefixCls:v,key:Qt,tab:Yt,style:at===0?void 0:vt,closable:Yt.closable,editable:u,active:Qt===a,focus:Qt===jt,renderWrapper:m,removeAriaLabel:d==null?void 0:d.removeAriaLabel,tabCount:sn.length,currentPosition:at+1,onClick:function(Tn){b(Qt,Tn)},onKeyDown:ct,onFocus:function(){yt||ln(Qt),Mn(Qt),dt(),x.current&&(l||(x.current.scrollLeft=0),x.current.scrollTop=0)},onBlur:function(){ln(void 0)},onMouseDown:function(){ht(!0)},onMouseUp:function(){ht(!1)}})}),kt=function(){return ke(function(){var at,Qt=new Map,An=(at=E.current)===null||at===void 0?void 0:at.getBoundingClientRect();return B.forEach(function(Tn){var tr,Rr=Tn.key,Kt=(tr=E.current)===null||tr===void 0?void 0:tr.querySelector('[data-node-key="'.concat(mx(Rr),'"]'));if(Kt){var en=Bee(Kt,An),gn=xe(en,4),kr=gn[0],Ar=gn[1],Fn=gn[2],ri=gn[3];Qt.set(Rr,{width:kr,height:Ar,left:Fn,top:ri})}}),Qt})};I.useEffect(function(){kt()},[B.map(function(Yt){return Yt.key}).join("_")]);var Tt=fx(function(){var Yt=Od(W),at=Od(J),Qt=Od(H);D([Yt[0]-at[0]-Qt[0],Yt[1]-at[1]-Qt[1]]);var An=Od(w);Ae(An);var Tn=Od(F);Ie(Tn);var tr=Od(E);ce([tr[0]-An[0],tr[1]-An[1]]),kt()}),Jn=B.slice(0,mn),cn=B.slice(Xn+1),yn=[].concat(Gt(Jn),Gt(cn)),qt=ze.get(a),Vn=mee({activeTabOffset:qt,horizontal:V,indicator:y,rtl:l}),En=Vn.style;I.useEffect(function(){Mn()},[a,pt,it,Vw(qt),Vw(ze),V]),I.useEffect(function(){Tt()},[l]);var Dn=!!yn.length,ar="".concat(v,"-nav-wrap"),Ln,Pn,At,Ht;return V?l?(Pn=L>0,Ln=L!==it):(Ln=L<0,Pn=L!==pt):(At=P<0,Ht=P!==pt),I.createElement(bl,{onResize:Tt},I.createElement("div",{ref:Ps(t,W),role:"tablist","aria-orientation":V?"horizontal":"vertical",className:Re("".concat(v,"-nav"),n),style:r,onKeyDown:function(){dt()}},I.createElement(kw,{ref:J,position:"left",extra:g,prefixCls:v}),I.createElement(bl,{onResize:Tt},I.createElement("div",{className:Re(ar,fe(fe(fe(fe({},"".concat(ar,"-ping-left"),Ln),"".concat(ar,"-ping-right"),Pn),"".concat(ar,"-ping-top"),At),"".concat(ar,"-ping-bottom"),Ht)),ref:x},I.createElement(bl,{onResize:Tt},I.createElement("div",{ref:E,className:"".concat(v,"-nav-list"),style:{transform:"translate(".concat(L,"px, ").concat(P,"px)"),transition:st?"none":void 0}},Bt,I.createElement(hx,{ref:w,prefixCls:v,locale:d,editable:u,style:he(he({},Bt.length===0?void 0:vt),{},{visibility:Dn?"hidden":null})}),I.createElement("div",{className:Re("".concat(v,"-ink-bar"),fe({},"".concat(v,"-ink-bar-animated"),o.inkBar)),style:En}))))),I.createElement(Zee,lt({},e,{removeAriaLabel:d==null?void 0:d.removeAriaLabel,ref:F,prefixCls:v,tabs:yn,className:!Dn&&Ct,tabMoving:!!st})),I.createElement(kw,{ref:H,position:"right",extra:g,prefixCls:v})))}),Ax=I.forwardRef(function(e,t){var n=e.prefixCls,r=e.className,i=e.style,o=e.id,a=e.active,l=e.tabKey,g=e.children;return I.createElement("div",{id:o&&"".concat(o,"-panel-").concat(l),role:"tabpanel",tabIndex:a?0:-1,"aria-labelledby":o&&"".concat(o,"-tab-").concat(l),"aria-hidden":!a,style:i,className:Re(n,a&&"".concat(n,"-active"),r),ref:t},g)}),Ree=["renderTabBar"],wee=["label","key"],Wee=function(t){var n=t.renderTabBar,r=Wn(t,Ree),i=I.useContext(Gb),o=i.tabs;if(n){var a=he(he({},r),{},{panes:o.map(function(l){var g=l.label,u=l.key,d=Wn(l,wee);return I.createElement(Ax,lt({tab:g,key:u,tabKey:u},d))})});return n(a,Nw)}return I.createElement(Nw,r)},Vee=["key","forceRender","style","className","destroyInactiveTabPane"],kee=function(t){var n=t.id,r=t.activeKey,i=t.animated,o=t.tabPosition,a=t.destroyInactiveTabPane,l=I.useContext(Gb),g=l.prefixCls,u=l.tabs,d=i.tabPane,C="".concat(g,"-tabpane");return I.createElement("div",{className:Re("".concat(g,"-content-holder"))},I.createElement("div",{className:Re("".concat(g,"-content"),"".concat(g,"-content-").concat(o),fe({},"".concat(g,"-content-animated"),d))},u.map(function(f){var m=f.key,b=f.forceRender,p=f.style,y=f.className,S=f.destroyInactiveTabPane,v=Wn(f,Vee),B=m===r;return I.createElement(is,lt({key:m,visible:B,forceRender:b,removeOnLeave:!!(a||S),leavedClassName:"".concat(C,"-hidden")},i.tabPaneMotion),function(W,J){var H=W.style,x=W.className;return I.createElement(Ax,lt({},v,{prefixCls:C,id:n,tabKey:m,animated:d,active:B,style:he(he({},p),H),className:Re(y,x),ref:J}))})})))};function Nee(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{inkBar:!0,tabPane:!1},t;return e===!1?t={inkBar:!1,tabPane:!1}:e===!0?t={inkBar:!0,tabPane:!1}:t=he({inkBar:!0},wt(e)==="object"?e:{}),t.tabPaneMotion&&t.tabPane===void 0&&(t.tabPane=!0),!t.tabPaneMotion&&t.tabPane&&(t.tabPane=!1),t}var Xee=["id","prefixCls","className","items","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","more","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll","getPopupContainer","popupClassName","indicator"],Xw=0,Jee=I.forwardRef(function(e,t){var n=e.id,r=e.prefixCls,i=r===void 0?"rc-tabs":r,o=e.className,a=e.items,l=e.direction,g=e.activeKey,u=e.defaultActiveKey,d=e.editable,C=e.animated,f=e.tabPosition,m=f===void 0?"top":f,b=e.tabBarGutter,p=e.tabBarStyle,y=e.tabBarExtraContent,S=e.locale,v=e.more,B=e.destroyInactiveTabPane,W=e.renderTabBar,J=e.onChange,H=e.onTabClick,x=e.onTabScroll,E=e.getPopupContainer,F=e.popupClassName,w=e.indicator,V=Wn(e,Xee),Y=I.useMemo(function(){return(a||[]).filter(function(Ne){return Ne&&wt(Ne)==="object"&&"key"in Ne})},[a]),M=l==="rtl",L=Nee(C),$=I.useState(!1),U=xe($,2),_=U[0],P=U[1];I.useEffect(function(){P(DZ())},[]);var ee=qi(function(){var Ne;return(Ne=Y[0])===null||Ne===void 0?void 0:Ne.key},{value:g,defaultValue:u}),j=xe(ee,2),O=j[0],X=j[1],D=I.useState(function(){return Y.findIndex(function(Ne){return Ne.key===O})}),z=xe(D,2),Q=z[0],ne=z[1];I.useEffect(function(){var Ne=Y.findIndex(function(ae){return ae.key===O});if(Ne===-1){var Ie;Ne=Math.max(0,Math.min(Q,Y.length-1)),X((Ie=Y[Ne])===null||Ie===void 0?void 0:Ie.key)}ne(Ne)},[Y.map(function(Ne){return Ne.key}).join("_"),O,Q]);var ce=qi(null,{value:n}),se=xe(ce,2),ue=se[0],ve=se[1];I.useEffect(function(){n||(ve("rc-tabs-".concat(Xw)),Xw+=1)},[]);function Ae(Ne,Ie){H==null||H(Ne,Ie);var ae=Ne!==O;X(Ne),ae&&(J==null||J(Ne))}var be={id:ue,activeKey:O,animated:L,tabPosition:m,rtl:M,mobile:_},me=he(he({},be),{},{editable:d,locale:S,more:v,tabBarGutter:b,onTabClick:Ae,onTabScroll:x,extra:y,style:p,panes:null,getPopupContainer:E,popupClassName:F,indicator:w});return I.createElement(Gb.Provider,{value:{tabs:Y,prefixCls:i}},I.createElement("div",lt({ref:t,id:n,className:Re(i,"".concat(i,"-").concat(m),fe(fe(fe({},"".concat(i,"-mobile"),_),"".concat(i,"-editable"),d),"".concat(i,"-rtl"),M),o)},V),I.createElement(Wee,lt({},me,{renderTabBar:W})),I.createElement(kee,lt({destroyInactiveTabPane:B},be,{animated:L}))))});const xee={motionAppear:!1,motionEnter:!0,motionLeave:!0};function Hee(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{inkBar:!0,tabPane:!1},n;return t===!1?n={inkBar:!1,tabPane:!1}:t===!0?n={inkBar:!0,tabPane:!0}:n=Object.assign({inkBar:!0},typeof t=="object"?t:{}),n.tabPane&&(n.tabPaneMotion=Object.assign(Object.assign({},xee),{motionName:Jg(e,"switch")})),n}var Yee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Eee(e){return e.filter(t=>t)}function Fee(e,t){if(e)return e;const n=el(t).map(r=>{if(I.isValidElement(r)){const{key:i,props:o}=r,a=o||{},{tab:l}=a,g=Yee(a,["tab"]);return Object.assign(Object.assign({key:String(i)},g),{label:l})}return null});return Eee(n)}const Kee=e=>{const{componentCls:t,motionDurationSlow:n}=e;return[{[t]:{[`${t}-switch`]:{"&-appear, &-enter":{transition:"none","&-start":{opacity:0},"&-active":{opacity:1,transition:`opacity ${n}`}},"&-leave":{position:"absolute",transition:"none",inset:0,"&-start":{opacity:1},"&-active":{opacity:0,transition:`opacity ${n}`}}}}},[jc(e,"slide-up"),jc(e,"slide-down")]]},Lee=e=>{const{componentCls:t,tabsCardPadding:n,cardBg:r,cardGutter:i,colorBorderSecondary:o,itemSelectedColor:a}=e;return{[`${t}-card`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{margin:0,padding:n,background:r,border:`${Ve(e.lineWidth)} ${e.lineType} ${o}`,transition:`all ${e.motionDurationSlow} ${e.motionEaseInOut}`},[`${t}-tab-active`]:{color:a,background:e.colorBgContainer},[`${t}-tab-focus`]:Object.assign({},MI(e,-3)),[`${t}-ink-bar`]:{visibility:"hidden"},[`& ${t}-tab${t}-tab-focus ${t}-tab-btn`]:{outline:"none"}},[`&${t}-top, &${t}-bottom`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab + ${t}-tab`]:{marginLeft:{_skip_check_:!0,value:Ve(i)}}}},[`&${t}-top`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{borderRadius:`${Ve(e.borderRadiusLG)} ${Ve(e.borderRadiusLG)} 0 0`},[`${t}-tab-active`]:{borderBottomColor:e.colorBgContainer}}},[`&${t}-bottom`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{borderRadius:`0 0 ${Ve(e.borderRadiusLG)} ${Ve(e.borderRadiusLG)}`},[`${t}-tab-active`]:{borderTopColor:e.colorBgContainer}}},[`&${t}-left, &${t}-right`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab + ${t}-tab`]:{marginTop:Ve(i)}}},[`&${t}-left`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{borderRadius:{_skip_check_:!0,value:`${Ve(e.borderRadiusLG)} 0 0 ${Ve(e.borderRadiusLG)}`}},[`${t}-tab-active`]:{borderRightColor:{_skip_check_:!0,value:e.colorBgContainer}}}},[`&${t}-right`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab`]:{borderRadius:{_skip_check_:!0,value:`0 ${Ve(e.borderRadiusLG)} ${Ve(e.borderRadiusLG)} 0`}},[`${t}-tab-active`]:{borderLeftColor:{_skip_check_:!0,value:e.colorBgContainer}}}}}}},Mee=e=>{const{componentCls:t,itemHoverColor:n,dropdownEdgeChildVerticalPadding:r}=e;return{[`${t}-dropdown`]:Object.assign(Object.assign({},Ca(e)),{position:"absolute",top:-9999,left:{_skip_check_:!0,value:-9999},zIndex:e.zIndexPopup,display:"block","&-hidden":{display:"none"},[`${t}-dropdown-menu`]:{maxHeight:e.tabsDropdownHeight,margin:0,padding:`${Ve(r)} 0`,overflowX:"hidden",overflowY:"auto",textAlign:{_skip_check_:!0,value:"left"},listStyleType:"none",backgroundColor:e.colorBgContainer,backgroundClip:"padding-box",borderRadius:e.borderRadiusLG,outline:"none",boxShadow:e.boxShadowSecondary,"&-item":Object.assign(Object.assign({},rd),{display:"flex",alignItems:"center",minWidth:e.tabsDropdownWidth,margin:0,padding:`${Ve(e.paddingXXS)} ${Ve(e.paddingSM)}`,color:e.colorText,fontWeight:"normal",fontSize:e.fontSize,lineHeight:e.lineHeight,cursor:"pointer",transition:`all ${e.motionDurationSlow}`,"> span":{flex:1,whiteSpace:"nowrap"},"&-remove":{flex:"none",marginLeft:{_skip_check_:!0,value:e.marginSM},color:e.colorTextDescription,fontSize:e.fontSizeSM,background:"transparent",border:0,cursor:"pointer","&:hover":{color:n}},"&:hover":{background:e.controlItemBgHover},"&-disabled":{"&, &:hover":{color:e.colorTextDisabled,background:"transparent",cursor:"not-allowed"}}})}})}},Tee=e=>{const{componentCls:t,margin:n,colorBorderSecondary:r,horizontalMargin:i,verticalItemPadding:o,verticalItemMargin:a,calc:l}=e;return{[`${t}-top, ${t}-bottom`]:{flexDirection:"column",[`> ${t}-nav, > div > ${t}-nav`]:{margin:i,"&::before":{position:"absolute",right:{_skip_check_:!0,value:0},left:{_skip_check_:!0,value:0},borderBottom:`${Ve(e.lineWidth)} ${e.lineType} ${r}`,content:"''"},[`${t}-ink-bar`]:{height:e.lineWidthBold,"&-animated":{transition:`width ${e.motionDurationSlow}, left ${e.motionDurationSlow},
            right ${e.motionDurationSlow}`}},[`${t}-nav-wrap`]:{"&::before, &::after":{top:0,bottom:0,width:e.controlHeight},"&::before":{left:{_skip_check_:!0,value:0},boxShadow:e.boxShadowTabsOverflowLeft},"&::after":{right:{_skip_check_:!0,value:0},boxShadow:e.boxShadowTabsOverflowRight},[`&${t}-nav-wrap-ping-left::before`]:{opacity:1},[`&${t}-nav-wrap-ping-right::after`]:{opacity:1}}}},[`${t}-top`]:{[`> ${t}-nav,
        > div > ${t}-nav`]:{"&::before":{bottom:0},[`${t}-ink-bar`]:{bottom:0}}},[`${t}-bottom`]:{[`> ${t}-nav, > div > ${t}-nav`]:{order:1,marginTop:n,marginBottom:0,"&::before":{top:0},[`${t}-ink-bar`]:{top:0}},[`> ${t}-content-holder, > div > ${t}-content-holder`]:{order:0}},[`${t}-left, ${t}-right`]:{[`> ${t}-nav, > div > ${t}-nav`]:{flexDirection:"column",minWidth:l(e.controlHeight).mul(1.25).equal(),[`${t}-tab`]:{padding:o,textAlign:"center"},[`${t}-tab + ${t}-tab`]:{margin:a},[`${t}-nav-wrap`]:{flexDirection:"column","&::before, &::after":{right:{_skip_check_:!0,value:0},left:{_skip_check_:!0,value:0},height:e.controlHeight},"&::before":{top:0,boxShadow:e.boxShadowTabsOverflowTop},"&::after":{bottom:0,boxShadow:e.boxShadowTabsOverflowBottom},[`&${t}-nav-wrap-ping-top::before`]:{opacity:1},[`&${t}-nav-wrap-ping-bottom::after`]:{opacity:1}},[`${t}-ink-bar`]:{width:e.lineWidthBold,"&-animated":{transition:`height ${e.motionDurationSlow}, top ${e.motionDurationSlow}`}},[`${t}-nav-list, ${t}-nav-operations`]:{flex:"1 0 auto",flexDirection:"column"}}},[`${t}-left`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-ink-bar`]:{right:{_skip_check_:!0,value:0}}},[`> ${t}-content-holder, > div > ${t}-content-holder`]:{marginLeft:{_skip_check_:!0,value:Ve(l(e.lineWidth).mul(-1).equal())},borderLeft:{_skip_check_:!0,value:`${Ve(e.lineWidth)} ${e.lineType} ${e.colorBorder}`},[`> ${t}-content > ${t}-tabpane`]:{paddingLeft:{_skip_check_:!0,value:e.paddingLG}}}},[`${t}-right`]:{[`> ${t}-nav, > div > ${t}-nav`]:{order:1,[`${t}-ink-bar`]:{left:{_skip_check_:!0,value:0}}},[`> ${t}-content-holder, > div > ${t}-content-holder`]:{order:0,marginRight:{_skip_check_:!0,value:l(e.lineWidth).mul(-1).equal()},borderRight:{_skip_check_:!0,value:`${Ve(e.lineWidth)} ${e.lineType} ${e.colorBorder}`},[`> ${t}-content > ${t}-tabpane`]:{paddingRight:{_skip_check_:!0,value:e.paddingLG}}}}}},zee=e=>{const{componentCls:t,cardPaddingSM:n,cardPaddingLG:r,horizontalItemPaddingSM:i,horizontalItemPaddingLG:o}=e;return{[t]:{"&-small":{[`> ${t}-nav`]:{[`${t}-tab`]:{padding:i,fontSize:e.titleFontSizeSM}}},"&-large":{[`> ${t}-nav`]:{[`${t}-tab`]:{padding:o,fontSize:e.titleFontSizeLG}}}},[`${t}-card`]:{[`&${t}-small`]:{[`> ${t}-nav`]:{[`${t}-tab`]:{padding:n}},[`&${t}-bottom`]:{[`> ${t}-nav ${t}-tab`]:{borderRadius:`0 0 ${Ve(e.borderRadius)} ${Ve(e.borderRadius)}`}},[`&${t}-top`]:{[`> ${t}-nav ${t}-tab`]:{borderRadius:`${Ve(e.borderRadius)} ${Ve(e.borderRadius)} 0 0`}},[`&${t}-right`]:{[`> ${t}-nav ${t}-tab`]:{borderRadius:{_skip_check_:!0,value:`0 ${Ve(e.borderRadius)} ${Ve(e.borderRadius)} 0`}}},[`&${t}-left`]:{[`> ${t}-nav ${t}-tab`]:{borderRadius:{_skip_check_:!0,value:`${Ve(e.borderRadius)} 0 0 ${Ve(e.borderRadius)}`}}}},[`&${t}-large`]:{[`> ${t}-nav`]:{[`${t}-tab`]:{padding:r}}}}}},Dee=e=>{const{componentCls:t,itemActiveColor:n,itemHoverColor:r,iconCls:i,tabsHorizontalItemMargin:o,horizontalItemPadding:a,itemSelectedColor:l,itemColor:g}=e,u=`${t}-tab`;return{[u]:{position:"relative",WebkitTouchCallout:"none",WebkitTapHighlightColor:"transparent",display:"inline-flex",alignItems:"center",padding:a,fontSize:e.titleFontSize,background:"transparent",border:0,outline:"none",cursor:"pointer",color:g,"&-btn, &-remove":{"&:focus:not(:focus-visible), &:active":{color:n}},"&-btn":{outline:"none",transition:`all ${e.motionDurationSlow}`,[`${u}-icon:not(:last-child)`]:{marginInlineEnd:e.marginSM}},"&-remove":Object.assign({flex:"none",marginRight:{_skip_check_:!0,value:e.calc(e.marginXXS).mul(-1).equal()},marginLeft:{_skip_check_:!0,value:e.marginXS},color:e.colorTextDescription,fontSize:e.fontSizeSM,background:"transparent",border:"none",outline:"none",cursor:"pointer",transition:`all ${e.motionDurationSlow}`,"&:hover":{color:e.colorTextHeading}},Ds(e)),"&:hover":{color:r},[`&${u}-active ${u}-btn`]:{color:l,textShadow:e.tabsActiveTextShadow},[`&${u}-focus ${u}-btn`]:Object.assign({},MI(e)),[`&${u}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed"},[`&${u}-disabled ${u}-btn, &${u}-disabled ${t}-remove`]:{"&:focus, &:active":{color:e.colorTextDisabled}},[`& ${u}-remove ${i}`]:{margin:0},[`${i}:not(:last-child)`]:{marginRight:{_skip_check_:!0,value:e.marginSM}}},[`${u} + ${u}`]:{margin:{_skip_check_:!0,value:o}}}},Pee=e=>{const{componentCls:t,tabsHorizontalItemMarginRTL:n,iconCls:r,cardGutter:i,calc:o}=e;return{[`${t}-rtl`]:{direction:"rtl",[`${t}-nav`]:{[`${t}-tab`]:{margin:{_skip_check_:!0,value:n},[`${t}-tab:last-of-type`]:{marginLeft:{_skip_check_:!0,value:0}},[r]:{marginRight:{_skip_check_:!0,value:0},marginLeft:{_skip_check_:!0,value:Ve(e.marginSM)}},[`${t}-tab-remove`]:{marginRight:{_skip_check_:!0,value:Ve(e.marginXS)},marginLeft:{_skip_check_:!0,value:Ve(o(e.marginXXS).mul(-1).equal())},[r]:{margin:0}}}},[`&${t}-left`]:{[`> ${t}-nav`]:{order:1},[`> ${t}-content-holder`]:{order:0}},[`&${t}-right`]:{[`> ${t}-nav`]:{order:0},[`> ${t}-content-holder`]:{order:1}},[`&${t}-card${t}-top, &${t}-card${t}-bottom`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-tab + ${t}-tab`]:{marginRight:{_skip_check_:!0,value:i},marginLeft:{_skip_check_:!0,value:0}}}}},[`${t}-dropdown-rtl`]:{direction:"rtl"},[`${t}-menu-item`]:{[`${t}-dropdown-rtl`]:{textAlign:{_skip_check_:!0,value:"right"}}}}},Oee=e=>{const{componentCls:t,tabsCardPadding:n,cardHeight:r,cardGutter:i,itemHoverColor:o,itemActiveColor:a,colorBorderSecondary:l}=e;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign({},Ca(e)),{display:"flex",[`> ${t}-nav, > div > ${t}-nav`]:{position:"relative",display:"flex",flex:"none",alignItems:"center",[`${t}-nav-wrap`]:{position:"relative",display:"flex",flex:"auto",alignSelf:"stretch",overflow:"hidden",whiteSpace:"nowrap",transform:"translate(0)","&::before, &::after":{position:"absolute",zIndex:1,opacity:0,transition:`opacity ${e.motionDurationSlow}`,content:"''",pointerEvents:"none"}},[`${t}-nav-list`]:{position:"relative",display:"flex",transition:`opacity ${e.motionDurationSlow}`},[`${t}-nav-operations`]:{display:"flex",alignSelf:"stretch"},[`${t}-nav-operations-hidden`]:{position:"absolute",visibility:"hidden",pointerEvents:"none"},[`${t}-nav-more`]:{position:"relative",padding:n,background:"transparent",border:0,color:e.colorText,"&::after":{position:"absolute",right:{_skip_check_:!0,value:0},bottom:0,left:{_skip_check_:!0,value:0},height:e.calc(e.controlHeightLG).div(8).equal(),transform:"translateY(100%)",content:"''"}},[`${t}-nav-add`]:Object.assign({minWidth:r,marginLeft:{_skip_check_:!0,value:i},padding:Ve(e.paddingXS),background:"transparent",border:`${Ve(e.lineWidth)} ${e.lineType} ${l}`,borderRadius:`${Ve(e.borderRadiusLG)} ${Ve(e.borderRadiusLG)} 0 0`,outline:"none",cursor:"pointer",color:e.colorText,transition:`all ${e.motionDurationSlow} ${e.motionEaseInOut}`,"&:hover":{color:o},"&:active, &:focus:not(:focus-visible)":{color:a}},Ds(e,-3))},[`${t}-extra-content`]:{flex:"none"},[`${t}-ink-bar`]:{position:"absolute",background:e.inkBarColor,pointerEvents:"none"}}),Dee(e)),{[`${t}-content`]:{position:"relative",width:"100%"},[`${t}-content-holder`]:{flex:"auto",minWidth:0,minHeight:0},[`${t}-tabpane`]:Object.assign(Object.assign({},Ds(e)),{"&-hidden":{display:"none"}})}),[`${t}-centered`]:{[`> ${t}-nav, > div > ${t}-nav`]:{[`${t}-nav-wrap`]:{[`&:not([class*='${t}-nav-wrap-ping']) > ${t}-nav-list`]:{margin:"auto"}}}}}},_ee=e=>{const t=e.controlHeightLG;return{zIndexPopup:e.zIndexPopupBase+50,cardBg:e.colorFillAlter,cardHeight:t,cardPadding:`${(t-Math.round(e.fontSize*e.lineHeight))/2-e.lineWidth}px ${e.padding}px`,cardPaddingSM:`${e.paddingXXS*1.5}px ${e.padding}px`,cardPaddingLG:`${e.paddingXS}px ${e.padding}px ${e.paddingXXS*1.5}px`,titleFontSize:e.fontSize,titleFontSizeLG:e.fontSizeLG,titleFontSizeSM:e.fontSize,inkBarColor:e.colorPrimary,horizontalMargin:`0 0 ${e.margin}px 0`,horizontalItemGutter:32,horizontalItemMargin:"",horizontalItemMarginRTL:"",horizontalItemPadding:`${e.paddingSM}px 0`,horizontalItemPaddingSM:`${e.paddingXS}px 0`,horizontalItemPaddingLG:`${e.padding}px 0`,verticalItemPadding:`${e.paddingXS}px ${e.paddingLG}px`,verticalItemMargin:`${e.margin}px 0 0 0`,itemColor:e.colorText,itemSelectedColor:e.colorPrimary,itemHoverColor:e.colorPrimaryHover,itemActiveColor:e.colorPrimaryActive,cardGutter:e.marginXXS/2}},Uee=Gi("Tabs",e=>{const t=Br(e,{tabsCardPadding:e.cardPadding,dropdownEdgeChildVerticalPadding:e.paddingXXS,tabsActiveTextShadow:"0 0 0.25px currentcolor",tabsDropdownHeight:200,tabsDropdownWidth:120,tabsHorizontalItemMargin:`0 0 0 ${Ve(e.horizontalItemGutter)}`,tabsHorizontalItemMarginRTL:`0 0 0 ${Ve(e.horizontalItemGutter)}`});return[zee(t),Pee(t),Tee(t),Mee(t),Lee(t),Oee(t),Kee(t)]},_ee),jee=()=>null;var Qee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const px=e=>{var t,n,r,i,o,a,l,g,u,d,C;const{type:f,className:m,rootClassName:b,size:p,onEdit:y,hideAdd:S,centered:v,addIcon:B,removeIcon:W,moreIcon:J,more:H,popupClassName:x,children:E,items:F,animated:w,style:V,indicatorSize:Y,indicator:M}=e,L=Qee(e,["type","className","rootClassName","size","onEdit","hideAdd","centered","addIcon","removeIcon","moreIcon","more","popupClassName","children","items","animated","style","indicatorSize","indicator"]),{prefixCls:$}=L,{direction:U,tabs:_,getPrefixCls:P,getPopupContainer:ee}=I.useContext(dn),j=P("tabs",$),O=gs(j),[X,D,z]=Uee(j,O);let Q;f==="editable-card"&&(Q={onEdit:(be,me)=>{let{key:Ne,event:Ie}=me;y==null||y(be==="add"?Ie:Ne,be)},removeIcon:(t=W??(_==null?void 0:_.removeIcon))!==null&&t!==void 0?t:I.createElement(aC,null),addIcon:(B??(_==null?void 0:_.addIcon))||I.createElement(fee,null),showAdd:S!==!0});const ne=P(),ce=Os(p),se=Fee(F,E),ue=Hee(j,w),ve=Object.assign(Object.assign({},_==null?void 0:_.style),V),Ae={align:(n=M==null?void 0:M.align)!==null&&n!==void 0?n:(r=_==null?void 0:_.indicator)===null||r===void 0?void 0:r.align,size:(l=(o=(i=M==null?void 0:M.size)!==null&&i!==void 0?i:Y)!==null&&o!==void 0?o:(a=_==null?void 0:_.indicator)===null||a===void 0?void 0:a.size)!==null&&l!==void 0?l:_==null?void 0:_.indicatorSize};return X(I.createElement(Jee,Object.assign({direction:U,getPopupContainer:ee},L,{items:se,className:Re({[`${j}-${ce}`]:ce,[`${j}-card`]:["card","editable-card"].includes(f),[`${j}-editable-card`]:f==="editable-card",[`${j}-centered`]:v},_==null?void 0:_.className,m,b,D,z,O),popupClassName:Re(x,D,z,O),style:ve,editable:Q,more:Object.assign({icon:(C=(d=(u=(g=_==null?void 0:_.more)===null||g===void 0?void 0:g.icon)!==null&&u!==void 0?u:_==null?void 0:_.moreIcon)!==null&&d!==void 0?d:J)!==null&&C!==void 0?C:I.createElement(a1,null),transitionName:`${ne}-slide-up`},H),prefixCls:j,animated:ue,indicator:Ae})))};px.TabPane=jee;var $ee=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const bx=e=>{var{prefixCls:t,className:n,hoverable:r=!0}=e,i=$ee(e,["prefixCls","className","hoverable"]);const{getPrefixCls:o}=I.useContext(dn),a=o("card",t),l=Re(`${a}-grid`,n,{[`${a}-grid-hoverable`]:r});return I.createElement("div",Object.assign({},i,{className:l}))},qee=e=>{const{antCls:t,componentCls:n,headerHeight:r,headerPadding:i,tabsMarginBottom:o}=e;return Object.assign(Object.assign({display:"flex",justifyContent:"center",flexDirection:"column",minHeight:r,marginBottom:-1,padding:`0 ${Ve(i)}`,color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:e.headerFontSize,background:e.headerBg,borderBottom:`${Ve(e.lineWidth)} ${e.lineType} ${e.colorBorderSecondary}`,borderRadius:`${Ve(e.borderRadiusLG)} ${Ve(e.borderRadiusLG)} 0 0`},Uc()),{"&-wrapper":{width:"100%",display:"flex",alignItems:"center"},"&-title":Object.assign(Object.assign({display:"inline-block",flex:1},rd),{[`
          > ${n}-typography,
          > ${n}-typography-edit-content
        `]:{insetInlineStart:0,marginTop:0,marginBottom:0}}),[`${t}-tabs-top`]:{clear:"both",marginBottom:o,color:e.colorText,fontWeight:"normal",fontSize:e.fontSize,"&-bar":{borderBottom:`${Ve(e.lineWidth)} ${e.lineType} ${e.colorBorderSecondary}`}}})},ete=e=>{const{cardPaddingBase:t,colorBorderSecondary:n,cardShadow:r,lineWidth:i}=e;return{width:"33.33%",padding:t,border:0,borderRadius:0,boxShadow:`
      ${Ve(i)} 0 0 0 ${n},
      0 ${Ve(i)} 0 0 ${n},
      ${Ve(i)} ${Ve(i)} 0 0 ${n},
      ${Ve(i)} 0 0 0 ${n} inset,
      0 ${Ve(i)} 0 0 ${n} inset;
    `,transition:`all ${e.motionDurationMid}`,"&-hoverable:hover":{position:"relative",zIndex:1,boxShadow:r}}},tte=e=>{const{componentCls:t,iconCls:n,actionsLiMargin:r,cardActionsIconSize:i,colorBorderSecondary:o,actionsBg:a}=e;return Object.assign(Object.assign({margin:0,padding:0,listStyle:"none",background:a,borderTop:`${Ve(e.lineWidth)} ${e.lineType} ${o}`,display:"flex",borderRadius:`0 0 ${Ve(e.borderRadiusLG)} ${Ve(e.borderRadiusLG)}`},Uc()),{"& > li":{margin:r,color:e.colorTextDescription,textAlign:"center","> span":{position:"relative",display:"block",minWidth:e.calc(e.cardActionsIconSize).mul(2).equal(),fontSize:e.fontSize,lineHeight:e.lineHeight,cursor:"pointer","&:hover":{color:e.colorPrimary,transition:`color ${e.motionDurationMid}`},[`a:not(${t}-btn), > ${n}`]:{display:"inline-block",width:"100%",color:e.colorTextDescription,lineHeight:Ve(e.fontHeight),transition:`color ${e.motionDurationMid}`,"&:hover":{color:e.colorPrimary}},[`> ${n}`]:{fontSize:i,lineHeight:Ve(e.calc(i).mul(e.lineHeight).equal())}},"&:not(:last-child)":{borderInlineEnd:`${Ve(e.lineWidth)} ${e.lineType} ${o}`}}})},nte=e=>Object.assign(Object.assign({margin:`${Ve(e.calc(e.marginXXS).mul(-1).equal())} 0`,display:"flex"},Uc()),{"&-avatar":{paddingInlineEnd:e.padding},"&-detail":{overflow:"hidden",flex:1,"> div:not(:last-child)":{marginBottom:e.marginXS}},"&-title":Object.assign({color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:e.fontSizeLG},rd),"&-description":{color:e.colorTextDescription}}),rte=e=>{const{componentCls:t,colorFillAlter:n,headerPadding:r,bodyPadding:i}=e;return{[`${t}-head`]:{padding:`0 ${Ve(r)}`,background:n,"&-title":{fontSize:e.fontSize}},[`${t}-body`]:{padding:`${Ve(e.padding)} ${Ve(i)}`}}},ite=e=>{const{componentCls:t}=e;return{overflow:"hidden",[`${t}-body`]:{userSelect:"none"}}},ote=e=>{const{componentCls:t,cardShadow:n,cardHeadPadding:r,colorBorderSecondary:i,boxShadowTertiary:o,bodyPadding:a,extraColor:l}=e;return{[t]:Object.assign(Object.assign({},Ca(e)),{position:"relative",background:e.colorBgContainer,borderRadius:e.borderRadiusLG,[`&:not(${t}-bordered)`]:{boxShadow:o},[`${t}-head`]:qee(e),[`${t}-extra`]:{marginInlineStart:"auto",color:l,fontWeight:"normal",fontSize:e.fontSize},[`${t}-body`]:Object.assign({padding:a,borderRadius:`0 0 ${Ve(e.borderRadiusLG)} ${Ve(e.borderRadiusLG)}`},Uc()),[`${t}-grid`]:ete(e),[`${t}-cover`]:{"> *":{display:"block",width:"100%",borderRadius:`${Ve(e.borderRadiusLG)} ${Ve(e.borderRadiusLG)} 0 0`}},[`${t}-actions`]:tte(e),[`${t}-meta`]:nte(e)}),[`${t}-bordered`]:{border:`${Ve(e.lineWidth)} ${e.lineType} ${i}`,[`${t}-cover`]:{marginTop:-1,marginInlineStart:-1,marginInlineEnd:-1}},[`${t}-hoverable`]:{cursor:"pointer",transition:`box-shadow ${e.motionDurationMid}, border-color ${e.motionDurationMid}`,"&:hover":{borderColor:"transparent",boxShadow:n}},[`${t}-contain-grid`]:{borderRadius:`${Ve(e.borderRadiusLG)} ${Ve(e.borderRadiusLG)} 0 0 `,[`${t}-body`]:{display:"flex",flexWrap:"wrap"},[`&:not(${t}-loading) ${t}-body`]:{marginBlockStart:e.calc(e.lineWidth).mul(-1).equal(),marginInlineStart:e.calc(e.lineWidth).mul(-1).equal(),padding:0}},[`${t}-contain-tabs`]:{[`> div${t}-head`]:{minHeight:0,[`${t}-head-title, ${t}-extra`]:{paddingTop:r}}},[`${t}-type-inner`]:rte(e),[`${t}-loading`]:ite(e),[`${t}-rtl`]:{direction:"rtl"}}},ate=e=>{const{componentCls:t,bodyPaddingSM:n,headerPaddingSM:r,headerHeightSM:i,headerFontSizeSM:o}=e;return{[`${t}-small`]:{[`> ${t}-head`]:{minHeight:i,padding:`0 ${Ve(r)}`,fontSize:o,[`> ${t}-head-wrapper`]:{[`> ${t}-extra`]:{fontSize:e.fontSize}}},[`> ${t}-body`]:{padding:n}},[`${t}-small${t}-contain-tabs`]:{[`> ${t}-head`]:{[`${t}-head-title, ${t}-extra`]:{paddingTop:0,display:"flex",alignItems:"center"}}}}},lte=e=>{var t,n;return{headerBg:"transparent",headerFontSize:e.fontSizeLG,headerFontSizeSM:e.fontSize,headerHeight:e.fontSizeLG*e.lineHeightLG+e.padding*2,headerHeightSM:e.fontSize*e.lineHeight+e.paddingXS*2,actionsBg:e.colorBgContainer,actionsLiMargin:`${e.paddingSM}px 0`,tabsMarginBottom:-e.padding-e.lineWidth,extraColor:e.colorText,bodyPaddingSM:12,headerPaddingSM:12,bodyPadding:(t=e.bodyPadding)!==null&&t!==void 0?t:e.paddingLG,headerPadding:(n=e.headerPadding)!==null&&n!==void 0?n:e.paddingLG}},ste=Gi("Card",e=>{const t=Br(e,{cardShadow:e.boxShadowCard,cardHeadPadding:e.padding,cardPaddingBase:e.paddingLG,cardActionsIconSize:e.fontSize});return[ote(t),ate(t)]},lte);var Jw=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const gte=e=>{const{actionClasses:t,actions:n=[],actionStyle:r}=e;return I.createElement("ul",{className:t,style:r},n.map((i,o)=>{const a=`action-${o}`;return I.createElement("li",{style:{width:`${100/n.length}%`},key:a},I.createElement("span",null,i))}))},cte=I.forwardRef((e,t)=>{const{prefixCls:n,className:r,rootClassName:i,style:o,extra:a,headStyle:l={},bodyStyle:g={},title:u,loading:d,bordered:C=!0,size:f,type:m,cover:b,actions:p,tabList:y,children:S,activeTabKey:v,defaultActiveTabKey:B,tabBarExtraContent:W,hoverable:J,tabProps:H={},classNames:x,styles:E}=e,F=Jw(e,["prefixCls","className","rootClassName","style","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps","classNames","styles"]),{getPrefixCls:w,direction:V,card:Y}=I.useContext(dn),M=Fe=>{var ke;(ke=e.onTabChange)===null||ke===void 0||ke.call(e,Fe)},L=Fe=>{var ke;return Re((ke=Y==null?void 0:Y.classNames)===null||ke===void 0?void 0:ke[Fe],x==null?void 0:x[Fe])},$=Fe=>{var ke;return Object.assign(Object.assign({},(ke=Y==null?void 0:Y.styles)===null||ke===void 0?void 0:ke[Fe]),E==null?void 0:E[Fe])},U=I.useMemo(()=>{let Fe=!1;return I.Children.forEach(S,ke=>{(ke==null?void 0:ke.type)===bx&&(Fe=!0)}),Fe},[S]),_=w("card",n),[P,ee,j]=ste(_),O=I.createElement(su,{loading:!0,active:!0,paragraph:{rows:4},title:!1},S),X=v!==void 0,D=Object.assign(Object.assign({},H),{[X?"activeKey":"defaultActiveKey"]:X?v:B,tabBarExtraContent:W});let z;const Q=Os(f),ne=!Q||Q==="default"?"large":Q,ce=y?I.createElement(px,Object.assign({size:ne},D,{className:`${_}-head-tabs`,onChange:M,items:y.map(Fe=>{var{tab:ke}=Fe,ze=Jw(Fe,["tab"]);return Object.assign({label:ke},ze)})})):null;if(u||a||ce){const Fe=Re(`${_}-head`,L("header")),ke=Re(`${_}-head-title`,L("title")),ze=Re(`${_}-extra`,L("extra")),He=Object.assign(Object.assign({},l),$("header"));z=I.createElement("div",{className:Fe,style:He},I.createElement("div",{className:`${_}-head-wrapper`},u&&I.createElement("div",{className:ke,style:$("title")},u),a&&I.createElement("div",{className:ze,style:$("extra")},a)),ce)}const se=Re(`${_}-cover`,L("cover")),ue=b?I.createElement("div",{className:se,style:$("cover")},b):null,ve=Re(`${_}-body`,L("body")),Ae=Object.assign(Object.assign({},g),$("body")),be=I.createElement("div",{className:ve,style:Ae},d?O:S),me=Re(`${_}-actions`,L("actions")),Ne=p!=null&&p.length?I.createElement(gte,{actionClasses:me,actionStyle:$("actions"),actions:p}):null,Ie=Pi(F,["onTabChange"]),ae=Re(_,Y==null?void 0:Y.className,{[`${_}-loading`]:d,[`${_}-bordered`]:C,[`${_}-hoverable`]:J,[`${_}-contain-grid`]:U,[`${_}-contain-tabs`]:y==null?void 0:y.length,[`${_}-${Q}`]:Q,[`${_}-type-${m}`]:!!m,[`${_}-rtl`]:V==="rtl"},r,i,ee,j),Ee=Object.assign(Object.assign({},Y==null?void 0:Y.style),o);return P(I.createElement("div",Object.assign({ref:t},Ie,{className:ae,style:Ee}),z,ue,be,Ne))});var ute=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const dte=e=>{const{prefixCls:t,className:n,avatar:r,title:i,description:o}=e,a=ute(e,["prefixCls","className","avatar","title","description"]),{getPrefixCls:l}=I.useContext(dn),g=l("card",t),u=Re(`${g}-meta`,n),d=r?I.createElement("div",{className:`${g}-meta-avatar`},r):null,C=i?I.createElement("div",{className:`${g}-meta-title`},i):null,f=o?I.createElement("div",{className:`${g}-meta-description`},o):null,m=C||f?I.createElement("div",{className:`${g}-meta-detail`},C,f):null;return I.createElement("div",Object.assign({},a,{className:u}),d,m)},DI=cte;DI.Grid=bx;DI.Meta=dte;function Ite(e,t,n){var r=n||{},i=r.noTrailing,o=i===void 0?!1:i,a=r.noLeading,l=a===void 0?!1:a,g=r.debounceMode,u=g===void 0?void 0:g,d,C=!1,f=0;function m(){d&&clearTimeout(d)}function b(y){var S=y||{},v=S.upcomingOnly,B=v===void 0?!1:v;m(),C=!B}function p(){for(var y=arguments.length,S=new Array(y),v=0;v<y;v++)S[v]=arguments[v];var B=this,W=Date.now()-f;if(C)return;function J(){f=Date.now(),t.apply(B,S)}function H(){d=void 0}!l&&u&&!d&&J(),m(),u===void 0&&W>e?l?(f=Date.now(),o||(d=setTimeout(u?H:J,e))):J():o!==!0&&(d=setTimeout(u?H:J,u===void 0?e-W:e))}return p.cancel=b,p}function Cte(e,t,n){var r={},i=r.atBegin,o=i===void 0?!1:i;return Ite(e,t,{debounceMode:o!==!1})}function fte(e){return!!(e.addonBefore||e.addonAfter)}function mte(e){return!!(e.prefix||e.suffix||e.allowClear)}function xw(e,t,n){var r=t.cloneNode(!0),i=Object.create(e,{target:{value:r},currentTarget:{value:r}});return r.value=n,typeof t.selectionStart=="number"&&typeof t.selectionEnd=="number"&&(r.selectionStart=t.selectionStart,r.selectionEnd=t.selectionEnd),r.setSelectionRange=function(){t.setSelectionRange.apply(t,arguments)},i}function Vp(e,t,n,r){if(n){var i=t;if(t.type==="click"){i=xw(t,e,""),n(i);return}if(e.type!=="file"&&r!==void 0){i=xw(t,e,r),n(i);return}n(i)}}function yx(e,t){if(e){e.focus(t);var n=t||{},r=n.cursor;if(r){var i=e.value.length;switch(r){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(i,i);break;default:e.setSelectionRange(0,i)}}}}var vx=Ge.forwardRef(function(e,t){var n,r,i,o=e.inputElement,a=e.children,l=e.prefixCls,g=e.prefix,u=e.suffix,d=e.addonBefore,C=e.addonAfter,f=e.className,m=e.style,b=e.disabled,p=e.readOnly,y=e.focused,S=e.triggerFocus,v=e.allowClear,B=e.value,W=e.handleReset,J=e.hidden,H=e.classes,x=e.classNames,E=e.dataAttrs,F=e.styles,w=e.components,V=e.onClear,Y=a??o,M=(w==null?void 0:w.affixWrapper)||"span",L=(w==null?void 0:w.groupWrapper)||"span",$=(w==null?void 0:w.wrapper)||"span",U=(w==null?void 0:w.groupAddon)||"span",_=I.useRef(null),P=function(Ie){var ae;(ae=_.current)!==null&&ae!==void 0&&ae.contains(Ie.target)&&(S==null||S())},ee=mte(e),j=I.cloneElement(Y,{value:B,className:Re((n=Y.props)===null||n===void 0?void 0:n.className,!ee&&(x==null?void 0:x.variant))||null}),O=I.useRef(null);if(Ge.useImperativeHandle(t,function(){return{nativeElement:O.current||_.current}}),ee){var X=null;if(v){var D=!b&&!p&&B,z="".concat(l,"-clear-icon"),Q=wt(v)==="object"&&v!==null&&v!==void 0&&v.clearIcon?v.clearIcon:"";X=Ge.createElement("button",{type:"button",onClick:function(Ie){W==null||W(Ie),V==null||V()},onMouseDown:function(Ie){return Ie.preventDefault()},className:Re(z,fe(fe({},"".concat(z,"-hidden"),!D),"".concat(z,"-has-suffix"),!!u))},Q)}var ne="".concat(l,"-affix-wrapper"),ce=Re(ne,fe(fe(fe(fe(fe({},"".concat(l,"-disabled"),b),"".concat(ne,"-disabled"),b),"".concat(ne,"-focused"),y),"".concat(ne,"-readonly"),p),"".concat(ne,"-input-with-clear-btn"),u&&v&&B),H==null?void 0:H.affixWrapper,x==null?void 0:x.affixWrapper,x==null?void 0:x.variant),se=(u||v)&&Ge.createElement("span",{className:Re("".concat(l,"-suffix"),x==null?void 0:x.suffix),style:F==null?void 0:F.suffix},X,u);j=Ge.createElement(M,lt({className:ce,style:F==null?void 0:F.affixWrapper,onClick:P},E==null?void 0:E.affixWrapper,{ref:_}),g&&Ge.createElement("span",{className:Re("".concat(l,"-prefix"),x==null?void 0:x.prefix),style:F==null?void 0:F.prefix},g),j,se)}if(fte(e)){var ue="".concat(l,"-group"),ve="".concat(ue,"-addon"),Ae="".concat(ue,"-wrapper"),be=Re("".concat(l,"-wrapper"),ue,H==null?void 0:H.wrapper,x==null?void 0:x.wrapper),me=Re(Ae,fe({},"".concat(Ae,"-disabled"),b),H==null?void 0:H.group,x==null?void 0:x.groupWrapper);j=Ge.createElement(L,{className:me,ref:O},Ge.createElement($,{className:be},d&&Ge.createElement(U,{className:ve},d),j,C&&Ge.createElement(U,{className:ve},C)))}return Ge.cloneElement(j,{className:Re((r=j.props)===null||r===void 0?void 0:r.className,f)||null,style:he(he({},(i=j.props)===null||i===void 0?void 0:i.style),m),hidden:J})}),hte=["show"];function Sx(e,t){return I.useMemo(function(){var n={};t&&(n.show=wt(t)==="object"&&t.formatter?t.formatter:!!t),n=he(he({},n),e);var r=n,i=r.show,o=Wn(r,hte);return he(he({},o),{},{show:!!i,showFormatter:typeof i=="function"?i:void 0,strategy:o.strategy||function(a){return a.length}})},[e,t])}var Ate=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","onKeyUp","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","count","type","classes","classNames","styles","onCompositionStart","onCompositionEnd"],pte=I.forwardRef(function(e,t){var n=e.autoComplete,r=e.onChange,i=e.onFocus,o=e.onBlur,a=e.onPressEnter,l=e.onKeyDown,g=e.onKeyUp,u=e.prefixCls,d=u===void 0?"rc-input":u,C=e.disabled,f=e.htmlSize,m=e.className,b=e.maxLength,p=e.suffix,y=e.showCount,S=e.count,v=e.type,B=v===void 0?"text":v,W=e.classes,J=e.classNames,H=e.styles,x=e.onCompositionStart,E=e.onCompositionEnd,F=Wn(e,Ate),w=I.useState(!1),V=xe(w,2),Y=V[0],M=V[1],L=I.useRef(!1),$=I.useRef(!1),U=I.useRef(null),_=I.useRef(null),P=function(Pe){U.current&&yx(U.current,Pe)},ee=qi(e.defaultValue,{value:e.value}),j=xe(ee,2),O=j[0],X=j[1],D=O==null?"":String(O),z=I.useState(null),Q=xe(z,2),ne=Q[0],ce=Q[1],se=Sx(S,y),ue=se.max||b,ve=se.strategy(D),Ae=!!ue&&ve>ue;I.useImperativeHandle(t,function(){var Ye;return{focus:P,blur:function(){var $e;($e=U.current)===null||$e===void 0||$e.blur()},setSelectionRange:function($e,ot,Ct){var pt;(pt=U.current)===null||pt===void 0||pt.setSelectionRange($e,ot,Ct)},select:function(){var $e;($e=U.current)===null||$e===void 0||$e.select()},input:U.current,nativeElement:((Ye=_.current)===null||Ye===void 0?void 0:Ye.nativeElement)||U.current}}),I.useEffect(function(){$.current&&($.current=!1),M(function(Ye){return Ye&&C?!1:Ye})},[C]);var be=function(Pe,$e,ot){var Ct=$e;if(!L.current&&se.exceedFormatter&&se.max&&se.strategy($e)>se.max){if(Ct=se.exceedFormatter($e,{max:se.max}),$e!==Ct){var pt,it;ce([((pt=U.current)===null||pt===void 0?void 0:pt.selectionStart)||0,((it=U.current)===null||it===void 0?void 0:it.selectionEnd)||0])}}else if(ot.source==="compositionEnd")return;X(Ct),U.current&&Vp(U.current,Pe,r,Ct)};I.useEffect(function(){if(ne){var Ye;(Ye=U.current)===null||Ye===void 0||Ye.setSelectionRange.apply(Ye,Gt(ne))}},[ne]);var me=function(Pe){be(Pe,Pe.target.value,{source:"change"})},Ne=function(Pe){L.current=!1,be(Pe,Pe.currentTarget.value,{source:"compositionEnd"}),E==null||E(Pe)},Ie=function(Pe){a&&Pe.key==="Enter"&&!$.current&&($.current=!0,a(Pe)),l==null||l(Pe)},ae=function(Pe){Pe.key==="Enter"&&($.current=!1),g==null||g(Pe)},Ee=function(Pe){M(!0),i==null||i(Pe)},Fe=function(Pe){$.current&&($.current=!1),M(!1),o==null||o(Pe)},ke=function(Pe){X(""),P(),U.current&&Vp(U.current,Pe,r)},ze=Ae&&"".concat(d,"-out-of-range"),He=function(){var Pe=Pi(e,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","count","classes","htmlSize","styles","classNames","onClear"]);return Ge.createElement("input",lt({autoComplete:n},Pe,{onChange:me,onFocus:Ee,onBlur:Fe,onKeyDown:Ie,onKeyUp:ae,className:Re(d,fe({},"".concat(d,"-disabled"),C),J==null?void 0:J.input),style:H==null?void 0:H.input,ref:U,size:f,type:B,onCompositionStart:function(ot){L.current=!0,x==null||x(ot)},onCompositionEnd:Ne}))},Le=function(){var Pe=Number(ue)>0;if(p||se.show){var $e=se.showFormatter?se.showFormatter({value:D,count:ve,maxLength:ue}):"".concat(ve).concat(Pe?" / ".concat(ue):"");return Ge.createElement(Ge.Fragment,null,se.show&&Ge.createElement("span",{className:Re("".concat(d,"-show-count-suffix"),fe({},"".concat(d,"-show-count-has-suffix"),!!p),J==null?void 0:J.count),style:he({},H==null?void 0:H.count)},$e),p)}return null};return Ge.createElement(vx,lt({},F,{prefixCls:d,className:Re(m,ze),handleReset:ke,value:D,focused:Y,triggerFocus:P,suffix:Le(),disabled:C,classes:W,classNames:J,styles:H}),He())});const bte=e=>{const{getPrefixCls:t,direction:n}=I.useContext(dn),{prefixCls:r,className:i}=e,o=t("input-group",r),a=t("input"),[l,g]=d1(a),u=Re(o,{[`${o}-lg`]:e.size==="large",[`${o}-sm`]:e.size==="small",[`${o}-compact`]:e.compact,[`${o}-rtl`]:n==="rtl"},g,i),d=I.useContext(xg),C=I.useMemo(()=>Object.assign(Object.assign({},d),{isFormItemInput:!1}),[d]);return l(I.createElement("span",{className:u,style:e.style,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onFocus:e.onFocus,onBlur:e.onBlur},I.createElement(xg.Provider,{value:C},e.children)))},Zx=e=>{let t;return typeof e=="object"&&(e!=null&&e.clearIcon)?t=e:e&&(t={clearIcon:Ge.createElement(rb,null)}),t};function Gx(e,t){const n=I.useRef([]),r=()=>{n.current.push(setTimeout(()=>{var i,o,a,l;!((i=e.current)===null||i===void 0)&&i.input&&((o=e.current)===null||o===void 0?void 0:o.input.getAttribute("type"))==="password"&&(!((a=e.current)===null||a===void 0)&&a.input.hasAttribute("value"))&&((l=e.current)===null||l===void 0||l.input.removeAttribute("value"))}))};return I.useEffect(()=>(t&&r(),()=>n.current.forEach(i=>{i&&clearTimeout(i)})),[]),r}function yte(e){return!!(e.prefix||e.suffix||e.allowClear||e.showCount)}var vte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Bb=I.forwardRef((e,t)=>{var n;const{prefixCls:r,bordered:i=!0,status:o,size:a,disabled:l,onBlur:g,onFocus:u,suffix:d,allowClear:C,addonAfter:f,addonBefore:m,className:b,style:p,styles:y,rootClassName:S,onChange:v,classNames:B,variant:W}=e,J=vte(e,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","style","styles","rootClassName","onChange","classNames","variant"]),{getPrefixCls:H,direction:x,input:E}=Ge.useContext(dn),F=H("input",r),w=I.useRef(null),V=gs(F),[Y,M,L]=d1(F,V),{compactSize:$,compactItemClassnames:U}=Gm(F,x),_=Os(me=>{var Ne;return(Ne=a??$)!==null&&Ne!==void 0?Ne:me}),P=Ge.useContext(_c),ee=l??P,{status:j,hasFeedback:O,feedbackIcon:X}=I.useContext(xg),D=pb(j,o),z=yte(e)||!!O;I.useRef(z);const Q=Gx(w,!0),ne=me=>{Q(),g==null||g(me)},ce=me=>{Q(),u==null||u(me)},se=me=>{Q(),v==null||v(me)},ue=(O||d)&&Ge.createElement(Ge.Fragment,null,d,O&&X),ve=Zx(C??(E==null?void 0:E.allowClear)),[Ae,be]=jZ("input",W,i);return Y(Ge.createElement(pte,Object.assign({ref:vl(t,w),prefixCls:F,autoComplete:E==null?void 0:E.autoComplete},J,{disabled:ee,onBlur:ne,onFocus:ce,style:Object.assign(Object.assign({},E==null?void 0:E.style),p),styles:Object.assign(Object.assign({},E==null?void 0:E.styles),y),suffix:ue,allowClear:ve,className:Re(b,S,L,V,U,E==null?void 0:E.className),onChange:se,addonBefore:m&&Ge.createElement(zI,{form:!0,space:!0},m),addonAfter:f&&Ge.createElement(zI,{form:!0,space:!0},f),classNames:Object.assign(Object.assign(Object.assign({},B),E==null?void 0:E.classNames),{input:Re({[`${F}-sm`]:_==="small",[`${F}-lg`]:_==="large",[`${F}-rtl`]:x==="rtl"},B==null?void 0:B.input,(n=E==null?void 0:E.classNames)===null||n===void 0?void 0:n.input,M),variant:Re({[`${F}-${Ae}`]:be},Gp(F,D)),affixWrapper:Re({[`${F}-affix-wrapper-sm`]:_==="small",[`${F}-affix-wrapper-lg`]:_==="large",[`${F}-affix-wrapper-rtl`]:x==="rtl"},M),wrapper:Re({[`${F}-group-rtl`]:x==="rtl"},M),groupWrapper:Re({[`${F}-group-wrapper-sm`]:_==="small",[`${F}-group-wrapper-lg`]:_==="large",[`${F}-group-wrapper-rtl`]:x==="rtl",[`${F}-group-wrapper-${Ae}`]:be},Gp(`${F}-group-wrapper`,D,O),M)})})))}),Ste=e=>{const{componentCls:t,paddingXS:n}=e;return{[t]:{display:"inline-flex",alignItems:"center",flexWrap:"nowrap",columnGap:n,"&-rtl":{direction:"rtl"},[`${t}-input`]:{textAlign:"center",paddingInline:e.paddingXXS},[`&${t}-sm ${t}-input`]:{paddingInline:e.calc(e.paddingXXS).div(2).equal()},[`&${t}-lg ${t}-input`]:{paddingInline:e.paddingXS}}}},Zte=Gi(["Input","OTP"],e=>{const t=Br(e,l1(e));return[Ste(t)]},s1);var Gte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Bte=I.forwardRef((e,t)=>{const{value:n,onChange:r,onActiveChange:i,index:o,mask:a}=e,l=Gte(e,["value","onChange","onActiveChange","index","mask"]),g=n&&typeof a=="string"?a:n,u=b=>{r(o,b.target.value)},d=I.useRef(null);I.useImperativeHandle(t,()=>d.current);const C=()=>{Jr(()=>{var b;const p=(b=d.current)===null||b===void 0?void 0:b.input;document.activeElement===p&&p&&p.select()})},f=b=>{const{key:p,ctrlKey:y,metaKey:S}=b;p==="ArrowLeft"?i(o-1):p==="ArrowRight"?i(o+1):p==="z"&&(y||S)&&b.preventDefault(),C()},m=b=>{b.key==="Backspace"&&!n&&i(o-1),C()};return I.createElement(Bb,Object.assign({type:a===!0?"password":"text"},l,{ref:d,value:g,onInput:u,onFocus:C,onKeyDown:f,onKeyUp:m,onMouseDown:C,onMouseUp:C}))});var Rte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Xh(e){return(e||"").split("")}const wte=I.forwardRef((e,t)=>{const{prefixCls:n,length:r=6,size:i,defaultValue:o,value:a,onChange:l,formatter:g,variant:u,disabled:d,status:C,autoFocus:f,mask:m,type:b,onInput:p,inputMode:y}=e,S=Rte(e,["prefixCls","length","size","defaultValue","value","onChange","formatter","variant","disabled","status","autoFocus","mask","type","onInput","inputMode"]),{getPrefixCls:v,direction:B}=I.useContext(dn),W=v("otp",n),J=tl(S,{aria:!0,data:!0,attr:!0}),H=gs(W),[x,E,F]=Zte(W,H),w=Os(z=>i??z),V=I.useContext(xg),Y=pb(V.status,C),M=I.useMemo(()=>Object.assign(Object.assign({},V),{status:Y,hasFeedback:!1,feedbackIcon:null}),[V,Y]),L=I.useRef(null),$=I.useRef({});I.useImperativeHandle(t,()=>({focus:()=>{var z;(z=$.current[0])===null||z===void 0||z.focus()},blur:()=>{var z;for(let Q=0;Q<r;Q+=1)(z=$.current[Q])===null||z===void 0||z.blur()},nativeElement:L.current}));const U=z=>g?g(z):z,[_,P]=I.useState(Xh(U(o||"")));I.useEffect(()=>{a!==void 0&&P(Xh(a))},[a]);const ee=ui(z=>{P(z),p&&p(z),l&&z.length===r&&z.every(Q=>Q)&&z.some((Q,ne)=>_[ne]!==Q)&&l(z.join(""))}),j=ui((z,Q)=>{let ne=Gt(_);for(let se=0;se<z;se+=1)ne[se]||(ne[se]="");Q.length<=1?ne[z]=Q:ne=ne.slice(0,z).concat(Xh(Q)),ne=ne.slice(0,r);for(let se=ne.length-1;se>=0&&!ne[se];se-=1)ne.pop();const ce=U(ne.map(se=>se||" ").join(""));return ne=Xh(ce).map((se,ue)=>se===" "&&!ne[ue]?ne[ue]:se),ne}),O=(z,Q)=>{var ne;const ce=j(z,Q),se=Math.min(z+Q.length,r-1);se!==z&&ce[z]!==void 0&&((ne=$.current[se])===null||ne===void 0||ne.focus()),ee(ce)},X=z=>{var Q;(Q=$.current[z])===null||Q===void 0||Q.focus()},D={variant:u,disabled:d,status:Y,mask:m,type:b,inputMode:y};return x(I.createElement("div",Object.assign({},J,{ref:L,className:Re(W,{[`${W}-sm`]:w==="small",[`${W}-lg`]:w==="large",[`${W}-rtl`]:B==="rtl"},F,E)}),I.createElement(xg.Provider,{value:M},Array.from({length:r}).map((z,Q)=>{const ne=`otp-${Q}`,ce=_[Q]||"";return I.createElement(Bte,Object.assign({ref:se=>{$.current[Q]=se},key:ne,index:Q,size:w,htmlSize:1,className:`${W}-input`,onChange:O,value:ce,onActiveChange:X,autoFocus:Q===0&&f},D))}))))});var Wte={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"},Vte=function(t,n){return I.createElement(er,lt({},t,{ref:n,icon:Wte}))},kte=I.forwardRef(Vte),Nte={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},Xte=function(t,n){return I.createElement(er,lt({},t,{ref:n,icon:Nte}))},Jte=I.forwardRef(Xte),xte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Hte=e=>e?I.createElement(Jte,null):I.createElement(kte,null),Yte={click:"onClick",hover:"onMouseOver"},Ete=I.forwardRef((e,t)=>{const{disabled:n,action:r="click",visibilityToggle:i=!0,iconRender:o=Hte}=e,a=I.useContext(_c),l=n??a,g=typeof i=="object"&&i.visible!==void 0,[u,d]=I.useState(()=>g?i.visible:!1),C=I.useRef(null);I.useEffect(()=>{g&&d(i.visible)},[g,i]);const f=Gx(C),m=()=>{var w;if(l)return;u&&f();const V=!u;d(V),typeof i=="object"&&((w=i.onVisibleChange)===null||w===void 0||w.call(i,V))},b=w=>{const V=Yte[r]||"",Y=o(u),M={[V]:m,className:`${w}-icon`,key:"passwordIcon",onMouseDown:L=>{L.preventDefault()},onMouseUp:L=>{L.preventDefault()}};return I.cloneElement(I.isValidElement(Y)?Y:I.createElement("span",null,Y),M)},{className:p,prefixCls:y,inputPrefixCls:S,size:v}=e,B=xte(e,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:W}=I.useContext(dn),J=W("input",S),H=W("input-password",y),x=i&&b(H),E=Re(H,p,{[`${H}-${v}`]:!!v}),F=Object.assign(Object.assign({},Pi(B,["suffix","iconRender","visibilityToggle"])),{type:u?"text":"password",className:E,prefixCls:J,suffix:x});return v&&(F.size=v),I.createElement(Bb,Object.assign({ref:vl(t,C)},F))});var Fte=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Kte=I.forwardRef((e,t)=>{const{prefixCls:n,inputPrefixCls:r,className:i,size:o,suffix:a,enterButton:l=!1,addonAfter:g,loading:u,disabled:d,onSearch:C,onChange:f,onCompositionStart:m,onCompositionEnd:b}=e,p=Fte(e,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:y,direction:S}=I.useContext(dn),v=I.useRef(!1),B=y("input-search",n),W=y("input",r),{compactSize:J}=Gm(B,S),H=Os(O=>{var X;return(X=o??J)!==null&&X!==void 0?X:O}),x=I.useRef(null),E=O=>{O!=null&&O.target&&O.type==="click"&&C&&C(O.target.value,O,{source:"clear"}),f==null||f(O)},F=O=>{var X;document.activeElement===((X=x.current)===null||X===void 0?void 0:X.input)&&O.preventDefault()},w=O=>{var X,D;C&&C((D=(X=x.current)===null||X===void 0?void 0:X.input)===null||D===void 0?void 0:D.value,O,{source:"input"})},V=O=>{v.current||u||w(O)},Y=typeof l=="boolean"?I.createElement(QZ,null):null,M=`${B}-button`;let L;const $=l||{},U=$.type&&$.type.__ANT_BUTTON===!0;U||$.type==="button"?L=os($,Object.assign({onMouseDown:F,onClick:O=>{var X,D;(D=(X=$==null?void 0:$.props)===null||X===void 0?void 0:X.onClick)===null||D===void 0||D.call(X,O),w(O)},key:"enterButton"},U?{className:M,size:H}:{})):L=I.createElement(da,{className:M,type:l?"primary":void 0,size:H,disabled:d,key:"enterButton",onMouseDown:F,onClick:w,loading:u,icon:Y},l),g&&(L=[L,os(g,{key:"addonAfter"})]);const _=Re(B,{[`${B}-rtl`]:S==="rtl",[`${B}-${H}`]:!!H,[`${B}-with-button`]:!!l},i),P=Object.assign(Object.assign({},p),{className:_,prefixCls:W,type:"search"}),ee=O=>{v.current=!0,m==null||m(O)},j=O=>{v.current=!1,b==null||b(O)};return I.createElement(Bb,Object.assign({ref:vl(x,t),onPressEnter:V},P,{size:H,onCompositionStart:ee,onCompositionEnd:j,addonAfter:L,suffix:a,onChange:E,disabled:d}))});var Lte=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
  pointer-events: none !important;
`,Mte=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],Oy={},Pa;function Tte(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&Oy[n])return Oy[n];var r=window.getComputedStyle(e),i=r.getPropertyValue("box-sizing")||r.getPropertyValue("-moz-box-sizing")||r.getPropertyValue("-webkit-box-sizing"),o=parseFloat(r.getPropertyValue("padding-bottom"))+parseFloat(r.getPropertyValue("padding-top")),a=parseFloat(r.getPropertyValue("border-bottom-width"))+parseFloat(r.getPropertyValue("border-top-width")),l=Mte.map(function(u){return"".concat(u,":").concat(r.getPropertyValue(u))}).join(";"),g={sizingStyle:l,paddingSize:o,borderSize:a,boxSizing:i};return t&&n&&(Oy[n]=g),g}function zte(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;Pa||(Pa=document.createElement("textarea"),Pa.setAttribute("tab-index","-1"),Pa.setAttribute("aria-hidden","true"),Pa.setAttribute("name","hiddenTextarea"),document.body.appendChild(Pa)),e.getAttribute("wrap")?Pa.setAttribute("wrap",e.getAttribute("wrap")):Pa.removeAttribute("wrap");var i=Tte(e,t),o=i.paddingSize,a=i.borderSize,l=i.boxSizing,g=i.sizingStyle;Pa.setAttribute("style","".concat(g,";").concat(Lte)),Pa.value=e.value||e.placeholder||"";var u=void 0,d=void 0,C,f=Pa.scrollHeight;if(l==="border-box"?f+=a:l==="content-box"&&(f-=o),n!==null||r!==null){Pa.value=" ";var m=Pa.scrollHeight-o;n!==null&&(u=m*n,l==="border-box"&&(u=u+o+a),f=Math.max(u,f)),r!==null&&(d=m*r,l==="border-box"&&(d=d+o+a),C=f>d?"":"hidden",f=Math.min(d,f))}var b={height:f,overflowY:C,resize:"none"};return u&&(b.minHeight=u),d&&(b.maxHeight=d),b}var Dte=["prefixCls","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],_y=0,Uy=1,jy=2,Pte=I.forwardRef(function(e,t){var n=e,r=n.prefixCls,i=n.defaultValue,o=n.value,a=n.autoSize,l=n.onResize,g=n.className,u=n.style,d=n.disabled,C=n.onChange;n.onInternalAutoSize;var f=Wn(n,Dte),m=qi(i,{value:o,postState:function(z){return z??""}}),b=xe(m,2),p=b[0],y=b[1],S=function(z){y(z.target.value),C==null||C(z)},v=I.useRef();I.useImperativeHandle(t,function(){return{textArea:v.current}});var B=I.useMemo(function(){return a&&wt(a)==="object"?[a.minRows,a.maxRows]:[]},[a]),W=xe(B,2),J=W[0],H=W[1],x=!!a,E=function(){try{if(document.activeElement===v.current){var z=v.current,Q=z.selectionStart,ne=z.selectionEnd,ce=z.scrollTop;v.current.setSelectionRange(Q,ne),v.current.scrollTop=ce}}catch{}},F=I.useState(jy),w=xe(F,2),V=w[0],Y=w[1],M=I.useState(),L=xe(M,2),$=L[0],U=L[1],_=function(){Y(_y)};ur(function(){x&&_()},[o,J,H,x]),ur(function(){if(V===_y)Y(Uy);else if(V===Uy){var D=zte(v.current,!1,J,H);Y(jy),U(D)}else E()},[V]);var P=I.useRef(),ee=function(){Jr.cancel(P.current)},j=function(z){V===jy&&(l==null||l(z),a&&(ee(),P.current=Jr(function(){_()})))};I.useEffect(function(){return ee},[]);var O=x?$:null,X=he(he({},u),O);return(V===_y||V===Uy)&&(X.overflowY="hidden",X.overflowX="hidden"),I.createElement(bl,{onResize:j,disabled:!(a||l)},I.createElement("textarea",lt({},f,{ref:v,style:X,className:Re(r,g,fe({},"".concat(r,"-disabled"),d)),disabled:d,value:p,onChange:S})))}),Ote=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","showCount","count","className","style","disabled","hidden","classNames","styles","onResize","onClear","onPressEnter","readOnly","autoSize","onKeyDown"],_te=Ge.forwardRef(function(e,t){var n,r=e.defaultValue,i=e.value,o=e.onFocus,a=e.onBlur,l=e.onChange,g=e.allowClear,u=e.maxLength,d=e.onCompositionStart,C=e.onCompositionEnd,f=e.suffix,m=e.prefixCls,b=m===void 0?"rc-textarea":m,p=e.showCount,y=e.count,S=e.className,v=e.style,B=e.disabled,W=e.hidden,J=e.classNames,H=e.styles,x=e.onResize,E=e.onClear,F=e.onPressEnter,w=e.readOnly,V=e.autoSize,Y=e.onKeyDown,M=Wn(e,Ote),L=qi(r,{value:i,defaultValue:r}),$=xe(L,2),U=$[0],_=$[1],P=U==null?"":String(U),ee=Ge.useState(!1),j=xe(ee,2),O=j[0],X=j[1],D=Ge.useRef(!1),z=Ge.useState(null),Q=xe(z,2),ne=Q[0],ce=Q[1],se=I.useRef(null),ue=I.useRef(null),ve=function(){var st;return(st=ue.current)===null||st===void 0?void 0:st.textArea},Ae=function(){ve().focus()};I.useImperativeHandle(t,function(){var Qe;return{resizableTextArea:ue.current,focus:Ae,blur:function(){ve().blur()},nativeElement:((Qe=se.current)===null||Qe===void 0?void 0:Qe.nativeElement)||ve()}}),I.useEffect(function(){X(function(Qe){return!B&&Qe})},[B]);var be=Ge.useState(null),me=xe(be,2),Ne=me[0],Ie=me[1];Ge.useEffect(function(){if(Ne){var Qe;(Qe=ve()).setSelectionRange.apply(Qe,Gt(Ne))}},[Ne]);var ae=Sx(y,p),Ee=(n=ae.max)!==null&&n!==void 0?n:u,Fe=Number(Ee)>0,ke=ae.strategy(P),ze=!!Ee&&ke>Ee,He=function(st,St){var dt=St;!D.current&&ae.exceedFormatter&&ae.max&&ae.strategy(St)>ae.max&&(dt=ae.exceedFormatter(St,{max:ae.max}),St!==dt&&Ie([ve().selectionStart||0,ve().selectionEnd||0])),_(dt),Vp(st.currentTarget,st,l,dt)},Le=function(st){D.current=!0,d==null||d(st)},Ye=function(st){D.current=!1,He(st,st.currentTarget.value),C==null||C(st)},Pe=function(st){He(st,st.target.value)},$e=function(st){st.key==="Enter"&&F&&F(st),Y==null||Y(st)},ot=function(st){X(!0),o==null||o(st)},Ct=function(st){X(!1),a==null||a(st)},pt=function(st){_(""),Ae(),Vp(ve(),st,l)},it=f,It;ae.show&&(ae.showFormatter?It=ae.showFormatter({value:P,count:ke,maxLength:Ee}):It="".concat(ke).concat(Fe?" / ".concat(Ee):""),it=Ge.createElement(Ge.Fragment,null,it,Ge.createElement("span",{className:Re("".concat(b,"-data-count"),J==null?void 0:J.count),style:H==null?void 0:H.count},It)));var _e=function(st){var St;x==null||x(st),(St=ve())!==null&&St!==void 0&&St.style.height&&ce(!0)},Ot=!V&&!p&&!g;return Ge.createElement(vx,{ref:se,value:P,allowClear:g,handleReset:pt,suffix:it,prefixCls:b,classNames:he(he({},J),{},{affixWrapper:Re(J==null?void 0:J.affixWrapper,fe(fe({},"".concat(b,"-show-count"),p),"".concat(b,"-textarea-allow-clear"),g))}),disabled:B,focused:O,className:Re(S,ze&&"".concat(b,"-out-of-range")),style:he(he({},v),ne&&!Ot?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":typeof It=="string"?It:void 0}},hidden:W,readOnly:w,onClear:E},Ge.createElement(Pte,lt({},M,{autoSize:V,maxLength:u,onKeyDown:$e,onChange:Pe,onFocus:ot,onBlur:Ct,onCompositionStart:Le,onCompositionEnd:Ye,className:Re(J==null?void 0:J.textarea),style:he(he({},H==null?void 0:H.textarea),{},{resize:v==null?void 0:v.resize}),disabled:B,prefixCls:b,onResize:_e,ref:ue,readOnly:w})))}),Ute=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Bx=I.forwardRef((e,t)=>{var n,r;const{prefixCls:i,bordered:o=!0,size:a,disabled:l,status:g,allowClear:u,classNames:d,rootClassName:C,className:f,style:m,styles:b,variant:p}=e,y=Ute(e,["prefixCls","bordered","size","disabled","status","allowClear","classNames","rootClassName","className","style","styles","variant"]),{getPrefixCls:S,direction:v,textArea:B}=I.useContext(dn),W=Os(a),J=I.useContext(_c),H=l??J,{status:x,hasFeedback:E,feedbackIcon:F}=I.useContext(xg),w=pb(x,g),V=I.useRef(null);I.useImperativeHandle(t,()=>{var j;return{resizableTextArea:(j=V.current)===null||j===void 0?void 0:j.resizableTextArea,focus:O=>{var X,D;yx((D=(X=V.current)===null||X===void 0?void 0:X.resizableTextArea)===null||D===void 0?void 0:D.textArea,O)},blur:()=>{var O;return(O=V.current)===null||O===void 0?void 0:O.blur()}}});const Y=S("input",i),M=gs(Y),[L,$,U]=d1(Y,M),[_,P]=jZ("textArea",p,o),ee=Zx(u??(B==null?void 0:B.allowClear));return L(I.createElement(_te,Object.assign({autoComplete:B==null?void 0:B.autoComplete},y,{style:Object.assign(Object.assign({},B==null?void 0:B.style),m),styles:Object.assign(Object.assign({},B==null?void 0:B.styles),b),disabled:H,allowClear:ee,className:Re(U,M,f,C,B==null?void 0:B.className),classNames:Object.assign(Object.assign(Object.assign({},d),B==null?void 0:B.classNames),{textarea:Re({[`${Y}-sm`]:W==="small",[`${Y}-lg`]:W==="large"},$,d==null?void 0:d.textarea,(n=B==null?void 0:B.classNames)===null||n===void 0?void 0:n.textarea),variant:Re({[`${Y}-${_}`]:P},Gp(Y,w)),affixWrapper:Re(`${Y}-textarea-affix-wrapper`,{[`${Y}-affix-wrapper-rtl`]:v==="rtl",[`${Y}-affix-wrapper-sm`]:W==="small",[`${Y}-affix-wrapper-lg`]:W==="large",[`${Y}-textarea-show-count`]:e.showCount||((r=e.count)===null||r===void 0?void 0:r.show)},$)}),prefixCls:Y,suffix:E&&I.createElement("span",{className:`${Y}-textarea-suffix`},F),ref:V})))}),Ms=Bb;Ms.Group=bte;Ms.Search=Kte;Ms.TextArea=Bx;Ms.Password=Ete;Ms.OTP=wte;var Hw=I.createContext(null),Rx=I.createContext({}),jte=["prefixCls","className","containerRef"],Qte=function(t){var n=t.prefixCls,r=t.className,i=t.containerRef,o=Wn(t,jte),a=I.useContext(Rx),l=a.panel,g=Ps(l,i);return I.createElement("div",lt({className:Re("".concat(n,"-content"),r),role:"dialog",ref:g},tl(t,{aria:!0}),{"aria-modal":"true"},o))};function Yw(e){return typeof e=="string"&&String(Number(e))===e?(wo(!1,"Invalid value type of `width` or `height` which should be number type instead."),Number(e)):e}var Ew={width:0,height:0,overflow:"hidden",outline:"none",position:"absolute"};function $te(e,t){var n,r,i,o=e.prefixCls,a=e.open,l=e.placement,g=e.inline,u=e.push,d=e.forceRender,C=e.autoFocus,f=e.keyboard,m=e.classNames,b=e.rootClassName,p=e.rootStyle,y=e.zIndex,S=e.className,v=e.id,B=e.style,W=e.motion,J=e.width,H=e.height,x=e.children,E=e.mask,F=e.maskClosable,w=e.maskMotion,V=e.maskClassName,Y=e.maskStyle,M=e.afterOpenChange,L=e.onClose,$=e.onMouseEnter,U=e.onMouseOver,_=e.onMouseLeave,P=e.onClick,ee=e.onKeyDown,j=e.onKeyUp,O=e.styles,X=e.drawerRender,D=I.useRef(),z=I.useRef(),Q=I.useRef();I.useImperativeHandle(t,function(){return D.current});var ne=function(Le){var Ye=Le.keyCode,Pe=Le.shiftKey;switch(Ye){case Mt.TAB:{if(Ye===Mt.TAB){if(!Pe&&document.activeElement===Q.current){var $e;($e=z.current)===null||$e===void 0||$e.focus({preventScroll:!0})}else if(Pe&&document.activeElement===z.current){var ot;(ot=Q.current)===null||ot===void 0||ot.focus({preventScroll:!0})}}break}case Mt.ESC:{L&&f&&(Le.stopPropagation(),L(Le));break}}};I.useEffect(function(){if(a&&C){var He;(He=D.current)===null||He===void 0||He.focus({preventScroll:!0})}},[a]);var ce=I.useState(!1),se=xe(ce,2),ue=se[0],ve=se[1],Ae=I.useContext(Hw),be;typeof u=="boolean"?be=u?{}:{distance:0}:be=u||{};var me=(n=(r=(i=be)===null||i===void 0?void 0:i.distance)!==null&&r!==void 0?r:Ae==null?void 0:Ae.pushDistance)!==null&&n!==void 0?n:180,Ne=I.useMemo(function(){return{pushDistance:me,push:function(){ve(!0)},pull:function(){ve(!1)}}},[me]);I.useEffect(function(){if(a){var He;Ae==null||(He=Ae.push)===null||He===void 0||He.call(Ae)}else{var Le;Ae==null||(Le=Ae.pull)===null||Le===void 0||Le.call(Ae)}},[a]),I.useEffect(function(){return function(){var He;Ae==null||(He=Ae.pull)===null||He===void 0||He.call(Ae)}},[]);var Ie=E&&I.createElement(is,lt({key:"mask"},w,{visible:a}),function(He,Le){var Ye=He.className,Pe=He.style;return I.createElement("div",{className:Re("".concat(o,"-mask"),Ye,m==null?void 0:m.mask,V),style:he(he(he({},Pe),Y),O==null?void 0:O.mask),onClick:F&&a?L:void 0,ref:Le})}),ae=typeof W=="function"?W(l):W,Ee={};if(ue&&me)switch(l){case"top":Ee.transform="translateY(".concat(me,"px)");break;case"bottom":Ee.transform="translateY(".concat(-me,"px)");break;case"left":Ee.transform="translateX(".concat(me,"px)");break;default:Ee.transform="translateX(".concat(-me,"px)");break}l==="left"||l==="right"?Ee.width=Yw(J):Ee.height=Yw(H);var Fe={onMouseEnter:$,onMouseOver:U,onMouseLeave:_,onClick:P,onKeyDown:ee,onKeyUp:j},ke=I.createElement(is,lt({key:"panel"},ae,{visible:a,forceRender:d,onVisibleChanged:function(Le){M==null||M(Le)},removeOnLeave:!1,leavedClassName:"".concat(o,"-content-wrapper-hidden")}),function(He,Le){var Ye=He.className,Pe=He.style,$e=I.createElement(Qte,lt({id:v,containerRef:Le,prefixCls:o,className:Re(S,m==null?void 0:m.content),style:he(he({},B),O==null?void 0:O.content)},tl(e,{aria:!0}),Fe),x);return I.createElement("div",lt({className:Re("".concat(o,"-content-wrapper"),m==null?void 0:m.wrapper,Ye),style:he(he(he({},Ee),Pe),O==null?void 0:O.wrapper)},tl(e,{data:!0})),X?X($e):$e)}),ze=he({},p);return y&&(ze.zIndex=y),I.createElement(Hw.Provider,{value:Ne},I.createElement("div",{className:Re(o,"".concat(o,"-").concat(l),b,fe(fe({},"".concat(o,"-open"),a),"".concat(o,"-inline"),g)),style:ze,tabIndex:-1,ref:D,onKeyDown:ne},Ie,I.createElement("div",{tabIndex:0,ref:z,style:Ew,"aria-hidden":"true","data-sentinel":"start"}),ke,I.createElement("div",{tabIndex:0,ref:Q,style:Ew,"aria-hidden":"true","data-sentinel":"end"})))}var qte=I.forwardRef($te),ene=function(t){var n=t.open,r=n===void 0?!1:n,i=t.prefixCls,o=i===void 0?"rc-drawer":i,a=t.placement,l=a===void 0?"right":a,g=t.autoFocus,u=g===void 0?!0:g,d=t.keyboard,C=d===void 0?!0:d,f=t.width,m=f===void 0?378:f,b=t.mask,p=b===void 0?!0:b,y=t.maskClosable,S=y===void 0?!0:y,v=t.getContainer,B=t.forceRender,W=t.afterOpenChange,J=t.destroyOnClose,H=t.onMouseEnter,x=t.onMouseOver,E=t.onMouseLeave,F=t.onClick,w=t.onKeyDown,V=t.onKeyUp,Y=t.panelRef,M=I.useState(!1),L=xe(M,2),$=L[0],U=L[1],_=I.useState(!1),P=xe(_,2),ee=P[0],j=P[1];ur(function(){j(!0)},[]);var O=ee?r:!1,X=I.useRef(),D=I.useRef();ur(function(){O&&(D.current=document.activeElement)},[O]);var z=function(ue){var ve;if(U(ue),W==null||W(ue),!ue&&D.current&&!((ve=X.current)!==null&&ve!==void 0&&ve.contains(D.current))){var Ae;(Ae=D.current)===null||Ae===void 0||Ae.focus({preventScroll:!0})}},Q=I.useMemo(function(){return{panel:Y}},[Y]);if(!B&&!$&&!O&&J)return null;var ne={onMouseEnter:H,onMouseOver:x,onMouseLeave:E,onClick:F,onKeyDown:w,onKeyUp:V},ce=he(he({},t),{},{open:O,prefixCls:o,placement:l,autoFocus:u,keyboard:C,width:m,mask:p,maskClosable:S,inline:v===!1,afterOpenChange:z,ref:X},ne);return I.createElement(Rx.Provider,{value:Q},I.createElement(Cb,{open:O||B||$,autoDestroy:!1,getContainer:v,autoLock:p&&(O||$)},I.createElement(qte,ce)))};const wx=e=>{var t,n;const{prefixCls:r,title:i,footer:o,extra:a,loading:l,onClose:g,headerStyle:u,bodyStyle:d,footerStyle:C,children:f,classNames:m,styles:b}=e,{drawer:p}=I.useContext(dn),y=I.useCallback(J=>I.createElement("button",{type:"button",onClick:g,"aria-label":"Close",className:`${r}-close`},J),[g]),[S,v]=eJ(Sp(e),Sp(p),{closable:!0,closeIconRender:y}),B=I.useMemo(()=>{var J,H;return!i&&!S?null:I.createElement("div",{style:Object.assign(Object.assign(Object.assign({},(J=p==null?void 0:p.styles)===null||J===void 0?void 0:J.header),u),b==null?void 0:b.header),className:Re(`${r}-header`,{[`${r}-header-close-only`]:S&&!i&&!a},(H=p==null?void 0:p.classNames)===null||H===void 0?void 0:H.header,m==null?void 0:m.header)},I.createElement("div",{className:`${r}-header-title`},v,i&&I.createElement("div",{className:`${r}-title`},i)),a&&I.createElement("div",{className:`${r}-extra`},a))},[S,v,a,u,r,i]),W=I.useMemo(()=>{var J,H;if(!o)return null;const x=`${r}-footer`;return I.createElement("div",{className:Re(x,(J=p==null?void 0:p.classNames)===null||J===void 0?void 0:J.footer,m==null?void 0:m.footer),style:Object.assign(Object.assign(Object.assign({},(H=p==null?void 0:p.styles)===null||H===void 0?void 0:H.footer),C),b==null?void 0:b.footer)},o)},[o,C,r]);return I.createElement(I.Fragment,null,B,I.createElement("div",{className:Re(`${r}-body`,m==null?void 0:m.body,(t=p==null?void 0:p.classNames)===null||t===void 0?void 0:t.body),style:Object.assign(Object.assign(Object.assign({},(n=p==null?void 0:p.styles)===null||n===void 0?void 0:n.body),d),b==null?void 0:b.body)},l?I.createElement(su,{active:!0,title:!1,paragraph:{rows:5},className:`${r}-body-skeleton`}):f),W)},tne=e=>{const t="100%";return{left:`translateX(-${t})`,right:`translateX(${t})`,top:`translateY(-${t})`,bottom:`translateY(${t})`}[e]},Wx=(e,t)=>({"&-enter, &-appear":Object.assign(Object.assign({},e),{"&-active":t}),"&-leave":Object.assign(Object.assign({},t),{"&-active":e})}),Vx=(e,t)=>Object.assign({"&-enter, &-appear, &-leave":{"&-start":{transition:"none"},"&-active":{transition:`all ${t}`}}},Wx({opacity:e},{opacity:1})),nne=(e,t)=>[Vx(.7,t),Wx({transform:tne(e)},{transform:"none"})],rne=e=>{const{componentCls:t,motionDurationSlow:n}=e;return{[t]:{[`${t}-mask-motion`]:Vx(0,n),[`${t}-panel-motion`]:["left","right","top","bottom"].reduce((r,i)=>Object.assign(Object.assign({},r),{[`&-${i}`]:nne(i,n)}),{})}}},ine=e=>{const{borderRadiusSM:t,componentCls:n,zIndexPopup:r,colorBgMask:i,colorBgElevated:o,motionDurationSlow:a,motionDurationMid:l,paddingXS:g,padding:u,paddingLG:d,fontSizeLG:C,lineHeightLG:f,lineWidth:m,lineType:b,colorSplit:p,marginXS:y,colorIcon:S,colorIconHover:v,colorBgTextHover:B,colorBgTextActive:W,colorText:J,fontWeightStrong:H,footerPaddingBlock:x,footerPaddingInline:E,calc:F}=e,w=`${n}-content-wrapper`;return{[n]:{position:"fixed",inset:0,zIndex:r,pointerEvents:"none",color:J,"&-pure":{position:"relative",background:o,display:"flex",flexDirection:"column",[`&${n}-left`]:{boxShadow:e.boxShadowDrawerLeft},[`&${n}-right`]:{boxShadow:e.boxShadowDrawerRight},[`&${n}-top`]:{boxShadow:e.boxShadowDrawerUp},[`&${n}-bottom`]:{boxShadow:e.boxShadowDrawerDown}},"&-inline":{position:"absolute"},[`${n}-mask`]:{position:"absolute",inset:0,zIndex:r,background:i,pointerEvents:"auto"},[w]:{position:"absolute",zIndex:r,maxWidth:"100vw",transition:`all ${a}`,"&-hidden":{display:"none"}},[`&-left > ${w}`]:{top:0,bottom:0,left:{_skip_check_:!0,value:0},boxShadow:e.boxShadowDrawerLeft},[`&-right > ${w}`]:{top:0,right:{_skip_check_:!0,value:0},bottom:0,boxShadow:e.boxShadowDrawerRight},[`&-top > ${w}`]:{top:0,insetInline:0,boxShadow:e.boxShadowDrawerUp},[`&-bottom > ${w}`]:{bottom:0,insetInline:0,boxShadow:e.boxShadowDrawerDown},[`${n}-content`]:{display:"flex",flexDirection:"column",width:"100%",height:"100%",overflow:"auto",background:o,pointerEvents:"auto"},[`${n}-header`]:{display:"flex",flex:0,alignItems:"center",padding:`${Ve(u)} ${Ve(d)}`,fontSize:C,lineHeight:f,borderBottom:`${Ve(m)} ${b} ${p}`,"&-title":{display:"flex",flex:1,alignItems:"center",minWidth:0,minHeight:0}},[`${n}-extra`]:{flex:"none"},[`${n}-close`]:Object.assign({display:"inline-flex",width:F(C).add(g).equal(),height:F(C).add(g).equal(),borderRadius:t,justifyContent:"center",alignItems:"center",marginInlineEnd:y,color:S,fontWeight:H,fontSize:C,fontStyle:"normal",lineHeight:1,textAlign:"center",textTransform:"none",textDecoration:"none",background:"transparent",border:0,cursor:"pointer",transition:`all ${l}`,textRendering:"auto","&:hover":{color:v,backgroundColor:B,textDecoration:"none"},"&:active":{backgroundColor:W}},Ds(e)),[`${n}-title`]:{flex:1,margin:0,fontWeight:e.fontWeightStrong,fontSize:C,lineHeight:f},[`${n}-body`]:{flex:1,minWidth:0,minHeight:0,padding:d,overflow:"auto",[`${n}-body-skeleton`]:{width:"100%",height:"100%",display:"flex",justifyContent:"center"}},[`${n}-footer`]:{flexShrink:0,padding:`${Ve(x)} ${Ve(E)}`,borderTop:`${Ve(m)} ${b} ${p}`},"&-rtl":{direction:"rtl"}}}},one=e=>({zIndexPopup:e.zIndexPopupBase,footerPaddingBlock:e.paddingXS,footerPaddingInline:e.padding}),kx=Gi("Drawer",e=>{const t=Br(e,{});return[ine(t),rne(t)]},one);var Nx=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const ane={distance:180},Xx=e=>{const{rootClassName:t,width:n,height:r,size:i="default",mask:o=!0,push:a=ane,open:l,afterOpenChange:g,onClose:u,prefixCls:d,getContainer:C,style:f,className:m,visible:b,afterVisibleChange:p,maskStyle:y,drawerStyle:S,contentWrapperStyle:v}=e,B=Nx(e,["rootClassName","width","height","size","mask","push","open","afterOpenChange","onClose","prefixCls","getContainer","style","className","visible","afterVisibleChange","maskStyle","drawerStyle","contentWrapperStyle"]),{getPopupContainer:W,getPrefixCls:J,direction:H,drawer:x}=I.useContext(dn),E=J("drawer",d),[F,w,V]=kx(E),Y=C===void 0&&W?()=>W(document.body):C,M=Re({"no-mask":!o,[`${E}-rtl`]:H==="rtl"},t,w,V),L=I.useMemo(()=>n??(i==="large"?736:378),[n,i]),$=I.useMemo(()=>r??(i==="large"?736:378),[r,i]),U={motionName:Jg(E,"mask-motion"),motionAppear:!0,motionEnter:!0,motionLeave:!0,motionDeadline:500},_=Q=>({motionName:Jg(E,`panel-motion-${Q}`),motionAppear:!0,motionEnter:!0,motionLeave:!0,motionDeadline:500}),P=tJ(),[ee,j]=lC("Drawer",B.zIndex),{classNames:O={},styles:X={}}=B,{classNames:D={},styles:z={}}=x||{};return F(I.createElement(zI,{form:!0,space:!0},I.createElement(Sm.Provider,{value:j},I.createElement(ene,Object.assign({prefixCls:E,onClose:u,maskMotion:U,motion:_},B,{classNames:{mask:Re(O.mask,D.mask),content:Re(O.content,D.content),wrapper:Re(O.wrapper,D.wrapper)},styles:{mask:Object.assign(Object.assign(Object.assign({},X.mask),y),z.mask),content:Object.assign(Object.assign(Object.assign({},X.content),S),z.content),wrapper:Object.assign(Object.assign(Object.assign({},X.wrapper),v),z.wrapper)},open:l??b,mask:o,push:a,width:L,height:$,style:Object.assign(Object.assign({},x==null?void 0:x.style),f),className:Re(x==null?void 0:x.className,m),rootClassName:M,getContainer:Y,afterOpenChange:g??p,panelRef:P,zIndex:ee}),I.createElement(wx,Object.assign({prefixCls:E},B,{onClose:u}))))))},lne=e=>{const{prefixCls:t,style:n,className:r,placement:i="right"}=e,o=Nx(e,["prefixCls","style","className","placement"]),{getPrefixCls:a}=I.useContext(dn),l=a("drawer",t),[g,u,d]=kx(l),C=Re(l,`${l}-pure`,`${l}-${i}`,u,d,r);return g(I.createElement("div",{className:C,style:n},I.createElement(wx,Object.assign({prefixCls:l},o))))};Xx._InternalPanelDoNotUseOrYouWillBeFired=lne;function Fw(e){return["small","middle","large"].includes(e)}function Kw(e){return e?typeof e=="number"&&!Number.isNaN(e):!1}const Jx=Ge.createContext({latestIndex:0}),sne=Jx.Provider,gne=e=>{let{className:t,index:n,children:r,split:i,style:o}=e;const{latestIndex:a}=I.useContext(Jx);return r==null?null:I.createElement(I.Fragment,null,I.createElement("div",{className:t,style:o},r),n<a&&i&&I.createElement("span",{className:`${t}-split`},i))};var cne=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const une=I.forwardRef((e,t)=>{var n,r,i;const{getPrefixCls:o,space:a,direction:l}=I.useContext(dn),{size:g=(n=a==null?void 0:a.size)!==null&&n!==void 0?n:"small",align:u,className:d,rootClassName:C,children:f,direction:m="horizontal",prefixCls:b,split:p,style:y,wrap:S=!1,classNames:v,styles:B}=e,W=cne(e,["size","align","className","rootClassName","children","direction","prefixCls","split","style","wrap","classNames","styles"]),[J,H]=Array.isArray(g)?g:[g,g],x=Fw(H),E=Fw(J),F=Kw(H),w=Kw(J),V=el(f,{keepEmpty:!0}),Y=u===void 0&&m==="horizontal"?"center":u,M=o("space",b),[L,$,U]=X3(M),_=Re(M,a==null?void 0:a.className,$,`${M}-${m}`,{[`${M}-rtl`]:l==="rtl",[`${M}-align-${Y}`]:Y,[`${M}-gap-row-${H}`]:x,[`${M}-gap-col-${J}`]:E},d,C,U),P=Re(`${M}-item`,(r=v==null?void 0:v.item)!==null&&r!==void 0?r:(i=a==null?void 0:a.classNames)===null||i===void 0?void 0:i.item);let ee=0;const j=V.map((D,z)=>{var Q,ne;D!=null&&(ee=z);const ce=(D==null?void 0:D.key)||`${P}-${z}`;return I.createElement(gne,{className:P,key:ce,index:z,split:p,style:(Q=B==null?void 0:B.item)!==null&&Q!==void 0?Q:(ne=a==null?void 0:a.styles)===null||ne===void 0?void 0:ne.item},D)}),O=I.useMemo(()=>({latestIndex:ee}),[ee]);if(V.length===0)return null;const X={};return S&&(X.flexWrap="wrap"),!E&&w&&(X.columnGap=J),!x&&F&&(X.rowGap=H),L(I.createElement("div",Object.assign({ref:t,className:_,style:Object.assign(Object.assign(Object.assign({},X),a==null?void 0:a.style),y)},W),I.createElement(sne,{value:O},j)))}),xx=une;xx.Compact=BU;var dne=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Hx=e=>{const{getPopupContainer:t,getPrefixCls:n,direction:r}=I.useContext(dn),{prefixCls:i,type:o="default",danger:a,disabled:l,loading:g,onClick:u,htmlType:d,children:C,className:f,menu:m,arrow:b,autoFocus:p,overlay:y,trigger:S,align:v,open:B,onOpenChange:W,placement:J,getPopupContainer:H,href:x,icon:E=I.createElement(a1,null),title:F,buttonsRender:w=se=>se,mouseEnterDelay:V,mouseLeaveDelay:Y,overlayClassName:M,overlayStyle:L,destroyPopupOnHide:$,dropdownRender:U}=e,_=dne(e,["prefixCls","type","danger","disabled","loading","onClick","htmlType","children","className","menu","arrow","autoFocus","overlay","trigger","align","open","onOpenChange","placement","getPopupContainer","href","icon","title","buttonsRender","mouseEnterDelay","mouseLeaveDelay","overlayClassName","overlayStyle","destroyPopupOnHide","dropdownRender"]),P=n("dropdown",i),ee=`${P}-button`,j={menu:m,arrow:b,autoFocus:p,align:v,disabled:l,trigger:l?[]:S,onOpenChange:W,getPopupContainer:H||t,mouseEnterDelay:V,mouseLeaveDelay:Y,overlayClassName:M,overlayStyle:L,destroyPopupOnHide:$,dropdownRender:U},{compactSize:O,compactItemClassnames:X}=Gm(P,r),D=Re(ee,X,f);"overlay"in e&&(j.overlay=y),"open"in e&&(j.open=B),"placement"in e?j.placement=J:j.placement=r==="rtl"?"bottomLeft":"bottomRight";const z=I.createElement(da,{type:o,danger:a,disabled:l,loading:g,onClick:u,htmlType:d,href:x,title:F},C),Q=I.createElement(da,{type:o,danger:a,icon:E}),[ne,ce]=w([z,Q]);return I.createElement(xx.Compact,Object.assign({className:D,size:O,block:!0},_),ne,I.createElement(Sb,Object.assign({},j),ce))};Hx.__ANT_BUTTON=!0;const Xm=Sb;Xm.Button=Hx;function Ine(e,t,n){return typeof n=="boolean"?n:e.length?!0:el(t).some(i=>i.type===gx)}var Yx=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Rb(e){let{suffixCls:t,tagName:n,displayName:r}=e;return i=>I.forwardRef((a,l)=>I.createElement(i,Object.assign({ref:l,suffixCls:t,tagName:n},a)))}const C1=I.forwardRef((e,t)=>{const{prefixCls:n,suffixCls:r,className:i,tagName:o}=e,a=Yx(e,["prefixCls","suffixCls","className","tagName"]),{getPrefixCls:l}=I.useContext(dn),g=l("layout",n),[u,d,C]=sx(g),f=r?`${g}-${r}`:g;return u(I.createElement(o,Object.assign({className:Re(n||f,i,d,C),ref:t},a)))}),Cne=I.forwardRef((e,t)=>{const{direction:n}=I.useContext(dn),[r,i]=I.useState([]),{prefixCls:o,className:a,rootClassName:l,children:g,hasSider:u,tagName:d,style:C}=e,f=Yx(e,["prefixCls","className","rootClassName","children","hasSider","tagName","style"]),m=Pi(f,["suffixCls"]),{getPrefixCls:b,layout:p}=I.useContext(dn),y=b("layout",o),S=Ine(r,g,u),[v,B,W]=sx(y),J=Re(y,{[`${y}-has-sider`]:S,[`${y}-rtl`]:n==="rtl"},p==null?void 0:p.className,a,l,B,W),H=I.useMemo(()=>({siderHook:{addSider:x=>{i(E=>[].concat(Gt(E),[x]))},removeSider:x=>{i(E=>E.filter(F=>F!==x))}}}),[]);return v(I.createElement(ox.Provider,{value:H},I.createElement(d,Object.assign({ref:t,className:J,style:Object.assign(Object.assign({},p==null?void 0:p.style),C)},m),g)))}),fne=Rb({tagName:"div",displayName:"Layout"})(Cne),mne=Rb({suffixCls:"header",tagName:"header",displayName:"Header"})(C1),hne=Rb({suffixCls:"footer",tagName:"footer",displayName:"Footer"})(C1),Ane=Rb({suffixCls:"content",tagName:"main",displayName:"Content"})(C1),dC=fne;dC.Header=mne;dC.Footer=hne;dC.Content=Ane;dC.Sider=gx;dC._InternalSiderContext=vb;var pne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M272.9 512l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512zm304 0l265.4-339.1c4.1-5.2.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3a31.99 31.99 0 000 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z"}}]},name:"double-left",theme:"outlined"},bne=function(t,n){return I.createElement(er,lt({},t,{ref:n,icon:pne}))},Lw=I.forwardRef(bne),yne={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M533.2 492.3L277.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H188c-6.7 0-10.4 7.7-6.3 12.9L447.1 512 181.7 851.1A7.98 7.98 0 00188 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5zm304 0L581.9 166.1c-3-3.9-7.7-6.1-12.6-6.1H492c-6.7 0-10.4 7.7-6.3 12.9L751.1 512 485.7 851.1A7.98 7.98 0 00492 864h77.3c4.9 0 9.6-2.3 12.6-6.1l255.3-326.1c9.1-11.7 9.1-27.9 0-39.5z"}}]},name:"double-right",theme:"outlined"},vne=function(t,n){return I.createElement(er,lt({},t,{ref:n,icon:yne}))},Mw=I.forwardRef(vne),Sne={items_per_page:"/",jump_to:"",jump_to_confirm:"",page:"",prev_page:"",next_page:"",prev_5:" 5 ",next_5:" 5 ",prev_3:" 3 ",next_3:" 3 ",page_size:""},Zne=[10,20,50,100],Gne=function(t){var n=t.pageSizeOptions,r=n===void 0?Zne:n,i=t.locale,o=t.changeSize,a=t.pageSize,l=t.goButton,g=t.quickGo,u=t.rootPrefixCls,d=t.disabled,C=t.buildOptionText,f=t.showSizeChanger,m=t.sizeChangerRender,b=Ge.useState(""),p=xe(b,2),y=p[0],S=p[1],v=function(){return!y||Number.isNaN(y)?void 0:Number(y)},B=typeof C=="function"?C:function(Y){return"".concat(Y," ").concat(i.items_per_page)},W=function(M){S(M.target.value)},J=function(M){l||y===""||(S(""),!(M.relatedTarget&&(M.relatedTarget.className.indexOf("".concat(u,"-item-link"))>=0||M.relatedTarget.className.indexOf("".concat(u,"-item"))>=0))&&(g==null||g(v())))},H=function(M){y!==""&&(M.keyCode===Mt.ENTER||M.type==="click")&&(S(""),g==null||g(v()))},x=function(){return r.some(function(M){return M.toString()===a.toString()})?r:r.concat([a]).sort(function(M,L){var $=Number.isNaN(Number(M))?0:Number(M),U=Number.isNaN(Number(L))?0:Number(L);return $-U})},E="".concat(u,"-options");if(!f&&!g)return null;var F=null,w=null,V=null;return f&&m&&(F=m({disabled:d,size:a,onSizeChange:function(M){o==null||o(Number(M))},"aria-label":i.page_size,className:"".concat(E,"-size-changer"),options:x().map(function(Y){return{label:B(Y),value:Y}})})),g&&(l&&(V=typeof l=="boolean"?Ge.createElement("button",{type:"button",onClick:H,onKeyUp:H,disabled:d,className:"".concat(E,"-quick-jumper-button")},i.jump_to_confirm):Ge.createElement("span",{onClick:H,onKeyUp:H},l)),w=Ge.createElement("div",{className:"".concat(E,"-quick-jumper")},i.jump_to,Ge.createElement("input",{disabled:d,type:"text",value:y,onChange:W,onKeyUp:H,onBlur:J,"aria-label":i.page}),i.page,V)),Ge.createElement("li",{className:E},F,w)},_C=function(t){var n,r=t.rootPrefixCls,i=t.page,o=t.active,a=t.className,l=t.showTitle,g=t.onClick,u=t.onKeyPress,d=t.itemRender,C="".concat(r,"-item"),f=Re(C,"".concat(C,"-").concat(i),(n={},fe(n,"".concat(C,"-active"),o),fe(n,"".concat(C,"-disabled"),!i),n),a),m=function(){g(i)},b=function(S){u(S,g,i)},p=d(i,"page",Ge.createElement("a",{rel:"nofollow"},i));return p?Ge.createElement("li",{title:l?String(i):null,className:f,onClick:m,onKeyDown:b,tabIndex:0},p):null},Bne=function(t,n,r){return r};function Tw(){}function zw(e){var t=Number(e);return typeof t=="number"&&!Number.isNaN(t)&&isFinite(t)&&Math.floor(t)===t}function xu(e,t,n){var r=typeof e>"u"?t:e;return Math.floor((n-1)/r)+1}var Rne=function(t){var n,r=t.prefixCls,i=r===void 0?"rc-pagination":r,o=t.selectPrefixCls,a=o===void 0?"rc-select":o,l=t.className,g=t.current,u=t.defaultCurrent,d=u===void 0?1:u,C=t.total,f=C===void 0?0:C,m=t.pageSize,b=t.defaultPageSize,p=b===void 0?10:b,y=t.onChange,S=y===void 0?Tw:y,v=t.hideOnSinglePage,B=t.align,W=t.showPrevNextJumpers,J=W===void 0?!0:W,H=t.showQuickJumper,x=t.showLessItems,E=t.showTitle,F=E===void 0?!0:E,w=t.onShowSizeChange,V=w===void 0?Tw:w,Y=t.locale,M=Y===void 0?Sne:Y,L=t.style,$=t.totalBoundaryShowSizeChanger,U=$===void 0?50:$,_=t.disabled,P=t.simple,ee=t.showTotal,j=t.showSizeChanger,O=j===void 0?f>U:j,X=t.sizeChangerRender,D=t.pageSizeOptions,z=t.itemRender,Q=z===void 0?Bne:z,ne=t.jumpPrevIcon,ce=t.jumpNextIcon,se=t.prevIcon,ue=t.nextIcon,ve=Ge.useRef(null),Ae=qi(10,{value:m,defaultValue:p}),be=xe(Ae,2),me=be[0],Ne=be[1],Ie=qi(1,{value:g,defaultValue:d,postState:function(en){return Math.max(1,Math.min(en,xu(void 0,me,f)))}}),ae=xe(Ie,2),Ee=ae[0],Fe=ae[1],ke=Ge.useState(Ee),ze=xe(ke,2),He=ze[0],Le=ze[1];I.useEffect(function(){Le(Ee)},[Ee]);var Ye=Math.max(1,Ee-(x?3:5)),Pe=Math.min(xu(void 0,me,f),Ee+(x?3:5));function $e(Kt,en){var gn=Kt||Ge.createElement("button",{type:"button","aria-label":en,className:"".concat(i,"-item-link")});return typeof Kt=="function"&&(gn=Ge.createElement(Kt,he({},t))),gn}function ot(Kt){var en=Kt.target.value,gn=xu(void 0,me,f),kr;return en===""?kr=en:Number.isNaN(Number(en))?kr=He:en>=gn?kr=gn:kr=Number(en),kr}function Ct(Kt){return zw(Kt)&&Kt!==Ee&&zw(f)&&f>0}var pt=f>me?H:!1;function it(Kt){(Kt.keyCode===Mt.UP||Kt.keyCode===Mt.DOWN)&&Kt.preventDefault()}function It(Kt){var en=ot(Kt);switch(en!==He&&Le(en),Kt.keyCode){case Mt.ENTER:Qe(en);break;case Mt.UP:Qe(en-1);break;case Mt.DOWN:Qe(en+1);break}}function _e(Kt){Qe(ot(Kt))}function Ot(Kt){var en=xu(Kt,me,f),gn=Ee>en&&en!==0?en:Ee;Ne(Kt),Le(gn),V==null||V(Ee,Kt),Fe(gn),S==null||S(gn,Kt)}function Qe(Kt){if(Ct(Kt)&&!_){var en=xu(void 0,me,f),gn=Kt;return Kt>en?gn=en:Kt<1&&(gn=1),gn!==He&&Le(gn),Fe(gn),S==null||S(gn,me),gn}return Ee}var st=Ee>1,St=Ee<xu(void 0,me,f);function dt(){st&&Qe(Ee-1)}function Wt(){St&&Qe(Ee+1)}function Et(){Qe(Ye)}function hn(){Qe(Pe)}function mn(Kt,en){if(Kt.key==="Enter"||Kt.charCode===Mt.ENTER||Kt.keyCode===Mt.ENTER){for(var gn=arguments.length,kr=new Array(gn>2?gn-2:0),Ar=2;Ar<gn;Ar++)kr[Ar-2]=arguments[Ar];en.apply(void 0,kr)}}function Xn(Kt){mn(Kt,dt)}function Mn(Kt){mn(Kt,Wt)}function In(Kt){mn(Kt,Et)}function Jt(Kt){mn(Kt,hn)}function jt(Kt){var en=Q(Kt,"prev",$e(se,"prev page"));return Ge.isValidElement(en)?Ge.cloneElement(en,{disabled:!st}):en}function ln(Kt){var en=Q(Kt,"next",$e(ue,"next page"));return Ge.isValidElement(en)?Ge.cloneElement(en,{disabled:!St}):en}function Vt(Kt){(Kt.type==="click"||Kt.keyCode===Mt.ENTER)&&Qe(He)}var Rt=null,yt=tl(t,{aria:!0,data:!0}),ht=ee&&Ge.createElement("li",{className:"".concat(i,"-total-text")},ee(f,[f===0?0:(Ee-1)*me+1,Ee*me>f?f:Ee*me])),sn=null,ut=xu(void 0,me,f);if(v&&f<=me)return null;var ct=[],vt={rootPrefixCls:i,onClick:Qe,onKeyPress:mn,showTitle:F,itemRender:Q,page:-1},Bt=Ee-1>0?Ee-1:0,kt=Ee+1<ut?Ee+1:ut,Tt=H&&H.goButton,Jn=wt(P)==="object"?P.readOnly:!P,cn=Tt,yn=null;P&&(Tt&&(typeof Tt=="boolean"?cn=Ge.createElement("button",{type:"button",onClick:Vt,onKeyUp:Vt},M.jump_to_confirm):cn=Ge.createElement("span",{onClick:Vt,onKeyUp:Vt},Tt),cn=Ge.createElement("li",{title:F?"".concat(M.jump_to).concat(Ee,"/").concat(ut):null,className:"".concat(i,"-simple-pager")},cn)),yn=Ge.createElement("li",{title:F?"".concat(Ee,"/").concat(ut):null,className:"".concat(i,"-simple-pager")},Jn?He:Ge.createElement("input",{type:"text",value:He,disabled:_,onKeyDown:it,onKeyUp:It,onChange:It,onBlur:_e,size:3}),Ge.createElement("span",{className:"".concat(i,"-slash")},"/"),ut));var qt=x?1:2;if(ut<=3+qt*2){ut||ct.push(Ge.createElement(_C,lt({},vt,{key:"noPager",page:1,className:"".concat(i,"-item-disabled")})));for(var Vn=1;Vn<=ut;Vn+=1)ct.push(Ge.createElement(_C,lt({},vt,{key:Vn,page:Vn,active:Ee===Vn})))}else{var En=x?M.prev_3:M.prev_5,Dn=x?M.next_3:M.next_5,ar=Q(Ye,"jump-prev",$e(ne,"prev page")),Ln=Q(Pe,"jump-next",$e(ce,"next page"));J&&(Rt=ar?Ge.createElement("li",{title:F?En:null,key:"prev",onClick:Et,tabIndex:0,onKeyDown:In,className:Re("".concat(i,"-jump-prev"),fe({},"".concat(i,"-jump-prev-custom-icon"),!!ne))},ar):null,sn=Ln?Ge.createElement("li",{title:F?Dn:null,key:"next",onClick:hn,tabIndex:0,onKeyDown:Jt,className:Re("".concat(i,"-jump-next"),fe({},"".concat(i,"-jump-next-custom-icon"),!!ce))},Ln):null);var Pn=Math.max(1,Ee-qt),At=Math.min(Ee+qt,ut);Ee-1<=qt&&(At=1+qt*2),ut-Ee<=qt&&(Pn=ut-qt*2);for(var Ht=Pn;Ht<=At;Ht+=1)ct.push(Ge.createElement(_C,lt({},vt,{key:Ht,page:Ht,active:Ee===Ht})));if(Ee-1>=qt*2&&Ee!==3&&(ct[0]=Ge.cloneElement(ct[0],{className:Re("".concat(i,"-item-after-jump-prev"),ct[0].props.className)}),ct.unshift(Rt)),ut-Ee>=qt*2&&Ee!==ut-2){var Yt=ct[ct.length-1];ct[ct.length-1]=Ge.cloneElement(Yt,{className:Re("".concat(i,"-item-before-jump-next"),Yt.props.className)}),ct.push(sn)}Pn!==1&&ct.unshift(Ge.createElement(_C,lt({},vt,{key:1,page:1}))),At!==ut&&ct.push(Ge.createElement(_C,lt({},vt,{key:ut,page:ut})))}var at=jt(Bt);if(at){var Qt=!st||!ut;at=Ge.createElement("li",{title:F?M.prev_page:null,onClick:dt,tabIndex:Qt?null:0,onKeyDown:Xn,className:Re("".concat(i,"-prev"),fe({},"".concat(i,"-disabled"),Qt)),"aria-disabled":Qt},at)}var An=ln(kt);if(An){var Tn,tr;P?(Tn=!St,tr=st?0:null):(Tn=!St||!ut,tr=Tn?null:0),An=Ge.createElement("li",{title:F?M.next_page:null,onClick:Wt,tabIndex:tr,onKeyDown:Mn,className:Re("".concat(i,"-next"),fe({},"".concat(i,"-disabled"),Tn)),"aria-disabled":Tn},An)}var Rr=Re(i,l,(n={},fe(n,"".concat(i,"-start"),B==="start"),fe(n,"".concat(i,"-center"),B==="center"),fe(n,"".concat(i,"-end"),B==="end"),fe(n,"".concat(i,"-simple"),P),fe(n,"".concat(i,"-disabled"),_),n));return Ge.createElement("ul",lt({className:Rr,style:L,ref:ve},yt),ht,at,P?yn:ct,An,Ge.createElement(Gne,{locale:M,rootPrefixCls:i,disabled:_,selectPrefixCls:a,changeSize:Ot,pageSize:me,pageSizeOptions:D,quickGo:pt?Qe:null,goButton:cn,showSizeChanger:O,sizeChangerRender:X}))};const wne=e=>{const{componentCls:t}=e;return{[`${t}-disabled`]:{"&, &:hover":{cursor:"not-allowed",[`${t}-item-link`]:{color:e.colorTextDisabled,cursor:"not-allowed"}},"&:focus-visible":{cursor:"not-allowed",[`${t}-item-link`]:{color:e.colorTextDisabled,cursor:"not-allowed"}}},[`&${t}-disabled`]:{cursor:"not-allowed",[`${t}-item`]:{cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},a:{color:e.colorTextDisabled,backgroundColor:"transparent",border:"none",cursor:"not-allowed"},"&-active":{borderColor:e.colorBorder,backgroundColor:e.itemActiveBgDisabled,"&:hover, &:active":{backgroundColor:e.itemActiveBgDisabled},a:{color:e.itemActiveColorDisabled}}},[`${t}-item-link`]:{color:e.colorTextDisabled,cursor:"not-allowed","&:hover, &:active":{backgroundColor:"transparent"},[`${t}-simple&`]:{backgroundColor:"transparent","&:hover, &:active":{backgroundColor:"transparent"}}},[`${t}-simple-pager`]:{color:e.colorTextDisabled},[`${t}-jump-prev, ${t}-jump-next`]:{[`${t}-item-link-icon`]:{opacity:0},[`${t}-item-ellipsis`]:{opacity:1}}},[`&${t}-simple`]:{[`${t}-prev, ${t}-next`]:{[`&${t}-disabled ${t}-item-link`]:{"&:hover, &:active":{backgroundColor:"transparent"}}}}}},Wne=e=>{const{componentCls:t}=e;return{[`&${t}-mini ${t}-total-text, &${t}-mini ${t}-simple-pager`]:{height:e.itemSizeSM,lineHeight:Ve(e.itemSizeSM)},[`&${t}-mini ${t}-item`]:{minWidth:e.itemSizeSM,height:e.itemSizeSM,margin:0,lineHeight:Ve(e.calc(e.itemSizeSM).sub(2).equal())},[`&${t}-mini:not(${t}-disabled) ${t}-item:not(${t}-item-active)`]:{backgroundColor:"transparent",borderColor:"transparent","&:hover":{backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},[`&${t}-mini ${t}-prev, &${t}-mini ${t}-next`]:{minWidth:e.itemSizeSM,height:e.itemSizeSM,margin:0,lineHeight:Ve(e.itemSizeSM)},[`&${t}-mini:not(${t}-disabled)`]:{[`${t}-prev, ${t}-next`]:{[`&:hover ${t}-item-link`]:{backgroundColor:e.colorBgTextHover},[`&:active ${t}-item-link`]:{backgroundColor:e.colorBgTextActive},[`&${t}-disabled:hover ${t}-item-link`]:{backgroundColor:"transparent"}}},[`
    &${t}-mini ${t}-prev ${t}-item-link,
    &${t}-mini ${t}-next ${t}-item-link
    `]:{backgroundColor:"transparent",borderColor:"transparent","&::after":{height:e.itemSizeSM,lineHeight:Ve(e.itemSizeSM)}},[`&${t}-mini ${t}-jump-prev, &${t}-mini ${t}-jump-next`]:{height:e.itemSizeSM,marginInlineEnd:0,lineHeight:Ve(e.itemSizeSM)},[`&${t}-mini ${t}-options`]:{marginInlineStart:e.paginationMiniOptionsMarginInlineStart,"&-size-changer":{top:e.miniOptionsSizeChangerTop},"&-quick-jumper":{height:e.itemSizeSM,lineHeight:Ve(e.itemSizeSM),input:Object.assign(Object.assign({},c1(e)),{width:e.paginationMiniQuickJumperInputWidth,height:e.controlHeightSM})}}}},Vne=e=>{const{componentCls:t}=e;return{[`
    &${t}-simple ${t}-prev,
    &${t}-simple ${t}-next
    `]:{height:e.itemSizeSM,lineHeight:Ve(e.itemSizeSM),verticalAlign:"top",[`${t}-item-link`]:{height:e.itemSizeSM,backgroundColor:"transparent",border:0,"&:hover":{backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive},"&::after":{height:e.itemSizeSM,lineHeight:Ve(e.itemSizeSM)}}},[`&${t}-simple ${t}-simple-pager`]:{display:"inline-block",height:e.itemSizeSM,marginInlineEnd:e.marginXS,input:{boxSizing:"border-box",height:"100%",padding:`0 ${Ve(e.paginationItemPaddingInline)}`,textAlign:"center",backgroundColor:e.itemInputBg,border:`${Ve(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadius,outline:"none",transition:`border-color ${e.motionDurationMid}`,color:"inherit","&:hover":{borderColor:e.colorPrimary},"&:focus":{borderColor:e.colorPrimaryHover,boxShadow:`${Ve(e.inputOutlineOffset)} 0 ${Ve(e.controlOutlineWidth)} ${e.controlOutline}`},"&[disabled]":{color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,cursor:"not-allowed"}}}}},kne=e=>{const{componentCls:t}=e;return{[`${t}-jump-prev, ${t}-jump-next`]:{outline:0,[`${t}-item-container`]:{position:"relative",[`${t}-item-link-icon`]:{color:e.colorPrimary,fontSize:e.fontSizeSM,opacity:0,transition:`all ${e.motionDurationMid}`,"&-svg":{top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,margin:"auto"}},[`${t}-item-ellipsis`]:{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,display:"block",margin:"auto",color:e.colorTextDisabled,letterSpacing:e.paginationEllipsisLetterSpacing,textAlign:"center",textIndent:e.paginationEllipsisTextIndent,opacity:1,transition:`all ${e.motionDurationMid}`}},"&:hover":{[`${t}-item-link-icon`]:{opacity:1},[`${t}-item-ellipsis`]:{opacity:0}}},[`
    ${t}-prev,
    ${t}-jump-prev,
    ${t}-jump-next
    `]:{marginInlineEnd:e.marginXS},[`
    ${t}-prev,
    ${t}-next,
    ${t}-jump-prev,
    ${t}-jump-next
    `]:{display:"inline-block",minWidth:e.itemSize,height:e.itemSize,color:e.colorText,fontFamily:e.fontFamily,lineHeight:Ve(e.itemSize),textAlign:"center",verticalAlign:"middle",listStyle:"none",borderRadius:e.borderRadius,cursor:"pointer",transition:`all ${e.motionDurationMid}`},[`${t}-prev, ${t}-next`]:{outline:0,button:{color:e.colorText,cursor:"pointer",userSelect:"none"},[`${t}-item-link`]:{display:"block",width:"100%",height:"100%",padding:0,fontSize:e.fontSizeSM,textAlign:"center",backgroundColor:"transparent",border:`${Ve(e.lineWidth)} ${e.lineType} transparent`,borderRadius:e.borderRadius,outline:"none",transition:`all ${e.motionDurationMid}`},[`&:hover ${t}-item-link`]:{backgroundColor:e.colorBgTextHover},[`&:active ${t}-item-link`]:{backgroundColor:e.colorBgTextActive},[`&${t}-disabled:hover`]:{[`${t}-item-link`]:{backgroundColor:"transparent"}}},[`${t}-slash`]:{marginInlineEnd:e.paginationSlashMarginInlineEnd,marginInlineStart:e.paginationSlashMarginInlineStart},[`${t}-options`]:{display:"inline-block",marginInlineStart:e.margin,verticalAlign:"middle","&-size-changer":{display:"inline-block",width:"auto"},"&-quick-jumper":{display:"inline-block",height:e.controlHeight,marginInlineStart:e.marginXS,lineHeight:Ve(e.controlHeight),verticalAlign:"top",input:Object.assign(Object.assign(Object.assign({},u1(e)),g1(e,{borderColor:e.colorBorder,hoverBorderColor:e.colorPrimaryHover,activeBorderColor:e.colorPrimary,activeShadow:e.activeShadow})),{"&[disabled]":Object.assign({},Zb(e)),width:e.calc(e.controlHeightLG).mul(1.25).equal(),height:e.controlHeight,boxSizing:"border-box",margin:0,marginInlineStart:e.marginXS,marginInlineEnd:e.marginXS})}}}},Nne=e=>{const{componentCls:t}=e;return{[`${t}-item`]:{display:"inline-block",minWidth:e.itemSize,height:e.itemSize,marginInlineEnd:e.marginXS,fontFamily:e.fontFamily,lineHeight:Ve(e.calc(e.itemSize).sub(2).equal()),textAlign:"center",verticalAlign:"middle",listStyle:"none",backgroundColor:e.itemBg,border:`${Ve(e.lineWidth)} ${e.lineType} transparent`,borderRadius:e.borderRadius,outline:0,cursor:"pointer",userSelect:"none",a:{display:"block",padding:`0 ${Ve(e.paginationItemPaddingInline)}`,color:e.colorText,"&:hover":{textDecoration:"none"}},[`&:not(${t}-item-active)`]:{"&:hover":{transition:`all ${e.motionDurationMid}`,backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},"&-active":{fontWeight:e.fontWeightStrong,backgroundColor:e.itemActiveBg,borderColor:e.colorPrimary,a:{color:e.colorPrimary},"&:hover":{borderColor:e.colorPrimaryHover},"&:hover a":{color:e.colorPrimaryHover}}}}},Xne=e=>{const{componentCls:t}=e;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ca(e)),{display:"flex","&-start":{justifyContent:"start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"end"},"ul, ol":{margin:0,padding:0,listStyle:"none"},"&::after":{display:"block",clear:"both",height:0,overflow:"hidden",visibility:"hidden",content:'""'},[`${t}-total-text`]:{display:"inline-block",height:e.itemSize,marginInlineEnd:e.marginXS,lineHeight:Ve(e.calc(e.itemSize).sub(2).equal()),verticalAlign:"middle"}}),Nne(e)),kne(e)),Vne(e)),Wne(e)),wne(e)),{[`@media only screen and (max-width: ${e.screenLG}px)`]:{[`${t}-item`]:{"&-after-jump-prev, &-before-jump-next":{display:"none"}}},[`@media only screen and (max-width: ${e.screenSM}px)`]:{[`${t}-options`]:{display:"none"}}}),[`&${e.componentCls}-rtl`]:{direction:"rtl"}}},Jne=e=>{const{componentCls:t}=e;return{[`${t}:not(${t}-disabled)`]:{[`${t}-item`]:Object.assign({},Ds(e)),[`${t}-jump-prev, ${t}-jump-next`]:{"&:focus-visible":Object.assign({[`${t}-item-link-icon`]:{opacity:1},[`${t}-item-ellipsis`]:{opacity:0}},MI(e))},[`${t}-prev, ${t}-next`]:{[`&:focus-visible ${t}-item-link`]:Object.assign({},MI(e))}}}},Ex=e=>Object.assign({itemBg:e.colorBgContainer,itemSize:e.controlHeight,itemSizeSM:e.controlHeightSM,itemActiveBg:e.colorBgContainer,itemLinkBg:e.colorBgContainer,itemActiveColorDisabled:e.colorTextDisabled,itemActiveBgDisabled:e.controlItemBgActiveDisabled,itemInputBg:e.colorBgContainer,miniOptionsSizeChangerTop:0},s1(e)),Fx=e=>Br(e,{inputOutlineOffset:0,paginationMiniOptionsMarginInlineStart:e.calc(e.marginXXS).div(2).equal(),paginationMiniQuickJumperInputWidth:e.calc(e.controlHeightLG).mul(1.1).equal(),paginationItemPaddingInline:e.calc(e.marginXXS).mul(1.5).equal(),paginationEllipsisLetterSpacing:e.calc(e.marginXXS).div(2).equal(),paginationSlashMarginInlineStart:e.marginSM,paginationSlashMarginInlineEnd:e.marginSM,paginationEllipsisTextIndent:"0.13em"},l1(e)),xne=Gi("Pagination",e=>{const t=Fx(e);return[Xne(t),Jne(t)]},Ex),Hne=e=>{const{componentCls:t}=e;return{[`${t}${t}-bordered${t}-disabled:not(${t}-mini)`]:{"&, &:hover":{[`${t}-item-link`]:{borderColor:e.colorBorder}},"&:focus-visible":{[`${t}-item-link`]:{borderColor:e.colorBorder}},[`${t}-item, ${t}-item-link`]:{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,[`&:hover:not(${t}-item-active)`]:{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,a:{color:e.colorTextDisabled}},[`&${t}-item-active`]:{backgroundColor:e.itemActiveBgDisabled}},[`${t}-prev, ${t}-next`]:{"&:hover button":{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,color:e.colorTextDisabled},[`${t}-item-link`]:{backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder}}},[`${t}${t}-bordered:not(${t}-mini)`]:{[`${t}-prev, ${t}-next`]:{"&:hover button":{borderColor:e.colorPrimaryHover,backgroundColor:e.itemBg},[`${t}-item-link`]:{backgroundColor:e.itemLinkBg,borderColor:e.colorBorder},[`&:hover ${t}-item-link`]:{borderColor:e.colorPrimary,backgroundColor:e.itemBg,color:e.colorPrimary},[`&${t}-disabled`]:{[`${t}-item-link`]:{borderColor:e.colorBorder,color:e.colorTextDisabled}}},[`${t}-item`]:{backgroundColor:e.itemBg,border:`${Ve(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,[`&:hover:not(${t}-item-active)`]:{borderColor:e.colorPrimary,backgroundColor:e.itemBg,a:{color:e.colorPrimary}},"&-active":{borderColor:e.colorPrimary}}}}},Yne=NZ(["Pagination","bordered"],e=>{const t=Fx(e);return[Hne(t)]},Ex);function Dw(e){return I.useMemo(()=>typeof e=="boolean"?[e,{}]:e&&typeof e=="object"?[!0,e]:[void 0,void 0],[e])}var Ene=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const f1=e=>{const{align:t,prefixCls:n,selectPrefixCls:r,className:i,rootClassName:o,style:a,size:l,locale:g,responsive:u,showSizeChanger:d,selectComponentClass:C,pageSizeOptions:f}=e,m=Ene(e,["align","prefixCls","selectPrefixCls","className","rootClassName","style","size","locale","responsive","showSizeChanger","selectComponentClass","pageSizeOptions"]),{xs:b}=m$(u),[,p]=Ia(),{getPrefixCls:y,direction:S,pagination:v={}}=I.useContext(dn),B=y("pagination",n),[W,J,H]=xne(B),x=Os(l),E=x==="small"||!!(b&&!x&&u),[F]=lu("Pagination",KX),w=Object.assign(Object.assign({},F),g),[V,Y]=Dw(d),[M,L]=Dw(v.showSizeChanger),$=V??M,U=Y??L,_=C||gC,P=I.useMemo(()=>f?f.map(z=>Number(z)):void 0,[f]),ee=z=>{var Q;const{disabled:ne,size:ce,onSizeChange:se,"aria-label":ue,className:ve,options:Ae}=z,{className:be,onChange:me}=U||{},Ne=(Q=Ae.find(Ie=>String(Ie.value)===String(ce)))===null||Q===void 0?void 0:Q.value;return I.createElement(_,Object.assign({disabled:ne,showSearch:!0,popupMatchSelectWidth:!1,getPopupContainer:Ie=>Ie.parentNode,"aria-label":ue,options:Ae},U,{value:Ne,onChange:(Ie,ae)=>{se==null||se(Ie),me==null||me(Ie,ae)},size:E?"small":"middle",className:Re(ve,be)}))},j=I.useMemo(()=>{const z=I.createElement("span",{className:`${B}-item-ellipsis`},""),Q=I.createElement("button",{className:`${B}-item-link`,type:"button",tabIndex:-1},S==="rtl"?I.createElement(Uf,null):I.createElement(Rp,null)),ne=I.createElement("button",{className:`${B}-item-link`,type:"button",tabIndex:-1},S==="rtl"?I.createElement(Rp,null):I.createElement(Uf,null)),ce=I.createElement("a",{className:`${B}-item-link`},I.createElement("div",{className:`${B}-item-container`},S==="rtl"?I.createElement(Mw,{className:`${B}-item-link-icon`}):I.createElement(Lw,{className:`${B}-item-link-icon`}),z)),se=I.createElement("a",{className:`${B}-item-link`},I.createElement("div",{className:`${B}-item-container`},S==="rtl"?I.createElement(Lw,{className:`${B}-item-link-icon`}):I.createElement(Mw,{className:`${B}-item-link-icon`}),z));return{prevIcon:Q,nextIcon:ne,jumpPrevIcon:ce,jumpNextIcon:se}},[S,B]),O=y("select",r),X=Re({[`${B}-${t}`]:!!t,[`${B}-mini`]:E,[`${B}-rtl`]:S==="rtl",[`${B}-bordered`]:p.wireframe},v==null?void 0:v.className,i,o,J,H),D=Object.assign(Object.assign({},v==null?void 0:v.style),a);return W(I.createElement(I.Fragment,null,p.wireframe&&I.createElement(Yne,{prefixCls:B}),I.createElement(Rne,Object.assign({},j,m,{style:D,prefixCls:B,selectPrefixCls:O,className:X,locale:w,pageSizeOptions:P,showSizeChanger:$,sizeChangerRender:ee}))))},kp=100,Kx=kp/5,Lx=kp/2-Kx/2,Qy=Lx*2*Math.PI,Pw=50,Ow=e=>{const{dotClassName:t,style:n,hasCircleCls:r}=e;return I.createElement("circle",{className:Re(`${t}-circle`,{[`${t}-circle-bg`]:r}),r:Lx,cx:Pw,cy:Pw,strokeWidth:Kx,style:n})},Fne=e=>{let{percent:t,prefixCls:n}=e;const r=`${n}-dot`,i=`${r}-holder`,o=`${i}-hidden`,[a,l]=I.useState(!1);ur(()=>{t!==0&&l(!0)},[t!==0]);const g=Math.max(Math.min(t,100),0);if(!a)return null;const u={strokeDashoffset:`${Qy/4}`,strokeDasharray:`${Qy*g/100} ${Qy*(100-g)/100}`};return I.createElement("span",{className:Re(i,`${r}-progress`,g<=0&&o)},I.createElement("svg",{viewBox:`0 0 ${kp} ${kp}`,role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":g},I.createElement(Ow,{dotClassName:r,hasCircleCls:!0}),I.createElement(Ow,{dotClassName:r,style:u})))};function Kne(e){const{prefixCls:t,percent:n=0}=e,r=`${t}-dot`,i=`${r}-holder`,o=`${i}-hidden`;return I.createElement(I.Fragment,null,I.createElement("span",{className:Re(i,n>0&&o)},I.createElement("span",{className:Re(r,`${t}-dot-spin`)},[1,2,3,4].map(a=>I.createElement("i",{className:`${t}-dot-item`,key:a})))),I.createElement(Fne,{prefixCls:t,percent:n}))}function Lne(e){const{prefixCls:t,indicator:n,percent:r}=e,i=`${t}-dot`;return n&&I.isValidElement(n)?os(n,{className:Re(n.props.className,i),percent:r}):I.createElement(Kne,{prefixCls:t,percent:r})}const Mne=new lr("antSpinMove",{to:{opacity:1}}),Tne=new lr("antRotate",{to:{transform:"rotate(405deg)"}}),zne=e=>{const{componentCls:t,calc:n}=e;return{[t]:Object.assign(Object.assign({},Ca(e)),{position:"absolute",display:"none",color:e.colorPrimary,fontSize:0,textAlign:"center",verticalAlign:"middle",opacity:0,transition:`transform ${e.motionDurationSlow} ${e.motionEaseInOutCirc}`,"&-spinning":{position:"relative",display:"inline-block",opacity:1},[`${t}-text`]:{fontSize:e.fontSize,paddingTop:n(n(e.dotSize).sub(e.fontSize)).div(2).add(2).equal()},"&-fullscreen":{position:"fixed",width:"100vw",height:"100vh",backgroundColor:e.colorBgMask,zIndex:e.zIndexPopupBase,inset:0,display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"center",opacity:0,visibility:"hidden",transition:`all ${e.motionDurationMid}`,"&-show":{opacity:1,visibility:"visible"},[t]:{[`${t}-dot-holder`]:{color:e.colorWhite},[`${t}-text`]:{color:e.colorTextLightSolid}}},"&-nested-loading":{position:"relative",[`> div > ${t}`]:{position:"absolute",top:0,insetInlineStart:0,zIndex:4,display:"block",width:"100%",height:"100%",maxHeight:e.contentHeight,[`${t}-dot`]:{position:"absolute",top:"50%",insetInlineStart:"50%",margin:n(e.dotSize).mul(-1).div(2).equal()},[`${t}-text`]:{position:"absolute",top:"50%",width:"100%",textShadow:`0 1px 2px ${e.colorBgContainer}`},[`&${t}-show-text ${t}-dot`]:{marginTop:n(e.dotSize).div(2).mul(-1).sub(10).equal()},"&-sm":{[`${t}-dot`]:{margin:n(e.dotSizeSM).mul(-1).div(2).equal()},[`${t}-text`]:{paddingTop:n(n(e.dotSizeSM).sub(e.fontSize)).div(2).add(2).equal()},[`&${t}-show-text ${t}-dot`]:{marginTop:n(e.dotSizeSM).div(2).mul(-1).sub(10).equal()}},"&-lg":{[`${t}-dot`]:{margin:n(e.dotSizeLG).mul(-1).div(2).equal()},[`${t}-text`]:{paddingTop:n(n(e.dotSizeLG).sub(e.fontSize)).div(2).add(2).equal()},[`&${t}-show-text ${t}-dot`]:{marginTop:n(e.dotSizeLG).div(2).mul(-1).sub(10).equal()}}},[`${t}-container`]:{position:"relative",transition:`opacity ${e.motionDurationSlow}`,"&::after":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,zIndex:10,width:"100%",height:"100%",background:e.colorBgContainer,opacity:0,transition:`all ${e.motionDurationSlow}`,content:'""',pointerEvents:"none"}},[`${t}-blur`]:{clear:"both",opacity:.5,userSelect:"none",pointerEvents:"none","&::after":{opacity:.4,pointerEvents:"auto"}}},"&-tip":{color:e.spinDotDefault},[`${t}-dot-holder`]:{width:"1em",height:"1em",fontSize:e.dotSize,display:"inline-block",transition:`transform ${e.motionDurationSlow} ease, opacity ${e.motionDurationSlow} ease`,transformOrigin:"50% 50%",lineHeight:1,color:e.colorPrimary,"&-hidden":{transform:"scale(0.3)",opacity:0}},[`${t}-dot-progress`]:{position:"absolute",inset:0},[`${t}-dot`]:{position:"relative",display:"inline-block",fontSize:e.dotSize,width:"1em",height:"1em","&-item":{position:"absolute",display:"block",width:n(e.dotSize).sub(n(e.marginXXS).div(2)).div(2).equal(),height:n(e.dotSize).sub(n(e.marginXXS).div(2)).div(2).equal(),background:"currentColor",borderRadius:"100%",transform:"scale(0.75)",transformOrigin:"50% 50%",opacity:.3,animationName:Mne,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"alternate","&:nth-child(1)":{top:0,insetInlineStart:0,animationDelay:"0s"},"&:nth-child(2)":{top:0,insetInlineEnd:0,animationDelay:"0.4s"},"&:nth-child(3)":{insetInlineEnd:0,bottom:0,animationDelay:"0.8s"},"&:nth-child(4)":{bottom:0,insetInlineStart:0,animationDelay:"1.2s"}},"&-spin":{transform:"rotate(45deg)",animationName:Tne,animationDuration:"1.2s",animationIterationCount:"infinite",animationTimingFunction:"linear"},"&-circle":{strokeLinecap:"round",transition:["stroke-dashoffset","stroke-dasharray","stroke","stroke-width","opacity"].map(r=>`${r} ${e.motionDurationSlow} ease`).join(","),fillOpacity:0,stroke:"currentcolor"},"&-circle-bg":{stroke:e.colorFillSecondary}},[`&-sm ${t}-dot`]:{"&, &-holder":{fontSize:e.dotSizeSM}},[`&-sm ${t}-dot-holder`]:{i:{width:n(n(e.dotSizeSM).sub(n(e.marginXXS).div(2))).div(2).equal(),height:n(n(e.dotSizeSM).sub(n(e.marginXXS).div(2))).div(2).equal()}},[`&-lg ${t}-dot`]:{"&, &-holder":{fontSize:e.dotSizeLG}},[`&-lg ${t}-dot-holder`]:{i:{width:n(n(e.dotSizeLG).sub(e.marginXXS)).div(2).equal(),height:n(n(e.dotSizeLG).sub(e.marginXXS)).div(2).equal()}},[`&${t}-show-text ${t}-text`]:{display:"block"}})}},Dne=e=>{const{controlHeightLG:t,controlHeight:n}=e;return{contentHeight:400,dotSize:t/2,dotSizeSM:t*.35,dotSizeLG:n}},Pne=Gi("Spin",e=>{const t=Br(e,{spinDotDefault:e.colorTextDescription});return[zne(t)]},Dne),One=200,_w=[[30,.05],[70,.03],[96,.01]];function _ne(e,t){const[n,r]=I.useState(0),i=I.useRef(null),o=t==="auto";return I.useEffect(()=>(o&&e&&(r(0),i.current=setInterval(()=>{r(a=>{const l=100-a;for(let g=0;g<_w.length;g+=1){const[u,d]=_w[g];if(a<=u)return a+l*d}return a})},One)),()=>{clearInterval(i.current)}),[o,e]),o?n:t}var Une=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};let Mx;function jne(e,t){return!!e&&!!t&&!Number.isNaN(Number(t))}const Jm=e=>{var t;const{prefixCls:n,spinning:r=!0,delay:i=0,className:o,rootClassName:a,size:l="default",tip:g,wrapperClassName:u,style:d,children:C,fullscreen:f=!1,indicator:m,percent:b}=e,p=Une(e,["prefixCls","spinning","delay","className","rootClassName","size","tip","wrapperClassName","style","children","fullscreen","indicator","percent"]),{getPrefixCls:y,direction:S,spin:v}=I.useContext(dn),B=y("spin",n),[W,J,H]=Pne(B),[x,E]=I.useState(()=>r&&!jne(r,i)),F=_ne(x,b);I.useEffect(()=>{if(r){const U=Cte(i,()=>{E(!0)});return U(),()=>{var _;(_=U==null?void 0:U.cancel)===null||_===void 0||_.call(U)}}E(!1)},[i,r]);const w=I.useMemo(()=>typeof C<"u"&&!f,[C,f]),V=Re(B,v==null?void 0:v.className,{[`${B}-sm`]:l==="small",[`${B}-lg`]:l==="large",[`${B}-spinning`]:x,[`${B}-show-text`]:!!g,[`${B}-rtl`]:S==="rtl"},o,!f&&a,J,H),Y=Re(`${B}-container`,{[`${B}-blur`]:x}),M=(t=m??(v==null?void 0:v.indicator))!==null&&t!==void 0?t:Mx,L=Object.assign(Object.assign({},v==null?void 0:v.style),d),$=I.createElement("div",Object.assign({},p,{style:L,className:V,"aria-live":"polite","aria-busy":x}),I.createElement(Lne,{prefixCls:B,indicator:M,percent:F}),g&&(w||f)?I.createElement("div",{className:`${B}-text`},g):null);return W(w?I.createElement("div",Object.assign({},p,{className:Re(`${B}-nested-loading`,u,J,H)}),x&&I.createElement("div",{key:"loading"},$),I.createElement("div",{className:Y,key:"container"},C)):f?I.createElement("div",{className:Re(`${B}-fullscreen`,{[`${B}-fullscreen-show`]:x},a,J,H)},$):$)};Jm.setDefaultIndicator=e=>{Mx=e};function Qne(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)&&e==null?[]:Array.isArray(e)?e:[e]}let Al=null,Pu=e=>e(),$f=[],qf={};function Uw(){const{getContainer:e,duration:t,rtl:n,maxCount:r,top:i}=qf,o=(e==null?void 0:e())||document.body;return{getContainer:()=>o,duration:t,rtl:n,maxCount:r,top:i}}const $ne=Ge.forwardRef((e,t)=>{const{messageConfig:n,sync:r}=e,{getPrefixCls:i}=I.useContext(dn),o=qf.prefixCls||i("message"),a=I.useContext($Q),[l,g]=k3(Object.assign(Object.assign(Object.assign({},n),{prefixCls:o}),a.message));return Ge.useImperativeHandle(t,()=>{const u=Object.assign({},l);return Object.keys(u).forEach(d=>{u[d]=function(){return r(),l[d].apply(l,arguments)}}),{instance:u,sync:r}}),g}),qne=Ge.forwardRef((e,t)=>{const[n,r]=Ge.useState(Uw),i=()=>{r(Uw)};Ge.useEffect(i,[]);const o=m3(),a=o.getRootPrefixCls(),l=o.getIconPrefixCls(),g=o.getTheme(),u=Ge.createElement($ne,{ref:t,sync:i,messageConfig:n});return Ge.createElement(Mg,{prefixCls:a,iconPrefixCls:l,theme:g},o.holderRender?o.holderRender(u):u)});function wb(){if(!Al){const e=document.createDocumentFragment(),t={fragment:e};Al=t,Pu(()=>{xZ()(Ge.createElement(qne,{ref:r=>{const{instance:i,sync:o}=r||{};Promise.resolve().then(()=>{!t.instance&&i&&(t.instance=i,t.sync=o,wb())})}}),e)});return}Al.instance&&($f.forEach(e=>{const{type:t,skipped:n}=e;if(!n)switch(t){case"open":{Pu(()=>{const r=Al.instance.open(Object.assign(Object.assign({},qf),e.config));r==null||r.then(e.resolve),e.setCloseFn(r)});break}case"destroy":Pu(()=>{Al==null||Al.instance.destroy(e.key)});break;default:Pu(()=>{var r;const i=(r=Al.instance)[t].apply(r,Gt(e.args));i==null||i.then(e.resolve),e.setCloseFn(i)})}}),$f=[])}function ere(e){qf=Object.assign(Object.assign({},qf),e),Pu(()=>{var t;(t=Al==null?void 0:Al.sync)===null||t===void 0||t.call(Al)})}function tre(e){const t=JZ(n=>{let r;const i={type:"open",config:e,resolve:n,setCloseFn:o=>{r=o}};return $f.push(i),()=>{r?Pu(()=>{r()}):i.skipped=!0}});return wb(),t}function nre(e,t){const n=JZ(r=>{let i;const o={type:e,args:t,resolve:r,setCloseFn:a=>{i=a}};return $f.push(o),()=>{i?Pu(()=>{i()}):o.skipped=!0}});return wb(),n}const rre=e=>{$f.push({type:"destroy",key:e}),wb()},ire=["success","info","warning","error","loading"],ore={open:tre,destroy:rre,config:ere,useMessage:q_,_InternalPanelDoNotUseOrYouWillBeFired:D_},id=ore;ire.forEach(e=>{id[e]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return nre(e,n)}});var are=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const lre=e=>{const{prefixCls:t,className:n,closeIcon:r,closable:i,type:o,title:a,children:l,footer:g}=e,u=are(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:d}=I.useContext(dn),C=d(),f=t||d("modal"),m=gs(C),[b,p,y]=lJ(f,m),S=`${f}-confirm`;let v={};return o?v={closable:i??!1,title:"",footer:"",children:I.createElement(gJ,Object.assign({},e,{prefixCls:f,confirmPrefixCls:S,rootPrefixCls:C,content:l}))}:v={closable:i??!0,title:a,footer:g!==null&&I.createElement(rJ,Object.assign({},e)),children:l},b(I.createElement(D3,Object.assign({prefixCls:f,className:Re(p,`${f}-pure-panel`,o&&S,o&&`${S}-${o}`,n,y,m)},u,{closeIcon:nJ(f,r),closable:i},v)))},sre=AJ(lre);function Tx(e){return Wm(IJ(e))}const cs=sJ;cs.useModal=QQ;cs.info=function(t){return Wm(CJ(t))};cs.success=function(t){return Wm(fJ(t))};cs.error=function(t){return Wm(mJ(t))};cs.warning=Tx;cs.warn=Tx;cs.confirm=function(t){return Wm(hJ(t))};cs.destroyAll=function(){for(;Du.length;){const t=Du.pop();t&&t()}};cs.config=PQ;cs._InternalPanelDoNotUseOrYouWillBeFired=sre;var gre={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},cre=function(t,n){return I.createElement(er,lt({},t,{ref:n,icon:gre}))},ure=I.forwardRef(cre),dre={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z"}}]},name:"copy",theme:"outlined"},Ire=function(t,n){return I.createElement(er,lt({},t,{ref:n,icon:dre}))},Cre=I.forwardRef(Ire),fre={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},mre=function(t,n){return I.createElement(er,lt({},t,{ref:n,icon:fre}))},m1=I.forwardRef(mre),hre={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},Are=function(t,n){return I.createElement(er,lt({},t,{ref:n,icon:hre}))},pre=I.forwardRef(Are),bre={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},yre=function(t,n){return I.createElement(er,lt({},t,{ref:n,icon:bre}))},Wb=I.forwardRef(yre),vre={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M864 170h-60c-4.4 0-8 3.6-8 8v518H310v-73c0-6.7-7.8-10.5-13-6.3l-141.9 112a8 8 0 000 12.6l141.9 112c5.3 4.2 13 .4 13-6.3v-75h498c35.3 0 64-28.7 64-64V178c0-4.4-3.6-8-8-8z"}}]},name:"enter",theme:"outlined"},Sre=function(t,n){return I.createElement(er,lt({},t,{ref:n,icon:vre}))},Zre=I.forwardRef(Sre),Gre={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M956.9 845.1L896.4 632V168c0-17.7-14.3-32-32-32h-704c-17.7 0-32 14.3-32 32v464L67.9 845.1C60.4 866 75.8 888 98 888h828.8c22.2 0 37.6-22 30.1-42.9zM200.4 208h624v395h-624V208zm228.3 608l8.1-37h150.3l8.1 37H428.7zm224 0l-19.1-86.7c-.8-3.7-4.1-6.3-7.8-6.3H398.2c-3.8 0-7 2.6-7.8 6.3L371.3 816H151l42.3-149h638.2l42.3 149H652.7z"}}]},name:"laptop",theme:"outlined"},Bre=function(t,n){return I.createElement(er,lt({},t,{ref:n,icon:Gre}))},Rre=I.forwardRef(Bre),wre={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},Wre=function(t,n){return I.createElement(er,lt({},t,{ref:n,icon:wre}))},zx=I.forwardRef(Wre),Vre={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 732h-70.3c-4.8 0-9.3 2.1-12.3 5.8-7 8.5-14.5 16.7-22.4 24.5a353.84 353.84 0 01-112.7 75.9A352.8 352.8 0 01512.4 866c-47.9 0-94.3-9.4-137.9-27.8a353.84 353.84 0 01-112.7-75.9 353.28 353.28 0 01-76-112.5C167.3 606.2 158 559.9 158 512s9.4-94.2 27.8-137.8c17.8-42.1 43.4-80 76-112.5s70.5-58.1 112.7-75.9c43.6-18.4 90-27.8 137.9-27.8 47.9 0 94.3 9.3 137.9 27.8 42.2 17.8 80.1 43.4 112.7 75.9 7.9 7.9 15.3 16.1 22.4 24.5 3 3.7 7.6 5.8 12.3 5.8H868c6.3 0 10.2-7 6.7-12.3C798 160.5 663.8 81.6 511.3 82 271.7 82.6 79.6 277.1 82 516.4 84.4 751.9 276.2 942 512.4 942c152.1 0 285.7-78.8 362.3-197.7 3.4-5.3-.4-12.3-6.7-12.3zm88.9-226.3L815 393.7c-5.3-4.2-13-.4-13 6.3v76H488c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h314v76c0 6.7 7.8 10.5 13 6.3l141.9-112a8 8 0 000-12.6z"}}]},name:"logout",theme:"outlined"},kre=function(t,n){return I.createElement(er,lt({},t,{ref:n,icon:Vre}))},Nre=I.forwardRef(kre),Xre={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"}}]},name:"mail",theme:"outlined"},Jre=function(t,n){return I.createElement(er,lt({},t,{ref:n,icon:Xre}))},Dx=I.forwardRef(Jre),xre={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 000 13.8z"}}]},name:"menu-fold",theme:"outlined"},Hre=function(t,n){return I.createElement(er,lt({},t,{ref:n,icon:xre}))},Yre=I.forwardRef(Hre),Ere={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 000-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0014.4 7z"}}]},name:"menu-unfold",theme:"outlined"},Fre=function(t,n){return I.createElement(er,lt({},t,{ref:n,icon:Ere}))},Kre=I.forwardRef(Fre),Lre={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"},Mre=function(t,n){return I.createElement(er,lt({},t,{ref:n,icon:Lre}))},Tre=I.forwardRef(Mre),zre={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M468 128H160c-17.7 0-32 14.3-32 32v308c0 4.4 3.6 8 8 8h332c4.4 0 8-3.6 8-8V136c0-4.4-3.6-8-8-8zm-56 284H192V192h220v220zm-138-74h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm194 210H136c-4.4 0-8 3.6-8 8v308c0 17.7 14.3 32 32 32h308c4.4 0 8-3.6 8-8V556c0-4.4-3.6-8-8-8zm-56 284H192V612h220v220zm-138-74h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm590-630H556c-4.4 0-8 3.6-8 8v332c0 4.4 3.6 8 8 8h332c4.4 0 8-3.6 8-8V160c0-17.7-14.3-32-32-32zm-32 284H612V192h220v220zm-138-74h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm194 210h-48c-4.4 0-8 3.6-8 8v134h-78V556c0-4.4-3.6-8-8-8H556c-4.4 0-8 3.6-8 8v332c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V644h78v102c0 4.4 3.6 8 8 8h190c4.4 0 8-3.6 8-8V556c0-4.4-3.6-8-8-8zM746 832h-48c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm142 0h-48c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}}]},name:"qrcode",theme:"outlined"},Dre=function(t,n){return I.createElement(er,lt({},t,{ref:n,icon:zre}))},Pre=I.forwardRef(Dre),Ore={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M924.8 625.7l-65.5-56c3.1-19 4.7-38.4 4.7-57.8s-1.6-38.8-4.7-57.8l65.5-56a32.03 32.03 0 009.3-35.2l-.9-2.6a443.74 443.74 0 00-79.7-137.9l-1.8-2.1a32.12 32.12 0 00-35.1-9.5l-81.3 28.9c-30-24.6-63.5-44-99.7-57.6l-15.7-85a32.05 32.05 0 00-25.8-25.7l-2.7-.5c-52.1-9.4-106.9-9.4-159 0l-2.7.5a32.05 32.05 0 00-25.8 25.7l-15.8 85.4a351.86 351.86 0 00-99 57.4l-81.9-29.1a32 32 0 00-35.1 9.5l-1.8 2.1a446.02 446.02 0 00-79.7 137.9l-.9 2.6c-4.5 12.5-.8 26.5 9.3 35.2l66.3 56.6c-3.1 18.8-4.6 38-4.6 57.1 0 19.2 1.5 38.4 4.6 57.1L99 625.5a32.03 32.03 0 00-9.3 35.2l.9 2.6c18.1 50.4 44.9 96.9 79.7 137.9l1.8 2.1a32.12 32.12 0 0035.1 9.5l81.9-29.1c29.8 24.5 63.1 43.9 99 57.4l15.8 85.4a32.05 32.05 0 0025.8 25.7l2.7.5a449.4 449.4 0 00159 0l2.7-.5a32.05 32.05 0 0025.8-25.7l15.7-85a350 350 0 0099.7-57.6l81.3 28.9a32 32 0 0035.1-9.5l1.8-2.1c34.8-41.1 61.6-87.5 79.7-137.9l.9-2.6c4.5-12.3.8-26.3-9.3-35zM788.3 465.9c2.5 15.1 3.8 30.6 3.8 46.1s-1.3 31-3.8 46.1l-6.6 40.1 74.7 63.9a370.03 370.03 0 01-42.6 73.6L721 702.8l-31.4 25.8c-23.9 19.6-50.5 35-79.3 45.8l-38.1 14.3-17.9 97a377.5 377.5 0 01-85 0l-17.9-97.2-37.8-14.5c-28.5-10.8-55-26.2-78.7-45.7l-31.4-25.9-93.4 33.2c-17-22.9-31.2-47.6-42.6-73.6l75.5-64.5-6.5-40c-2.4-14.9-3.7-30.3-3.7-45.5 0-15.3 1.2-30.6 3.7-45.5l6.5-40-75.5-64.5c11.3-26.1 25.6-50.7 42.6-73.6l93.4 33.2 31.4-25.9c23.7-19.5 50.2-34.9 78.7-45.7l37.9-14.3 17.9-97.2c28.1-3.2 56.8-3.2 85 0l17.9 97 38.1 14.3c28.7 10.8 55.4 26.2 79.3 45.8l31.4 25.8 92.8-32.9c17 22.9 31.2 47.6 42.6 73.6L781.8 426l6.5 39.9zM512 326c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm79.2 255.2A111.6 111.6 0 01512 614c-29.9 0-58-11.7-79.2-32.8A111.6 111.6 0 01400 502c0-29.9 11.7-58 32.8-79.2C454 401.6 482.1 390 512 390c29.9 0 58 11.6 79.2 32.8A111.6 111.6 0 01624 502c0 29.9-11.7 58-32.8 79.2z"}}]},name:"setting",theme:"outlined"},_re=function(t,n){return I.createElement(er,lt({},t,{ref:n,icon:Ore}))},Ure=I.forwardRef(_re),jre={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"},Qre=function(t,n){return I.createElement(er,lt({},t,{ref:n,icon:jre}))},$re=I.forwardRef(Qre);const qre=(e,t,n,r)=>{const{titleMarginBottom:i,fontWeightStrong:o}=r;return{marginBottom:i,color:n,fontWeight:o,fontSize:e,lineHeight:t}},eie=e=>{const t=[1,2,3,4,5],n={};return t.forEach(r=>{n[`
      h${r}&,
      div&-h${r},
      div&-h${r} > textarea,
      h${r}
    `]=qre(e[`fontSizeHeading${r}`],e[`lineHeightHeading${r}`],e.colorTextHeading,e)}),n},tie=e=>{const{componentCls:t}=e;return{"a&, a":Object.assign(Object.assign({},n3(e)),{userSelect:"text",[`&[disabled], &${t}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed","&:active, &:hover":{color:e.colorTextDisabled},"&:active":{pointerEvents:"none"}}})}},nie=e=>({code:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.2em 0.1em",fontSize:"85%",fontFamily:e.fontFamilyCode,background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3},kbd:{margin:"0 0.2em",paddingInline:"0.4em",paddingBlock:"0.15em 0.1em",fontSize:"90%",fontFamily:e.fontFamilyCode,background:"rgba(150, 150, 150, 0.06)",border:"1px solid rgba(100, 100, 100, 0.2)",borderBottomWidth:2,borderRadius:3},mark:{padding:0,backgroundColor:zf[2]},"u, ins":{textDecoration:"underline",textDecorationSkipInk:"auto"},"s, del":{textDecoration:"line-through"},strong:{fontWeight:600},"ul, ol":{marginInline:0,marginBlock:"0 1em",padding:0,li:{marginInline:"20px 0",marginBlock:0,paddingInline:"4px 0",paddingBlock:0}},ul:{listStyleType:"circle",ul:{listStyleType:"disc"}},ol:{listStyleType:"decimal"},"pre, blockquote":{margin:"1em 0"},pre:{padding:"0.4em 0.6em",whiteSpace:"pre-wrap",wordWrap:"break-word",background:"rgba(150, 150, 150, 0.1)",border:"1px solid rgba(100, 100, 100, 0.2)",borderRadius:3,fontFamily:e.fontFamilyCode,code:{display:"inline",margin:0,padding:0,fontSize:"inherit",fontFamily:"inherit",background:"transparent",border:0}},blockquote:{paddingInline:"0.6em 0",paddingBlock:0,borderInlineStart:"4px solid rgba(100, 100, 100, 0.2)",opacity:.85}}),rie=e=>{const{componentCls:t,paddingSM:n}=e,r=n;return{"&-edit-content":{position:"relative","div&":{insetInlineStart:e.calc(e.paddingSM).mul(-1).equal(),marginTop:e.calc(r).mul(-1).equal(),marginBottom:`calc(1em - ${Ve(r)})`},[`${t}-edit-content-confirm`]:{position:"absolute",insetInlineEnd:e.calc(e.marginXS).add(2).equal(),insetBlockEnd:e.marginXS,color:e.colorTextDescription,fontWeight:"normal",fontSize:e.fontSize,fontStyle:"normal",pointerEvents:"none"},textarea:{margin:"0!important",MozTransition:"none",height:"1em"}}}},iie=e=>({[`${e.componentCls}-copy-success`]:{"\n    &,\n    &:hover,\n    &:focus":{color:e.colorSuccess}},[`${e.componentCls}-copy-icon-only`]:{marginInlineStart:0}}),oie=()=>({"\n  a&-ellipsis,\n  span&-ellipsis\n  ":{display:"inline-block",maxWidth:"100%"},"&-ellipsis-single-line":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","a&, span&":{verticalAlign:"bottom"},"> code":{paddingBlock:0,maxWidth:"calc(100% - 1.2em)",display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",verticalAlign:"bottom",boxSizing:"content-box"}},"&-ellipsis-multiple-line":{display:"-webkit-box",overflow:"hidden",WebkitLineClamp:3,WebkitBoxOrient:"vertical"}}),aie=e=>{const{componentCls:t,titleMarginTop:n}=e;return{[t]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:e.colorText,wordBreak:"break-word",lineHeight:e.lineHeight,[`&${t}-secondary`]:{color:e.colorTextDescription},[`&${t}-success`]:{color:e.colorSuccess},[`&${t}-warning`]:{color:e.colorWarning},[`&${t}-danger`]:{color:e.colorError,"a&:active, a&:focus":{color:e.colorErrorActive},"a&:hover":{color:e.colorErrorHover}},[`&${t}-disabled`]:{color:e.colorTextDisabled,cursor:"not-allowed",userSelect:"none"},"\n        div&,\n        p\n      ":{marginBottom:"1em"}},eie(e)),{[`
      & + h1${t},
      & + h2${t},
      & + h3${t},
      & + h4${t},
      & + h5${t}
      `]:{marginTop:n},"\n      div,\n      ul,\n      li,\n      p,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5":{"\n        + h1,\n        + h2,\n        + h3,\n        + h4,\n        + h5\n        ":{marginTop:n}}}),nie(e)),tie(e)),{[`
        ${t}-expand,
        ${t}-collapse,
        ${t}-edit,
        ${t}-copy
      `]:Object.assign(Object.assign({},n3(e)),{marginInlineStart:e.marginXXS})}),rie(e)),iie(e)),oie()),{"&-rtl":{direction:"rtl"}})}},lie=()=>({titleMarginTop:"1.2em",titleMarginBottom:"0.5em"}),Px=Gi("Typography",e=>[aie(e)],lie),sie=e=>{const{prefixCls:t,"aria-label":n,className:r,style:i,direction:o,maxLength:a,autoSize:l=!0,value:g,onSave:u,onCancel:d,onEnd:C,component:f,enterIcon:m=I.createElement(Zre,null)}=e,b=I.useRef(null),p=I.useRef(!1),y=I.useRef(null),[S,v]=I.useState(g);I.useEffect(()=>{v(g)},[g]),I.useEffect(()=>{var L;if(!((L=b.current)===null||L===void 0)&&L.resizableTextArea){const{textArea:$}=b.current.resizableTextArea;$.focus();const{length:U}=$.value;$.setSelectionRange(U,U)}},[]);const B=L=>{let{target:$}=L;v($.value.replace(/[\n\r]/g,""))},W=()=>{p.current=!0},J=()=>{p.current=!1},H=L=>{let{keyCode:$}=L;p.current||(y.current=$)},x=()=>{u(S.trim())},E=L=>{let{keyCode:$,ctrlKey:U,altKey:_,metaKey:P,shiftKey:ee}=L;y.current!==$||p.current||U||_||P||ee||($===Mt.ENTER?(x(),C==null||C()):$===Mt.ESC&&d())},F=()=>{x()},[w,V,Y]=Px(t),M=Re(t,`${t}-edit-content`,{[`${t}-rtl`]:o==="rtl",[`${t}-${f}`]:!!f},r,V,Y);return w(I.createElement("div",{className:M,style:i},I.createElement(Bx,{ref:b,maxLength:a,value:S,onChange:B,onKeyDown:H,onKeyUp:E,onCompositionStart:W,onCompositionEnd:J,onBlur:F,"aria-label":n,rows:1,autoSize:l}),m!==null?os(m,{className:`${t}-edit-content-confirm`}):null))};var $y,jw;function gie(){return jw||(jw=1,$y=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||n.forEach(function(i){e.addRange(i)}),t&&t.focus()}}),$y}var qy,Qw;function cie(){if(Qw)return qy;Qw=1;var e=gie(),t={"text/plain":"Text","text/html":"Url",default:"Text"},n="Copy to clipboard: #{key}, Enter";function r(o){var a=(/mac os x/i.test(navigator.userAgent)?"":"Ctrl")+"+C";return o.replace(/#{\s*key\s*}/g,a)}function i(o,a){var l,g,u,d,C,f,m=!1;a||(a={}),l=a.debug||!1;try{u=e(),d=document.createRange(),C=document.getSelection(),f=document.createElement("span"),f.textContent=o,f.ariaHidden="true",f.style.all="unset",f.style.position="fixed",f.style.top=0,f.style.clip="rect(0, 0, 0, 0)",f.style.whiteSpace="pre",f.style.webkitUserSelect="text",f.style.MozUserSelect="text",f.style.msUserSelect="text",f.style.userSelect="text",f.addEventListener("copy",function(p){if(p.stopPropagation(),a.format)if(p.preventDefault(),typeof p.clipboardData>"u"){l&&console.warn("unable to use e.clipboardData"),l&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var y=t[a.format]||t.default;window.clipboardData.setData(y,o)}else p.clipboardData.clearData(),p.clipboardData.setData(a.format,o);a.onCopy&&(p.preventDefault(),a.onCopy(p.clipboardData))}),document.body.appendChild(f),d.selectNodeContents(f),C.addRange(d);var b=document.execCommand("copy");if(!b)throw new Error("copy command was unsuccessful");m=!0}catch(p){l&&console.error("unable to copy using execCommand: ",p),l&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(a.format||"text",o),a.onCopy&&a.onCopy(window.clipboardData),m=!0}catch(y){l&&console.error("unable to copy using clipboardData: ",y),l&&console.error("falling back to prompt"),g=r("message"in a?a.message:n),window.prompt(g,o)}}finally{C&&(typeof C.removeRange=="function"?C.removeRange(d):C.removeAllRanges()),f&&document.body.removeChild(f),u()}return m}return qy=i,qy}var uie=cie();const die=om(uie);var Iie=function(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function l(d){try{u(r.next(d))}catch(C){a(C)}}function g(d){try{u(r.throw(d))}catch(C){a(C)}}function u(d){d.done?o(d.value):i(d.value).then(l,g)}u((r=r.apply(e,t||[])).next())})};const Cie=e=>{let{copyConfig:t,children:n}=e;const[r,i]=I.useState(!1),[o,a]=I.useState(!1),l=I.useRef(null),g=()=>{l.current&&clearTimeout(l.current)},u={};t.format&&(u.format=t.format),I.useEffect(()=>g,[]);const d=ui(C=>Iie(void 0,void 0,void 0,function*(){var f;C==null||C.preventDefault(),C==null||C.stopPropagation(),a(!0);try{const m=typeof t.text=="function"?yield t.text():t.text;die(m||Qne(n,!0).join("")||"",u),a(!1),i(!0),g(),l.current=setTimeout(()=>{i(!1)},3e3),(f=t.onCopy)===null||f===void 0||f.call(t,C)}catch(m){throw a(!1),m}}));return{copied:r,copyLoading:o,onClick:d}};function ev(e,t){return I.useMemo(()=>{const n=!!e;return[n,Object.assign(Object.assign({},t),n&&typeof e=="object"?e:null)]},[e])}const fie=e=>{const t=I.useRef(void 0);return I.useEffect(()=>{t.current=e}),t.current},mie=(e,t,n)=>I.useMemo(()=>e===!0?{title:t??n}:I.isValidElement(e)?{title:e}:typeof e=="object"?Object.assign({title:t??n},e):{title:e},[e,t,n]);var hie=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Ox=I.forwardRef((e,t)=>{const{prefixCls:n,component:r="article",className:i,rootClassName:o,setContentRef:a,children:l,direction:g,style:u}=e,d=hie(e,["prefixCls","component","className","rootClassName","setContentRef","children","direction","style"]),{getPrefixCls:C,direction:f,typography:m}=I.useContext(dn),b=g??f,p=a?vl(t,a):t,y=C("typography",n),[S,v,B]=Px(y),W=Re(y,m==null?void 0:m.className,{[`${y}-rtl`]:b==="rtl"},i,o,v,B),J=Object.assign(Object.assign({},m==null?void 0:m.style),u);return S(I.createElement(r,Object.assign({className:W,style:J,ref:p},d),l))});function $w(e){return e===!1?[!1,!1]:Array.isArray(e)?e:[e]}function tv(e,t,n){return e===!0||e===void 0?t:e||n&&t}function Aie(e){const t=document.createElement("em");e.appendChild(t);const n=e.getBoundingClientRect(),r=t.getBoundingClientRect();return e.removeChild(t),n.left>r.left||r.right>n.right||n.top>r.top||r.bottom>n.bottom}const h1=e=>["string","number"].includes(typeof e),pie=e=>{let{prefixCls:t,copied:n,locale:r,iconOnly:i,tooltips:o,icon:a,tabIndex:l,onCopy:g,loading:u}=e;const d=$w(o),C=$w(a),{copied:f,copy:m}=r??{},b=n?f:m,p=tv(d[n?1:0],b),y=typeof p=="string"?p:b;return I.createElement(km,{title:p},I.createElement("button",{type:"button",className:Re(`${t}-copy`,{[`${t}-copy-success`]:n,[`${t}-copy-icon-only`]:i}),onClick:g,"aria-label":y,tabIndex:l},n?tv(C[1],I.createElement(YJ,null),!0):tv(C[0],u?I.createElement(ib,null):I.createElement(Cre,null),!0)))},Jh=I.forwardRef((e,t)=>{let{style:n,children:r}=e;const i=I.useRef(null);return I.useImperativeHandle(t,()=>({isExceed:()=>{const o=i.current;return o.scrollHeight>o.clientHeight},getHeight:()=>i.current.clientHeight})),I.createElement("span",{"aria-hidden":!0,ref:i,style:Object.assign({position:"fixed",display:"block",left:0,top:0,pointerEvents:"none",backgroundColor:"rgba(255, 0, 0, 0.65)"},n)},r)}),bie=e=>e.reduce((t,n)=>t+(h1(n)?String(n).length:1),0);function qw(e,t){let n=0;const r=[];for(let i=0;i<e.length;i+=1){if(n===t)return r;const o=e[i],l=h1(o)?String(o).length:1,g=n+l;if(g>t){const u=t-n;return r.push(String(o).slice(0,u)),r}r.push(o),n=g}return e}const nv=0,rv=1,iv=2,ov=3,eW=4,xh={display:"-webkit-box",overflow:"hidden",WebkitBoxOrient:"vertical"};function yie(e){const{enableMeasure:t,width:n,text:r,children:i,rows:o,expanded:a,miscDeps:l,onEllipsis:g}=e,u=I.useMemo(()=>el(r),[r]),d=I.useMemo(()=>bie(u),[r]),C=I.useMemo(()=>i(u,!1),[r]),[f,m]=I.useState(null),b=I.useRef(null),p=I.useRef(null),y=I.useRef(null),S=I.useRef(null),v=I.useRef(null),[B,W]=I.useState(!1),[J,H]=I.useState(nv),[x,E]=I.useState(0),[F,w]=I.useState(null);ur(()=>{H(t&&n&&d?rv:nv)},[n,r,o,t,u]),ur(()=>{var L,$,U,_;if(J===rv){H(iv);const P=p.current&&getComputedStyle(p.current).whiteSpace;w(P)}else if(J===iv){const P=!!(!((L=y.current)===null||L===void 0)&&L.isExceed());H(P?ov:eW),m(P?[0,d]:null),W(P);const ee=(($=y.current)===null||$===void 0?void 0:$.getHeight())||0,j=o===1?0:((U=S.current)===null||U===void 0?void 0:U.getHeight())||0,O=((_=v.current)===null||_===void 0?void 0:_.getHeight())||0,X=Math.max(ee,j+O);E(X+1),g(P)}},[J]);const V=f?Math.ceil((f[0]+f[1])/2):0;ur(()=>{var L;const[$,U]=f||[0,0];if($!==U){const P=(((L=b.current)===null||L===void 0?void 0:L.getHeight())||0)>x;let ee=V;U-$===1&&(ee=P?$:U),m(P?[$,ee]:[ee,U])}},[f,V]);const Y=I.useMemo(()=>{if(!t)return i(u,!1);if(J!==ov||!f||f[0]!==f[1]){const L=i(u,!1);return[eW,nv].includes(J)?L:I.createElement("span",{style:Object.assign(Object.assign({},xh),{WebkitLineClamp:o})},L)}return i(a?u:qw(u,f[0]),B)},[a,J,f,u].concat(Gt(l))),M={width:n,margin:0,padding:0,whiteSpace:F==="nowrap"?"normal":"inherit"};return I.createElement(I.Fragment,null,Y,J===iv&&I.createElement(I.Fragment,null,I.createElement(Jh,{style:Object.assign(Object.assign(Object.assign({},M),xh),{WebkitLineClamp:o}),ref:y},C),I.createElement(Jh,{style:Object.assign(Object.assign(Object.assign({},M),xh),{WebkitLineClamp:o-1}),ref:S},C),I.createElement(Jh,{style:Object.assign(Object.assign(Object.assign({},M),xh),{WebkitLineClamp:1}),ref:v},i([],!0))),J===ov&&f&&f[0]!==f[1]&&I.createElement(Jh,{style:Object.assign(Object.assign({},M),{top:400}),ref:b},i(qw(u,V),!0)),J===rv&&I.createElement("span",{style:{whiteSpace:"inherit"},ref:p}))}const vie=e=>{let{enableEllipsis:t,isEllipsis:n,children:r,tooltipProps:i}=e;return!(i!=null&&i.title)||!t?r:I.createElement(km,Object.assign({open:n?void 0:!1},i),r)};var Sie=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function Zie(e,t){let{mark:n,code:r,underline:i,delete:o,strong:a,keyboard:l,italic:g}=e,u=t;function d(C,f){f&&(u=I.createElement(C,{},u))}return d("strong",a),d("u",i),d("del",o),d("code",r),d("mark",n),d("kbd",l),d("i",g),u}const Gie="...",Vb=I.forwardRef((e,t)=>{var n;const{prefixCls:r,className:i,style:o,type:a,disabled:l,children:g,ellipsis:u,editable:d,copyable:C,component:f,title:m}=e,b=Sie(e,["prefixCls","className","style","type","disabled","children","ellipsis","editable","copyable","component","title"]),{getPrefixCls:p,direction:y}=I.useContext(dn),[S]=lu("Text"),v=I.useRef(null),B=I.useRef(null),W=p("typography",r),J=Pi(b,["mark","code","delete","underline","strong","keyboard","italic"]),[H,x]=ev(d),[E,F]=qi(!1,{value:x.editing}),{triggerType:w=["icon"]}=x,V=dt=>{var Wt;dt&&((Wt=x.onStart)===null||Wt===void 0||Wt.call(x)),F(dt)},Y=fie(E);ur(()=>{var dt;!E&&Y&&((dt=B.current)===null||dt===void 0||dt.focus())},[E]);const M=dt=>{dt==null||dt.preventDefault(),V(!0)},L=dt=>{var Wt;(Wt=x.onChange)===null||Wt===void 0||Wt.call(x,dt),V(!1)},$=()=>{var dt;(dt=x.onCancel)===null||dt===void 0||dt.call(x),V(!1)},[U,_]=ev(C),{copied:P,copyLoading:ee,onClick:j}=Cie({copyConfig:_,children:g}),[O,X]=I.useState(!1),[D,z]=I.useState(!1),[Q,ne]=I.useState(!1),[ce,se]=I.useState(!1),[ue,ve]=I.useState(!0),[Ae,be]=ev(u,{expandable:!1,symbol:dt=>dt?S==null?void 0:S.collapse:S==null?void 0:S.expand}),[me,Ne]=qi(be.defaultExpanded||!1,{value:be.expanded}),Ie=Ae&&(!me||be.expandable==="collapsible"),{rows:ae=1}=be,Ee=I.useMemo(()=>Ie&&(be.suffix!==void 0||be.onEllipsis||be.expandable||H||U),[Ie,be,H,U]);ur(()=>{Ae&&!Ee&&(X(XR("webkitLineClamp")),z(XR("textOverflow")))},[Ee,Ae]);const[Fe,ke]=I.useState(Ie),ze=I.useMemo(()=>Ee?!1:ae===1?D:O,[Ee,D,O]);ur(()=>{ke(ze&&Ie)},[ze,Ie]);const He=Ie&&(Fe?ce:Q),Le=Ie&&ae===1&&Fe,Ye=Ie&&ae>1&&Fe,Pe=(dt,Wt)=>{var Et;Ne(Wt.expanded),(Et=be.onExpand)===null||Et===void 0||Et.call(be,dt,Wt)},[$e,ot]=I.useState(0),Ct=dt=>{let{offsetWidth:Wt}=dt;ot(Wt)},pt=dt=>{var Wt;ne(dt),Q!==dt&&((Wt=be.onEllipsis)===null||Wt===void 0||Wt.call(be,dt))};I.useEffect(()=>{const dt=v.current;if(Ae&&Fe&&dt){const Wt=Aie(dt);ce!==Wt&&se(Wt)}},[Ae,Fe,g,Ye,ue,$e]),I.useEffect(()=>{const dt=v.current;if(typeof IntersectionObserver>"u"||!dt||!Fe||!Ie)return;const Wt=new IntersectionObserver(()=>{ve(!!dt.offsetParent)});return Wt.observe(dt),()=>{Wt.disconnect()}},[Fe,Ie]);const it=mie(be.tooltip,x.text,g),It=I.useMemo(()=>{if(!(!Ae||Fe))return[x.text,g,m,it.title].find(h1)},[Ae,Fe,m,it.title,He]);if(E)return I.createElement(sie,{value:(n=x.text)!==null&&n!==void 0?n:typeof g=="string"?g:"",onSave:L,onCancel:$,onEnd:x.onEnd,prefixCls:W,className:i,style:o,direction:y,component:f,maxLength:x.maxLength,autoSize:x.autoSize,enterIcon:x.enterIcon});const _e=()=>{const{expandable:dt,symbol:Wt}=be;return dt?I.createElement("button",{type:"button",key:"expand",className:`${W}-${me?"collapse":"expand"}`,onClick:Et=>Pe(Et,{expanded:!me}),"aria-label":me?S.collapse:S==null?void 0:S.expand},typeof Wt=="function"?Wt(me):Wt):null},Ot=()=>{if(!H)return;const{icon:dt,tooltip:Wt,tabIndex:Et}=x,hn=el(Wt)[0]||(S==null?void 0:S.edit),mn=typeof hn=="string"?hn:"";return w.includes("icon")?I.createElement(km,{key:"edit",title:Wt===!1?"":hn},I.createElement("button",{type:"button",ref:B,className:`${W}-edit`,onClick:M,"aria-label":mn,tabIndex:Et},dt||I.createElement(Wb,{role:"button"}))):null},Qe=()=>U?I.createElement(pie,Object.assign({key:"copy"},_,{prefixCls:W,copied:P,locale:S,onCopy:j,loading:ee,iconOnly:g==null})):null,st=dt=>[dt&&_e(),Ot(),Qe()],St=dt=>[dt&&!me&&I.createElement("span",{"aria-hidden":!0,key:"ellipsis"},Gie),be.suffix,st(dt)];return I.createElement(bl,{onResize:Ct,disabled:!Ie},dt=>I.createElement(vie,{tooltipProps:it,enableEllipsis:Ie,isEllipsis:He},I.createElement(Ox,Object.assign({className:Re({[`${W}-${a}`]:a,[`${W}-disabled`]:l,[`${W}-ellipsis`]:Ae,[`${W}-ellipsis-single-line`]:Le,[`${W}-ellipsis-multiple-line`]:Ye},i),prefixCls:r,style:Object.assign(Object.assign({},o),{WebkitLineClamp:Ye?ae:void 0}),component:f,ref:vl(dt,v,t),direction:y,onClick:w.includes("text")?M:void 0,"aria-label":It==null?void 0:It.toString(),title:m},J),I.createElement(yie,{enableMeasure:Ie&&!Fe,text:g,rows:ae,width:$e,onEllipsis:pt,expanded:me,miscDeps:[P,me,ee,H,U,S]},(Wt,Et)=>Zie(e,I.createElement(I.Fragment,null,Wt.length>0&&Et&&!me&&It?I.createElement("span",{key:"show-content","aria-hidden":!0},Wt):Wt,St(Et)))))))});var Bie=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Rie=I.forwardRef((e,t)=>{var{ellipsis:n,rel:r}=e,i=Bie(e,["ellipsis","rel"]);const o=Object.assign(Object.assign({},i),{rel:r===void 0&&i.target==="_blank"?"noopener noreferrer":r});return delete o.navigate,I.createElement(Vb,Object.assign({},o,{ref:t,ellipsis:!!n,component:"a"}))}),wie=I.forwardRef((e,t)=>I.createElement(Vb,Object.assign({ref:t},e,{component:"div"})));var Wie=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Vie=(e,t)=>{var{ellipsis:n}=e,r=Wie(e,["ellipsis"]);const i=I.useMemo(()=>n&&typeof n=="object"?Pi(n,["expandable","rows"]):n,[n]);return I.createElement(Vb,Object.assign({ref:t},r,{ellipsis:i,component:"span"}))},kie=I.forwardRef(Vie);var Nie=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const Xie=[1,2,3,4,5],Jie=I.forwardRef((e,t)=>{const{level:n=1}=e,r=Nie(e,["level"]),i=Xie.includes(n)?`h${n}`:"h1";return I.createElement(Vb,Object.assign({ref:t},r,{component:i}))}),dd=Ox;dd.Text=kie;dd.Link=Rie;dd.Title=Jie;dd.Paragraph=wie;const{Title:xie,Text:Hie}=dd,Yie=()=>{const[e,t]=I.useState(""),[n,r]=I.useState(""),[i,o]=I.useState(!1),a=ru(),l=async()=>{o(!0);try{await tL(pm,e,n),id.success("Login successful!"),a("/dashboard")}catch(u){id.error(u.message)}finally{o(!1)}},g=u=>{u.key==="Enter"&&document.getElementById("password").focus()};return ye.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:ye.jsxs(DI,{className:"w-96 border-2 border-black shadow-lg bg-white p-6",children:[ye.jsx(xie,{level:2,className:"text-black uppercase tracking-wide",children:"Login"}),ye.jsx("div",{className:"my-4",children:ye.jsx(Ms,{prefix:ye.jsx(Dx,{className:"mr-2"}),placeholder:"Enter your email",className:"border-black border-2 text-black",value:e,onChange:u=>t(u.target.value),onKeyDown:g})}),ye.jsx("div",{className:"my-4",children:ye.jsx(Ms.Password,{id:"password",prefix:ye.jsx(zx,{className:"mr-2"}),placeholder:"Enter your password",className:"border-black border-2 text-black",value:n,onChange:u=>r(u.target.value)})}),ye.jsx(da,{type:"primary",block:!0,className:"bg-black border-black text-white hover:bg-gray-800",onClick:l,loading:i,disabled:i,children:"Login"}),ye.jsxs("div",{className:"text-center mt-4",children:[ye.jsx(Hie,{children:"Don't have an account? "}),ye.jsx(Fp,{to:"/signup",className:"text-blue-600",children:"Sign Up"})]})]})})},Eie=({handleLogout:e,toggleSidebar:t,isSidebarOpen:n})=>{const[r,i]=I.useState("");return I.useEffect(()=>{const o=pm.currentUser;o&&o.email&&i(o.email)},[]),ye.jsxs("header",{className:"bg-white text-black py-2 px-4 flex justify-between items-center shadow-md sticky left-0 top-0 right-0 z-50 h-15",children:[ye.jsx("div",{className:"lg:hidden block",children:ye.jsx(da,{type:"text",icon:n?ye.jsx(Kre,{}):ye.jsx(Yre,{}),onClick:t})}),ye.jsx("h1",{className:"text-lg font-bold",children:"Ridgeant Resources"}),ye.jsx(Xm,{menu:{items:[{key:"email",label:ye.jsx("span",{className:"font-semibold text-gray-600",children:"hrishizsuthar@gmail.com"}),disabled:!0},{type:"divider"},{key:"Logout",label:ye.jsxs("span",{style:{color:"red"},children:[ye.jsx(Nre,{}),"Logout"]}),onClick:()=>{e()}}]},trigger:["click"],children:r?ye.jsx("div",{className:"bg-gray-200 h-10 w-10 rounded-full flex items-center justify-center text-black font-bold cursor-pointer",children:r[0].toUpperCase()}):ye.jsx(EJ,{})})]})};var av={exports:{}},Er={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tW;function Fie(){if(tW)return Er;tW=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),f=Symbol.for("react.offscreen"),m=Symbol.for("react.client.reference");function b(p){if(typeof p=="object"&&p!==null){var y=p.$$typeof;switch(y){case e:switch(p=p.type,p){case n:case i:case r:case g:case u:return p;default:switch(p=p&&p.$$typeof,p){case a:case l:case C:case d:return p;case o:return p;default:return y}}case t:return y}}}return Er.ContextConsumer=o,Er.ContextProvider=a,Er.Element=e,Er.ForwardRef=l,Er.Fragment=n,Er.Lazy=C,Er.Memo=d,Er.Portal=t,Er.Profiler=i,Er.StrictMode=r,Er.Suspense=g,Er.SuspenseList=u,Er.isContextConsumer=function(p){return b(p)===o},Er.isContextProvider=function(p){return b(p)===a},Er.isElement=function(p){return typeof p=="object"&&p!==null&&p.$$typeof===e},Er.isForwardRef=function(p){return b(p)===l},Er.isFragment=function(p){return b(p)===n},Er.isLazy=function(p){return b(p)===C},Er.isMemo=function(p){return b(p)===d},Er.isPortal=function(p){return b(p)===t},Er.isProfiler=function(p){return b(p)===i},Er.isStrictMode=function(p){return b(p)===r},Er.isSuspense=function(p){return b(p)===g},Er.isSuspenseList=function(p){return b(p)===u},Er.isValidElementType=function(p){return typeof p=="string"||typeof p=="function"||p===n||p===i||p===r||p===g||p===u||p===f||typeof p=="object"&&p!==null&&(p.$$typeof===C||p.$$typeof===d||p.$$typeof===a||p.$$typeof===o||p.$$typeof===l||p.$$typeof===m||p.getModuleId!==void 0)},Er.typeOf=b,Er}var nW;function Kie(){return nW||(nW=1,av.exports=Fie()),av.exports}var _x=Kie();function vg(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Ux(e){if(I.isValidElement(e)||_x.isValidElementType(e)||!vg(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=Ux(e[n])}),t}function $a(e,t,n={clone:!0}){const r=n.clone?{...e}:e;return vg(e)&&vg(t)&&Object.keys(t).forEach(i=>{I.isValidElement(t[i])||_x.isValidElementType(t[i])?r[i]=t[i]:vg(t[i])&&Object.prototype.hasOwnProperty.call(e,i)&&vg(e[i])?r[i]=$a(e[i],t[i],n):n.clone?r[i]=vg(t[i])?Ux(t[i]):t[i]:r[i]=t[i]}),r}function od(e,...t){const n=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(r=>n.searchParams.append("args[]",r)),`Minified MUI error #${e}; visit ${n} for the full message.`}function PI(e){if(typeof e!="string")throw new Error(od(7));return e.charAt(0).toUpperCase()+e.slice(1)}function eS(e,t){const n={...t};for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const i=r;if(i==="components"||i==="slots")n[i]={...e[i],...n[i]};else if(i==="componentsProps"||i==="slotProps"){const o=e[i],a=t[i];if(!a)n[i]=o||{};else if(!o)n[i]=a;else{n[i]={...a};for(const l in o)if(Object.prototype.hasOwnProperty.call(o,l)){const g=l;n[i][g]=eS(o[g],a[g])}}}else n[i]===void 0&&(n[i]=e[i])}return n}function Lie(e,t,n=void 0){const r={};for(const i in e){const o=e[i];let a="",l=!0;for(let g=0;g<o.length;g+=1){const u=o[g];u&&(a+=(l===!0?"":" ")+t(u),l=!1,n&&n[u]&&(a+=" "+n[u]))}r[i]=a}return r}const rW=e=>e,Mie=()=>{let e=rW;return{configure(t){e=t},generate(t){return e(t)},reset(){e=rW}}},Tie=Mie(),zie={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function jx(e,t,n="Mui"){const r=zie[t];return r?`${n}-${r}`:`${Tie.generate(e)}-${t}`}function Die(e,t,n="Mui"){const r={};return t.forEach(i=>{r[i]=jx(e,i,n)}),r}function Pie(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}function Qx(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Qx(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Oie(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Qx(e))&&(r&&(r+=" "),r+=t);return r}function Sf(e,t){return t?$a(e,t,{clone:!1}):e}function _ie(e,t){if(!e.containerQueries)return t;const n=Object.keys(t).filter(r=>r.startsWith("@container")).sort((r,i)=>{var a,l;const o=/min-width:\s*([0-9.]+)/;return+(((a=r.match(o))==null?void 0:a[1])||0)-+(((l=i.match(o))==null?void 0:l[1])||0)});return n.length?n.reduce((r,i)=>{const o=t[i];return delete r[i],r[i]=o,r},{...t}):t}function Uie(e,t){return t==="@"||t.startsWith("@")&&(e.some(n=>t.startsWith(`@${n}`))||!!t.match(/^@\d/))}function jie(e,t){const n=t.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,i]=n,o=Number.isNaN(+r)?r||0:+r;return e.containerQueries(i).up(o)}function Qie(e){const t=(o,a)=>o.replace("@media",a?`@container ${a}`:"@container");function n(o,a){o.up=(...l)=>t(e.breakpoints.up(...l),a),o.down=(...l)=>t(e.breakpoints.down(...l),a),o.between=(...l)=>t(e.breakpoints.between(...l),a),o.only=(...l)=>t(e.breakpoints.only(...l),a),o.not=(...l)=>{const g=t(e.breakpoints.not(...l),a);return g.includes("not all and")?g.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):g}}const r={},i=o=>(n(r,o),r);return n(i),{...e,containerQueries:i}}const kb={xs:0,sm:600,md:900,lg:1200,xl:1536},iW={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${kb[e]}px)`},$ie={containerQueries:e=>({up:t=>{let n=typeof t=="number"?t:kb[t]||t;return typeof n=="number"&&(n=`${n}px`),e?`@container ${e} (min-width:${n})`:`@container (min-width:${n})`}})};function Hg(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const o=r.breakpoints||iW;return t.reduce((a,l,g)=>(a[o.up(o.keys[g])]=n(t[g]),a),{})}if(typeof t=="object"){const o=r.breakpoints||iW;return Object.keys(t).reduce((a,l)=>{if(Uie(o.keys,l)){const g=jie(r.containerQueries?r:$ie,l);g&&(a[g]=n(t[l],l))}else if(Object.keys(o.values||kb).includes(l)){const g=o.up(l);a[g]=n(t[l],l)}else{const g=l;a[g]=t[g]}return a},{})}return n(t)}function qie(e={}){var n;return((n=e.keys)==null?void 0:n.reduce((r,i)=>{const o=e.up(i);return r[o]={},r},{}))||{}}function eoe(e,t){return e.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},t)}function Nb(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const r=`vars.${t}`.split(".").reduce((i,o)=>i&&i[o]?i[o]:null,e);if(r!=null)return r}return t.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,e)}function Np(e,t,n,r=n){let i;return typeof e=="function"?i=e(n):Array.isArray(e)?i=e[n]||r:i=Nb(e,n)||r,t&&(i=t(i,r,e)),i}function Yi(e){const{prop:t,cssProperty:n=e.prop,themeKey:r,transform:i}=e,o=a=>{if(a[t]==null)return null;const l=a[t],g=a.theme,u=Nb(g,r)||{};return Hg(a,l,C=>{let f=Np(u,i,C);return C===f&&typeof C=="string"&&(f=Np(u,i,`${t}${C==="default"?"":PI(C)}`,C)),n===!1?f:{[n]:f}})};return o.propTypes={},o.filterProps=[t],o}function toe(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const noe={m:"margin",p:"padding"},roe={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},oW={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},ioe=toe(e=>{if(e.length>2)if(oW[e])e=oW[e];else return[e];const[t,n]=e.split(""),r=noe[t],i=roe[n]||"";return Array.isArray(i)?i.map(o=>r+o):[r+i]}),A1=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],p1=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...A1,...p1];function xm(e,t,n,r){const i=Nb(e,t,!0)??n;return typeof i=="number"||typeof i=="string"?o=>typeof o=="string"?o:typeof i=="string"?`calc(${o} * ${i})`:i*o:Array.isArray(i)?o=>{if(typeof o=="string")return o;const a=Math.abs(o),l=i[a];return o>=0?l:typeof l=="number"?-l:`-${l}`}:typeof i=="function"?i:()=>{}}function b1(e){return xm(e,"spacing",8)}function Hm(e,t){return typeof t=="string"||t==null?t:e(t)}function ooe(e,t){return n=>e.reduce((r,i)=>(r[i]=Hm(t,n),r),{})}function aoe(e,t,n,r){if(!t.includes(n))return null;const i=ioe(n),o=ooe(i,r),a=e[n];return Hg(e,a,o)}function $x(e,t){const n=b1(e.theme);return Object.keys(e).map(r=>aoe(e,t,r,n)).reduce(Sf,{})}function yi(e){return $x(e,A1)}yi.propTypes={};yi.filterProps=A1;function vi(e){return $x(e,p1)}vi.propTypes={};vi.filterProps=p1;function Xb(...e){const t=e.reduce((r,i)=>(i.filterProps.forEach(o=>{r[o]=i}),r),{}),n=r=>Object.keys(r).reduce((i,o)=>t[o]?Sf(i,t[o](r)):i,{});return n.propTypes={},n.filterProps=e.reduce((r,i)=>r.concat(i.filterProps),[]),n}function pl(e){return typeof e!="number"?e:`${e}px solid`}function Sl(e,t){return Yi({prop:e,themeKey:"borders",transform:t})}const loe=Sl("border",pl),soe=Sl("borderTop",pl),goe=Sl("borderRight",pl),coe=Sl("borderBottom",pl),uoe=Sl("borderLeft",pl),doe=Sl("borderColor"),Ioe=Sl("borderTopColor"),Coe=Sl("borderRightColor"),foe=Sl("borderBottomColor"),moe=Sl("borderLeftColor"),hoe=Sl("outline",pl),Aoe=Sl("outlineColor"),Jb=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=xm(e.theme,"shape.borderRadius",4),n=r=>({borderRadius:Hm(t,r)});return Hg(e,e.borderRadius,n)}return null};Jb.propTypes={};Jb.filterProps=["borderRadius"];Xb(loe,soe,goe,coe,uoe,doe,Ioe,Coe,foe,moe,Jb,hoe,Aoe);const xb=e=>{if(e.gap!==void 0&&e.gap!==null){const t=xm(e.theme,"spacing",8),n=r=>({gap:Hm(t,r)});return Hg(e,e.gap,n)}return null};xb.propTypes={};xb.filterProps=["gap"];const Hb=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=xm(e.theme,"spacing",8),n=r=>({columnGap:Hm(t,r)});return Hg(e,e.columnGap,n)}return null};Hb.propTypes={};Hb.filterProps=["columnGap"];const Yb=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=xm(e.theme,"spacing",8),n=r=>({rowGap:Hm(t,r)});return Hg(e,e.rowGap,n)}return null};Yb.propTypes={};Yb.filterProps=["rowGap"];const poe=Yi({prop:"gridColumn"}),boe=Yi({prop:"gridRow"}),yoe=Yi({prop:"gridAutoFlow"}),voe=Yi({prop:"gridAutoColumns"}),Soe=Yi({prop:"gridAutoRows"}),Zoe=Yi({prop:"gridTemplateColumns"}),Goe=Yi({prop:"gridTemplateRows"}),Boe=Yi({prop:"gridTemplateAreas"}),Roe=Yi({prop:"gridArea"});Xb(xb,Hb,Yb,poe,boe,yoe,voe,Soe,Zoe,Goe,Boe,Roe);function yI(e,t){return t==="grey"?t:e}const woe=Yi({prop:"color",themeKey:"palette",transform:yI}),Woe=Yi({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:yI}),Voe=Yi({prop:"backgroundColor",themeKey:"palette",transform:yI});Xb(woe,Woe,Voe);function _a(e){return e<=1&&e!==0?`${e*100}%`:e}const koe=Yi({prop:"width",transform:_a}),y1=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var i,o,a,l,g;const r=((a=(o=(i=e.theme)==null?void 0:i.breakpoints)==null?void 0:o.values)==null?void 0:a[n])||kb[n];return r?((g=(l=e.theme)==null?void 0:l.breakpoints)==null?void 0:g.unit)!=="px"?{maxWidth:`${r}${e.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:_a(n)}};return Hg(e,e.maxWidth,t)}return null};y1.filterProps=["maxWidth"];const Noe=Yi({prop:"minWidth",transform:_a}),Xoe=Yi({prop:"height",transform:_a}),Joe=Yi({prop:"maxHeight",transform:_a}),xoe=Yi({prop:"minHeight",transform:_a});Yi({prop:"size",cssProperty:"width",transform:_a});Yi({prop:"size",cssProperty:"height",transform:_a});const Hoe=Yi({prop:"boxSizing"});Xb(koe,y1,Noe,Xoe,Joe,xoe,Hoe);const Eb={border:{themeKey:"borders",transform:pl},borderTop:{themeKey:"borders",transform:pl},borderRight:{themeKey:"borders",transform:pl},borderBottom:{themeKey:"borders",transform:pl},borderLeft:{themeKey:"borders",transform:pl},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:pl},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Jb},color:{themeKey:"palette",transform:yI},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:yI},backgroundColor:{themeKey:"palette",transform:yI},p:{style:vi},pt:{style:vi},pr:{style:vi},pb:{style:vi},pl:{style:vi},px:{style:vi},py:{style:vi},padding:{style:vi},paddingTop:{style:vi},paddingRight:{style:vi},paddingBottom:{style:vi},paddingLeft:{style:vi},paddingX:{style:vi},paddingY:{style:vi},paddingInline:{style:vi},paddingInlineStart:{style:vi},paddingInlineEnd:{style:vi},paddingBlock:{style:vi},paddingBlockStart:{style:vi},paddingBlockEnd:{style:vi},m:{style:yi},mt:{style:yi},mr:{style:yi},mb:{style:yi},ml:{style:yi},mx:{style:yi},my:{style:yi},margin:{style:yi},marginTop:{style:yi},marginRight:{style:yi},marginBottom:{style:yi},marginLeft:{style:yi},marginX:{style:yi},marginY:{style:yi},marginInline:{style:yi},marginInlineStart:{style:yi},marginInlineEnd:{style:yi},marginBlock:{style:yi},marginBlockStart:{style:yi},marginBlockEnd:{style:yi},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:xb},rowGap:{style:Yb},columnGap:{style:Hb},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:_a},maxWidth:{style:y1},minWidth:{transform:_a},height:{transform:_a},maxHeight:{transform:_a},minHeight:{transform:_a},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function Yoe(...e){const t=e.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(t);return e.every(r=>n.size===Object.keys(r).length)}function Eoe(e,t){return typeof e=="function"?e(t):e}function Foe(){function e(n,r,i,o){const a={[n]:r,theme:i},l=o[n];if(!l)return{[n]:r};const{cssProperty:g=n,themeKey:u,transform:d,style:C}=l;if(r==null)return null;if(u==="typography"&&r==="inherit")return{[n]:r};const f=Nb(i,u)||{};return C?C(a):Hg(a,r,b=>{let p=Np(f,d,b);return b===p&&typeof b=="string"&&(p=Np(f,d,`${n}${b==="default"?"":PI(b)}`,b)),g===!1?p:{[g]:p}})}function t(n){const{sx:r,theme:i={}}=n||{};if(!r)return null;const o=i.unstable_sxConfig??Eb;function a(l){let g=l;if(typeof l=="function")g=l(i);else if(typeof l!="object")return l;if(!g)return null;const u=qie(i.breakpoints),d=Object.keys(u);let C=u;return Object.keys(g).forEach(f=>{const m=Eoe(g[f],i);if(m!=null)if(typeof m=="object")if(o[f])C=Sf(C,e(f,m,i,o));else{const b=Hg({theme:i},m,p=>({[f]:p}));Yoe(b,m)?C[f]=t({sx:m,theme:i}):C=Sf(C,b)}else C=Sf(C,e(f,m,i,o))}),_ie(i,eoe(d,C))}return Array.isArray(r)?r.map(a):a(r)}return t}const OI=Foe();OI.filterProps=["sx"];function Koe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function Loe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var Moe=function(){function e(n){var r=this;this._insertTag=function(i){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,o),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Loe(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=Koe(i);try{o.insertRule(r,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},e}(),Po="-ms-",Xp="-moz-",Sr="-webkit-",qx="comm",v1="rule",S1="decl",Toe="@import",eH="@keyframes",zoe="@layer",Doe=Math.abs,Fb=String.fromCharCode,Poe=Object.assign;function Ooe(e,t){return Ro(e,0)^45?(((t<<2^Ro(e,0))<<2^Ro(e,1))<<2^Ro(e,2))<<2^Ro(e,3):0}function tH(e){return e.trim()}function _oe(e,t){return(e=t.exec(e))?e[0]:e}function Zr(e,t,n){return e.replace(t,n)}function tS(e,t){return e.indexOf(t)}function Ro(e,t){return e.charCodeAt(t)|0}function em(e,t,n){return e.slice(t,n)}function Ns(e){return e.length}function Z1(e){return e.length}function Hh(e,t){return t.push(e),e}function Uoe(e,t){return e.map(t).join("")}var Kb=1,_I=1,nH=0,Na=0,Ti=0,IC="";function Lb(e,t,n,r,i,o,a){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:Kb,column:_I,length:a,return:""}}function UC(e,t){return Poe(Lb("",null,null,"",null,null,0),e,{length:-e.length},t)}function joe(){return Ti}function Qoe(){return Ti=Na>0?Ro(IC,--Na):0,_I--,Ti===10&&(_I=1,Kb--),Ti}function qa(){return Ti=Na<nH?Ro(IC,Na++):0,_I++,Ti===10&&(_I=1,Kb++),Ti}function Ts(){return Ro(IC,Na)}function CA(){return Na}function Ym(e,t){return em(IC,e,t)}function tm(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function rH(e){return Kb=_I=1,nH=Ns(IC=e),Na=0,[]}function iH(e){return IC="",e}function fA(e){return tH(Ym(Na-1,nS(e===91?e+2:e===40?e+1:e)))}function $oe(e){for(;(Ti=Ts())&&Ti<33;)qa();return tm(e)>2||tm(Ti)>3?"":" "}function qoe(e,t){for(;--t&&qa()&&!(Ti<48||Ti>102||Ti>57&&Ti<65||Ti>70&&Ti<97););return Ym(e,CA()+(t<6&&Ts()==32&&qa()==32))}function nS(e){for(;qa();)switch(Ti){case e:return Na;case 34:case 39:e!==34&&e!==39&&nS(Ti);break;case 40:e===41&&nS(e);break;case 92:qa();break}return Na}function eae(e,t){for(;qa()&&e+Ti!==57;)if(e+Ti===84&&Ts()===47)break;return"/*"+Ym(t,Na-1)+"*"+Fb(e===47?e:qa())}function tae(e){for(;!tm(Ts());)qa();return Ym(e,Na)}function nae(e){return iH(mA("",null,null,null,[""],e=rH(e),0,[0],e))}function mA(e,t,n,r,i,o,a,l,g){for(var u=0,d=0,C=a,f=0,m=0,b=0,p=1,y=1,S=1,v=0,B="",W=i,J=o,H=r,x=B;y;)switch(b=v,v=qa()){case 40:if(b!=108&&Ro(x,C-1)==58){tS(x+=Zr(fA(v),"&","&\f"),"&\f")!=-1&&(S=-1);break}case 34:case 39:case 91:x+=fA(v);break;case 9:case 10:case 13:case 32:x+=$oe(b);break;case 92:x+=qoe(CA()-1,7);continue;case 47:switch(Ts()){case 42:case 47:Hh(rae(eae(qa(),CA()),t,n),g);break;default:x+="/"}break;case 123*p:l[u++]=Ns(x)*S;case 125*p:case 59:case 0:switch(v){case 0:case 125:y=0;case 59+d:S==-1&&(x=Zr(x,/\f/g,"")),m>0&&Ns(x)-C&&Hh(m>32?lW(x+";",r,n,C-1):lW(Zr(x," ","")+";",r,n,C-2),g);break;case 59:x+=";";default:if(Hh(H=aW(x,t,n,u,d,i,l,B,W=[],J=[],C),o),v===123)if(d===0)mA(x,t,H,H,W,o,C,l,J);else switch(f===99&&Ro(x,3)===110?100:f){case 100:case 108:case 109:case 115:mA(e,H,H,r&&Hh(aW(e,H,H,0,0,i,l,B,i,W=[],C),J),i,J,C,l,r?W:J);break;default:mA(x,H,H,H,[""],J,0,l,J)}}u=d=m=0,p=S=1,B=x="",C=a;break;case 58:C=1+Ns(x),m=b;default:if(p<1){if(v==123)--p;else if(v==125&&p++==0&&Qoe()==125)continue}switch(x+=Fb(v),v*p){case 38:S=d>0?1:(x+="\f",-1);break;case 44:l[u++]=(Ns(x)-1)*S,S=1;break;case 64:Ts()===45&&(x+=fA(qa())),f=Ts(),d=C=Ns(B=x+=tae(CA())),v++;break;case 45:b===45&&Ns(x)==2&&(p=0)}}return o}function aW(e,t,n,r,i,o,a,l,g,u,d){for(var C=i-1,f=i===0?o:[""],m=Z1(f),b=0,p=0,y=0;b<r;++b)for(var S=0,v=em(e,C+1,C=Doe(p=a[b])),B=e;S<m;++S)(B=tH(p>0?f[S]+" "+v:Zr(v,/&\f/g,f[S])))&&(g[y++]=B);return Lb(e,t,n,i===0?v1:l,g,u,d)}function rae(e,t,n){return Lb(e,t,n,qx,Fb(joe()),em(e,2,-2),0)}function lW(e,t,n,r){return Lb(e,t,n,S1,em(e,0,r),em(e,r+1,-1),r)}function vI(e,t){for(var n="",r=Z1(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function iae(e,t,n,r){switch(e.type){case zoe:if(e.children.length)break;case Toe:case S1:return e.return=e.return||e.value;case qx:return"";case eH:return e.return=e.value+"{"+vI(e.children,r)+"}";case v1:e.value=e.props.join(",")}return Ns(n=vI(e.children,r))?e.return=e.value+"{"+n+"}":""}function oae(e){var t=Z1(e);return function(n,r,i,o){for(var a="",l=0;l<t;l++)a+=e[l](n,r,i,o)||"";return a}}function aae(e){return function(t){t.root||(t=t.return)&&e(t)}}function oH(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var lae=function(t,n,r){for(var i=0,o=0;i=o,o=Ts(),i===38&&o===12&&(n[r]=1),!tm(o);)qa();return Ym(t,Na)},sae=function(t,n){var r=-1,i=44;do switch(tm(i)){case 0:i===38&&Ts()===12&&(n[r]=1),t[r]+=lae(Na-1,n,r);break;case 2:t[r]+=fA(i);break;case 4:if(i===44){t[++r]=Ts()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=Fb(i)}while(i=qa());return t},gae=function(t,n){return iH(sae(rH(t),n))},sW=new WeakMap,cae=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,i=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!sW.get(r))&&!i){sW.set(t,!0);for(var o=[],a=gae(n,o),l=r.props,g=0,u=0;g<a.length;g++)for(var d=0;d<l.length;d++,u++)t.props[u]=o[g]?a[g].replace(/&\f/g,l[d]):l[d]+" "+a[g]}}},uae=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function aH(e,t){switch(Ooe(e,t)){case 5103:return Sr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Sr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Sr+e+Xp+e+Po+e+e;case 6828:case 4268:return Sr+e+Po+e+e;case 6165:return Sr+e+Po+"flex-"+e+e;case 5187:return Sr+e+Zr(e,/(\w+).+(:[^]+)/,Sr+"box-$1$2"+Po+"flex-$1$2")+e;case 5443:return Sr+e+Po+"flex-item-"+Zr(e,/flex-|-self/,"")+e;case 4675:return Sr+e+Po+"flex-line-pack"+Zr(e,/align-content|flex-|-self/,"")+e;case 5548:return Sr+e+Po+Zr(e,"shrink","negative")+e;case 5292:return Sr+e+Po+Zr(e,"basis","preferred-size")+e;case 6060:return Sr+"box-"+Zr(e,"-grow","")+Sr+e+Po+Zr(e,"grow","positive")+e;case 4554:return Sr+Zr(e,/([^-])(transform)/g,"$1"+Sr+"$2")+e;case 6187:return Zr(Zr(Zr(e,/(zoom-|grab)/,Sr+"$1"),/(image-set)/,Sr+"$1"),e,"")+e;case 5495:case 3959:return Zr(e,/(image-set\([^]*)/,Sr+"$1$`$1");case 4968:return Zr(Zr(e,/(.+:)(flex-)?(.*)/,Sr+"box-pack:$3"+Po+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Sr+e+e;case 4095:case 3583:case 4068:case 2532:return Zr(e,/(.+)-inline(.+)/,Sr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ns(e)-1-t>6)switch(Ro(e,t+1)){case 109:if(Ro(e,t+4)!==45)break;case 102:return Zr(e,/(.+:)(.+)-([^]+)/,"$1"+Sr+"$2-$3$1"+Xp+(Ro(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~tS(e,"stretch")?aH(Zr(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Ro(e,t+1)!==115)break;case 6444:switch(Ro(e,Ns(e)-3-(~tS(e,"!important")&&10))){case 107:return Zr(e,":",":"+Sr)+e;case 101:return Zr(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Sr+(Ro(e,14)===45?"inline-":"")+"box$3$1"+Sr+"$2$3$1"+Po+"$2box$3")+e}break;case 5936:switch(Ro(e,t+11)){case 114:return Sr+e+Po+Zr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Sr+e+Po+Zr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Sr+e+Po+Zr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Sr+e+Po+e+e}return e}var dae=function(t,n,r,i){if(t.length>-1&&!t.return)switch(t.type){case S1:t.return=aH(t.value,t.length);break;case eH:return vI([UC(t,{value:Zr(t.value,"@","@"+Sr)})],i);case v1:if(t.length)return Uoe(t.props,function(o){switch(_oe(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return vI([UC(t,{props:[Zr(o,/:(read-\w+)/,":"+Xp+"$1")]})],i);case"::placeholder":return vI([UC(t,{props:[Zr(o,/:(plac\w+)/,":"+Sr+"input-$1")]}),UC(t,{props:[Zr(o,/:(plac\w+)/,":"+Xp+"$1")]}),UC(t,{props:[Zr(o,/:(plac\w+)/,Po+"input-$1")]})],i)}return""})}},Iae=[dae],Cae=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(p){var y=p.getAttribute("data-emotion");y.indexOf(" ")!==-1&&(document.head.appendChild(p),p.setAttribute("data-s",""))})}var i=t.stylisPlugins||Iae,o={},a,l=[];a=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(p){for(var y=p.getAttribute("data-emotion").split(" "),S=1;S<y.length;S++)o[y[S]]=!0;l.push(p)});var g,u=[cae,uae];{var d,C=[iae,aae(function(p){d.insert(p)})],f=oae(u.concat(i,C)),m=function(y){return vI(nae(y),f)};g=function(y,S,v,B){d=v,m(y?y+"{"+S.styles+"}":S.styles),B&&(b.inserted[S.name]=!0)}}var b={key:n,sheet:new Moe({key:n,container:a,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:o,registered:{},insert:g};return b.sheet.hydrate(l),b},fae=!0;function mae(e,t,n){var r="";return n.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):i&&(r+=i+" ")}),r}var lH=function(t,n,r){var i=t.key+"-"+n.name;(r===!1||fae===!1)&&t.registered[i]===void 0&&(t.registered[i]=n.styles)},hae=function(t,n,r){lH(t,n,r);var i=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var o=n;do t.insert(n===o?"."+i:"",o,t.sheet,!0),o=o.next;while(o!==void 0)}};function Aae(e){for(var t=0,n,r=0,i=e.length;i>=4;++r,i-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var pae={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},bae=/[A-Z]|^ms/g,yae=/_EMO_([^_]+?)_([^]*?)_EMO_/g,sH=function(t){return t.charCodeAt(1)===45},gW=function(t){return t!=null&&typeof t!="boolean"},lv=oH(function(e){return sH(e)?e:e.replace(bae,"-$&").toLowerCase()}),cW=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(yae,function(r,i,o){return Xs={name:i,styles:o,next:Xs},i})}return pae[t]!==1&&!sH(t)&&typeof n=="number"&&n!==0?n+"px":n};function nm(e,t,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return Xs={name:i.name,styles:i.styles,next:Xs},i.name;var o=n;if(o.styles!==void 0){var a=o.next;if(a!==void 0)for(;a!==void 0;)Xs={name:a.name,styles:a.styles,next:Xs},a=a.next;var l=o.styles+";";return l}return vae(e,t,n)}case"function":{if(e!==void 0){var g=Xs,u=n(e);return Xs=g,nm(e,t,u)}break}}var d=n;if(t==null)return d;var C=t[d];return C!==void 0?C:d}function vae(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=nm(e,t,n[i])+";";else for(var o in n){var a=n[o];if(typeof a!="object"){var l=a;t!=null&&t[l]!==void 0?r+=o+"{"+t[l]+"}":gW(l)&&(r+=lv(o)+":"+cW(o,l)+";")}else if(Array.isArray(a)&&typeof a[0]=="string"&&(t==null||t[a[0]]===void 0))for(var g=0;g<a.length;g++)gW(a[g])&&(r+=lv(o)+":"+cW(o,a[g])+";");else{var u=nm(e,t,a);switch(o){case"animation":case"animationName":{r+=lv(o)+":"+u+";";break}default:r+=o+"{"+u+"}"}}}return r}var uW=/label:\s*([^\s;{]+)\s*(;|$)/g,Xs;function gH(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,i="";Xs=void 0;var o=e[0];if(o==null||o.raw===void 0)r=!1,i+=nm(n,t,o);else{var a=o;i+=a[0]}for(var l=1;l<e.length;l++)if(i+=nm(n,t,e[l]),r){var g=o;i+=g[l]}uW.lastIndex=0;for(var u="",d;(d=uW.exec(i))!==null;)u+="-"+d[1];var C=Aae(i)+u;return{name:C,styles:i,next:Xs}}var Sae=function(t){return t()},Zae=RI.useInsertionEffect?RI.useInsertionEffect:!1,Gae=Zae||Sae,cH=I.createContext(typeof HTMLElement<"u"?Cae({key:"css"}):null);cH.Provider;var Bae=function(t){return I.forwardRef(function(n,r){var i=I.useContext(cH);return t(n,i,r)})},Rae=I.createContext({}),wae=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Wae=oH(function(e){return wae.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),Vae=Wae,kae=function(t){return t!=="theme"},dW=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?Vae:kae},IW=function(t,n,r){var i;if(n){var o=n.shouldForwardProp;i=t.__emotion_forwardProp&&o?function(a){return t.__emotion_forwardProp(a)&&o(a)}:o}return typeof i!="function"&&r&&(i=t.__emotion_forwardProp),i},Nae=function(t){var n=t.cache,r=t.serialized,i=t.isStringTag;return lH(n,r,i),Gae(function(){return hae(n,r,i)}),null},Xae=function e(t,n){var r=t.__emotion_real===t,i=r&&t.__emotion_base||t,o,a;n!==void 0&&(o=n.label,a=n.target);var l=IW(t,n,r),g=l||dW(i),u=!g("as");return function(){var d=arguments,C=r&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(o!==void 0&&C.push("label:"+o+";"),d[0]==null||d[0].raw===void 0)C.push.apply(C,d);else{var f=d[0];C.push(f[0]);for(var m=d.length,b=1;b<m;b++)C.push(d[b],f[b])}var p=Bae(function(y,S,v){var B=u&&y.as||i,W="",J=[],H=y;if(y.theme==null){H={};for(var x in y)H[x]=y[x];H.theme=I.useContext(Rae)}typeof y.className=="string"?W=mae(S.registered,J,y.className):y.className!=null&&(W=y.className+" ");var E=gH(C.concat(J),S.registered,H);W+=S.key+"-"+E.name,a!==void 0&&(W+=" "+a);var F=u&&l===void 0?dW(B):g,w={};for(var V in y)u&&V==="as"||F(V)&&(w[V]=y[V]);return w.className=W,v&&(w.ref=v),I.createElement(I.Fragment,null,I.createElement(Nae,{cache:S,serialized:E,isStringTag:typeof B=="string"}),I.createElement(B,w))});return p.displayName=o!==void 0?o:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",p.defaultProps=t.defaultProps,p.__emotion_real=p,p.__emotion_base=i,p.__emotion_styles=C,p.__emotion_forwardProp=l,Object.defineProperty(p,"toString",{value:function(){return"."+a}}),p.withComponent=function(y,S){var v=e(y,lt({},n,S,{shouldForwardProp:IW(p,S,!0)}));return v.apply(void 0,C)},p}},Jae=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],rS=Xae.bind(null);Jae.forEach(function(e){rS[e]=rS(e)});/**
 * @mui/styled-engine v6.4.3
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function xae(e,t){return rS(e,t)}function Hae(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const CW=[];function fW(e){return CW[0]=e,gH(CW)}const Yae=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,r)=>n.val-r.val),t.reduce((n,r)=>({...n,[r.key]:r.val}),{})};function Eae(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...i}=e,o=Yae(t),a=Object.keys(o);function l(f){return`@media (min-width:${typeof t[f]=="number"?t[f]:f}${n})`}function g(f){return`@media (max-width:${(typeof t[f]=="number"?t[f]:f)-r/100}${n})`}function u(f,m){const b=a.indexOf(m);return`@media (min-width:${typeof t[f]=="number"?t[f]:f}${n}) and (max-width:${(b!==-1&&typeof t[a[b]]=="number"?t[a[b]]:m)-r/100}${n})`}function d(f){return a.indexOf(f)+1<a.length?u(f,a[a.indexOf(f)+1]):l(f)}function C(f){const m=a.indexOf(f);return m===0?l(a[1]):m===a.length-1?g(a[m]):u(f,a[a.indexOf(f)+1]).replace("@media","@media not all and")}return{keys:a,values:o,up:l,down:g,between:u,only:d,not:C,unit:n,...i}}const Fae={borderRadius:4};function uH(e=8,t=b1({spacing:e})){if(e.mui)return e;const n=(...r)=>(r.length===0?[1]:r).map(o=>{const a=t(o);return typeof a=="number"?`${a}px`:a}).join(" ");return n.mui=!0,n}function Kae(e,t){var r;const n=this;if(n.vars){if(!((r=n.colorSchemes)!=null&&r[e])||typeof n.getColorSchemeSelector!="function")return{};let i=n.getColorSchemeSelector(e);return i==="&"?t:((i.includes("data-")||i.includes("."))&&(i=`*:where(${i.replace(/\s*&$/,"")}) &`),{[i]:t})}return n.palette.mode===e?t:{}}function dH(e={},...t){const{breakpoints:n={},palette:r={},spacing:i,shape:o={},...a}=e,l=Eae(n),g=uH(i);let u=$a({breakpoints:l,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:g,shape:{...Fae,...o}},a);return u=Qie(u),u.applyStyles=Kae,u=t.reduce((d,C)=>$a(d,C),u),u.unstable_sxConfig={...Eb,...a==null?void 0:a.unstable_sxConfig},u.unstable_sx=function(C){return OI({sx:C,theme:this})},u}function IH(e){const{variants:t,...n}=e,r={variants:t,style:fW(n),isProcessed:!0};return r.style===n||t&&t.forEach(i=>{typeof i.style!="function"&&(i.style=fW(i.style))}),r}const Lae=dH();function sv(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function Mae(e){return e?(t,n)=>n[e]:null}function Tae(e,t,n){e.theme=Pae(e.theme)?n:e.theme[t]||e.theme}function hA(e,t){const n=typeof t=="function"?t(e):t;if(Array.isArray(n))return n.flatMap(r=>hA(e,r));if(Array.isArray(n==null?void 0:n.variants)){let r;if(n.isProcessed)r=n.style;else{const{variants:i,...o}=n;r=o}return CH(e,n.variants,[r])}return n!=null&&n.isProcessed?n.style:n}function CH(e,t,n=[]){var i;let r;e:for(let o=0;o<t.length;o+=1){const a=t[o];if(typeof a.props=="function"){if(r??(r={...e,...e.ownerState,ownerState:e.ownerState}),!a.props(r))continue}else for(const l in a.props)if(e[l]!==a.props[l]&&((i=e.ownerState)==null?void 0:i[l])!==a.props[l])continue e;typeof a.style=="function"?(r??(r={...e,...e.ownerState,ownerState:e.ownerState}),n.push(a.style(r))):n.push(a.style)}return n}function zae(e={}){const{themeId:t,defaultTheme:n=Lae,rootShouldForwardProp:r=sv,slotShouldForwardProp:i=sv}=e;function o(l){Tae(l,t,n)}return(l,g={})=>{Hae(l,J=>J.filter(H=>H!==OI));const{name:u,slot:d,skipVariantsResolver:C,skipSx:f,overridesResolver:m=Mae(_ae(d)),...b}=g,p=C!==void 0?C:d&&d!=="Root"&&d!=="root"||!1,y=f||!1;let S=sv;d==="Root"||d==="root"?S=r:d?S=i:Oae(l)&&(S=void 0);const v=xae(l,{shouldForwardProp:S,label:Dae(),...b}),B=J=>{if(typeof J=="function"&&J.__emotion_real!==J)return function(x){return hA(x,J)};if(vg(J)){const H=IH(J);return H.variants?function(E){return hA(E,H)}:H.style}return J},W=(...J)=>{const H=[],x=J.map(B),E=[];if(H.push(o),u&&m&&E.push(function(Y){var U,_;const L=(_=(U=Y.theme.components)==null?void 0:U[u])==null?void 0:_.styleOverrides;if(!L)return null;const $={};for(const P in L)$[P]=hA(Y,L[P]);return m(Y,$)}),u&&!p&&E.push(function(Y){var $,U;const M=Y.theme,L=(U=($=M==null?void 0:M.components)==null?void 0:$[u])==null?void 0:U.variants;return L?CH(Y,L):null}),y||E.push(OI),Array.isArray(x[0])){const V=x.shift(),Y=new Array(H.length).fill(""),M=new Array(E.length).fill("");let L;L=[...Y,...V,...M],L.raw=[...Y,...V.raw,...M],H.unshift(L)}const F=[...H,...x,...E],w=v(...F);return l.muiName&&(w.muiName=l.muiName),w};return v.withConfig&&(W.withConfig=v.withConfig),W}}function Dae(e,t){return void 0}function Pae(e){for(const t in e)return!1;return!0}function Oae(e){return typeof e=="string"&&e.charCodeAt(0)>96}function _ae(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}function G1(e,t=0,n=1){return Pie(e,t,n)}function Uae(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function $c(e){if(e.type)return e;if(e.charAt(0)==="#")return $c(Uae(e));const t=e.indexOf("("),n=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(od(9,e));let r=e.substring(t+1,e.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(i))throw new Error(od(10,i))}else r=r.split(",");return r=r.map(o=>parseFloat(o)),{type:n,values:r,colorSpace:i}}const jae=e=>{const t=$c(e);return t.values.slice(0,3).map((n,r)=>t.type.includes("hsl")&&r!==0?`${n}%`:n).join(" ")},cf=(e,t)=>{try{return jae(e)}catch{return e}};function Mb(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return t.includes("rgb")?r=r.map((i,o)=>o<3?parseInt(i,10):i):t.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),t.includes("color")?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${t}(${r})`}function fH(e){e=$c(e);const{values:t}=e,n=t[0],r=t[1]/100,i=t[2]/100,o=r*Math.min(i,1-i),a=(u,d=(u+n/30)%12)=>i-o*Math.max(Math.min(d-3,9-d,1),-1);let l="rgb";const g=[Math.round(a(0)*255),Math.round(a(8)*255),Math.round(a(4)*255)];return e.type==="hsla"&&(l+="a",g.push(t[3])),Mb({type:l,values:g})}function iS(e){e=$c(e);let t=e.type==="hsl"||e.type==="hsla"?$c(fH(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function Qae(e,t){const n=iS(e),r=iS(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function $ae(e,t){return e=$c(e),t=G1(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,Mb(e)}function Yh(e,t,n){try{return $ae(e,t)}catch{return e}}function B1(e,t){if(e=$c(e),t=G1(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return Mb(e)}function Mr(e,t,n){try{return B1(e,t)}catch{return e}}function R1(e,t){if(e=$c(e),t=G1(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return Mb(e)}function Tr(e,t,n){try{return R1(e,t)}catch{return e}}function qae(e,t=.15){return iS(e)>.5?B1(e,t):R1(e,t)}function Eh(e,t,n){try{return qae(e,t)}catch{return e}}const ele=I.createContext(void 0);function tle(e){const{theme:t,name:n,props:r}=e;if(!t||!t.components||!t.components[n])return r;const i=t.components[n];return i.defaultProps?eS(i.defaultProps,r):!i.styleOverrides&&!i.variants?eS(i,r):r}function nle({props:e,name:t}){const n=I.useContext(ele);return tle({props:e,name:t,theme:{components:n}})}const mW={theme:void 0};function rle(e){let t,n;return function(i){let o=t;return(o===void 0||i.theme!==n)&&(mW.theme=i.theme,o=IH(e(mW)),t=o,n=i.theme),o}}function ile(e=""){function t(...r){if(!r.length)return"";const i=r[0];return typeof i=="string"&&!i.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${i}${t(...r.slice(1))})`:`, ${i}`}return(r,...i)=>`var(--${e?`${e}-`:""}${r}${t(...i)})`}const hW=(e,t,n,r=[])=>{let i=e;t.forEach((o,a)=>{a===t.length-1?Array.isArray(i)?i[Number(o)]=n:i&&typeof i=="object"&&(i[o]=n):i&&typeof i=="object"&&(i[o]||(i[o]=r.includes(o)?[]:{}),i=i[o])})},ole=(e,t,n)=>{function r(i,o=[],a=[]){Object.entries(i).forEach(([l,g])=>{(!n||n&&!n([...o,l]))&&g!=null&&(typeof g=="object"&&Object.keys(g).length>0?r(g,[...o,l],Array.isArray(g)?[...a,l]:a):t([...o,l],g,a))})}r(e)},ale=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>e.includes(r))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function gv(e,t){const{prefix:n,shouldSkipGeneratingVar:r}=t||{},i={},o={},a={};return ole(e,(l,g,u)=>{if((typeof g=="string"||typeof g=="number")&&(!r||!r(l,g))){const d=`--${n?`${n}-`:""}${l.join("-")}`,C=ale(l,g);Object.assign(i,{[d]:C}),hW(o,l,`var(${d})`,u),hW(a,l,`var(${d}, ${C})`,u)}},l=>l[0]==="vars"),{css:i,vars:o,varsWithDefaults:a}}function lle(e,t={}){const{getSelector:n=y,disableCssColorScheme:r,colorSchemeSelector:i}=t,{colorSchemes:o={},components:a,defaultColorScheme:l="light",...g}=e,{vars:u,css:d,varsWithDefaults:C}=gv(g,t);let f=C;const m={},{[l]:b,...p}=o;if(Object.entries(p||{}).forEach(([B,W])=>{const{vars:J,css:H,varsWithDefaults:x}=gv(W,t);f=$a(f,x),m[B]={css:H,vars:J}}),b){const{css:B,vars:W,varsWithDefaults:J}=gv(b,t);f=$a(f,J),m[l]={css:B,vars:W}}function y(B,W){var H,x;let J=i;if(i==="class"&&(J=".%s"),i==="data"&&(J="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(J=`[${i}="%s"]`),B){if(J==="media")return e.defaultColorScheme===B?":root":{[`@media (prefers-color-scheme: ${((x=(H=o[B])==null?void 0:H.palette)==null?void 0:x.mode)||B})`]:{":root":W}};if(J)return e.defaultColorScheme===B?`:root, ${J.replace("%s",String(B))}`:J.replace("%s",String(B))}return":root"}return{vars:f,generateThemeVars:()=>{let B={...u};return Object.entries(m).forEach(([,{vars:W}])=>{B=$a(B,W)}),B},generateStyleSheets:()=>{var E,F;const B=[],W=e.defaultColorScheme||"light";function J(w,V){Object.keys(V).length&&B.push(typeof w=="string"?{[w]:{...V}}:w)}J(n(void 0,{...d}),d);const{[W]:H,...x}=m;if(H){const{css:w}=H,V=(F=(E=o[W])==null?void 0:E.palette)==null?void 0:F.mode,Y=!r&&V?{colorScheme:V,...w}:{...w};J(n(W,{...Y}),Y)}return Object.entries(x).forEach(([w,{css:V}])=>{var L,$;const Y=($=(L=o[w])==null?void 0:L.palette)==null?void 0:$.mode,M=!r&&Y?{colorScheme:Y,...V}:{...V};J(n(w,{...M}),M)}),B}}}function sle(e){return function(n){return e==="media"?`@media (prefers-color-scheme: ${n})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${n}"] &`:e==="class"?`.${n} &`:e==="data"?`[data-${n}] &`:`${e.replace("%s",n)} &`:"&"}}const rm={black:"#000",white:"#fff"},gle={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},_d={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Ud={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},jC={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},jd={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},Qd={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},$d={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"};function mH(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:rm.white,default:rm.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const cle=mH();function hH(){return{text:{primary:rm.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:rm.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const AW=hH();function pW(e,t,n,r){const i=r.light||r,o=r.dark||r*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=R1(e.main,i):t==="dark"&&(e.dark=B1(e.main,o)))}function ule(e="light"){return e==="dark"?{main:jd[200],light:jd[50],dark:jd[400]}:{main:jd[700],light:jd[400],dark:jd[800]}}function dle(e="light"){return e==="dark"?{main:_d[200],light:_d[50],dark:_d[400]}:{main:_d[500],light:_d[300],dark:_d[700]}}function Ile(e="light"){return e==="dark"?{main:Ud[500],light:Ud[300],dark:Ud[700]}:{main:Ud[700],light:Ud[400],dark:Ud[800]}}function Cle(e="light"){return e==="dark"?{main:Qd[400],light:Qd[300],dark:Qd[700]}:{main:Qd[700],light:Qd[500],dark:Qd[900]}}function fle(e="light"){return e==="dark"?{main:$d[400],light:$d[300],dark:$d[700]}:{main:$d[800],light:$d[500],dark:$d[900]}}function mle(e="light"){return e==="dark"?{main:jC[400],light:jC[300],dark:jC[700]}:{main:"#ed6c02",light:jC[500],dark:jC[900]}}function w1(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2,...i}=e,o=e.primary||ule(t),a=e.secondary||dle(t),l=e.error||Ile(t),g=e.info||Cle(t),u=e.success||fle(t),d=e.warning||mle(t);function C(p){return Qae(p,AW.text.primary)>=n?AW.text.primary:cle.text.primary}const f=({color:p,name:y,mainShade:S=500,lightShade:v=300,darkShade:B=700})=>{if(p={...p},!p.main&&p[S]&&(p.main=p[S]),!p.hasOwnProperty("main"))throw new Error(od(11,y?` (${y})`:"",S));if(typeof p.main!="string")throw new Error(od(12,y?` (${y})`:"",JSON.stringify(p.main)));return pW(p,"light",v,r),pW(p,"dark",B,r),p.contrastText||(p.contrastText=C(p.main)),p};let m;return t==="light"?m=mH():t==="dark"&&(m=hH()),$a({common:{...rm},mode:t,primary:f({color:o,name:"primary"}),secondary:f({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:f({color:l,name:"error"}),warning:f({color:d,name:"warning"}),info:f({color:g,name:"info"}),success:f({color:u,name:"success"}),grey:gle,contrastThreshold:n,getContrastText:C,augmentColor:f,tonalOffset:r,...m},i)}function hle(e){const t={};return Object.entries(e).forEach(r=>{const[i,o]=r;typeof o=="object"&&(t[i]=`${o.fontStyle?`${o.fontStyle} `:""}${o.fontVariant?`${o.fontVariant} `:""}${o.fontWeight?`${o.fontWeight} `:""}${o.fontStretch?`${o.fontStretch} `:""}${o.fontSize||""}${o.lineHeight?`/${o.lineHeight} `:""}${o.fontFamily||""}`)}),t}function Ale(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function ple(e){return Math.round(e*1e5)/1e5}const bW={textTransform:"uppercase"},yW='"Roboto", "Helvetica", "Arial", sans-serif';function ble(e,t){const{fontFamily:n=yW,fontSize:r=14,fontWeightLight:i=300,fontWeightRegular:o=400,fontWeightMedium:a=500,fontWeightBold:l=700,htmlFontSize:g=16,allVariants:u,pxToRem:d,...C}=typeof t=="function"?t(e):t,f=r/14,m=d||(y=>`${y/g*f}rem`),b=(y,S,v,B,W)=>({fontFamily:n,fontWeight:y,fontSize:m(S),lineHeight:v,...n===yW?{letterSpacing:`${ple(B/S)}em`}:{},...W,...u}),p={h1:b(i,96,1.167,-1.5),h2:b(i,60,1.2,-.5),h3:b(o,48,1.167,0),h4:b(o,34,1.235,.25),h5:b(o,24,1.334,0),h6:b(a,20,1.6,.15),subtitle1:b(o,16,1.75,.15),subtitle2:b(a,14,1.57,.1),body1:b(o,16,1.5,.15),body2:b(o,14,1.43,.15),button:b(a,14,1.75,.4,bW),caption:b(o,12,1.66,.4),overline:b(o,12,2.66,1,bW),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return $a({htmlFontSize:g,pxToRem:m,fontFamily:n,fontSize:r,fontWeightLight:i,fontWeightRegular:o,fontWeightMedium:a,fontWeightBold:l,...p},C,{clone:!1})}const yle=.2,vle=.14,Sle=.12;function li(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${yle})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${vle})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${Sle})`].join(",")}const Zle=["none",li(0,2,1,-1,0,1,1,0,0,1,3,0),li(0,3,1,-2,0,2,2,0,0,1,5,0),li(0,3,3,-2,0,3,4,0,0,1,8,0),li(0,2,4,-1,0,4,5,0,0,1,10,0),li(0,3,5,-1,0,5,8,0,0,1,14,0),li(0,3,5,-1,0,6,10,0,0,1,18,0),li(0,4,5,-2,0,7,10,1,0,2,16,1),li(0,5,5,-3,0,8,10,1,0,3,14,2),li(0,5,6,-3,0,9,12,1,0,3,16,2),li(0,6,6,-3,0,10,14,1,0,4,18,3),li(0,6,7,-4,0,11,15,1,0,4,20,3),li(0,7,8,-4,0,12,17,2,0,5,22,4),li(0,7,8,-4,0,13,19,2,0,5,24,4),li(0,7,9,-4,0,14,21,2,0,5,26,4),li(0,8,9,-5,0,15,22,2,0,6,28,5),li(0,8,10,-5,0,16,24,2,0,6,30,5),li(0,8,11,-5,0,17,26,2,0,6,32,5),li(0,9,11,-5,0,18,28,2,0,7,34,6),li(0,9,12,-6,0,19,29,2,0,7,36,6),li(0,10,13,-6,0,20,31,3,0,8,38,7),li(0,10,13,-6,0,21,33,3,0,8,40,7),li(0,10,14,-6,0,22,35,3,0,8,42,7),li(0,11,14,-7,0,23,36,3,0,9,44,8),li(0,11,15,-7,0,24,38,3,0,9,46,8)],Gle={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Ble={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function vW(e){return`${Math.round(e)}ms`}function Rle(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function wle(e){const t={...Gle,...e.easing},n={...Ble,...e.duration};return{getAutoHeightDuration:Rle,create:(i=["all"],o={})=>{const{duration:a=n.standard,easing:l=t.easeInOut,delay:g=0,...u}=o;return(Array.isArray(i)?i:[i]).map(d=>`${d} ${typeof a=="string"?a:vW(a)} ${l} ${typeof g=="string"?g:vW(g)}`).join(",")},...e,easing:t,duration:n}}const Wle={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Vle(e){return vg(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function AH(e={}){const t={...e};function n(r){const i=Object.entries(r);for(let o=0;o<i.length;o++){const[a,l]=i[o];!Vle(l)||a.startsWith("unstable_")?delete r[a]:vg(l)&&(r[a]={...l},n(r[a]))}}return n(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function oS(e={},...t){const{breakpoints:n,mixins:r={},spacing:i,palette:o={},transitions:a={},typography:l={},shape:g,...u}=e;if(e.vars)throw new Error(od(20));const d=w1(o),C=dH(e);let f=$a(C,{mixins:Ale(C.breakpoints,r),palette:d,shadows:Zle.slice(),typography:ble(d,l),transitions:wle(a),zIndex:{...Wle}});return f=$a(f,u),f=t.reduce((m,b)=>$a(m,b),f),f.unstable_sxConfig={...Eb,...u==null?void 0:u.unstable_sxConfig},f.unstable_sx=function(b){return OI({sx:b,theme:this})},f.toRuntimeSource=AH,f}function kle(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const Nle=[...Array(25)].map((e,t)=>{if(t===0)return"none";const n=kle(t);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function pH(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function bH(e){return e==="dark"?Nle:[]}function Xle(e){const{palette:t={mode:"light"},opacity:n,overlays:r,...i}=e,o=w1(t);return{palette:o,opacity:{...pH(o.mode),...n},overlays:r||bH(o.mode),...i}}function Jle(e){var t;return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/(mode|contrastThreshold|tonalOffset)/))}const xle=e=>[...[...Array(25)].map((t,n)=>`--${e?`${e}-`:""}overlays-${n}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],Hle=e=>(t,n)=>{const r=e.rootSelector||":root",i=e.colorSchemeSelector;let o=i;if(i==="class"&&(o=".%s"),i==="data"&&(o="[data-%s]"),i!=null&&i.startsWith("data-")&&!i.includes("%s")&&(o=`[${i}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const a={};return xle(e.cssVarPrefix).forEach(l=>{a[l]=n[l],delete n[l]}),o==="media"?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:a}}:o?{[o.replace("%s",t)]:a,[`${r}, ${o.replace("%s",t)}`]:n}:{[r]:{...n,...a}}}if(o&&o!=="media")return`${r}, ${o.replace("%s",String(t))}`}else if(t){if(o==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[r]:n}};if(o)return o.replace("%s",String(t))}return r};function Yle(e,t){t.forEach(n=>{e[n]||(e[n]={})})}function rt(e,t,n){!e[t]&&n&&(e[t]=n)}function uf(e){return typeof e!="string"||!e.startsWith("hsl")?e:fH(e)}function bg(e,t){`${t}Channel`in e||(e[`${t}Channel`]=cf(uf(e[t])))}function Ele(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const Ws=e=>{try{return e()}catch{}},Fle=(e="mui")=>ile(e);function cv(e,t,n,r){if(!t)return;t=t===!0?{}:t;const i=r==="dark"?"dark":"light";if(!n){e[r]=Xle({...t,palette:{mode:i,...t==null?void 0:t.palette}});return}const{palette:o,...a}=oS({...n,palette:{mode:i,...t==null?void 0:t.palette}});return e[r]={...t,palette:o,opacity:{...pH(i),...t==null?void 0:t.opacity},overlays:(t==null?void 0:t.overlays)||bH(i)},a}function Kle(e={},...t){const{colorSchemes:n={light:!0},defaultColorScheme:r,disableCssColorScheme:i=!1,cssVarPrefix:o="mui",shouldSkipGeneratingVar:a=Jle,colorSchemeSelector:l=n.light&&n.dark?"media":void 0,rootSelector:g=":root",...u}=e,d=Object.keys(n)[0],C=r||(n.light&&d!=="light"?"light":d),f=Fle(o),{[C]:m,light:b,dark:p,...y}=n,S={...y};let v=m;if((C==="dark"&&!("dark"in n)||C==="light"&&!("light"in n))&&(v=!0),!v)throw new Error(od(21,C));const B=cv(S,v,u,C);b&&!S.light&&cv(S,b,void 0,"light"),p&&!S.dark&&cv(S,p,void 0,"dark");let W={defaultColorScheme:C,...B,cssVarPrefix:o,colorSchemeSelector:l,rootSelector:g,getCssVar:f,colorSchemes:S,font:{...hle(B.typography),...B.font},spacing:Ele(u.spacing)};Object.keys(W.colorSchemes).forEach(F=>{const w=W.colorSchemes[F].palette,V=Y=>{const M=Y.split("-"),L=M[1],$=M[2];return f(Y,w[L][$])};if(w.mode==="light"&&(rt(w.common,"background","#fff"),rt(w.common,"onBackground","#000")),w.mode==="dark"&&(rt(w.common,"background","#000"),rt(w.common,"onBackground","#fff")),Yle(w,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),w.mode==="light"){rt(w.Alert,"errorColor",Mr(w.error.light,.6)),rt(w.Alert,"infoColor",Mr(w.info.light,.6)),rt(w.Alert,"successColor",Mr(w.success.light,.6)),rt(w.Alert,"warningColor",Mr(w.warning.light,.6)),rt(w.Alert,"errorFilledBg",V("palette-error-main")),rt(w.Alert,"infoFilledBg",V("palette-info-main")),rt(w.Alert,"successFilledBg",V("palette-success-main")),rt(w.Alert,"warningFilledBg",V("palette-warning-main")),rt(w.Alert,"errorFilledColor",Ws(()=>w.getContrastText(w.error.main))),rt(w.Alert,"infoFilledColor",Ws(()=>w.getContrastText(w.info.main))),rt(w.Alert,"successFilledColor",Ws(()=>w.getContrastText(w.success.main))),rt(w.Alert,"warningFilledColor",Ws(()=>w.getContrastText(w.warning.main))),rt(w.Alert,"errorStandardBg",Tr(w.error.light,.9)),rt(w.Alert,"infoStandardBg",Tr(w.info.light,.9)),rt(w.Alert,"successStandardBg",Tr(w.success.light,.9)),rt(w.Alert,"warningStandardBg",Tr(w.warning.light,.9)),rt(w.Alert,"errorIconColor",V("palette-error-main")),rt(w.Alert,"infoIconColor",V("palette-info-main")),rt(w.Alert,"successIconColor",V("palette-success-main")),rt(w.Alert,"warningIconColor",V("palette-warning-main")),rt(w.AppBar,"defaultBg",V("palette-grey-100")),rt(w.Avatar,"defaultBg",V("palette-grey-400")),rt(w.Button,"inheritContainedBg",V("palette-grey-300")),rt(w.Button,"inheritContainedHoverBg",V("palette-grey-A100")),rt(w.Chip,"defaultBorder",V("palette-grey-400")),rt(w.Chip,"defaultAvatarColor",V("palette-grey-700")),rt(w.Chip,"defaultIconColor",V("palette-grey-700")),rt(w.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),rt(w.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),rt(w.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),rt(w.LinearProgress,"primaryBg",Tr(w.primary.main,.62)),rt(w.LinearProgress,"secondaryBg",Tr(w.secondary.main,.62)),rt(w.LinearProgress,"errorBg",Tr(w.error.main,.62)),rt(w.LinearProgress,"infoBg",Tr(w.info.main,.62)),rt(w.LinearProgress,"successBg",Tr(w.success.main,.62)),rt(w.LinearProgress,"warningBg",Tr(w.warning.main,.62)),rt(w.Skeleton,"bg",`rgba(${V("palette-text-primaryChannel")} / 0.11)`),rt(w.Slider,"primaryTrack",Tr(w.primary.main,.62)),rt(w.Slider,"secondaryTrack",Tr(w.secondary.main,.62)),rt(w.Slider,"errorTrack",Tr(w.error.main,.62)),rt(w.Slider,"infoTrack",Tr(w.info.main,.62)),rt(w.Slider,"successTrack",Tr(w.success.main,.62)),rt(w.Slider,"warningTrack",Tr(w.warning.main,.62));const Y=Eh(w.background.default,.8);rt(w.SnackbarContent,"bg",Y),rt(w.SnackbarContent,"color",Ws(()=>w.getContrastText(Y))),rt(w.SpeedDialAction,"fabHoverBg",Eh(w.background.paper,.15)),rt(w.StepConnector,"border",V("palette-grey-400")),rt(w.StepContent,"border",V("palette-grey-400")),rt(w.Switch,"defaultColor",V("palette-common-white")),rt(w.Switch,"defaultDisabledColor",V("palette-grey-100")),rt(w.Switch,"primaryDisabledColor",Tr(w.primary.main,.62)),rt(w.Switch,"secondaryDisabledColor",Tr(w.secondary.main,.62)),rt(w.Switch,"errorDisabledColor",Tr(w.error.main,.62)),rt(w.Switch,"infoDisabledColor",Tr(w.info.main,.62)),rt(w.Switch,"successDisabledColor",Tr(w.success.main,.62)),rt(w.Switch,"warningDisabledColor",Tr(w.warning.main,.62)),rt(w.TableCell,"border",Tr(Yh(w.divider,1),.88)),rt(w.Tooltip,"bg",Yh(w.grey[700],.92))}if(w.mode==="dark"){rt(w.Alert,"errorColor",Tr(w.error.light,.6)),rt(w.Alert,"infoColor",Tr(w.info.light,.6)),rt(w.Alert,"successColor",Tr(w.success.light,.6)),rt(w.Alert,"warningColor",Tr(w.warning.light,.6)),rt(w.Alert,"errorFilledBg",V("palette-error-dark")),rt(w.Alert,"infoFilledBg",V("palette-info-dark")),rt(w.Alert,"successFilledBg",V("palette-success-dark")),rt(w.Alert,"warningFilledBg",V("palette-warning-dark")),rt(w.Alert,"errorFilledColor",Ws(()=>w.getContrastText(w.error.dark))),rt(w.Alert,"infoFilledColor",Ws(()=>w.getContrastText(w.info.dark))),rt(w.Alert,"successFilledColor",Ws(()=>w.getContrastText(w.success.dark))),rt(w.Alert,"warningFilledColor",Ws(()=>w.getContrastText(w.warning.dark))),rt(w.Alert,"errorStandardBg",Mr(w.error.light,.9)),rt(w.Alert,"infoStandardBg",Mr(w.info.light,.9)),rt(w.Alert,"successStandardBg",Mr(w.success.light,.9)),rt(w.Alert,"warningStandardBg",Mr(w.warning.light,.9)),rt(w.Alert,"errorIconColor",V("palette-error-main")),rt(w.Alert,"infoIconColor",V("palette-info-main")),rt(w.Alert,"successIconColor",V("palette-success-main")),rt(w.Alert,"warningIconColor",V("palette-warning-main")),rt(w.AppBar,"defaultBg",V("palette-grey-900")),rt(w.AppBar,"darkBg",V("palette-background-paper")),rt(w.AppBar,"darkColor",V("palette-text-primary")),rt(w.Avatar,"defaultBg",V("palette-grey-600")),rt(w.Button,"inheritContainedBg",V("palette-grey-800")),rt(w.Button,"inheritContainedHoverBg",V("palette-grey-700")),rt(w.Chip,"defaultBorder",V("palette-grey-700")),rt(w.Chip,"defaultAvatarColor",V("palette-grey-300")),rt(w.Chip,"defaultIconColor",V("palette-grey-300")),rt(w.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),rt(w.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),rt(w.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),rt(w.LinearProgress,"primaryBg",Mr(w.primary.main,.5)),rt(w.LinearProgress,"secondaryBg",Mr(w.secondary.main,.5)),rt(w.LinearProgress,"errorBg",Mr(w.error.main,.5)),rt(w.LinearProgress,"infoBg",Mr(w.info.main,.5)),rt(w.LinearProgress,"successBg",Mr(w.success.main,.5)),rt(w.LinearProgress,"warningBg",Mr(w.warning.main,.5)),rt(w.Skeleton,"bg",`rgba(${V("palette-text-primaryChannel")} / 0.13)`),rt(w.Slider,"primaryTrack",Mr(w.primary.main,.5)),rt(w.Slider,"secondaryTrack",Mr(w.secondary.main,.5)),rt(w.Slider,"errorTrack",Mr(w.error.main,.5)),rt(w.Slider,"infoTrack",Mr(w.info.main,.5)),rt(w.Slider,"successTrack",Mr(w.success.main,.5)),rt(w.Slider,"warningTrack",Mr(w.warning.main,.5));const Y=Eh(w.background.default,.98);rt(w.SnackbarContent,"bg",Y),rt(w.SnackbarContent,"color",Ws(()=>w.getContrastText(Y))),rt(w.SpeedDialAction,"fabHoverBg",Eh(w.background.paper,.15)),rt(w.StepConnector,"border",V("palette-grey-600")),rt(w.StepContent,"border",V("palette-grey-600")),rt(w.Switch,"defaultColor",V("palette-grey-300")),rt(w.Switch,"defaultDisabledColor",V("palette-grey-600")),rt(w.Switch,"primaryDisabledColor",Mr(w.primary.main,.55)),rt(w.Switch,"secondaryDisabledColor",Mr(w.secondary.main,.55)),rt(w.Switch,"errorDisabledColor",Mr(w.error.main,.55)),rt(w.Switch,"infoDisabledColor",Mr(w.info.main,.55)),rt(w.Switch,"successDisabledColor",Mr(w.success.main,.55)),rt(w.Switch,"warningDisabledColor",Mr(w.warning.main,.55)),rt(w.TableCell,"border",Mr(Yh(w.divider,1),.68)),rt(w.Tooltip,"bg",Yh(w.grey[700],.92))}bg(w.background,"default"),bg(w.background,"paper"),bg(w.common,"background"),bg(w.common,"onBackground"),bg(w,"divider"),Object.keys(w).forEach(Y=>{const M=w[Y];Y!=="tonalOffset"&&M&&typeof M=="object"&&(M.main&&rt(w[Y],"mainChannel",cf(uf(M.main))),M.light&&rt(w[Y],"lightChannel",cf(uf(M.light))),M.dark&&rt(w[Y],"darkChannel",cf(uf(M.dark))),M.contrastText&&rt(w[Y],"contrastTextChannel",cf(uf(M.contrastText))),Y==="text"&&(bg(w[Y],"primary"),bg(w[Y],"secondary")),Y==="action"&&(M.active&&bg(w[Y],"active"),M.selected&&bg(w[Y],"selected")))})}),W=t.reduce((F,w)=>$a(F,w),W);const J={prefix:o,disableCssColorScheme:i,shouldSkipGeneratingVar:a,getSelector:Hle(W)},{vars:H,generateThemeVars:x,generateStyleSheets:E}=lle(W,J);return W.vars=H,Object.entries(W.colorSchemes[W.defaultColorScheme]).forEach(([F,w])=>{W[F]=w}),W.generateThemeVars=x,W.generateStyleSheets=E,W.generateSpacing=function(){return uH(u.spacing,b1(this))},W.getColorSchemeSelector=sle(l),W.spacing=W.generateSpacing(),W.shouldSkipGeneratingVar=a,W.unstable_sxConfig={...Eb,...u==null?void 0:u.unstable_sxConfig},W.unstable_sx=function(w){return OI({sx:w,theme:this})},W.toRuntimeSource=AH,W}function SW(e,t,n){e.colorSchemes&&n&&(e.colorSchemes[t]={...n!==!0&&n,palette:w1({...n===!0?{}:n.palette,mode:t})})}function Lle(e={},...t){const{palette:n,cssVariables:r=!1,colorSchemes:i=n?void 0:{light:!0},defaultColorScheme:o=n==null?void 0:n.mode,...a}=e,l=o||"light",g=i==null?void 0:i[l],u={...i,...n?{[l]:{...typeof g!="boolean"&&g,palette:n}}:void 0};if(r===!1){if(!("colorSchemes"in e))return oS(e,...t);let d=n;"palette"in e||u[l]&&(u[l]!==!0?d=u[l].palette:l==="dark"&&(d={mode:"dark"}));const C=oS({...e,palette:d},...t);return C.defaultColorScheme=l,C.colorSchemes=u,C.palette.mode==="light"&&(C.colorSchemes.light={...u.light!==!0&&u.light,palette:C.palette},SW(C,"dark",u.dark)),C.palette.mode==="dark"&&(C.colorSchemes.dark={...u.dark!==!0&&u.dark,palette:C.palette},SW(C,"light",u.light)),C}return!n&&!("light"in u)&&l==="light"&&(u.light=!0),Kle({...a,colorSchemes:u,defaultColorScheme:l,...typeof r!="boolean"&&r},...t)}const Mle=Lle(),Tle="$$material";function zle(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const Dle=e=>zle(e)&&e!=="classes",Ple=zae({themeId:Tle,defaultTheme:Mle,rootShouldForwardProp:Dle}),Ole=rle;function _le(e){return nle(e)}function Ule(e){return jx("MuiSvgIcon",e)}Die("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const jle=e=>{const{color:t,fontSize:n,classes:r}=e,i={root:["root",t!=="inherit"&&`color${PI(t)}`,`fontSize${PI(n)}`]};return Lie(i,Ule,r)},Qle=Ple("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${PI(n.color)}`],t[`fontSize${PI(n.fontSize)}`]]}})(Ole(({theme:e})=>{var t,n,r,i,o,a,l,g,u,d,C,f,m,b;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(i=(t=e.transitions)==null?void 0:t.create)==null?void 0:i.call(t,"fill",{duration:(r=(n=(e.vars??e).transitions)==null?void 0:n.duration)==null?void 0:r.shorter}),variants:[{props:p=>!p.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((a=(o=e.typography)==null?void 0:o.pxToRem)==null?void 0:a.call(o,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((g=(l=e.typography)==null?void 0:l.pxToRem)==null?void 0:g.call(l,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((d=(u=e.typography)==null?void 0:u.pxToRem)==null?void 0:d.call(u,35))||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,p])=>p&&p.main).map(([p])=>{var y,S;return{props:{color:p},style:{color:(S=(y=(e.vars??e).palette)==null?void 0:y[p])==null?void 0:S.main}}}),{props:{color:"action"},style:{color:(f=(C=(e.vars??e).palette)==null?void 0:C.action)==null?void 0:f.active}},{props:{color:"disabled"},style:{color:(b=(m=(e.vars??e).palette)==null?void 0:m.action)==null?void 0:b.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),aS=I.forwardRef(function(t,n){const r=_le({props:t,name:"MuiSvgIcon"}),{children:i,className:o,color:a="inherit",component:l="svg",fontSize:g="medium",htmlColor:u,inheritViewBox:d=!1,titleAccess:C,viewBox:f="0 0 24 24",...m}=r,b=I.isValidElement(i)&&i.type==="svg",p={...r,color:a,component:l,fontSize:g,instanceFontSize:t.fontSize,inheritViewBox:d,viewBox:f,hasSvgAsChild:b},y={};d||(y.viewBox=f);const S=jle(p);return ye.jsxs(Qle,{as:l,className:Oie(S.root,o),focusable:"false",color:u,"aria-hidden":C?void 0:!0,role:C?"img":void 0,ref:n,...y,...m,...b&&i.props,ownerState:p,children:[b?i.props.children:i,C?ye.jsx("title",{children:C}):null]})});aS.muiName="SvgIcon";function _s(e,t){function n(r,i){return ye.jsx(aS,{"data-testid":`${t}Icon`,ref:i,...r,children:e})}return n.muiName=aS.muiName,I.memo(I.forwardRef(n))}const $le=_s(ye.jsx("path",{d:"M3 6h18V4H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4v-2H3zm10 6H9v1.78c-.61.55-1 1.33-1 2.22s.39 1.67 1 2.22V20h4v-1.78c.61-.55 1-1.34 1-2.22s-.39-1.67-1-2.22zm-2 5.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5M22 8h-6c-.5 0-1 .5-1 1v10c0 .5.5 1 1 1h6c.5 0 1-.5 1-1V9c0-.5-.5-1-1-1m-1 10h-4v-8h4z"}),"DevicesOtherOutlined"),qle=_s([ye.jsx("path",{d:"M17 10h4v8h-4z",opacity:".3"},"0"),ye.jsx("circle",{cx:"11",cy:"16",r:"1.5",opacity:".3"},"1"),ye.jsx("path",{d:"M3 6h18V4H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4v-2H3zm19 2h-6c-.5 0-1 .5-1 1v10c0 .5.5 1 1 1h6c.5 0 1-.5 1-1V9c0-.5-.5-1-1-1m-1 10h-4v-8h4zm-8-6H9v1.78c-.61.55-1 1.33-1 2.22s.39 1.67 1 2.22V20h4v-1.78c.61-.55 1-1.34 1-2.22s-.39-1.67-1-2.22zm-2 5.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"},"2")],"DevicesOtherTwoTone"),ese=_s([ye.jsx("path",{d:"m20 8-8 5-8-5v10h16zm0-2H4l8 4.99z",opacity:".3"},"0"),ye.jsx("path",{d:"M4 20h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2M20 6l-8 4.99L4 6zM4 8l8 5 8-5v10H4z"},"1")],"EmailTwoTone"),tse=_s(ye.jsx("path",{d:"M20 10V8h-4V4h-2v4h-4V4H8v4H4v2h4v4H4v2h4v4h2v-4h4v4h2v-4h4v-2h-4v-4zm-6 4h-4v-4h4z"}),"Grid3x3TwoTone"),nse=_s(ye.jsx("path",{d:"M4 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m1.13 1.1c-.37-.06-.74-.1-1.13-.1-.99 0-1.93.21-2.78.58C.48 14.9 0 15.62 0 16.43V18h4.5v-1.61c0-.83.23-1.61.63-2.29M20 13c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m4 3.43c0-.81-.48-1.53-1.22-1.85-.85-.37-1.79-.58-2.78-.58-.39 0-.76.04-1.13.1.4.68.63 1.46.63 2.29V18H24zm-7.76-2.78c-1.17-.52-2.61-.9-4.24-.9s-3.07.39-4.24.9C6.68 14.13 6 15.21 6 16.39V18h12v-1.61c0-1.18-.68-2.26-1.76-2.74M8.07 16c.09-.23.13-.39.91-.69.97-.38 1.99-.56 3.02-.56s2.05.18 3.02.56c.77.3.81.46.91.69zM12 8c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m0-2c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"GroupsOutlined"),rse=_s([ye.jsx("path",{d:"M5 19h14V5H5zm6-12h6v2h-6zm0 4h6v2h-6zm0 4h6v2h-6zM7 7h2v2H7zm0 4h2v2H7zm0 4h2v2H7z",opacity:".3"},"0"),ye.jsx("path",{d:"M11 7h6v2h-6zm0 4h6v2h-6zm0 4h6v2h-6zM7 7h2v2H7zm0 4h2v2H7zm0 4h2v2H7zM20.1 3H3.9c-.5 0-.9.4-.9.9v16.2c0 .4.4.9.9.9h16.2c.4 0 .9-.5.9-.9V3.9c0-.5-.5-.9-.9-.9M19 19H5V5h14z"},"1")],"ListAltTwoTone"),ise=_s([ye.jsx("circle",{cx:"12",cy:"8",r:"2.1",opacity:".3"},"0"),ye.jsx("path",{d:"M12 14.9c-2.97 0-6.1 1.46-6.1 2.1v1.1h12.2V17c0-.64-3.13-2.1-6.1-2.1",opacity:".3"},"1"),ye.jsx("path",{d:"M12 13c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4m6.1 5.1H5.9V17c0-.64 3.13-2.1 6.1-2.1s6.1 1.46 6.1 2.1zM12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0-6.1c1.16 0 2.1.94 2.1 2.1s-.94 2.1-2.1 2.1S9.9 9.16 9.9 8s.94-2.1 2.1-2.1"},"2")],"PersonOutlineTwoTone"),ose=_s([ye.jsx("path",{d:"M19 17.47c-.88-.07-1.75-.22-2.6-.45l-1.19 1.19c1.2.41 2.48.67 3.8.75v-1.49zM5.03 5c.09 1.32.35 2.59.75 3.8l1.2-1.2c-.23-.84-.38-1.71-.44-2.6z",opacity:".3"},"0"),ye.jsx("path",{d:"M9.07 7.57C8.7 6.45 8.5 5.25 8.5 4c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1 0 9.39 7.61 17 17 17 .55 0 1-.45 1-1v-3.49c0-.55-.45-1-1-1-1.24 0-2.45-.2-3.57-.57-.1-.04-.21-.05-.31-.05-.26 0-.51.1-.71.29l-2.2 2.2c-2.83-1.45-5.15-3.76-6.59-6.59l2.2-2.2c.28-.28.36-.67.25-1.02m7.33 9.45c.85.24 1.72.39 2.6.45v1.49c-1.32-.09-2.59-.35-3.8-.75zM5.79 8.8c-.41-1.21-.67-2.48-.76-3.8h1.5c.07.89.22 1.76.46 2.59z"},"1")],"PhoneTwoTone"),ase=_s([ye.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),ye.jsx("circle",{cx:"12",cy:"12",r:"5"},"1")],"RadioButtonCheckedTwoTone"),lse=_s(ye.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"RadioButtonUncheckedTwoTone"),{Sider:sse}=dC,gse=({handleLogout:e,isSidebarOpen:t,toggleSidebar:n})=>{const r=ru(),i=o=>{r(`/${o}`)};return ye.jsxs(ye.Fragment,{children:[ye.jsx(Xx,{title:null,placement:"left",closable:!1,onClose:n,open:t,className:"lg:hidden",style:{backgroundColor:"#001529"},children:ye.jsx(ZW,{handleLogout:e,onMenuClick:i})}),ye.jsx(sse,{collapsible:!0,collapsed:!1,trigger:null,className:"hidden lg:block absolute top-0 left-0 h-screen bg-white p-4",style:{overflow:"hidden",position:"sticky",height:"100vh"},children:ye.jsx(ZW,{handleLogout:e,onMenuClick:i})})]})},ZW=({handleLogout:e,onMenuClick:t})=>ye.jsxs(xs,{theme:"dark",mode:"inline",selectedKeys:[location.pathname.startsWith("/devices")?"devices":location.pathname.substring(1)],className:"flex-grow",style:{borderRight:0},children:[ye.jsx("div",{className:"flex items-center justify-center",children:ye.jsx("div",{className:"bg-white mb-4 p-1 h-12 w-12 flex items-center justify-center rounded-[50%]",children:ye.jsx("img",{src:"/ridgeant.png",alt:"",className:"h-10 w-10 rounded-[50%]"})})}),ye.jsx(xs.Item,{icon:ye.jsx(Rre,{}),onClick:()=>t("devices"),children:"Devices"},"devices"),ye.jsx(xs.Item,{icon:ye.jsx(nse,{}),onClick:()=>t("employees"),children:"Employees"},"employees"),ye.jsx(xs.Item,{icon:ye.jsx($le,{}),onClick:()=>t("types"),children:"Types"},"types"),ye.jsx(xs.Item,{icon:ye.jsx(Ure,{}),onClick:()=>t("settings"),children:"Settings"},"settings")]});var yH={exports:{}},Kr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ho=typeof Symbol=="function"&&Symbol.for,W1=ho?Symbol.for("react.element"):60103,V1=ho?Symbol.for("react.portal"):60106,Tb=ho?Symbol.for("react.fragment"):60107,zb=ho?Symbol.for("react.strict_mode"):60108,Db=ho?Symbol.for("react.profiler"):60114,Pb=ho?Symbol.for("react.provider"):60109,Ob=ho?Symbol.for("react.context"):60110,k1=ho?Symbol.for("react.async_mode"):60111,_b=ho?Symbol.for("react.concurrent_mode"):60111,Ub=ho?Symbol.for("react.forward_ref"):60112,jb=ho?Symbol.for("react.suspense"):60113,cse=ho?Symbol.for("react.suspense_list"):60120,Qb=ho?Symbol.for("react.memo"):60115,$b=ho?Symbol.for("react.lazy"):60116,use=ho?Symbol.for("react.block"):60121,dse=ho?Symbol.for("react.fundamental"):60117,Ise=ho?Symbol.for("react.responder"):60118,Cse=ho?Symbol.for("react.scope"):60119;function nl(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case W1:switch(e=e.type,e){case k1:case _b:case Tb:case Db:case zb:case jb:return e;default:switch(e=e&&e.$$typeof,e){case Ob:case Ub:case $b:case Qb:case Pb:return e;default:return t}}case V1:return t}}}function vH(e){return nl(e)===_b}Kr.AsyncMode=k1;Kr.ConcurrentMode=_b;Kr.ContextConsumer=Ob;Kr.ContextProvider=Pb;Kr.Element=W1;Kr.ForwardRef=Ub;Kr.Fragment=Tb;Kr.Lazy=$b;Kr.Memo=Qb;Kr.Portal=V1;Kr.Profiler=Db;Kr.StrictMode=zb;Kr.Suspense=jb;Kr.isAsyncMode=function(e){return vH(e)||nl(e)===k1};Kr.isConcurrentMode=vH;Kr.isContextConsumer=function(e){return nl(e)===Ob};Kr.isContextProvider=function(e){return nl(e)===Pb};Kr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===W1};Kr.isForwardRef=function(e){return nl(e)===Ub};Kr.isFragment=function(e){return nl(e)===Tb};Kr.isLazy=function(e){return nl(e)===$b};Kr.isMemo=function(e){return nl(e)===Qb};Kr.isPortal=function(e){return nl(e)===V1};Kr.isProfiler=function(e){return nl(e)===Db};Kr.isStrictMode=function(e){return nl(e)===zb};Kr.isSuspense=function(e){return nl(e)===jb};Kr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Tb||e===_b||e===Db||e===zb||e===jb||e===cse||typeof e=="object"&&e!==null&&(e.$$typeof===$b||e.$$typeof===Qb||e.$$typeof===Pb||e.$$typeof===Ob||e.$$typeof===Ub||e.$$typeof===dse||e.$$typeof===Ise||e.$$typeof===Cse||e.$$typeof===use)};Kr.typeOf=nl;/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var GW=Object.getOwnPropertySymbols,fse=Object.prototype.hasOwnProperty,mse=Object.prototype.propertyIsEnumerable;function hse(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function Ase(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(o){return t[o]});if(r.join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(o){i[o]=o}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}Ase();var pse="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",bse=pse;Function.call.bind(Object.prototype.hasOwnProperty);var yse=bse;function SH(){}function ZH(){}ZH.resetWarningCache=SH;var vse=function(){function e(r,i,o,a,l,g){if(g!==yse){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:ZH,resetWarningCache:SH};return n.PropTypes=n,n};yH.exports=vse();var qd=yH.exports;function Sse(e,t){var n=atob(e);return n}function Zse(e,t,n){var r=Sse(e),i=r.indexOf(`
`,10)+1,o=r.substring(i)+"",a=new Blob([o],{type:"application/javascript"});return URL.createObjectURL(a)}function Gse(e,t,n){var r;return function(o){return r=r||Zse(e),new Worker(r,o)}}var Bse=Gse("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCXZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9OwoKCWZ1bmN0aW9uIGdldEF1Z21lbnRlZE5hbWVzcGFjZShuKSB7CgkJaWYgKG4uX19lc01vZHVsZSkgcmV0dXJuIG47CgkJdmFyIGEgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdfX2VzTW9kdWxlJywge3ZhbHVlOiB0cnVlfSk7CgkJT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbiAoaykgewoJCQl2YXIgZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobiwgayk7CgkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCBrLCBkLmdldCA/IGQgOiB7CgkJCQllbnVtZXJhYmxlOiB0cnVlLAoJCQkJZ2V0OiBmdW5jdGlvbiAoKSB7CgkJCQkJcmV0dXJuIG5ba107CgkJCQl9CgkJCX0pOwoJCX0pOwoJCXJldHVybiBhOwoJfQoKCXZhciBCaW5hcnlCaXRtYXAkMSA9IHt9OwoKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBFeGNlcHRpb24kMSA9IHt9OwoKCWZ1bmN0aW9uIGZpeFByb3RvKHRhcmdldCwgcHJvdG90eXBlKSB7CgkgIHZhciBzZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZjsKCSAgc2V0UHJvdG90eXBlT2YgPyBzZXRQcm90b3R5cGVPZih0YXJnZXQsIHByb3RvdHlwZSkgOiB0YXJnZXQuX19wcm90b19fID0gcHJvdG90eXBlOwoJfQoJZnVuY3Rpb24gZml4U3RhY2sodGFyZ2V0LCBmbikgewoJICBpZiAoZm4gPT09IHZvaWQgMCkgewoJICAgIGZuID0gdGFyZ2V0LmNvbnN0cnVjdG9yOwoJICB9CgoJICB2YXIgY2FwdHVyZVN0YWNrVHJhY2UgPSBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZTsKCSAgY2FwdHVyZVN0YWNrVHJhY2UgJiYgY2FwdHVyZVN0YWNrVHJhY2UodGFyZ2V0LCBmbik7Cgl9CgoJdmFyIF9fZXh0ZW5kcyRrID0gZnVuY3Rpb24gKCkgewoJICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCB7CgkgICAgICBfX3Byb3RvX186IFtdCgkgICAgfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICBkLl9fcHJvdG9fXyA9IGI7CgkgICAgfSB8fCBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgZm9yICh2YXIgcCBpbiBiKSB7IGlmIChiLmhhc093blByb3BlcnR5KHApKSB7IGRbcF0gPSBiW3BdOyB9IH0KCSAgICB9OwoKCSAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgfTsKCgkgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgoJICAgIGZ1bmN0aW9uIF9fKCkgewoJICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7CgkgICAgfQoKCSAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgIH07Cgl9KCk7CgoJdmFyIEN1c3RvbUVycm9yID0gZnVuY3Rpb24gKF9zdXBlcikgewoJICBfX2V4dGVuZHMkayhDdXN0b21FcnJvciwgX3N1cGVyKTsKCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKG1lc3NhZ2UpIHsKCSAgICB2YXIgX25ld1RhcmdldCA9IHRoaXMuY29uc3RydWN0b3I7CgoJICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpIHx8IHRoaXM7CgoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfdGhpcywgJ25hbWUnLCB7CgkgICAgICB2YWx1ZTogX25ld1RhcmdldC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmaXhQcm90byhfdGhpcywgX25ld1RhcmdldC5wcm90b3R5cGUpOwoJICAgIGZpeFN0YWNrKF90aGlzKTsKCSAgICByZXR1cm4gX3RoaXM7CgkgIH0KCgkgIHJldHVybiBDdXN0b21FcnJvcjsKCX0oRXJyb3IpOwoKCXZhciBfX3NwcmVhZEFycmF5cyA9IGZ1bmN0aW9uICgpIHsKCSAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzOwoKCSAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7IHMgKz0gYXJndW1lbnRzJDFbaV0ubGVuZ3RoOyB9CgoJICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspIHsgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspIHsgcltrXSA9IGFbal07IH0gfQoKCSAgcmV0dXJuIHI7Cgl9OwoJZnVuY3Rpb24gY3VzdG9tRXJyb3JGYWN0b3J5KGZuLCBwYXJlbnQpIHsKCSAgaWYgKHBhcmVudCA9PT0gdm9pZCAwKSB7CgkgICAgcGFyZW50ID0gRXJyb3I7CgkgIH0KCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKCkgewoJICAgIHZhciBhcmd1bWVudHMkMSA9IGFyZ3VtZW50czsKCgkgICAgdmFyIGFyZ3MgPSBbXTsKCgkgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzJDFbX2ldOwoJICAgIH0KCgkgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEN1c3RvbUVycm9yKSkgeyByZXR1cm4gbmV3IChDdXN0b21FcnJvci5iaW5kLmFwcGx5KEN1c3RvbUVycm9yLCBfX3NwcmVhZEFycmF5cyhbdm9pZCAwXSwgYXJncykpKSgpOyB9CgkgICAgcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3MpOwoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbmFtZScsIHsKCSAgICAgIHZhbHVlOiBmbi5uYW1lIHx8IHBhcmVudC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmbi5hcHBseSh0aGlzLCBhcmdzKTsKCSAgICBmaXhTdGFjayh0aGlzLCBDdXN0b21FcnJvcik7CgkgIH0KCgkgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhDdXN0b21FcnJvciwgewoJICAgIHByb3RvdHlwZTogewoJICAgICAgdmFsdWU6IE9iamVjdC5jcmVhdGUocGFyZW50LnByb3RvdHlwZSwgewoJICAgICAgICBjb25zdHJ1Y3RvcjogewoJICAgICAgICAgIHZhbHVlOiBDdXN0b21FcnJvciwKCSAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKCSAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICAgICAgfQoJICAgICAgfSkKCSAgICB9CgkgIH0pOwoJfQoKCXZhciBjdXN0b21FcnJvciA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHsKCQlfX3Byb3RvX186IG51bGwsCgkJQ3VzdG9tRXJyb3I6IEN1c3RvbUVycm9yLAoJCWN1c3RvbUVycm9yRmFjdG9yeTogY3VzdG9tRXJyb3JGYWN0b3J5Cgl9KTsKCgl2YXIgcmVxdWlyZSQkMCA9IC8qQF9fUFVSRV9fKi9nZXRBdWdtZW50ZWROYW1lc3BhY2UoY3VzdG9tRXJyb3IpOwoKCXZhciBfX2V4dGVuZHMkaiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIHRzX2N1c3RvbV9lcnJvcl8xID0gcmVxdWlyZSQkMDsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRqKEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICAvKioKCSAgICAgKiBBbGxvd3MgRXhjZXB0aW9uIHRvIGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5CgkgICAgICogd2l0aCBzb21lIG1lc3NhZ2UgYW5kIHByb3RvdHlwZSBkZWZpbml0aW9uLgoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEV4Y2VwdGlvbihtZXNzYWdlKSB7CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBFeGNlcHRpb24ucHJvdG90eXBlLmdldEtpbmQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBleCA9IHRoaXMuY29uc3RydWN0b3I7CgkgICAgICAgIHJldHVybiBleC5raW5kOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSXQncyB0eXBlZCBhcyBzdHJpbmcgc28gaXQgY2FuIGJlIGV4dGVuZGVkIGFuZCBvdmVycmlkZW4uCgkgICAgICovCgkgICAgRXhjZXB0aW9uLmtpbmQgPSAnRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRXhjZXB0aW9uOwoJfSh0c19jdXN0b21fZXJyb3JfMS5DdXN0b21FcnJvcikpOwoJRXhjZXB0aW9uJDEuZGVmYXVsdCA9IEV4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSQ5ID0gRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaShJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCkgewoJICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CgkgICAgfQoJICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0lsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbjsKCX0oRXhjZXB0aW9uXzEkOS5kZWZhdWx0KSk7CglJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMS5kZWZhdWx0ID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJ5Qml0bWFwJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgQmluYXJ5Qml0bWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEJpbmFyeUJpdG1hcChiaW5hcml6ZXIpIHsKCSAgICAgICAgdGhpcy5iaW5hcml6ZXIgPSBiaW5hcml6ZXI7CgkgICAgICAgIGlmIChiaW5hcml6ZXIgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhLmRlZmF1bHQoJ0JpbmFyaXplciBtdXN0IGJlIG5vbi1udWxsLicpOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gVGhlIHdpZHRoIG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIGJpdG1hcC4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29udmVydHMgb25lIHJvdyBvZiBsdW1pbmFuY2UgZGF0YSB0byAxIGJpdCBkYXRhLiBNYXkgYWN0dWFsbHkgZG8gdGhlIGNvbnZlcnNpb24sIG9yIHJldHVybgoJICAgICAqIGNhY2hlZCBkYXRhLiBDYWxsZXJzIHNob3VsZCBhc3N1bWUgdGhpcyBtZXRob2QgaXMgZXhwZW5zaXZlIGFuZCBjYWxsIGl0IGFzIHNlbGRvbSBhcyBwb3NzaWJsZS4KCSAgICAgKiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMUQgYmFyY29kZXMgYW5kIG1heSBjaG9vc2UgdG8gYXBwbHkgc2hhcnBlbmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gZmV0Y2gsIHdoaWNoIG11c3QgYmUgaW4gWzAsIGJpdG1hcCBoZWlnaHQpCgkgICAgICogQHBhcmFtIHJvdyBBbiBvcHRpb25hbCBwcmVhbGxvY2F0ZWQgYXJyYXkuIElmIG51bGwgb3IgdG9vIHNtYWxsLCBpdCB3aWxsIGJlIGlnbm9yZWQuCgkgICAgICogICAgICAgICAgICBJZiB1c2VkLCB0aGUgQmluYXJpemVyIHdpbGwgY2FsbCBCaXRBcnJheS5jbGVhcigpLiBBbHdheXMgdXNlIHRoZSByZXR1cm5lZCBvYmplY3QuCgkgICAgICogQHJldHVybiBUaGUgYXJyYXkgb2YgYml0cyBmb3IgdGhpcyByb3cgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgcm93IGNhbid0IGJlIGJpbmFyaXplZAoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUuZ2V0QmxhY2tSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEJsYWNrUm93KHksIHJvdyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBhIDJEIGFycmF5IG9mIGx1bWluYW5jZSBkYXRhIHRvIDEgYml0LiBBcyBhYm92ZSwgYXNzdW1lIHRoaXMgbWV0aG9kIGlzIGV4cGVuc2l2ZQoJICAgICAqIGFuZCBkbyBub3QgY2FsbCBpdCByZXBlYXRlZGx5LiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMkQgYmFyY29kZXMgYW5kIG1heSBvcgoJICAgICAqIG1heSBub3QgYXBwbHkgc2hhcnBlbmluZy4gVGhlcmVmb3JlLCBhIHJvdyBmcm9tIHRoaXMgbWF0cml4IG1heSBub3QgYmUgaWRlbnRpY2FsIHRvIG9uZQoJICAgICAqIGZldGNoZWQgdXNpbmcgZ2V0QmxhY2tSb3coKSwgc28gZG9uJ3QgbWl4IGFuZCBtYXRjaCBiZXR3ZWVuIHRoZW0uCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIFRoZSAyRCBhcnJheSBvZiBiaXRzIGZvciB0aGUgaW1hZ2UgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgaW1hZ2UgY2FuJ3QgYmUgYmluYXJpemVkIHRvIG1ha2UgYSBtYXRyaXgKCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEJsYWNrTWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBUaGUgbWF0cml4IGlzIGNyZWF0ZWQgb24gZGVtYW5kIHRoZSBmaXJzdCB0aW1lIGl0IGlzIHJlcXVlc3RlZCwgdGhlbiBjYWNoZWQuIFRoZXJlIGFyZSB0d28KCSAgICAgICAgLy8gcmVhc29ucyBmb3IgdGhpczoKCSAgICAgICAgLy8gMS4gVGhpcyB3b3JrIHdpbGwgbmV2ZXIgYmUgZG9uZSBpZiB0aGUgY2FsbGVyIG9ubHkgaW5zdGFsbHMgMUQgUmVhZGVyIG9iamVjdHMsIG9yIGlmIGEKCSAgICAgICAgLy8gICAgMUQgUmVhZGVyIGZpbmRzIGEgYmFyY29kZSBiZWZvcmUgdGhlIDJEIFJlYWRlcnMgcnVuLgoJICAgICAgICAvLyAyLiBUaGlzIHdvcmsgd2lsbCBvbmx5IGJlIGRvbmUgb25jZSBldmVuIGlmIHRoZSBjYWxsZXIgaW5zdGFsbHMgbXVsdGlwbGUgMkQgUmVhZGVycy4KCSAgICAgICAgaWYgKHRoaXMubWF0cml4ID09PSBudWxsIHx8IHRoaXMubWF0cml4ID09PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gdGhpcy5iaW5hcml6ZXIuZ2V0QmxhY2tNYXRyaXgoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5tYXRyaXg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhpcyBiaXRtYXAgY2FuIGJlIGNyb3BwZWQuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5pc0Nyb3BTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggY3JvcHBlZCBpbWFnZSBkYXRhLiBJbXBsZW1lbnRhdGlvbnMgbWF5IGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlCgkgICAgICogb3JpZ2luYWwgZGF0YSByYXRoZXIgdGhhbiBhIGNvcHkuIE9ubHkgY2FsbGFibGUgaWYgaXNDcm9wU3VwcG9ydGVkKCkgaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBsZWZ0IFRoZSBsZWZ0IGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0V2lkdGgoKSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB0b3AgY29vcmRpbmF0ZSwgd2hpY2ggbXVzdCBiZSBpbiBbMCxnZXRIZWlnaHQoKSkKCSAgICAgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIHJlY3RhbmdsZSB0byBjcm9wLgoJICAgICAqIEByZXR1cm4gQSBjcm9wcGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBuZXdTb3VyY2UgPSB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5jcm9wKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIGJpdG1hcCBzdXBwb3J0cyBjb3VudGVyLWNsb2Nrd2lzZSByb3RhdGlvbi4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmlzUm90YXRlU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkuaXNSb3RhdGVTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpOwoJICAgICAgICByZXR1cm4gbmV3IEJpbmFyeUJpdG1hcCh0aGlzLmJpbmFyaXplci5jcmVhdGVCaW5hcml6ZXIobmV3U291cmNlKSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIHJvdGF0ZWQgaW1hZ2UgZGF0YSBieSA0NSBkZWdyZWVzIGNvdW50ZXJjbG9ja3dpc2UuCgkgICAgICogT25seSBjYWxsYWJsZSBpZiB7QGxpbmsgI2lzUm90YXRlU3VwcG9ydGVkKCl9IGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIEEgcm90YXRlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QmxhY2tNYXRyaXgoKS50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlIC8qOiBOb3RGb3VuZEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICByZXR1cm4gJyc7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaW5hcnlCaXRtYXA7Cgl9KCkpOwoJdmFyIF9kZWZhdWx0JDMgPSBCaW5hcnlCaXRtYXAkMS5kZWZhdWx0ID0gQmluYXJ5Qml0bWFwOwoKCXZhciBIeWJyaWRCaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBCaW5hcml6ZXIkMSA9IHt9OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJpemVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogVGhpcyBjbGFzcyBoaWVyYXJjaHkgcHJvdmlkZXMgYSBzZXQgb2YgbWV0aG9kcyB0byBjb252ZXJ0IGx1bWluYW5jZSBkYXRhIHRvIDEgYml0IGRhdGEuCgkgKiBJdCBhbGxvd3MgdGhlIGFsZ29yaXRobSB0byB2YXJ5IHBvbHltb3JwaGljYWxseSwgZm9yIGV4YW1wbGUgYWxsb3dpbmcgYSB2ZXJ5IGV4cGVuc2l2ZQoJICogdGhyZXNob2xkaW5nIHRlY2huaXF1ZSBmb3Igc2VydmVycyBhbmQgYSBmYXN0IG9uZSBmb3IgbW9iaWxlLiBJdCBhbHNvIHBlcm1pdHMgdGhlIGltcGxlbWVudGF0aW9uCgkgKiB0byB2YXJ5LCBlLmcuIGEgSk5JIHZlcnNpb24gZm9yIEFuZHJvaWQgYW5kIGEgSmF2YSBmYWxsYmFjayB2ZXJzaW9uIGZvciBvdGhlciBwbGF0Zm9ybXMuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpbmFyaXplciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBCaW5hcml6ZXIoc291cmNlKSB7CgkgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlOwoJICAgIH0KCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEx1bWluYW5jZVNvdXJjZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlOwoJICAgIH07CgkgICAgQmluYXJpemVyLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgcmV0dXJuIEJpbmFyaXplcjsKCX0oKSk7CglCaW5hcml6ZXIkMS5kZWZhdWx0ID0gQmluYXJpemVyOwoKCXZhciBCaXRBcnJheSQxID0ge307CgoJdmFyIEFycmF5cyQxID0ge307CgoJdmFyIFN5c3RlbSQxID0ge307CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN5c3RlbSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIFN5c3RlbSgpIHsKCSAgICB9CgkgICAgLy8gcHVibGljIHN0YXRpYyB2b2lkIGFycmF5Y29weShPYmplY3Qgc3JjLCBpbnQgc3JjUG9zLCBPYmplY3QgZGVzdCwgaW50IGRlc3RQb3MsIGludCBsZW5ndGgpCgkgICAgLyoqCgkgICAgICogTWFrZXMgYSBjb3B5IG9mIGEgYXJyYXkuCgkgICAgICovCgkgICAgU3lzdGVtLmFycmF5Y29weSA9IGZ1bmN0aW9uIChzcmMsIHNyY1BvcywgZGVzdCwgZGVzdFBvcywgbGVuZ3RoKSB7CgkgICAgICAgIC8vIFRPRE86IGJldHRlciB1c2Ugc3BsaXQgb3Igc2V0PwoJICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHsKCSAgICAgICAgICAgIGRlc3RbZGVzdFBvcysrXSA9IHNyY1tzcmNQb3MrK107CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgdGltZSBpbiBtaWxsaXNlY29uZHMuCgkgICAgICovCgkgICAgU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gRGF0ZS5ub3coKTsKCSAgICB9OwoJICAgIHJldHVybiBTeXN0ZW07Cgl9KCkpOwoJU3lzdGVtJDEuZGVmYXVsdCA9IFN5c3RlbTsKCgl2YXIgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyRoID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDggPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaChJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbi5raW5kID0gJ0luZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ4LmRlZmF1bHQpKTsKCUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uXzEgPSBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZyhBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uKGluZGV4LCBtZXNzYWdlKSB7CgkgICAgICAgIGlmIChpbmRleCA9PT0gdm9pZCAwKSB7IGluZGV4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5pbmRleCA9IGluZGV4OwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24ua2luZCA9ICdBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb247Cgl9KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KSk7CglBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoKCXZhciBfX3ZhbHVlcyQ3ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5cyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtXzEkNSA9IFN5c3RlbSQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDkgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMSA9IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxOwoJdmFyIEFycmF5cyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBcnJheXMoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQgYXJyYXkKCSAgICAgKiBvZiBpbnRzLgoJICAgICAqCgkgICAgICogQHBhcmFtIGEgdGhlIGFycmF5IHRvIGJlIGZpbGxlZAoJICAgICAqIEBwYXJhbSB2YWwgdGhlIHZhbHVlIHRvIGJlIHN0b3JlZCBpbiBhbGwgZWxlbWVudHMgb2YgdGhlIGFycmF5CgkgICAgICovCgkgICAgQXJyYXlzLmZpbGwgPSBmdW5jdGlvbiAoYSwgdmFsKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQoJICAgICAgICAgICAgYVtpXSA9IHZhbDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQKCSAgICAgKiByYW5nZSBvZiB0aGUgc3BlY2lmaWVkIGFycmF5IG9mIGludHMuICBUaGUgcmFuZ2UgdG8gYmUgZmlsbGVkCgkgICAgICogZXh0ZW5kcyBmcm9tIGluZGV4IHtAY29kZSBmcm9tSW5kZXh9LCBpbmNsdXNpdmUsIHRvIGluZGV4CgkgICAgICoge0Bjb2RlIHRvSW5kZXh9LCBleGNsdXNpdmUuICAoSWYge0Bjb2RlIGZyb21JbmRleD09dG9JbmRleH0sIHRoZQoJICAgICAqIHJhbmdlIHRvIGJlIGZpbGxlZCBpcyBlbXB0eS4pCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYSB0aGUgYXJyYXkgdG8gYmUgZmlsbGVkCgkgICAgICogQHBhcmFtIGZyb21JbmRleCB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGVsZW1lbnQgKGluY2x1c2l2ZSkgdG8gYmUKCSAgICAgKiAgICAgICAgZmlsbGVkIHdpdGggdGhlIHNwZWNpZmllZCB2YWx1ZQoJICAgICAqIEBwYXJhbSB0b0luZGV4IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IChleGNsdXNpdmUpIHRvIGJlCgkgICAgICogICAgICAgIGZpbGxlZCB3aXRoIHRoZSBzcGVjaWZpZWQgdmFsdWUKCSAgICAgKiBAcGFyYW0gdmFsIHRoZSB2YWx1ZSB0byBiZSBzdG9yZWQgaW4gYWxsIGVsZW1lbnRzIG9mIHRoZSBhcnJheQoJICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPiB0b0luZGV4fQoJICAgICAqIEB0aHJvd3MgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPCAwfSBvcgoJICAgICAqICAgICAgICAge0Bjb2RlIHRvSW5kZXggPiBhLmxlbmd0aH0KCSAgICAgKi8KCSAgICBBcnJheXMuZmlsbFdpdGhpbiA9IGZ1bmN0aW9uIChhLCBmcm9tSW5kZXgsIHRvSW5kZXgsIHZhbCkgewoJICAgICAgICBBcnJheXMucmFuZ2VDaGVjayhhLmxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZyb21JbmRleDsgaSA8IHRvSW5kZXg7IGkrKykKCSAgICAgICAgICAgIGFbaV0gPSB2YWw7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDaGVja3MgdGhhdCB7QGNvZGUgZnJvbUluZGV4fSBhbmQge0Bjb2RlIHRvSW5kZXh9IGFyZSBpbgoJICAgICAqIHRoZSByYW5nZSBhbmQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBpZiB0aGV5IGFyZW4ndC4KCSAgICAgKi8KCSAgICBBcnJheXMucmFuZ2VDaGVjayA9IGZ1bmN0aW9uIChhcnJheUxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KSB7CgkgICAgICAgIGlmIChmcm9tSW5kZXggPiB0b0luZGV4KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOS5kZWZhdWx0KCdmcm9tSW5kZXgoJyArIGZyb21JbmRleCArICcpID4gdG9JbmRleCgnICsgdG9JbmRleCArICcpJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGZyb21JbmRleCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KGZyb21JbmRleCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvSW5kZXggPiBhcnJheUxlbmd0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbl8xLmRlZmF1bHQodG9JbmRleCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEFycmF5cy5hc0xpc3QgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBhcmdzID0gW107CgkgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CgkgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGFyZ3M7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlID0gZnVuY3Rpb24gKHJvd3MsIGNvbHMsIHZhbHVlKSB7CgkgICAgICAgIHZhciBhcnIgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiByb3dzIH0pOwoJICAgICAgICByZXR1cm4gYXJyLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlSW50MzJBcnJheSA9IGZ1bmN0aW9uIChyb3dzLCBjb2xzLCB2YWx1ZSkgewoJICAgICAgICB2YXIgYXJyID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogcm93cyB9KTsKCSAgICAgICAgcmV0dXJuIGFyci5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIEludDMyQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuZXF1YWxzID0gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsKCSAgICAgICAgaWYgKCFmaXJzdCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIGlmICghc2Vjb25kKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKCFmaXJzdC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoIXNlY29uZC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZmlyc3QubGVuZ3RoICE9PSBzZWNvbmQubGVuZ3RoKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gZmlyc3QubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgaWYgKGZpcnN0W2ldICE9PSBzZWNvbmRbaV0pIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICBBcnJheXMuaGFzaENvZGUgPSBmdW5jdGlvbiAoYSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgaWYgKGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSAxOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgYV8xID0gX192YWx1ZXMkNyhhKSwgYV8xXzEgPSBhXzEubmV4dCgpOyAhYV8xXzEuZG9uZTsgYV8xXzEgPSBhXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBhXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAzMSAqIHJlc3VsdCArIGVsZW1lbnQ7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChhXzFfMSAmJiAhYV8xXzEuZG9uZSAmJiAoX2EgPSBhXzEucmV0dXJuKSkgX2EuY2FsbChhXzEpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBBcnJheXMuZmlsbFVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAoYSwgdmFsdWUpIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgIT09IGEubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIGFbaV0gPSB2YWx1ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZiA9IGZ1bmN0aW9uIChvcmlnaW5hbCwgbmV3TGVuZ3RoKSB7CgkgICAgICAgIHJldHVybiBvcmlnaW5hbC5zbGljZSgwLCBuZXdMZW5ndGgpOwoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZlVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAob3JpZ2luYWwsIG5ld0xlbmd0aCkgewoJICAgICAgICBpZiAob3JpZ2luYWwubGVuZ3RoIDw9IG5ld0xlbmd0aCkgewoJICAgICAgICAgICAgdmFyIG5ld0FycmF5ID0gbmV3IFVpbnQ4QXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgICAgIG5ld0FycmF5LnNldChvcmlnaW5hbCk7CgkgICAgICAgICAgICByZXR1cm4gbmV3QXJyYXk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG9yaWdpbmFsLnNsaWNlKDAsIG5ld0xlbmd0aCk7CgkgICAgfTsKCSAgICBBcnJheXMuY29weU9mUmFuZ2UgPSBmdW5jdGlvbiAob3JpZ2luYWwsIGZyb20sIHRvKSB7CgkgICAgICAgIHZhciBuZXdMZW5ndGggPSB0byAtIGZyb207CgkgICAgICAgIHZhciBjb3B5ID0gbmV3IEludDMyQXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgU3lzdGVtXzEkNS5kZWZhdWx0LmFycmF5Y29weShvcmlnaW5hbCwgZnJvbSwgY29weSwgMCwgbmV3TGVuZ3RoKTsKCSAgICAgICAgcmV0dXJuIGNvcHk7CgkgICAgfTsKCSAgICAvKgoJICAgICogUmV0dXJucyB0aGUgaW5kZXggb2Ygb2YgdGhlIGVsZW1lbnQgaW4gYSBzb3J0ZWQgYXJyYXkgb3IgKC1uLTEpIHdoZXJlIG4gaXMgdGhlIGluc2VydGlvbiBwb2ludAoJICAgICogZm9yIHRoZSBuZXcgZWxlbWVudC4KCSAgICAqIFBhcmFtZXRlcnM6CgkgICAgKiAgICAgYXIgLSBBIHNvcnRlZCBhcnJheQoJICAgICogICAgIGVsIC0gQW4gZWxlbWVudCB0byBzZWFyY2ggZm9yCgkgICAgKiAgICAgY29tcGFyYXRvciAtIEEgY29tcGFyYXRvciBmdW5jdGlvbi4gVGhlIGZ1bmN0aW9uIHRha2VzIHR3byBhcmd1bWVudHM6IChhLCBiKSBhbmQgcmV0dXJuczoKCSAgICAqICAgICAgICBhIG5lZ2F0aXZlIG51bWJlciAgaWYgYSBpcyBsZXNzIHRoYW4gYjsKCSAgICAqICAgICAgICAwIGlmIGEgaXMgZXF1YWwgdG8gYjsKCSAgICAqICAgICAgICBhIHBvc2l0aXZlIG51bWJlciBvZiBhIGlzIGdyZWF0ZXIgdGhhbiBiLgoJICAgICogVGhlIGFycmF5IG1heSBjb250YWluIGR1cGxpY2F0ZSBlbGVtZW50cy4gSWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgZXF1YWwgZWxlbWVudHMgaW4gdGhlIGFycmF5LAoJICAgICogdGhlIHJldHVybmVkIHZhbHVlIGNhbiBiZSB0aGUgaW5kZXggb2YgYW55IG9uZSBvZiB0aGUgZXF1YWwgZWxlbWVudHMuCgkgICAgKgoJICAgICogaHR0cDovL2pzZmlkZGxlLm5ldC9hcnl6aG92L3BrZnN0NTUwLwoJICAgICovCgkgICAgQXJyYXlzLmJpbmFyeVNlYXJjaCA9IGZ1bmN0aW9uIChhciwgZWwsIGNvbXBhcmF0b3IpIHsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY29tcGFyYXRvcikgewoJICAgICAgICAgICAgY29tcGFyYXRvciA9IEFycmF5cy5udW1iZXJDb21wYXJhdG9yOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtID0gMDsKCSAgICAgICAgdmFyIG4gPSBhci5sZW5ndGggLSAxOwoJICAgICAgICB3aGlsZSAobSA8PSBuKSB7CgkgICAgICAgICAgICB2YXIgayA9IChuICsgbSkgPj4gMTsKCSAgICAgICAgICAgIHZhciBjbXAgPSBjb21wYXJhdG9yKGVsLCBhcltrXSk7CgkgICAgICAgICAgICBpZiAoY21wID4gMCkgewoJICAgICAgICAgICAgICAgIG0gPSBrICsgMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA8IDApIHsKCSAgICAgICAgICAgICAgICBuID0gayAtIDE7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gLW0gLSAxOwoJICAgIH07CgkgICAgQXJyYXlzLm51bWJlckNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYikgewoJICAgICAgICByZXR1cm4gYSAtIGI7CgkgICAgfTsKCSAgICByZXR1cm4gQXJyYXlzOwoJfSgpKTsKCUFycmF5cyQxLmRlZmF1bHQgPSBBcnJheXM7CgoJdmFyIEludGVnZXIkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlZ2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogUG9ueWZpbGwgZm9yIEphdmEncyBJbnRlZ2VyIGNsYXNzLgoJICovCgl2YXIgSW50ZWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBJbnRlZ2VyKCkgewoJICAgIH0KCSAgICBJbnRlZ2VyLm51bWJlck9mVHJhaWxpbmdaZXJvcyA9IGZ1bmN0aW9uIChpKSB7CgkgICAgICAgIHZhciB5OwoJICAgICAgICBpZiAoaSA9PT0gMCkKCSAgICAgICAgICAgIHJldHVybiAzMjsKCSAgICAgICAgdmFyIG4gPSAzMTsKCSAgICAgICAgeSA9IGkgPDwgMTY7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDE2OwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgeSA9IGkgPDwgODsKCSAgICAgICAgaWYgKHkgIT09IDApIHsKCSAgICAgICAgICAgIG4gLT0gODsKCSAgICAgICAgICAgIGkgPSB5OwoJICAgICAgICB9CgkgICAgICAgIHkgPSBpIDw8IDQ7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDQ7CgkgICAgICAgICAgICBpID0geTsKCSAgICAgICAgfQoJICAgICAgICB5ID0gaSA8PCAyOwoJICAgICAgICBpZiAoeSAhPT0gMCkgewoJICAgICAgICAgICAgbiAtPSAyOwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG4gLSAoKGkgPDwgMSkgPj4+IDMxKTsKCSAgICB9OwoJICAgIEludGVnZXIubnVtYmVyT2ZMZWFkaW5nWmVyb3MgPSBmdW5jdGlvbiAoaSkgewoJICAgICAgICAvLyBIRCwgRmlndXJlIDUtNgoJICAgICAgICBpZiAoaSA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDMyOwoJICAgICAgICB9CgkgICAgICAgIHZhciBuID0gMTsKCSAgICAgICAgaWYgKGkgPj4+IDE2ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDE2OwoJICAgICAgICAgICAgaSA8PD0gMTY7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGkgPj4+IDI0ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDg7CgkgICAgICAgICAgICBpIDw8PSA4OwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID4+PiAyOCA9PT0gMCkgewoJICAgICAgICAgICAgbiArPSA0OwoJICAgICAgICAgICAgaSA8PD0gNDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaSA+Pj4gMzAgPT09IDApIHsKCSAgICAgICAgICAgIG4gKz0gMjsKCSAgICAgICAgICAgIGkgPDw9IDI7CgkgICAgICAgIH0KCSAgICAgICAgbiAtPSBpID4+PiAzMTsKCSAgICAgICAgcmV0dXJuIG47CgkgICAgfTsKCSAgICBJbnRlZ2VyLnRvSGV4U3RyaW5nID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgcmV0dXJuIGkudG9TdHJpbmcoMTYpOwoJICAgIH07CgkgICAgSW50ZWdlci50b0JpbmFyeVN0cmluZyA9IGZ1bmN0aW9uIChpbnROdW1iZXIpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZyhwYXJzZUludChTdHJpbmcoaW50TnVtYmVyKSwgMikpOwoJICAgIH07CgkgICAgLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4gVGhpcyBmdW5jdGlvbiBpcyBzb21ldGltZXMgcmVmZXJyZWQgdG8gYXMgdGhlIHBvcHVsYXRpb24gY291bnQuCgkgICAgLy8gUmV0dXJuczoKCSAgICAvLyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4KCSAgICBJbnRlZ2VyLmJpdENvdW50ID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgLy8gSEQsIEZpZ3VyZSA1LTIKCSAgICAgICAgaSA9IGkgLSAoKGkgPj4+IDEpICYgMHg1NTU1NTU1NSk7CgkgICAgICAgIGkgPSAoaSAmIDB4MzMzMzMzMzMpICsgKChpID4+PiAyKSAmIDB4MzMzMzMzMzMpOwoJICAgICAgICBpID0gKGkgKyAoaSA+Pj4gNCkpICYgMHgwZjBmMGYwZjsKCSAgICAgICAgaSA9IGkgKyAoaSA+Pj4gOCk7CgkgICAgICAgIGkgPSBpICsgKGkgPj4+IDE2KTsKCSAgICAgICAgcmV0dXJuIGkgJiAweDNmOwoJICAgIH07CgkgICAgSW50ZWdlci50cnVuY0RpdmlzaW9uID0gZnVuY3Rpb24gKGRpdmlkZW5kLCBkaXZpc29yKSB7CgkgICAgICAgIHJldHVybiBNYXRoLnRydW5jKGRpdmlkZW5kIC8gZGl2aXNvcik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBBIHN0cmluZyB0byBhbiBpbnRlZ2VyLgoJICAgICAqIEBwYXJhbSBzIEEgc3RyaW5nIHRvIGNvbnZlcnQgaW50byBhIG51bWJlci4KCSAgICAgKiBAcGFyYW0gcmFkaXggQSB2YWx1ZSBiZXR3ZWVuIDIgYW5kIDM2IHRoYXQgc3BlY2lmaWVzIHRoZSBiYXNlIG9mIHRoZSBudW1iZXIgaW4gbnVtU3RyaW5nLiBJZiB0aGlzIGFyZ3VtZW50IGlzIG5vdCBzdXBwbGllZCwgc3RyaW5ncyB3aXRoIGEgcHJlZml4IG9mICcweCcgYXJlIGNvbnNpZGVyZWQgaGV4YWRlY2ltYWwuIEFsbCBvdGhlciBzdHJpbmdzIGFyZSBjb25zaWRlcmVkIGRlY2ltYWwuCgkgICAgICovCgkgICAgSW50ZWdlci5wYXJzZUludCA9IGZ1bmN0aW9uIChudW0sIHJhZGl4KSB7CgkgICAgICAgIGlmIChyYWRpeCA9PT0gdm9pZCAwKSB7IHJhZGl4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIHJldHVybiBwYXJzZUludChudW0sIHJhZGl4KTsKCSAgICB9OwoJICAgIEludGVnZXIuTUlOX1ZBTFVFXzMyX0JJVFMgPSAtMjE0NzQ4MzY0ODsKCSAgICBJbnRlZ2VyLk1BWF9WQUxVRSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgIHJldHVybiBJbnRlZ2VyOwoJfSgpKTsKCUludGVnZXIkMS5kZWZhdWx0ID0gSW50ZWdlcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdEFycmF5JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDggPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheXNfMSQxID0gQXJyYXlzJDE7Cgl2YXIgSW50ZWdlcl8xJDIgPSBJbnRlZ2VyJDE7Cgl2YXIgU3lzdGVtXzEkNCA9IFN5c3RlbSQxOwoJLyoqCgkgKiA8cD5BIHNpbXBsZSwgZmFzdCBhcnJheSBvZiBiaXRzLCByZXByZXNlbnRlZCBjb21wYWN0bHkgYnkgYW4gYXJyYXkgb2YgaW50cyBpbnRlcm5hbGx5LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgQml0QXJyYXkgLyppbXBsZW1lbnRzIENsb25lYWJsZSovID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHsKCSAgICAvLyAgIHRoaXMuc2l6ZSA9IDAKCSAgICAvLyAgIHRoaXMuYml0cyA9IG5ldyBJbnQzMkFycmF5KDEpCgkgICAgLy8gfQoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcihzaXplPzogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh1bmRlZmluZWQgPT09IHNpemUpIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gMAoJICAgIC8vICAgfSBlbHNlIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gc2l6ZQoJICAgIC8vICAgfQoJICAgIC8vICAgdGhpcy5iaXRzID0gdGhpcy5tYWtlQXJyYXkoc2l6ZSkKCSAgICAvLyB9CgkgICAgLy8gRm9yIHRlc3Rpbmcgb25seQoJICAgIGZ1bmN0aW9uIEJpdEFycmF5KHNpemUgLyppbnQqLywgYml0cykgewoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBzaXplKSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSAwOwoJICAgICAgICAgICAgdGhpcy5iaXRzID0gbmV3IEludDMyQXJyYXkoMSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSBzaXplOwoJICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gQml0QXJyYXkubWFrZUFycmF5KHNpemUpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH0KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZTsKCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXRTaXplSW5CeXRlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKHRoaXMuc2l6ZSArIDcpIC8gOCk7CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZW5zdXJlQ2FwYWNpdHkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmIChzaXplID4gdGhpcy5iaXRzLmxlbmd0aCAqIDMyKSB7CgkgICAgICAgICAgICB2YXIgbmV3Qml0cyA9IEJpdEFycmF5Lm1ha2VBcnJheShzaXplKTsKCSAgICAgICAgICAgIFN5c3RlbV8xJDQuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5iaXRzLCAwLCBuZXdCaXRzLCAwLCB0aGlzLmJpdHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBpIGJpdCB0byBnZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGJpdCBpIGlzIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiAodGhpcy5iaXRzW01hdGguZmxvb3IoaSAvIDMyKV0gJiAoMSA8PCAoaSAmIDB4MUYpKSkgIT09IDA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHRoaXMuYml0c1tNYXRoLmZsb29yKGkgLyAzMildIHw9IDEgPDwgKGkgJiAweDFGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEZsaXBzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5mbGlwID0gZnVuY3Rpb24gKGkgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSBePSAxIDw8IChpICYgMHgxRik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBmaXJzdCBiaXQgdG8gY2hlY2sKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIGZpcnN0IGJpdCB0aGF0IGlzIHNldCwgc3RhcnRpbmcgZnJvbSB0aGUgZ2l2ZW4gaW5kZXgsIG9yIHNpemUgaWYgbm9uZSBhcmUgc2V0CgkgICAgICogIGF0IG9yIGJleW9uZCB0aGlzIGdpdmVuIGluZGV4CgkgICAgICogQHNlZSAjZ2V0TmV4dFVuc2V0KGludCkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0TmV4dFNldCA9IGZ1bmN0aW9uIChmcm9tIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLnNpemU7CgkgICAgICAgIGlmIChmcm9tID49IHNpemUpIHsKCSAgICAgICAgICAgIHJldHVybiBzaXplOwoJICAgICAgICB9CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IE1hdGguZmxvb3IoZnJvbSAvIDMyKTsKCSAgICAgICAgdmFyIGN1cnJlbnRCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgLy8gbWFzayBvZmYgbGVzc2VyIGJpdHMgZmlyc3QKCSAgICAgICAgY3VycmVudEJpdHMgJj0gfigoMSA8PCAoZnJvbSAmIDB4MUYpKSAtIDEpOwoJICAgICAgICB2YXIgbGVuZ3RoID0gYml0cy5sZW5ndGg7CgkgICAgICAgIHdoaWxlIChjdXJyZW50Qml0cyA9PT0gMCkgewoJICAgICAgICAgICAgaWYgKCsrYml0c09mZnNldCA9PT0gbGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIHNpemU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjdXJyZW50Qml0cyA9IGJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBpbmRleCB0byBzdGFydCBsb29raW5nIGZvciB1bnNldCBiaXQKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgdW5zZXQgYml0LCBvciB7QGNvZGUgc2l6ZX0gaWYgbm9uZSBhcmUgdW5zZXQgdW50aWwgdGhlIGVuZAoJICAgICAqIEBzZWUgI2dldE5leHRTZXQoaW50KQoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXROZXh0VW5zZXQgPSBmdW5jdGlvbiAoZnJvbSAvKmludCovKSB7CgkgICAgICAgIHZhciBzaXplID0gdGhpcy5zaXplOwoJICAgICAgICBpZiAoZnJvbSA+PSBzaXplKSB7CgkgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIGJpdHNPZmZzZXQgPSBNYXRoLmZsb29yKGZyb20gLyAzMik7CgkgICAgICAgIHZhciBjdXJyZW50Qml0cyA9IH5iaXRzW2JpdHNPZmZzZXRdOwoJICAgICAgICAvLyBtYXNrIG9mZiBsZXNzZXIgYml0cyBmaXJzdAoJICAgICAgICBjdXJyZW50Qml0cyAmPSB+KCgxIDw8IChmcm9tICYgMHgxRikpIC0gMSk7CgkgICAgICAgIHZhciBsZW5ndGggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgd2hpbGUgKGN1cnJlbnRCaXRzID09PSAwKSB7CgkgICAgICAgICAgICBpZiAoKytiaXRzT2Zmc2V0ID09PSBsZW5ndGgpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGN1cnJlbnRCaXRzID0gfmJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgYmxvY2sgb2YgMzIgYml0cywgc3RhcnRpbmcgYXQgYml0IGkuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gaSBmaXJzdCBiaXQgdG8gc2V0CgkgICAgICogQHBhcmFtIG5ld0JpdHMgdGhlIG5ldyB2YWx1ZSBvZiB0aGUgbmV4dCAzMiBiaXRzLiBOb3RlIGFnYWluIHRoYXQgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdAoJICAgICAqIGNvcnJlc3BvbmRzIHRvIGJpdCBpLCB0aGUgbmV4dC1sZWFzdC1zaWduaWZpY2FudCB0byBpKzEsIGFuZCBzbyBvbi4KCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0QnVsayA9IGZ1bmN0aW9uIChpIC8qaW50Ki8sIG5ld0JpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgcmFuZ2Ugb2YgYml0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydCBzdGFydCBvZiByYW5nZSwgaW5jbHVzaXZlLgoJICAgICAqIEBwYXJhbSBlbmQgZW5kIG9mIHJhbmdlLCBleGNsdXNpdmUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0UmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQgLyppbnQqLywgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIGVuZC0tOyAvLyB3aWxsIGJlIGVhc2llciB0byB0cmVhdCB0aGlzIGFzIHRoZSBsYXN0IGFjdHVhbGx5IHNldCBiaXQgLS0gaW5jbHVzaXZlCgkgICAgICAgIHZhciBmaXJzdEludCA9IE1hdGguZmxvb3Ioc3RhcnQgLyAzMik7CgkgICAgICAgIHZhciBsYXN0SW50ID0gTWF0aC5mbG9vcihlbmQgLyAzMik7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICBmb3IgKHZhciBpID0gZmlyc3RJbnQ7IGkgPD0gbGFzdEludDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgZmlyc3RCaXQgPSBpID4gZmlyc3RJbnQgPyAwIDogc3RhcnQgJiAweDFGOwoJICAgICAgICAgICAgdmFyIGxhc3RCaXQgPSBpIDwgbGFzdEludCA/IDMxIDogZW5kICYgMHgxRjsKCSAgICAgICAgICAgIC8vIE9uZXMgZnJvbSBmaXJzdEJpdCB0byBsYXN0Qml0LCBpbmNsdXNpdmUKCSAgICAgICAgICAgIHZhciBtYXNrID0gKDIgPDwgbGFzdEJpdCkgLSAoMSA8PCBmaXJzdEJpdCk7CgkgICAgICAgICAgICBiaXRzW2ldIHw9IG1hc2s7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbWF4ID0gdGhpcy5iaXRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGJpdHNbaV0gPSAwOwoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBFZmZpY2llbnQgbWV0aG9kIHRvIGNoZWNrIGlmIGEgcmFuZ2Ugb2YgYml0cyBpcyBzZXQsIG9yIG5vdCBzZXQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnQgc3RhcnQgb2YgcmFuZ2UsIGluY2x1c2l2ZS4KCSAgICAgKiBAcGFyYW0gZW5kIGVuZCBvZiByYW5nZSwgZXhjbHVzaXZlCgkgICAgICogQHBhcmFtIHZhbHVlIGlmIHRydWUsIGNoZWNrcyB0aGF0IGJpdHMgaW4gcmFuZ2UgYXJlIHNldCwgb3RoZXJ3aXNlIGNoZWNrcyB0aGF0IHRoZXkgYXJlIG5vdCBzZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGFsbCBiaXRzIGFyZSBzZXQgb3Igbm90IHNldCBpbiByYW5nZSwgYWNjb3JkaW5nIHRvIHZhbHVlIGFyZ3VtZW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgZW5kIGlzIGxlc3MgdGhhbiBzdGFydCBvciB0aGUgcmFuZ2UgaXMgbm90IGNvbnRhaW5lZCBpbiB0aGUgYXJyYXkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuaXNSYW5nZSA9IGZ1bmN0aW9uIChzdGFydCAvKmludCovLCBlbmQgLyppbnQqLywgdmFsdWUpIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIGVtcHR5IHJhbmdlIG1hdGNoZXMKCSAgICAgICAgfQoJICAgICAgICBlbmQtLTsgLy8gd2lsbCBiZSBlYXNpZXIgdG8gdHJlYXQgdGhpcyBhcyB0aGUgbGFzdCBhY3R1YWxseSBzZXQgYml0IC0tIGluY2x1c2l2ZQoJICAgICAgICB2YXIgZmlyc3RJbnQgPSBNYXRoLmZsb29yKHN0YXJ0IC8gMzIpOwoJICAgICAgICB2YXIgbGFzdEludCA9IE1hdGguZmxvb3IoZW5kIC8gMzIpOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0SW50OyBpIDw9IGxhc3RJbnQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGZpcnN0Qml0ID0gaSA+IGZpcnN0SW50ID8gMCA6IHN0YXJ0ICYgMHgxRjsKCSAgICAgICAgICAgIHZhciBsYXN0Qml0ID0gaSA8IGxhc3RJbnQgPyAzMSA6IGVuZCAmIDB4MUY7CgkgICAgICAgICAgICAvLyBPbmVzIGZyb20gZmlyc3RCaXQgdG8gbGFzdEJpdCwgaW5jbHVzaXZlCgkgICAgICAgICAgICB2YXIgbWFzayA9ICgyIDw8IGxhc3RCaXQpIC0gKDEgPDwgZmlyc3RCaXQpICYgMHhGRkZGRkZGRjsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiAmIDB4RkZGRkZGRkYgYWRkZWQgdG8gZGlzY2FyZCBhbnl0aGluZyBhZnRlciAzMiBiaXRzLCBhcyBFUyBoYXMgNTMgYml0cwoJICAgICAgICAgICAgLy8gUmV0dXJuIGZhbHNlIGlmIHdlJ3JlIGxvb2tpbmcgZm9yIDFzIGFuZCB0aGUgbWFza2VkIGJpdHNbaV0gaXNuJ3QgYWxsIDFzIChpczogdGhhdCwKCSAgICAgICAgICAgIC8vIGVxdWFscyB0aGUgbWFzaywgb3Igd2UncmUgbG9va2luZyBmb3IgMHMgYW5kIHRoZSBtYXNrZWQgcG9ydGlvbiBpcyBub3QgYWxsIDBzCgkgICAgICAgICAgICBpZiAoKGJpdHNbaV0gJiBtYXNrKSAhPT0gKHZhbHVlID8gbWFzayA6IDApKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0cnVlOwoJICAgIH07CgkgICAgQml0QXJyYXkucHJvdG90eXBlLmFwcGVuZEJpdCA9IGZ1bmN0aW9uIChiaXQpIHsKCSAgICAgICAgdGhpcy5lbnN1cmVDYXBhY2l0eSh0aGlzLnNpemUgKyAxKTsKCSAgICAgICAgaWYgKGJpdCkgewoJICAgICAgICAgICAgdGhpcy5iaXRzW01hdGguZmxvb3IodGhpcy5zaXplIC8gMzIpXSB8PSAxIDw8ICh0aGlzLnNpemUgJiAweDFGKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLnNpemUrKzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFwcGVuZHMgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdHMsIGZyb20gdmFsdWUsIGluIG9yZGVyIGZyb20gbW9zdC1zaWduaWZpY2FudCB0bwoJICAgICAqIGxlYXN0LXNpZ25pZmljYW50LiBGb3IgZXhhbXBsZSwgYXBwZW5kaW5nIDYgYml0cyBmcm9tIDB4MDAwMDAxRSB3aWxsIGFwcGVuZCB0aGUgYml0cwoJICAgICAqIDAsIDEsIDEsIDEsIDEsIDAgaW4gdGhhdCBvcmRlci4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB2YWx1ZSB7QGNvZGUgaW50fSBjb250YWluaW5nIGJpdHMgdG8gYXBwZW5kCgkgICAgICogQHBhcmFtIG51bUJpdHMgYml0cyBmcm9tIHZhbHVlIHRvIGFwcGVuZAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5hcHBlbmRCaXRzID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICBpZiAobnVtQml0cyA8IDAgfHwgbnVtQml0cyA+IDMyKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOC5kZWZhdWx0KCdOdW0gYml0cyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMzInKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmVuc3VyZUNhcGFjaXR5KHRoaXMuc2l6ZSArIG51bUJpdHMpOwoJICAgICAgICAvLyBjb25zdCBhcHBlbmRCaXQgPSB0aGlzLmFwcGVuZEJpdDsKCSAgICAgICAgZm9yICh2YXIgbnVtQml0c0xlZnQgPSBudW1CaXRzOyBudW1CaXRzTGVmdCA+IDA7IG51bUJpdHNMZWZ0LS0pIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KCgodmFsdWUgPj4gKG51bUJpdHNMZWZ0IC0gMSkpICYgMHgwMSkgPT09IDEpOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuYXBwZW5kQml0QXJyYXkgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdmFyIG90aGVyU2l6ZSA9IG90aGVyLnNpemU7CgkgICAgICAgIHRoaXMuZW5zdXJlQ2FwYWNpdHkodGhpcy5zaXplICsgb3RoZXJTaXplKTsKCSAgICAgICAgLy8gY29uc3QgYXBwZW5kQml0ID0gdGhpcy5hcHBlbmRCaXQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3RoZXJTaXplOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KG90aGVyLmdldChpKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gb3RoZXIuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDguZGVmYXVsdCgnU2l6ZXMgZG9uXCd0IG1hdGNoJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGJpdHMubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgLy8gVGhlIGxhc3QgaW50IGNvdWxkIGJlIGluY29tcGxldGUgKGkuZS4gbm90IGhhdmUgMzIgYml0cyBpbgoJICAgICAgICAgICAgLy8gaXQpIGJ1dCB0aGVyZSBpcyBubyBwcm9ibGVtIHNpbmNlIDAgWE9SIDAgPT0gMC4KCSAgICAgICAgICAgIGJpdHNbaV0gXj0gb3RoZXIuYml0c1tpXTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0T2Zmc2V0IGZpcnN0IGJpdCB0byBzdGFydCB3cml0aW5nCgkgICAgICogQHBhcmFtIGFycmF5IGFycmF5IHRvIHdyaXRlIGludG8uIEJ5dGVzIGFyZSB3cml0dGVuIG1vc3Qtc2lnbmlmaWNhbnQgYnl0ZSBmaXJzdC4gVGhpcyBpcyB0aGUgb3Bwb3NpdGUKCSAgICAgKiAgb2YgdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uLCB3aGljaCBpcyBleHBvc2VkIGJ5IHtAbGluayAjZ2V0Qml0QXJyYXkoKX0KCSAgICAgKiBAcGFyYW0gb2Zmc2V0IHBvc2l0aW9uIGluIGFycmF5IHRvIHN0YXJ0IHdyaXRpbmcKCSAgICAgKiBAcGFyYW0gbnVtQnl0ZXMgaG93IG1hbnkgYnl0ZXMgdG8gd3JpdGUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUudG9CeXRlcyA9IGZ1bmN0aW9uIChiaXRPZmZzZXQgLyppbnQqLywgYXJyYXksIG9mZnNldCAvKmludCovLCBudW1CeXRlcyAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtQnl0ZXM7IGkrKykgewoJICAgICAgICAgICAgdmFyIHRoZUJ5dGUgPSAwOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA4OyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXQoYml0T2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICB0aGVCeXRlIHw9IDEgPDwgKDcgLSBqKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyBpXSA9IC8qKGJ5dGUpKi8gdGhlQnl0ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB1bmRlcmx5aW5nIGFycmF5IG9mIGludHMuIFRoZSBmaXJzdCBlbGVtZW50IGhvbGRzIHRoZSBmaXJzdCAzMiBiaXRzLCBhbmQgdGhlIGxlYXN0CgkgICAgICogICAgICAgICBzaWduaWZpY2FudCBiaXQgaXMgYml0IDAuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmdldEJpdEFycmF5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV2ZXJzZXMgYWxsIGJpdHMgaW4gdGhlIGFycmF5LgoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3Qml0cyA9IG5ldyBJbnQzMkFycmF5KHRoaXMuYml0cy5sZW5ndGgpOwoJICAgICAgICAvLyByZXZlcnNlIGFsbCBpbnQncyBmaXJzdAoJICAgICAgICB2YXIgbGVuID0gTWF0aC5mbG9vcigodGhpcy5zaXplIC0gMSkgLyAzMik7CgkgICAgICAgIHZhciBvbGRCaXRzTGVuID0gbGVuICsgMTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2xkQml0c0xlbjsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeCA9IGJpdHNbaV07CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDEpICYgMHg1NTU1NTU1NSkgfCAoKHggJiAweDU1NTU1NTU1KSA8PCAxKTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMikgJiAweDMzMzMzMzMzKSB8ICgoeCAmIDB4MzMzMzMzMzMpIDw8IDIpOwoJICAgICAgICAgICAgeCA9ICgoeCA+PiA0KSAmIDB4MGYwZjBmMGYpIHwgKCh4ICYgMHgwZjBmMGYwZikgPDwgNCk7CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDgpICYgMHgwMGZmMDBmZikgfCAoKHggJiAweDAwZmYwMGZmKSA8PCA4KTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMTYpICYgMHgwMDAwZmZmZikgfCAoKHggJiAweDAwMDBmZmZmKSA8PCAxNik7CgkgICAgICAgICAgICBuZXdCaXRzW2xlbiAtIGldID0gLyooaW50KSovIHg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm93IGNvcnJlY3QgdGhlIGludCdzIGlmIHRoZSBiaXQgc2l6ZSBpc24ndCBhIG11bHRpcGxlIG9mIDMyCgkgICAgICAgIGlmICh0aGlzLnNpemUgIT09IG9sZEJpdHNMZW4gKiAzMikgewoJICAgICAgICAgICAgdmFyIGxlZnRPZmZzZXQgPSBvbGRCaXRzTGVuICogMzIgLSB0aGlzLnNpemU7CgkgICAgICAgICAgICB2YXIgY3VycmVudEludCA9IG5ld0JpdHNbMF0gPj4+IGxlZnRPZmZzZXQ7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IG9sZEJpdHNMZW47IGkrKykgewoJICAgICAgICAgICAgICAgIHZhciBuZXh0SW50ID0gbmV3Qml0c1tpXTsKCSAgICAgICAgICAgICAgICBjdXJyZW50SW50IHw9IG5leHRJbnQgPDwgKDMyIC0gbGVmdE9mZnNldCk7CgkgICAgICAgICAgICAgICAgbmV3Qml0c1tpIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICAgICAgICAgIGN1cnJlbnRJbnQgPSBuZXh0SW50ID4+PiBsZWZ0T2Zmc2V0OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgbmV3Qml0c1tvbGRCaXRzTGVuIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICBCaXRBcnJheS5tYWtlQXJyYXkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW50MzJBcnJheShNYXRoLmZsb29yKChzaXplICsgMzEpIC8gMzIpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdEFycmF5KSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IG90aGVyLnNpemUgJiYgQXJyYXlzXzEkMS5kZWZhdWx0LmVxdWFscyh0aGlzLmJpdHMsIG90aGVyLmJpdHMpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogdGhpcy5zaXplICsgQXJyYXlzXzEkMS5kZWZhdWx0Lmhhc2hDb2RlKHRoaXMuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcmVzdWx0ID0gJyc7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBzaXplID0gdGhpcy5zaXplOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICBpZiAoKGkgJiAweDA3KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnICc7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5nZXQoaSkgPyAnWCcgOiAnLic7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0QXJyYXkodGhpcy5zaXplLCB0aGlzLmJpdHMuc2xpY2UoKSk7CgkgICAgfTsKCSAgICByZXR1cm4gQml0QXJyYXk7Cgl9KCkpOwoJQml0QXJyYXkkMS5kZWZhdWx0ID0gQml0QXJyYXk7CgoJdmFyIEJpdE1hdHJpeCQxID0ge307CgoJdmFyIFN0cmluZ0J1aWxkZXIkMSA9IHt9OwoKCXZhciBTdHJpbmdVdGlscyQxID0ge307CgoJdmFyIERlY29kZUhpbnRUeXBlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERlY29kZUhpbnRUeXBlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIHR5cGUgb2YgaGludCB0aGF0IGEgY2FsbGVyIG1heSBwYXNzIHRvIGEgYmFyY29kZSByZWFkZXIgdG8gaGVscCBpdAoJICogbW9yZSBxdWlja2x5IG9yIGFjY3VyYXRlbHkgZGVjb2RlIGl0LiBJdCBpcyB1cCB0byBpbXBsZW1lbnRhdGlvbnMgdG8gZGVjaWRlIHdoYXQsCgkgKiBpZiBhbnl0aGluZywgdG8gZG8gd2l0aCB0aGUgaW5mb3JtYXRpb24gdGhhdCBpcyBzdXBwbGllZC4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBzZWUgUmVhZGVyI2RlY29kZShCaW5hcnlCaXRtYXAsamF2YS51dGlsLk1hcCkKCSAqLwoJdmFyIERlY29kZUhpbnRUeXBlOwoJKGZ1bmN0aW9uIChEZWNvZGVIaW50VHlwZSkgewoJICAgIC8qKgoJICAgICAqIFVuc3BlY2lmaWVkLCBhcHBsaWNhdGlvbi1zcGVjaWZpYyBoaW50LiBNYXBzIHRvIGFuIHVuc3BlY2lmaWVkIHtAbGluayBPYmplY3R9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJPVEhFUiJdID0gMF0gPSAiT1RIRVIiOyAvKihPYmplY3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJbWFnZSBpcyBhIHB1cmUgbW9ub2Nocm9tZSBpbWFnZSBvZiBhIGJhcmNvZGUuIERvZXNuJ3QgbWF0dGVyIHdoYXQgaXQgbWFwcyB0bzsKCSAgICAgKiB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlBVUkVfQkFSQ09ERSJdID0gMV0gPSAiUFVSRV9CQVJDT0RFIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEltYWdlIGlzIGtub3duIHRvIGJlIG9mIG9uZSBvZiBhIGZldyBwb3NzaWJsZSBmb3JtYXRzLgoJICAgICAqIE1hcHMgdG8gYSB7QGxpbmsgTGlzdH0gb2Yge0BsaW5rIEJhcmNvZGVGb3JtYXR9cy4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiUE9TU0lCTEVfRk9STUFUUyJdID0gMl0gPSAiUE9TU0lCTEVfRk9STUFUUyI7IC8qKExpc3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVuZCBtb3JlIHRpbWUgdG8gdHJ5IHRvIGZpbmQgYSBiYXJjb2RlOyBvcHRpbWl6ZSBmb3IgYWNjdXJhY3ksIG5vdCBzcGVlZC4KCSAgICAgKiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87IHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiVFJZX0hBUkRFUiJdID0gM10gPSAiVFJZX0hBUkRFUiI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVjaWZpZXMgd2hhdCBjaGFyYWN0ZXIgZW5jb2RpbmcgdG8gdXNlIHdoZW4gZGVjb2RpbmcsIHdoZXJlIGFwcGxpY2FibGUgKHR5cGUgU3RyaW5nKQoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJDSEFSQUNURVJfU0VUIl0gPSA0XSA9ICJDSEFSQUNURVJfU0VUIjsgLyooU3RyaW5nLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQWxsb3dlZCBsZW5ndGhzIG9mIGVuY29kZWQgZGF0YSAtLSByZWplY3QgYW55dGhpbmcgZWxzZS4gTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfTEVOR1RIUyJdID0gNV0gPSAiQUxMT1dFRF9MRU5HVEhTIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEFzc3VtZSBDb2RlIDM5IGNvZGVzIGVtcGxveSBhIGNoZWNrIGRpZ2l0LiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87CgkgICAgICogdXNlIHtAbGluayBCb29sZWFuI1RSVUV9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJBU1NVTUVfQ09ERV8zOV9DSEVDS19ESUdJVCJdID0gNl0gPSAiQVNTVU1FX0NPREVfMzlfQ0hFQ0tfRElHSVQiOyAvKihWb2lkLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQXNzdW1lIHRoZSBiYXJjb2RlIGlzIGJlaW5nIHByb2Nlc3NlZCBhcyBhIEdTMSBiYXJjb2RlLCBhbmQgbW9kaWZ5IGJlaGF2aW9yIGFzIG5lZWRlZC4KCSAgICAgKiBGb3IgZXhhbXBsZSB0aGlzIGFmZmVjdHMgRk5DMSBoYW5kbGluZyBmb3IgQ29kZSAxMjggKGFrYSBHUzEtMTI4KS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOwoJICAgICAqIHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiQVNTVU1FX0dTMSJdID0gN10gPSAiQVNTVU1FX0dTMSI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJZiB0cnVlLCByZXR1cm4gdGhlIHN0YXJ0IGFuZCBlbmQgZGlnaXRzIGluIGEgQ29kYWJhciBiYXJjb2RlIGluc3RlYWQgb2Ygc3RyaXBwaW5nIHRoZW0uIFRoZXkKCSAgICAgKiBhcmUgYWxwaGEsIHdoZXJlYXMgdGhlIHJlc3QgYXJlIG51bWVyaWMuIEJ5IGRlZmF1bHQsIHRoZXkgYXJlIHN0cmlwcGVkLCBidXQgdGhpcyBjYXVzZXMgdGhlbQoJICAgICAqIHRvIG5vdCBiZS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOyB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlJFVFVSTl9DT0RBQkFSX1NUQVJUX0VORCJdID0gOF0gPSAiUkVUVVJOX0NPREFCQVJfU1RBUlRfRU5EIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIFRoZSBjYWxsZXIgbmVlZHMgdG8gYmUgbm90aWZpZWQgdmlhIGNhbGxiYWNrIHdoZW4gYSBwb3NzaWJsZSB7QGxpbmsgUmVzdWx0UG9pbnR9CgkgICAgICogaXMgZm91bmQuIE1hcHMgdG8gYSB7QGxpbmsgUmVzdWx0UG9pbnRDYWxsYmFja30uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIk5FRURfUkVTVUxUX1BPSU5UX0NBTExCQUNLIl0gPSA5XSA9ICJORUVEX1JFU1VMVF9QT0lOVF9DQUxMQkFDSyI7IC8qKFJlc3VsdFBvaW50Q2FsbGJhY2suY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBBbGxvd2VkIGV4dGVuc2lvbiBsZW5ndGhzIGZvciBFQU4gb3IgVVBDIGJhcmNvZGVzLiBPdGhlciBmb3JtYXRzIHdpbGwgaWdub3JlIHRoaXMuCgkgICAgICogTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0gb2YgdGhlIGFsbG93ZWQgZXh0ZW5zaW9uIGxlbmd0aHMsIGZvciBleGFtcGxlIFsyXSwgWzVdLCBvciBbMiwgNV0uCgkgICAgICogSWYgaXQgaXMgb3B0aW9uYWwgdG8gaGF2ZSBhbiBleHRlbnNpb24sIGRvIG5vdCBzZXQgdGhpcyBoaW50LiBJZiB0aGlzIGlzIHNldCwKCSAgICAgKiBhbmQgYSBVUEMgb3IgRUFOIGJhcmNvZGUgaXMgZm91bmQgYnV0IGFuIGV4dGVuc2lvbiBpcyBub3QsIHRoZW4gbm8gcmVzdWx0IHdpbGwgYmUgcmV0dXJuZWQKCSAgICAgKiBhdCBhbGwuCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfRUFOX0VYVEVOU0lPTlMiXSA9IDEwXSA9ICJBTExPV0VEX0VBTl9FWFRFTlNJT05TIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8vIEVuZCBvZiBlbnVtZXJhdGlvbiB2YWx1ZXMuCgkgICAgLyoqCgkgICAgICogRGF0YSB0eXBlIHRoZSBoaW50IGlzIGV4cGVjdGluZy4KCSAgICAgKiBBbW9uZyB0aGUgcG9zc2libGUgdmFsdWVzIHRoZSB7QGxpbmsgVm9pZH0gc3RhbmRzIG91dCBhcyBiZWluZyB1c2VkIGZvcgoJICAgICAqIGhpbnRzIHRoYXQgZG8gbm90IGV4cGVjdCBhIHZhbHVlIHRvIGJlIHN1cHBsaWVkIChmbGFnIGhpbnRzKS4gU3VjaCBoaW50cwoJICAgICAqIHdpbGwgcG9zc2libHkgaGF2ZSB0aGVpciB2YWx1ZSBpZ25vcmVkLCBvciByZXBsYWNlZCBieSBhCgkgICAgICoge0BsaW5rIEJvb2xlYW4jVFJVRX0uIEhpbnQgc3VwcGxpZXJzIHNob3VsZCBwcm9iYWJseSB1c2UKCSAgICAgKiB7QGxpbmsgQm9vbGVhbiNUUlVFfSBhcyBkaXJlY3RlZCBieSB0aGUgYWN0dWFsIGhpbnQgZG9jdW1lbnRhdGlvbi4KCSAgICAgKi8KCSAgICAvLyBwcml2YXRlIHZhbHVlVHlwZTogQ2xhc3M8Pz4KCSAgICAvLyBEZWNvZGVIaW50VHlwZSh2YWx1ZVR5cGU6IENsYXNzPD8+KSB7CgkgICAgLy8gICB0aGlzLnZhbHVlVHlwZSA9IHZhbHVlVHlwZQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgZ2V0VmFsdWVUeXBlKCk6IENsYXNzPD8+IHsKCSAgICAvLyAgIHJldHVybiB2YWx1ZVR5cGUKCSAgICAvLyB9Cgl9KShEZWNvZGVIaW50VHlwZSB8fCAoRGVjb2RlSGludFR5cGUgPSB7fSkpOwoJRGVjb2RlSGludFR5cGUkMS5kZWZhdWx0ID0gRGVjb2RlSGludFR5cGU7CgoJdmFyIENoYXJhY3RlclNldEVDSSA9IHt9OwoKCXZhciBGb3JtYXRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGb3JtYXRFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDcgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRm9ybWF0RXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRmKEZvcm1hdEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBGb3JtYXRFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgRm9ybWF0RXhjZXB0aW9uLmdldEZvcm1hdEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEV4Y2VwdGlvbigpOwoJICAgIH07CgkgICAgRm9ybWF0RXhjZXB0aW9uLmtpbmQgPSAnRm9ybWF0RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRm9ybWF0RXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ3LmRlZmF1bHQpKTsKCUZvcm1hdEV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBGb3JtYXRFeGNlcHRpb247CgoJKGZ1bmN0aW9uIChleHBvcnRzKSB7CgkvKgoJICogQ29weXJpZ2h0IDIwMDggWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCWV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHZvaWQgMDsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xID0gRm9ybWF0RXhjZXB0aW9uJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsqLwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJdmFyIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnM7CgkoZnVuY3Rpb24gKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMpIHsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwNDM3Il0gPSAwXSA9ICJDcDQzNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEiXSA9IDFdID0gIklTTzg4NTlfMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzIiXSA9IDJdID0gIklTTzg4NTlfMiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzMiXSA9IDNdID0gIklTTzg4NTlfMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzQiXSA9IDRdID0gIklTTzg4NTlfNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzUiXSA9IDVdID0gIklTTzg4NTlfNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzYiXSA9IDZdID0gIklTTzg4NTlfNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzciXSA9IDddID0gIklTTzg4NTlfNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzgiXSA9IDhdID0gIklTTzg4NTlfOCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzkiXSA9IDldID0gIklTTzg4NTlfOSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEwIl0gPSAxMF0gPSAiSVNPODg1OV8xMCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzExIl0gPSAxMV0gPSAiSVNPODg1OV8xMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEzIl0gPSAxMl0gPSAiSVNPODg1OV8xMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE0Il0gPSAxM10gPSAiSVNPODg1OV8xNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE1Il0gPSAxNF0gPSAiSVNPODg1OV8xNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE2Il0gPSAxNV0gPSAiSVNPODg1OV8xNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJTSklTIl0gPSAxNl0gPSAiU0pJUyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTAiXSA9IDE3XSA9ICJDcDEyNTAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQ3AxMjUxIl0gPSAxOF0gPSAiQ3AxMjUxIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwMTI1MiJdID0gMTldID0gIkNwMTI1MiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTYiXSA9IDIwXSA9ICJDcDEyNTYiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siVW5pY29kZUJpZ1VubWFya2VkIl0gPSAyMV0gPSAiVW5pY29kZUJpZ1VubWFya2VkIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIlVURjgiXSA9IDIyXSA9ICJVVEY4IjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkFTQ0lJIl0gPSAyM10gPSAiQVNDSUkiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQmlnNSJdID0gMjRdID0gIkJpZzUiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siR0IxODAzMCJdID0gMjVdID0gIkdCMTgwMzAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siRVVDX0tSIl0gPSAyNl0gPSAiRVVDX0tSIjsKCX0pKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgPSBleHBvcnRzLkNoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgfHwgKGV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHt9KSk7CgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIENoYXJhY3RlciBTZXQgRUNJLCBhY2NvcmRpbmcgdG8gIkV4dGVuZGVkIENoYW5uZWwgSW50ZXJwcmV0YXRpb25zIiA1LjMuMS4xCgkgKiBvZiBJU08gMTgwMDQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIENoYXJhY3RlclNldEVDSSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBDaGFyYWN0ZXJTZXRFQ0kodmFsdWVJZGVudGlmaWVyLCB2YWx1ZXNQYXJhbSwgbmFtZSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG90aGVyRW5jb2RpbmdOYW1lcyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgb3RoZXJFbmNvZGluZ05hbWVzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmFsdWVJZGVudGlmaWVyID0gdmFsdWVJZGVudGlmaWVyOwoJICAgICAgICB0aGlzLm5hbWUgPSBuYW1lOwoJICAgICAgICBpZiAodHlwZW9mIHZhbHVlc1BhcmFtID09PSAnbnVtYmVyJykgewoJICAgICAgICAgICAgdGhpcy52YWx1ZXMgPSBJbnQzMkFycmF5LmZyb20oW3ZhbHVlc1BhcmFtXSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlc1BhcmFtOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzOwoJICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVfSURFTlRJRklFUl9UT19FQ0kuc2V0KHZhbHVlSWRlbnRpZmllciwgdGhpcyk7CgkgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQobmFtZSwgdGhpcyk7CgkgICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlczsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gdmFsdWVzLmxlbmd0aDsgaSAhPT0gbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgdmFyIHYgPSB2YWx1ZXNbaV07CgkgICAgICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVTX1RPX0VDSS5zZXQodiwgdGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIG90aGVyRW5jb2RpbmdOYW1lc18xID0gX192YWx1ZXMob3RoZXJFbmNvZGluZ05hbWVzKSwgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKTsgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZTsgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBvdGhlck5hbWUgPSBvdGhlckVuY29kaW5nTmFtZXNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQob3RoZXJOYW1lLCB0aGlzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKG90aGVyRW5jb2RpbmdOYW1lc18xXzEgJiYgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZSAmJiAoX2EgPSBvdGhlckVuY29kaW5nTmFtZXNfMS5yZXR1cm4pKSBfYS5jYWxsKG90aGVyRW5jb2RpbmdOYW1lc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgIH0KCSAgICAvLyBDaGFyYWN0ZXJTZXRFQ0kodmFsdWU6IG51bWJlciAvKmludCovKSB7CgkgICAgLy8gICB0aGlzKG5ldyBJbnQzMkFycmF5IHt2YWx1ZX0pCgkgICAgLy8gfQoJICAgIC8vIENoYXJhY3RlclNldEVDSSh2YWx1ZTogbnVtYmVyIC8qaW50Ki8sIFN0cmluZy4uLiBvdGhlckVuY29kaW5nTmFtZXMpIHsKCSAgICAvLyAgIHRoaXMudmFsdWVzID0gbmV3IEludDMyQXJyYXkge3ZhbHVlfQoJICAgIC8vICAgdGhpcy5vdGhlckVuY29kaW5nTmFtZXMgPSBvdGhlckVuY29kaW5nTmFtZXMKCSAgICAvLyB9CgkgICAgLy8gQ2hhcmFjdGVyU2V0RUNJKHZhbHVlczogSW50MzJBcnJheSwgU3RyaW5nLi4uIG90aGVyRW5jb2RpbmdOYW1lcykgewoJICAgIC8vICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXMKCSAgICAvLyAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzCgkgICAgLy8gfQoJICAgIENoYXJhY3RlclNldEVDSS5wcm90b3R5cGUuZ2V0VmFsdWVJZGVudGlmaWVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUlkZW50aWZpZXI7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldE5hbWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm5hbWU7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZXNbMF07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmFsdWUgY2hhcmFjdGVyIHNldCBFQ0kgdmFsdWUKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBDaGFyYWN0ZXJTZXRFQ0l9IHJlcHJlc2VudGluZyBFQ0kgb2YgZ2l2ZW4gdmFsdWUsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwgYnV0CgkgICAgICogICB1bnN1cHBvcnRlZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIEVDSSB2YWx1ZSBpcyBpbnZhbGlkCgkgICAgICovCgkgICAgQ2hhcmFjdGVyU2V0RUNJLmdldENoYXJhY3RlclNldEVDSUJ5VmFsdWUgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPCAwIHx8IHZhbHVlID49IDkwMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGNoYXJhY3RlclNldCA9IENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJLmdldCh2YWx1ZSk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNoYXJhY3RlclNldCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGNoYXJhY3RlclNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBuYW1lIGNoYXJhY3RlciBzZXQgRUNJIGVuY29kaW5nIG5hbWUKCSAgICAgKiBAcmV0dXJuIENoYXJhY3RlclNldEVDSSByZXByZXNlbnRpbmcgRUNJIGZvciBjaGFyYWN0ZXIgZW5jb2RpbmcsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwKCSAgICAgKiAgIGJ1dCB1bnN1cHBvcnRlZAoJICAgICAqLwoJICAgIENoYXJhY3RlclNldEVDSS5nZXRDaGFyYWN0ZXJTZXRFQ0lCeU5hbWUgPSBmdW5jdGlvbiAobmFtZSkgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gQ2hhcmFjdGVyU2V0RUNJLk5BTUVfVE9fRUNJLmdldChuYW1lKTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgnaW5jb3JlY3QgdmFsdWUnKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY2hhcmFjdGVyU2V0OwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgQ2hhcmFjdGVyU2V0RUNJKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLmdldE5hbWUoKSA9PT0gb3RoZXIuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlZBTFVFX0lERU5USUZJRVJfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSSA9IG5ldyBNYXAoKTsKCSAgICAvLyBFbnVtIG5hbWUgaXMgYSBKYXZhIGVuY29kaW5nIHZhbGlkIGZvciBqYXZhLmxhbmcgYW5kIGphdmEuaW8KCSAgICAvLyBUWVBFU0NSSVBUUE9SVDogY2hhbmdlZCB0aGUgbWFpbiBsYWJlbCBmb3IgSVNPIGFzIHRoZSBUZXh0RW5jb2RlciBkaWQgbm90IHJlY29nbml6ZWQgdGhlbSBpbiB0aGUgZm9ybSBmcm9tIGphdmEKCSAgICAvLyAoZWcgSVNPODg1OV8xIG11c3QgYmUgSVNPODg1OTEgb3IgSVNPODg1OS0xIG9yIElTTy04ODU5LTEpCgkgICAgLy8gbGF0ZXIgb246IHdlbGwsIGV4Y2VwdCAxNiB3aWNoIGRvZXMgbm90IHdvcmsgd2l0aCBJU084ODU5MTYgc28gdXNlZCBJU08tODg1OS0xIGZvcm0gZm9yIGRlZmF1bHQKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3A0MzcgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3A0MzcsIEludDMyQXJyYXkuZnJvbShbMCwgMl0pLCAnQ3A0MzcnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMSwgSW50MzJBcnJheS5mcm9tKFsxLCAzXSksICdJU08tODg1OS0xJywgJ0lTTzg4NTkxJywgJ0lTTzg4NTlfMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzIgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8yLCA0LCAnSVNPLTg4NTktMicsICdJU084ODU5MicsICdJU084ODU5XzInKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8zID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMywgNSwgJ0lTTy04ODU5LTMnLCAnSVNPODg1OTMnLCAnSVNPODg1OV8zJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzQsIDYsICdJU08tODg1OS00JywgJ0lTTzg4NTk0JywgJ0lTTzg4NTlfNCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV81LCA3LCAnSVNPLTg4NTktNScsICdJU084ODU5NScsICdJU084ODU5XzUnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV82ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfNiwgOCwgJ0lTTy04ODU5LTYnLCAnSVNPODg1OTYnLCAnSVNPODg1OV82Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzcsIDksICdJU08tODg1OS03JywgJ0lTTzg4NTk3JywgJ0lTTzg4NTlfNycpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV84LCAxMCwgJ0lTTy04ODU5LTgnLCAnSVNPODg1OTgnLCAnSVNPODg1OV84Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfOSA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzksIDExLCAnSVNPLTg4NTktOScsICdJU084ODU5OScsICdJU084ODU5XzknKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xMCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzEwLCAxMiwgJ0lTTy04ODU5LTEwJywgJ0lTTzg4NTkxMCcsICdJU084ODU5XzEwJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xMSwgMTMsICdJU08tODg1OS0xMScsICdJU084ODU5MTEnLCAnSVNPODg1OV8xMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzEzID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTMsIDE1LCAnSVNPLTg4NTktMTMnLCAnSVNPODg1OTEzJywgJ0lTTzg4NTlfMTMnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzE0LCAxNiwgJ0lTTy04ODU5LTE0JywgJ0lTTzg4NTkxNCcsICdJU084ODU5XzE0Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xNSwgMTcsICdJU08tODg1OS0xNScsICdJU084ODU5MTUnLCAnSVNPODg1OV8xNScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzE2ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTYsIDE4LCAnSVNPLTg4NTktMTYnLCAnSVNPODg1OTE2JywgJ0lTTzg4NTlfMTYnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuU0pJUyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5TSklTLCAyMCwgJ1NKSVMnLCAnU2hpZnRfSklTJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1MCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTAsIDIxLCAnQ3AxMjUwJywgJ3dpbmRvd3MtMTI1MCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5DcDEyNTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3AxMjUxLCAyMiwgJ0NwMTI1MScsICd3aW5kb3dzLTEyNTEnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3AxMjUyID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkNwMTI1MiwgMjMsICdDcDEyNTInLCAnd2luZG93cy0xMjUyJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1NiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTYsIDI0LCAnQ3AxMjU2JywgJ3dpbmRvd3MtMTI1NicpOwoJICAgIENoYXJhY3RlclNldEVDSS5Vbmljb2RlQmlnVW5tYXJrZWQgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVW5pY29kZUJpZ1VubWFya2VkLCAyNSwgJ1VuaWNvZGVCaWdVbm1hcmtlZCcsICdVVEYtMTZCRScsICdVbmljb2RlQmlnJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlVURjggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVVRGOCwgMjYsICdVVEY4JywgJ1VURi04Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkFTQ0lJID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkFTQ0lJLCBJbnQzMkFycmF5LmZyb20oWzI3LCAxNzBdKSwgJ0FTQ0lJJywgJ1VTLUFTQ0lJJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkJpZzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQmlnNSwgMjgsICdCaWc1Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkdCMTgwMzAgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuR0IxODAzMCwgMjksICdHQjE4MDMwJywgJ0dCMjMxMicsICdFVUNfQ04nLCAnR0JLJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkVVQ19LUiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5FVUNfS1IsIDMwLCAnRVVDX0tSJywgJ0VVQy1LUicpOwoJICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0k7Cgl9KCkpOwoJZXhwb3J0cy5kZWZhdWx0ID0gQ2hhcmFjdGVyU2V0RUNJOwoKCX0oQ2hhcmFjdGVyU2V0RUNJKSk7CgoJdmFyIFN0cmluZ0VuY29kaW5nJDEgPSB7fTsKCgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNiA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbi5raW5kID0gJ1Vuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCkpOwoJVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMS5kZWZhdWx0ID0gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ0VuY29kaW5nJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEgPSBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxOwoJdmFyIENoYXJhY3RlclNldEVDSV8xJDIgPSBDaGFyYWN0ZXJTZXRFQ0k7CgkvKioKCSAqIFJlc3BvbnNpYmxlIGZvciBlbi9kZWNvZGluZyBzdHJpbmdzLgoJICovCgl2YXIgU3RyaW5nRW5jb2RpbmcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nRW5jb2RpbmcoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIERlY29kZXMgc29tZSBVaW50OEFycmF5IHRvIGEgc3RyaW5nIGZvcm1hdC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5kZWNvZGUgPSBmdW5jdGlvbiAoYnl0ZXMsIGVuY29kaW5nKSB7CgkgICAgICAgIHZhciBlbmNvZGluZ05hbWUgPSB0aGlzLmVuY29kaW5nTmFtZShlbmNvZGluZyk7CgkgICAgICAgIGlmICh0aGlzLmN1c3RvbURlY29kZXIpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbURlY29kZXIoYnl0ZXMsIGVuY29kaW5nTmFtZSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSW5jcmVhc2VzIGJyb3dzZXIgc3VwcG9ydC4KCSAgICAgICAgaWYgKHR5cGVvZiBUZXh0RGVjb2RlciA9PT0gJ3VuZGVmaW5lZCcgfHwgdGhpcy5zaG91bGREZWNvZGVPbkZhbGxiYWNrKGVuY29kaW5nTmFtZSkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUZhbGxiYWNrKGJ5dGVzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoZW5jb2RpbmdOYW1lKS5kZWNvZGUoYnl0ZXMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ2hlY2tzIGlmIHRoZSBkZWNvZGluZyBtZXRob2Qgc2hvdWxkIHVzZSB0aGUgZmFsbGJhY2sgZm9yIGRlY29kaW5nCgkgICAgICogb25jZSBOb2RlIFRleHREZWNvZGVyIGRvZXNuJ3Qgc3VwcG9ydCBhbGwgZW5jb2RpbmcgZm9ybWF0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBlbmNvZGluZ05hbWUKCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5zaG91bGREZWNvZGVPbkZhbGxiYWNrID0gZnVuY3Rpb24gKGVuY29kaW5nTmFtZSkgewoJICAgICAgICByZXR1cm4gIVN0cmluZ0VuY29kaW5nLmlzQnJvd3NlcigpICYmIGVuY29kaW5nTmFtZSA9PT0gJ0lTTy04ODU5LTEnOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRW5jb2RlcyBzb21lIHN0cmluZyBpbnRvIGEgVWludDhBcnJheS4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGUgPSBmdW5jdGlvbiAocywgZW5jb2RpbmcpIHsKCSAgICAgICAgdmFyIGVuY29kaW5nTmFtZSA9IHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKTsKCSAgICAgICAgaWYgKHRoaXMuY3VzdG9tRW5jb2RlcikgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tRW5jb2RlcihzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEluY3JlYXNlcyBicm93c2VyIHN1cHBvcnQuCgkgICAgICAgIGlmICh0eXBlb2YgVGV4dEVuY29kZXIgPT09ICd1bmRlZmluZWQnKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVGYWxsYmFjayhzKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBUZXh0RW5jb2RlciBvbmx5IGVuY29kZXMgdG8gVVRGOCBieSBkZWZhdWx0IGFzIHNwZWNpZmllZCBieSBlbmNvZGluZy5zcGVjLndoYXR3Zy5vcmcKCSAgICAgICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzQnJvd3NlciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHdpbmRvdykgPT09ICdbb2JqZWN0IFdpbmRvd10nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHN0cmluZyB2YWx1ZSBmcm9tIHNvbWUgZW5jb2RpbmcgY2hhcmFjdGVyIHNldC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGluZ05hbWUgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycKCSAgICAgICAgICAgID8gZW5jb2RpbmcKCSAgICAgICAgICAgIDogZW5jb2RpbmcuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBjaGFyYWN0ZXIgc2V0IGZyb20gc29tZSBlbmNvZGluZyBjaGFyYWN0ZXIgc2V0LgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmVuY29kaW5nQ2hhcmFjdGVyU2V0ID0gZnVuY3Rpb24gKGVuY29kaW5nKSB7CgkgICAgICAgIGlmIChlbmNvZGluZyBpbnN0YW5jZW9mIENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdCkgewoJICAgICAgICAgICAgcmV0dXJuIGVuY29kaW5nOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlOYW1lKGVuY29kaW5nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJ1bnMgYSBmYWxsYmFjayBmb3IgdGhlIG5hdGl2ZSBkZWNvZGluZyBmdW5jaW9uLgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmRlY29kZUZhbGxiYWNrID0gZnVuY3Rpb24gKGJ5dGVzLCBlbmNvZGluZykgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gdGhpcy5lbmNvZGluZ0NoYXJhY3RlclNldChlbmNvZGluZyk7CgkgICAgICAgIGlmIChTdHJpbmdFbmNvZGluZy5pc0RlY29kZUZhbGxiYWNrU3VwcG9ydGVkKGNoYXJhY3RlclNldCkpIHsKCSAgICAgICAgICAgIHZhciBzID0gJyc7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoXzEgPSBieXRlcy5sZW5ndGg7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGggPSBieXRlc1tpXS50b1N0cmluZygxNik7CgkgICAgICAgICAgICAgICAgaWYgKGgubGVuZ3RoIDwgMikgewoJICAgICAgICAgICAgICAgICAgICBoID0gJzAnICsgaDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcyArPSAnJScgKyBoOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuVW5pY29kZUJpZ1VubWFya2VkKSkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQxNkFycmF5KGJ5dGVzLmJ1ZmZlcikpOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgiRW5jb2RpbmcgIiArIHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKSArICIgbm90IHN1cHBvcnRlZCBieSBmYWxsYmFjay4iKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzRGVjb2RlRmFsbGJhY2tTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgIHJldHVybiBjaGFyYWN0ZXJTZXQuZXF1YWxzKENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdC5VVEY4KSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuSVNPODg1OV8xKSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuQVNDSUkpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUnVucyBhIGZhbGxiYWNrIGZvciB0aGUgbmF0aXZlIGVuY29kaW5nIGZ1bmNpb24uCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNzE5Mjg0NS80MzY3NjgzCgkgICAgICovCgkgICAgU3RyaW5nRW5jb2RpbmcuZW5jb2RlRmFsbGJhY2sgPSBmdW5jdGlvbiAocykgewoJICAgICAgICB2YXIgZW5jb2RlZFVSSXN0cmluZyA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHMpKSk7CgkgICAgICAgIHZhciBjaGFyTGlzdCA9IGVuY29kZWRVUklzdHJpbmcuc3BsaXQoJycpOwoJICAgICAgICB2YXIgdWludEFycmF5ID0gW107CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhckxpc3QubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHVpbnRBcnJheS5wdXNoKGNoYXJMaXN0W2ldLmNoYXJDb2RlQXQoMCkpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh1aW50QXJyYXkpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0VuY29kaW5nOwoJfSgpKTsKCVN0cmluZ0VuY29kaW5nJDEuZGVmYXVsdCA9IFN0cmluZ0VuY29kaW5nOwoKCS8qCgkgKiBDb3B5cmlnaHQgKEMpIDIwMTAgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ1V0aWxzJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS5uaW8uY2hhcnNldC5DaGFyc2V0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQzID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSQxID0gQ2hhcmFjdGVyU2V0RUNJOwoJdmFyIFN0cmluZ0VuY29kaW5nXzEkMSA9IFN0cmluZ0VuY29kaW5nJDE7CgkvKioKCSAqIENvbW1vbiBzdHJpbmctcmVsYXRlZCBmdW5jdGlvbnMuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgQWxleCBEdXByZQoJICovCgl2YXIgU3RyaW5nVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nVXRpbHMoKSB7CgkgICAgfQoJICAgIC8vIFNISUZUX0pJUy5lcXVhbHNJZ25vcmVDYXNlKFBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcpIHx8CgkgICAgLy8gRVVDX0pQLmVxdWFsc0lnbm9yZUNhc2UoUExBVEZPUk1fREVGQVVMVF9FTkNPRElORyk7CgkgICAgU3RyaW5nVXRpbHMuY2FzdEFzTm9uVXRmOENoYXIgPSBmdW5jdGlvbiAoY29kZSwgZW5jb2RpbmcpIHsKCSAgICAgICAgaWYgKGVuY29kaW5nID09PSB2b2lkIDApIHsgZW5jb2RpbmcgPSBudWxsOyB9CgkgICAgICAgIC8vIElTTyA4ODU5LTEgaXMgdGhlIEphdmEgZGVmYXVsdCBhcyBVVEYtOCBpcyBKYXZhU2NyaXB0cwoJICAgICAgICAvLyB5b3UgY2FuIHNlZSB0aGlzIG1ldGhvZCBhcyBhIEphdmEgdmVyc2lvbiBvZiBTdHJpbmcuZnJvbUNoYXJDb2RlCgkgICAgICAgIHZhciBlID0gZW5jb2RpbmcgPyBlbmNvZGluZy5nZXROYW1lKCkgOiB0aGlzLklTTzg4NTkxOwoJICAgICAgICAvLyB1c2UgcGFzc2VkIGZvcm1hdCAoZnJvbUNoYXJDb2RlIHdpbGwgcmV0dXJuIFVURjggZW5jb2RpbmcpCgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoW2NvZGVdKSwgZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYnl0ZXMgYnl0ZXMgZW5jb2RpbmcgYSBzdHJpbmcsIHdob3NlIGVuY29kaW5nIHNob3VsZCBiZSBndWVzc2VkCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kZSBoaW50cyBpZiBhcHBsaWNhYmxlCgkgICAgICogQHJldHVybiBuYW1lIG9mIGd1ZXNzZWQgZW5jb2Rpbmc7IGF0IHRoZSBtb21lbnQgd2lsbCBvbmx5IGd1ZXNzIG9uZSBvZjoKCSAgICAgKiAge0BsaW5rICNTSElGVF9KSVN9LCB7QGxpbmsgI1VURjh9LCB7QGxpbmsgI0lTTzg4NTkxfSwgb3IgdGhlIHBsYXRmb3JtCgkgICAgICogIGRlZmF1bHQgZW5jb2RpbmcgaWYgbm9uZSBvZiB0aGVzZSBjYW4gcG9zc2libHkgYmUgY29ycmVjdAoJICAgICAqLwoJICAgIFN0cmluZ1V0aWxzLmd1ZXNzRW5jb2RpbmcgPSBmdW5jdGlvbiAoYnl0ZXMsIGhpbnRzKSB7CgkgICAgICAgIGlmIChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpKSB7CgkgICAgICAgICAgICByZXR1cm4gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpLnRvU3RyaW5nKCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRm9yIG5vdywgbWVyZWx5IHRyaWVzIHRvIGRpc3Rpbmd1aXNoIElTTy04ODU5LTEsIFVURi04IGFuZCBTaGlmdF9KSVMsCgkgICAgICAgIC8vIHdoaWNoIHNob3VsZCBiZSBieSBmYXIgdGhlIG1vc3QgY29tbW9uIGVuY29kaW5ncy4KCSAgICAgICAgdmFyIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDsKCSAgICAgICAgdmFyIGNhbkJlSVNPODg1OTEgPSB0cnVlOwoJICAgICAgICB2YXIgY2FuQmVTaGlmdEpJUyA9IHRydWU7CgkgICAgICAgIHZhciBjYW5CZVVURjggPSB0cnVlOwoJICAgICAgICB2YXIgdXRmOEJ5dGVzTGVmdCA9IDA7CgkgICAgICAgIC8vIGludCB1dGY4TG93Q2hhcnMgPSAwCgkgICAgICAgIHZhciB1dGYyQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGYzQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGY0Qnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciBzamlzQnl0ZXNMZWZ0ID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNMb3dDaGFycyA9IDAKCSAgICAgICAgdmFyIHNqaXNLYXRha2FuYUNoYXJzID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNEb3VibGVCeXRlc0NoYXJzID0gMAoJICAgICAgICB2YXIgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgIHZhciBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgdmFyIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSAwOwoJICAgICAgICB2YXIgc2ppc01heERvdWJsZUJ5dGVzV29yZExlbmd0aCA9IDA7CgkgICAgICAgIC8vIGludCBpc29Mb3dDaGFycyA9IDAKCSAgICAgICAgLy8gaW50IGlzb0hpZ2hDaGFycyA9IDAKCSAgICAgICAgdmFyIGlzb0hpZ2hPdGhlciA9IDA7CgkgICAgICAgIHZhciB1dGY4Ym9tID0gYnl0ZXMubGVuZ3RoID4gMyAmJgoJICAgICAgICAgICAgYnl0ZXNbMF0gPT09IC8qKGJ5dGUpICovIDB4RUYgJiYKCSAgICAgICAgICAgIGJ5dGVzWzFdID09PSAvKihieXRlKSAqLyAweEJCICYmCgkgICAgICAgICAgICBieXRlc1syXSA9PT0gLyooYnl0ZSkgKi8gMHhCRjsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGggJiYgKGNhbkJlSVNPODg1OTEgfHwgY2FuQmVTaGlmdEpJUyB8fCBjYW5CZVVURjgpOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB2YWx1ZSA9IGJ5dGVzW2ldICYgMHhGRjsKCSAgICAgICAgICAgIC8vIFVURi04IHN0dWZmCgkgICAgICAgICAgICBpZiAoY2FuQmVVVEY4KSB7CgkgICAgICAgICAgICAgICAgaWYgKHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDgwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgY2FuQmVVVEY4ID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAoKHZhbHVlICYgMHg4MCkgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4NDApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjhCeXRlc0xlZnQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDIwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjJCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4MTApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjNCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDA4KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRmNEJ5dGVzQ2hhcnMrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkJlVVRGOCA9IGZhbHNlOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfSAvLyBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyB1dGY4TG93Q2hhcnMrKwoJICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIElTTy04ODU5LTEgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gMHg3RiAmJiB2YWx1ZSA8IDB4QTApIHsKCSAgICAgICAgICAgICAgICAgICAgY2FuQmVJU084ODU5MSA9IGZhbHNlOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA+IDB4OUYpIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgMHhDMCB8fCB2YWx1ZSA9PT0gMHhENyB8fCB2YWx1ZSA9PT0gMHhGNykgewoJICAgICAgICAgICAgICAgICAgICAgICAgaXNvSGlnaE90aGVyKys7CgkgICAgICAgICAgICAgICAgICAgIH0gLy8gZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIGlzb0hpZ2hDaGFycysrCgkgICAgICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgICAgICB9IC8vIGVsc2UgewoJICAgICAgICAgICAgICAgIC8vIGlzb0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAvLyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBTaGlmdF9KSVMgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTKSB7CgkgICAgICAgICAgICAgICAgaWYgKHNqaXNCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8IDB4NDAgfHwgdmFsdWUgPT09IDB4N0YgfHwgdmFsdWUgPiAweEZDKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVNoaWZ0SklTID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09IDB4ODAgfHwgdmFsdWUgPT09IDB4QTAgfHwgdmFsdWUgPiAweEVGKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhbkJlU2hpZnRKSVMgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPiAweEEwICYmIHZhbHVlIDwgMHhFMCkgewoJICAgICAgICAgICAgICAgICAgICBzamlzS2F0YWthbmFDaGFycysrOwoJICAgICAgICAgICAgICAgICAgICBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCsrOwoJICAgICAgICAgICAgICAgICAgICBpZiAoc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA+IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSBzamlzQ3VyS2F0YWthbmFXb3JkTGVuZ3RoOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID4gMHg3RikgewoJICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgIC8vIHNqaXNEb3VibGVCeXRlc0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGgrKzsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPiBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gc2ppc0N1ckRvdWJsZUJ5dGVzV29yZExlbmd0aDsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gc2ppc0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPSAwOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmIHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVTaGlmdEpJUyAmJiBzamlzQnl0ZXNMZWZ0ID4gMCkgewoJICAgICAgICAgICAgY2FuQmVTaGlmdEpJUyA9IGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhc3kgLS0gaWYgdGhlcmUgaXMgQk9NIG9yIGF0IGxlYXN0IDEgdmFsaWQgbm90LXNpbmdsZSBieXRlIGNoYXJhY3RlciAoYW5kIG5vIGV2aWRlbmNlIGl0IGNhbid0IGJlIFVURi04KSwgZG9uZQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmICh1dGY4Ym9tIHx8IHV0ZjJCeXRlc0NoYXJzICsgdXRmM0J5dGVzQ2hhcnMgKyB1dGY0Qnl0ZXNDaGFycyA+IDApKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuVVRGODsKCSAgICAgICAgfQoJICAgICAgICAvLyBFYXN5IC0tIGlmIGFzc3VtaW5nIFNoaWZ0X0pJUyBvciBhdCBsZWFzdCAzIHZhbGlkIGNvbnNlY3V0aXZlIG5vdC1hc2NpaSBjaGFyYWN0ZXJzIChhbmQgbm8gZXZpZGVuY2UgaXQgY2FuJ3QgYmUpLCBkb25lCgkgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTICYmIChTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTIHx8IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPj0gMyB8fCBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID49IDMpKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuU0hJRlRfSklTOwoJICAgICAgICB9CgkgICAgICAgIC8vIERpc3Rpbmd1aXNoaW5nIFNoaWZ0X0pJUyBhbmQgSVNPLTg4NTktMSBjYW4gYmUgYSBsaXR0bGUgdG91Z2ggZm9yIHNob3J0IHdvcmRzLiBUaGUgY3J1ZGUgaGV1cmlzdGljIGlzOgoJICAgICAgICAvLyAtIElmIHdlIHNhdwoJICAgICAgICAvLyAgIC0gb25seSB0d28gY29uc2VjdXRpdmUga2F0YWthbmEgY2hhcnMgaW4gdGhlIHdob2xlIHRleHQsIG9yCgkgICAgICAgIC8vICAgLSBhdCBsZWFzdCAxMCUgb2YgYnl0ZXMgdGhhdCBjb3VsZCBiZSAidXBwZXIiIG5vdC1hbHBoYW51bWVyaWMgTGF0aW4xLAoJICAgICAgICAvLyAtIHRoZW4gd2UgY29uY2x1ZGUgU2hpZnRfSklTLCBlbHNlIElTTy04ODU5LTEKCSAgICAgICAgaWYgKGNhbkJlSVNPODg1OTEgJiYgY2FuQmVTaGlmdEpJUykgewoJICAgICAgICAgICAgcmV0dXJuIChzamlzTWF4S2F0YWthbmFXb3JkTGVuZ3RoID09PSAyICYmIHNqaXNLYXRha2FuYUNoYXJzID09PSAyKSB8fCBpc29IaWdoT3RoZXIgKiAxMCA+PSBsZW5ndGgKCSAgICAgICAgICAgICAgICA/IFN0cmluZ1V0aWxzLlNISUZUX0pJUyA6IFN0cmluZ1V0aWxzLklTTzg4NTkxOwoJICAgICAgICB9CgkgICAgICAgIC8vIE90aGVyd2lzZSwgdHJ5IGluIG9yZGVyIElTTy04ODU5LTEsIFNoaWZ0IEpJUywgVVRGLTggYW5kIGZhbGwgYmFjayB0byBkZWZhdWx0IHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuSVNPODg1OTE7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlU2hpZnRKSVMpIHsKCSAgICAgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5TSElGVF9KSVM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlVVRGOCkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZ1V0aWxzLlVURjg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB0YWtlIGEgd2lsZCBndWVzcyB3aXRoIHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5QTEFURk9STV9ERUZBVUxUX0VOQ09ESU5HOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMzQzOTcxMS80MzY3NjgzCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYXBwZW5kIFRoZSBuZXcgc3RyaW5nIHRvIGFwcGVuZC4KCSAgICAgKiBAcGFyYW0gYXJncyBBcmd1bWV0cyB2YWx1ZXMgdG8gYmUgZm9ybWF0ZWQuCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZm9ybWF0ID0gZnVuY3Rpb24gKGFwcGVuZCkgewoJICAgICAgICB2YXIgYXJncyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaSA9IC0xOwoJICAgICAgICBmdW5jdGlvbiBjYWxsYmFjayhleHAsIHAwLCBwMSwgcDIsIHAzLCBwNCkgewoJICAgICAgICAgICAgaWYgKGV4cCA9PT0gJyUlJykKCSAgICAgICAgICAgICAgICByZXR1cm4gJyUnOwoJICAgICAgICAgICAgaWYgKGFyZ3NbKytpXSA9PT0gdW5kZWZpbmVkKQoJICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CgkgICAgICAgICAgICBleHAgPSBwMiA/IHBhcnNlSW50KHAyLnN1YnN0cigxKSkgOiB1bmRlZmluZWQ7CgkgICAgICAgICAgICB2YXIgYmFzZSA9IHAzID8gcGFyc2VJbnQocDMuc3Vic3RyKDEpKSA6IHVuZGVmaW5lZDsKCSAgICAgICAgICAgIHZhciB2YWw7CgkgICAgICAgICAgICBzd2l0Y2ggKHA0KSB7CgkgICAgICAgICAgICAgICAgY2FzZSAncyc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IGFyZ3NbaV07CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2MnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBhcmdzW2ldWzBdOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdmJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChhcmdzW2ldKS50b0ZpeGVkKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ3AnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvUHJlY2lzaW9uKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2UnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvRXhwb25lbnRpYWwoZXhwKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgY2FzZSAneCc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IHBhcnNlSW50KGFyZ3NbaV0pLnRvU3RyaW5nKGJhc2UgPyBiYXNlIDogMTYpOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdkJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChwYXJzZUludChhcmdzW2ldLCBiYXNlID8gYmFzZSA6IDEwKS50b1ByZWNpc2lvbihleHApKS50b0ZpeGVkKDApOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhbCA9IHR5cGVvZiB2YWwgPT09ICdvYmplY3QnID8gSlNPTi5zdHJpbmdpZnkodmFsKSA6ICgrdmFsKS50b1N0cmluZyhiYXNlKTsKCSAgICAgICAgICAgIHZhciBzaXplID0gcGFyc2VJbnQocDEpOyAvKiBwYWRkaW5nIHNpemUgKi8KCSAgICAgICAgICAgIHZhciBjaCA9IHAxICYmIChwMVswXSArICcnKSA9PT0gJzAnID8gJzAnIDogJyAnOyAvKiBpc251bGw/ICovCgkgICAgICAgICAgICB3aGlsZSAodmFsLmxlbmd0aCA8IHNpemUpCgkgICAgICAgICAgICAgICAgdmFsID0gcDAgIT09IHVuZGVmaW5lZCA/IHZhbCArIGNoIDogY2ggKyB2YWw7IC8qIGlzbWludXM/ICovCgkgICAgICAgICAgICByZXR1cm4gdmFsOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZWdleCA9IC8lKC0pPygwP1swLTldKyk/KFsuXVswLTldKyk/KFsjXVswLTldKyk/KFtzY2ZwZXhkJV0pL2c7CgkgICAgICAgIHJldHVybiBhcHBlbmQucmVwbGFjZShyZWdleCwgY2FsbGJhY2spOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRCeXRlcyA9IGZ1bmN0aW9uIChzdHIsIGVuY29kaW5nKSB7CgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5lbmNvZGUoc3RyLCBlbmNvZGluZyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIHRoZSBjaGFyY29kZSBhdCB0aGUgc3BlY2lmaWVkIGluZGV4IG9yIGF0IGluZGV4IHplcm8uCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZ2V0Q2hhckNvZGUgPSBmdW5jdGlvbiAoc3RyLCBpbmRleCkgewoJICAgICAgICBpZiAoaW5kZXggPT09IHZvaWQgMCkgeyBpbmRleCA9IDA7IH0KCSAgICAgICAgcmV0dXJuIHN0ci5jaGFyQ29kZUF0KGluZGV4KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgY2hhciBmb3IgZ2l2ZW4gY2hhcmNvZGUKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRDaGFyQXQgPSBmdW5jdGlvbiAoY2hhckNvZGUpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpOwoJICAgIH07CgkgICAgU3RyaW5nVXRpbHMuU0hJRlRfSklTID0gQ2hhcmFjdGVyU2V0RUNJXzEkMS5kZWZhdWx0LlNKSVMuZ2V0TmFtZSgpOyAvLyAiU0pJUyIKCSAgICBTdHJpbmdVdGlscy5HQjIzMTIgPSAnR0IyMzEyJzsKCSAgICBTdHJpbmdVdGlscy5JU084ODU5MSA9IENoYXJhY3RlclNldEVDSV8xJDEuZGVmYXVsdC5JU084ODU5XzEuZ2V0TmFtZSgpOyAvLyAiSVNPODg1OV8xIgoJICAgIFN0cmluZ1V0aWxzLkVVQ19KUCA9ICdFVUNfSlAnOwoJICAgIFN0cmluZ1V0aWxzLlVURjggPSBDaGFyYWN0ZXJTZXRFQ0lfMSQxLmRlZmF1bHQuVVRGOC5nZXROYW1lKCk7IC8vICJVVEY4IgoJICAgIFN0cmluZ1V0aWxzLlBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcgPSBTdHJpbmdVdGlscy5VVEY4OyAvLyAiVVRGOCIvL0NoYXJzZXQuZGVmYXVsdENoYXJzZXQoKS5uYW1lKCkKCSAgICBTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTID0gZmFsc2U7CgkgICAgcmV0dXJuIFN0cmluZ1V0aWxzOwoJfSgpKTsKCVN0cmluZ1V0aWxzJDEuZGVmYXVsdCA9IFN0cmluZ1V0aWxzOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmdCdWlsZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBTdHJpbmdVdGlsc18xJDEgPSBTdHJpbmdVdGlscyQxOwoJdmFyIFN0cmluZ0J1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nQnVpbGRlcih2YWx1ZSkgewoJICAgICAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkgeyB2YWx1ZSA9ICcnOyB9CgkgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKCSAgICB9CgkgICAgU3RyaW5nQnVpbGRlci5wcm90b3R5cGUuZW5hYmxlRGVjb2RpbmcgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nOwoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIGlmICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpIHsKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gcy50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHRoaXMuZW5jb2RpbmcpIHsKCSAgICAgICAgICAgIC8vIHVzZSBwYXNzZWQgZm9ybWF0IChmcm9tQ2hhckNvZGUgd2lsbCByZXR1cm4gVVRGOCBlbmNvZGluZykKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nVXRpbHNfMSQxLmRlZmF1bHQuY2FzdEFzTm9uVXRmOENoYXIocywgdGhpcy5lbmNvZGluZyk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBjb3JyZWN0bHkgY29udmVydHMgZnJvbSBVVEYtOCwgYnV0IG5vdCBvdGhlciBlbmNvZGluZ3MKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShzKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZENoYXJzID0gZnVuY3Rpb24gKHN0ciwgb2Zmc2V0LCBsZW4pIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IG9mZnNldDsgb2Zmc2V0IDwgb2Zmc2V0ICsgbGVuOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kKHN0cltpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmxlbmd0aDsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmNoYXJBdChuKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmRlbGV0ZUNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIHRoaXMudmFsdWUuc3Vic3RyaW5nKG4gKyAxKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnNldENoYXJBdCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgMSk7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zdWJzdHJpbmcgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAbm90ZSBoZWxwZXIgbWV0aG9kIGZvciBSU1MgRXhwYW5kZWQKCSAgICAgKi8KCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zZXRMZW5ndGhUb1plcm8gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSAnJzsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgYy5sZW5ndGgpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0J1aWxkZXI7Cgl9KCkpOwoJU3RyaW5nQnVpbGRlciQxLmRlZmF1bHQgPSBTdHJpbmdCdWlsZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQml0TWF0cml4JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIEJpdEFycmF5XzEkMSA9IEJpdEFycmF5JDE7Cgl2YXIgU3lzdGVtXzEkMyA9IFN5c3RlbSQxOwoJdmFyIEFycmF5c18xID0gQXJyYXlzJDE7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDIgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNyA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgMkQgbWF0cml4IG9mIGJpdHMuIEluIGZ1bmN0aW9uIGFyZ3VtZW50cyBiZWxvdywgYW5kIHRocm91Z2hvdXQgdGhlIGNvbW1vbgoJICogbW9kdWxlLCB4IGlzIHRoZSBjb2x1bW4gcG9zaXRpb24sIGFuZCB5IGlzIHRoZSByb3cgcG9zaXRpb24uIFRoZSBvcmRlcmluZyBpcyBhbHdheXMgeCwgeS4KCSAqIFRoZSBvcmlnaW4gaXMgYXQgdGhlIHRvcC1sZWZ0LjwvcD4KCSAqCgkgKiA8cD5JbnRlcm5hbGx5IHRoZSBiaXRzIGFyZSByZXByZXNlbnRlZCBpbiBhIDEtRCBhcnJheSBvZiAzMi1iaXQgaW50cy4gSG93ZXZlciwgZWFjaCByb3cgYmVnaW5zCgkgKiB3aXRoIGEgbmV3IGludC4gVGhpcyBpcyBkb25lIGludGVudGlvbmFsbHkgc28gdGhhdCB3ZSBjYW4gY29weSBvdXQgYSByb3cgaW50byBhIEJpdEFycmF5IHZlcnkKCSAqIGVmZmljaWVudGx5LjwvcD4KCSAqCgkgKiA8cD5UaGUgb3JkZXJpbmcgb2YgYml0cyBpcyByb3ctbWFqb3IuIFdpdGhpbiBlYWNoIGludCwgdGhlIGxlYXN0IHNpZ25pZmljYW50IGJpdHMgYXJlIHVzZWQgZmlyc3QsCgkgKiBtZWFuaW5nIHRoZXkgcmVwcmVzZW50IGxvd2VyIHggdmFsdWVzLiBUaGlzIGlzIGNvbXBhdGlibGUgd2l0aCBCaXRBcnJheSdzIGltcGxlbWVudGF0aW9uLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpdE1hdHJpeCAvKmltcGxlbWVudHMgQ2xvbmVhYmxlKi8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSBzcXVhcmUge0BsaW5rIEJpdE1hdHJpeH0uCgkgICAgICoKCSAgICAgKiBAcGFyYW0gZGltZW5zaW9uIGhlaWdodCBhbmQgd2lkdGgKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoZGltZW5zaW9uOiBudW1iZXIgLyppbnQqLykgewoJICAgIC8vICAgdGhpcyhkaW1lbnNpb24sIGRpbWVuc2lvbikKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSB7QGxpbmsgQml0TWF0cml4fS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB3aWR0aCBiaXQgbWF0cml4IHdpZHRoCgkgICAgICogQHBhcmFtIGhlaWdodCBiaXQgbWF0cml4IGhlaWdodAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyIC8qaW50Ki8sIGhlaWdodDogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh3aWR0aCA8IDEgfHwgaGVpZ2h0IDwgMSkgewoJICAgIC8vICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJCb3RoIGRpbWVuc2lvbnMgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIpCgkgICAgLy8gICB9CgkgICAgLy8gICB0aGlzLndpZHRoID0gd2lkdGgKCSAgICAvLyAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0CgkgICAgLy8gICB0aGlzLnJvd1NpemUgPSAod2lkdGggKyAzMSkgLyAzMgoJICAgIC8vICAgYml0cyA9IG5ldyBpbnRbcm93U2l6ZSAqIGhlaWdodF07CgkgICAgLy8gfQoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeCh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgcm93U2l6ZSAvKmludCovLCBiaXRzKSB7CgkgICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDsKCSAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CgkgICAgICAgIHRoaXMucm93U2l6ZSA9IHJvd1NpemU7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGhlaWdodCB8fCBudWxsID09PSBoZWlnaHQpIHsKCSAgICAgICAgICAgIGhlaWdodCA9IHdpZHRoOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgICAgICBpZiAod2lkdGggPCAxIHx8IGhlaWdodCA8IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0JvdGggZGltZW5zaW9ucyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gcm93U2l6ZSB8fCBudWxsID09PSByb3dTaXplKSB7CgkgICAgICAgICAgICByb3dTaXplID0gTWF0aC5mbG9vcigod2lkdGggKyAzMSkgLyAzMik7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yb3dTaXplID0gcm93U2l6ZTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICB0aGlzLmJpdHMgPSBuZXcgSW50MzJBcnJheSh0aGlzLnJvd1NpemUgKiB0aGlzLmhlaWdodCk7CgkgICAgICAgIH0KCSAgICB9CgkgICAgLyoqCgkgICAgICogSW50ZXJwcmV0cyBhIDJEIGFycmF5IG9mIGJvb2xlYW5zIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0sIHdoZXJlICJ0cnVlIiBtZWFucyBhbiAib24iIGJpdC4KCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBpbWFnZSBiaXRzIG9mIHRoZSBpbWFnZSwgYXMgYSByb3ctbWFqb3IgMkQgYXJyYXkuIEVsZW1lbnRzIGFyZSBhcnJheXMgcmVwcmVzZW50aW5nIHJvd3MKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCaXRNYXRyaXh9IHJlcHJlc2VudGF0aW9uIG9mIGltYWdlCgkgICAgICovCgkgICAgQml0TWF0cml4LnBhcnNlRnJvbUJvb2xlYW5BcnJheSA9IGZ1bmN0aW9uIChpbWFnZSkgewoJICAgICAgICB2YXIgaGVpZ2h0ID0gaW1hZ2UubGVuZ3RoOwoJICAgICAgICB2YXIgd2lkdGggPSBpbWFnZVswXS5sZW5ndGg7CgkgICAgICAgIHZhciBiaXRzID0gbmV3IEJpdE1hdHJpeCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWlnaHQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGltYWdlSSA9IGltYWdlW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB3aWR0aDsgaisrKSB7CgkgICAgICAgICAgICAgICAgaWYgKGltYWdlSVtqXSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldChqLCBpKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBzdHJpbmdSZXByZXNlbnRhdGlvbgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcKCSAgICAgKiBAcGFyYW0gdW5zZXRTdHJpbmcKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucGFyc2VGcm9tU3RyaW5nID0gZnVuY3Rpb24gKHN0cmluZ1JlcHJlc2VudGF0aW9uLCBzZXRTdHJpbmcsIHVuc2V0U3RyaW5nKSB7CgkgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnc3RyaW5nUmVwcmVzZW50YXRpb24gY2Fubm90IGJlIG51bGwnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBBcnJheShzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpOwoJICAgICAgICB2YXIgYml0c1BvcyA9IDA7CgkgICAgICAgIHZhciByb3dTdGFydFBvcyA9IDA7CgkgICAgICAgIHZhciByb3dMZW5ndGggPSAtMTsKCSAgICAgICAgdmFyIG5Sb3dzID0gMDsKCSAgICAgICAgdmFyIHBvcyA9IDA7CgkgICAgICAgIHdoaWxlIChwb3MgPCBzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpIHsKCSAgICAgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbi5jaGFyQXQocG9zKSA9PT0gJ1xuJyB8fAoJICAgICAgICAgICAgICAgIHN0cmluZ1JlcHJlc2VudGF0aW9uLmNoYXJBdChwb3MpID09PSAnXHInKSB7CgkgICAgICAgICAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgICAgICAgICBpZiAocm93TGVuZ3RoID09PSAtMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcm93TGVuZ3RoID0gYml0c1BvcyAtIHJvd1N0YXJ0UG9zOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJpdHNQb3MgLSByb3dTdGFydFBvcyAhPT0gcm93TGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdyb3cgbGVuZ3RocyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICByb3dTdGFydFBvcyA9IGJpdHNQb3M7CgkgICAgICAgICAgICAgICAgICAgIG5Sb3dzKys7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHBvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoc3RyaW5nUmVwcmVzZW50YXRpb24uc3Vic3RyaW5nKHBvcywgcG9zICsgc2V0U3RyaW5nLmxlbmd0aCkgPT09IHNldFN0cmluZykgewoJICAgICAgICAgICAgICAgIHBvcyArPSBzZXRTdHJpbmcubGVuZ3RoOwoJICAgICAgICAgICAgICAgIGJpdHNbYml0c1Bvc10gPSB0cnVlOwoJICAgICAgICAgICAgICAgIGJpdHNQb3MrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHN0cmluZ1JlcHJlc2VudGF0aW9uLnN1YnN0cmluZyhwb3MsIHBvcyArIHVuc2V0U3RyaW5nLmxlbmd0aCkgPT09IHVuc2V0U3RyaW5nKSB7CgkgICAgICAgICAgICAgICAgcG9zICs9IHVuc2V0U3RyaW5nLmxlbmd0aDsKCSAgICAgICAgICAgICAgICBiaXRzW2JpdHNQb3NdID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgYml0c1BvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnaWxsZWdhbCBjaGFyYWN0ZXIgZW5jb3VudGVyZWQ6ICcgKyBzdHJpbmdSZXByZXNlbnRhdGlvbi5zdWJzdHJpbmcocG9zKSk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm8gRU9MIGF0IGVuZD8KCSAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgaWYgKHJvd0xlbmd0aCA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICByb3dMZW5ndGggPSBiaXRzUG9zIC0gcm93U3RhcnRQb3M7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmIChiaXRzUG9zIC0gcm93U3RhcnRQb3MgIT09IHJvd0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ3JvdyBsZW5ndGhzIGRvIG5vdCBtYXRjaCcpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgblJvd3MrKzsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbWF0cml4ID0gbmV3IEJpdE1hdHJpeChyb3dMZW5ndGgsIG5Sb3dzKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaXRzUG9zOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChiaXRzW2ldKSB7CgkgICAgICAgICAgICAgICAgbWF0cml4LnNldChNYXRoLmZsb29yKGkgJSByb3dMZW5ndGgpLCBNYXRoLmZsb29yKGkgLyByb3dMZW5ndGgpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbWF0cml4OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+R2V0cyB0aGUgcmVxdWVzdGVkIGJpdCwgd2hlcmUgdHJ1ZSBtZWFucyBibGFjay48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0geCBUaGUgaG9yaXpvbnRhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggY29sdW1uKQoJICAgICAqIEBwYXJhbSB5IFRoZSB2ZXJ0aWNhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggcm93KQoJICAgICAqIEByZXR1cm4gdmFsdWUgb2YgZ2l2ZW4gYml0IGluIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHggLyppbnQqLywgeSAvKmludCovKSB7CgkgICAgICAgIHZhciBvZmZzZXQgPSB5ICogdGhpcy5yb3dTaXplICsgTWF0aC5mbG9vcih4IC8gMzIpOwoJICAgICAgICByZXR1cm4gKCh0aGlzLmJpdHNbb2Zmc2V0XSA+Pj4gKHggJiAweDFmKSkgJiAxKSAhPT0gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgdGhlIGdpdmVuIGJpdCB0byB0cnVlLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB4IFRoZSBob3Jpem9udGFsIGNvbXBvbmVudCAoaS5lLiB3aGljaCBjb2x1bW4pCgkgICAgICogQHBhcmFtIHkgVGhlIHZlcnRpY2FsIGNvbXBvbmVudCAoaS5lLiB3aGljaCByb3cpCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIHw9ICgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRjsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdICY9IH4oKDEgPDwgKHggJiAweDFmKSkgJiAweEZGRkZGRkZGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkZsaXBzIHRoZSBnaXZlbiBiaXQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHggVGhlIGhvcml6b250YWwgY29tcG9uZW50IChpLmUuIHdoaWNoIGNvbHVtbikKCSAgICAgKiBAcGFyYW0geSBUaGUgdmVydGljYWwgY29tcG9uZW50IChpLmUuIHdoaWNoIHJvdykKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmZsaXAgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIF49ICgoMSA8PCAoeCAmIDB4MWYpKSAmIDB4RkZGRkZGRkYpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRXhjbHVzaXZlLW9yIChYT1IpOiBGbGlwIHRoZSBiaXQgaW4gdGhpcyB7QGNvZGUgQml0TWF0cml4fSBpZiB0aGUgY29ycmVzcG9uZGluZwoJICAgICAqIG1hc2sgYml0IGlzIHNldC4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBtYXNrIFhPUiBtYXNrCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAobWFzaykgewoJICAgICAgICBpZiAodGhpcy53aWR0aCAhPT0gbWFzay5nZXRXaWR0aCgpIHx8IHRoaXMuaGVpZ2h0ICE9PSBtYXNrLmdldEhlaWdodCgpCgkgICAgICAgICAgICB8fCB0aGlzLnJvd1NpemUgIT09IG1hc2suZ2V0Um93U2l6ZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdpbnB1dCBtYXRyaXggZGltZW5zaW9ucyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcm93QXJyYXkgPSBuZXcgQml0QXJyYXlfMSQxLmRlZmF1bHQoTWF0aC5mbG9vcih0aGlzLndpZHRoIC8gMzIpICsgMSk7CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIHZhciBvZmZzZXQgPSB5ICogcm93U2l6ZTsKCSAgICAgICAgICAgIHZhciByb3cgPSBtYXNrLmdldFJvdyh5LCByb3dBcnJheSkuZ2V0Qml0QXJyYXkoKTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgcm93U2l6ZTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgYml0c1tvZmZzZXQgKyB4XSBePSByb3dbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBtYXggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkrKykgewoJICAgICAgICAgICAgYml0c1tpXSA9IDA7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgYSBzcXVhcmUgcmVnaW9uIG9mIHRoZSBiaXQgbWF0cml4IHRvIHRydWUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGxlZnQgVGhlIGhvcml6b250YWwgcG9zaXRpb24gdG8gYmVnaW4gYXQgKGluY2x1c2l2ZSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB2ZXJ0aWNhbCBwb3NpdGlvbiB0byBiZWdpbiBhdCAoaW5jbHVzaXZlKQoJICAgICAqIEBwYXJhbSB3aWR0aCBUaGUgd2lkdGggb2YgdGhlIHJlZ2lvbgoJICAgICAqIEBwYXJhbSBoZWlnaHQgVGhlIGhlaWdodCBvZiB0aGUgcmVnaW9uCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXRSZWdpb24gPSBmdW5jdGlvbiAobGVmdCAvKmludCovLCB0b3AgLyppbnQqLywgd2lkdGggLyppbnQqLywgaGVpZ2h0IC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHRvcCA8IDAgfHwgbGVmdCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0xlZnQgYW5kIHRvcCBtdXN0IGJlIG5vbm5lZ2F0aXZlJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGhlaWdodCA8IDEgfHwgd2lkdGggPCAxKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdIZWlnaHQgYW5kIHdpZHRoIG11c3QgYmUgYXQgbGVhc3QgMScpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByaWdodCA9IGxlZnQgKyB3aWR0aDsKCSAgICAgICAgdmFyIGJvdHRvbSA9IHRvcCArIGhlaWdodDsKCSAgICAgICAgaWYgKGJvdHRvbSA+IHRoaXMuaGVpZ2h0IHx8IHJpZ2h0ID4gdGhpcy53aWR0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnVGhlIHJlZ2lvbiBtdXN0IGZpdCBpbnNpZGUgdGhlIG1hdHJpeCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IHRvcDsgeSA8IGJvdHRvbTsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHJvd1NpemU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gbGVmdDsgeCA8IHJpZ2h0OyB4KyspIHsKCSAgICAgICAgICAgICAgICBiaXRzW29mZnNldCArIE1hdGguZmxvb3IoeCAvIDMyKV0gfD0gKCgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRik7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEEgZmFzdCBtZXRob2QgdG8gcmV0cmlldmUgb25lIHJvdyBvZiBkYXRhIGZyb20gdGhlIG1hdHJpeCBhcyBhIEJpdEFycmF5LgoJICAgICAqCgkgICAgICogQHBhcmFtIHkgVGhlIHJvdyB0byByZXRyaWV2ZQoJICAgICAqIEBwYXJhbSByb3cgQW4gb3B0aW9uYWwgY2FsbGVyLWFsbG9jYXRlZCBCaXRBcnJheSwgd2lsbCBiZSBhbGxvY2F0ZWQgaWYgbnVsbCBvciB0b28gc21hbGwKCSAgICAgKiBAcmV0dXJuIFRoZSByZXN1bHRpbmcgQml0QXJyYXkgLSB0aGlzIHJlZmVyZW5jZSBzaG91bGQgYWx3YXlzIGJlIHVzZWQgZXZlbiB3aGVuIHBhc3NpbmcKCSAgICAgKiAgICAgICAgIHlvdXIgb3duIHJvdwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Um93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIGlmIChyb3cgPT09IG51bGwgfHwgcm93ID09PSB1bmRlZmluZWQgfHwgcm93LmdldFNpemUoKSA8IHRoaXMud2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh0aGlzLndpZHRoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHJvdy5jbGVhcigpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiByb3dTaXplOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHJvd1NpemU7IHgrKykgewoJICAgICAgICAgICAgcm93LnNldEJ1bGsoeCAqIDMyLCBiaXRzW29mZnNldCArIHhdKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIHkgcm93IHRvIHNldAoJICAgICAqIEBwYXJhbSByb3cge0BsaW5rIEJpdEFycmF5fSB0byBjb3B5IGZyb20KCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLnNldFJvdyA9IGZ1bmN0aW9uICh5IC8qaW50Ki8sIHJvdykgewoJICAgICAgICBTeXN0ZW1fMSQzLmRlZmF1bHQuYXJyYXljb3B5KHJvdy5nZXRCaXRBcnJheSgpLCAwLCB0aGlzLmJpdHMsIHkgKiB0aGlzLnJvd1NpemUsIHRoaXMucm93U2l6ZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBNb2RpZmllcyB0aGlzIHtAY29kZSBCaXRNYXRyaXh9IHRvIHJlcHJlc2VudCB0aGUgc2FtZSBidXQgcm90YXRlZCAxODAgZGVncmVlcwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUucm90YXRlMTgwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgdG9wUm93ID0gbmV3IEJpdEFycmF5XzEkMS5kZWZhdWx0KHdpZHRoKTsKCSAgICAgICAgdmFyIGJvdHRvbVJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh3aWR0aCk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IE1hdGguZmxvb3IoKGhlaWdodCArIDEpIC8gMik7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB0b3BSb3cgPSB0aGlzLmdldFJvdyhpLCB0b3BSb3cpOwoJICAgICAgICAgICAgYm90dG9tUm93ID0gdGhpcy5nZXRSb3coaGVpZ2h0IC0gMSAtIGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0b3BSb3cucmV2ZXJzZSgpOwoJICAgICAgICAgICAgYm90dG9tUm93LnJldmVyc2UoKTsKCSAgICAgICAgICAgIHRoaXMuc2V0Um93KGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0aGlzLnNldFJvdyhoZWlnaHQgLSAxIC0gaSwgdG9wUm93KTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIHRoZSBlbmNsb3NpbmcgcmVjdGFuZ2xlIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBsZWZ0LHRvcCx3aWR0aCxoZWlnaHR9IGVuY2xvc2luZyByZWN0YW5nbGUgb2YgYWxsIDEgYml0cywgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldEVuY2xvc2luZ1JlY3RhbmdsZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuaGVpZ2h0OwoJICAgICAgICB2YXIgcm93U2l6ZSA9IHRoaXMucm93U2l6ZTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBsZWZ0ID0gd2lkdGg7CgkgICAgICAgIHZhciB0b3AgPSBoZWlnaHQ7CgkgICAgICAgIHZhciByaWdodCA9IC0xOwoJICAgICAgICB2YXIgYm90dG9tID0gLTE7CgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHgzMiA9IDA7IHgzMiA8IHJvd1NpemU7IHgzMisrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHRoZUJpdHMgPSBiaXRzW3kgKiByb3dTaXplICsgeDMyXTsKCSAgICAgICAgICAgICAgICBpZiAodGhlQml0cyAhPT0gMCkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA8IHRvcCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA+IGJvdHRvbSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeDMyICogMzIgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdCsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IHgzMiAqIDMyICsgYml0OwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGlmICh4MzIgKiAzMiArIDMxID4gcmlnaHQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSAzMTsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgodGhlQml0cyA+Pj4gYml0KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPiByaWdodCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0geDMyICogMzIgKyBiaXQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJpZ2h0IDwgbGVmdCB8fCBib3R0b20gPCB0b3ApIHsKCSAgICAgICAgICAgIHJldHVybiBudWxsOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2xlZnQsIHRvcCwgcmlnaHQgLSBsZWZ0ICsgMSwgYm90dG9tIC0gdG9wICsgMV0pOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIGEgY29ybmVyIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSB4LHl9IGNvb3JkaW5hdGUgb2YgdG9wLWxlZnQtbW9zdCAxIGJpdCwgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldFRvcExlZnRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IDA7CgkgICAgICAgIHdoaWxlIChiaXRzT2Zmc2V0IDwgYml0cy5sZW5ndGggJiYgYml0c1tiaXRzT2Zmc2V0XSA9PT0gMCkgewoJICAgICAgICAgICAgYml0c09mZnNldCsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChiaXRzT2Zmc2V0ID09PSBiaXRzLmxlbmd0aCkgewoJICAgICAgICAgICAgcmV0dXJuIG51bGw7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHkgPSBiaXRzT2Zmc2V0IC8gcm93U2l6ZTsKCSAgICAgICAgdmFyIHggPSAoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDA7CgkgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgYml0Kys7CgkgICAgICAgIH0KCSAgICAgICAgeCArPSBiaXQ7CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW3gsIHldKTsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Qm90dG9tUmlnaHRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IGJpdHMubGVuZ3RoIC0gMTsKCSAgICAgICAgd2hpbGUgKGJpdHNPZmZzZXQgPj0gMCAmJiBiaXRzW2JpdHNPZmZzZXRdID09PSAwKSB7CgkgICAgICAgICAgICBiaXRzT2Zmc2V0LS07CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJpdHNPZmZzZXQgPCAwKSB7CgkgICAgICAgICAgICByZXR1cm4gbnVsbDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoYml0c09mZnNldCAvIHJvd1NpemUpOwoJICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3IoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDMxOwoJICAgICAgICB3aGlsZSAoKHRoZUJpdHMgPj4+IGJpdCkgPT09IDApIHsKCSAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICB9CgkgICAgICAgIHggKz0gYml0OwoJICAgICAgICByZXR1cm4gSW50MzJBcnJheS5mcm9tKFt4LCB5XSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMud2lkdGg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSByb3cgc2l6ZSBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRSb3dTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yb3dTaXplOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdE1hdHJpeCkpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy53aWR0aCA9PT0gb3RoZXIud2lkdGggJiYgdGhpcy5oZWlnaHQgPT09IG90aGVyLmhlaWdodCAmJiB0aGlzLnJvd1NpemUgPT09IG90aGVyLnJvd1NpemUgJiYKCSAgICAgICAgICAgIEFycmF5c18xLmRlZmF1bHQuZXF1YWxzKHRoaXMuYml0cywgb3RoZXIuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGhhc2ggPSB0aGlzLndpZHRoOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy53aWR0aDsKCSAgICAgICAgaGFzaCA9IDMxICogaGFzaCArIHRoaXMuaGVpZ2h0OwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy5yb3dTaXplOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgQXJyYXlzXzEuZGVmYXVsdC5oYXNoQ29kZSh0aGlzLmJpdHMpOwoJICAgICAgICByZXR1cm4gaGFzaDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIHVzaW5nICJYIiBmb3Igc2V0IGFuZCAiICIgZm9yIHVuc2V0IGJpdHMKCSAgICAgKi8KCSAgICAvKkBPdmVycmlkZSovCgkgICAgLy8gcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdG9TdHJpbmcoIjogIlgsICIgICIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgdG9TdHJpbmcoc2V0U3RyaW5nOiBzdHJpbmcgPSAiWCAiLCB1bnNldFN0cmluZzogc3RyaW5nID0gIiAgIik6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5idWlsZFRvU3RyaW5nKHNldFN0cmluZywgdW5zZXRTdHJpbmcsICJcbiIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEBwYXJhbSBsaW5lU2VwYXJhdG9yIG5ld2xpbmUgY2hhcmFjdGVyIGluIHN0cmluZyByZXByZXNlbnRhdGlvbgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MgYW5kIGxpbmUgc2VwYXJhdG9yCgkgICAgICogQGRlcHJlY2F0ZWQgY2FsbCB7QGxpbmsgI3RvU3RyaW5nKFN0cmluZyxTdHJpbmcpfSBvbmx5LCB3aGljaCB1c2VzIFxuIGxpbmUgc2VwYXJhdG9yIGFsd2F5cwoJICAgICAqLwoJICAgIC8vIEBEZXByZWNhdGVkCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIChzZXRTdHJpbmcsIHVuc2V0U3RyaW5nLCBsaW5lU2VwYXJhdG9yKSB7CgkgICAgICAgIGlmIChzZXRTdHJpbmcgPT09IHZvaWQgMCkgeyBzZXRTdHJpbmcgPSAnWCAnOyB9CgkgICAgICAgIGlmICh1bnNldFN0cmluZyA9PT0gdm9pZCAwKSB7IHVuc2V0U3RyaW5nID0gJyAgJzsgfQoJICAgICAgICBpZiAobGluZVNlcGFyYXRvciA9PT0gdm9pZCAwKSB7IGxpbmVTZXBhcmF0b3IgPSAnXG4nOyB9CgkgICAgICAgIHJldHVybiB0aGlzLmJ1aWxkVG9TdHJpbmcoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcik7CgkgICAgfTsKCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmJ1aWxkVG9TdHJpbmcgPSBmdW5jdGlvbiAoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcikgewoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgLy8gcmVzdWx0LmFwcGVuZChsaW5lU2VwYXJhdG9yKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IHRoaXMud2lkdGg7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCh0aGlzLmdldCh4LCB5KSA/IHNldFN0cmluZyA6IHVuc2V0U3RyaW5nKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQobGluZVNlcGFyYXRvcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdC50b1N0cmluZygpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0TWF0cml4KHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnJvd1NpemUsIHRoaXMuYml0cy5zbGljZSgpKTsKCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXg7Cgl9KCkpOwoJQml0TWF0cml4JDEuZGVmYXVsdCA9IEJpdE1hdHJpeDsKCgl2YXIgTm90Rm91bmRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShOb3RGb3VuZEV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBOb3RGb3VuZEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZChOb3RGb3VuZEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBOb3RGb3VuZEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5nZXROb3RGb3VuZEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5raW5kID0gJ05vdEZvdW5kRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gTm90Rm91bmRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCkpOwoJTm90Rm91bmRFeGNlcHRpb24kMS5kZWZhdWx0ID0gTm90Rm91bmRFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYyA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24geyovCgl2YXIgQmluYXJpemVyXzEgPSBCaW5hcml6ZXIkMTsKCXZhciBCaXRBcnJheV8xID0gQml0QXJyYXkkMTsKCXZhciBCaXRNYXRyaXhfMSQ1ID0gQml0TWF0cml4JDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQ2ID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qKgoJICogVGhpcyBCaW5hcml6ZXIgaW1wbGVtZW50YXRpb24gdXNlcyB0aGUgb2xkIFpYaW5nIGdsb2JhbCBoaXN0b2dyYW0gYXBwcm9hY2guIEl0IGlzIHN1aXRhYmxlCgkgKiBmb3IgbG93LWVuZCBtb2JpbGUgZGV2aWNlcyB3aGljaCBkb24ndCBoYXZlIGVub3VnaCBDUFUgb3IgbWVtb3J5IHRvIHVzZSBhIGxvY2FsIHRocmVzaG9sZGluZwoJICogYWxnb3JpdGhtLiBIb3dldmVyLCBiZWNhdXNlIGl0IHBpY2tzIGEgZ2xvYmFsIGJsYWNrIHBvaW50LCBpdCBjYW5ub3QgaGFuZGxlIGRpZmZpY3VsdCBzaGFkb3dzCgkgKiBhbmQgZ3JhZGllbnRzLgoJICoKCSAqIEZhc3RlciBtb2JpbGUgZGV2aWNlcyBhbmQgYWxsIGRlc2t0b3AgYXBwbGljYXRpb25zIHNob3VsZCBwcm9iYWJseSB1c2UgSHlicmlkQmluYXJpemVyIGluc3RlYWQuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGMoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5sdW1pbmFuY2VzID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkVNUFRZOwoJICAgICAgICBfdGhpcy5idWNrZXRzID0gbmV3IEludDMyQXJyYXkoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CVUNLRVRTKTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvLyBBcHBsaWVzIHNpbXBsZSBzaGFycGVuaW5nIHRvIHRoZSByb3cgZGF0YSB0byBpbXByb3ZlIHBlcmZvcm1hbmNlIG9mIHRoZSAxRCBSZWFkZXJzLgoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmdldEJsYWNrUm93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gdW5kZWZpbmVkIHx8IHJvdyA9PT0gbnVsbCB8fCByb3cuZ2V0U2l6ZSgpIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xLmRlZmF1bHQod2lkdGgpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgcm93LmNsZWFyKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5pbml0QXJyYXlzKHdpZHRoKTsKCSAgICAgICAgdmFyIGxvY2FsTHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRSb3coeSwgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgdmFyIGxvY2FsQnVja2V0cyA9IHRoaXMuYnVja2V0czsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICBsb2NhbEJ1Y2tldHNbKGxvY2FsTHVtaW5hbmNlc1t4XSAmIDB4ZmYpID4+IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfU0hJRlRdKys7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJsYWNrUG9pbnQgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuZXN0aW1hdGVCbGFja1BvaW50KGxvY2FsQnVja2V0cyk7CgkgICAgICAgIGlmICh3aWR0aCA8IDMpIHsKCSAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgdmVyeSBzbWFsbCBpbWFnZXMKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgICAgIGlmICgobG9jYWxMdW1pbmFuY2VzW3hdICYgMHhmZikgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIHJvdy5zZXQoeCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGxlZnQgPSBsb2NhbEx1bWluYW5jZXNbMF0gJiAweGZmOwoJICAgICAgICAgICAgdmFyIGNlbnRlciA9IGxvY2FsTHVtaW5hbmNlc1sxXSAmIDB4ZmY7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMTsgeCA8IHdpZHRoIC0gMTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gbG9jYWxMdW1pbmFuY2VzW3ggKyAxXSAmIDB4ZmY7CgkgICAgICAgICAgICAgICAgLy8gQSBzaW1wbGUgLTEgNCAtMSBib3ggZmlsdGVyIHdpdGggYSB3ZWlnaHQgb2YgMi4KCSAgICAgICAgICAgICAgICBpZiAoKChjZW50ZXIgKiA0KSAtIGxlZnQgLSByaWdodCkgLyAyIDwgYmxhY2tQb2ludCkgewoJICAgICAgICAgICAgICAgICAgICByb3cuc2V0KHgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBsZWZ0ID0gY2VudGVyOwoJICAgICAgICAgICAgICAgIGNlbnRlciA9IHJpZ2h0OwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByb3c7CgkgICAgfTsKCSAgICAvLyBEb2VzIG5vdCBzaGFycGVuIHRoZSBkYXRhLCBhcyB0aGlzIGNhbGwgaXMgaW50ZW5kZWQgdG8gb25seSBiZSB1c2VkIGJ5IDJEIFJlYWRlcnMuCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIG1hdHJpeCA9IG5ldyBCaXRNYXRyaXhfMSQ1LmRlZmF1bHQod2lkdGgsIGhlaWdodCk7CgkgICAgICAgIC8vIFF1aWNrbHkgY2FsY3VsYXRlcyB0aGUgaGlzdG9ncmFtIGJ5IHNhbXBsaW5nIGZvdXIgcm93cyBmcm9tIHRoZSBpbWFnZS4gVGhpcyBwcm92ZWQgdG8gYmUKCSAgICAgICAgLy8gbW9yZSByb2J1c3Qgb24gdGhlIGJsYWNrYm94IHRlc3RzIHRoYW4gc2FtcGxpbmcgYSBkaWFnb25hbCBhcyB3ZSB1c2VkIHRvIGRvLgoJICAgICAgICB0aGlzLmluaXRBcnJheXMod2lkdGgpOwoJICAgICAgICB2YXIgbG9jYWxCdWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB5ID0gMTsgeSA8IDU7IHkrKykgewoJICAgICAgICAgICAgdmFyIHJvdyA9IE1hdGguZmxvb3IoKGhlaWdodCAqIHkpIC8gNSk7CgkgICAgICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzXzEgPSBzb3VyY2UuZ2V0Um93KHJvdywgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgICAgIHZhciByaWdodCA9IE1hdGguZmxvb3IoKHdpZHRoICogNCkgLyA1KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSBNYXRoLmZsb29yKHdpZHRoIC8gNSk7IHggPCByaWdodDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzXzFbeF0gJiAweGZmOwoJICAgICAgICAgICAgICAgIGxvY2FsQnVja2V0c1twaXhlbCA+PiBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUXSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBibGFja1BvaW50ID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludChsb2NhbEJ1Y2tldHMpOwoJICAgICAgICAvLyBXZSBkZWxheSByZWFkaW5nIHRoZSBlbnRpcmUgaW1hZ2UgbHVtaW5hbmNlIHVudGlsIHRoZSBibGFjayBwb2ludCBlc3RpbWF0aW9uIHN1Y2NlZWRzLgoJICAgICAgICAvLyBBbHRob3VnaCB3ZSBlbmQgdXAgcmVhZGluZyBmb3VyIHJvd3MgdHdpY2UsIGl0IGlzIGNvbnNpc3RlbnQgd2l0aCBvdXIgbW90dG8gb2YKCSAgICAgICAgLy8gImZhaWwgcXVpY2tseSIgd2hpY2ggaXMgbmVjZXNzYXJ5IGZvciBjb250aW51b3VzIHNjYW5uaW5nLgoJICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzID0gc291cmNlLmdldE1hdHJpeCgpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzW29mZnNldCArIHhdICYgMHhmZjsKCSAgICAgICAgICAgICAgICBpZiAocGl4ZWwgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXQoeCwgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBtYXRyaXg7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLnByb3RvdHlwZS5jcmVhdGVCaW5hcml6ZXIgPSBmdW5jdGlvbiAoc291cmNlKSB7CgkgICAgICAgIHJldHVybiBuZXcgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyKHNvdXJjZSk7CgkgICAgfTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmluaXRBcnJheXMgPSBmdW5jdGlvbiAobHVtaW5hbmNlU2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmICh0aGlzLmx1bWluYW5jZXMubGVuZ3RoIDwgbHVtaW5hbmNlU2l6ZSkgewoJICAgICAgICAgICAgdGhpcy5sdW1pbmFuY2VzID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGx1bWluYW5jZVNpemUpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBidWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQlVDS0VUUzsgeCsrKSB7CgkgICAgICAgICAgICBidWNrZXRzW3hdID0gMDsKCSAgICAgICAgfQoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludCA9IGZ1bmN0aW9uIChidWNrZXRzKSB7CgkgICAgICAgIC8vIEZpbmQgdGhlIHRhbGxlc3QgcGVhayBpbiB0aGUgaGlzdG9ncmFtLgoJICAgICAgICB2YXIgbnVtQnVja2V0cyA9IGJ1Y2tldHMubGVuZ3RoOwoJICAgICAgICB2YXIgbWF4QnVja2V0Q291bnQgPSAwOwoJICAgICAgICB2YXIgZmlyc3RQZWFrID0gMDsKCSAgICAgICAgdmFyIGZpcnN0UGVha1NpemUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgaWYgKGJ1Y2tldHNbeF0gPiBmaXJzdFBlYWtTaXplKSB7CgkgICAgICAgICAgICAgICAgZmlyc3RQZWFrID0geDsKCSAgICAgICAgICAgICAgICBmaXJzdFBlYWtTaXplID0gYnVja2V0c1t4XTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChidWNrZXRzW3hdID4gbWF4QnVja2V0Q291bnQpIHsKCSAgICAgICAgICAgICAgICBtYXhCdWNrZXRDb3VudCA9IGJ1Y2tldHNbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCB0aGUgc2Vjb25kLXRhbGxlc3QgcGVhayB3aGljaCBpcyBzb21ld2hhdCBmYXIgZnJvbSB0aGUgdGFsbGVzdCBwZWFrLgoJICAgICAgICB2YXIgc2Vjb25kUGVhayA9IDA7CgkgICAgICAgIHZhciBzZWNvbmRQZWFrU2NvcmUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgdmFyIGRpc3RhbmNlVG9CaWdnZXN0ID0geCAtIGZpcnN0UGVhazsKCSAgICAgICAgICAgIC8vIEVuY291cmFnZSBtb3JlIGRpc3RhbnQgc2Vjb25kIHBlYWtzIGJ5IG11bHRpcGx5aW5nIGJ5IHNxdWFyZSBvZiBkaXN0YW5jZS4KCSAgICAgICAgICAgIHZhciBzY29yZSA9IGJ1Y2tldHNbeF0gKiBkaXN0YW5jZVRvQmlnZ2VzdCAqIGRpc3RhbmNlVG9CaWdnZXN0OwoJICAgICAgICAgICAgaWYgKHNjb3JlID4gc2Vjb25kUGVha1Njb3JlKSB7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVhayA9IHg7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVha1Njb3JlID0gc2NvcmU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTWFrZSBzdXJlIGZpcnN0UGVhayBjb3JyZXNwb25kcyB0byB0aGUgYmxhY2sgcGVhay4KCSAgICAgICAgaWYgKGZpcnN0UGVhayA+IHNlY29uZFBlYWspIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZmlyc3RQZWFrOwoJICAgICAgICAgICAgZmlyc3RQZWFrID0gc2Vjb25kUGVhazsKCSAgICAgICAgICAgIHNlY29uZFBlYWsgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHRoZXJlIGlzIHRvbyBsaXR0bGUgY29udHJhc3QgaW4gdGhlIGltYWdlIHRvIHBpY2sgYSBtZWFuaW5nZnVsIGJsYWNrIHBvaW50LCB0aHJvdyByYXRoZXIKCSAgICAgICAgLy8gdGhhbiB3YXN0ZSB0aW1lIHRyeWluZyB0byBkZWNvZGUgdGhlIGltYWdlLCBhbmQgcmlzayBmYWxzZSBwb3NpdGl2ZXMuCgkgICAgICAgIGlmIChzZWNvbmRQZWFrIC0gZmlyc3RQZWFrIDw9IG51bUJ1Y2tldHMgLyAxNikgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCBhIHZhbGxleSBiZXR3ZWVuIHRoZW0gdGhhdCBpcyBsb3cgYW5kIGNsb3NlciB0byB0aGUgd2hpdGUgcGVhay4KCSAgICAgICAgdmFyIGJlc3RWYWxsZXkgPSBzZWNvbmRQZWFrIC0gMTsKCSAgICAgICAgdmFyIGJlc3RWYWxsZXlTY29yZSA9IC0xOwoJICAgICAgICBmb3IgKHZhciB4ID0gc2Vjb25kUGVhayAtIDE7IHggPiBmaXJzdFBlYWs7IHgtLSkgewoJICAgICAgICAgICAgdmFyIGZyb21GaXJzdCA9IHggLSBmaXJzdFBlYWs7CgkgICAgICAgICAgICB2YXIgc2NvcmUgPSBmcm9tRmlyc3QgKiBmcm9tRmlyc3QgKiAoc2Vjb25kUGVhayAtIHgpICogKG1heEJ1Y2tldENvdW50IC0gYnVja2V0c1t4XSk7CgkgICAgICAgICAgICBpZiAoc2NvcmUgPiBiZXN0VmFsbGV5U2NvcmUpIHsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5ID0geDsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5U2NvcmUgPSBzY29yZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gYmVzdFZhbGxleSA8PCBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUOwoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CSVRTID0gNTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUID0gOCAtIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX0JVQ0tFVFMgPSAxIDw8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuRU1QVFkgPSBVaW50OENsYW1wZWRBcnJheS5mcm9tKFswXSk7CgkgICAgcmV0dXJuIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCX0oQmluYXJpemVyXzEuZGVmYXVsdCkpOwoJR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyJDEuZGVmYXVsdCA9IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyRiID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEh5YnJpZEJpbmFyaXplciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyXzEgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMTsKCXZhciBCaXRNYXRyaXhfMSQ0ID0gQml0TWF0cml4JDE7CgkvKioKCSAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyBhIGxvY2FsIHRocmVzaG9sZGluZyBhbGdvcml0aG0sIHdoaWNoIHdoaWxlIHNsb3dlciB0aGFuIHRoZQoJICogR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBpcyBmYWlybHkgZWZmaWNpZW50IGZvciB3aGF0IGl0IGRvZXMuIEl0IGlzIGRlc2lnbmVkIGZvcgoJICogaGlnaCBmcmVxdWVuY3kgaW1hZ2VzIG9mIGJhcmNvZGVzIHdpdGggYmxhY2sgZGF0YSBvbiB3aGl0ZSBiYWNrZ3JvdW5kcy4gRm9yIHRoaXMgYXBwbGljYXRpb24sCgkgKiBpdCBkb2VzIGEgbXVjaCBiZXR0ZXIgam9iIHRoYW4gYSBnbG9iYWwgYmxhY2twb2ludCB3aXRoIHNldmVyZSBzaGFkb3dzIGFuZCBncmFkaWVudHMuCgkgKiBIb3dldmVyIGl0IHRlbmRzIHRvIHByb2R1Y2UgYXJ0aWZhY3RzIG9uIGxvd2VyIGZyZXF1ZW5jeSBpbWFnZXMgYW5kIGlzIHRoZXJlZm9yZSBub3QKCSAqIGEgZ29vZCBnZW5lcmFsIHB1cnBvc2UgYmluYXJpemVyIGZvciB1c2VzIG91dHNpZGUgWlhpbmcuCgkgKgoJICogVGhpcyBjbGFzcyBleHRlbmRzIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplciwgdXNpbmcgdGhlIG9sZGVyIGhpc3RvZ3JhbSBhcHByb2FjaCBmb3IgMUQgcmVhZGVycywKCSAqIGFuZCB0aGUgbmV3ZXIgbG9jYWwgYXBwcm9hY2ggZm9yIDJEIHJlYWRlcnMuIDFEIGRlY29kaW5nIHVzaW5nIGEgcGVyLXJvdyBoaXN0b2dyYW0gaXMgYWxyZWFkeQoJICogaW5oZXJlbnRseSBsb2NhbCwgYW5kIG9ubHkgZmFpbHMgZm9yIGhvcml6b250YWwgZ3JhZGllbnRzLiBXZSBjYW4gcmV2aXNpdCB0aGF0IHByb2JsZW0gbGF0ZXIsCgkgKiBidXQgZm9yIG5vdyBpdCB3YXMgbm90IGEgd2luIHRvIHVzZSBsb2NhbCBibG9ja3MgZm9yIDFELgoJICoKCSAqIFRoaXMgQmluYXJpemVyIGlzIHRoZSBkZWZhdWx0IGZvciB0aGUgdW5pdCB0ZXN0cyBhbmQgdGhlIHJlY29tbWVuZGVkIGNsYXNzIGZvciBsaWJyYXJ5IHVzZXJzLgoJICoKCSAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pCgkgKi8KCXZhciBIeWJyaWRCaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGIoSHlicmlkQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEh5YnJpZEJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tYXRyaXggPSBudWxsOwoJICAgICAgICByZXR1cm4gX3RoaXM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIENhbGN1bGF0ZXMgdGhlIGZpbmFsIEJpdE1hdHJpeCBvbmNlIGZvciBhbGwgcmVxdWVzdHMuIFRoaXMgY291bGQgYmUgY2FsbGVkIG9uY2UgZnJvbSB0aGUKCSAgICAgKiBjb25zdHJ1Y3RvciBpbnN0ZWFkLCBidXQgdGhlcmUgYXJlIHNvbWUgYWR2YW50YWdlcyB0byBkb2luZyBpdCBsYXppbHksIHN1Y2ggYXMgbWFraW5nCgkgICAgICogcHJvZmlsaW5nIGVhc2llciwgYW5kIG5vdCBkb2luZyBoZWF2eSBsaWZ0aW5nIHdoZW4gY2FsbGVycyBkb24ndCBleHBlY3QgaXQuCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLm1hdHJpeCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKHdpZHRoID49IEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiAmJiBoZWlnaHQgPj0gSHlicmlkQmluYXJpemVyLk1JTklNVU1fRElNRU5TSU9OKSB7CgkgICAgICAgICAgICB2YXIgbHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRNYXRyaXgoKTsKCSAgICAgICAgICAgIHZhciBzdWJXaWR0aCA9IHdpZHRoID4+IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKCh3aWR0aCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViV2lkdGgrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciBzdWJIZWlnaHQgPSBoZWlnaHQgPj4gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICBpZiAoKGhlaWdodCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViSGVpZ2h0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgYmxhY2tQb2ludHMgPSBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMobHVtaW5hbmNlcywgc3ViV2lkdGgsIHN1YkhlaWdodCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgICAgICB2YXIgbmV3TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDQuZGVmYXVsdCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgICAgIEh5YnJpZEJpbmFyaXplci5jYWxjdWxhdGVUaHJlc2hvbGRGb3JCbG9jayhsdW1pbmFuY2VzLCBzdWJXaWR0aCwgc3ViSGVpZ2h0LCB3aWR0aCwgaGVpZ2h0LCBibGFja1BvaW50cywgbmV3TWF0cml4KTsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gbmV3TWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgLy8gSWYgdGhlIGltYWdlIGlzIHRvbyBzbWFsbCwgZmFsbCBiYWNrIHRvIHRoZSBnbG9iYWwgaGlzdG9ncmFtIGFwcHJvYWNoLgoJICAgICAgICAgICAgdGhpcy5tYXRyaXggPSBfc3VwZXIucHJvdG90eXBlLmdldEJsYWNrTWF0cml4LmNhbGwodGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuY3JlYXRlQmluYXJpemVyID0gZnVuY3Rpb24gKHNvdXJjZSkgewoJICAgICAgICByZXR1cm4gbmV3IEh5YnJpZEJpbmFyaXplcihzb3VyY2UpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRm9yIGVhY2ggYmxvY2sgaW4gdGhlIGltYWdlLCBjYWxjdWxhdGUgdGhlIGF2ZXJhZ2UgYmxhY2sgcG9pbnQgdXNpbmcgYSA1eDUgZ3JpZAoJICAgICAqIG9mIHRoZSBibG9ja3MgYXJvdW5kIGl0LiBBbHNvIGhhbmRsZXMgdGhlIGNvcm5lciBjYXNlcyAoZnJhY3Rpb25hbCBibG9ja3MgYXJlIGNvbXB1dGVkIGJhc2VkCgkgICAgICogb24gdGhlIGxhc3QgcGl4ZWxzIGluIHRoZSByb3cvY29sdW1uIHdoaWNoIGFyZSBhbHNvIHVzZWQgaW4gdGhlIHByZXZpb3VzIGJsb2NrKS4KCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlVGhyZXNob2xkRm9yQmxvY2sgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBibGFja1BvaW50cywgbWF0cml4KSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBzdWJIZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgdG9wXzEgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHksIDIsIHN1YkhlaWdodCAtIDMpOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBzdWJXaWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHhvZmZzZXQgPSB4IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgICAgIGlmICh4b2Zmc2V0ID4gbWF4WE9mZnNldCkgewoJICAgICAgICAgICAgICAgICAgICB4b2Zmc2V0ID0gbWF4WE9mZnNldDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHgsIDIsIHN1YldpZHRoIC0gMyk7CgkgICAgICAgICAgICAgICAgdmFyIHN1bSA9IDA7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeiA9IC0yOyB6IDw9IDI7IHorKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgYmxhY2tSb3cgPSBibGFja1BvaW50c1t0b3BfMSArIHpdOwoJICAgICAgICAgICAgICAgICAgICBzdW0gKz0gYmxhY2tSb3dbbGVmdCAtIDJdICsgYmxhY2tSb3dbbGVmdCAtIDFdICsgYmxhY2tSb3dbbGVmdF0gKyBibGFja1Jvd1tsZWZ0ICsgMV0gKyBibGFja1Jvd1tsZWZ0ICsgMl07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlID0gc3VtIC8gMjU7CgkgICAgICAgICAgICAgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrKGx1bWluYW5jZXMsIHhvZmZzZXQsIHlvZmZzZXQsIGF2ZXJhZ2UsIHdpZHRoLCBtYXRyaXgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FwID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG1pbiAvKmludCovLCBtYXggLyppbnQqLykgewoJICAgICAgICByZXR1cm4gdmFsdWUgPCBtaW4gPyBtaW4gOiB2YWx1ZSA+IG1heCA/IG1heCA6IHZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbGllcyBhIHNpbmdsZSB0aHJlc2hvbGQgdG8gYSBibG9jayBvZiBwaXhlbHMuCgkgICAgICovCgkgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrID0gZnVuY3Rpb24gKGx1bWluYW5jZXMsIHhvZmZzZXQgLyppbnQqLywgeW9mZnNldCAvKmludCovLCB0aHJlc2hvbGQgLyppbnQqLywgc3RyaWRlIC8qaW50Ki8sIG1hdHJpeCkgewoJICAgICAgICBmb3IgKHZhciB5ID0gMCwgb2Zmc2V0ID0geW9mZnNldCAqIHN0cmlkZSArIHhvZmZzZXQ7IHkgPCBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsgeSsrLCBvZmZzZXQgKz0gc3RyaWRlKSB7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB4KyspIHsKCSAgICAgICAgICAgICAgICAvLyBDb21wYXJpc29uIG5lZWRzIHRvIGJlIDw9IHNvIHRoYXQgYmxhY2sgPT0gMCBwaXhlbHMgYXJlIGJsYWNrIGV2ZW4gaWYgdGhlIHRocmVzaG9sZCBpcyAwLgoJICAgICAgICAgICAgICAgIGlmICgobHVtaW5hbmNlc1tvZmZzZXQgKyB4XSAmIDB4RkYpIDw9IHRocmVzaG9sZCkgewoJICAgICAgICAgICAgICAgICAgICBtYXRyaXguc2V0KHhvZmZzZXQgKyB4LCB5b2Zmc2V0ICsgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDYWxjdWxhdGVzIGEgc2luZ2xlIGJsYWNrIHBvaW50IGZvciBlYWNoIGJsb2NrIG9mIHBpeGVscyBhbmQgc2F2ZXMgaXQgYXdheS4KCSAgICAgKiBTZWUgdGhlIGZvbGxvd2luZyB0aHJlYWQgZm9yIGEgZGlzY3Vzc2lvbiBvZiB0aGlzIGFsZ29yaXRobToKCSAgICAgKiAgaHR0cDovL2dyb3Vwcy5nb29nbGUuY29tL2dyb3VwL3p4aW5nL2Jyb3dzZV90aHJlYWQvdGhyZWFkL2QwNmVmYTJjMzVhN2RkYzAKCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOndoaXRlc3BhY2UKCSAgICAgICAgdmFyIGJsYWNrUG9pbnRzID0gbmV3IEFycmF5KHN1YkhlaWdodCk7IC8vIHN1YldpZHRoCgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgc3ViSGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGJsYWNrUG9pbnRzW3ldID0gbmV3IEludDMyQXJyYXkoc3ViV2lkdGgpOwoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHN1YldpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgeG9mZnNldCA9IHggPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICAgICAgaWYgKHhvZmZzZXQgPiBtYXhYT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgICAgIHhvZmZzZXQgPSBtYXhYT2Zmc2V0OwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB2YXIgc3VtID0gMDsKCSAgICAgICAgICAgICAgICB2YXIgbWluID0gMHhGRjsKCSAgICAgICAgICAgICAgICB2YXIgbWF4ID0gMDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciB5eSA9IDAsIG9mZnNldCA9IHlvZmZzZXQgKiB3aWR0aCArIHhvZmZzZXQ7IHl5IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHl5KyssIG9mZnNldCArPSB3aWR0aCkgewoJICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaXhlbCA9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgIHN1bSArPSBwaXhlbDsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0aWxsIGxvb2tpbmcgZm9yIGdvb2QgY29udHJhc3QKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwaXhlbCA8IG1pbikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IHBpeGVsOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBpeGVsID4gbWF4KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gcGl4ZWw7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgLy8gc2hvcnQtY2lyY3VpdCBtaW4vbWF4IHRlc3RzIG9uY2UgZHluYW1pYyByYW5nZSBpcyBtZXQKCSAgICAgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA+IEh5YnJpZEJpbmFyaXplci5NSU5fRFlOQU1JQ19SQU5HRSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluaXNoIHRoZSByZXN0IG9mIHRoZSByb3dzIHF1aWNrbHkKCSAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoeXkrKywgb2Zmc2V0ICs9IHdpZHRoOyB5eSA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB5eSsrLCBvZmZzZXQgKz0gd2lkdGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgLy8gVGhlIGRlZmF1bHQgZXN0aW1hdGUgaXMgdGhlIGF2ZXJhZ2Ugb2YgdGhlIHZhbHVlcyBpbiB0aGUgYmxvY2suCgkgICAgICAgICAgICAgICAgdmFyIGF2ZXJhZ2UgPSBzdW0gPj4gKEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSICogMik7CgkgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA8PSBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gSWYgdmFyaWF0aW9uIHdpdGhpbiB0aGUgYmxvY2sgaXMgbG93LCBhc3N1bWUgdGhpcyBpcyBhIGJsb2NrIHdpdGggb25seSBsaWdodCBvciBvbmx5CgkgICAgICAgICAgICAgICAgICAgIC8vIGRhcmsgcGl4ZWxzLiBJbiB0aGF0IGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gdXNlIHRoZSBhdmVyYWdlLCBhcyBpdCB3b3VsZCBkaXZpZGUgdGhpcwoJICAgICAgICAgICAgICAgICAgICAvLyBsb3cgY29udHJhc3QgYXJlYSBpbnRvIGJsYWNrIGFuZCB3aGl0ZSBwaXhlbHMsIGVzc2VudGlhbGx5IGNyZWF0aW5nIGRhdGEgb3V0IG9mIG5vaXNlLgoJICAgICAgICAgICAgICAgICAgICAvLwoJICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZGVmYXVsdCBhc3N1bXB0aW9uIGlzIHRoYXQgdGhlIGJsb2NrIGlzIGxpZ2h0L2JhY2tncm91bmQuIFNpbmNlIG5vIGVzdGltYXRlIGZvcgoJICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbGV2ZWwgb2YgZGFyayBwaXhlbHMgZXhpc3RzIGxvY2FsbHksIHVzZSBoYWxmIHRoZSBtaW4gZm9yIHRoZSBibG9jay4KCSAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IG1pbiAvIDI7CgkgICAgICAgICAgICAgICAgICAgIGlmICh5ID4gMCAmJiB4ID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ycmVjdCB0aGUgIndoaXRlIGJhY2tncm91bmQiIGFzc3VtcHRpb24gZm9yIGJsb2NrcyB0aGF0IGhhdmUgbmVpZ2hib3JzIGJ5IGNvbXBhcmluZwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHBpeGVscyBpbiB0aGlzIGJsb2NrIHRvIHRoZSBwcmV2aW91c2x5IGNhbGN1bGF0ZWQgYmxhY2sgcG9pbnRzLiBUaGlzIGlzIGJhc2VkIG9uCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgZmFjdCB0aGF0IGRhcmsgYmFyY29kZSBzeW1ib2xvZ3kgaXMgYWx3YXlzIHN1cnJvdW5kZWQgYnkgc29tZSBhbW91bnQgb2YgbGlnaHQKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhY2tncm91bmQgZm9yIHdoaWNoIHJlYXNvbmFibGUgYmxhY2sgcG9pbnQgZXN0aW1hdGVzIHdlcmUgbWFkZS4gVGhlIGJwIGVzdGltYXRlZCBhdAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGJvdW5kYXJpZXMgaXMgdXNlZCBmb3IgdGhlIGludGVyaW9yLgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIChtaW4gPCBicCkgaXMgYXJiaXRyYXJ5IGJ1dCB3b3JrcyBiZXR0ZXIgdGhhbiBvdGhlciBoZXVyaXN0aWNzIHRoYXQgd2VyZSB0cmllZC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50ID0gKGJsYWNrUG9pbnRzW3kgLSAxXVt4XSArICgyICogYmxhY2tQb2ludHNbeV1beCAtIDFdKSArIGJsYWNrUG9pbnRzW3kgLSAxXVt4IC0gMV0pIC8gNDsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW4gPCBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IGF2ZXJhZ2VOZWlnaGJvckJsYWNrUG9pbnQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYmxhY2tQb2ludHNbeV1beF0gPSBhdmVyYWdlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBibGFja1BvaW50czsKCSAgICB9OwoJICAgIC8vIFRoaXMgY2xhc3MgdXNlcyA1eDUgYmxvY2tzIHRvIGNvbXB1dGUgbG9jYWwgbHVtaW5hbmNlLCB3aGVyZSBlYWNoIGJsb2NrIGlzIDh4OCBwaXhlbHMuCgkgICAgLy8gU28gdGhpcyBpcyB0aGUgc21hbGxlc3QgZGltZW5zaW9uIGluIGVhY2ggYXhpcyB3ZSBjYW4gYWNjZXB0LgoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSID0gMzsKCSAgICBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSA9IDEgPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7IC8vIC4uLjAxMDAuLi4wMAoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0sgPSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSAtIDE7IC8vIC4uLjAwMTEuLi4xMQoJICAgIEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiA9IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFICogNTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UgPSAyNDsKCSAgICByZXR1cm4gSHlicmlkQmluYXJpemVyOwoJfShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXJfMS5kZWZhdWx0KSk7Cgl2YXIgX2RlZmF1bHQkMiA9IEh5YnJpZEJpbmFyaXplciQxLmRlZmF1bHQgPSBIeWJyaWRCaW5hcml6ZXI7CgoJdmFyIFJHQkx1bWluYW5jZVNvdXJjZSQxID0ge307CgoJdmFyIEludmVydGVkTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgl2YXIgTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMSA9IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJDE7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nIHsqLwoJLyoqCgkgKiBUaGUgcHVycG9zZSBvZiB0aGlzIGNsYXNzIGhpZXJhcmNoeSBpcyB0byBhYnN0cmFjdCBkaWZmZXJlbnQgYml0bWFwIGltcGxlbWVudGF0aW9ucyBhY3Jvc3MKCSAqIHBsYXRmb3JtcyBpbnRvIGEgc3RhbmRhcmQgaW50ZXJmYWNlIGZvciByZXF1ZXN0aW5nIGdyZXlzY2FsZSBsdW1pbmFuY2UgdmFsdWVzLiBUaGUgaW50ZXJmYWNlCgkgKiBvbmx5IHByb3ZpZGVzIGltbXV0YWJsZSBtZXRob2RzOyB0aGVyZWZvcmUgY3JvcCBhbmQgcm90YXRpb24gY3JlYXRlIGNvcGllcy4gVGhpcyBpcyB0byBlbnN1cmUKCSAqIHRoYXQgb25lIFJlYWRlciBkb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsIGx1bWluYW5jZSBzb3VyY2UgYW5kIGxlYXZlIGl0IGluIGFuIHVua25vd24gc3RhdGUKCSAqIGZvciBvdGhlciBSZWFkZXJzIGluIHRoZSBjaGFpbi4KCSAqCgkgKiBAYXV0aG9yIGRzd2l0a2luQGdvb2dsZS5jb20gKERhbmllbCBTd2l0a2luKQoJICovCgl2YXIgTHVtaW5hbmNlU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEx1bWluYW5jZVNvdXJjZSh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgYml0bWFwLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLndpZHRoOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBUaGUgaGVpZ2h0IG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmhlaWdodDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNyb3BwaW5nLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIGNyb3BwZWQgaW1hZ2UgZGF0YS4gSW1wbGVtZW50YXRpb25zIG1heSBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZQoJICAgICAqIG9yaWdpbmFsIGRhdGEgcmF0aGVyIHRoYW4gYSBjb3B5LiBPbmx5IGNhbGxhYmxlIGlmIGlzQ3JvcFN1cHBvcnRlZCgpIGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gbGVmdCBUaGUgbGVmdCBjb29yZGluYXRlLCB3aGljaCBtdXN0IGJlIGluIFswLGdldFdpZHRoKCkpCgkgICAgICogQHBhcmFtIHRvcCBUaGUgdG9wIGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0SGVpZ2h0KCkpCgkgICAgICogQHBhcmFtIHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgcmVjdGFuZ2xlIHRvIGNyb3AuCgkgICAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcmV0dXJuIEEgY3JvcHBlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCBjcm9wcGluZy4nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNvdW50ZXItY2xvY2t3aXNlIHJvdGF0aW9uLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCByb3RhdGlvbiBieSA5MCBkZWdyZWVzLicpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBhIG5ldyBvYmplY3Qgd2l0aCByb3RhdGVkIGltYWdlIGRhdGEgYnkgNDUgZGVncmVlcyBjb3VudGVyY2xvY2t3aXNlLgoJICAgICAqIE9ubHkgY2FsbGFibGUgaWYge0BsaW5rICNpc1JvdGF0ZVN1cHBvcnRlZCgpfSBpcyB0cnVlLgoJICAgICAqCgkgICAgICogQHJldHVybiBBIHJvdGF0ZWQgdmVyc2lvbiBvZiB0aGlzIG9iamVjdC4KCSAgICAgKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnJvdGF0ZUNvdW50ZXJDbG9ja3dpc2U0NSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnVGhpcyBsdW1pbmFuY2Ugc291cmNlIGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24gYnkgNDUgZGVncmVlcy4nKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcm93ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHRoaXMud2lkdGgpOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQxLmRlZmF1bHQoKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLmhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgc291cmNlUm93ID0gdGhpcy5nZXRSb3coeSwgcm93KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGx1bWluYW5jZSA9IHNvdXJjZVJvd1t4XSAmIDB4RkY7CgkgICAgICAgICAgICAgICAgdmFyIGMgPSB2b2lkIDA7CgkgICAgICAgICAgICAgICAgaWYgKGx1bWluYW5jZSA8IDB4NDApIHsKCSAgICAgICAgICAgICAgICAgICAgYyA9ICcjJzsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAobHVtaW5hbmNlIDwgMHg4MCkgewoJICAgICAgICAgICAgICAgICAgICBjID0gJysnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmIChsdW1pbmFuY2UgPCAweEMwKSB7CgkgICAgICAgICAgICAgICAgICAgIGMgPSAnLic7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICBjID0gJyAnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGMpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnXG4nKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0LnRvU3RyaW5nKCk7CgkgICAgfTsKCSAgICByZXR1cm4gTHVtaW5hbmNlU291cmNlOwoJfSgpKTsKCUx1bWluYW5jZVNvdXJjZSQxLmRlZmF1bHQgPSBMdW1pbmFuY2VTb3VyY2U7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnZlcnRlZEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEkMSA9IEx1bWluYW5jZVNvdXJjZSQxOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHdoaWNoIGludmVydHMgdGhlIGx1bWluYW5jZXMgaXQgcmV0dXJucyAtLSBibGFjayBiZWNvbWVzCgkgKiB3aGl0ZSBhbmQgdmljZSB2ZXJzYSwgYW5kIGVhY2ggdmFsdWUgYmVjb21lcyAoMjU1LXZhbHVlKS4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGEoSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UsIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UoZGVsZWdhdGUpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVsZWdhdGUuZ2V0V2lkdGgoKSwgZGVsZWdhdGUuZ2V0SGVpZ2h0KCkpIHx8IHRoaXM7CgkgICAgICAgIF90aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgdmFyIHNvdXJjZVJvdyA9IHRoaXMuZGVsZWdhdGUuZ2V0Um93KHksIHJvdyk7CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aWR0aDsgaSsrKSB7CgkgICAgICAgICAgICBzb3VyY2VSb3dbaV0gPSAvKihieXRlKSovICgyNTUgLSAoc291cmNlUm93W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBzb3VyY2VSb3c7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmdldE1hdHJpeCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIG1hdHJpeCA9IHRoaXMuZGVsZWdhdGUuZ2V0TWF0cml4KCk7CgkgICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmdldFdpZHRoKCkgKiB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgaW52ZXJ0ZWRNYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkobGVuZ3RoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewoJICAgICAgICAgICAgaW52ZXJ0ZWRNYXRyaXhbaV0gPSAvKihieXRlKSovICgyNTUgLSAobWF0cml4W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBpbnZlcnRlZE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUuY3JvcChsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLmlzUm90YXRlU3VwcG9ydGVkKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG9yaWdpbmFsIGRlbGVnYXRlIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHNpbmNlIGludmVydCB1bmRvZXMgaXRzZWxmCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCkpOwoJICAgIH07CgkgICAgcmV0dXJuIEludmVydGVkTHVtaW5hbmNlU291cmNlOwoJfShMdW1pbmFuY2VTb3VyY2VfMSQxLmRlZmF1bHQpKTsKCUludmVydGVkTHVtaW5hbmNlU291cmNlJDEuZGVmYXVsdCA9IEludmVydGVkTHVtaW5hbmNlU291cmNlOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUkdCTHVtaW5hbmNlU291cmNlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkgLy8gcmVxdWlyZWQgYmVjYXVzZSBvZiBjaXJjdWxhciBkZXBlbmRlbmNpZXMgYmV0d2VlbiBMdW1pbmFuY2VTb3VyY2UgYW5kIEludmVydGVkTHVtaW5hbmNlU291cmNlCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMSA9IEludmVydGVkTHVtaW5hbmNlU291cmNlJDE7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEgPSBMdW1pbmFuY2VTb3VyY2UkMTsKCXZhciBTeXN0ZW1fMSQyID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNiA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBUaGlzIGNsYXNzIGlzIHVzZWQgdG8gaGVscCBkZWNvZGUgaW1hZ2VzIGZyb20gZmlsZXMgd2hpY2ggYXJyaXZlIGFzIFJHQiBkYXRhIGZyb20KCSAqIGFuIEFSR0IgcGl4ZWwgYXJyYXkuIEl0IGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24uCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgQmV0YW1pbm9zCgkgKi8KCXZhciBSR0JMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDkoUkdCTHVtaW5hbmNlU291cmNlLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIFJHQkx1bWluYW5jZVNvdXJjZShsdW1pbmFuY2VzLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgZGF0YVdpZHRoIC8qaW50Ki8sIGRhdGFIZWlnaHQgLyppbnQqLywgbGVmdCAvKmludCovLCB0b3AgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB3aWR0aCwgaGVpZ2h0KSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5kYXRhV2lkdGggPSBkYXRhV2lkdGg7CgkgICAgICAgIF90aGlzLmRhdGFIZWlnaHQgPSBkYXRhSGVpZ2h0OwoJICAgICAgICBfdGhpcy5sZWZ0ID0gbGVmdDsKCSAgICAgICAgX3RoaXMudG9wID0gdG9wOwoJICAgICAgICBpZiAobHVtaW5hbmNlcy5CWVRFU19QRVJfRUxFTUVOVCA9PT0gNCkgeyAvLyBJbnQzMkFycmF5CgkgICAgICAgICAgICB2YXIgc2l6ZSA9IHdpZHRoICogaGVpZ2h0OwoJICAgICAgICAgICAgdmFyIGx1bWluYW5jZXNVaW50OEFycmF5ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHNpemUpOwoJICAgICAgICAgICAgZm9yICh2YXIgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgc2l6ZTsgb2Zmc2V0KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgcGl4ZWwgPSBsdW1pbmFuY2VzW29mZnNldF07CgkgICAgICAgICAgICAgICAgdmFyIHIgPSAocGl4ZWwgPj4gMTYpICYgMHhmZjsgLy8gcmVkCgkgICAgICAgICAgICAgICAgdmFyIGcyID0gKHBpeGVsID4+IDcpICYgMHgxZmU7IC8vIDIgKiBncmVlbgoJICAgICAgICAgICAgICAgIHZhciBiID0gcGl4ZWwgJiAweGZmOyAvLyBibHVlCgkgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGdyZWVuLWZhdm91cmluZyBhdmVyYWdlIGNoZWFwbHkKCSAgICAgICAgICAgICAgICBsdW1pbmFuY2VzVWludDhBcnJheVtvZmZzZXRdID0gLyooYnl0ZSkgKi8gKChyICsgZzIgKyBiKSAvIDQpICYgMHhGRjsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzVWludDhBcnJheTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGRhdGFXaWR0aCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YVdpZHRoID0gd2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gZGF0YUhlaWdodCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YUhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBsZWZ0KSB7CgkgICAgICAgICAgICBfdGhpcy5sZWZ0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0b3ApIHsKCSAgICAgICAgICAgIF90aGlzLnRvcCA9IDA7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKF90aGlzLmxlZnQgKyB3aWR0aCA+IF90aGlzLmRhdGFXaWR0aCB8fCBfdGhpcy50b3AgKyBoZWlnaHQgPiBfdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNi5kZWZhdWx0KCdDcm9wIHJlY3RhbmdsZSBkb2VzIG5vdCBmaXQgd2l0aGluIGltYWdlIGRhdGEuJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgaWYgKHkgPCAwIHx8IHkgPj0gdGhpcy5nZXRIZWlnaHQoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCgnUmVxdWVzdGVkIHJvdyBpcyBvdXRzaWRlIHRoZSBpbWFnZTogJyArIHkpOwoJICAgICAgICB9CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gbnVsbCB8fCByb3cgPT09IHVuZGVmaW5lZCB8fCByb3cubGVuZ3RoIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBVaW50OENsYW1wZWRBcnJheSh3aWR0aCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG9mZnNldCA9ICh5ICsgdGhpcy50b3ApICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIFN5c3RlbV8xJDIuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5sdW1pbmFuY2VzLCBvZmZzZXQsIHJvdywgMCwgd2lkdGgpOwoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJHQkx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0TWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBJZiB0aGUgY2FsbGVyIGFza3MgZm9yIHRoZSBlbnRpcmUgdW5kZXJseWluZyBpbWFnZSwgc2F2ZSB0aGUgY29weSBhbmQgZ2l2ZSB0aGVtIHRoZQoJICAgICAgICAvLyBvcmlnaW5hbCBkYXRhLiBUaGUgZG9jcyBzcGVjaWZpY2FsbHkgd2FybiB0aGF0IHJlc3VsdC5sZW5ndGggbXVzdCBiZSBpZ25vcmVkLgoJICAgICAgICBpZiAod2lkdGggPT09IHRoaXMuZGF0YVdpZHRoICYmIGhlaWdodCA9PT0gdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5sdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhcmVhID0gd2lkdGggKiBoZWlnaHQ7CgkgICAgICAgIHZhciBtYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkoYXJlYSk7CgkgICAgICAgIHZhciBpbnB1dE9mZnNldCA9IHRoaXMudG9wICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIC8vIElmIHRoZSB3aWR0aCBtYXRjaGVzIHRoZSBmdWxsIHdpZHRoIG9mIHRoZSB1bmRlcmx5aW5nIGRhdGEsIHBlcmZvcm0gYSBzaW5nbGUgY29weS4KCSAgICAgICAgaWYgKHdpZHRoID09PSB0aGlzLmRhdGFXaWR0aCkgewoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIDAsIGFyZWEpOwoJICAgICAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICAgICAgfQoJICAgICAgICAvLyBPdGhlcndpc2UgY29weSBvbmUgY3JvcHBlZCByb3cgYXQgYSB0aW1lLgoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb3V0cHV0T2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIG91dHB1dE9mZnNldCwgd2lkdGgpOwoJICAgICAgICAgICAgaW5wdXRPZmZzZXQgKz0gdGhpcy5kYXRhV2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSR0JMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmlzQ3JvcFN1cHBvcnRlZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgUkdCTHVtaW5hbmNlU291cmNlKHRoaXMubHVtaW5hbmNlcywgd2lkdGgsIGhlaWdodCwgdGhpcy5kYXRhV2lkdGgsIHRoaXMuZGF0YUhlaWdodCwgdGhpcy5sZWZ0ICsgbGVmdCwgdGhpcy50b3AgKyB0b3ApOwoJICAgIH07CgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMS5kZWZhdWx0KHRoaXMpOwoJICAgIH07CgkgICAgcmV0dXJuIFJHQkx1bWluYW5jZVNvdXJjZTsKCX0oTHVtaW5hbmNlU291cmNlXzEuZGVmYXVsdCkpOwoJdmFyIF9kZWZhdWx0JDEgPSBSR0JMdW1pbmFuY2VTb3VyY2UkMS5kZWZhdWx0ID0gUkdCTHVtaW5hbmNlU291cmNlOwoKCXZhciBRUkNvZGVSZWFkZXIkMSA9IHt9OwoKCXZhciBCYXJjb2RlRm9ybWF0JDEgPSB7fTsKCgkvKgoJICogRGlyZWN0IHBvcnQgdG8gVHlwZVNjcmlwdCBvZiBaWGluZyBieSBBZHJpYW4gVG/ImWPEgwoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFyY29kZUZvcm1hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogRW51bWVyYXRlcyBiYXJjb2RlIGZvcm1hdHMga25vd24gdG8gdGhpcyBwYWNrYWdlLiBQbGVhc2Uga2VlcCBhbHBoYWJldGl6ZWQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJhcmNvZGVGb3JtYXQ7CgkoZnVuY3Rpb24gKEJhcmNvZGVGb3JtYXQpIHsKCSAgICAvKiogQXp0ZWMgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJBWlRFQyJdID0gMF0gPSAiQVpURUMiOwoJICAgIC8qKiBDT0RBQkFSIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREFCQVIiXSA9IDFdID0gIkNPREFCQVIiOwoJICAgIC8qKiBDb2RlIDM5IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfMzkiXSA9IDJdID0gIkNPREVfMzkiOwoJICAgIC8qKiBDb2RlIDkzIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfOTMiXSA9IDNdID0gIkNPREVfOTMiOwoJICAgIC8qKiBDb2RlIDEyOCAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJDT0RFXzEyOCJdID0gNF0gPSAiQ09ERV8xMjgiOwoJICAgIC8qKiBEYXRhIE1hdHJpeCAyRCBiYXJjb2RlIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkRBVEFfTUFUUklYIl0gPSA1XSA9ICJEQVRBX01BVFJJWCI7CgkgICAgLyoqIEVBTi04IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkVBTl84Il0gPSA2XSA9ICJFQU5fOCI7CgkgICAgLyoqIEVBTi0xMyAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJFQU5fMTMiXSA9IDddID0gIkVBTl8xMyI7CgkgICAgLyoqIElURiAoSW50ZXJsZWF2ZWQgVHdvIG9mIEZpdmUpIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIklURiJdID0gOF0gPSAiSVRGIjsKCSAgICAvKiogTWF4aUNvZGUgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJNQVhJQ09ERSJdID0gOV0gPSAiTUFYSUNPREUiOwoJICAgIC8qKiBQREY0MTcgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUERGXzQxNyJdID0gMTBdID0gIlBERl80MTciOwoJICAgIC8qKiBRUiBDb2RlIDJEIGJhcmNvZGUgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUVJfQ09ERSJdID0gMTFdID0gIlFSX0NPREUiOwoJICAgIC8qKiBSU1MgMTQgKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlJTU18xNCJdID0gMTJdID0gIlJTU18xNCI7CgkgICAgLyoqIFJTUyBFWFBBTkRFRCAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUlNTX0VYUEFOREVEIl0gPSAxM10gPSAiUlNTX0VYUEFOREVEIjsKCSAgICAvKiogVVBDLUEgMUQgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiVVBDX0EiXSA9IDE0XSA9ICJVUENfQSI7CgkgICAgLyoqIFVQQy1FIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FIl0gPSAxNV0gPSAiVVBDX0UiOwoJICAgIC8qKiBVUEMvRUFOIGV4dGVuc2lvbiBmb3JtYXQuIE5vdCBhIHN0YW5kLWFsb25lIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSAxNl0gPSAiVVBDX0VBTl9FWFRFTlNJT04iOwoJfSkoQmFyY29kZUZvcm1hdCB8fCAoQmFyY29kZUZvcm1hdCA9IHt9KSk7CglCYXJjb2RlRm9ybWF0JDEuZGVmYXVsdCA9IEJhcmNvZGVGb3JtYXQ7CgoJdmFyIFJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIFN5c3RlbV8xJDEgPSBTeXN0ZW0kMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBiYXJjb2RlIHdpdGhpbiBhbiBpbWFnZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocHJpdmF0ZSB0ZXh0OiBzdHJpbmcsCgkgICAgLy8gICAgICAgICAgICAgICBVaW50OEFycmF5IHJhd0J5dGVzLAoJICAgIC8vICAgICAgICAgICAgICAgUmVzdWx0UG9jb25zdCByZXN1bHRQb2ludHM6IEludDMyQXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICBCYXJjb2RlRm9ybWF0IGZvcm1hdCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmVzdWx0UG9pbnRzLCBmb3JtYXQsIFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpKQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IodGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgVWludDhBcnJheSByYXdCeXRlcywKCSAgICAvLyAgICAgICAgICAgICAgIFJlc3VsdFBvY29uc3QgcmVzdWx0UG9pbnRzOiBJbnQzMkFycmF5LAoJICAgIC8vICAgICAgICAgICAgICAgQmFyY29kZUZvcm1hdCBmb3JtYXQsCgkgICAgLy8gICAgICAgICAgICAgICBsb25nIHRpbWVzdGFtcCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoLAoJICAgIC8vICAgICAgICByZXN1bHRQb2ludHMsIGZvcm1hdCwgdGltZXN0YW1wKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBSZXN1bHQodGV4dCwgcmF3Qnl0ZXMsIG51bUJpdHMsIHJlc3VsdFBvaW50cywgZm9ybWF0LCB0aW1lc3RhbXApIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPT09IHZvaWQgMCkgeyBudW1CaXRzID0gcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoOyB9CgkgICAgICAgIGlmICh0aW1lc3RhbXAgPT09IHZvaWQgMCkgeyB0aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsgfQoJICAgICAgICB0aGlzLnRleHQgPSB0ZXh0OwoJICAgICAgICB0aGlzLnJhd0J5dGVzID0gcmF3Qnl0ZXM7CgkgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gcmVzdWx0UG9pbnRzOwoJICAgICAgICB0aGlzLmZvcm1hdCA9IGZvcm1hdDsKCSAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0aW1lc3RhbXA7CgkgICAgICAgIHRoaXMudGV4dCA9IHRleHQ7CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gbnVtQml0cyB8fCBudWxsID09PSBudW1CaXRzKSB7CgkgICAgICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IG51bGwgfHwgcmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludHMgPSByZXN1bHRQb2ludHM7CgkgICAgICAgIHRoaXMuZm9ybWF0ID0gZm9ybWF0OwoJICAgICAgICB0aGlzLnJlc3VsdE1ldGFkYXRhID0gbnVsbDsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdGltZXN0YW1wIHx8IG51bGwgPT09IHRpbWVzdGFtcCkgewoJICAgICAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMudGltZXN0YW1wID0gdGltZXN0YW1wOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IHRleHQgZW5jb2RlZCBieSB0aGUgYmFyY29kZQoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0VGV4dCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGV4dDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IGJ5dGVzIGVuY29kZWQgYnkgdGhlIGJhcmNvZGUsIGlmIGFwcGxpY2FibGUsIG90aGVyd2lzZSB7QGNvZGUgbnVsbH0KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0TnVtQml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMubnVtQml0czsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcG9pbnRzIHJlbGF0ZWQgdG8gdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGVzZSBhcmUgdHlwaWNhbGx5IHBvaW50cwoJICAgICAqICAgICAgICAgaWRlbnRpZnlpbmcgZmluZGVyIHBhdHRlcm5zIG9yIHRoZSBjb3JuZXJzIG9mIHRoZSBiYXJjb2RlLiBUaGUgZXhhY3QgbWVhbmluZyBpcwoJICAgICAqICAgICAgICAgc3BlY2lmaWMgdG8gdGhlIHR5cGUgb2YgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkLgoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0UmVzdWx0UG9pbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCYXJjb2RlRm9ybWF0fSByZXByZXNlbnRpbmcgdGhlIGZvcm1hdCBvZiB0aGUgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkCgkgICAgICovCgkgICAgUmVzdWx0LnByb3RvdHlwZS5nZXRCYXJjb2RlRm9ybWF0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBNYXB9IG1hcHBpbmcge0BsaW5rIFJlc3VsdE1ldGFkYXRhVHlwZX0ga2V5cyB0byB2YWx1ZXMuIE1heSBiZQoJICAgICAqICAge0Bjb2RlIG51bGx9LiBUaGlzIGNvbnRhaW5zIG9wdGlvbmFsIG1ldGFkYXRhIGFib3V0IHdoYXQgd2FzIGRldGVjdGVkIGFib3V0IHRoZSBiYXJjb2RlLAoJICAgICAqICAgbGlrZSBvcmllbnRhdGlvbi4KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJlc3VsdE1ldGFkYXRhID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRNZXRhZGF0YTsKCSAgICB9OwoJICAgIFJlc3VsdC5wcm90b3R5cGUucHV0TWV0YWRhdGEgPSBmdW5jdGlvbiAodHlwZSwgdmFsdWUpIHsKCSAgICAgICAgaWYgKHRoaXMucmVzdWx0TWV0YWRhdGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0TWV0YWRhdGEgPSBuZXcgTWFwKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YS5zZXQodHlwZSwgdmFsdWUpOwoJICAgIH07CgkgICAgUmVzdWx0LnByb3RvdHlwZS5wdXRBbGxNZXRhZGF0YSA9IGZ1bmN0aW9uIChtZXRhZGF0YSkgewoJICAgICAgICBpZiAobWV0YWRhdGEgIT09IG51bGwpIHsKCSAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdE1ldGFkYXRhID09PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG1ldGFkYXRhOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG5ldyBNYXAobWV0YWRhdGEpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmFkZFJlc3VsdFBvaW50cyA9IGZ1bmN0aW9uIChuZXdQb2ludHMpIHsKCSAgICAgICAgdmFyIG9sZFBvaW50cyA9IHRoaXMucmVzdWx0UG9pbnRzOwoJICAgICAgICBpZiAob2xkUG9pbnRzID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aGlzLnJlc3VsdFBvaW50cyA9IG5ld1BvaW50czsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChuZXdQb2ludHMgIT09IG51bGwgJiYgbmV3UG9pbnRzLmxlbmd0aCA+IDApIHsKCSAgICAgICAgICAgIHZhciBhbGxQb2ludHMgPSBuZXcgQXJyYXkob2xkUG9pbnRzLmxlbmd0aCArIG5ld1BvaW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgU3lzdGVtXzEkMS5kZWZhdWx0LmFycmF5Y29weShvbGRQb2ludHMsIDAsIGFsbFBvaW50cywgMCwgb2xkUG9pbnRzLmxlbmd0aCk7CgkgICAgICAgICAgICBTeXN0ZW1fMSQxLmRlZmF1bHQuYXJyYXljb3B5KG5ld1BvaW50cywgMCwgYWxsUG9pbnRzLCBvbGRQb2ludHMubGVuZ3RoLCBuZXdQb2ludHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gYWxsUG9pbnRzOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFRpbWVzdGFtcCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRleHQ7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0OwoJfSgpKTsKCVJlc3VsdCQxLmRlZmF1bHQgPSBSZXN1bHQ7CgoJdmFyIFJlc3VsdE1ldGFkYXRhVHlwZSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA4IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHRNZXRhZGF0YVR5cGUkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogUmVwcmVzZW50cyBzb21lIHR5cGUgb2YgbWV0YWRhdGEgYWJvdXQgdGhlIHJlc3VsdCBvZiB0aGUgZGVjb2RpbmcgdGhhdCB0aGUgZGVjb2RlcgoJICogd2lzaGVzIHRvIGNvbW11bmljYXRlIGJhY2sgdG8gdGhlIGNhbGxlci4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlOwoJKGZ1bmN0aW9uIChSZXN1bHRNZXRhZGF0YVR5cGUpIHsKCSAgICAvKioKCSAgICAgKiBVbnNwZWNpZmllZCwgYXBwbGljYXRpb24tc3BlY2lmaWMgbWV0YWRhdGEuIE1hcHMgdG8gYW4gdW5zcGVjaWZpZWQge0BsaW5rIE9iamVjdH0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiT1RIRVIiXSA9IDBdID0gIk9USEVSIjsKCSAgICAvKioKCSAgICAgKiBEZW5vdGVzIHRoZSBsaWtlbHkgYXBwcm94aW1hdGUgb3JpZW50YXRpb24gb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGlzIHZhbHVlCgkgICAgICogaXMgZ2l2ZW4gYXMgZGVncmVlcyByb3RhdGVkIGNsb2Nrd2lzZSBmcm9tIHRoZSBub3JtYWwsIHVwcmlnaHQgb3JpZW50YXRpb24uCgkgICAgICogRm9yIGV4YW1wbGUgYSAxRCBiYXJjb2RlIHdoaWNoIHdhcyBmb3VuZCBieSByZWFkaW5nIHRvcC10by1ib3R0b20gd291bGQgYmUKCSAgICAgKiBzYWlkIHRvIGhhdmUgb3JpZW50YXRpb24gIjkwIi4gVGhpcyBrZXkgbWFwcyB0byBhbiB7QGxpbmsgSW50ZWdlcn0gd2hvc2UKCSAgICAgKiB2YWx1ZSBpcyBpbiB0aGUgcmFuZ2UgWzAsMzYwKS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJPUklFTlRBVElPTiJdID0gMV0gPSAiT1JJRU5UQVRJT04iOwoJICAgIC8qKgoJICAgICAqIDxwPjJEIGJhcmNvZGUgZm9ybWF0cyB0eXBpY2FsbHkgZW5jb2RlIHRleHQsIGJ1dCBhbGxvdyBmb3IgYSBzb3J0IG9mICdieXRlIG1vZGUnCgkgICAgICogd2hpY2ggaXMgc29tZXRpbWVzIHVzZWQgdG8gZW5jb2RlIGJpbmFyeSBkYXRhLiBXaGlsZSB7QGxpbmsgUmVzdWx0fSBtYWtlcyBhdmFpbGFibGUKCSAgICAgKiB0aGUgY29tcGxldGUgcmF3IGJ5dGVzIGluIHRoZSBiYXJjb2RlIGZvciB0aGVzZSBmb3JtYXRzLCBpdCBkb2VzIG5vdCBvZmZlciB0aGUgYnl0ZXMKCSAgICAgKiBmcm9tIHRoZSBieXRlIHNlZ21lbnRzIGFsb25lLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWFwcyB0byBhIHtAbGluayBqYXZhLnV0aWwuTGlzdH0gb2YgYnl0ZSBhcnJheXMgY29ycmVzcG9uZGluZyB0byB0aGUKCSAgICAgKiByYXcgYnl0ZXMgaW4gdGhlIGJ5dGUgc2VnbWVudHMgaW4gdGhlIGJhcmNvZGUsIGluIG9yZGVyLjwvcD4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJCWVRFX1NFR01FTlRTIl0gPSAyXSA9ICJCWVRFX1NFR01FTlRTIjsKCSAgICAvKioKCSAgICAgKiBFcnJvciBjb3JyZWN0aW9uIGxldmVsIHVzZWQsIGlmIGFwcGxpY2FibGUuIFRoZSB2YWx1ZSB0eXBlIGRlcGVuZHMgb24gdGhlCgkgICAgICogZm9ybWF0LCBidXQgaXMgdHlwaWNhbGx5IGEgU3RyaW5nLgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiXSA9IDNdID0gIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHBlcmlvZGljYWxzLCBpbmRpY2F0ZXMgdGhlIGlzc3VlIG51bWJlciBhcyBhbiB7QGxpbmsgSW50ZWdlcn0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiSVNTVUVfTlVNQkVSIl0gPSA0XSA9ICJJU1NVRV9OVU1CRVIiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHByb2R1Y3RzLCBpbmRpY2F0ZXMgdGhlIHN1Z2dlc3RlZCByZXRhaWwgcHJpY2UgaW4gdGhlIGJhcmNvZGUgYXMgYQoJICAgICAqIGZvcm1hdHRlZCB7QGxpbmsgU3RyaW5nfS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJTVUdHRVNURURfUFJJQ0UiXSA9IDVdID0gIlNVR0dFU1RFRF9QUklDRSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBwb3NzaWJsZSBjb3VudHJ5IG9mIG1hbnVmYWN0dXJlIGFzIGEge0BsaW5rIFN0cmluZ30gZGVub3RpbmcgdGhlCgkgICAgICogSVNPIGNvdW50cnkgY29kZS4gU29tZSBtYXAgdG8gbXVsdGlwbGUgcG9zc2libGUgY291bnRyaWVzLCBsaWtlICJVUy9DQSIuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUE9TU0lCTEVfQ09VTlRSWSJdID0gNl0gPSAiUE9TU0lCTEVfQ09VTlRSWSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBleHRlbnNpb24gdGV4dAoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSA3XSA9ICJVUENfRUFOX0VYVEVOU0lPTiI7CgkgICAgLyoqCgkgICAgICogUERGNDE3LXNwZWNpZmljIG1ldGFkYXRhCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUERGNDE3X0VYVFJBX01FVEFEQVRBIl0gPSA4XSA9ICJQREY0MTdfRVhUUkFfTUVUQURBVEEiOwoJICAgIC8qKgoJICAgICAqIElmIHRoZSBjb2RlIGZvcm1hdCBzdXBwb3J0cyBzdHJ1Y3R1cmVkIGFwcGVuZCBhbmQgdGhlIGN1cnJlbnQgc2Nhbm5lZCBjb2RlIGlzIHBhcnQgb2Ygb25lIHRoZW4gdGhlCgkgICAgICogc2VxdWVuY2UgbnVtYmVyIGlzIGdpdmVuIHdpdGggaXQuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UiXSA9IDldID0gIlNUUlVDVFVSRURfQVBQRU5EX1NFUVVFTkNFIjsKCSAgICAvKioKCSAgICAgKiBJZiB0aGUgY29kZSBmb3JtYXQgc3VwcG9ydHMgc3RydWN0dXJlZCBhcHBlbmQgYW5kIHRoZSBjdXJyZW50IHNjYW5uZWQgY29kZSBpcyBwYXJ0IG9mIG9uZSB0aGVuIHRoZQoJICAgICAqIHBhcml0eSBpcyBnaXZlbiB3aXRoIGl0LgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSJdID0gMTBdID0gIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSI7Cgl9KShSZXN1bHRNZXRhZGF0YVR5cGUgfHwgKFJlc3VsdE1ldGFkYXRhVHlwZSA9IHt9KSk7CglSZXN1bHRNZXRhZGF0YVR5cGUkMS5kZWZhdWx0ID0gUmVzdWx0TWV0YWRhdGFUeXBlOwoKCXZhciBEZWNvZGVyJDEgPSB7fTsKCgl2YXIgQ2hlY2tzdW1FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkOCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaGVja3N1bUV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNCA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBDaGVja3N1bUV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkOChDaGVja3N1bUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBDaGVja3N1bUV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5nZXRDaGVja3N1bUluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IENoZWNrc3VtRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5raW5kID0gJ0NoZWNrc3VtRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQ2hlY2tzdW1FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCkpOwoJQ2hlY2tzdW1FeGNlcHRpb24kMS5kZWZhdWx0ID0gQ2hlY2tzdW1FeGNlcHRpb247CgoJdmFyIEdlbmVyaWNHRiQxID0ge307CgoJdmFyIEdlbmVyaWNHRlBvbHkkMSA9IHt9OwoKCXZhciBBYnN0cmFjdEdlbmVyaWNHRiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYnN0cmFjdEdlbmVyaWNHRiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGNvbnRhaW5zIHV0aWxpdHkgbWV0aG9kcyBmb3IgcGVyZm9ybWluZyBtYXRoZW1hdGljYWwgb3BlcmF0aW9ucyBvdmVyCgkgKiB0aGUgR2Fsb2lzIEZpZWxkcy4gT3BlcmF0aW9ucyB1c2UgYSBnaXZlbiBwcmltaXRpdmUgcG9seW5vbWlhbCBpbiBjYWxjdWxhdGlvbnMuPC9wPgoJICoKCSAqIDxwPlRocm91Z2hvdXQgdGhpcyBwYWNrYWdlLCBlbGVtZW50cyBvZiB0aGUgR0YgYXJlIHJlcHJlc2VudGVkIGFzIGFuIHtAY29kZSBpbnR9CgkgKiBmb3IgY29udmVuaWVuY2UgYW5kIHNwZWVkIChidXQgYXQgdGhlIGNvc3Qgb2YgbWVtb3J5KS4KCSAqIDwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBEYXZpZCBPbGl2aWVyCgkgKi8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBYnN0cmFjdEdlbmVyaWNHRigpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiAyIHRvIHRoZSBwb3dlciBvZiBhIGluIEdGKHNpemUpCgkgICAgICovCgkgICAgQWJzdHJhY3RHZW5lcmljR0YucHJvdG90eXBlLmV4cCA9IGZ1bmN0aW9uIChhKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmV4cFRhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBiYXNlIDIgbG9nIG9mIGEgaW4gR0Yoc2l6ZSkKCSAgICAgKi8KCSAgICBBYnN0cmFjdEdlbmVyaWNHRi5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGEgLyppbnQqLykgewoJICAgICAgICBpZiAoYSA9PT0gMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0aGlzLmxvZ1RhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSW1wbGVtZW50cyBib3RoIGFkZGl0aW9uIGFuZCBzdWJ0cmFjdGlvbiAtLSB0aGV5IGFyZSB0aGUgc2FtZSBpbiBHRihzaXplKS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gc3VtL2RpZmZlcmVuY2Ugb2YgYSBhbmQgYgoJICAgICAqLwoJICAgIEFic3RyYWN0R2VuZXJpY0dGLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIGEgXiBiOwoJICAgIH07CgkgICAgcmV0dXJuIEFic3RyYWN0R2VuZXJpY0dGOwoJfSgpKTsKCUFic3RyYWN0R2VuZXJpY0dGJDEuZGVmYXVsdCA9IEFic3RyYWN0R2VuZXJpY0dGOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGUG9seSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5yZWVkc29sb21vbiB7Ki8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRl8xJDEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIFN5c3RlbV8xID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNCA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgcG9seW5vbWlhbCB3aG9zZSBjb2VmZmljaWVudHMgYXJlIGVsZW1lbnRzIG9mIGEgR0YuCgkgKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgaW1tdXRhYmxlLjwvcD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdlbmVyaWNHRlBvbHkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGZpZWxkIHRoZSB7QGxpbmsgR2VuZXJpY0dGfSBpbnN0YW5jZSByZXByZXNlbnRpbmcgdGhlIGZpZWxkIHRvIHVzZQoJICAgICAqIHRvIHBlcmZvcm0gY29tcHV0YXRpb25zCgkgICAgICogQHBhcmFtIGNvZWZmaWNpZW50cyBjb2VmZmljaWVudHMgYXMgaW50cyByZXByZXNlbnRpbmcgZWxlbWVudHMgb2YgR0Yoc2l6ZSksIGFycmFuZ2VkCgkgICAgICogZnJvbSBtb3N0IHNpZ25pZmljYW50IChoaWdoZXN0LXBvd2VyIHRlcm0pIGNvZWZmaWNpZW50IHRvIGxlYXN0IHNpZ25pZmljYW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYXJndW1lbnQgaXMgbnVsbCBvciBlbXB0eSwKCSAgICAgKiBvciBpZiBsZWFkaW5nIGNvZWZmaWNpZW50IGlzIDAgYW5kIHRoaXMgaXMgbm90IGEKCSAgICAgKiBjb25zdGFudCBwb2x5bm9taWFsICh0aGF0IGlzLCBpdCBpcyBub3QgdGhlIG1vbm9taWFsICIwIikKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBHZW5lcmljR0ZQb2x5KGZpZWxkLCBjb2VmZmljaWVudHMpIHsKCSAgICAgICAgaWYgKGNvZWZmaWNpZW50cy5sZW5ndGggPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHNMZW5ndGggPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICBpZiAoY29lZmZpY2llbnRzTGVuZ3RoID4gMSAmJiBjb2VmZmljaWVudHNbMF0gPT09IDApIHsKCSAgICAgICAgICAgIC8vIExlYWRpbmcgdGVybSBtdXN0IGJlIG5vbi16ZXJvIGZvciBhbnl0aGluZyBleGNlcHQgdGhlIGNvbnN0YW50IHBvbHlub21pYWwgIjAiCgkgICAgICAgICAgICB2YXIgZmlyc3ROb25aZXJvID0gMTsKCSAgICAgICAgICAgIHdoaWxlIChmaXJzdE5vblplcm8gPCBjb2VmZmljaWVudHNMZW5ndGggJiYgY29lZmZpY2llbnRzW2ZpcnN0Tm9uWmVyb10gPT09IDApIHsKCSAgICAgICAgICAgICAgICBmaXJzdE5vblplcm8rKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChmaXJzdE5vblplcm8gPT09IGNvZWZmaWNpZW50c0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRoaXMuY29lZmZpY2llbnRzID0gSW50MzJBcnJheS5mcm9tKFswXSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICB0aGlzLmNvZWZmaWNpZW50cyA9IG5ldyBJbnQzMkFycmF5KGNvZWZmaWNpZW50c0xlbmd0aCAtIGZpcnN0Tm9uWmVybyk7CgkgICAgICAgICAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkoY29lZmZpY2llbnRzLCBmaXJzdE5vblplcm8sIHRoaXMuY29lZmZpY2llbnRzLCAwLCB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdGhpcy5jb2VmZmljaWVudHMgPSBjb2VmZmljaWVudHM7CgkgICAgICAgIH0KCSAgICB9CgkgICAgR2VuZXJpY0dGUG9seS5wcm90b3R5cGUuZ2V0Q29lZmZpY2llbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGRlZ3JlZSBvZiB0aGlzIHBvbHlub21pYWwKCSAgICAgKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5nZXREZWdyZWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGlzIHBvbHlub21pYWwgaXMgdGhlIG1vbm9taWFsICIwIgoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmlzWmVybyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29lZmZpY2llbnRzWzBdID09PSAwOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBjb2VmZmljaWVudCBvZiB4XmRlZ3JlZSB0ZXJtIGluIHRoaXMgcG9seW5vbWlhbAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmdldENvZWZmaWNpZW50ID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50c1t0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxIC0gZGVncmVlXTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gZXZhbHVhdGlvbiBvZiB0aGlzIHBvbHlub21pYWwgYXQgYSBnaXZlbiBwb2ludAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmV2YWx1YXRlQXQgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHJldHVybiB0aGUgeF4wIGNvZWZmaWNpZW50CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgY29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciByZXN1bHQ7CgkgICAgICAgIGlmIChhID09PSAxKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHRoZSBzdW0gb2YgdGhlIGNvZWZmaWNpZW50cwoJICAgICAgICAgICAgcmVzdWx0ID0gMDsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7IGkgIT09IGxlbmd0aF8xOyBpKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgY29lZmZpY2llbnQgPSBjb2VmZmljaWVudHNbaV07CgkgICAgICAgICAgICAgICAgcmVzdWx0ID0gQWJzdHJhY3RHZW5lcmljR0ZfMSQxLmRlZmF1bHQuYWRkT3JTdWJ0cmFjdChyZXN1bHQsIGNvZWZmaWNpZW50KTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgICAgIH0KCSAgICAgICAgcmVzdWx0ID0gY29lZmZpY2llbnRzWzBdOwoJICAgICAgICB2YXIgc2l6ZSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICByZXN1bHQgPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KGZpZWxkLm11bHRpcGx5KGEsIHJlc3VsdCksIGNvZWZmaWNpZW50c1tpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRoaXMuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiBvdGhlcjsKCSAgICAgICAgfQoJICAgICAgICBpZiAob3RoZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzbWFsbGVyQ29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBsYXJnZXJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIGlmIChzbWFsbGVyQ29lZmZpY2llbnRzLmxlbmd0aCA+IGxhcmdlckNvZWZmaWNpZW50cy5sZW5ndGgpIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gc21hbGxlckNvZWZmaWNpZW50czsKCSAgICAgICAgICAgIHNtYWxsZXJDb2VmZmljaWVudHMgPSBsYXJnZXJDb2VmZmljaWVudHM7CgkgICAgICAgICAgICBsYXJnZXJDb2VmZmljaWVudHMgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzdW1EaWZmID0gbmV3IEludDMyQXJyYXkobGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCk7CgkgICAgICAgIHZhciBsZW5ndGhEaWZmID0gbGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCAtIHNtYWxsZXJDb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICAvLyBDb3B5IGhpZ2gtb3JkZXIgdGVybXMgb25seSBmb3VuZCBpbiBoaWdoZXItZGVncmVlIHBvbHlub21pYWwncyBjb2VmZmljaWVudHMKCSAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkobGFyZ2VyQ29lZmZpY2llbnRzLCAwLCBzdW1EaWZmLCAwLCBsZW5ndGhEaWZmKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGxlbmd0aERpZmY7IGkgPCBsYXJnZXJDb2VmZmljaWVudHMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHN1bURpZmZbaV0gPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KHNtYWxsZXJDb2VmZmljaWVudHNbaSAtIGxlbmd0aERpZmZdLCBsYXJnZXJDb2VmZmljaWVudHNbaV0pOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seSh0aGlzLmZpZWxkLCBzdW1EaWZmKTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5ID0gZnVuY3Rpb24gKG90aGVyKSB7CgkgICAgICAgIGlmICghdGhpcy5maWVsZC5lcXVhbHMob3RoZXIuZmllbGQpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdHZW5lcmljR0ZQb2x5cyBkbyBub3QgaGF2ZSBzYW1lIEdlbmVyaWNHRiBmaWVsZCcpOwoJICAgICAgICB9CgkgICAgICAgIGlmICh0aGlzLmlzWmVybygpIHx8IG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGFDb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIGFMZW5ndGggPSBhQ29lZmZpY2llbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBiTGVuZ3RoID0gYkNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoYUxlbmd0aCArIGJMZW5ndGggLSAxKTsKCSAgICAgICAgdmFyIGZpZWxkID0gdGhpcy5maWVsZDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhTGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBhQ29lZmYgPSBhQ29lZmZpY2llbnRzW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBiTGVuZ3RoOyBqKyspIHsKCSAgICAgICAgICAgICAgICBwcm9kdWN0W2kgKyBqXSA9IEFic3RyYWN0R2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocHJvZHVjdFtpICsgal0sIGZpZWxkLm11bHRpcGx5KGFDb2VmZiwgYkNvZWZmaWNpZW50c1tqXSkpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5tdWx0aXBseVNjYWxhciA9IGZ1bmN0aW9uIChzY2FsYXIgLyppbnQqLykgewoJICAgICAgICBpZiAoc2NhbGFyID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHNjYWxhciA9PT0gMSkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIHByb2R1Y3RbaV0gPSBmaWVsZC5tdWx0aXBseShjb2VmZmljaWVudHNbaV0sIHNjYWxhcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljR0ZQb2x5KGZpZWxkLCBwcm9kdWN0KTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5QnlNb25vbWlhbCA9IGZ1bmN0aW9uIChkZWdyZWUgLyppbnQqLywgY29lZmZpY2llbnQgLyppbnQqLykgewoJICAgICAgICBpZiAoZGVncmVlIDwgMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChjb2VmZmljaWVudCA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmllbGQuZ2V0WmVybygpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIHNpemUgPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICB2YXIgcHJvZHVjdCA9IG5ldyBJbnQzMkFycmF5KHNpemUgKyBkZWdyZWUpOwoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykgewoJICAgICAgICAgICAgcHJvZHVjdFtpXSA9IGZpZWxkLm11bHRpcGx5KGNvZWZmaWNpZW50c1tpXSwgY29lZmZpY2llbnQpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5kaXZpZGUgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdEaXZpZGUgYnkgMCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBxdW90aWVudCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHJlbWFpbmRlciA9IHRoaXM7CgkgICAgICAgIHZhciBkZW5vbWluYXRvckxlYWRpbmdUZXJtID0gb3RoZXIuZ2V0Q29lZmZpY2llbnQob3RoZXIuZ2V0RGVncmVlKCkpOwoJICAgICAgICB2YXIgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0gPSBmaWVsZC5pbnZlcnNlKGRlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICB3aGlsZSAocmVtYWluZGVyLmdldERlZ3JlZSgpID49IG90aGVyLmdldERlZ3JlZSgpICYmICFyZW1haW5kZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHZhciBkZWdyZWVEaWZmZXJlbmNlID0gcmVtYWluZGVyLmdldERlZ3JlZSgpIC0gb3RoZXIuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICB2YXIgc2NhbGUgPSBmaWVsZC5tdWx0aXBseShyZW1haW5kZXIuZ2V0Q29lZmZpY2llbnQocmVtYWluZGVyLmdldERlZ3JlZSgpKSwgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICAgICAgdmFyIHRlcm0gPSBvdGhlci5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZmVyZW5jZSwgc2NhbGUpOwoJICAgICAgICAgICAgdmFyIGl0ZXJhdGlvblF1b3RpZW50ID0gZmllbGQuYnVpbGRNb25vbWlhbChkZWdyZWVEaWZmZXJlbmNlLCBzY2FsZSk7CgkgICAgICAgICAgICBxdW90aWVudCA9IHF1b3RpZW50LmFkZE9yU3VidHJhY3QoaXRlcmF0aW9uUXVvdGllbnQpOwoJICAgICAgICAgICAgcmVtYWluZGVyID0gcmVtYWluZGVyLmFkZE9yU3VidHJhY3QodGVybSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFtxdW90aWVudCwgcmVtYWluZGVyXTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJlc3VsdCA9ICcnOwoJICAgICAgICBmb3IgKHZhciBkZWdyZWUgPSB0aGlzLmdldERlZ3JlZSgpOyBkZWdyZWUgPj0gMDsgZGVncmVlLS0pIHsKCSAgICAgICAgICAgIHZhciBjb2VmZmljaWVudCA9IHRoaXMuZ2V0Q29lZmZpY2llbnQoZGVncmVlKTsKCSAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCA8IDApIHsKCSAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgLSAnOwoJICAgICAgICAgICAgICAgICAgICBjb2VmZmljaWVudCA9IC1jb2VmZmljaWVudDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgKyAnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgPT09IDAgfHwgY29lZmZpY2llbnQgIT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGFscGhhUG93ZXIgPSB0aGlzLmZpZWxkLmxvZyhjb2VmZmljaWVudCk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChhbHBoYVBvd2VyID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJzEnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFscGhhUG93ZXIgPT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnYSc7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJ2FeJzsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBhbHBoYVBvd2VyOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGRlZ3JlZSA9PT0gMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICd4JzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAneF4nOwoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGRlZ3JlZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIEdlbmVyaWNHRlBvbHk7Cgl9KCkpOwoJR2VuZXJpY0dGUG9seSQxLmRlZmF1bHQgPSBHZW5lcmljR0ZQb2x5OwoKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkMyA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcml0aG1ldGljRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ3KEFyaXRobWV0aWNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJpdGhtZXRpY0V4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcml0aG1ldGljRXhjZXB0aW9uLmtpbmQgPSAnQXJpdGhtZXRpY0V4Y2VwdGlvbic7CgkgICAgcmV0dXJuIEFyaXRobWV0aWNFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCkpOwoJQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLmRlZmF1bHQgPSBBcml0aG1ldGljRXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uLnJlZWRzb2xvbW9uIHsqLwoJdmFyIEdlbmVyaWNHRlBvbHlfMSQxID0gR2VuZXJpY0dGUG9seSQxOwoJdmFyIEFic3RyYWN0R2VuZXJpY0dGXzEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIEludGVnZXJfMSQxID0gSW50ZWdlciQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDMgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uXzEgPSBBcml0aG1ldGljRXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgY29udGFpbnMgdXRpbGl0eSBtZXRob2RzIGZvciBwZXJmb3JtaW5nIG1hdGhlbWF0aWNhbCBvcGVyYXRpb25zIG92ZXIKCSAqIHRoZSBHYWxvaXMgRmllbGRzLiBPcGVyYXRpb25zIHVzZSBhIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsIGluIGNhbGN1bGF0aW9ucy48L3A+CgkgKgoJICogPHA+VGhyb3VnaG91dCB0aGlzIHBhY2thZ2UsIGVsZW1lbnRzIG9mIHRoZSBHRiBhcmUgcmVwcmVzZW50ZWQgYXMgYW4ge0Bjb2RlIGludH0KCSAqIGZvciBjb252ZW5pZW5jZSBhbmQgc3BlZWQgKGJ1dCBhdCB0aGUgY29zdCBvZiBtZW1vcnkpLgoJICogPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKiBAYXV0aG9yIERhdmlkIE9saXZpZXIKCSAqLwoJdmFyIEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkNihHZW5lcmljR0YsIF9zdXBlcik7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlIGEgcmVwcmVzZW50YXRpb24gb2YgR0Yoc2l6ZSkgdXNpbmcgdGhlIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsLgoJICAgICAqCgkgICAgICogQHBhcmFtIHByaW1pdGl2ZSBpcnJlZHVjaWJsZSBwb2x5bm9taWFsIHdob3NlIGNvZWZmaWNpZW50cyBhcmUgcmVwcmVzZW50ZWQgYnkKCSAgICAgKiAgdGhlIGJpdHMgb2YgYW4gaW50LCB3aGVyZSB0aGUgbGVhc3Qtc2lnbmlmaWNhbnQgYml0IHJlcHJlc2VudHMgdGhlIGNvbnN0YW50CgkgICAgICogIGNvZWZmaWNpZW50CgkgICAgICogQHBhcmFtIHNpemUgdGhlIHNpemUgb2YgdGhlIGZpZWxkCgkgICAgICogQHBhcmFtIGIgdGhlIGZhY3RvciBiIGluIHRoZSBnZW5lcmF0b3IgcG9seW5vbWlhbCBjYW4gYmUgMC0gb3IgMS1iYXNlZAoJICAgICAqICAoZyh4KSA9ICh4K2FeYikoeCthXihiKzEpKS4uLih4K2FeKGIrMnQtMSkpKS4KCSAgICAgKiAgSW4gbW9zdCBjYXNlcyBpdCBzaG91bGQgYmUgMSwgYnV0IGZvciBRUiBjb2RlIGl0IGlzIDAuCgkgICAgICovCgkgICAgZnVuY3Rpb24gR2VuZXJpY0dGKHByaW1pdGl2ZSAvKmludCovLCBzaXplIC8qaW50Ki8sIGdlbmVyYXRvckJhc2UgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5wcmltaXRpdmUgPSBwcmltaXRpdmU7CgkgICAgICAgIF90aGlzLnNpemUgPSBzaXplOwoJICAgICAgICBfdGhpcy5nZW5lcmF0b3JCYXNlID0gZ2VuZXJhdG9yQmFzZTsKCSAgICAgICAgdmFyIGV4cFRhYmxlID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciB4ID0gMTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIGV4cFRhYmxlW2ldID0geDsKCSAgICAgICAgICAgIHggKj0gMjsgLy8gd2UncmUgYXNzdW1pbmcgdGhlIGdlbmVyYXRvciBhbHBoYSBpcyAyCgkgICAgICAgICAgICBpZiAoeCA+PSBzaXplKSB7CgkgICAgICAgICAgICAgICAgeCBePSBwcmltaXRpdmU7CgkgICAgICAgICAgICAgICAgeCAmPSBzaXplIC0gMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBfdGhpcy5leHBUYWJsZSA9IGV4cFRhYmxlOwoJICAgICAgICB2YXIgbG9nVGFibGUgPSBuZXcgSW50MzJBcnJheShzaXplKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplIC0gMTsgaSsrKSB7CgkgICAgICAgICAgICBsb2dUYWJsZVtleHBUYWJsZVtpXV0gPSBpOwoJICAgICAgICB9CgkgICAgICAgIF90aGlzLmxvZ1RhYmxlID0gbG9nVGFibGU7CgkgICAgICAgIC8vIGxvZ1RhYmxlWzBdID09IDAgYnV0IHRoaXMgc2hvdWxkIG5ldmVyIGJlIHVzZWQKCSAgICAgICAgX3RoaXMuemVybyA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzBdKSk7CgkgICAgICAgIF90aGlzLm9uZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzFdKSk7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRaZXJvID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRPbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm9uZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdGhlIG1vbm9taWFsIHJlcHJlc2VudGluZyBjb2VmZmljaWVudCAqIHheZGVncmVlCgkgICAgICovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5idWlsZE1vbm9taWFsID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovLCBjb2VmZmljaWVudCAvKmludCovKSB7CgkgICAgICAgIGlmIChkZWdyZWUgPCAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkMy5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvZWZmaWNpZW50ID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheShkZWdyZWUgKyAxKTsKCSAgICAgICAgY29lZmZpY2llbnRzWzBdID0gY29lZmZpY2llbnQ7CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seV8xJDEuZGVmYXVsdCh0aGlzLCBjb2VmZmljaWVudHMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBtdWx0aXBsaWNhdGl2ZSBpbnZlcnNlIG9mIGEKCSAgICAgKi8KCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmludmVyc2UgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQXJpdGhtZXRpY0V4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5leHBUYWJsZVt0aGlzLnNpemUgLSB0aGlzLmxvZ1RhYmxlW2FdIC0gMV07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHByb2R1Y3Qgb2YgYSBhbmQgYiBpbiBHRihzaXplKQoJICAgICAqLwoJICAgIEdlbmVyaWNHRi5wcm90b3R5cGUubXVsdGlwbHkgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGEgPT09IDAgfHwgYiA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDA7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZXhwVGFibGVbKHRoaXMubG9nVGFibGVbYV0gKyB0aGlzLmxvZ1RhYmxlW2JdKSAlICh0aGlzLnNpemUgLSAxKV07CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnNpemU7CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldEdlbmVyYXRvckJhc2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvckJhc2U7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICgnR0YoMHgnICsgSW50ZWdlcl8xJDEuZGVmYXVsdC50b0hleFN0cmluZyh0aGlzLnByaW1pdGl2ZSkgKyAnLCcgKyB0aGlzLnNpemUgKyAnKScpOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICByZXR1cm4gbyA9PT0gdGhpczsKCSAgICB9OwoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEyID0gbmV3IEdlbmVyaWNHRigweDEwNjksIDQwOTYsIDEpOyAvLyB4XjEyICsgeF42ICsgeF41ICsgeF4zICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEwID0gbmV3IEdlbmVyaWNHRigweDQwOSwgMTAyNCwgMSk7IC8vIHheMTAgKyB4XjMgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfNiA9IG5ldyBHZW5lcmljR0YoMHg0MywgNjQsIDEpOyAvLyB4XjYgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19QQVJBTSA9IG5ldyBHZW5lcmljR0YoMHgxMywgMTYsIDEpOyAvLyB4XjQgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5RUl9DT0RFX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTFkLCAyNTYsIDApOyAvLyB4XjggKyB4XjQgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkRBVEFfTUFUUklYX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTJkLCAyNTYsIDEpOyAvLyB4XjggKyB4XjUgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfOCA9IEdlbmVyaWNHRi5EQVRBX01BVFJJWF9GSUVMRF8yNTY7CgkgICAgR2VuZXJpY0dGLk1BWElDT0RFX0ZJRUxEXzY0ID0gR2VuZXJpY0dGLkFaVEVDX0RBVEFfNjsKCSAgICByZXR1cm4gR2VuZXJpY0dGOwoJfShBYnN0cmFjdEdlbmVyaWNHRl8xLmRlZmF1bHQpKTsKCUdlbmVyaWNHRiQxLmRlZmF1bHQgPSBHZW5lcmljR0Y7CgoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciQxID0ge307CgoJdmFyIFJlZWRTb2xvbW9uRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDUgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVlZFNvbG9tb25FeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDIgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgUmVlZFNvbG9tb25FeGNlcHRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDUoUmVlZFNvbG9tb25FeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gUmVlZFNvbG9tb25FeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgUmVlZFNvbG9tb25FeGNlcHRpb24ua2luZCA9ICdSZWVkU29sb21vbkV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQyLmRlZmF1bHQpKTsKCVJlZWRTb2xvbW9uRXhjZXB0aW9uJDEuZGVmYXVsdCA9IFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkNCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDEgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSWxsZWdhbFN0YXRlRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ0KElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSWxsZWdhbFN0YXRlRXhjZXB0aW9uLmtpbmQgPSAnSWxsZWdhbFN0YXRlRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gSWxsZWdhbFN0YXRlRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQxLmRlZmF1bHQpKTsKCUlsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBJbGxlZ2FsU3RhdGVFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWVkU29sb21vbkRlY29kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24ucmVlZHNvbG9tb24geyovCgl2YXIgR2VuZXJpY0dGXzEkMSA9IEdlbmVyaWNHRiQxOwoJdmFyIEdlbmVyaWNHRlBvbHlfMSA9IEdlbmVyaWNHRlBvbHkkMTsKCXZhciBSZWVkU29sb21vbkV4Y2VwdGlvbl8xID0gUmVlZFNvbG9tb25FeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMSA9IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5JbXBsZW1lbnRzIFJlZWQtU29sb21vbiBkZWNvZGluZywgYXMgdGhlIG5hbWUgaW1wbGllcy48L3A+CgkgKgoJICogPHA+VGhlIGFsZ29yaXRobSB3aWxsIG5vdCBiZSBleHBsYWluZWQgaGVyZSwgYnV0IHRoZSBmb2xsb3dpbmcgcmVmZXJlbmNlcyB3ZXJlIGhlbHBmdWwKCSAqIGluIGNyZWF0aW5nIHRoaXMgaW1wbGVtZW50YXRpb246PC9wPgoJICoKCSAqIDx1bD4KCSAqIDxsaT5CcnVjZSBNYWdncy4KCSAqIDxhIGhyZWY9Imh0dHA6Ly93d3cuY3MuY211LmVkdS9hZnMvY3MuY211LmVkdS9wcm9qZWN0L3BzY2ljby1ndXliL3JlYWx3b3JsZC93d3cvcnNfZGVjb2RlLnBzIj4KCSAqICJEZWNvZGluZyBSZWVkLVNvbG9tb24gQ29kZXMiPC9hPiAoc2VlIGRpc2N1c3Npb24gb2YgRm9ybmV5J3MgRm9ybXVsYSk8L2xpPgoJICogPGxpPkouSS4gSGFsbC4gPGEgaHJlZj0id3d3Lm10aC5tc3UuZWR1L35qaGFsbC9jbGFzc2VzL2NvZGVub3Rlcy9HUlMucGRmIj4KCSAqICJDaGFwdGVyIDUuIEdlbmVyYWxpemVkIFJlZWQtU29sb21vbiBDb2RlcyI8L2E+CgkgKiAoc2VlIGRpc2N1c3Npb24gb2YgRXVjbGlkZWFuIGFsZ29yaXRobSk8L2xpPgoJICogPC91bD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgV2lsbGlhbSBSdWNrbGlkZ2UKCSAqIEBhdXRob3Igc2FuZm9yZHNxdWlyZXMKCSAqLwoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBSZWVkU29sb21vbkRlY29kZXIoZmllbGQpIHsKCSAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkOwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5EZWNvZGVzIGdpdmVuIHNldCBvZiByZWNlaXZlZCBjb2Rld29yZHMsIHdoaWNoIGluY2x1ZGUgYm90aCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uCgkgICAgICogY29kZXdvcmRzLiBSZWFsbHksIHRoaXMgbWVhbnMgaXQgdXNlcyBSZWVkLVNvbG9tb24gdG8gZGV0ZWN0IGFuZCBjb3JyZWN0IGVycm9ycywgaW4tcGxhY2UsCgkgICAgICogaW4gdGhlIGlucHV0LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByZWNlaXZlZCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcwoJICAgICAqIEBwYXJhbSB0d29TIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBhdmFpbGFibGUKCSAgICAgKiBAdGhyb3dzIFJlZWRTb2xvbW9uRXhjZXB0aW9uIGlmIGRlY29kaW5nIGZhaWxzIGZvciBhbnkgcmVhc29uCgkgICAgICovCgkgICAgUmVlZFNvbG9tb25EZWNvZGVyLnByb3RvdHlwZS5kZWNvZGUgPSBmdW5jdGlvbiAocmVjZWl2ZWQsIHR3b1MgLyppbnQqLykgewoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgcG9seSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgcmVjZWl2ZWQpOwoJICAgICAgICB2YXIgc3luZHJvbWVDb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheSh0d29TKTsKCSAgICAgICAgdmFyIG5vRXJyb3IgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR3b1M7IGkrKykgewoJICAgICAgICAgICAgdmFyIGV2YWxSZXN1bHQgPSBwb2x5LmV2YWx1YXRlQXQoZmllbGQuZXhwKGkgKyBmaWVsZC5nZXRHZW5lcmF0b3JCYXNlKCkpKTsKCSAgICAgICAgICAgIHN5bmRyb21lQ29lZmZpY2llbnRzW3N5bmRyb21lQ29lZmZpY2llbnRzLmxlbmd0aCAtIDEgLSBpXSA9IGV2YWxSZXN1bHQ7CgkgICAgICAgICAgICBpZiAoZXZhbFJlc3VsdCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIG5vRXJyb3IgPSBmYWxzZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAobm9FcnJvcikgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzeW5kcm9tZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgc3luZHJvbWVDb2VmZmljaWVudHMpOwoJICAgICAgICB2YXIgc2lnbWFPbWVnYSA9IHRoaXMucnVuRXVjbGlkZWFuQWxnb3JpdGhtKGZpZWxkLmJ1aWxkTW9ub21pYWwodHdvUywgMSksIHN5bmRyb21lLCB0d29TKTsKCSAgICAgICAgdmFyIHNpZ21hID0gc2lnbWFPbWVnYVswXTsKCSAgICAgICAgdmFyIG9tZWdhID0gc2lnbWFPbWVnYVsxXTsKCSAgICAgICAgdmFyIGVycm9yTG9jYXRpb25zID0gdGhpcy5maW5kRXJyb3JMb2NhdGlvbnMoc2lnbWEpOwoJICAgICAgICB2YXIgZXJyb3JNYWduaXR1ZGVzID0gdGhpcy5maW5kRXJyb3JNYWduaXR1ZGVzKG9tZWdhLCBlcnJvckxvY2F0aW9ucyk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXJyb3JMb2NhdGlvbnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHJlY2VpdmVkLmxlbmd0aCAtIDEgLSBmaWVsZC5sb2coZXJyb3JMb2NhdGlvbnNbaV0pOwoJICAgICAgICAgICAgaWYgKHBvc2l0aW9uIDwgMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ0JhZCBlcnJvciBsb2NhdGlvbicpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVjZWl2ZWRbcG9zaXRpb25dID0gR2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocmVjZWl2ZWRbcG9zaXRpb25dLCBlcnJvck1hZ25pdHVkZXNbaV0pOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZWVkU29sb21vbkRlY29kZXIucHJvdG90eXBlLnJ1bkV1Y2xpZGVhbkFsZ29yaXRobSA9IGZ1bmN0aW9uIChhLCBiLCBSIC8qaW50Ki8pIHsKCSAgICAgICAgLy8gQXNzdW1lIGEncyBkZWdyZWUgaXMgPj0gYidzCgkgICAgICAgIGlmIChhLmdldERlZ3JlZSgpIDwgYi5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgdmFyIHRlbXAgPSBhOwoJICAgICAgICAgICAgYSA9IGI7CgkgICAgICAgICAgICBiID0gdGVtcDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgckxhc3QgPSBhOwoJICAgICAgICB2YXIgciA9IGI7CgkgICAgICAgIHZhciB0TGFzdCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHQgPSBmaWVsZC5nZXRPbmUoKTsKCSAgICAgICAgLy8gUnVuIEV1Y2xpZGVhbiBhbGdvcml0aG0gdW50aWwgcidzIGRlZ3JlZSBpcyBsZXNzIHRoYW4gUi8yCgkgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IChSIC8gMiB8IDApKSB7CgkgICAgICAgICAgICB2YXIgckxhc3RMYXN0ID0gckxhc3Q7CgkgICAgICAgICAgICB2YXIgdExhc3RMYXN0ID0gdExhc3Q7CgkgICAgICAgICAgICByTGFzdCA9IHI7CgkgICAgICAgICAgICB0TGFzdCA9IHQ7CgkgICAgICAgICAgICAvLyBEaXZpZGUgckxhc3RMYXN0IGJ5IHJMYXN0LCB3aXRoIHF1b3RpZW50IGluIHEgYW5kIHJlbWFpbmRlciBpbiByCgkgICAgICAgICAgICBpZiAockxhc3QuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgICAgICAvLyBPb3BzLCBFdWNsaWRlYW4gYWxnb3JpdGhtIGFscmVhZHkgdGVybWluYXRlZD8KCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVlZFNvbG9tb25FeGNlcHRpb25fMS5kZWZhdWx0KCdyX3tpLTF9IHdhcyB6ZXJvJyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByID0gckxhc3RMYXN0OwoJICAgICAgICAgICAgdmFyIHEgPSBmaWVsZC5nZXRaZXJvKCk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3JMZWFkaW5nVGVybSA9IHJMYXN0LmdldENvZWZmaWNpZW50KHJMYXN0LmdldERlZ3JlZSgpKTsKCSAgICAgICAgICAgIHZhciBkbHRJbnZlcnNlID0gZmllbGQuaW52ZXJzZShkZW5vbWluYXRvckxlYWRpbmdUZXJtKTsKCSAgICAgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IHJMYXN0LmdldERlZ3JlZSgpICYmICFyLmlzWmVybygpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlZ3JlZURpZmYgPSByLmdldERlZ3JlZSgpIC0gckxhc3QuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gZmllbGQubXVsdGlwbHkoci5nZXRDb2VmZmljaWVudChyLmdldERlZ3JlZSgpKSwgZGx0SW52ZXJzZSk7CgkgICAgICAgICAgICAgICAgcSA9IHEuYWRkT3JTdWJ0cmFjdChmaWVsZC5idWlsZE1vbm9taWFsKGRlZ3JlZURpZmYsIHNjYWxlKSk7CgkgICAgICAgICAgICAgICAgciA9IHIuYWRkT3JTdWJ0cmFjdChyTGFzdC5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZiwgc2NhbGUpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHQgPSBxLm11bHRpcGx5KHRMYXN0KS5hZGRPclN1YnRyYWN0KHRMYXN0TGFzdCk7CgkgICAgICAgICAgICBpZiAoci5nZXREZWdyZWUoKSA+PSByTGFzdC5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMS5kZWZhdWx0KCdEaXZpc2lvbiBhbGdvcml0aG0gZmFpbGVkIHRvIHJlZHVjZSBwb2x5bm9taWFsPycpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBzaWdtYVRpbGRlQXRaZXJvID0gdC5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgaWYgKHNpZ21hVGlsZGVBdFplcm8gPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ3NpZ21hVGlsZGUoMCkgd2FzIHplcm8nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaW52ZXJzZSA9IGZpZWxkLmludmVyc2Uoc2lnbWFUaWxkZUF0WmVybyk7CgkgICAgICAgIHZhciBzaWdtYSA9IHQubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHZhciBvbWVnYSA9IHIubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHJldHVybiBbc2lnbWEsIG9tZWdhXTsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTG9jYXRpb25zID0gZnVuY3Rpb24gKGVycm9yTG9jYXRvcikgewoJICAgICAgICAvLyBUaGlzIGlzIGEgZGlyZWN0IGFwcGxpY2F0aW9uIG9mIENoaWVuJ3Mgc2VhcmNoCgkgICAgICAgIHZhciBudW1FcnJvcnMgPSBlcnJvckxvY2F0b3IuZ2V0RGVncmVlKCk7CgkgICAgICAgIGlmIChudW1FcnJvcnMgPT09IDEpIHsgLy8gc2hvcnRjdXQKCSAgICAgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2Vycm9yTG9jYXRvci5nZXRDb2VmZmljaWVudCgxKV0pOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgSW50MzJBcnJheShudW1FcnJvcnMpOwoJICAgICAgICB2YXIgZSA9IDA7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgZmllbGQuZ2V0U2l6ZSgpICYmIGUgPCBudW1FcnJvcnM7IGkrKykgewoJICAgICAgICAgICAgaWYgKGVycm9yTG9jYXRvci5ldmFsdWF0ZUF0KGkpID09PSAwKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0W2VdID0gZmllbGQuaW52ZXJzZShpKTsKCSAgICAgICAgICAgICAgICBlKys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGUgIT09IG51bUVycm9ycykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IFJlZWRTb2xvbW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnRXJyb3IgbG9jYXRvciBkZWdyZWUgZG9lcyBub3QgbWF0Y2ggbnVtYmVyIG9mIHJvb3RzJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTWFnbml0dWRlcyA9IGZ1bmN0aW9uIChlcnJvckV2YWx1YXRvciwgZXJyb3JMb2NhdGlvbnMpIHsKCSAgICAgICAgLy8gVGhpcyBpcyBkaXJlY3RseSBhcHBseWluZyBGb3JuZXkncyBGb3JtdWxhCgkgICAgICAgIHZhciBzID0gZXJyb3JMb2NhdGlvbnMubGVuZ3RoOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEludDMyQXJyYXkocyk7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgczsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeGlJbnZlcnNlID0gZmllbGQuaW52ZXJzZShlcnJvckxvY2F0aW9uc1tpXSk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSAxOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaikgewoJICAgICAgICAgICAgICAgICAgICAvLyBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLAoJICAgICAgICAgICAgICAgICAgICAvLyAgICBHZW5lcmljR0YuYWRkT3JTdWJ0cmFjdCgxLCBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKSkpCgkgICAgICAgICAgICAgICAgICAgIC8vIEFib3ZlIHNob3VsZCB3b3JrIGJ1dCBmYWlscyBvbiBzb21lIEFwcGxlIGFuZCBMaW51eCBKREtzIGR1ZSB0byBhIEhvdHNwb3QgYnVnLgoJICAgICAgICAgICAgICAgICAgICAvLyBCZWxvdyBpcyBhIGZ1bm55LWxvb2tpbmcgd29ya2Fyb3VuZCBmcm9tIFN0ZXZlbiBQYXJrZXMKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm0gPSBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm1QbHVzMSA9ICh0ZXJtICYgMHgxKSA9PT0gMCA/IHRlcm0gfCAxIDogdGVybSAmIH4xOwoJICAgICAgICAgICAgICAgICAgICBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLCB0ZXJtUGx1czEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KGVycm9yRXZhbHVhdG9yLmV2YWx1YXRlQXQoeGlJbnZlcnNlKSwgZmllbGQuaW52ZXJzZShkZW5vbWluYXRvcikpOwoJICAgICAgICAgICAgaWYgKGZpZWxkLmdldEdlbmVyYXRvckJhc2UoKSAhPT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KHJlc3VsdFtpXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRGVjb2RlcjsKCX0oKSk7CglSZWVkU29sb21vbkRlY29kZXIkMS5kZWZhdWx0ID0gUmVlZFNvbG9tb25EZWNvZGVyOwoKCXZhciBCaXRNYXRyaXhQYXJzZXIkMSA9IHt9OwoKCXZhciBWZXJzaW9uJDEgPSB7fTsKCgl2YXIgRm9ybWF0SW5mb3JtYXRpb24kMSA9IHt9OwoKCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IHt9OwoKCXZhciBBcmd1bWVudEV4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyQzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkMyhBcmd1bWVudEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBcmd1bWVudEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0FyZ3VtZW50RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQXJndW1lbnRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xLmRlZmF1bHQpKTsKCUFyZ3VtZW50RXhjZXB0aW9uJDEuZGVmYXVsdCA9IEFyZ3VtZW50RXhjZXB0aW9uOwoKCShmdW5jdGlvbiAoZXhwb3J0cykgewoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CglleHBvcnRzLkVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gdm9pZCAwOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbl8xID0gQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJdmFyIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzOwoJKGZ1bmN0aW9uIChFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcykgewoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJMIl0gPSAwXSA9ICJMIjsKCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1tFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1siTSJdID0gMV0gPSAiTSI7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbIlEiXSA9IDJdID0gIlEiOwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJIIl0gPSAzXSA9ICJIIjsKCX0pKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyB8fCAoZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyA9IHt9KSk7CgkvKioKCSAqIDxwPlNlZSBJU08gMTgwMDQ6MjAwNiwgNi41LjEuIFRoaXMgZW51bSBlbmNhcHN1bGF0ZXMgdGhlIGZvdXIgZXJyb3IgY29ycmVjdGlvbiBsZXZlbHMKCSAqIGRlZmluZWQgYnkgdGhlIFFSIGNvZGUgc3RhbmRhcmQuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFcnJvckNvcnJlY3Rpb25MZXZlbCh2YWx1ZSwgc3RyaW5nVmFsdWUsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2V0KGJpdHMsIHRoaXMpOwoJICAgICAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5nZXRCaXRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIHN3aXRjaCAocykgewoJICAgICAgICAgICAgY2FzZSAnTCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5MOwoJICAgICAgICAgICAgY2FzZSAnTSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5NOwoJICAgICAgICAgICAgY2FzZSAnUSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5ROwoJICAgICAgICAgICAgY2FzZSAnSCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5IOwoJICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uXzEuZGVmYXVsdChzICsgJ25vdCBhdmFpbGFibGUnKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG90aGVyID0gbzsKCSAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPT09IG90aGVyLnZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgaW50IGNvbnRhaW5pbmcgdGhlIHR3byBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSdzIGVycm9yIGNvcnJlY3Rpb24gbGV2ZWwKCSAgICAgKiBAcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsIHJlcHJlc2VudGluZyB0aGUgZW5jb2RlZCBlcnJvciBjb3JyZWN0aW9uIGxldmVsCgkgICAgICovCgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZm9yQml0cyA9IGZ1bmN0aW9uIChiaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGJpdHMgPCAwIHx8IGJpdHMgPj0gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuZ2V0KGJpdHMpOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX1ZBTFVFID0gbmV3IE1hcCgpOwoJICAgIC8qKiBMID0gfjclIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5MID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkwsICdMJywgMHgwMSk7CgkgICAgLyoqIE0gPSB+MTUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5NID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLk0sICdNJywgMHgwMCk7CgkgICAgLyoqIFEgPSB+MjUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5RID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLlEsICdRJywgMHgwMyk7CgkgICAgLyoqIEggPSB+MzAlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5IID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkgsICdIJywgMHgwMik7CgkgICAgcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IEVycm9yQ29ycmVjdGlvbkxldmVsOwoKCX0oRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRm9ybWF0SW5mb3JtYXRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbF8xID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWw7Cgl2YXIgSW50ZWdlcl8xID0gSW50ZWdlciQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBRUiBDb2RlJ3MgZm9ybWF0IGluZm9ybWF0aW9uLCBpbmNsdWRpbmcgdGhlIGRhdGEgbWFzayB1c2VkIGFuZAoJICogZXJyb3IgY29ycmVjdGlvbiBsZXZlbC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBzZWUgRGF0YU1hc2sKCSAqIEBzZWUgRXJyb3JDb3JyZWN0aW9uTGV2ZWwKCSAqLwoJdmFyIEZvcm1hdEluZm9ybWF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZvcm1hdEluZm9ybWF0aW9uKGZvcm1hdEluZm8gLyppbnQqLykgewoJICAgICAgICAvLyBCaXRzIDMsNAoJICAgICAgICB0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWxfMS5kZWZhdWx0LmZvckJpdHMoKGZvcm1hdEluZm8gPj4gMykgJiAweDAzKTsKCSAgICAgICAgLy8gQm90dG9tIDMgYml0cwoJICAgICAgICB0aGlzLmRhdGFNYXNrID0gLyooYnl0ZSkgKi8gKGZvcm1hdEluZm8gJiAweDA3KTsKCSAgICB9CgkgICAgRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyA9IGZ1bmN0aW9uIChhIC8qaW50Ki8sIGIgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gSW50ZWdlcl8xLmRlZmF1bHQuYml0Q291bnQoYSBeIGIpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIG1hc2tlZEZvcm1hdEluZm8xIGZvcm1hdCBpbmZvIGluZGljYXRvciwgd2l0aCBtYXNrIHN0aWxsIGFwcGxpZWQKCSAgICAgKiBAcGFyYW0gbWFza2VkRm9ybWF0SW5mbzIgc2Vjb25kIGNvcHkgb2Ygc2FtZSBpbmZvOyBib3RoIGFyZSBjaGVja2VkIGF0IHRoZSBzYW1lIHRpbWUKCSAgICAgKiAgdG8gZXN0YWJsaXNoIGJlc3QgbWF0Y2gKCSAgICAgKiBAcmV0dXJuIGluZm9ybWF0aW9uIGFib3V0IHRoZSBmb3JtYXQgaXQgc3BlY2lmaWVzLCBvciB7QGNvZGUgbnVsbH0KCSAgICAgKiAgaWYgZG9lc24ndCBzZWVtIHRvIG1hdGNoIGFueSBrbm93biBwYXR0ZXJuCgkgICAgICovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24uZGVjb2RlRm9ybWF0SW5mb3JtYXRpb24gPSBmdW5jdGlvbiAobWFza2VkRm9ybWF0SW5mbzEgLyppbnQqLywgbWFza2VkRm9ybWF0SW5mbzIgLyppbnQqLykgewoJICAgICAgICB2YXIgZm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uLmRvRGVjb2RlRm9ybWF0SW5mb3JtYXRpb24obWFza2VkRm9ybWF0SW5mbzEsIG1hc2tlZEZvcm1hdEluZm8yKTsKCSAgICAgICAgaWYgKGZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiBmb3JtYXRJbmZvOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNob3VsZCByZXR1cm4gbnVsbCwgYnV0LCBzb21lIFFSIGNvZGVzIGFwcGFyZW50bHkKCSAgICAgICAgLy8gZG8gbm90IG1hc2sgdGhpcyBpbmZvLiBUcnkgYWdhaW4gYnkgYWN0dWFsbHkgbWFza2luZyB0aGUgcGF0dGVybgoJICAgICAgICAvLyBmaXJzdAoJICAgICAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb24uZG9EZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihtYXNrZWRGb3JtYXRJbmZvMSBeIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX01BU0tfUVIsIG1hc2tlZEZvcm1hdEluZm8yIF4gRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUik7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5kb0RlY29kZUZvcm1hdEluZm9ybWF0aW9uID0gZnVuY3Rpb24gKG1hc2tlZEZvcm1hdEluZm8xIC8qaW50Ki8sIG1hc2tlZEZvcm1hdEluZm8yIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGVfMSwgX2E7CgkgICAgICAgIC8vIEZpbmQgdGhlIGludCBpbiBGT1JNQVRfSU5GT19ERUNPREVfTE9PS1VQIHdpdGggZmV3ZXN0IGJpdHMgZGlmZmVyaW5nCgkgICAgICAgIHZhciBiZXN0RGlmZmVyZW5jZSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgICAgICB2YXIgYmVzdEZvcm1hdEluZm8gPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyQ2KEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVApLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlY29kZUluZm8gPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0SW5mbyA9IGRlY29kZUluZm9bMF07CgkgICAgICAgICAgICAgICAgaWYgKHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8xIHx8IHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8yKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGFuIGV4YWN0IG1hdGNoCgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm9ybWF0SW5mb3JtYXRpb24oZGVjb2RlSW5mb1sxXSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBiaXRzRGlmZmVyZW5jZSA9IEZvcm1hdEluZm9ybWF0aW9uLm51bUJpdHNEaWZmZXJpbmcobWFza2VkRm9ybWF0SW5mbzEsIHRhcmdldEluZm8pOwoJICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgIGJlc3RGb3JtYXRJbmZvID0gZGVjb2RlSW5mb1sxXTsKCSAgICAgICAgICAgICAgICAgICAgYmVzdERpZmZlcmVuY2UgPSBiaXRzRGlmZmVyZW5jZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKG1hc2tlZEZvcm1hdEluZm8xICE9PSBtYXNrZWRGb3JtYXRJbmZvMikgewoJICAgICAgICAgICAgICAgICAgICAvLyBhbHNvIHRyeSB0aGUgb3RoZXIgb3B0aW9uCgkgICAgICAgICAgICAgICAgICAgIGJpdHNEaWZmZXJlbmNlID0gRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyhtYXNrZWRGb3JtYXRJbmZvMiwgdGFyZ2V0SW5mbyk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0Rm9ybWF0SW5mbyA9IGRlY29kZUluZm9bMV07CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSGFtbWluZyBkaXN0YW5jZSBvZiB0aGUgMzIgbWFza2VkIGNvZGVzIGlzIDcsIGJ5IGNvbnN0cnVjdGlvbiwgc28gPD0gMyBiaXRzCgkgICAgICAgIC8vIGRpZmZlcmluZyBtZWFucyB3ZSBmb3VuZCBhIG1hdGNoCgkgICAgICAgIGlmIChiZXN0RGlmZmVyZW5jZSA8PSAzKSB7CgkgICAgICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEluZm9ybWF0aW9uKGJlc3RGb3JtYXRJbmZvKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbnVsbDsKCSAgICB9OwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5nZXRFcnJvckNvcnJlY3Rpb25MZXZlbCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JDb3JyZWN0aW9uTGV2ZWw7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5wcm90b3R5cGUuZ2V0RGF0YU1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFNYXNrOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsLmdldEJpdHMoKSA8PCAzKSB8IHRoaXMuZGF0YU1hc2s7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24ucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBGb3JtYXRJbmZvcm1hdGlvbikpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvckNvcnJlY3Rpb25MZXZlbCA9PT0gb3RoZXIuZXJyb3JDb3JyZWN0aW9uTGV2ZWwgJiYKCSAgICAgICAgICAgIHRoaXMuZGF0YU1hc2sgPT09IG90aGVyLmRhdGFNYXNrOwoJICAgIH07CgkgICAgRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUiA9IDB4NTQxMjsKCSAgICAvKioKCSAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYsIEFubmV4IEMsIFRhYmxlIEMuMQoJICAgICAqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVAgPSBbCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1NDEyLCAweDAwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1MTI1LCAweDAxXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1RTdDLCAweDAyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1QjRCLCAweDAzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0NUY5LCAweDA0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0MENFLCAweDA1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0Rjk3LCAweDA2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0QUEwLCAweDA3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3N0M0LCAweDA4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3MkYzLCAweDA5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3REFBLCAweDBBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3ODlELCAweDBCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2NjJGLCAweDBDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2MzE4LCAweDBEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2QzQxLCAweDBFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2OTc2LCAweDBGXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxNjg5LCAweDEwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxM0JFLCAweDExXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxQ0U3LCAweDEyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxOUQwLCAweDEzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwNzYyLCAweDE0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwMjU1LCAweDE1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwRDBDLCAweDE2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwODNCLCAweDE3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzNTVGLCAweDE4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzMDY4LCAweDE5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzRjMxLCAweDFBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzQTA2LCAweDFCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyNEI0LCAweDFDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyMTgzLCAweDFEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyRURBLCAweDFFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyQkVELCAweDFGXSksCgkgICAgXTsKCSAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb247Cgl9KCkpOwoJRm9ybWF0SW5mb3JtYXRpb24kMS5kZWZhdWx0ID0gRm9ybWF0SW5mb3JtYXRpb247CgoJdmFyIEVDQmxvY2tzJDEgPSB7fTsKCgl2YXIgX192YWx1ZXMkNSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0Jsb2NrcyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHNldCBvZiBlcnJvci1jb3JyZWN0aW9uIGJsb2NrcyBpbiBvbmUgc3ltYm9sIHZlcnNpb24uIE1vc3QgdmVyc2lvbnMgd2lsbAoJICogdXNlIGJsb2NrcyBvZiBkaWZmZXJpbmcgc2l6ZXMgd2l0aGluIG9uZSB2ZXJzaW9uLCBzbywgdGhpcyBlbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yCgkgKiBlYWNoIHNldCBvZiBibG9ja3MuIEl0IGFsc28gaG9sZHMgdGhlIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBwZXIgYmxvY2sgc2luY2UgaXQKCSAqIHdpbGwgYmUgdGhlIHNhbWUgYWNyb3NzIGFsbCBibG9ja3Mgd2l0aGluIG9uZSB2ZXJzaW9uLjwvcD4KCSAqLwoJdmFyIEVDQmxvY2tzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEVDQmxvY2tzKGVjQ29kZXdvcmRzUGVyQmxvY2sgLyppbnQqLykgewoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayA9IGVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgICAgIHRoaXMuZWNCbG9ja3MgPSBlY0Jsb2NrczsKCSAgICB9CgkgICAgRUNCbG9ja3MucHJvdG90eXBlLmdldEVDQ29kZXdvcmRzUGVyQmxvY2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0TnVtQmxvY2tzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIHRvdGFsID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tzID0gdGhpcy5lY0Jsb2NrczsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIGVjQmxvY2tzXzEgPSBfX3ZhbHVlcyQ1KGVjQmxvY2tzKSwgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCk7ICFlY0Jsb2Nrc18xXzEuZG9uZTsgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tzXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbCArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2Nrc18xXzEgJiYgIWVjQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGVjQmxvY2tzXzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2Nrc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdG90YWw7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0VG90YWxFQ0NvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayAqIHRoaXMuZ2V0TnVtQmxvY2tzKCk7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0RUNCbG9ja3MgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQmxvY2tzOwoJICAgIH07CgkgICAgcmV0dXJuIEVDQmxvY2tzOwoJfSgpKTsKCUVDQmxvY2tzJDEuZGVmYXVsdCA9IEVDQmxvY2tzOwoKCXZhciBFQ0IkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yIG9uZSBlcnJvci1jb3JyZWN0aW9uIGJsb2NrIGluIG9uZSBzeW1ib2wgdmVyc2lvbi4KCSAqIFRoaXMgaW5jbHVkZXMgdGhlIG51bWJlciBvZiBkYXRhIGNvZGV3b3JkcywgYW5kIHRoZSBudW1iZXIgb2YgdGltZXMgYSBibG9jayB3aXRoIHRoZXNlCgkgKiBwYXJhbWV0ZXJzIGlzIHVzZWQgY29uc2VjdXRpdmVseSBpbiB0aGUgUVIgY29kZSB2ZXJzaW9uJ3MgZm9ybWF0LjwvcD4KCSAqLwoJdmFyIEVDQiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFQ0IoY291bnQgLyppbnQqLywgZGF0YUNvZGV3b3JkcyAvKmludCovKSB7CgkgICAgICAgIHRoaXMuY291bnQgPSBjb3VudDsKCSAgICAgICAgdGhpcy5kYXRhQ29kZXdvcmRzID0gZGF0YUNvZGV3b3JkczsKCSAgICB9CgkgICAgRUNCLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY291bnQ7CgkgICAgfTsKCSAgICBFQ0IucHJvdG90eXBlLmdldERhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICByZXR1cm4gRUNCOwoJfSgpKTsKCUVDQiQxLmRlZmF1bHQgPSBFQ0I7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX3ZhbHVlcyQ0ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFZlcnNpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBCaXRNYXRyaXhfMSQzID0gQml0TWF0cml4JDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSQxID0gRm9ybWF0SW5mb3JtYXRpb24kMTsKCXZhciBFQ0Jsb2Nrc18xID0gRUNCbG9ja3MkMTsKCXZhciBFQ0JfMSA9IEVDQiQxOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDIgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQyID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIFNlZSBJU08gMTgwMDQ6MjAwNiBBbm5leCBECgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFZlcnNpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gVmVyc2lvbih2ZXJzaW9uTnVtYmVyIC8qaW50Ki8sIGFsaWdubWVudFBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmVyc2lvbk51bWJlciA9IHZlcnNpb25OdW1iZXI7CgkgICAgICAgIHRoaXMuYWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczsKCSAgICAgICAgdGhpcy5lY0Jsb2NrcyA9IGVjQmxvY2tzOwoJICAgICAgICB2YXIgdG90YWwgPSAwOwoJICAgICAgICB2YXIgZWNDb2Rld29yZHMgPSBlY0Jsb2Nrc1swXS5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIHZhciBlY2JBcnJheSA9IGVjQmxvY2tzWzBdLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY2JBcnJheV8xID0gX192YWx1ZXMkNChlY2JBcnJheSksIGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpOyAhZWNiQXJyYXlfMV8xLmRvbmU7IGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVjQmxvY2sgPSBlY2JBcnJheV8xXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdG90YWwgKz0gZWNCbG9jay5nZXRDb3VudCgpICogKGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpICsgZWNDb2Rld29yZHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoZWNiQXJyYXlfMV8xICYmICFlY2JBcnJheV8xXzEuZG9uZSAmJiAoX2EgPSBlY2JBcnJheV8xLnJldHVybikpIF9hLmNhbGwoZWNiQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy50b3RhbENvZGV3b3JkcyA9IHRvdGFsOwoJICAgIH0KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5nZXRWZXJzaW9uTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0VG90YWxDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRvdGFsQ29kZXdvcmRzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDE3ICsgNCAqIHRoaXMudmVyc2lvbk51bWJlcjsKCSAgICB9OwoJICAgIFZlcnNpb24ucHJvdG90eXBlLmdldEVDQmxvY2tzRm9yTGV2ZWwgPSBmdW5jdGlvbiAoZWNMZXZlbCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0Jsb2Nrc1tlY0xldmVsLmdldFZhbHVlKCldOwoJICAgICAgICAvLyBUWVBFU0NSSVBUUE9SVDogb3JpZ2luYWwgd2FzIHVzaW5nIG9yZGluYWwsIGFuZCB1c2luZyB0aGUgb3JkZXIgb2YgbGV2ZWxzIGFzIGRlZmluZWQgaW4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwgZW51bSAoTE1RSCkKCSAgICAgICAgLy8gSSB3aWxsIHVzZSB0aGUgZGlyZWN0IHZhbHVlIGZyb20gRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXMgZW51bSB3aGljaCBpbiB0eXBlc2NyaXB0IGdvZXMgdG8gYSBudW1iZXIKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkRlZHVjZXMgdmVyc2lvbiBpbmZvcm1hdGlvbiBwdXJlbHkgZnJvbSBRUiBDb2RlIGRpbWVuc2lvbnMuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gaW4gbW9kdWxlcwoJICAgICAqIEByZXR1cm4gVmVyc2lvbiBmb3IgYSBRUiBDb2RlIG9mIHRoYXQgZGltZW5zaW9uCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCAxIG1vZCA0CgkgICAgICovCgkgICAgVmVyc2lvbi5nZXRQcm92aXNpb25hbFZlcnNpb25Gb3JEaW1lbnNpb24gPSBmdW5jdGlvbiAoZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiAlIDQgIT09IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmVyc2lvbkZvck51bWJlcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlciA9IGZ1bmN0aW9uICh2ZXJzaW9uTnVtYmVyIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPCAxIHx8IHZlcnNpb25OdW1iZXIgPiA0MCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDIuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBWZXJzaW9uLlZFUlNJT05TW3ZlcnNpb25OdW1iZXIgLSAxXTsKCSAgICB9OwoJICAgIFZlcnNpb24uZGVjb2RlVmVyc2lvbkluZm9ybWF0aW9uID0gZnVuY3Rpb24gKHZlcnNpb25CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGJlc3REaWZmZXJlbmNlID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHZhciBiZXN0VmVyc2lvbiA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgVmVyc2lvbi5WRVJTSU9OX0RFQ09ERV9JTkZPLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgdGFyZ2V0VmVyc2lvbiA9IFZlcnNpb24uVkVSU0lPTl9ERUNPREVfSU5GT1tpXTsKCSAgICAgICAgICAgIC8vIERvIHRoZSB2ZXJzaW9uIGluZm8gYml0cyBtYXRjaCBleGFjdGx5PyBkb25lLgoJICAgICAgICAgICAgaWYgKHRhcmdldFZlcnNpb24gPT09IHZlcnNpb25CaXRzKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlcihpICsgNyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBPdGhlcndpc2Ugc2VlIGlmIHRoaXMgaXMgdGhlIGNsb3Nlc3QgdG8gYSByZWFsIHZlcnNpb24gaW5mbyBiaXQgc3RyaW5nCgkgICAgICAgICAgICAvLyB3ZSBoYXZlIHNlZW4gc28gZmFyCgkgICAgICAgICAgICB2YXIgYml0c0RpZmZlcmVuY2UgPSBGb3JtYXRJbmZvcm1hdGlvbl8xJDEuZGVmYXVsdC5udW1CaXRzRGlmZmVyaW5nKHZlcnNpb25CaXRzLCB0YXJnZXRWZXJzaW9uKTsKCSAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgYmVzdFZlcnNpb24gPSBpICsgNzsKCSAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFdlIGNhbiB0b2xlcmF0ZSB1cCB0byAzIGJpdHMgb2YgZXJyb3Igc2luY2Ugbm8gdHdvIHZlcnNpb24gaW5mbyBjb2Rld29yZHMgd2lsbAoJICAgICAgICAvLyBkaWZmZXIgaW4gbGVzcyB0aGFuIDggYml0cy4KCSAgICAgICAgaWYgKGJlc3REaWZmZXJlbmNlIDw9IDMpIHsKCSAgICAgICAgICAgIHJldHVybiBWZXJzaW9uLmdldFZlcnNpb25Gb3JOdW1iZXIoYmVzdFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGRpZG4ndCBmaW5kIGEgY2xvc2UgZW5vdWdoIG1hdGNoLCBmYWlsCgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIElTTyAxODAwNDoyMDA2IEFubmV4IEUKCSAgICAgKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5idWlsZEZ1bmN0aW9uUGF0dGVybiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpOwoJICAgICAgICB2YXIgYml0TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDMuZGVmYXVsdChkaW1lbnNpb24pOwoJICAgICAgICAvLyBUb3AgbGVmdCBmaW5kZXIgcGF0dGVybiArIHNlcGFyYXRvciArIGZvcm1hdAoJICAgICAgICBiaXRNYXRyaXguc2V0UmVnaW9uKDAsIDAsIDksIDkpOwoJICAgICAgICAvLyBUb3AgcmlnaHQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbihkaW1lbnNpb24gLSA4LCAwLCA4LCA5KTsKCSAgICAgICAgLy8gQm90dG9tIGxlZnQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSA4LCA5LCA4KTsKCSAgICAgICAgLy8gQWxpZ25tZW50IHBhdHRlcm5zCgkgICAgICAgIHZhciBtYXggPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHgrKykgewoJICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzW3hdIC0gMjsKCSAgICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgbWF4OyB5KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoKHggPT09IDAgJiYgKHkgPT09IDAgfHwgeSA9PT0gbWF4IC0gMSkpIHx8ICh4ID09PSBtYXggLSAxICYmIHkgPT09IDApKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE5vIGFsaWdubWVudCBwYXR0ZXJucyBuZWFyIHRoZSB0aHJlZSBmaW5kZXIgcGF0dGVybnMKCSAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24odGhpcy5hbGlnbm1lbnRQYXR0ZXJuQ2VudGVyc1t5XSAtIDIsIGksIDUsIDUpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFZlcnRpY2FsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oNiwgOSwgMSwgZGltZW5zaW9uIC0gMTcpOwoJICAgICAgICAvLyBIb3Jpem9udGFsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oOSwgNiwgZGltZW5zaW9uIC0gMTcsIDEpOwoJICAgICAgICBpZiAodGhpcy52ZXJzaW9uTnVtYmVyID4gNikgewoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCB0b3AgcmlnaHQKCSAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oZGltZW5zaW9uIC0gMTEsIDAsIDMsIDYpOwoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCBib3R0b20gbGVmdAoJICAgICAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSAxMSwgNiwgMyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICcnICsgdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgQW5uZXggRC4KCSAgICAgICAqIEVsZW1lbnQgaSByZXByZXNlbnRzIHRoZSByYXcgdmVyc2lvbiBiaXRzIHRoYXQgc3BlY2lmeSB2ZXJzaW9uIGkgKyA3CgkgICAgICAgKi8KCSAgICBWZXJzaW9uLlZFUlNJT05fREVDT0RFX0lORk8gPSBJbnQzMkFycmF5LmZyb20oWwoJICAgICAgICAweDA3Qzk0LCAweDA4NUJDLCAweDA5QTk5LCAweDBBNEQzLCAweDBCQkY2LAoJICAgICAgICAweDBDNzYyLCAweDBEODQ3LCAweDBFNjBELCAweDBGOTI4LCAweDEwQjc4LAoJICAgICAgICAweDExNDVELCAweDEyQTE3LCAweDEzNTMyLCAweDE0OUE2LCAweDE1NjgzLAoJICAgICAgICAweDE2OEM5LCAweDE3N0VDLCAweDE4RUM0LCAweDE5MUUxLCAweDFBRkFCLAoJICAgICAgICAweDFCMDhFLCAweDFDQzFBLCAweDFEMzNGLCAweDFFRDc1LCAweDFGMjUwLAoJICAgICAgICAweDIwOUQ1LCAweDIxNkYwLCAweDIyOEJBLCAweDIzNzlGLCAweDI0QjBCLAoJICAgICAgICAweDI1NDJFLCAweDI2QTY0LCAweDI3NTQxLCAweDI4QzY5CgkgICAgXSk7CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgNi41LjEgVGFibGUgOQoJICAgICAgICovCgkgICAgVmVyc2lvbi5WRVJTSU9OUyA9IFsKCSAgICAgICAgbmV3IFZlcnNpb24oMSwgbmV3IEludDMyQXJyYXkoMCksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOSkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMiwgSW50MzJBcnJheS5mcm9tKFs2LCAxOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDEwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMywgSW50MzJBcnJheS5mcm9tKFs2LCAyMl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE1LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1NSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA4MCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA5KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCA0MykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTIpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDYsIEludDMyQXJyYXkuZnJvbShbNiwgMzRdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDcsIEludDMyQXJyYXkuZnJvbShbNiwgMjIsIDM4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDc4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDMxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNCkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNCwgNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMzgpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzOSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxOCksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE5KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDksIEludDMyQXJyYXkuZnJvbShbNiwgMjYsIDQ2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAzNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDM3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTAsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDUwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDY4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxOSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDIwKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDExLCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA4MSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDUxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTIsIEludDMyQXJyYXkuZnJvbShbNiwgMzIsIDU4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDkyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMzYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDEzLCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2Ml0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMzcpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDEyLCAxMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDYsIDY2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA0MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDQxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDE3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNSwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDgsIDcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDg3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgODgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgNDEpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNiwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDk4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0NikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTkpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyMCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTcsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU0LCA3OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxMDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE4LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NiwgODJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIwKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDQzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxOSwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE5LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1OCwgODZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTE0KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDQ0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDQ1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDE3LCAyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDE0KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMCwgSW50MzJBcnJheS5mcm9tKFs2LCAzNCwgNjIsIDkwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDEwNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0MSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIxLCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1MCwgNzIsIDk0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDIpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIyLCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1MCwgNzQsIDk4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDExMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMywgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIxKSwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI0LCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1NCwgODAsIDEwNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTcpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMwLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE3KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyNSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMTA2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTA3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMjYsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzMsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI3LCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2MiwgOTAsIDExOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0LCA5OCwgMTIyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDIsIDEyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTYpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjEsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgzNywgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTIsIDc4LCAxMDQsIDEzMF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCA0NyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjMsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjUsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTYsIDgyLCAxMDgsIDEzNF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxMywgMTE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQyLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDI4LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzIsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYwLCA4NiwgMTEyLCAxMzhdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzUsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDM1LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzMsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0LCAxNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzQsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYyLCA5MCwgMTE4LCAxNDZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNDQsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NCwgNzgsIDEwMiwgMTI2LCAxNTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDEyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMiwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgNDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzYsIEludDMyQXJyYXkuZnJvbShbNiwgMjQsIDUwLCA3NiwgMTAyLCAxMjgsIDE1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMjEpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDY0LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzcsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDU0LCA4MCwgMTA2LCAxMzIsIDE1OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIzKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDI5LCA0NiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCA0NykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0OSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjQsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNDYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzOCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTAsIDEzNiwgMTYyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE4LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzIsIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ4LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM5LCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1NCwgODIsIDExMCwgMTM4LCAxNjZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjAsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCg0MCwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNjcsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig0MCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTgsIDg2LCAxMTQsIDE0MiwgMTcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxMTgpLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyMCwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCg2MSwgMTYpKSkKCSAgICBdOwoJICAgIHJldHVybiBWZXJzaW9uOwoJfSgpKTsKCVZlcnNpb24kMS5kZWZhdWx0ID0gVmVyc2lvbjsKCgl2YXIgRGF0YU1hc2sgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5EYXRhTWFza1ZhbHVlcyA9IHZvaWQgMDsKCXZhciBEYXRhTWFza1ZhbHVlczsKCShmdW5jdGlvbiAoRGF0YU1hc2tWYWx1ZXMpIHsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAwMCJdID0gMF0gPSAiREFUQV9NQVNLXzAwMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18wMDEiXSA9IDFdID0gIkRBVEFfTUFTS18wMDEiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMDEwIl0gPSAyXSA9ICJEQVRBX01BU0tfMDEwIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAxMSJdID0gM10gPSAiREFUQV9NQVNLXzAxMSI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMDAiXSA9IDRdID0gIkRBVEFfTUFTS18xMDAiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMTAxIl0gPSA1XSA9ICJEQVRBX01BU0tfMTAxIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzExMCJdID0gNl0gPSAiREFUQV9NQVNLXzExMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMTEiXSA9IDddID0gIkRBVEFfTUFTS18xMTEiOwoJfSkoRGF0YU1hc2tWYWx1ZXMgPSBleHBvcnRzLkRhdGFNYXNrVmFsdWVzIHx8IChleHBvcnRzLkRhdGFNYXNrVmFsdWVzID0ge30pKTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGRhdGEgbWFza3MgZm9yIHRoZSBkYXRhIGJpdHMgaW4gYSBRUiBjb2RlLCBwZXIgSVNPIDE4MDA0OjIwMDYgNi44LiBJbXBsZW1lbnRhdGlvbnMKCSAqIG9mIHRoaXMgY2xhc3MgY2FuIHVuLW1hc2sgYSByYXcgQml0TWF0cml4LiBGb3Igc2ltcGxpY2l0eSwgdGhleSB3aWxsIHVubWFzayB0aGUgZW50aXJlIEJpdE1hdHJpeCwKCSAqIGluY2x1ZGluZyBhcmVhcyB1c2VkIGZvciBmaW5kZXIgcGF0dGVybnMsIHRpbWluZyBwYXR0ZXJucywgZXRjLiBUaGVzZSBhcmVhcyBzaG91bGQgYmUgdW51c2VkCgkgKiBhZnRlciB0aGUgcG9pbnQgdGhleSBhcmUgdW5tYXNrZWQgYW55d2F5LjwvcD4KCSAqCgkgKiA8cD5Ob3RlIHRoYXQgdGhlIGRpYWdyYW0gaW4gc2VjdGlvbiA2LjguMSBpcyBtaXNsZWFkaW5nIHNpbmNlIGl0IGluZGljYXRlcyB0aGF0IGkgaXMgY29sdW1uIHBvc2l0aW9uCgkgKiBhbmQgaiBpcyByb3cgcG9zaXRpb24uIEluIGZhY3QsIGFzIHRoZSB0ZXh0IHNheXMsIGkgaXMgcm93IHBvc2l0aW9uIGFuZCBqIGlzIGNvbHVtbiBwb3NpdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFNYXNrID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIFNlZSBJU08gMTgwMDQ6MjAwNiA2LjguMQoJICAgIGZ1bmN0aW9uIERhdGFNYXNrKHZhbHVlLCBpc01hc2tlZCkgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuaXNNYXNrZWQgPSBpc01hc2tlZDsKCSAgICB9CgkgICAgLy8gRW5kIG9mIGVudW0gY29uc3RhbnRzLgoJICAgIC8qKgoJICAgICAqIDxwPkltcGxlbWVudGF0aW9ucyBvZiB0aGlzIG1ldGhvZCByZXZlcnNlIHRoZSBkYXRhIG1hc2tpbmcgcHJvY2VzcyBhcHBsaWVkIHRvIGEgUVIgQ29kZSBhbmQKCSAgICAgKiBtYWtlIGl0cyBiaXRzIHJlYWR5IHRvIHJlYWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGJpdHMgcmVwcmVzZW50YXRpb24gb2YgUVIgQ29kZSBiaXRzCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gb2YgUVIgQ29kZSwgcmVwcmVzZW50ZWQgYnkgYml0cywgYmVpbmcgdW5tYXNrZWQKCSAgICAgKi8KCSAgICBEYXRhTWFzay5wcm90b3R5cGUudW5tYXNrQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGRpbWVuc2lvbiAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGltZW5zaW9uOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01hc2tlZChpLCBqKSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLmZsaXAoaiwgaSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBEYXRhTWFzay52YWx1ZXMgPSBuZXcgTWFwKFsKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDAwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeCArIHkpIG1vZCAyID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDAwLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMCwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoKGkgKyBqKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeCBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMDEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgJiAweDAxKSA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMDEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoIHkgbW9kIDMgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuIGogJSAzID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKHggKyB5KSBtb2QgMyA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAxMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgKyBqKSAlIDMgPT09IDA7IH0pXSwKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDEwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeC8yICsgeS8zKSBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMCwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMDAsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKChNYXRoLmZsb29yKGkgLyAyKSArIE1hdGguZmxvb3IoaiAvIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeHkgbW9kIDIgKyB4eSBtb2QgMyA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2ID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTAxLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMSwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoaSAqIGopICUgNiA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMTEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoICh4eSBtb2QgMiArIHh5IG1vZCAzKSBtb2QgMiA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2IDwgMwoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSAqIGopICUgNikgPCAzOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKCh4K3kpbW9kIDIgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKiBlcXVpdmFsZW50bHksIHN1Y2ggdGhhdCAoeCArIHkgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTEsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTExLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSArIGogKyAoKGkgKiBqKSAlIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgXSk7CgkgICAgcmV0dXJuIERhdGFNYXNrOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IERhdGFNYXNrOwoKCX0oRGF0YU1hc2spKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdE1hdHJpeFBhcnNlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgVmVyc2lvbl8xJDEgPSBWZXJzaW9uJDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSA9IEZvcm1hdEluZm9ybWF0aW9uJDE7Cgl2YXIgRGF0YU1hc2tfMSA9IERhdGFNYXNrOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCS8qKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJpdE1hdHJpeFBhcnNlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYml0TWF0cml4IHtAbGluayBCaXRNYXRyaXh9IHRvIHBhcnNlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCA+PSAyMSBhbmQgMSBtb2QgNAoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeFBhcnNlcihiaXRNYXRyaXgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IGJpdE1hdHJpeC5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiA8IDIxIHx8IChkaW1lbnNpb24gJiAweDAzKSAhPT0gMSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0TWF0cml4ID0gYml0TWF0cml4OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5SZWFkcyBmb3JtYXQgaW5mb3JtYXRpb24gZnJvbSBvbmUgb2YgaXRzIHR3byBsb2NhdGlvbnMgd2l0aGluIHRoZSBRUiBDb2RlLjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEZvcm1hdEluZm9ybWF0aW9ufSBlbmNhcHN1bGF0aW5nIHRoZSBRUiBDb2RlJ3MgZm9ybWF0IGluZm8KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIGZvcm1hdCBpbmZvcm1hdGlvbiBsb2NhdGlvbnMgY2Fubm90IGJlIHBhcnNlZCBhcwoJICAgICAqIHRoZSB2YWxpZCBlbmNvZGluZyBvZiBmb3JtYXQgaW5mb3JtYXRpb24KCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRGb3JtYXRJbmZvcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgaWYgKHRoaXMucGFyc2VkRm9ybWF0SW5mbyAhPT0gbnVsbCAmJiB0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VkRm9ybWF0SW5mbzsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRvcC1sZWZ0IGZvcm1hdCBpbmZvIGJpdHMKCSAgICAgICAgdmFyIGZvcm1hdEluZm9CaXRzMSA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjsgaSsrKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoaSwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyAuLiBhbmQgc2tpcCBhIGJpdCBpbiB0aGUgdGltaW5nIHBhdHRlcm4gLi4uCgkgICAgICAgIGZvcm1hdEluZm9CaXRzMSA9IHRoaXMuY29weUJpdCg3LCA4LCBmb3JtYXRJbmZvQml0czEpOwoJICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgZm9ybWF0SW5mb0JpdHMxID0gdGhpcy5jb3B5Qml0KDgsIDcsIGZvcm1hdEluZm9CaXRzMSk7CgkgICAgICAgIC8vIC4uIGFuZCBza2lwIGEgYml0IGluIHRoZSB0aW1pbmcgcGF0dGVybiAuLi4KCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgaiwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRoZSB0b3AtcmlnaHQvYm90dG9tLWxlZnQgcGF0dGVybiB0b28KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgZm9ybWF0SW5mb0JpdHMyID0gMDsKCSAgICAgICAgdmFyIGpNaW4gPSBkaW1lbnNpb24gLSA3OwoJICAgICAgICBmb3IgKHZhciBqID0gZGltZW5zaW9uIC0gMTsgaiA+PSBqTWluOyBqLS0pIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdCg4LCBqLCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIGZvciAodmFyIGkgPSBkaW1lbnNpb24gLSA4OyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdChpLCA4LCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uXzEuZGVmYXVsdC5kZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihmb3JtYXRJbmZvQml0czEsIGZvcm1hdEluZm9CaXRzMik7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZEZvcm1hdEluZm87CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+UmVhZHMgdmVyc2lvbiBpbmZvcm1hdGlvbiBmcm9tIG9uZSBvZiBpdHMgdHdvIGxvY2F0aW9ucyB3aXRoaW4gdGhlIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgVmVyc2lvbn0gZW5jYXBzdWxhdGluZyB0aGUgUVIgQ29kZSdzIHZlcnNpb24KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIHZlcnNpb24gaW5mb3JtYXRpb24gbG9jYXRpb25zIGNhbm5vdCBiZSBwYXJzZWQgYXMKCSAgICAgKiB0aGUgdmFsaWQgZW5jb2Rpbmcgb2YgdmVyc2lvbiBpbmZvcm1hdGlvbgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUucmVhZFZlcnNpb24gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZFZlcnNpb24gIT09IG51bGwgJiYgdGhpcy5wYXJzZWRWZXJzaW9uICE9PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgcHJvdmlzaW9uYWxWZXJzaW9uID0gTWF0aC5mbG9vcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24gPD0gNikgewoJICAgICAgICAgICAgcmV0dXJuIFZlcnNpb25fMSQxLmRlZmF1bHQuZ2V0VmVyc2lvbkZvck51bWJlcihwcm92aXNpb25hbFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJlYWQgdG9wLXJpZ2h0IHZlcnNpb24gaW5mbzogMyB3aWRlIGJ5IDYgdGFsbAoJICAgICAgICB2YXIgdmVyc2lvbkJpdHMgPSAwOwoJICAgICAgICB2YXIgaWpNaW4gPSBkaW1lbnNpb24gLSAxMTsKCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gZGltZW5zaW9uIC0gOTsgaSA+PSBpak1pbjsgaS0tKSB7CgkgICAgICAgICAgICAgICAgdmVyc2lvbkJpdHMgPSB0aGlzLmNvcHlCaXQoaSwgaiwgdmVyc2lvbkJpdHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBmYWlsZWQuIFRyeSBib3R0b20gbGVmdDogNiB3aWRlIGJ5IDMgdGFsbAoJICAgICAgICB2ZXJzaW9uQml0cyA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSA1OyBpID49IDA7IGktLSkgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IGRpbWVuc2lvbiAtIDk7IGogPj0gaWpNaW47IGotLSkgewoJICAgICAgICAgICAgICAgIHZlcnNpb25CaXRzID0gdGhpcy5jb3B5Qml0KGksIGosIHZlcnNpb25CaXRzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5jb3B5Qml0ID0gZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovLCB2ZXJzaW9uQml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBiaXQgPSB0aGlzLmlzTWlycm9yID8gdGhpcy5iaXRNYXRyaXguZ2V0KGosIGkpIDogdGhpcy5iaXRNYXRyaXguZ2V0KGksIGopOwoJICAgICAgICByZXR1cm4gYml0ID8gKHZlcnNpb25CaXRzIDw8IDEpIHwgMHgxIDogdmVyc2lvbkJpdHMgPDwgMTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlJlYWRzIHRoZSBiaXRzIGluIHRoZSB7QGxpbmsgQml0TWF0cml4fSByZXByZXNlbnRpbmcgdGhlIGZpbmRlciBwYXR0ZXJuIGluIHRoZQoJICAgICAqIGNvcnJlY3Qgb3JkZXIgaW4gb3JkZXIgdG8gcmVjb25zdHJ1Y3QgdGhlIGNvZGV3b3JkcyBieXRlcyBjb250YWluZWQgd2l0aGluIHRoZQoJICAgICAqIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBleGFjdCBudW1iZXIgb2YgYnl0ZXMgZXhwZWN0ZWQgaXMgbm90IHJlYWQKCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBmb3JtYXRJbmZvID0gdGhpcy5yZWFkRm9ybWF0SW5mb3JtYXRpb24oKTsKCSAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLnJlYWRWZXJzaW9uKCk7CgkgICAgICAgIC8vIEdldCB0aGUgZGF0YSBtYXNrIGZvciB0aGUgZm9ybWF0IHVzZWQgaW4gdGhpcyBRUiBDb2RlLiBUaGlzIHdpbGwgZXhjbHVkZQoJICAgICAgICAvLyBzb21lIGJpdHMgZnJvbSByZWFkaW5nIGFzIHdlIHdpbmQgdGhyb3VnaCB0aGUgYml0IG1hdHJpeC4KCSAgICAgICAgdmFyIGRhdGFNYXNrID0gRGF0YU1hc2tfMS5kZWZhdWx0LnZhbHVlcy5nZXQoZm9ybWF0SW5mby5nZXREYXRhTWFzaygpKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICBkYXRhTWFzay51bm1hc2tCaXRNYXRyaXgodGhpcy5iaXRNYXRyaXgsIGRpbWVuc2lvbik7CgkgICAgICAgIHZhciBmdW5jdGlvblBhdHRlcm4gPSB2ZXJzaW9uLmJ1aWxkRnVuY3Rpb25QYXR0ZXJuKCk7CgkgICAgICAgIHZhciByZWFkaW5nVXAgPSB0cnVlOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkodmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKTsKCSAgICAgICAgdmFyIHJlc3VsdE9mZnNldCA9IDA7CgkgICAgICAgIHZhciBjdXJyZW50Qnl0ZSA9IDA7CgkgICAgICAgIHZhciBiaXRzUmVhZCA9IDA7CgkgICAgICAgIC8vIFJlYWQgY29sdW1ucyBpbiBwYWlycywgZnJvbSByaWdodCB0byBsZWZ0CgkgICAgICAgIGZvciAodmFyIGogPSBkaW1lbnNpb24gLSAxOyBqID4gMDsgaiAtPSAyKSB7CgkgICAgICAgICAgICBpZiAoaiA9PT0gNikgewoJICAgICAgICAgICAgICAgIC8vIFNraXAgd2hvbGUgY29sdW1uIHdpdGggdmVydGljYWwgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgICAgICAgICAgICAvLyBzYXZlcyB0aW1lIGFuZCBtYWtlcyB0aGUgb3RoZXIgY29kZSBwcm9jZWVkIG1vcmUgY2xlYW5seQoJICAgICAgICAgICAgICAgIGotLTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIFJlYWQgYWx0ZXJuYXRpbmdseSBmcm9tIGJvdHRvbSB0byB0b3AgdGhlbiB0b3AgdG8gYm90dG9tCgkgICAgICAgICAgICBmb3IgKHZhciBjb3VudCA9IDA7IGNvdW50IDwgZGltZW5zaW9uOyBjb3VudCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGkgPSByZWFkaW5nVXAgPyBkaW1lbnNpb24gLSAxIC0gY291bnQgOiBjb3VudDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCAyOyBjb2wrKykgewoJICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgYml0cyBjb3ZlcmVkIGJ5IHRoZSBmdW5jdGlvbiBwYXR0ZXJuCgkgICAgICAgICAgICAgICAgICAgIGlmICghZnVuY3Rpb25QYXR0ZXJuLmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVhZCBhIGJpdAoJICAgICAgICAgICAgICAgICAgICAgICAgYml0c1JlYWQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYml0TWF0cml4LmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSd2ZSBtYWRlIGEgd2hvbGUgYnl0ZSwgc2F2ZSBpdCBvZmYKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzUmVhZCA9PT0gOCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRPZmZzZXQrK10gPSAvKihieXRlKSAqLyBjdXJyZW50Qnl0ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRzUmVhZCA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVhZGluZ1VwID0gIXJlYWRpbmdVcDsgLy8gcmVhZGluZ1VwIF49IHRydWU7IC8vIHJlYWRpbmdVcCA9ICFyZWFkaW5nVXA7IC8vIHN3aXRjaCBkaXJlY3Rpb25zCgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJlc3VsdE9mZnNldCAhPT0gdmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldmVydCB0aGUgbWFzayByZW1vdmFsIGRvbmUgd2hpbGUgcmVhZGluZyB0aGUgY29kZSB3b3Jkcy4gVGhlIGJpdCBtYXRyaXggc2hvdWxkIHJldmVydCB0byBpdHMgb3JpZ2luYWwgc3RhdGUuCgkgICAgICovCgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5yZW1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybjsgLy8gV2UgaGF2ZSBubyBmb3JtYXQgaW5mb3JtYXRpb24sIGFuZCBoYXZlIG5vIGRhdGEgbWFzawoJICAgICAgICB9CgkgICAgICAgIHZhciBkYXRhTWFzayA9IERhdGFNYXNrXzEuZGVmYXVsdC52YWx1ZXNbdGhpcy5wYXJzZWRGb3JtYXRJbmZvLmdldERhdGFNYXNrKCldOwoJICAgICAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5iaXRNYXRyaXguZ2V0SGVpZ2h0KCk7CgkgICAgICAgIGRhdGFNYXNrLnVubWFza0JpdE1hdHJpeCh0aGlzLmJpdE1hdHJpeCwgZGltZW5zaW9uKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFByZXBhcmUgdGhlIHBhcnNlciBmb3IgYSBtaXJyb3JlZCBvcGVyYXRpb24uCgkgICAgICogVGhpcyBmbGFnIGhhcyBlZmZlY3Qgb25seSBvbiB0aGUge0BsaW5rICNyZWFkRm9ybWF0SW5mb3JtYXRpb24oKX0gYW5kIHRoZQoJICAgICAqIHtAbGluayAjcmVhZFZlcnNpb24oKX0uIEJlZm9yZSBwcm9jZWVkaW5nIHdpdGgge0BsaW5rICNyZWFkQ29kZXdvcmRzKCl9IHRoZQoJICAgICAqIHtAbGluayAjbWlycm9yKCl9IG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkLgoJICAgICAqCgkgICAgICogQHBhcmFtIG1pcnJvciBXaGV0aGVyIHRvIHJlYWQgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm9ybWF0aW9uIG1pcnJvcmVkLgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUuc2V0TWlycm9yID0gZnVuY3Rpb24gKGlzTWlycm9yKSB7CgkgICAgICAgIHRoaXMucGFyc2VkVmVyc2lvbiA9IG51bGw7CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IG51bGw7CgkgICAgICAgIHRoaXMuaXNNaXJyb3IgPSBpc01pcnJvcjsKCSAgICB9OwoJICAgIC8qKiBNaXJyb3IgdGhlIGJpdCBtYXRyaXggaW4gb3JkZXIgdG8gYXR0ZW1wdCBhIHNlY29uZCByZWFkaW5nLiAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUubWlycm9yID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgYml0TWF0cml4ID0gdGhpcy5iaXRNYXRyaXg7CgkgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IGJpdE1hdHJpeC5nZXRXaWR0aCgpOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgeSA9IHggKyAxLCBoZWlnaHQgPSBiaXRNYXRyaXguZ2V0SGVpZ2h0KCk7IHkgPCBoZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgICAgIGlmIChiaXRNYXRyaXguZ2V0KHgsIHkpICE9PSBiaXRNYXRyaXguZ2V0KHksIHgpKSB7CgkgICAgICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5mbGlwKHksIHgpOwoJICAgICAgICAgICAgICAgICAgICBiaXRNYXRyaXguZmxpcCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXhQYXJzZXI7Cgl9KCkpOwoJQml0TWF0cml4UGFyc2VyJDEuZGVmYXVsdCA9IEJpdE1hdHJpeFBhcnNlcjsKCgl2YXIgRGF0YUJsb2NrJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0YUJsb2NrJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQxID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIGJsb2NrIG9mIGRhdGEgd2l0aGluIGEgUVIgQ29kZS4gUVIgQ29kZXMgbWF5IHNwbGl0IHRoZWlyIGRhdGEgaW50bwoJICogbXVsdGlwbGUgYmxvY2tzLCBlYWNoIG9mIHdoaWNoIGlzIGEgdW5pdCBvZiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3Jkcy4gRWFjaAoJICogaXMgcmVwcmVzZW50ZWQgYnkgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFCbG9jayA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEYXRhQmxvY2sobnVtRGF0YUNvZGV3b3JkcyAvKmludCovLCBjb2Rld29yZHMpIHsKCSAgICAgICAgdGhpcy5udW1EYXRhQ29kZXdvcmRzID0gbnVtRGF0YUNvZGV3b3JkczsKCSAgICAgICAgdGhpcy5jb2Rld29yZHMgPSBjb2Rld29yZHM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIDxwPldoZW4gUVIgQ29kZXMgdXNlIG11bHRpcGxlIGRhdGEgYmxvY2tzLCB0aGV5IGFyZSBhY3R1YWxseSBpbnRlcmxlYXZlZC4KCSAgICAgKiBUaGF0IGlzLCB0aGUgZmlyc3QgYnl0ZSBvZiBkYXRhIGJsb2NrIDEgdG8gbiBpcyB3cml0dGVuLCB0aGVuIHRoZSBzZWNvbmQgYnl0ZXMsIGFuZCBzbyBvbi4gVGhpcwoJICAgICAqIG1ldGhvZCB3aWxsIHNlcGFyYXRlIHRoZSBkYXRhIGludG8gb3JpZ2luYWwgYmxvY2tzLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByYXdDb2Rld29yZHMgYnl0ZXMgYXMgcmVhZCBkaXJlY3RseSBmcm9tIHRoZSBRUiBDb2RlCgkgICAgICogQHBhcmFtIHZlcnNpb24gdmVyc2lvbiBvZiB0aGUgUVIgQ29kZQoJICAgICAqIEBwYXJhbSBlY0xldmVsIGVycm9yLWNvcnJlY3Rpb24gbGV2ZWwgb2YgdGhlIFFSIENvZGUKCSAgICAgKiBAcmV0dXJuIERhdGFCbG9ja3MgY29udGFpbmluZyBvcmlnaW5hbCBieXRlcywgImRlLWludGVybGVhdmVkIiBmcm9tIHJlcHJlc2VudGF0aW9uIGluIHRoZQoJICAgICAqICAgICAgICAgUVIgQ29kZQoJICAgICAqLwoJICAgIERhdGFCbG9jay5nZXREYXRhQmxvY2tzID0gZnVuY3Rpb24gKHJhd0NvZGV3b3JkcywgdmVyc2lvbiwgZWNMZXZlbCkgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgaWYgKHJhd0NvZGV3b3Jkcy5sZW5ndGggIT09IHZlcnNpb24uZ2V0VG90YWxDb2Rld29yZHMoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIG51bWJlciBhbmQgc2l6ZSBvZiBkYXRhIGJsb2NrcyB1c2VkIGJ5IHRoaXMgdmVyc2lvbiBhbmQKCSAgICAgICAgLy8gZXJyb3IgY29ycmVjdGlvbiBsZXZlbAoJICAgICAgICB2YXIgZWNCbG9ja3MgPSB2ZXJzaW9uLmdldEVDQmxvY2tzRm9yTGV2ZWwoZWNMZXZlbCk7CgkgICAgICAgIC8vIEZpcnN0IGNvdW50IHRoZSB0b3RhbCBudW1iZXIgb2YgZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIHRvdGFsQmxvY2tzID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tBcnJheSA9IGVjQmxvY2tzLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY0Jsb2NrQXJyYXlfMSA9IF9fdmFsdWVzJDMoZWNCbG9ja0FycmF5KSwgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKTsgIWVjQmxvY2tBcnJheV8xXzEuZG9uZTsgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBlY0Jsb2NrID0gZWNCbG9ja0FycmF5XzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbEJsb2NrcyArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2NrQXJyYXlfMV8xICYmICFlY0Jsb2NrQXJyYXlfMV8xLmRvbmUgJiYgKF9hID0gZWNCbG9ja0FycmF5XzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2NrQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGVzdGFibGlzaCBEYXRhQmxvY2tzIG9mIHRoZSBhcHByb3ByaWF0ZSBzaXplIGFuZCBudW1iZXIgb2YgZGF0YSBjb2Rld29yZHMKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheSh0b3RhbEJsb2Nrcyk7CgkgICAgICAgIHZhciBudW1SZXN1bHRCbG9ja3MgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZWNCbG9ja0FycmF5XzIgPSBfX3ZhbHVlcyQzKGVjQmxvY2tBcnJheSksIGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCk7ICFlY0Jsb2NrQXJyYXlfMl8xLmRvbmU7IGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tBcnJheV8yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlY0Jsb2NrLmdldENvdW50KCk7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRGF0YUNvZGV3b3JkcyA9IGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtQmxvY2tDb2Rld29yZHMgPSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCkgKyBudW1EYXRhQ29kZXdvcmRzOwoJICAgICAgICAgICAgICAgICAgICByZXN1bHRbbnVtUmVzdWx0QmxvY2tzKytdID0gbmV3IERhdGFCbG9jayhudW1EYXRhQ29kZXdvcmRzLCBuZXcgVWludDhBcnJheShudW1CbG9ja0NvZGV3b3JkcykpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGVjQmxvY2tBcnJheV8yXzEgJiYgIWVjQmxvY2tBcnJheV8yXzEuZG9uZSAmJiAoX2IgPSBlY0Jsb2NrQXJyYXlfMi5yZXR1cm4pKSBfYi5jYWxsKGVjQmxvY2tBcnJheV8yKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICAvLyBBbGwgYmxvY2tzIGhhdmUgdGhlIHNhbWUgYW1vdW50IG9mIGRhdGEsIGV4Y2VwdCB0aGF0IHRoZSBsYXN0IG4KCSAgICAgICAgLy8gKHdoZXJlIG4gbWF5IGJlIDApIGhhdmUgMSBtb3JlIGJ5dGUuIEZpZ3VyZSBvdXQgd2hlcmUgdGhlc2Ugc3RhcnQuCgkgICAgICAgIHZhciBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGxvbmdlckJsb2Nrc1N0YXJ0QXQgPSByZXN1bHQubGVuZ3RoIC0gMTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IGNoZWNrIGxlbmd0aCBpcyBjb3JyZWN0IGhlcmUKCSAgICAgICAgd2hpbGUgKGxvbmdlckJsb2Nrc1N0YXJ0QXQgPj0gMCkgewoJICAgICAgICAgICAgdmFyIG51bUNvZGV3b3JkcyA9IHJlc3VsdFtsb25nZXJCbG9ja3NTdGFydEF0XS5jb2Rld29yZHMubGVuZ3RoOwoJICAgICAgICAgICAgaWYgKG51bUNvZGV3b3JkcyA9PT0gc2hvcnRlckJsb2Nrc1RvdGFsQ29kZXdvcmRzKSB7CgkgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsb25nZXJCbG9ja3NTdGFydEF0LS07CgkgICAgICAgIH0KCSAgICAgICAgbG9uZ2VyQmxvY2tzU3RhcnRBdCsrOwoJICAgICAgICB2YXIgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHMgPSBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgLSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIC8vIFRoZSBsYXN0IGVsZW1lbnRzIG9mIHJlc3VsdCBtYXkgYmUgMSBlbGVtZW50IGxvbmdlcgoJICAgICAgICAvLyBmaXJzdCBmaWxsIG91dCBhcyBtYW55IGVsZW1lbnRzIGFzIGFsbCBvZiB0aGVtIGhhdmUKCSAgICAgICAgdmFyIHJhd0NvZGV3b3Jkc09mZnNldCA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBudW1SZXN1bHRCbG9ja3M7IGorKykgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaV0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIEZpbGwgb3V0IHRoZSBsYXN0IGRhdGEgYmxvY2sgaW4gdGhlIGxvbmdlciBvbmVzCgkgICAgICAgIGZvciAodmFyIGogPSBsb25nZXJCbG9ja3NTdGFydEF0OyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHNdID0gcmF3Q29kZXdvcmRzW3Jhd0NvZGV3b3Jkc09mZnNldCsrXTsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cgYWRkIGluIGVycm9yIGNvcnJlY3Rpb24gYmxvY2tzCgkgICAgICAgIHZhciBtYXggPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IHNob3J0ZXJCbG9ja3NOdW1EYXRhQ29kZXdvcmRzOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgaU9mZnNldCA9IGogPCBsb25nZXJCbG9ja3NTdGFydEF0ID8gaSA6IGkgKyAxOwoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaU9mZnNldF0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldE51bURhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bURhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldENvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29kZXdvcmRzOwoJICAgIH07CgkgICAgcmV0dXJuIERhdGFCbG9jazsKCX0oKSk7CglEYXRhQmxvY2skMS5kZWZhdWx0ID0gRGF0YUJsb2NrOwoKCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEgPSB7fTsKCgl2YXIgQml0U291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdFNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbiB7Ki8KCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIHByb3ZpZGVzIGFuIGVhc3kgYWJzdHJhY3Rpb24gdG8gcmVhZCBiaXRzIGF0IGEgdGltZSBmcm9tIGEgc2VxdWVuY2Ugb2YgYnl0ZXMsIHdoZXJlIHRoZQoJICogbnVtYmVyIG9mIGJpdHMgcmVhZCBpcyBub3Qgb2Z0ZW4gYSBtdWx0aXBsZSBvZiA4LjwvcD4KCSAqCgkgKiA8cD5UaGlzIGNsYXNzIGlzIHRocmVhZC1zYWZlIGJ1dCBub3QgcmVlbnRyYW50IC0tIHVubGVzcyB0aGUgY2FsbGVyIG1vZGlmaWVzIHRoZSBieXRlcyBhcnJheQoJICogaXQgcGFzc2VkIGluLCBpbiB3aGljaCBjYXNlIGFsbCBiZXRzIGFyZSBvZmYuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBCaXRTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJ5dGVzIGJ5dGVzIGZyb20gd2hpY2ggdGhpcyB3aWxsIHJlYWQgYml0cy4gQml0cyB3aWxsIGJlIHJlYWQgZnJvbSB0aGUgZmlyc3QgYnl0ZSBmaXJzdC4KCSAgICAgKiBCaXRzIGFyZSByZWFkIHdpdGhpbiBhIGJ5dGUgZnJvbSBtb3N0LXNpZ25pZmljYW50IHRvIGxlYXN0LXNpZ25pZmljYW50IGJpdC4KCSAgICAgKi8KCSAgICBmdW5jdGlvbiBCaXRTb3VyY2UoYnl0ZXMpIHsKCSAgICAgICAgdGhpcy5ieXRlcyA9IGJ5dGVzOwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSAwOwoJICAgICAgICB0aGlzLmJpdE9mZnNldCA9IDA7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaW5kZXggb2YgbmV4dCBiaXQgaW4gY3VycmVudCBieXRlIHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qml0T2Zmc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRPZmZzZXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgYnl0ZSBpbiBpbnB1dCBieXRlIGFycmF5IHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qnl0ZU9mZnNldCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYnl0ZU9mZnNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBudW1CaXRzIG51bWJlciBvZiBiaXRzIHRvIHJlYWQKCSAgICAgKiBAcmV0dXJuIGludCByZXByZXNlbnRpbmcgdGhlIGJpdHMgcmVhZC4gVGhlIGJpdHMgd2lsbCBhcHBlYXIgYXMgdGhlIGxlYXN0LXNpZ25pZmljYW50CgkgICAgICogICAgICAgICBiaXRzIG9mIHRoZSBpbnQKCSAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpZiBudW1CaXRzIGlzbid0IGluIFsxLDMyXSBvciBtb3JlIHRoYW4gaXMgYXZhaWxhYmxlCgkgICAgICovCgkgICAgQml0U291cmNlLnByb3RvdHlwZS5yZWFkQml0cyA9IGZ1bmN0aW9uIChudW1CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPCAxIHx8IG51bUJpdHMgPiAzMiB8fCBudW1CaXRzID4gdGhpcy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoJycgKyBudW1CaXRzKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVzdWx0ID0gMDsKCSAgICAgICAgdmFyIGJpdE9mZnNldCA9IHRoaXMuYml0T2Zmc2V0OwoJICAgICAgICB2YXIgYnl0ZU9mZnNldCA9IHRoaXMuYnl0ZU9mZnNldDsKCSAgICAgICAgdmFyIGJ5dGVzID0gdGhpcy5ieXRlczsKCSAgICAgICAgLy8gRmlyc3QsIHJlYWQgcmVtYWluZGVyIGZyb20gY3VycmVudCBieXRlCgkgICAgICAgIGlmIChiaXRPZmZzZXQgPiAwKSB7CgkgICAgICAgICAgICB2YXIgYml0c0xlZnQgPSA4IC0gYml0T2Zmc2V0OwoJICAgICAgICAgICAgdmFyIHRvUmVhZCA9IG51bUJpdHMgPCBiaXRzTGVmdCA/IG51bUJpdHMgOiBiaXRzTGVmdDsKCSAgICAgICAgICAgIHZhciBiaXRzVG9Ob3RSZWFkID0gYml0c0xlZnQgLSB0b1JlYWQ7CgkgICAgICAgICAgICB2YXIgbWFzayA9ICgweEZGID4+ICg4IC0gdG9SZWFkKSkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgIHJlc3VsdCA9IChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQ7CgkgICAgICAgICAgICBudW1CaXRzIC09IHRvUmVhZDsKCSAgICAgICAgICAgIGJpdE9mZnNldCArPSB0b1JlYWQ7CgkgICAgICAgICAgICBpZiAoYml0T2Zmc2V0ID09PSA4KSB7CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0ID0gMDsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTmV4dCByZWFkIHdob2xlIGJ5dGVzCgkgICAgICAgIGlmIChudW1CaXRzID4gMCkgewoJICAgICAgICAgICAgd2hpbGUgKG51bUJpdHMgPj0gOCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCA9IChyZXN1bHQgPDwgOCkgfCAoYnl0ZXNbYnl0ZU9mZnNldF0gJiAweEZGKTsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICAgICAgbnVtQml0cyAtPSA4OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gRmluYWxseSByZWFkIGEgcGFydGlhbCBieXRlCgkgICAgICAgICAgICBpZiAobnVtQml0cyA+IDApIHsKCSAgICAgICAgICAgICAgICB2YXIgYml0c1RvTm90UmVhZCA9IDggLSBudW1CaXRzOwoJICAgICAgICAgICAgICAgIHZhciBtYXNrID0gKDB4RkYgPj4gYml0c1RvTm90UmVhZCkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAocmVzdWx0IDw8IG51bUJpdHMpIHwgKChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQpOwoJICAgICAgICAgICAgICAgIGJpdE9mZnNldCArPSBudW1CaXRzOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0T2Zmc2V0ID0gYml0T2Zmc2V0OwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSBieXRlT2Zmc2V0OwoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB0aGF0IGNhbiBiZSByZWFkIHN1Y2Nlc3NmdWxseQoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuYXZhaWxhYmxlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gOCAqICh0aGlzLmJ5dGVzLmxlbmd0aCAtIHRoaXMuYnl0ZU9mZnNldCkgLSB0aGlzLmJpdE9mZnNldDsKCSAgICB9OwoJICAgIHJldHVybiBCaXRTb3VyY2U7Cgl9KCkpOwoJQml0U291cmNlJDEuZGVmYXVsdCA9IEJpdFNvdXJjZTsKCgl2YXIgRGVjb2RlclJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVyUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBtYXRyaXggb2YgYml0cy4gVGhpcyB0eXBpY2FsbHkKCSAqIGFwcGxpZXMgdG8gMkQgYmFyY29kZSBmb3JtYXRzLiBGb3Igbm93IGl0IGNvbnRhaW5zIHRoZSByYXcgYnl0ZXMgb2J0YWluZWQsCgkgKiBhcyB3ZWxsIGFzIGEgU3RyaW5nIGludGVycHJldGF0aW9uIG9mIHRob3NlIGJ5dGVzLCBpZiBhcHBsaWNhYmxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlclJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocmF3Qnl0ZXM6IFVpbnQ4QXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIExpc3Q8VWludDhBcnJheT4gYnl0ZVNlZ21lbnRzLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBlY0xldmVsKSB7CgkgICAgLy8gICB0aGlzKHJhd0J5dGVzLCB0ZXh0LCBieXRlU2VnbWVudHMsIGVjTGV2ZWwsIC0xLCAtMSkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRGVjb2RlclJlc3VsdChyYXdCeXRlcywgdGV4dCwgYnl0ZVNlZ21lbnRzLCBlY0xldmVsLCBzdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXIsIHN0cnVjdHVyZWRBcHBlbmRQYXJpdHkpIHsKCSAgICAgICAgaWYgKHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9PT0gdm9pZCAwKSB7IHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9IC0xOyB9CgkgICAgICAgIGlmIChzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID09PSB2b2lkIDApIHsgc3RydWN0dXJlZEFwcGVuZFBhcml0eSA9IC0xOyB9CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDsKCSAgICAgICAgdGhpcy5ieXRlU2VnbWVudHMgPSBieXRlU2VnbWVudHM7CgkgICAgICAgIHRoaXMuZWNMZXZlbCA9IGVjTGV2ZWw7CgkgICAgICAgIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyOwoJICAgICAgICB0aGlzLnN0cnVjdHVyZWRBcHBlbmRQYXJpdHkgPSBzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCB8fCByYXdCeXRlcyA9PT0gbnVsbCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiByYXcgYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSByZXN1bHQsIG9yIHtAY29kZSBudWxsfSBpZiBub3QgYXBwbGljYWJsZQoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldE51bUJpdHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bUJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gbnVtQml0cyBvdmVycmlkZXMgdGhlIG51bWJlciBvZiBiaXRzIHRoYXQgYXJlIHZhbGlkIGluIHtAbGluayAjZ2V0UmF3Qnl0ZXMoKX0KCSAgICAgKiBAc2luY2UgMy4zLjAKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXROdW1CaXRzID0gZnVuY3Rpb24gKG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLm51bUJpdHMgPSBudW1CaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0ZXh0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSByZXN1bHQKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRUZXh0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50ZXh0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBsaXN0IG9mIGJ5dGUgc2VnbWVudHMgaW4gdGhlIHJlc3VsdCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0Qnl0ZVNlZ21lbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5ieXRlU2VnbWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG5hbWUgb2YgZXJyb3IgY29ycmVjdGlvbiBsZXZlbCB1c2VkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFQ0xldmVsID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0xldmVsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJyb3JzIGNvcnJlY3RlZCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0RXJyb3JzQ29ycmVjdGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnNDb3JyZWN0ZWQ7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcnJvcnNDb3JyZWN0ZWQgPSBmdW5jdGlvbiAoZXJyb3JzQ29ycmVjdGVkIC8qSW50ZWdlciovKSB7CgkgICAgICAgIHRoaXMuZXJyb3JzQ29ycmVjdGVkID0gZXJyb3JzQ29ycmVjdGVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJhc3VyZXMgY29ycmVjdGVkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFcmFzdXJlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJhc3VyZXM7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcmFzdXJlcyA9IGZ1bmN0aW9uIChlcmFzdXJlcyAvKkludGVnZXIqLykgewoJICAgICAgICB0aGlzLmVyYXN1cmVzID0gZXJhc3VyZXM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGFyYml0cmFyeSBhZGRpdGlvbmFsIG1ldGFkYXRhCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0T3RoZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuc2V0T3RoZXIgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdGhpcy5vdGhlciA9IG90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuaGFzU3RydWN0dXJlZEFwcGVuZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc3RydWN0dXJlZEFwcGVuZFBhcml0eSA+PSAwICYmIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID49IDA7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRTdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXI7CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlclJlc3VsdDsKCX0oKSk7CglEZWNvZGVyUmVzdWx0JDEuZGVmYXVsdCA9IERlY29kZXJSZXN1bHQ7CgoJdmFyIE1vZGUgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5Nb2RlVmFsdWVzID0gdm9pZCAwOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgTW9kZVZhbHVlczsKCShmdW5jdGlvbiAoTW9kZVZhbHVlcykgewoJICAgIE1vZGVWYWx1ZXNbTW9kZVZhbHVlc1siVEVSTUlOQVRPUiJdID0gMF0gPSAiVEVSTUlOQVRPUiI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJOVU1FUklDIl0gPSAxXSA9ICJOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkFMUEhBTlVNRVJJQyJdID0gMl0gPSAiQUxQSEFOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIlNUUlVDVFVSRURfQVBQRU5EIl0gPSAzXSA9ICJTVFJVQ1RVUkVEX0FQUEVORCI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJCWVRFIl0gPSA0XSA9ICJCWVRFIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkVDSSJdID0gNV0gPSAiRUNJIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIktBTkpJIl0gPSA2XSA9ICJLQU5KSSI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJGTkMxX0ZJUlNUX1BPU0lUSU9OIl0gPSA3XSA9ICJGTkMxX0ZJUlNUX1BPU0lUSU9OIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkZOQzFfU0VDT05EX1BPU0lUSU9OIl0gPSA4XSA9ICJGTkMxX1NFQ09ORF9QT1NJVElPTiI7CgkgICAgLyoqIFNlZSBHQlQgMTgyODQtMjAwMDsgIkhhbnppIiBpcyBhIHRyYW5zbGl0ZXJhdGlvbiBvZiB0aGlzIG1vZGUgbmFtZS4gKi8KCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkhBTlpJIl0gPSA5XSA9ICJIQU5aSSI7Cgl9KShNb2RlVmFsdWVzID0gZXhwb3J0cy5Nb2RlVmFsdWVzIHx8IChleHBvcnRzLk1vZGVWYWx1ZXMgPSB7fSkpOwoJLyoqCgkgKiA8cD5TZWUgSVNPIDE4MDA0OjIwMDYsIDYuNC4xLCBUYWJsZXMgMiBhbmQgMy4gVGhpcyBlbnVtIGVuY2Fwc3VsYXRlcyB0aGUgdmFyaW91cyBtb2RlcyBpbiB3aGljaAoJICogZGF0YSBjYW4gYmUgZW5jb2RlZCB0byBiaXRzIGluIHRoZSBRUiBjb2RlIHN0YW5kYXJkLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgTW9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBNb2RlKHZhbHVlLCBzdHJpbmdWYWx1ZSwgY2hhcmFjdGVyQ291bnRCaXRzRm9yVmVyc2lvbnMsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9ucyA9IGNoYXJhY3RlckNvdW50Qml0c0ZvclZlcnNpb25zOwoJICAgICAgICB0aGlzLmJpdHMgPSBiaXRzOwoJICAgICAgICBNb2RlLkZPUl9CSVRTLnNldChiaXRzLCB0aGlzKTsKCSAgICAgICAgTW9kZS5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgZm91ciBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSBkYXRhIG1vZGUKCSAgICAgKiBAcmV0dXJuIE1vZGUgZW5jb2RlZCBieSB0aGVzZSBiaXRzCgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYml0cyBkbyBub3QgY29ycmVzcG9uZCB0byBhIGtub3duIG1vZGUKCSAgICAgKi8KCSAgICBNb2RlLmZvckJpdHMgPSBmdW5jdGlvbiAoYml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBtb2RlID0gTW9kZS5GT1JfQklUUy5nZXQoYml0cyk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IG1vZGUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1vZGU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmVyc2lvbiB2ZXJzaW9uIGluIHF1ZXN0aW9uCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB1c2VkLCBpbiB0aGlzIFFSIENvZGUgc3ltYm9sIHtAbGluayBWZXJzaW9ufSwgdG8gZW5jb2RlIHRoZQoJICAgICAqICAgICAgICAgY291bnQgb2YgY2hhcmFjdGVycyB0aGF0IHdpbGwgZm9sbG93IGVuY29kZWQgaW4gdGhpcyBNb2RlCgkgICAgICovCgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Q2hhcmFjdGVyQ291bnRCaXRzID0gZnVuY3Rpb24gKHZlcnNpb24pIHsKCSAgICAgICAgdmFyIHZlcnNpb25OdW1iZXIgPSB2ZXJzaW9uLmdldFZlcnNpb25OdW1iZXIoKTsKCSAgICAgICAgdmFyIG9mZnNldDsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPD0gOSkgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmICh2ZXJzaW9uTnVtYmVyIDw9IDI2KSB7CgkgICAgICAgICAgICBvZmZzZXQgPSAxOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9uc1tvZmZzZXRdOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBNb2RlKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09PSBvdGhlci52YWx1ZTsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIE1vZGUuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5GT1JfVkFMVUUgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5URVJNSU5BVE9SID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5URVJNSU5BVE9SLCAnVEVSTUlOQVRPUicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDAwKTsgLy8gTm90IHJlYWxseSBhIG1vZGUuLi4KCSAgICBNb2RlLk5VTUVSSUMgPSBuZXcgTW9kZShNb2RlVmFsdWVzLk5VTUVSSUMsICdOVU1FUklDJywgSW50MzJBcnJheS5mcm9tKFsxMCwgMTIsIDE0XSksIDB4MDEpOwoJICAgIE1vZGUuQUxQSEFOVU1FUklDID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5BTFBIQU5VTUVSSUMsICdBTFBIQU5VTUVSSUMnLCBJbnQzMkFycmF5LmZyb20oWzksIDExLCAxM10pLCAweDAyKTsKCSAgICBNb2RlLlNUUlVDVFVSRURfQVBQRU5EID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5TVFJVQ1RVUkVEX0FQUEVORCwgJ1NUUlVDVFVSRURfQVBQRU5EJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDMpOyAvLyBOb3Qgc3VwcG9ydGVkCgkgICAgTW9kZS5CWVRFID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5CWVRFLCAnQllURScsIEludDMyQXJyYXkuZnJvbShbOCwgMTYsIDE2XSksIDB4MDQpOwoJICAgIE1vZGUuRUNJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5FQ0ksICdFQ0knLCBJbnQzMkFycmF5LmZyb20oWzAsIDAsIDBdKSwgMHgwNyk7IC8vIGNoYXJhY3RlciBjb3VudHMgZG9uJ3QgYXBwbHkKCSAgICBNb2RlLktBTkpJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5LQU5KSSwgJ0tBTkpJJywgSW50MzJBcnJheS5mcm9tKFs4LCAxMCwgMTJdKSwgMHgwOCk7CgkgICAgTW9kZS5GTkMxX0ZJUlNUX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX0ZJUlNUX1BPU0lUSU9OLCAnRk5DMV9GSVJTVF9QT1NJVElPTicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDA1KTsKCSAgICBNb2RlLkZOQzFfU0VDT05EX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX1NFQ09ORF9QT1NJVElPTiwgJ0ZOQzFfU0VDT05EX1BPU0lUSU9OJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDkpOwoJICAgIC8qKiBTZWUgR0JUIDE4Mjg0LTIwMDA7ICJIYW56aSIgaXMgYSB0cmFuc2xpdGVyYXRpb24gb2YgdGhpcyBtb2RlIG5hbWUuICovCgkgICAgTW9kZS5IQU5aSSA9IG5ldyBNb2RlKE1vZGVWYWx1ZXMuSEFOWkksICdIQU5aSScsIEludDMyQXJyYXkuZnJvbShbOCwgMTAsIDEyXSksIDB4MEQpOwoJICAgIHJldHVybiBNb2RlOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IE1vZGU7CgoJfShNb2RlKSk7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlLmRlY29kZXIgeyovCgl2YXIgQml0U291cmNlXzEgPSBCaXRTb3VyY2UkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSA9IENoYXJhY3RlclNldEVDSTsKCXZhciBEZWNvZGVyUmVzdWx0XzEgPSBEZWNvZGVyUmVzdWx0JDE7Cgl2YXIgU3RyaW5nVXRpbHNfMSA9IFN0cmluZ1V0aWxzJDE7Cgl2YXIgRm9ybWF0RXhjZXB0aW9uXzEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBTdHJpbmdCdWlsZGVyXzEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgU3RyaW5nRW5jb2RpbmdfMSA9IFN0cmluZ0VuY29kaW5nJDE7Cgl2YXIgTW9kZV8xID0gTW9kZTsKCS8qaW1wb3J0IGphdmEuaW8uVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbjsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlFSIENvZGVzIGNhbiBlbmNvZGUgdGV4dCBhcyBiaXRzIGluIG9uZSBvZiBzZXZlcmFsIG1vZGVzLCBhbmQgY2FuIHVzZSBtdWx0aXBsZSBtb2RlcwoJICogaW4gb25lIFFSIENvZGUuIFRoaXMgY2xhc3MgZGVjb2RlcyB0aGUgYml0cyBiYWNrIGludG8gdGV4dC48L3A+CgkgKgoJICogPHA+U2VlIElTTyAxODAwNDoyMDA2LCA2LjQuMyAtIDYuNC43PC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERlY29kZWRCaXRTdHJlYW1QYXJzZXIoKSB7CgkgICAgfQoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlID0gZnVuY3Rpb24gKGJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cykgewoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRTb3VyY2VfMS5kZWZhdWx0KGJ5dGVzKTsKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBTdHJpbmdCdWlsZGVyXzEuZGVmYXVsdCgpOwoJICAgICAgICB2YXIgYnl0ZVNlZ21lbnRzID0gbmV3IEFycmF5KCk7IC8vIDEKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IEkgZG8gbm90IHVzZSBjb25zdHJ1Y3RvciB3aXRoIHNpemUgMSBhcyBpbiBvcmlnaW5hbCBKYXZhIG1lYW5zIGNhcGFjaXR5IGFuZCB0aGUgYXJyYXkgbGVuZ3RoIGlzIGNoZWNrZWQgYmVsb3cKCSAgICAgICAgdmFyIHN5bWJvbFNlcXVlbmNlID0gLTE7CgkgICAgICAgIHZhciBwYXJpdHlEYXRhID0gLTE7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICB2YXIgY3VycmVudENoYXJhY3RlclNldEVDSSA9IG51bGw7CgkgICAgICAgICAgICB2YXIgZmMxSW5FZmZlY3QgPSBmYWxzZTsKCSAgICAgICAgICAgIHZhciBtb2RlID0gdm9pZCAwOwoJICAgICAgICAgICAgZG8gewoJICAgICAgICAgICAgICAgIC8vIFdoaWxlIHN0aWxsIGFub3RoZXIgc2VnbWVudCB0byByZWFkLi4uCgkgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA0KSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE9LLCBhc3N1bWUgd2UncmUgZG9uZS4gUmVhbGx5LCBhIFRFUk1JTkFUT1IgbW9kZSBzaG91bGQgaGF2ZSBiZWVuIHJlY29yZGVkIGhlcmUKCSAgICAgICAgICAgICAgICAgICAgbW9kZSA9IE1vZGVfMS5kZWZhdWx0LlRFUk1JTkFUT1I7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZUJpdHMgPSBiaXRzLnJlYWRCaXRzKDQpOwoJICAgICAgICAgICAgICAgICAgICBtb2RlID0gTW9kZV8xLmRlZmF1bHQuZm9yQml0cyhtb2RlQml0cyk7IC8vIG1vZGUgaXMgZW5jb2RlZCBieSA0IGJpdHMKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgc3dpdGNoIChtb2RlKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUjoKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkZOQzFfRklSU1RfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuRk5DMV9TRUNPTkRfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBkbyBsaXR0bGUgd2l0aCBGTkMxIGV4Y2VwdCBhbHRlciB0aGUgcGFyc2VkIHJlc3VsdCBhIGJpdCBhY2NvcmRpbmcgdG8gdGhlIHNwZWMKCSAgICAgICAgICAgICAgICAgICAgICAgIGZjMUluRWZmZWN0ID0gdHJ1ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LlNUUlVDVFVSRURfQVBQRU5EOgoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCAxNikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXIgYW5kIHBhcml0eSBpcyBhZGRlZCBsYXRlciB0byB0aGUgcmVzdWx0IG1ldGFkYXRhCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWFkIG5leHQgOCBiaXRzIChzeW1ib2wgc2VxdWVuY2UgIykgYW5kIDggYml0cyAoZGF0YTogcGFyaXR5KSwgdGhlbiBjb250aW51ZQoJICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sU2VxdWVuY2UgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgcGFyaXR5RGF0YSA9IGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5FQ0k6CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3VudCBkb2Vzbid0IGFwcGx5IHRvIEVDSQoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5wYXJzZUVDSVZhbHVlKGJpdHMpOwoJICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENoYXJhY3RlclNldEVDSSA9IENoYXJhY3RlclNldEVDSV8xLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlWYWx1ZSh2YWx1ZSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5IQU5aSToKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0IGhhbmRsZSBIYW56aSBtb2RlIHdoaWNoIGRvZXMgbm90IHN0YXJ0IHdpdGggY2hhcmFjdGVyIGNvdW50CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGluZXNlIG1vZGUgY29udGFpbnMgYSBzdWIgc2V0IGluZGljYXRvciByaWdodCBhZnRlciBtb2RlIGluZGljYXRvcgoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNldCA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRIYW56aSA9IGJpdHMucmVhZEJpdHMobW9kZS5nZXRDaGFyYWN0ZXJDb3VudEJpdHModmVyc2lvbikpOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNldCA9PT0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVIYW56aVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudEhhbnppKTsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gIk5vcm1hbCIgUVIgY29kZSBtb2RlczoKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhvdyBtYW55IGNoYXJhY3RlcnMgd2lsbCBmb2xsb3csIGVuY29kZWQgaW4gdGhpcyBtb2RlPwoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gYml0cy5yZWFkQml0cyhtb2RlLmdldENoYXJhY3RlckNvdW50Qml0cyh2ZXJzaW9uKSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1vZGUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0Lk5VTUVSSUM6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlTnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuQUxQSEFOVU1FUklDOgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgZmMxSW5FZmZlY3QpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkJZVEU6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgY3VycmVudENoYXJhY3RlclNldEVDSSwgYnl0ZVNlZ21lbnRzLCBoaW50cyk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuS0FOSkk6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlS2FuamlTZWdtZW50KGJpdHMsIHJlc3VsdCwgY291bnQpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSB3aGlsZSAobW9kZSAhPT0gTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUik7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlhZSAvKjogSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIGZyb20gcmVhZEJpdHMoKSBjYWxscwoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbmV3IERlY29kZXJSZXN1bHRfMS5kZWZhdWx0KGJ5dGVzLCByZXN1bHQudG9TdHJpbmcoKSwgYnl0ZVNlZ21lbnRzLmxlbmd0aCA9PT0gMCA/IG51bGwgOiBieXRlU2VnbWVudHMsIGVjTGV2ZWwgPT09IG51bGwgPyBudWxsIDogZWNMZXZlbC50b1N0cmluZygpLCBzeW1ib2xTZXF1ZW5jZSwgcGFyaXR5RGF0YSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZWUgc3BlY2lmaWNhdGlvbiBHQlQgMTgyODQtMjAwMAoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlSGFuemlTZWdtZW50ID0gZnVuY3Rpb24gKGJpdHMsIHJlc3VsdCwgY291bnQgLyppbnQqLykgewoJICAgICAgICAvLyBEb24ndCBjcmFzaCB0cnlpbmcgdG8gcmVhZCBtb3JlIGJpdHMgdGhhbiB3ZSBoYXZlIGF2YWlsYWJsZS4KCSAgICAgICAgaWYgKGNvdW50ICogMTMgPiBiaXRzLmF2YWlsYWJsZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhY2ggY2hhcmFjdGVyIHdpbGwgcmVxdWlyZSAyIGJ5dGVzLiBSZWFkIHRoZSBjaGFyYWN0ZXJzIGFzIDItYnl0ZSBwYWlycwoJICAgICAgICAvLyBhbmQgZGVjb2RlIGFzIEdCMjMxMiBhZnRlcndhcmRzCgkgICAgICAgIHZhciBidWZmZXIgPSBuZXcgVWludDhBcnJheSgyICogY291bnQpOwoJICAgICAgICB2YXIgb2Zmc2V0ID0gMDsKCSAgICAgICAgd2hpbGUgKGNvdW50ID4gMCkgewoJICAgICAgICAgICAgLy8gRWFjaCAxMyBiaXRzIGVuY29kZXMgYSAyLWJ5dGUgY2hhcmFjdGVyCgkgICAgICAgICAgICB2YXIgdHdvQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDEzKTsKCSAgICAgICAgICAgIHZhciBhc3NlbWJsZWRUd29CeXRlcyA9ICgoKHR3b0J5dGVzIC8gMHgwNjApIDw8IDgpICYgMHhGRkZGRkZGRikgfCAodHdvQnl0ZXMgJSAweDA2MCk7CgkgICAgICAgICAgICBpZiAoYXNzZW1ibGVkVHdvQnl0ZXMgPCAweDAwM0JGKSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QTFBMSB0byAweEFBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBMUExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QjBBMSB0byAweEZBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBNkExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYnVmZmVyW29mZnNldF0gPSAvKihieXRlKSAqLyAoKGFzc2VtYmxlZFR3b0J5dGVzID4+IDgpICYgMHhGRik7CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMV0gPSAvKihieXRlKSAqLyAoYXNzZW1ibGVkVHdvQnl0ZXMgJiAweEZGKTsKCSAgICAgICAgICAgIG9mZnNldCArPSAyOwoJICAgICAgICAgICAgY291bnQtLTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKGJ1ZmZlciwgU3RyaW5nVXRpbHNfMS5kZWZhdWx0LkdCMjMxMikpOwoJICAgICAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IFRPRE86IGltcGxlbWVudCBHQjIzMTIgZGVjb2RlLiBTdHJpbmdWaWV3IGZyb20gTUROIGNvdWxkIGJlIGEgc3RhcnRpbmcgcG9pbnQKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVLYW5qaVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoY291bnQgKiAxMyA+IGJpdHMuYXZhaWxhYmxlKCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRWFjaCBjaGFyYWN0ZXIgd2lsbCByZXF1aXJlIDIgYnl0ZXMuIFJlYWQgdGhlIGNoYXJhY3RlcnMgYXMgMi1ieXRlIHBhaXJzCgkgICAgICAgIC8vIGFuZCBkZWNvZGUgYXMgU2hpZnRfSklTIGFmdGVyd2FyZHMKCSAgICAgICAgdmFyIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDIgKiBjb3VudCk7CgkgICAgICAgIHZhciBvZmZzZXQgPSAwOwoJICAgICAgICB3aGlsZSAoY291bnQgPiAwKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEzIGJpdHMgZW5jb2RlcyBhIDItYnl0ZSBjaGFyYWN0ZXIKCSAgICAgICAgICAgIHZhciB0d29CeXRlcyA9IGJpdHMucmVhZEJpdHMoMTMpOwoJICAgICAgICAgICAgdmFyIGFzc2VtYmxlZFR3b0J5dGVzID0gKCgodHdvQnl0ZXMgLyAweDBDMCkgPDwgOCkgJiAweEZGRkZGRkZGKSB8ICh0d29CeXRlcyAlIDB4MEMwKTsKCSAgICAgICAgICAgIGlmIChhc3NlbWJsZWRUd29CeXRlcyA8IDB4MDFGMDApIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHg4MTQwIHRvIDB4OUZGQyByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MDgxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHhFMDQwIHRvIDB4RUJCRiByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MEMxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0XSA9IC8qKGJ5dGUpICovIChhc3NlbWJsZWRUd29CeXRlcyA+PiA4KTsKCSAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQgKyAxXSA9IC8qKGJ5dGUpICovIGFzc2VtYmxlZFR3b0J5dGVzOwoJICAgICAgICAgICAgb2Zmc2V0ICs9IDI7CgkgICAgICAgICAgICBjb3VudC0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNoaWZ0X0pJUyBtYXkgbm90IGJlIHN1cHBvcnRlZCBpbiBzb21lIGVudmlyb25tZW50czoKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nRW5jb2RpbmdfMS5kZWZhdWx0LmRlY29kZShidWZmZXIsIFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5TSElGVF9KSVMpKTsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBUT0RPOiBpbXBsZW1lbnQgU0hJRlRfSklTIGRlY29kZS4gU3RyaW5nVmlldyBmcm9tIE1ETiBjb3VsZCBiZSBhIHN0YXJ0aW5nIHBvaW50CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IFVuc3VwcG9ydGVkRW5jb2RpbmdFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoaWdub3JlZCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLCBieXRlU2VnbWVudHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoOCAqIGNvdW50ID4gYml0cy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVhZEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoY291bnQpOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKCSAgICAgICAgICAgIHJlYWRCeXRlc1tpXSA9IC8qKGJ5dGUpICovIGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVuY29kaW5nOwoJICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgLy8gVGhlIHNwZWMgaXNuJ3QgY2xlYXIgb24gdGhpcyBtb2RlOyBzZWUKCSAgICAgICAgICAgIC8vIHNlY3Rpb24gNi40LjU6IHQgZG9lcyBub3Qgc2F5IHdoaWNoIGVuY29kaW5nIHRvIGFzc3VtaW5nCgkgICAgICAgICAgICAvLyB1cG9uIGRlY29kaW5nLiBJIGhhdmUgc2VlbiBJU08tODg1OS0xIHVzZWQgYXMgd2VsbCBhcwoJICAgICAgICAgICAgLy8gU2hpZnRfSklTIC0tIHdpdGhvdXQgYW55dGhpbmcgbGlrZSBhbiBFQ0kgZGVzaWduYXRvciB0bwoJICAgICAgICAgICAgLy8gZ2l2ZSBhIGhpbnQuCgkgICAgICAgICAgICBlbmNvZGluZyA9IFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5ndWVzc0VuY29kaW5nKHJlYWRCeXRlcywgaGludHMpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgZW5jb2RpbmcgPSBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLmdldE5hbWUoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKHJlYWRCeXRlcywgZW5jb2RpbmcpKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgICAgICBieXRlU2VnbWVudHMucHVzaChyZWFkQnl0ZXMpOwoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPj0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5BTFBIQU5VTUVSSUNfQ0hBUlMubGVuZ3RoKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLkFMUEhBTlVNRVJJQ19DSEFSU1t2YWx1ZV07CgkgICAgfTsKCSAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBmYzFJbkVmZmVjdCkgewoJICAgICAgICAvLyBSZWFkIHR3byBjaGFyYWN0ZXJzIGF0IGEgdGltZQoJICAgICAgICB2YXIgc3RhcnQgPSByZXN1bHQubGVuZ3RoKCk7CgkgICAgICAgIHdoaWxlIChjb3VudCA+IDEpIHsKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTEpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIG5leHRUd29DaGFyc0JpdHMgPSBiaXRzLnJlYWRCaXRzKDExKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcihuZXh0VHdvQ2hhcnNCaXRzIC8gNDUpKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKG5leHRUd29DaGFyc0JpdHMgJSA0NSkpOwoJICAgICAgICAgICAgY291bnQgLT0gMjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY291bnQgPT09IDEpIHsKCSAgICAgICAgICAgIC8vIHNwZWNpYWwgY2FzZTogb25lIGNoYXJhY3RlciBsZWZ0CgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDYpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcihiaXRzLnJlYWRCaXRzKDYpKSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gU2VlIHNlY3Rpb24gNi40LjguMSwgNi40LjguMgoJICAgICAgICBpZiAoZmMxSW5FZmZlY3QpIHsKCSAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gbWFzc2FnZSB0aGUgcmVzdWx0IGEgYml0IGlmIGluIGFuIEZOQzEgbW9kZToKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IHJlc3VsdC5sZW5ndGgoKTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jaGFyQXQoaSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IHJlc3VsdC5sZW5ndGgoKSAtIDEgJiYgcmVzdWx0LmNoYXJBdChpICsgMSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gJSUgaXMgcmVuZGVyZWQgYXMgJQoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRlbGV0ZUNoYXJBdChpICsgMSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbiBhbHBoYSBtb2RlLCAlIHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gRk5DMSBzZXBhcmF0b3IgMHgxRAoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNldENoYXJBdChpLCBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MUQpKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVOdW1lcmljU2VnbWVudCA9IGZ1bmN0aW9uIChiaXRzLCByZXN1bHQsIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgLy8gUmVhZCB0aHJlZSBkaWdpdHMgYXQgYSB0aW1lCgkgICAgICAgIHdoaWxlIChjb3VudCA+PSAzKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEwIGJpdHMgZW5jb2RlcyB0aHJlZSBkaWdpdHMKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTApIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIHRocmVlRGlnaXRzQml0cyA9IGJpdHMucmVhZEJpdHMoMTApOwoJICAgICAgICAgICAgaWYgKHRocmVlRGlnaXRzQml0cyA+PSAxMDAwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcih0aHJlZURpZ2l0c0JpdHMgLyAxMDApKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodGhyZWVEaWdpdHNCaXRzIC8gMTApICUgMTApKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIodGhyZWVEaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgICAgIGNvdW50IC09IDM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvdW50ID09PSAyKSB7CgkgICAgICAgICAgICAvLyBUd28gZGlnaXRzIGxlZnQgb3ZlciB0byByZWFkLCBlbmNvZGVkIGluIDcgYml0cwoJICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA3KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciB0d29EaWdpdHNCaXRzID0gYml0cy5yZWFkQml0cyg3KTsKCSAgICAgICAgICAgIGlmICh0d29EaWdpdHNCaXRzID49IDEwMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodHdvRGlnaXRzQml0cyAvIDEwKSkpOwoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcih0d29EaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChjb3VudCA9PT0gMSkgewoJICAgICAgICAgICAgLy8gT25lIGRpZ2l0IGxlZnQgb3ZlciB0byByZWFkCgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIGRpZ2l0Qml0cyA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICBpZiAoZGlnaXRCaXRzID49IDEwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoZGlnaXRCaXRzKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIucGFyc2VFQ0lWYWx1ZSA9IGZ1bmN0aW9uIChiaXRzKSB7CgkgICAgICAgIHZhciBmaXJzdEJ5dGUgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4ODApID09PSAwKSB7CgkgICAgICAgICAgICAvLyBqdXN0IG9uZSBieXRlCgkgICAgICAgICAgICByZXR1cm4gZmlyc3RCeXRlICYgMHg3RjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4QzApID09PSAweDgwKSB7CgkgICAgICAgICAgICAvLyB0d28gYnl0ZXMKCSAgICAgICAgICAgIHZhciBzZWNvbmRCeXRlID0gYml0cy5yZWFkQml0cyg4KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDNGKSA8PCA4KSAmIDB4RkZGRkZGRkYpIHwgc2Vjb25kQnl0ZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4RTApID09PSAweEMwKSB7CgkgICAgICAgICAgICAvLyB0aHJlZSBieXRlcwoJICAgICAgICAgICAgdmFyIHNlY29uZFRoaXJkQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDE2KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDFGKSA8PCAxNikgJiAweEZGRkZGRkZGKSB8IHNlY29uZFRoaXJkQnl0ZXM7CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFNlZSBJU08gMTgwMDQ6MjAwNiwgNi40LjQgVGFibGUgNQoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuQUxQSEFOVU1FUklDX0NIQVJTID0gJzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWiAkJSorLS4vOic7CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUID0gMTsKCSAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcjsKCX0oKSk7CglEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEuZGVmYXVsdCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXI7CgoJdmFyIFFSQ29kZURlY29kZXJNZXRhRGF0YSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDEzIFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShRUkNvZGVEZWNvZGVyTWV0YURhdGEkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiBNZXRhLWRhdGEgY29udGFpbmVyIGZvciBRUiBDb2RlIGRlY29kaW5nLiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBtYXkgYmUgdXNlZCB0byBjb252ZXkgaW5mb3JtYXRpb24gYmFjayB0byB0aGUKCSAqIGRlY29kaW5nIGNhbGxlci4gQ2FsbGVycyBhcmUgZXhwZWN0ZWQgdG8gcHJvY2VzcyB0aGlzLgoJICoKCSAqIEBzZWUgY29tLmdvb2dsZS56eGluZy5jb21tb24uRGVjb2RlclJlc3VsdCNnZXRPdGhlcigpCgkgKi8KCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUVJDb2RlRGVjb2Rlck1ldGFEYXRhKG1pcnJvcmVkKSB7CgkgICAgICAgIHRoaXMubWlycm9yZWQgPSBtaXJyb3JlZDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmIHRoZSBRUiBDb2RlIHdhcyBtaXJyb3JlZC4KCSAgICAgKi8KCSAgICBRUkNvZGVEZWNvZGVyTWV0YURhdGEucHJvdG90eXBlLmlzTWlycm9yZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm1pcnJvcmVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbHkgdGhlIHJlc3VsdCBwb2ludHMnIG9yZGVyIGNvcnJlY3Rpb24gZHVlIHRvIG1pcnJvcmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBwb2ludHMgQXJyYXkgb2YgcG9pbnRzIHRvIGFwcGx5IG1pcnJvciBjb3JyZWN0aW9uIHRvLgoJICAgICAqLwoJICAgIFFSQ29kZURlY29kZXJNZXRhRGF0YS5wcm90b3R5cGUuYXBwbHlNaXJyb3JlZENvcnJlY3Rpb24gPSBmdW5jdGlvbiAocG9pbnRzKSB7CgkgICAgICAgIGlmICghdGhpcy5taXJyb3JlZCB8fCBwb2ludHMgPT09IG51bGwgfHwgcG9pbnRzLmxlbmd0aCA8IDMpIHsKCSAgICAgICAgICAgIHJldHVybjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IHBvaW50c1swXTsKCSAgICAgICAgcG9pbnRzWzBdID0gcG9pbnRzWzJdOwoJICAgICAgICBwb2ludHNbMl0gPSBib3R0b21MZWZ0OwoJICAgICAgICAvLyBObyBuZWVkIHRvICdmaXgnIHRvcC1sZWZ0IGFuZCBhbGlnbm1lbnQgcGF0dGVybi4KCSAgICB9OwoJICAgIHJldHVybiBRUkNvZGVEZWNvZGVyTWV0YURhdGE7Cgl9KCkpOwoJUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDEuZGVmYXVsdCA9IFFSQ29kZURlY29kZXJNZXRhRGF0YTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVjb2RlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZWNvZGVyIHsqLwoJdmFyIENoZWNrc3VtRXhjZXB0aW9uXzEgPSBDaGVja3N1bUV4Y2VwdGlvbiQxOwoJdmFyIEJpdE1hdHJpeF8xJDIgPSBCaXRNYXRyaXgkMTsKCXZhciBHZW5lcmljR0ZfMSA9IEdlbmVyaWNHRiQxOwoJdmFyIFJlZWRTb2xvbW9uRGVjb2Rlcl8xID0gUmVlZFNvbG9tb25EZWNvZGVyJDE7Cgl2YXIgQml0TWF0cml4UGFyc2VyXzEgPSBCaXRNYXRyaXhQYXJzZXIkMTsKCXZhciBEYXRhQmxvY2tfMSA9IERhdGFCbG9jayQxOwoJdmFyIERlY29kZWRCaXRTdHJlYW1QYXJzZXJfMSA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxID0gUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoZSBtYWluIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgUVIgQ29kZSBkZWNvZGluZyAtLSBhcyBvcHBvc2VkIHRvIGxvY2F0aW5nIGFuZCBleHRyYWN0aW5nCgkgKiB0aGUgUVIgQ29kZSBmcm9tIGFuIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEZWNvZGVyKCkgewoJICAgICAgICB0aGlzLnJzRGVjb2RlciA9IG5ldyBSZWVkU29sb21vbkRlY29kZXJfMS5kZWZhdWx0KEdlbmVyaWNHRl8xLmRlZmF1bHQuUVJfQ09ERV9GSUVMRF8yNTYpOwoJICAgIH0KCSAgICAvLyBwdWJsaWMgZGVjb2RlKGltYWdlOiBib29sZWFuW11bXSk6IERlY29kZXJSZXN1bHQgLyp0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkNvbnZlbmllbmNlIG1ldGhvZCB0aGF0IGNhbiBkZWNvZGUgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEgMkQgYXJyYXkgb2YgYm9vbGVhbnMuCgkgICAgICogInRydWUiIGlzIHRha2VuIHRvIG1lYW4gYSBibGFjayBtb2R1bGUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGJvb2xlYW5zIHJlcHJlc2VudGluZyB3aGl0ZS9ibGFjayBRUiBDb2RlIG1vZHVsZXMKCSAgICAgKiBAcGFyYW0gaGludHMgZGVjb2RpbmcgaGludHMgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBpbmZsdWVuY2UgZGVjb2RpbmcKCSAgICAgKiBAcmV0dXJuIHRleHQgYW5kIGJ5dGVzIGVuY29kZWQgd2l0aGluIHRoZSBRUiBDb2RlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgdGhlIFFSIENvZGUgY2Fubm90IGJlIGRlY29kZWQKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCb29sZWFuQXJyYXkgPSBmdW5jdGlvbiAoaW1hZ2UsIGhpbnRzKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeChCaXRNYXRyaXhfMSQyLmRlZmF1bHQucGFyc2VGcm9tQm9vbGVhbkFycmF5KGltYWdlKSwgaGludHMpOwoJICAgIH07CgkgICAgLy8gcHVibGljIGRlY29kZUJpdE1hdHJpeChiaXRzOiBCaXRNYXRyaXgpOiBEZWNvZGVyUmVzdWx0IC8qdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uLCBGb3JtYXRFeGNlcHRpb24qLyB7CgkgICAgLy8gICByZXR1cm4gZGVjb2RlKGJpdHMsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkRlY29kZXMgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0uIEEgMSBvciAidHJ1ZSIgaXMgdGFrZW4gdG8gbWVhbiBhIGJsYWNrIG1vZHVsZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0cyBib29sZWFucyByZXByZXNlbnRpbmcgd2hpdGUvYmxhY2sgUVIgQ29kZSBtb2R1bGVzCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kaW5nIGhpbnRzIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gaW5mbHVlbmNlIGRlY29kaW5nCgkgICAgICogQHJldHVybiB0ZXh0IGFuZCBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBRUiBDb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIENvbnN0cnVjdCBhIHBhcnNlciBhbmQgcmVhZCB2ZXJzaW9uLCBlcnJvci1jb3JyZWN0aW9uIGxldmVsCgkgICAgICAgIHZhciBwYXJzZXIgPSBuZXcgQml0TWF0cml4UGFyc2VyXzEuZGVmYXVsdChiaXRzKTsKCSAgICAgICAgdmFyIGV4ID0gbnVsbDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKjogRm9ybWF0RXhjZXB0aW9uLCBDaGVja3N1bUV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICBleCA9IGU7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIC8vIFJldmVydCB0aGUgYml0IG1hdHJpeAoJICAgICAgICAgICAgcGFyc2VyLnJlbWFzaygpOwoJICAgICAgICAgICAgLy8gV2lsbCBiZSBhdHRlbXB0aW5nIGEgbWlycm9yZWQgcmVhZGluZyBvZiB0aGUgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm8uCgkgICAgICAgICAgICBwYXJzZXIuc2V0TWlycm9yKHRydWUpOwoJICAgICAgICAgICAgLy8gUHJlZW1wdGl2ZWx5IHJlYWQgdGhlIHZlcnNpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgICAgIC8vIFByZWVtcHRpdmVseSByZWFkIHRoZSBmb3JtYXQgaW5mb3JtYXRpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCk7CgkgICAgICAgICAgICAvKgoJICAgICAgICAgICAgICogU2luY2Ugd2UncmUgaGVyZSwgdGhpcyBtZWFucyB3ZSBoYXZlIHN1Y2Nlc3NmdWxseSBkZXRlY3RlZCBzb21lIGtpbmQKCSAgICAgICAgICAgICAqIG9mIHZlcnNpb24gYW5kIGZvcm1hdCBpbmZvcm1hdGlvbiB3aGVuIG1pcnJvcmVkLiBUaGlzIGlzIGEgZ29vZCBzaWduLAoJICAgICAgICAgICAgICogdGhhdCB0aGUgUVIgY29kZSBtYXkgYmUgbWlycm9yZWQsIGFuZCB3ZSBzaG91bGQgdHJ5IG9uY2UgbW9yZSB3aXRoIGEKCSAgICAgICAgICAgICAqIG1pcnJvcmVkIGNvbnRlbnQuCgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIFByZXBhcmUgZm9yIGEgbWlycm9yZWQgcmVhZGluZy4KCSAgICAgICAgICAgIHBhcnNlci5taXJyb3IoKTsKCSAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgICAgIC8vIFN1Y2Nlc3MhIE5vdGlmeSB0aGUgY2FsbGVyIHRoYXQgdGhlIGNvZGUgd2FzIG1pcnJvcmVkLgoJICAgICAgICAgICAgcmVzdWx0LnNldE90aGVyKG5ldyBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxLmRlZmF1bHQodHJ1ZSkpOwoJICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKkZvcm1hdEV4Y2VwdGlvbiB8IENoZWNrc3VtRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIFRocm93IHRoZSBleGNlcHRpb24gZnJvbSB0aGUgb3JpZ2luYWwgcmVhZGluZwoJICAgICAgICAgICAgaWYgKGV4ICE9PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgZXg7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0aHJvdyBlOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCaXRNYXRyaXhQYXJzZXIgPSBmdW5jdGlvbiAocGFyc2VyLCBoaW50cykgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgdmFyIHZlcnNpb24gPSBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCkuZ2V0RXJyb3JDb3JyZWN0aW9uTGV2ZWwoKTsKCSAgICAgICAgLy8gUmVhZCBjb2Rld29yZHMKCSAgICAgICAgdmFyIGNvZGV3b3JkcyA9IHBhcnNlci5yZWFkQ29kZXdvcmRzKCk7CgkgICAgICAgIC8vIFNlcGFyYXRlIGludG8gZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIGRhdGFCbG9ja3MgPSBEYXRhQmxvY2tfMS5kZWZhdWx0LmdldERhdGFCbG9ja3MoY29kZXdvcmRzLCB2ZXJzaW9uLCBlY0xldmVsKTsKCSAgICAgICAgLy8gQ291bnQgdG90YWwgbnVtYmVyIG9mIGRhdGEgYnl0ZXMKCSAgICAgICAgdmFyIHRvdGFsQnl0ZXMgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZGF0YUJsb2Nrc18xID0gX192YWx1ZXMkMihkYXRhQmxvY2tzKSwgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpOyAhZGF0YUJsb2Nrc18xXzEuZG9uZTsgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRhdGFCbG9jayA9IGRhdGFCbG9ja3NfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXMgKz0gZGF0YUJsb2NrLmdldE51bURhdGFDb2Rld29yZHMoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMV8xICYmICFkYXRhQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGRhdGFCbG9ja3NfMS5yZXR1cm4pKSBfYS5jYWxsKGRhdGFCbG9ja3NfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkodG90YWxCeXRlcyk7CgkgICAgICAgIHZhciByZXN1bHRPZmZzZXQgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgLy8gRXJyb3ItY29ycmVjdCBhbmQgY29weSBkYXRhIGJsb2NrcyB0b2dldGhlciBpbnRvIGEgc3RyZWFtIG9mIGJ5dGVzCgkgICAgICAgICAgICBmb3IgKHZhciBkYXRhQmxvY2tzXzIgPSBfX3ZhbHVlcyQyKGRhdGFCbG9ja3MpLCBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCk7ICFkYXRhQmxvY2tzXzJfMS5kb25lOyBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZGF0YUJsb2NrID0gZGF0YUJsb2Nrc18yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdmFyIGNvZGV3b3JkQnl0ZXMgPSBkYXRhQmxvY2suZ2V0Q29kZXdvcmRzKCk7CgkgICAgICAgICAgICAgICAgdmFyIG51bURhdGFDb2Rld29yZHMgPSBkYXRhQmxvY2suZ2V0TnVtRGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgIHRoaXMuY29ycmVjdEVycm9ycyhjb2Rld29yZEJ5dGVzLCBudW1EYXRhQ29kZXdvcmRzKTsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICByZXN1bHRCeXRlc1tyZXN1bHRPZmZzZXQrK10gPSBjb2Rld29yZEJ5dGVzW2ldOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMl8xICYmICFkYXRhQmxvY2tzXzJfMS5kb25lICYmIChfYiA9IGRhdGFCbG9ja3NfMi5yZXR1cm4pKSBfYi5jYWxsKGRhdGFCbG9ja3NfMik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRGVjb2RlIHRoZSBjb250ZW50cyBvZiB0aGF0IHN0cmVhbSBvZiBieXRlcwoJICAgICAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcl8xLmRlZmF1bHQuZGVjb2RlKHJlc3VsdEJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5HaXZlbiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyByZWNlaXZlZCwgcG9zc2libHkgY29ycnVwdGVkIGJ5IGVycm9ycywgYXR0ZW1wdHMgdG8KCSAgICAgKiBjb3JyZWN0IHRoZSBlcnJvcnMgaW4tcGxhY2UgdXNpbmcgUmVlZC1Tb2xvbW9uIGVycm9yIGNvcnJlY3Rpb24uPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGNvZGV3b3JkQnl0ZXMgZGF0YSBhbmQgZXJyb3IgY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgKiBAcGFyYW0gbnVtRGF0YUNvZGV3b3JkcyBudW1iZXIgb2YgY29kZXdvcmRzIHRoYXQgYXJlIGRhdGEgYnl0ZXMKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5jb3JyZWN0RXJyb3JzID0gZnVuY3Rpb24gKGNvZGV3b3JkQnl0ZXMsIG51bURhdGFDb2Rld29yZHMgLyppbnQqLykgewoJICAgICAgICAvLyBjb25zdCBudW1Db2Rld29yZHMgPSBjb2Rld29yZEJ5dGVzLmxlbmd0aDsKCSAgICAgICAgLy8gRmlyc3QgcmVhZCBpbnRvIGFuIGFycmF5IG9mIGludHMKCSAgICAgICAgdmFyIGNvZGV3b3Jkc0ludHMgPSBuZXcgSW50MzJBcnJheShjb2Rld29yZEJ5dGVzKTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG5vdCByZWFseSBuZWNlc3NhcnkgdG8gdHJhbnNmb3JtIHRvIGludHM/IGNvdWxkIHJlZGVzaWduIGV2ZXJ5dGhpbmcgdG8gd29yayB3aXRoIHVuc2lnbmVkIGJ5dGVzPwoJICAgICAgICAvLyBjb25zdCBjb2Rld29yZHNJbnRzID0gbmV3IEludDMyQXJyYXkobnVtQ29kZXdvcmRzKQoJICAgICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNvZGV3b3JkczsgaSsrKSB7CgkgICAgICAgIC8vICAgY29kZXdvcmRzSW50c1tpXSA9IGNvZGV3b3JkQnl0ZXNbaV0gJiAweEZGCgkgICAgICAgIC8vIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHRoaXMucnNEZWNvZGVyLmRlY29kZShjb2Rld29yZHNJbnRzLCBjb2Rld29yZEJ5dGVzLmxlbmd0aCAtIG51bURhdGFDb2Rld29yZHMpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChpZ25vcmVkIC8qOiBSZWVkU29sb21vbkV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQ2hlY2tzdW1FeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29weSBiYWNrIGludG8gYXJyYXkgb2YgYnl0ZXMgLS0gb25seSBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoZSBieXRlcyB0aGF0IHdlcmUgZGF0YQoJICAgICAgICAvLyBXZSBkb24ndCBjYXJlIGFib3V0IGVycm9ycyBpbiB0aGUgZXJyb3ItY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1EYXRhQ29kZXdvcmRzOyBpKyspIHsKCSAgICAgICAgICAgIGNvZGV3b3JkQnl0ZXNbaV0gPSAvKihieXRlKSAqLyBjb2Rld29yZHNJbnRzW2ldOwoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlcjsKCX0oKSk7CglEZWNvZGVyJDEuZGVmYXVsdCA9IERlY29kZXI7CgoJdmFyIERldGVjdG9yJDEgPSB7fTsKCgl2YXIgTWF0aFV0aWxzJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMTIgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdGhVdGlscyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5kZXRlY3RvciB7Ki8KCS8qKgoJICogR2VuZXJhbCBtYXRoLXJlbGF0ZWQgYW5kIG51bWVyaWMgdXRpbGl0eSBmdW5jdGlvbnMuCgkgKi8KCXZhciBNYXRoVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gTWF0aFV0aWxzKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBFbmRzIHVwIGJlaW5nIGEgYml0IGZhc3RlciB0aGFuIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0uIFRoaXMgbWVyZWx5IHJvdW5kcyBpdHMKCSAgICAgKiBhcmd1bWVudCB0byB0aGUgbmVhcmVzdCBpbnQsIHdoZXJlIHguNSByb3VuZHMgdXAgdG8geCsxLiBTZW1hbnRpY3Mgb2YgdGhpcyBzaG9ydGN1dAoJICAgICAqIGRpZmZlciBzbGlnaHRseSBmcm9tIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0gaW4gdGhhdCBoYWxmIHJvdW5kcyBkb3duIGZvciBuZWdhdGl2ZQoJICAgICAqIHZhbHVlcy4gLTIuNSByb3VuZHMgdG8gLTMsIG5vdCAtMi4gRm9yIHB1cnBvc2VzIGhlcmUgaXQgbWFrZXMgbm8gZGlmZmVyZW5jZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBkIHJlYWwgdmFsdWUgdG8gcm91bmQKCSAgICAgKiBAcmV0dXJuIG5lYXJlc3Qge0Bjb2RlIGludH0KCSAgICAgKi8KCSAgICBNYXRoVXRpbHMucm91bmQgPSBmdW5jdGlvbiAoZCAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE5hTiA9PT0gZCkKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICBpZiAoZCA8PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUikKCSAgICAgICAgICAgIHJldHVybiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjsKCSAgICAgICAgaWYgKGQgPj0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpCgkgICAgICAgICAgICByZXR1cm4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHJldHVybiAvKihpbnQpICovIChkICsgKGQgPCAwLjAgPyAtMC41IDogMC41KSkgfCAwOwoJICAgIH07CgkgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG1heWJlIHJlbW92ZSByb3VuZCBtZXRob2QgYW5kIGNhbGwgZGlyZWN0bHkgTWF0aC5yb3VuZCwgaXQgbG9va3MgbGlrZSBpdCBkb2Vzbid0IG1ha2Ugc2Vuc2UgZm9yIGpzCgkgICAgLyoqCgkgICAgICogQHBhcmFtIGFYIHBvaW50IEEgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGFZIHBvaW50IEEgeSBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJYIHBvaW50IEIgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJZIHBvaW50IEIgeSBjb29yZGluYXRlCgkgICAgICogQHJldHVybiBFdWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiBwb2ludHMgQSBhbmQgQgoJICAgICAqLwoJICAgIE1hdGhVdGlscy5kaXN0YW5jZSA9IGZ1bmN0aW9uIChhWCAvKmZsb2F0fGludCovLCBhWSAvKmZsb2F0fGludCovLCBiWCAvKmZsb2F0fGludCovLCBiWSAvKmZsb2F0fGludCovKSB7CgkgICAgICAgIHZhciB4RGlmZiA9IGFYIC0gYlg7CgkgICAgICAgIHZhciB5RGlmZiA9IGFZIC0gYlk7CgkgICAgICAgIHJldHVybiAvKihmbG9hdCkgKi8gTWF0aC5zcXJ0KHhEaWZmICogeERpZmYgKyB5RGlmZiAqIHlEaWZmKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBhWCBwb2ludCBBIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBhWSBwb2ludCBBIHkgY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWCBwb2ludCBCIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWSBwb2ludCBCIHkgY29vcmRpbmF0ZQoJICAgICAqIEByZXR1cm4gRXVjbGlkZWFuIGRpc3RhbmNlIGJldHdlZW4gcG9pbnRzIEEgYW5kIEIKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgc3RhdGljIGRpc3RhbmNlKGFYOiBudW1iZXIgLyppbnQqLywgYVk6IG51bWJlciAvKmludCovLCBiWDogbnVtYmVyIC8qaW50Ki8sIGJZOiBudW1iZXIgLyppbnQqLyk6IGZsb2F0IHsKCSAgICAvLyAgIGNvbnN0IHhEaWZmID0gYVggLSBiWAoJICAgIC8vICAgY29uc3QgeURpZmYgPSBhWSAtIGJZCgkgICAgLy8gICByZXR1cm4gKGZsb2F0KSBNYXRoLnNxcnQoeERpZmYgKiB4RGlmZiArIHlEaWZmICogeURpZmYpOwoJICAgIC8vIH0KCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYXJyYXkgdmFsdWVzIHRvIHN1bQoJICAgICAqIEByZXR1cm4gc3VtIG9mIHZhbHVlcyBpbiBhcnJheQoJICAgICAqLwoJICAgIE1hdGhVdGlscy5zdW0gPSBmdW5jdGlvbiAoYXJyYXkpIHsKCSAgICAgICAgdmFyIGNvdW50ID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gYXJyYXkubGVuZ3RoOyBpICE9PSBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgYSA9IGFycmF5W2ldOwoJICAgICAgICAgICAgY291bnQgKz0gYTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY291bnQ7CgkgICAgfTsKCSAgICByZXR1cm4gTWF0aFV0aWxzOwoJfSgpKTsKCU1hdGhVdGlscyQxLmRlZmF1bHQgPSBNYXRoVXRpbHM7CgoJdmFyIERldGVjdG9yUmVzdWx0JDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERldGVjdG9yUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGV0ZWN0aW5nIGEgYmFyY29kZSBpbiBhbiBpbWFnZS4gVGhpcyBpbmNsdWRlcyB0aGUgcmF3CgkgKiBtYXRyaXggb2YgYmxhY2svd2hpdGUgcGl4ZWxzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGJhcmNvZGUsIGFuZCBwb3NzaWJseSBwb2ludHMgb2YgaW50ZXJlc3QKCSAqIGluIHRoZSBpbWFnZSwgbGlrZSB0aGUgbG9jYXRpb24gb2YgZmluZGVyIHBhdHRlcm5zIG9yIGNvcm5lcnMgb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGV0ZWN0b3JSZXN1bHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gRGV0ZWN0b3JSZXN1bHQoYml0cywgcG9pbnRzKSB7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIHRoaXMucG9pbnRzID0gcG9pbnRzOwoJICAgIH0KCSAgICBEZXRlY3RvclJlc3VsdC5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIERldGVjdG9yUmVzdWx0LnByb3RvdHlwZS5nZXRQb2ludHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnBvaW50czsKCSAgICB9OwoJICAgIHJldHVybiBEZXRlY3RvclJlc3VsdDsKCX0oKSk7CglEZXRlY3RvclJlc3VsdCQxLmRlZmF1bHQgPSBEZXRlY3RvclJlc3VsdDsKCgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSQxID0ge307CgoJdmFyIERlZmF1bHRHcmlkU2FtcGxlciQxID0ge307CgoJdmFyIEdyaWRTYW1wbGVyJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDUgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBJbXBsZW1lbnRhdGlvbnMgb2YgdGhpcyBjbGFzcyBjYW4sIGdpdmVuIGxvY2F0aW9ucyBvZiBmaW5kZXIgcGF0dGVybnMgZm9yIGEgUVIgY29kZSBpbiBhbgoJICogaW1hZ2UsIHNhbXBsZSB0aGUgcmlnaHQgcG9pbnRzIGluIHRoZSBpbWFnZSB0byByZWNvbnN0cnVjdCB0aGUgUVIgY29kZSwgYWNjb3VudGluZyBmb3IKCSAqIHBlcnNwZWN0aXZlIGRpc3RvcnRpb24uIEl0IGlzIGFic3RyYWN0ZWQgc2luY2UgaXQgaXMgcmVsYXRpdmVseSBleHBlbnNpdmUgYW5kIHNob3VsZCBiZSBhbGxvd2VkCgkgKiB0byB0YWtlIGFkdmFudGFnZSBvZiBwbGF0Zm9ybS1zcGVjaWZpYyBvcHRpbWl6ZWQgaW1wbGVtZW50YXRpb25zLCBsaWtlIFN1bidzIEphdmEgQWR2YW5jZWQKCSAqIEltYWdpbmcgbGlicmFyeSwgYnV0IHdoaWNoIG1heSBub3QgYmUgYXZhaWxhYmxlIGluIG90aGVyIGVudmlyb25tZW50cyBzdWNoIGFzIEoyTUUsIGFuZCB2aWNlCgkgKiB2ZXJzYS4KCSAqCgkgKiBUaGUgaW1wbGVtZW50YXRpb24gdXNlZCBjYW4gYmUgY29udHJvbGxlZCBieSBjYWxsaW5nIHtAbGluayAjc2V0R3JpZFNhbXBsZXIoR3JpZFNhbXBsZXIpfQoJICogd2l0aCBhbiBpbnN0YW5jZSBvZiBhIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgdGhpcyBpbnRlcmZhY2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdyaWRTYW1wbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEdyaWRTYW1wbGVyKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5DaGVja3MgYSBzZXQgb2YgcG9pbnRzIHRoYXQgaGF2ZSBiZWVuIHRyYW5zZm9ybWVkIHRvIHNhbXBsZSBwb2ludHMgb24gYW4gaW1hZ2UgYWdhaW5zdAoJICAgICAqIHRoZSBpbWFnZSdzIGRpbWVuc2lvbnMgdG8gc2VlIGlmIHRoZSBwb2ludCBhcmUgZXZlbiB3aXRoaW4gdGhlIGltYWdlLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHdpbGwgYWN0dWFsbHkgIm51ZGdlIiB0aGUgZW5kcG9pbnRzIGJhY2sgb250byB0aGUgaW1hZ2UgaWYgdGhleSBhcmUgZm91bmQgdG8gYmUKCSAgICAgKiBiYXJlbHkgKGxlc3MgdGhhbiAxIHBpeGVsKSBvZmYgdGhlIGltYWdlLiBUaGlzIGFjY291bnRzIGZvciBpbXBlcmZlY3QgZGV0ZWN0aW9uIG9mIGZpbmRlcgoJICAgICAqIHBhdHRlcm5zIGluIGFuIGltYWdlIHdoZXJlIHRoZSBRUiBDb2RlIHJ1bnMgYWxsIHRoZSB3YXkgdG8gdGhlIGltYWdlIGJvcmRlci48L3A+CgkgICAgICoKCSAgICAgKiA8cD5Gb3IgZWZmaWNpZW5jeSwgdGhlIG1ldGhvZCB3aWxsIGNoZWNrIHBvaW50cyBmcm9tIGVpdGhlciBlbmQgb2YgdGhlIGxpbmUgdW50aWwgb25lIGlzIGZvdW5kCgkgICAgICogdG8gYmUgd2l0aGluIHRoZSBpbWFnZS4gQmVjYXVzZSB0aGUgc2V0IG9mIHBvaW50cyBhcmUgYXNzdW1lZCB0byBiZSBsaW5lYXIsIHRoaXMgaXMgdmFsaWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGltYWdlIGludG8gd2hpY2ggdGhlIHBvaW50cyBzaG91bGQgbWFwCgkgICAgICogQHBhcmFtIHBvaW50cyBhY3R1YWwgcG9pbnRzIGluIHgxLHkxLC4uLix4bix5biBmb3JtCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhbiBlbmRwb2ludCBpcyBsaWVzIG91dHNpZGUgdGhlIGltYWdlIGJvdW5kYXJpZXMKCSAgICAgKi8KCSAgICBHcmlkU2FtcGxlci5jaGVja0FuZE51ZGdlUG9pbnRzID0gZnVuY3Rpb24gKGltYWdlLCBwb2ludHMpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gc3RhcnQgdW50aWwgd2Ugc2VlIHNvbWUgdGhhdCBhcmUgT0s6CgkgICAgICAgIHZhciBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSAwOyBvZmZzZXQgPCBwb2ludHMubGVuZ3RoICYmIG51ZGdlZDsgb2Zmc2V0ICs9IDIpIHsKCSAgICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0XSk7CgkgICAgICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IocG9pbnRzW29mZnNldCArIDFdKTsKCSAgICAgICAgICAgIGlmICh4IDwgLTEgfHwgeCA+IHdpZHRoIHx8IHkgPCAtMSB8fCB5ID4gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBudWRnZWQgPSBmYWxzZTsKCSAgICAgICAgICAgIGlmICh4ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gMC4wOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmICh4ID09PSB3aWR0aCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gd2lkdGggLSAxOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAoeSA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICBwb2ludHNbb2Zmc2V0ICsgMV0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IGhlaWdodCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gZW5kOgoJICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSBwb2ludHMubGVuZ3RoIC0gMjsgb2Zmc2V0ID49IDAgJiYgbnVkZ2VkOyBvZmZzZXQgLT0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBNYXRoLmZsb29yKHBvaW50c1tvZmZzZXRdKTsKCSAgICAgICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0ICsgMV0pOwoJICAgICAgICAgICAgaWYgKHggPCAtMSB8fCB4ID4gd2lkdGggfHwgeSA8IC0xIHx8IHkgPiBoZWlnaHQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ1LmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIG51ZGdlZCA9IGZhbHNlOwoJICAgICAgICAgICAgaWYgKHggPT09IC0xKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHggPT09IHdpZHRoKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSB3aWR0aCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmICh5ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IDAuMDsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoeSA9PT0gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldCArIDFdID0gaGVpZ2h0IC0gMTsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXI7Cgl9KCkpOwoJR3JpZFNhbXBsZXIkMS5kZWZhdWx0ID0gR3JpZFNhbXBsZXI7CgoJdmFyIFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGltcGxlbWVudHMgYSBwZXJzcGVjdGl2ZSB0cmFuc2Zvcm0gaW4gdHdvIGRpbWVuc2lvbnMuIEdpdmVuIGZvdXIgc291cmNlIGFuZCBmb3VyCgkgKiBkZXN0aW5hdGlvbiBwb2ludHMsIGl0IHdpbGwgY29tcHV0ZSB0aGUgdHJhbnNmb3JtYXRpb24gaW1wbGllZCBiZXR3ZWVuIHRoZW0uIFRoZSBjb2RlIGlzIGJhc2VkCgkgKiBkaXJlY3RseSB1cG9uIHNlY3Rpb24gMy40LjIgb2YgR2VvcmdlIFdvbGJlcmcncyAiRGlnaXRhbCBJbWFnZSBXYXJwaW5nIjsgc2VlIHBhZ2VzIDU0LTU2LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUGVyc3BlY3RpdmVUcmFuc2Zvcm0oYTExIC8qZmxvYXQqLywgYTIxIC8qZmxvYXQqLywgYTMxIC8qZmxvYXQqLywgYTEyIC8qZmxvYXQqLywgYTIyIC8qZmxvYXQqLywgYTMyIC8qZmxvYXQqLywgYTEzIC8qZmxvYXQqLywgYTIzIC8qZmxvYXQqLywgYTMzIC8qZmxvYXQqLykgewoJICAgICAgICB0aGlzLmExMSA9IGExMTsKCSAgICAgICAgdGhpcy5hMjEgPSBhMjE7CgkgICAgICAgIHRoaXMuYTMxID0gYTMxOwoJICAgICAgICB0aGlzLmExMiA9IGExMjsKCSAgICAgICAgdGhpcy5hMjIgPSBhMjI7CgkgICAgICAgIHRoaXMuYTMyID0gYTMyOwoJICAgICAgICB0aGlzLmExMyA9IGExMzsKCSAgICAgICAgdGhpcy5hMjMgPSBhMjM7CgkgICAgICAgIHRoaXMuYTMzID0gYTMzOwoJICAgIH0KCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsID0gZnVuY3Rpb24gKHgwIC8qZmxvYXQqLywgeTAgLypmbG9hdCovLCB4MSAvKmZsb2F0Ki8sIHkxIC8qZmxvYXQqLywgeDIgLypmbG9hdCovLCB5MiAvKmZsb2F0Ki8sIHgzIC8qZmxvYXQqLywgeTMgLypmbG9hdCovLCB4MHAgLypmbG9hdCovLCB5MHAgLypmbG9hdCovLCB4MXAgLypmbG9hdCovLCB5MXAgLypmbG9hdCovLCB4MnAgLypmbG9hdCovLCB5MnAgLypmbG9hdCovLCB4M3AgLypmbG9hdCovLCB5M3AgLypmbG9hdCovKSB7CgkgICAgICAgIHZhciBxVG9TID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0ucXVhZHJpbGF0ZXJhbFRvU3F1YXJlKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5Myk7CgkgICAgICAgIHZhciBzVG9RID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwcCwgeTBwLCB4MXAsIHkxcCwgeDJwLCB5MnAsIHgzcCwgeTNwKTsKCSAgICAgICAgcmV0dXJuIHNUb1EudGltZXMocVRvUyk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUudHJhbnNmb3JtUG9pbnRzID0gZnVuY3Rpb24gKHBvaW50cykgewoJICAgICAgICB2YXIgbWF4ID0gcG9pbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkgKz0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBwb2ludHNbaV07CgkgICAgICAgICAgICB2YXIgeSA9IHBvaW50c1tpICsgMV07CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSBhMTMgKiB4ICsgYTIzICogeSArIGEzMzsKCSAgICAgICAgICAgIHBvaW50c1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHBvaW50c1tpICsgMV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50cmFuc2Zvcm1Qb2ludHNXaXRoVmFsdWVzID0gZnVuY3Rpb24gKHhWYWx1ZXMsIHlWYWx1ZXMpIHsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgdmFyIG4gPSB4VmFsdWVzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB4ID0geFZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciB5ID0geVZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciBkZW5vbWluYXRvciA9IGExMyAqIHggKyBhMjMgKiB5ICsgYTMzOwoJICAgICAgICAgICAgeFZhbHVlc1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHlWYWx1ZXNbaV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnNxdWFyZVRvUXVhZHJpbGF0ZXJhbCA9IGZ1bmN0aW9uICh4MCAvKmZsb2F0Ki8sIHkwIC8qZmxvYXQqLywgeDEgLypmbG9hdCovLCB5MSAvKmZsb2F0Ki8sIHgyIC8qZmxvYXQqLywgeTIgLypmbG9hdCovLCB4MyAvKmZsb2F0Ki8sIHkzIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgZHgzID0geDAgLSB4MSArIHgyIC0geDM7CgkgICAgICAgIHZhciBkeTMgPSB5MCAtIHkxICsgeTIgLSB5MzsKCSAgICAgICAgaWYgKGR4MyA9PT0gMC4wICYmIGR5MyA9PT0gMC4wKSB7CgkgICAgICAgICAgICAvLyBBZmZpbmUKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCwgeDIgLSB4MSwgeDAsIHkxIC0geTAsIHkyIC0geTEsIHkwLCAwLjAsIDAuMCwgMS4wKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHZhciBkeDEgPSB4MSAtIHgyOwoJICAgICAgICAgICAgdmFyIGR4MiA9IHgzIC0geDI7CgkgICAgICAgICAgICB2YXIgZHkxID0geTEgLSB5MjsKCSAgICAgICAgICAgIHZhciBkeTIgPSB5MyAtIHkyOwoJICAgICAgICAgICAgdmFyIGRlbm9taW5hdG9yID0gZHgxICogZHkyIC0gZHgyICogZHkxOwoJICAgICAgICAgICAgdmFyIGExMyA9IChkeDMgKiBkeTIgLSBkeDIgKiBkeTMpIC8gZGVub21pbmF0b3I7CgkgICAgICAgICAgICB2YXIgYTIzID0gKGR4MSAqIGR5MyAtIGR4MyAqIGR5MSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCArIGExMyAqIHgxLCB4MyAtIHgwICsgYTIzICogeDMsIHgwLCB5MSAtIHkwICsgYTEzICogeTEsIHkzIC0geTAgKyBhMjMgKiB5MywgeTAsIGExMywgYTIzLCAxLjApOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9TcXVhcmUgPSBmdW5jdGlvbiAoeDAgLypmbG9hdCovLCB5MCAvKmZsb2F0Ki8sIHgxIC8qZmxvYXQqLywgeTEgLypmbG9hdCovLCB4MiAvKmZsb2F0Ki8sIHkyIC8qZmxvYXQqLywgeDMgLypmbG9hdCovLCB5MyAvKmZsb2F0Ki8pIHsKCSAgICAgICAgLy8gSGVyZSwgdGhlIGFkam9pbnQgc2VydmVzIGFzIHRoZSBpbnZlcnNlOgoJICAgICAgICByZXR1cm4gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5MykuYnVpbGRBZGpvaW50KCk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUuYnVpbGRBZGpvaW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBBZGpvaW50IGlzIHRoZSB0cmFuc3Bvc2Ugb2YgdGhlIGNvZmFjdG9yIG1hdHJpeDoKCSAgICAgICAgcmV0dXJuIG5ldyBQZXJzcGVjdGl2ZVRyYW5zZm9ybSh0aGlzLmEyMiAqIHRoaXMuYTMzIC0gdGhpcy5hMjMgKiB0aGlzLmEzMiwgdGhpcy5hMjMgKiB0aGlzLmEzMSAtIHRoaXMuYTIxICogdGhpcy5hMzMsIHRoaXMuYTIxICogdGhpcy5hMzIgLSB0aGlzLmEyMiAqIHRoaXMuYTMxLCB0aGlzLmExMyAqIHRoaXMuYTMyIC0gdGhpcy5hMTIgKiB0aGlzLmEzMywgdGhpcy5hMTEgKiB0aGlzLmEzMyAtIHRoaXMuYTEzICogdGhpcy5hMzEsIHRoaXMuYTEyICogdGhpcy5hMzEgLSB0aGlzLmExMSAqIHRoaXMuYTMyLCB0aGlzLmExMiAqIHRoaXMuYTIzIC0gdGhpcy5hMTMgKiB0aGlzLmEyMiwgdGhpcy5hMTMgKiB0aGlzLmEyMSAtIHRoaXMuYTExICogdGhpcy5hMjMsIHRoaXMuYTExICogdGhpcy5hMjIgLSB0aGlzLmExMiAqIHRoaXMuYTIxKTsKCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50aW1lcyA9IGZ1bmN0aW9uIChvdGhlcikgewoJICAgICAgICByZXR1cm4gbmV3IFBlcnNwZWN0aXZlVHJhbnNmb3JtKHRoaXMuYTExICogb3RoZXIuYTExICsgdGhpcy5hMjEgKiBvdGhlci5hMTIgKyB0aGlzLmEzMSAqIG90aGVyLmExMywgdGhpcy5hMTEgKiBvdGhlci5hMjEgKyB0aGlzLmEyMSAqIG90aGVyLmEyMiArIHRoaXMuYTMxICogb3RoZXIuYTIzLCB0aGlzLmExMSAqIG90aGVyLmEzMSArIHRoaXMuYTIxICogb3RoZXIuYTMyICsgdGhpcy5hMzEgKiBvdGhlci5hMzMsIHRoaXMuYTEyICogb3RoZXIuYTExICsgdGhpcy5hMjIgKiBvdGhlci5hMTIgKyB0aGlzLmEzMiAqIG90aGVyLmExMywgdGhpcy5hMTIgKiBvdGhlci5hMjEgKyB0aGlzLmEyMiAqIG90aGVyLmEyMiArIHRoaXMuYTMyICogb3RoZXIuYTIzLCB0aGlzLmExMiAqIG90aGVyLmEzMSArIHRoaXMuYTIyICogb3RoZXIuYTMyICsgdGhpcy5hMzIgKiBvdGhlci5hMzMsIHRoaXMuYTEzICogb3RoZXIuYTExICsgdGhpcy5hMjMgKiBvdGhlci5hMTIgKyB0aGlzLmEzMyAqIG90aGVyLmExMywgdGhpcy5hMTMgKiBvdGhlci5hMjEgKyB0aGlzLmEyMyAqIG90aGVyLmEyMiArIHRoaXMuYTMzICogb3RoZXIuYTIzLCB0aGlzLmExMyAqIG90aGVyLmEzMSArIHRoaXMuYTIzICogb3RoZXIuYTMyICsgdGhpcy5hMzMgKiBvdGhlci5hMzMpOwoJICAgIH07CgkgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoJfSgpKTsKCVBlcnNwZWN0aXZlVHJhbnNmb3JtJDEuZGVmYXVsdCA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVmYXVsdEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEdyaWRTYW1wbGVyXzEgPSBHcmlkU2FtcGxlciQxOwoJdmFyIEJpdE1hdHJpeF8xJDEgPSBCaXRNYXRyaXgkMTsKCXZhciBQZXJzcGVjdGl2ZVRyYW5zZm9ybV8xJDEgPSBQZXJzcGVjdGl2ZVRyYW5zZm9ybSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEkNCA9IE5vdEZvdW5kRXhjZXB0aW9uJDE7CgkvKioKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWZhdWx0R3JpZFNhbXBsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDIoRGVmYXVsdEdyaWRTYW1wbGVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIERlZmF1bHRHcmlkU2FtcGxlcigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgRGVmYXVsdEdyaWRTYW1wbGVyLnByb3RvdHlwZS5zYW1wbGVHcmlkID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgcDFUb1ggLypmbG9hdCovLCBwMVRvWSAvKmZsb2F0Ki8sIHAyVG9YIC8qZmxvYXQqLywgcDJUb1kgLypmbG9hdCovLCBwM1RvWCAvKmZsb2F0Ki8sIHAzVG9ZIC8qZmxvYXQqLywgcDRUb1ggLypmbG9hdCovLCBwNFRvWSAvKmZsb2F0Ki8sIHAxRnJvbVggLypmbG9hdCovLCBwMUZyb21ZIC8qZmxvYXQqLywgcDJGcm9tWCAvKmZsb2F0Ki8sIHAyRnJvbVkgLypmbG9hdCovLCBwM0Zyb21YIC8qZmxvYXQqLywgcDNGcm9tWSAvKmZsb2F0Ki8sIHA0RnJvbVggLypmbG9hdCovLCBwNEZyb21ZIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSQxLmRlZmF1bHQucXVhZHJpbGF0ZXJhbFRvUXVhZHJpbGF0ZXJhbChwMVRvWCwgcDFUb1ksIHAyVG9YLCBwMlRvWSwgcDNUb1gsIHAzVG9ZLCBwNFRvWCwgcDRUb1ksIHAxRnJvbVgsIHAxRnJvbVksIHAyRnJvbVgsIHAyRnJvbVksIHAzRnJvbVgsIHAzRnJvbVksIHA0RnJvbVgsIHA0RnJvbVkpOwoJICAgICAgICByZXR1cm4gdGhpcy5zYW1wbGVHcmlkV2l0aFRyYW5zZm9ybShpbWFnZSwgZGltZW5zaW9uWCwgZGltZW5zaW9uWSwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBEZWZhdWx0R3JpZFNhbXBsZXIucHJvdG90eXBlLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgdHJhbnNmb3JtKSB7CgkgICAgICAgIGlmIChkaW1lbnNpb25YIDw9IDAgfHwgZGltZW5zaW9uWSA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMSQxLmRlZmF1bHQoZGltZW5zaW9uWCwgZGltZW5zaW9uWSk7CgkgICAgICAgIHZhciBwb2ludHMgPSBuZXcgRmxvYXQzMkFycmF5KDIgKiBkaW1lbnNpb25YKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBkaW1lbnNpb25ZOyB5KyspIHsKCSAgICAgICAgICAgIHZhciBtYXggPSBwb2ludHMubGVuZ3RoOwoJICAgICAgICAgICAgdmFyIGlWYWx1ZSA9IHkgKyAwLjU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1heDsgeCArPSAyKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW3hdID0gKHggLyAyKSArIDAuNTsKCSAgICAgICAgICAgICAgICBwb2ludHNbeCArIDFdID0gaVZhbHVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50cyhwb2ludHMpOwoJICAgICAgICAgICAgLy8gUXVpY2sgY2hlY2sgdG8gc2VlIGlmIHBvaW50cyB0cmFuc2Zvcm1lZCB0byBzb21ldGhpbmcgaW5zaWRlIHRoZSBpbWFnZQoJICAgICAgICAgICAgLy8gc3VmZmljaWVudCB0byBjaGVjayB0aGUgZW5kcG9pbnRzCgkgICAgICAgICAgICBHcmlkU2FtcGxlcl8xLmRlZmF1bHQuY2hlY2tBbmROdWRnZVBvaW50cyhpbWFnZSwgcG9pbnRzKTsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHggKz0gMikgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KE1hdGguZmxvb3IocG9pbnRzW3hdKSwgTWF0aC5mbG9vcihwb2ludHNbeCArIDFdKSkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsYWNrKC1pc2gpIHBpeGVsCgkgICAgICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4IC8gMiwgeSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoYWlvb2JlIC8qOiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgICAgIC8vIFRoaXMgZmVlbHMgd3JvbmcsIGJ1dCwgc29tZXRpbWVzIGlmIHRoZSBmaW5kZXIgcGF0dGVybnMgYXJlIG1pc2lkZW50aWZpZWQsIHRoZSByZXN1bHRpbmcKCSAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0gZ2V0cyAidHdpc3RlZCIgc3VjaCB0aGF0IGl0IG1hcHMgYSBzdHJhaWdodCBsaW5lIG9mIHBvaW50cyB0byBhIHNldCBvZiBwb2ludHMKCSAgICAgICAgICAgICAgICAvLyB3aG9zZSBlbmRwb2ludHMgYXJlIGluIGJvdW5kcywgYnV0IG90aGVycyBhcmUgbm90LiBUaGVyZSBpcyBwcm9iYWJseSBzb21lIG1hdGhlbWF0aWNhbAoJICAgICAgICAgICAgICAgIC8vIHdheSB0byBkZXRlY3QgdGhpcyBhYm91dCB0aGUgdHJhbnNmb3JtYXRpb24gdGhhdCBJIGRvbid0IGtub3cgeWV0LgoJICAgICAgICAgICAgICAgIC8vIFRoaXMgcmVzdWx0cyBpbiBhbiB1Z2x5IHJ1bnRpbWUgZXhjZXB0aW9uIGRlc3BpdGUgb3VyIGNsZXZlciBjaGVja3MgYWJvdmUgLS0gY2FuJ3QgaGF2ZQoJICAgICAgICAgICAgICAgIC8vIHRoYXQuIFdlIGNvdWxkIGNoZWNrIGVhY2ggcG9pbnQncyBjb29yZGluYXRlcyBidXQgdGhhdCBmZWVscyBkdXBsaWNhdGl2ZS4gV2Ugc2V0dGxlIGZvcgoJICAgICAgICAgICAgICAgIC8vIGNhdGNoaW5nIGFuZCB3cmFwcGluZyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24uCgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNC5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICByZXR1cm4gRGVmYXVsdEdyaWRTYW1wbGVyOwoJfShHcmlkU2FtcGxlcl8xLmRlZmF1bHQpKTsKCURlZmF1bHRHcmlkU2FtcGxlciQxLmRlZmF1bHQgPSBEZWZhdWx0R3JpZFNhbXBsZXI7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVySW5zdGFuY2UkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIERlZmF1bHRHcmlkU2FtcGxlcl8xID0gRGVmYXVsdEdyaWRTYW1wbGVyJDE7Cgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBHcmlkU2FtcGxlckluc3RhbmNlKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBTZXRzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBHcmlkU2FtcGxlciB1c2VkIGJ5IHRoZSBsaWJyYXJ5LiBPbmUgZ2xvYmFsCgkgICAgICogaW5zdGFuY2UgaXMgc3RvcmVkLCB3aGljaCBtYXkgc291bmQgcHJvYmxlbWF0aWMuIEJ1dCwgdGhlIGltcGxlbWVudGF0aW9uIHByb3ZpZGVkCgkgICAgICogb3VnaHQgdG8gYmUgYXBwcm9wcmlhdGUgZm9yIHRoZSBlbnRpcmUgcGxhdGZvcm0sIGFuZCBhbGwgdXNlcyBvZiB0aGlzIGxpYnJhcnkKCSAgICAgKiBpbiB0aGUgd2hvbGUgbGlmZXRpbWUgb2YgdGhlIEpWTS4gRm9yIGluc3RhbmNlLCBhbiBBbmRyb2lkIGFjdGl2aXR5IGNhbiBzd2FwIGluCgkgICAgICogYW4gaW1wbGVtZW50YXRpb24gdGhhdCB0YWtlcyBhZHZhbnRhZ2Ugb2YgbmF0aXZlIHBsYXRmb3JtIGxpYnJhcmllcy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBuZXdHcmlkU2FtcGxlciBUaGUgcGxhdGZvcm0tc3BlY2lmaWMgb2JqZWN0IHRvIGluc3RhbGwuCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5zZXRHcmlkU2FtcGxlciA9IGZ1bmN0aW9uIChuZXdHcmlkU2FtcGxlcikgewoJICAgICAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3R3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIEdyaWRTYW1wbGVyCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5nZXRJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIEdyaWRTYW1wbGVySW5zdGFuY2UuZ3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3IERlZmF1bHRHcmlkU2FtcGxlcl8xLmRlZmF1bHQoKTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXJJbnN0YW5jZTsKCX0oKSk7CglHcmlkU2FtcGxlckluc3RhbmNlJDEuZGVmYXVsdCA9IEdyaWRTYW1wbGVySW5zdGFuY2U7CgoJdmFyIFJlc3VsdFBvaW50JDEgPSB7fTsKCgl2YXIgRmxvYXQkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGbG9hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIFBvbnlmaWxsIGZvciBKYXZhJ3MgRmxvYXQgY2xhc3MuCgkgKi8KCXZhciBGbG9hdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBGbG9hdCgpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogU2luY1RTIGhhcyBubyBkaWZmZXJlbmNlIGJldHdlZW4gaW50IGFuZCBmbG9hdCwgdGhlcmUncyBhbGwgbnVtYmVycywKCSAgICAgKiB0aGlzIGlzIHVzZWQgb25seSB0byBwb2x5ZmlsbCBKYXZhIGNvZGUuCgkgICAgICovCgkgICAgRmxvYXQuZmxvYXRUb0ludEJpdHMgPSBmdW5jdGlvbiAoZikgewoJICAgICAgICByZXR1cm4gZjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFRoZSBmbG9hdCBtYXggdmFsdWUgaW4gSlMgaXMgdGhlIG51bWJlciBtYXggdmFsdWUuCgkgICAgICovCgkgICAgRmxvYXQuTUFYX1ZBTFVFID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgcmV0dXJuIEZsb2F0OwoJfSgpKTsKCUZsb2F0JDEuZGVmYXVsdCA9IEZsb2F0OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVzdWx0UG9pbnQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCXZhciBNYXRoVXRpbHNfMSQxID0gTWF0aFV0aWxzJDE7Cgl2YXIgRmxvYXRfMSA9IEZsb2F0JDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHBvaW50IG9mIGludGVyZXN0IGluIGFuIGltYWdlIGNvbnRhaW5pbmcgYSBiYXJjb2RlLiBUeXBpY2FsbHksIHRoaXMKCSAqIHdvdWxkIGJlIHRoZSBsb2NhdGlvbiBvZiBhIGZpbmRlciBwYXR0ZXJuIG9yIHRoZSBjb3JuZXIgb2YgdGhlIGJhcmNvZGUsIGZvciBleGFtcGxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0UG9pbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUmVzdWx0UG9pbnQoeCwgeSkgewoJICAgICAgICB0aGlzLnggPSB4OwoJICAgICAgICB0aGlzLnkgPSB5OwoJICAgIH0KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMueDsKCSAgICB9OwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5nZXRZID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy55OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgUmVzdWx0UG9pbnQpIHsKCSAgICAgICAgICAgIHZhciBvdGhlclBvaW50ID0gb3RoZXI7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy54ID09PSBvdGhlclBvaW50LnggJiYgdGhpcy55ID09PSBvdGhlclBvaW50Lnk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogRmxvYXRfMS5kZWZhdWx0LmZsb2F0VG9JbnRCaXRzKHRoaXMueCkgKyBGbG9hdF8xLmRlZmF1bHQuZmxvYXRUb0ludEJpdHModGhpcy55KTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiAnKCcgKyB0aGlzLnggKyAnLCcgKyB0aGlzLnkgKyAnKSc7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBPcmRlcnMgYW4gYXJyYXkgb2YgdGhyZWUgUmVzdWx0UG9pbnRzIGluIGFuIG9yZGVyIFtBLEIsQ10gc3VjaCB0aGF0IEFCIGlzIGxlc3MgdGhhbiBBQwoJICAgICAqIGFuZCBCQyBpcyBsZXNzIHRoYW4gQUMsIGFuZCB0aGUgYW5nbGUgYmV0d2VlbiBCQyBhbmQgQkEgaXMgbGVzcyB0aGFuIDE4MCBkZWdyZWVzLgoJICAgICAqCgkgICAgICogQHBhcmFtIHBhdHRlcm5zIGFycmF5IG9mIHRocmVlIHtAY29kZSBSZXN1bHRQb2ludH0gdG8gb3JkZXIKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5vcmRlckJlc3RQYXR0ZXJucyA9IGZ1bmN0aW9uIChwYXR0ZXJucykgewoJICAgICAgICAvLyBGaW5kIGRpc3RhbmNlcyBiZXR3ZWVuIHBhdHRlcm4gY2VudGVycwoJICAgICAgICB2YXIgemVyb09uZURpc3RhbmNlID0gdGhpcy5kaXN0YW5jZShwYXR0ZXJuc1swXSwgcGF0dGVybnNbMV0pOwoJICAgICAgICB2YXIgb25lVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzFdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciB6ZXJvVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzBdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciBwb2ludEE7CgkgICAgICAgIHZhciBwb2ludEI7CgkgICAgICAgIHZhciBwb2ludEM7CgkgICAgICAgIC8vIEFzc3VtZSBvbmUgY2xvc2VzdCB0byBvdGhlciB0d28gaXMgQjsgQSBhbmQgQyB3aWxsIGp1c3QgYmUgZ3Vlc3NlcyBhdCBmaXJzdAoJICAgICAgICBpZiAob25lVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlICYmIG9uZVR3b0Rpc3RhbmNlID49IHplcm9Ud29EaXN0YW5jZSkgewoJICAgICAgICAgICAgcG9pbnRCID0gcGF0dGVybnNbMF07CgkgICAgICAgICAgICBwb2ludEEgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QyA9IHBhdHRlcm5zWzJdOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHplcm9Ud29EaXN0YW5jZSA+PSBvbmVUd29EaXN0YW5jZSAmJiB6ZXJvVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlKSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMl07CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1syXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMV07CgkgICAgICAgIH0KCSAgICAgICAgLy8gVXNlIGNyb3NzIHByb2R1Y3QgdG8gZmlndXJlIG91dCB3aGV0aGVyIEEgYW5kIEMgYXJlIGNvcnJlY3Qgb3IgZmxpcHBlZC4KCSAgICAgICAgLy8gVGhpcyBhc2tzIHdoZXRoZXIgQkMgeCBCQSBoYXMgYSBwb3NpdGl2ZSB6IGNvbXBvbmVudCwgd2hpY2ggaXMgdGhlIGFycmFuZ2VtZW50CgkgICAgICAgIC8vIHdlIHdhbnQgZm9yIEEsIEIsIEMuIElmIGl0J3MgbmVnYXRpdmUsIHRoZW4gd2UndmUgZ290IGl0IGZsaXBwZWQgYXJvdW5kIGFuZAoJICAgICAgICAvLyBzaG91bGQgc3dhcCBBIGFuZCBDLgoJICAgICAgICBpZiAodGhpcy5jcm9zc1Byb2R1Y3RaKHBvaW50QSwgcG9pbnRCLCBwb2ludEMpIDwgMC4wKSB7CgkgICAgICAgICAgICB2YXIgdGVtcCA9IHBvaW50QTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBvaW50QzsKCSAgICAgICAgICAgIHBvaW50QyA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgcGF0dGVybnNbMF0gPSBwb2ludEE7CgkgICAgICAgIHBhdHRlcm5zWzFdID0gcG9pbnRCOwoJICAgICAgICBwYXR0ZXJuc1syXSA9IHBvaW50QzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBwYXR0ZXJuMSBmaXJzdCBwYXR0ZXJuCgkgICAgICogQHBhcmFtIHBhdHRlcm4yIHNlY29uZCBwYXR0ZXJuCgkgICAgICogQHJldHVybiBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHMKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5kaXN0YW5jZSA9IGZ1bmN0aW9uIChwYXR0ZXJuMSwgcGF0dGVybjIpIHsKCSAgICAgICAgcmV0dXJuIE1hdGhVdGlsc18xJDEuZGVmYXVsdC5kaXN0YW5jZShwYXR0ZXJuMS54LCBwYXR0ZXJuMS55LCBwYXR0ZXJuMi54LCBwYXR0ZXJuMi55KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHogY29tcG9uZW50IG9mIHRoZSBjcm9zcyBwcm9kdWN0IGJldHdlZW4gdmVjdG9ycyBCQyBhbmQgQkEuCgkgICAgICovCgkgICAgUmVzdWx0UG9pbnQuY3Jvc3NQcm9kdWN0WiA9IGZ1bmN0aW9uIChwb2ludEEsIHBvaW50QiwgcG9pbnRDKSB7CgkgICAgICAgIHZhciBiWCA9IHBvaW50Qi54OwoJICAgICAgICB2YXIgYlkgPSBwb2ludEIueTsKCSAgICAgICAgcmV0dXJuICgocG9pbnRDLnggLSBiWCkgKiAocG9pbnRBLnkgLSBiWSkpIC0gKChwb2ludEMueSAtIGJZKSAqIChwb2ludEEueCAtIGJYKSk7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0UG9pbnQ7Cgl9KCkpOwoJUmVzdWx0UG9pbnQkMS5kZWZhdWx0ID0gUmVzdWx0UG9pbnQ7CgoJdmFyIEFsaWdubWVudFBhdHRlcm5GaW5kZXIkMSA9IHt9OwoKCXZhciBBbGlnbm1lbnRQYXR0ZXJuJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyQxID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFsaWdubWVudFBhdHRlcm4kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgUmVzdWx0UG9pbnRfMSQzID0gUmVzdWx0UG9pbnQkMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGFuIGFsaWdubWVudCBwYXR0ZXJuLCB3aGljaCBhcmUgdGhlIHNtYWxsZXIgc3F1YXJlIHBhdHRlcm5zIGZvdW5kIGluCgkgKiBhbGwgYnV0IHRoZSBzaW1wbGVzdCBRUiBDb2Rlcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEFsaWdubWVudFBhdHRlcm4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDEoQWxpZ25tZW50UGF0dGVybiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZXJtaW5lcyBpZiB0aGlzIGFsaWdubWVudCBwYXR0ZXJuICJhYm91dCBlcXVhbHMiIGFuIGFsaWdubWVudCBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhbiBhdmVyYWdlIG9mIHRoZSB0d28uCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybi5wcm90b3R5cGUuY29tYmluZUVzdGltYXRlID0gZnVuY3Rpb24gKGkgLypmbG9hdCovLCBqIC8qZmxvYXQqLywgbmV3TW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIGNvbWJpbmVkWCA9ICh0aGlzLmdldFgoKSArIGopIC8gMi4wOwoJICAgICAgICB2YXIgY29tYmluZWRZID0gKHRoaXMuZ2V0WSgpICsgaSkgLyAyLjA7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplICsgbmV3TW9kdWxlU2l6ZSkgLyAyLjA7CgkgICAgICAgIHJldHVybiBuZXcgQWxpZ25tZW50UGF0dGVybihjb21iaW5lZFgsIGNvbWJpbmVkWSwgY29tYmluZWRNb2R1bGVTaXplKTsKCSAgICB9OwoJICAgIHJldHVybiBBbGlnbm1lbnRQYXR0ZXJuOwoJfShSZXN1bHRQb2ludF8xJDMuZGVmYXVsdCkpOwoJQWxpZ25tZW50UGF0dGVybiQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX192YWx1ZXMkMSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuXzEgPSBBbGlnbm1lbnRQYXR0ZXJuJDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQzID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBhbGlnbm1lbnQgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBBbGlnbm1lbnQgcGF0dGVybnMgbG9vayBsaWtlIGZpbmRlcgoJICogcGF0dGVybnMgYnV0IGFyZSBzbWFsbGVyIGFuZCBhcHBlYXIgYXQgcmVndWxhciBpbnRlcnZhbHMgdGhyb3VnaG91dCB0aGUgaW1hZ2UuPC9wPgoJICoKCSAqIDxwPkF0IHRoZSBtb21lbnQgdGhpcyBvbmx5IGxvb2tzIGZvciB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAqCgkgKiA8cD5UaGlzIGlzIG1vc3RseSBhIHNpbXBsaWZpZWQgY29weSBvZiB7QGxpbmsgRmluZGVyUGF0dGVybkZpbmRlcn0uIEl0IGlzIGNvcGllZCwKCSAqIHBhc3RlZCBhbmQgc3RyaXBwZWQgZG93biBoZXJlIGZvciBtYXhpbXVtIHBlcmZvcm1hbmNlIGJ1dCBkb2VzIHVuZm9ydHVuYXRlbHkgZHVwbGljYXRlCgkgKiBzb21lIGNvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8qKgoJICAgICAqIDxwPkNyZWF0ZXMgYSBmaW5kZXIgdGhhdCB3aWxsIGxvb2sgaW4gYSBwb3J0aW9uIG9mIHRoZSB3aG9sZSBpbWFnZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gaW1hZ2UgaW1hZ2UgdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIHN0YXJ0WCBsZWZ0IGNvbHVtbiBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSBzdGFydFkgdG9wIHJvdyBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSB3aWR0aCB3aWR0aCBvZiByZWdpb24gdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIGhlaWdodCBoZWlnaHQgb2YgcmVnaW9uIHRvIHNlYXJjaAoJICAgICAqIEBwYXJhbSBtb2R1bGVTaXplIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBzbyBmYXIKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyKGltYWdlLCBzdGFydFggLyppbnQqLywgc3RhcnRZIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBtb2R1bGVTaXplIC8qZmxvYXQqLywgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMuc3RhcnRYID0gc3RhcnRYOwoJICAgICAgICB0aGlzLnN0YXJ0WSA9IHN0YXJ0WTsKCSAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoOwoJICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgdGhpcy5tb2R1bGVTaXplID0gbW9kdWxlU2l6ZTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICAgICAgdGhpcy5wb3NzaWJsZUNlbnRlcnMgPSBbXTsgLy8gbmV3IEFycmF5PGFueT4oNSkpCgkgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBhcnJheSBpbml0aWFsaXphdGlvbiB3aXRob3V0IHNpemUgYXMgdGhlIGxlbmd0aCBpcyBjaGVja2VkIGJlbG93CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSgzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+VGhpcyBtZXRob2QgYXR0ZW1wdHMgdG8gZmluZCB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuIGluIHRoZSBpbWFnZS4gSXQgaXMgYSBiaXQgbWVzc3kgc2luY2UKCSAgICAgKiBpdCdzIHByZXR0eSBwZXJmb3JtYW5jZS1jcml0aWNhbCBhbmQgc28gaXMgd3JpdHRlbiB0byBiZSBmYXN0IGZvcmVtb3N0LjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBub3QgZm91bmQKCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgc3RhcnRYID0gdGhpcy5zdGFydFg7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmhlaWdodDsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIG1heEogPSBzdGFydFggKyB3aWR0aDsKCSAgICAgICAgdmFyIG1pZGRsZUkgPSB0aGlzLnN0YXJ0WSArIChoZWlnaHQgLyAyKTsKCSAgICAgICAgLy8gV2UgYXJlIGxvb2tpbmcgZm9yIGJsYWNrL3doaXRlL2JsYWNrIG1vZHVsZXMgaW4gMToxOjEgcmF0aW8KCSAgICAgICAgLy8gdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIHNlZW4gc28gZmFyCgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoMyk7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIGZvciAodmFyIGlHZW4gPSAwOyBpR2VuIDwgaGVpZ2h0OyBpR2VuKyspIHsKCSAgICAgICAgICAgIC8vIFNlYXJjaCBmcm9tIG1pZGRsZSBvdXR3YXJkcwoJICAgICAgICAgICAgdmFyIGkgPSBtaWRkbGVJICsgKChpR2VuICYgMHgwMSkgPT09IDAgPyBNYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSA6IC1NYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSk7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICB2YXIgaiA9IHN0YXJ0WDsKCSAgICAgICAgICAgIC8vIEJ1cm4gb2ZmIGxlYWRpbmcgd2hpdGUgcGl4ZWxzIGJlZm9yZSBhbnl0aGluZyBlbHNlOyBpZiB3ZSBzdGFydCBpbiB0aGUgbWlkZGxlIG9mCgkgICAgICAgICAgICAvLyBhIHdoaXRlIHJ1biwgaXQgZG9lc24ndCBtYWtlIHNlbnNlIHRvIGNvdW50IGl0cyBsZW5ndGgsIHNpbmNlIHdlIGRvbid0IGtub3cgaWYgdGhlCgkgICAgICAgICAgICAvLyB3aGl0ZSBydW4gY29udGludWVkIHRvIHRoZSBsZWZ0IG9mIHRoZSBzdGFydCBwb2ludAoJICAgICAgICAgICAgd2hpbGUgKGogPCBtYXhKICYmICFpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgY3VycmVudFN0YXRlID0gMDsKCSAgICAgICAgICAgIHdoaWxlIChqIDwgbWF4SikgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMV0rKzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsgLy8gQ291bnRpbmcgd2hpdGUgcGl4ZWxzCgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFN0YXRlID09PSAyKSB7IC8vIEEgd2lubmVyPwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvdW5kUGF0dGVybkNyb3NzKHN0YXRlQ291bnQpKSB7IC8vIFllcwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBqKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gc3RhdGVDb3VudFsyXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gMTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsrK2N1cnJlbnRTdGF0ZV0rKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAodGhpcy5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSkgewoJICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIG1heEopOwoJICAgICAgICAgICAgICAgIGlmIChjb25maXJtZWQgIT09IG51bGwpIHsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBub3RoaW5nIHdlIHNhdyB3YXMgb2JzZXJ2ZWQgYW5kIGNvbmZpcm1lZCB0d2ljZS4gSWYgd2UgaGFkCgkgICAgICAgIC8vIGFueSBndWVzcyBhdCBhbGwsIHJldHVybiBpdC4KCSAgICAgICAgaWYgKHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aCAhPT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zc2libGVDZW50ZXJzWzBdOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogR2l2ZW4gYSBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCBzZWVuIGFuZCBhbiBlbmQgcG9zaXRpb24sCgkgICAgICogZmlndXJlcyB0aGUgbG9jYXRpb24gb2YgdGhlIGNlbnRlciBvZiB0aGlzIGJsYWNrL3doaXRlL2JsYWNrIHJ1bi4KCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCwgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIChlbmQgLSBzdGF0ZUNvdW50WzJdKSAtIHN0YXRlQ291bnRbMV0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8xIHJhdGlvcwoJICAgICAqICAgICAgICAgdXNlZCBieSBhbGlnbm1lbnQgcGF0dGVybnMgdG8gYmUgY29uc2lkZXJlZCBhIG1hdGNoCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMubW9kdWxlU2l6ZTsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFtpXSkgPj0gbWF4VmFyaWFuY2UpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5BZnRlciBhIGhvcml6b250YWwgc2NhbiBmaW5kcyBhIHBvdGVudGlhbCBhbGlnbm1lbnQgcGF0dGVybiwgdGhpcyBtZXRob2QKCSAgICAgKiAiY3Jvc3MtY2hlY2tzIiBieSBzY2FubmluZyBkb3duIHZlcnRpY2FsbHkgdGhyb3VnaCB0aGUgY2VudGVyIG9mIHRoZSBwb3NzaWJsZQoJICAgICAqIGFsaWdubWVudCBwYXR0ZXJuIHRvIHNlZSBpZiB0aGUgc2FtZSBwcm9wb3J0aW9uIGlzIGRldGVjdGVkLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydEkgcm93IHdoZXJlIGFuIGFsaWdubWVudCBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYW4gYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBhbGlnbm1lbnQgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAvLyBTdGFydCBjb3VudGluZyB1cCBmcm9tIGNlbnRlcgoJICAgICAgICB2YXIgaSA9IHN0YXJ0STsKCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbMF0gPD0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMF0rKzsKCSAgICAgICAgICAgIGktLTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFswXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIC8vIE5vdyBhbHNvIGNvdW50IGRvd24gZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IHN0YXJ0SSArIDE7CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbMV0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA8IG1heEkgJiYgIWltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzJdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzJdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMl0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSAyICogb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkgPyBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaSkgOiBOYU47CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5UaGlzIGlzIGNhbGxlZCB3aGVuIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4uIEl0IHdpbGwKCSAgICAgKiBjcm9zcyBjaGVjayB3aXRoIGEgdmVydGljYWwgc2NhbiwgYW5kIGlmIHN1Y2Nlc3NmdWwsIHdpbGwgc2VlIGlmIHRoaXMgcGF0dGVybiBoYWQgYmVlbgoJICAgICAqIGZvdW5kIG9uIGEgcHJldmlvdXMgaG9yaXpvbnRhbCBzY2FuLiBJZiBzbywgd2UgY29uc2lkZXIgaXQgY29uZmlybWVkIGFuZCBjb25jbHVkZSB3ZSBoYXZlCgkgICAgICogZm91bmQgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGF0ZUNvdW50IHJlYWRpbmcgc3RhdGUgbW9kdWxlIGNvdW50cyBmcm9tIGhvcml6b250YWwgc2NhbgoJICAgICAqIEBwYXJhbSBpIHJvdyB3aGVyZSBhbGlnbm1lbnQgcGF0dGVybiBtYXkgYmUgZm91bmQKCSAgICAgKiBAcGFyYW0gaiBlbmQgb2YgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4gaW4gcm93CgkgICAgICogQHJldHVybiB7QGxpbmsgQWxpZ25tZW50UGF0dGVybn0gaWYgd2UgaGF2ZSBmb3VuZCB0aGUgc2FtZSBwYXR0ZXJuIHR3aWNlLCBvciBudWxsIGlmIG5vdAoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmhhbmRsZVBvc3NpYmxlQ2VudGVyID0gZnVuY3Rpb24gKHN0YXRlQ291bnQsIGkgLyppbnQqLywgaiAvKmludCovKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICB2YXIgY2VudGVySiA9IEFsaWdubWVudFBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKTsKCSAgICAgICAgdmFyIGNlbnRlckkgPSB0aGlzLmNyb3NzQ2hlY2tWZXJ0aWNhbChpLCAvKihpbnQpICovIGNlbnRlckosIDIgKiBzdGF0ZUNvdW50WzFdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IChzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0pIC8gMy4wOwoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzJDEodGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICAgICAgLy8gTG9vayBmb3IgYWJvdXQgdGhlIHNhbWUgY2VudGVyIGFuZCBtb2R1bGUgc2l6ZToKCSAgICAgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5hYm91dEVxdWFscyhlc3RpbWF0ZWRNb2R1bGVTaXplLCBjZW50ZXJJLCBjZW50ZXJKKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNlbnRlci5jb21iaW5lRXN0aW1hdGUoY2VudGVySSwgY2VudGVySiwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBIYWRuJ3QgZm91bmQgdGhpcyBiZWZvcmU7IHNhdmUgaXQKCSAgICAgICAgICAgIHZhciBwb2ludCA9IG5ldyBBbGlnbm1lbnRQYXR0ZXJuXzEuZGVmYXVsdChjZW50ZXJKLCBjZW50ZXJJLCBlc3RpbWF0ZWRNb2R1bGVTaXplKTsKCSAgICAgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzLnB1c2gocG9pbnQpOwoJICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjay5mb3VuZFBvc3NpYmxlUmVzdWx0UG9pbnQocG9pbnQpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgcmV0dXJuIEFsaWdubWVudFBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJQWxpZ25tZW50UGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyOwoKCXZhciBGaW5kZXJQYXR0ZXJuRmluZGVyJDEgPSB7fTsKCgl2YXIgRmluZGVyUGF0dGVybiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRmluZGVyUGF0dGVybiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZXRlY3RvciB7Ki8KCXZhciBSZXN1bHRQb2ludF8xJDIgPSBSZXN1bHRQb2ludCQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBmaW5kZXIgcGF0dGVybiwgd2hpY2ggYXJlIHRoZSB0aHJlZSBzcXVhcmUgcGF0dGVybnMgZm91bmQgaW4KCSAqIHRoZSBjb3JuZXJzIG9mIFFSIENvZGVzLiBJdCBhbHNvIGVuY2Fwc3VsYXRlcyBhIGNvdW50IG9mIHNpbWlsYXIgZmluZGVyIHBhdHRlcm5zLAoJICogYXMgYSBjb252ZW5pZW5jZSB0byB0aGUgZmluZGVyJ3MgYm9va2tlZXBpbmcuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBGaW5kZXJQYXR0ZXJuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyhGaW5kZXJQYXR0ZXJuLCBfc3VwZXIpOwoJICAgIC8vIEZpbmRlclBhdHRlcm4ocG9zWDogbnVtYmVyLypmbG9hdCovLCBwb3NZOiBudW1iZXIvKmZsb2F0Ki8sIGVzdGltYXRlZE1vZHVsZVNpemU6IG51bWJlci8qZmxvYXQqLykgewoJICAgIC8vICAgdGhpcyhwb3NYLCBwb3NZLCBlc3RpbWF0ZWRNb2R1bGVTaXplLCAxKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBGaW5kZXJQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8sIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIF90aGlzLmNvdW50ID0gY291bnQ7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNvdW50KSB7CgkgICAgICAgICAgICBfdGhpcy5jb3VudCA9IDE7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybi5wcm90b3R5cGUuZ2V0Q291bnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvdW50OwoJICAgIH07CgkgICAgLyoKCSAgICB2b2lkIGluY3JlbWVudENvdW50KCkgewoJICAgICAgdGhpcy5jb3VudCsrCgkgICAgfQoJICAgICAqLwoJICAgIC8qKgoJICAgICAqIDxwPkRldGVybWluZXMgaWYgdGhpcyBmaW5kZXIgcGF0dGVybiAiYWJvdXQgZXF1YWxzIiBhIGZpbmRlciBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhIHdlaWdodGVkIGF2ZXJhZ2UKCSAgICAgKiBiYXNlZCBvbiBjb3VudC4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5jb21iaW5lRXN0aW1hdGUgPSBmdW5jdGlvbiAoaSAvKmZsb2F0Ki8sIGogLypmbG9hdCovLCBuZXdNb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgY29tYmluZWRDb3VudCA9IHRoaXMuY291bnQgKyAxOwoJICAgICAgICB2YXIgY29tYmluZWRYID0gKHRoaXMuY291bnQgKiB0aGlzLmdldFgoKSArIGopIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgdmFyIGNvbWJpbmVkWSA9ICh0aGlzLmNvdW50ICogdGhpcy5nZXRZKCkgKyBpKSAvIGNvbWJpbmVkQ291bnQ7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5jb3VudCAqIHRoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSArIG5ld01vZHVsZVNpemUpIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgcmV0dXJuIG5ldyBGaW5kZXJQYXR0ZXJuKGNvbWJpbmVkWCwgY29tYmluZWRZLCBjb21iaW5lZE1vZHVsZVNpemUsIGNvbWJpbmVkQ291bnQpOwoJICAgIH07CgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm47Cgl9KFJlc3VsdFBvaW50XzEkMi5kZWZhdWx0KSk7CglGaW5kZXJQYXR0ZXJuJDEuZGVmYXVsdCA9IEZpbmRlclBhdHRlcm47CgoJdmFyIEZpbmRlclBhdHRlcm5JbmZvJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5JbmZvJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGluZm9ybWF0aW9uIGFib3V0IGZpbmRlciBwYXR0ZXJucyBpbiBhbiBpbWFnZSwgaW5jbHVkaW5nIHRoZSBsb2NhdGlvbiBvZgoJICogdGhlIHRocmVlIGZpbmRlciBwYXR0ZXJucywgYW5kIHRoZWlyIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5JbmZvID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZpbmRlclBhdHRlcm5JbmZvKHBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHRoaXMuYm90dG9tTGVmdCA9IHBhdHRlcm5DZW50ZXJzWzBdOwoJICAgICAgICB0aGlzLnRvcExlZnQgPSBwYXR0ZXJuQ2VudGVyc1sxXTsKCSAgICAgICAgdGhpcy50b3BSaWdodCA9IHBhdHRlcm5DZW50ZXJzWzJdOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuSW5mby5wcm90b3R5cGUuZ2V0Qm90dG9tTGVmdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYm90dG9tTGVmdDsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5JbmZvLnByb3RvdHlwZS5nZXRUb3BMZWZ0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BMZWZ0OwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkluZm8ucHJvdG90eXBlLmdldFRvcFJpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BSaWdodDsKCSAgICB9OwoJICAgIHJldHVybiBGaW5kZXJQYXR0ZXJuSW5mbzsKCX0oKSk7CglGaW5kZXJQYXR0ZXJuSW5mbyQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuSW5mbzsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5GaW5kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQyID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBSZXN1bHRQb2ludF8xJDEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIEZpbmRlclBhdHRlcm5fMSA9IEZpbmRlclBhdHRlcm4kMTsKCXZhciBGaW5kZXJQYXR0ZXJuSW5mb18xID0gRmluZGVyUGF0dGVybkluZm8kMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDIgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyppbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbXBhcmF0b3I7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBmaW5kZXIgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBGaW5kZXIgcGF0dGVybnMgYXJlIHRoZSBzcXVhcmUKCSAqIG1hcmtlcnMgYXQgdGhyZWUgY29ybmVycyBvZiBhIFFSIENvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5GaW5kZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogPHA+Q3JlYXRlcyBhIGZpbmRlciB0aGF0IHdpbGwgc2VhcmNoIHRoZSBpbWFnZSBmb3IgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBpbWFnZSBpbWFnZSB0byBzZWFyY2gKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoaW1hZ2U6IEJpdE1hdHJpeCkgewoJICAgIC8vICAgdGhpcyhpbWFnZSwgbnVsbCkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRmluZGVyUGF0dGVybkZpbmRlcihpbWFnZSwgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayA9IHJlc3VsdFBvaW50Q2FsbGJhY2s7CgkgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzID0gW107CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSg1KTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICB9CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmltYWdlOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0UG9zc2libGVDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKGhpbnRzKSB7CgkgICAgICAgIHZhciB0cnlIYXJkZXIgPSAoaGludHMgIT09IG51bGwgJiYgaGludHMgIT09IHVuZGVmaW5lZCkgJiYgdW5kZWZpbmVkICE9PSBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQyLmRlZmF1bHQuVFJZX0hBUkRFUik7CgkgICAgICAgIHZhciBwdXJlQmFyY29kZSA9IChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkKSAmJiB1bmRlZmluZWQgIT09IGhpbnRzLmdldChEZWNvZGVIaW50VHlwZV8xJDIuZGVmYXVsdC5QVVJFX0JBUkNPREUpOwoJICAgICAgICB2YXIgaW1hZ2UgPSB0aGlzLmltYWdlOwoJICAgICAgICB2YXIgbWF4SSA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgbWF4SiA9IGltYWdlLmdldFdpZHRoKCk7CgkgICAgICAgIC8vIFdlIGFyZSBsb29raW5nIGZvciBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIGluCgkgICAgICAgIC8vIDE6MTozOjE6MSByYXRpbzsgdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBzdWNoIG1vZHVsZXMgc2VlbiBzbyBmYXIKCSAgICAgICAgLy8gTGV0J3MgYXNzdW1lIHRoYXQgdGhlIG1heGltdW0gdmVyc2lvbiBRUiBDb2RlIHdlIHN1cHBvcnQgdGFrZXMgdXAgMS80IHRoZSBoZWlnaHQgb2YgdGhlCgkgICAgICAgIC8vIGltYWdlLCBhbmQgdGhlbiBhY2NvdW50IGZvciB0aGUgY2VudGVyIGJlaW5nIDMgbW9kdWxlcyBpbiBzaXplLiBUaGlzIGdpdmVzIHRoZSBzbWFsbGVzdAoJICAgICAgICAvLyBudW1iZXIgb2YgcGl4ZWxzIHRoZSBjZW50ZXIgY291bGQgYmUsIHNvIHNraXAgdGhpcyBvZnRlbi4gV2hlbiB0cnlpbmcgaGFyZGVyLCBsb29rIGZvciBhbGwKCSAgICAgICAgLy8gUVIgdmVyc2lvbnMgcmVnYXJkbGVzcyBvZiBob3cgZGVuc2UgdGhleSBhcmUuCgkgICAgICAgIHZhciBpU2tpcCA9IE1hdGguZmxvb3IoKDMgKiBtYXhJKSAvICg0ICogRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUykpOwoJICAgICAgICBpZiAoaVNraXAgPCBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQIHx8IHRyeUhhcmRlcikgewoJICAgICAgICAgICAgaVNraXAgPSBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkb25lID0gZmFsc2U7CgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoNSk7CgkgICAgICAgIGZvciAodmFyIGkgPSBpU2tpcCAtIDE7IGkgPCBtYXhJICYmICFkb25lOyBpICs9IGlTa2lwKSB7CgkgICAgICAgICAgICAvLyBHZXQgYSByb3cgb2YgYmxhY2svd2hpdGUgdmFsdWVzCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0gPSAwOwoJICAgICAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IDA7CgkgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1heEo7IGorKykgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMSkgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMCkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U3RhdGUgPT09IDQpIHsgLy8gQSB3aW5uZXI/CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsgLy8gWWVzCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIGosIHB1cmVCYXJjb2RlKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgZXhhbWluaW5nIGV2ZXJ5IG90aGVyIGxpbmUuIENoZWNraW5nIGVhY2ggbGluZSB0dXJuZWQgb3V0IHRvIGJlIHRvbwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhwZW5zaXZlIGFuZCBkaWRuJ3QgaW1wcm92ZSBwZXJmb3JtYW5jZS4KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlTa2lwID0gMjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQgPT09IHRydWUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93U2tpcCA9IHRoaXMuZmluZFJvd1NraXAoKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93U2tpcCA+IHN0YXRlQ291bnRbMl0pIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCByb3dzIGJldHdlZW4gcm93IG9mIGxvd2VyIGNvbmZpcm1lZCBjZW50ZXIKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRvcCBvZiBwcmVzdW1lZCB0aGlyZCBjb25maXJtZWQgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBiYWNrIHVwIGEgYml0IHRvIGdldCBhIGZ1bGwgY2hhbmNlIG9mIGRldGVjdGluZwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCwgZW50aXJlIHdpZHRoIG9mIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIGJ5IHJvd1NraXAsIGJ1dCBiYWNrIG9mZiBieSBzdGF0ZUNvdW50WzJdIChzaXplIG9mIGxhc3QgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIHBhdHRlcm4gd2Ugc2F3KSB0byBiZSBjb25zZXJ2YXRpdmUsIGFuZCBhbHNvIGJhY2sgb2ZmIGJ5IGlTa2lwIHdoaWNoCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIGFib3V0IHRvIGJlIHJlLWFkZGVkCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gcm93U2tpcCAtIHN0YXRlQ291bnRbMl0gLSBpU2tpcDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaiA9IG1heEogLSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IHN0YXRlQ291bnRbM107CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gc3RhdGVDb3VudFs0XTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAzOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgc3RhdGUgdG8gc3RhcnQgbG9va2luZyBhZ2FpbgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBObywgc2hpZnQgY291bnRzIGJhY2sgYnkgdHdvCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gc3RhdGVDb3VudFszXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IHN0YXRlQ291bnRbNF07CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlID0gMzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WysrY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBtYXhKLCBwdXJlQmFyY29kZSk7CgkgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICBpU2tpcCA9IHN0YXRlQ291bnRbMF07CgkgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGEgdGhpcmQgb25lCgkgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBhdHRlcm5JbmZvID0gdGhpcy5zZWxlY3RCZXN0UGF0dGVybnMoKTsKCSAgICAgICAgUmVzdWx0UG9pbnRfMSQxLmRlZmF1bHQub3JkZXJCZXN0UGF0dGVybnMocGF0dGVybkluZm8pOwoJICAgICAgICByZXR1cm4gbmV3IEZpbmRlclBhdHRlcm5JbmZvXzEuZGVmYXVsdChwYXR0ZXJuSW5mbyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBHaXZlbiBhIGNvdW50IG9mIGJsYWNrL3doaXRlL2JsYWNrL3doaXRlL2JsYWNrIHBpeGVscyBqdXN0IHNlZW4gYW5kIGFuIGVuZCBwb3NpdGlvbiwKCSAgICAgKiBmaWd1cmVzIHRoZSBsb2NhdGlvbiBvZiB0aGUgY2VudGVyIG9mIHRoaXMgcnVuLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZCA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBlbmQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gKGVuZCAtIHN0YXRlQ291bnRbNF0gLSBzdGF0ZUNvdW50WzNdKSAtIHN0YXRlQ291bnRbMl0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8zLzEvMSByYXRpb3MKCSAgICAgKiAgICAgICAgIHVzZWQgYnkgZmluZGVyIHBhdHRlcm5zIHRvIGJlIGNvbnNpZGVyZWQgYSBtYXRjaAoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHsKCSAgICAgICAgICAgIHZhciBjb3VudCA9IHN0YXRlQ291bnRbaV07CgkgICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gY291bnQ7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvdGFsTW9kdWxlU2l6ZSA8IDcpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIDcuMDsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgLy8gQWxsb3cgbGVzcyB0aGFuIDUwJSB2YXJpYW5jZSBmcm9tIDEtMS0zLTEtMSBwcm9wb3J0aW9ucwoJICAgICAgICByZXR1cm4gTWF0aC5hYnMobW9kdWxlU2l6ZSAtIHN0YXRlQ291bnRbMF0pIDwgbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzFdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicygzLjAgKiBtb2R1bGVTaXplIC0gc3RhdGVDb3VudFsyXSkgPCAzICogbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzNdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFs0XSkgPCBtYXhWYXJpYW5jZTsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgY3Jvc3NDaGVja1N0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFswXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzFdID0gMDsKCSAgICAgICAgY3Jvc3NDaGVja1N0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFszXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgcmV0dXJuIGNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQWZ0ZXIgYSB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jcm9zcy1jcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gZGlhZ29uYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnRJIHJvdyB3aGVyZSBhIGZpbmRlciBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYSBmaW5kZXIgcGF0dGVybgoJICAgICAqIEBwYXJhbSBtYXhDb3VudCBtYXhpbXVtIHJlYXNvbmFibGUgbnVtYmVyIG9mIG1vZHVsZXMgdGhhdCBzaG91bGQgYmUKCSAgICAgKiAgb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcGFyYW0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgVGhlIG9yaWdpbmFsIHN0YXRlIGNvdW50IHRvdGFsLgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBwcm9wb3J0aW9ucyBhcmUgd2l0aGluZyBleHBlY3RlZCBsaW1pdHMKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrRGlhZ29uYWwgPSBmdW5jdGlvbiAoc3RhcnRJIC8qaW50Ki8sIGNlbnRlckogLyppbnQqLywgbWF4Q291bnQgLyppbnQqLywgb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgLyppbnQqLykgewoJICAgICAgICB2YXIgc3RhdGVDb3VudCA9IHRoaXMuZ2V0Q3Jvc3NDaGVja1N0YXRlQ291bnQoKTsKCSAgICAgICAgLy8gU3RhcnQgY291bnRpbmcgdXAsIGxlZnQgZnJvbSBjZW50ZXIgZmluZGluZyBibGFjayBjZW50ZXIgbWFzcwoJICAgICAgICB2YXIgaSA9IDA7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHdoaWxlIChzdGFydEkgPj0gaSAmJiBjZW50ZXJKID49IGkgJiYgaW1hZ2UuZ2V0KGNlbnRlckogLSBpLCBzdGFydEkgLSBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgPCBpIHx8IGNlbnRlckogPCBpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyB3aGl0ZSBzcGFjZQoJICAgICAgICB3aGlsZSAoc3RhcnRJID49IGkgJiYgY2VudGVySiA+PSBpICYmICFpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgYWxyZWFkeSB0b28gbWFueSBtb2R1bGVzIGluIHRoaXMgc3RhdGUgb3IgcmFuIG9mZiB0aGUgZWRnZToKCSAgICAgICAgaWYgKHN0YXJ0SSA8IGkgfHwgY2VudGVySiA8IGkgfHwgc3RhdGVDb3VudFsxXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyBibGFjayBib3JkZXIKCSAgICAgICAgd2hpbGUgKHN0YXJ0SSA+PSBpICYmIGNlbnRlckogPj0gaSAmJiBpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMF0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtYXhJID0gaW1hZ2UuZ2V0SGVpZ2h0KCk7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biwgcmlnaHQgZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IDE7CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgaW1hZ2UuZ2V0KGNlbnRlckogKyBpLCBzdGFydEkgKyBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJhbiBvZmYgdGhlIGVkZ2U/CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgIWltYWdlLmdldChjZW50ZXJKICsgaSwgc3RhcnRJICsgaSkgJiYKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKHN0YXJ0SSArIGkgPCBtYXhJICYmIGNlbnRlckogKyBpIDwgbWF4SiAmJiBpbWFnZS5nZXQoY2VudGVySiArIGksIHN0YXJ0SSArIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGZvdW5kIGEgZmluZGVyLXBhdHRlcm4tbGlrZSBzZWN0aW9uLCBidXQgaXRzIHNpemUgaXMgbW9yZSB0aGFuIDEwMCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgcmV0dXJuIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA8IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAmJgoJICAgICAgICAgICAgRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkFmdGVyIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gdmVydGljYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXJ0SSByb3cgd2hlcmUgYSBmaW5kZXIgcGF0dGVybiB3YXMgZGV0ZWN0ZWQKCSAgICAgKiBAcGFyYW0gY2VudGVySiBjZW50ZXIgb2YgdGhlIHNlY3Rpb24gdGhhdCBhcHBlYXJzIHRvIGNyb3NzIGEgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIC8vIFN0YXJ0IGNvdW50aW5nIHVwIGZyb20gY2VudGVyCgkgICAgICAgIHZhciBpID0gc3RhcnRJOwoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmICFpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biBmcm9tIGNlbnRlcgoJICAgICAgICBpID0gc3RhcnRJICsgMTsKCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJKSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbM10gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB3ZSBmb3VuZCBhIGZpbmRlci1wYXR0ZXJuLWxpa2Ugc2VjdGlvbiwgYnV0IGl0cyBzaXplIGlzIG1vcmUgdGhhbiA0MCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF07CgkgICAgICAgIGlmICg1ICogTWF0aC5hYnMoc3RhdGVDb3VudFRvdGFsIC0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpID49IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBpKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkxpa2Uge0BsaW5rICNjcm9zc0NoZWNrVmVydGljYWwoaW50LCBpbnQsIGludCwgaW50KX0sIGFuZCBpbiBmYWN0IGlzIGJhc2ljYWxseSBpZGVudGljYWwsCgkgICAgICogZXhjZXB0IGl0IHJlYWRzIGhvcml6b250YWxseSBpbnN0ZWFkIG9mIHZlcnRpY2FsbHkuIFRoaXMgaXMgdXNlZCB0byBjcm9zcy1jcm9zcwoJICAgICAqIGNoZWNrIGEgdmVydGljYWwgY3Jvc3MgY2hlY2sgYW5kIGxvY2F0ZSB0aGUgcmVhbCBjZW50ZXIgb2YgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrSG9yaXpvbnRhbCA9IGZ1bmN0aW9uIChzdGFydEogLyppbnQqLywgY2VudGVySSAvKmludCovLCBtYXhDb3VudCAvKmludCovLCBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAvKmludCovKSB7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIHZhciBqID0gc3RhcnRKOwoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmIGltYWdlLmdldChqLCBjZW50ZXJJKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmICFpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGogPj0gMCAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgaiA9IHN0YXJ0SiArIDE7CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMl0rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA8IG1heEogJiYgIWltYWdlLmdldChqLCBjZW50ZXJJKSAmJiBzdGF0ZUNvdW50WzNdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFs0XSA8IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdKys7CgkgICAgICAgICAgICBqKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbNF0gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgd2UgZm91bmQgYSBmaW5kZXItcGF0dGVybi1saWtlIHNlY3Rpb24sIGJ1dCBpdHMgc2l6ZSBpcyBzaWduaWZpY2FudGx5IGRpZmZlcmVudCB0aGFuCgkgICAgICAgIC8vIHRoZSBvcmlnaW5hbCwgYXNzdW1lIGl0J3MgYSBmYWxzZSBwb3NpdGl2ZQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdICsgc3RhdGVDb3VudFszXSArCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgaXMgY2FsbGVkIHdoZW4gYSBob3Jpem9udGFsIHNjYW4gZmluZHMgYSBwb3NzaWJsZSBhbGlnbm1lbnQgcGF0dGVybi4gSXQgd2lsbAoJICAgICAqIGNyb3NzIGNoZWNrIHdpdGggYSB2ZXJ0aWNhbCBzY2FuLCBhbmQgaWYgc3VjY2Vzc2Z1bCwgd2lsbCwgYWgsIGNyb3NzLWNyb3NzLWNoZWNrCgkgICAgICogd2l0aCBhbm90aGVyIGhvcml6b250YWwgc2Nhbi4gVGhpcyBpcyBuZWVkZWQgcHJpbWFyaWx5IHRvIGxvY2F0ZSB0aGUgcmVhbCBob3Jpem9udGFsCgkgICAgICogY2VudGVyIG9mIHRoZSBwYXR0ZXJuIGluIGNhc2VzIG9mIGV4dHJlbWUgc2tldy4KCSAgICAgKiBBbmQgdGhlbiB3ZSBjcm9zcy1jcm9zcy1jcm9zcyBjaGVjayB3aXRoIGFub3RoZXIgZGlhZ29uYWwgc2Nhbi48L3A+CgkgICAgICoKCSAgICAgKiA8cD5JZiB0aGF0IHN1Y2NlZWRzIHRoZSBmaW5kZXIgcGF0dGVybiBsb2NhdGlvbiBpcyBhZGRlZCB0byBhIGxpc3QgdGhhdCB0cmFja3MKCSAgICAgKiB0aGUgbnVtYmVyIG9mIHRpbWVzIGVhY2ggbG9jYXRpb24gaGFzIGJlZW4gbmVhcmx5LW1hdGNoZWQgYXMgYSBmaW5kZXIgcGF0dGVybi4KCSAgICAgKiBFYWNoIGFkZGl0aW9uYWwgZmluZCBpcyBtb3JlIGV2aWRlbmNlIHRoYXQgdGhlIGxvY2F0aW9uIGlzIGluIGZhY3QgYSBmaW5kZXIKCSAgICAgKiBwYXR0ZXJuIGNlbnRlcgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXRlQ291bnQgcmVhZGluZyBzdGF0ZSBtb2R1bGUgY291bnRzIGZyb20gaG9yaXpvbnRhbCBzY2FuCgkgICAgICogQHBhcmFtIGkgcm93IHdoZXJlIGZpbmRlciBwYXR0ZXJuIG1heSBiZSBmb3VuZAoJICAgICAqIEBwYXJhbSBqIGVuZCBvZiBwb3NzaWJsZSBmaW5kZXIgcGF0dGVybiBpbiByb3cKCSAgICAgKiBAcGFyYW0gcHVyZUJhcmNvZGUgdHJ1ZSBpZiBpbiAicHVyZSBiYXJjb2RlIiBtb2RlCgkgICAgICogQHJldHVybiB0cnVlIGlmIGEgZmluZGVyIHBhdHRlcm4gY2FuZGlkYXRlIHdhcyBmb3VuZCB0aGlzIHRpbWUKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYW5kbGVQb3NzaWJsZUNlbnRlciA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBpIC8qaW50Ki8sIGogLyppbnQqLywgcHVyZUJhcmNvZGUpIHsKCSAgICAgICAgdmFyIHN0YXRlQ291bnRUb3RhbCA9IHN0YXRlQ291bnRbMF0gKyBzdGF0ZUNvdW50WzFdICsgc3RhdGVDb3VudFsyXSArIHN0YXRlQ291bnRbM10gKwoJICAgICAgICAgICAgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgdmFyIGNlbnRlckogPSBGaW5kZXJQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaik7CgkgICAgICAgIHZhciBjZW50ZXJJID0gdGhpcy5jcm9zc0NoZWNrVmVydGljYWwoaSwgLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCBzdGF0ZUNvdW50WzJdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICAvLyBSZS1jcm9zcyBjaGVjawoJICAgICAgICAgICAgY2VudGVySiA9IHRoaXMuY3Jvc3NDaGVja0hvcml6b250YWwoLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCAvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIHN0YXRlQ291bnRbMl0sIHN0YXRlQ291bnRUb3RhbCk7CgkgICAgICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckopICYmCgkgICAgICAgICAgICAgICAgKCFwdXJlQmFyY29kZSB8fCB0aGlzLmNyb3NzQ2hlY2tEaWFnb25hbCgvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIC8qKGludCkgKi8gTWF0aC5mbG9vcihjZW50ZXJKKSwgc3RhdGVDb3VudFsyXSwgc3RhdGVDb3VudFRvdGFsKSkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IHN0YXRlQ291bnRUb3RhbCAvIDcuMDsKCSAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXJzID0gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwLCBsZW5ndGhfMSA9IHBvc3NpYmxlQ2VudGVycy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoXzE7IGluZGV4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IHBvc3NpYmxlQ2VudGVyc1tpbmRleF07CgkgICAgICAgICAgICAgICAgICAgIC8vIExvb2sgZm9yIGFib3V0IHRoZSBzYW1lIGNlbnRlciBhbmQgbW9kdWxlIHNpemU6CgkgICAgICAgICAgICAgICAgICAgIGlmIChjZW50ZXIuYWJvdXRFcXVhbHMoZXN0aW1hdGVkTW9kdWxlU2l6ZSwgY2VudGVySSwgY2VudGVySikpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVyc1tpbmRleF0gPSBjZW50ZXIuY29tYmluZUVzdGltYXRlKGNlbnRlckksIGNlbnRlckosIGVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBuZXcgRmluZGVyUGF0dGVybl8xLmRlZmF1bHQoY2VudGVySiwgY2VudGVySSwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5wdXNoKHBvaW50KTsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrLmZvdW5kUG9zc2libGVSZXN1bHRQb2ludChwb2ludCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2Ygcm93cyB3ZSBjb3VsZCBzYWZlbHkgc2tpcCBkdXJpbmcgc2Nhbm5pbmcsIGJhc2VkIG9uIHRoZSBmaXJzdAoJICAgICAqICAgICAgICAgdHdvIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBsb2NhdGVkLiBJbiBzb21lIGNhc2VzIHRoZWlyIHBvc2l0aW9uIHdpbGwKCSAgICAgKiAgICAgICAgIGFsbG93IHVzIHRvIGluZmVyIHRoYXQgdGhlIHRoaXJkIHBhdHRlcm4gbXVzdCBsaWUgYmVsb3cgYSBjZXJ0YWluIHBvaW50IGZhcnRoZXIKCSAgICAgKiAgICAgICAgIGRvd24gaW4gdGhlIGltYWdlLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmZpbmRSb3dTa2lwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKG1heCA8PSAxKSB7CgkgICAgICAgICAgICByZXR1cm4gMDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBudWxsOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gX2MudmFsdWU7CgkgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RDb25maXJtZWRDZW50ZXIgPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBjZW50ZXI7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHR3byBjb25maXJtZWQgY2VudGVycwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gSG93IGZhciBkb3duIGNhbiB3ZSBza2lwIGJlZm9yZSByZXN1bWluZyBsb29raW5nIGZvciB0aGUgbmV4dAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGF0dGVybj8gSW4gdGhlIHdvcnN0IGNhc2UsIG9ubHkgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpZmZlcmVuY2UgaW4gdGhlIHggLyB5IGNvb3JkaW5hdGVzIG9mIHRoZSB0d28gY2VudGVycy4KCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGNhc2Ugd2hlcmUgeW91IGZpbmQgdG9wIGxlZnQgbGFzdC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzU2tpcHBlZCA9IHRydWU7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLyooaW50KSAqLyBNYXRoLmZsb29yKChNYXRoLmFicyhmaXJzdENvbmZpcm1lZENlbnRlci5nZXRYKCkgLSBjZW50ZXIuZ2V0WCgpKSAtCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoZmlyc3RDb25maXJtZWRDZW50ZXIuZ2V0WSgpIC0gY2VudGVyLmdldFkoKSkpIC8gMik7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZmYgd2UgaGF2ZSBmb3VuZCBhdCBsZWFzdCAzIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZAoJICAgICAqICAgICAgICAgYXQgbGVhc3Qge0BsaW5rICNDRU5URVJfUVVPUlVNfSB0aW1lcyBlYWNoLCBhbmQsIHRoZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgb2YgdGhlCgkgICAgICogICAgICAgICBjYW5kaWRhdGVzIGlzICJwcmV0dHkgc2ltaWxhciIKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8yLCBfYSwgZV8zLCBfYjsKCSAgICAgICAgdmFyIGNvbmZpcm1lZENvdW50ID0gMDsKCSAgICAgICAgdmFyIHRvdGFsTW9kdWxlU2l6ZSA9IDAuMDsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9jID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZCA9IF9jLm5leHQoKTsgIV9kLmRvbmU7IF9kID0gX2MubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZC52YWx1ZTsKCSAgICAgICAgICAgICAgICBpZiAocGF0dGVybi5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBjb25maXJtZWRDb3VudCsrOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcGF0dGVybi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzJfMSkgeyBlXzIgPSB7IGVycm9yOiBlXzJfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2QgJiYgIV9kLmRvbmUgJiYgKF9hID0gX2MucmV0dXJuKSkgX2EuY2FsbChfYyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvbmZpcm1lZENvdW50IDwgMykgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIE9LLCB3ZSBoYXZlIGF0IGxlYXN0IDMgY29uZmlybWVkIGNlbnRlcnMsIGJ1dCwgaXQncyBwb3NzaWJsZSB0aGF0IG9uZSBpcyBhICJmYWxzZSBwb3NpdGl2ZSIKCSAgICAgICAgLy8gYW5kIHRoYXQgd2UgbmVlZCB0byBrZWVwIGxvb2tpbmcuIFdlIGRldGVjdCB0aGlzIGJ5IGFza2luZyBpZiB0aGUgZXN0aW1hdGVkIG1vZHVsZSBzaXplcwoJICAgICAgICAvLyB2YXJ5IHRvbyBtdWNoLiBXZSBhcmJpdHJhcmlseSBzYXkgdGhhdCB3aGVuIHRoZSB0b3RhbCBkZXZpYXRpb24gZnJvbSBhdmVyYWdlIGV4Y2VlZHMKCSAgICAgICAgLy8gNSUgb2YgdGhlIHRvdGFsIG1vZHVsZSBzaXplIGVzdGltYXRlcywgaXQncyB0b28gbXVjaC4KCSAgICAgICAgdmFyIGF2ZXJhZ2UgPSB0b3RhbE1vZHVsZVNpemUgLyBtYXg7CgkgICAgICAgIHZhciB0b3RhbERldmlhdGlvbiA9IDAuMDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9lID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZiA9IF9lLm5leHQoKTsgIV9mLmRvbmU7IF9mID0gX2UubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZi52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbERldmlhdGlvbiArPSBNYXRoLmFicyhwYXR0ZXJuLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzNfMSkgeyBlXzMgPSB7IGVycm9yOiBlXzNfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2YgJiYgIV9mLmRvbmUgJiYgKF9iID0gX2UucmV0dXJuKSkgX2IuY2FsbChfZSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMykgdGhyb3cgZV8zLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRvdGFsRGV2aWF0aW9uIDw9IDAuMDUgKiB0b3RhbE1vZHVsZVNpemU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSAzIGJlc3Qge0BsaW5rIEZpbmRlclBhdHRlcm59cyBmcm9tIG91ciBsaXN0IG9mIGNhbmRpZGF0ZXMuIFRoZSAiYmVzdCIgYXJlCgkgICAgICogICAgICAgICB0aG9zZSB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZCBhdCBsZWFzdCB7QGxpbmsgI0NFTlRFUl9RVU9SVU19IHRpbWVzLCBhbmQgd2hvc2UgbW9kdWxlCgkgICAgICogICAgICAgICBzaXplIGRpZmZlcnMgZnJvbSB0aGUgYXZlcmFnZSBhbW9uZyB0aG9zZSBwYXR0ZXJucyB0aGUgbGVhc3QKCSAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIDMgc3VjaCBmaW5kZXIgcGF0dGVybnMgZG8gbm90IGV4aXN0CgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuc2VsZWN0QmVzdFBhdHRlcm5zID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV80LCBfYSwgZV81LCBfYjsKCSAgICAgICAgdmFyIHN0YXJ0U2l6ZSA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKHN0YXJ0U2l6ZSA8IDMpIHsKCSAgICAgICAgICAgIC8vIENvdWxkbid0IGZpbmQgZW5vdWdoIGZpbmRlciBwYXR0ZXJucwoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBvc3NpYmxlQ2VudGVycyA9IHRoaXMucG9zc2libGVDZW50ZXJzOwoJICAgICAgICB2YXIgYXZlcmFnZTsKCSAgICAgICAgLy8gRmlsdGVyIG91dGxpZXIgcG9zc2liaWxpdGllcyB3aG9zZSBtb2R1bGUgc2l6ZSBpcyB0b28gZGlmZmVyZW50CgkgICAgICAgIGlmIChzdGFydFNpemUgPiAzKSB7CgkgICAgICAgICAgICAvLyBCdXQgd2UgY2FuIG9ubHkgYWZmb3JkIHRvIGRvIHNvIGlmIHdlIGhhdmUgYXQgbGVhc3QgNCBwb3NzaWJpbGl0aWVzIHRvIGNob29zZSBmcm9tCgkgICAgICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMC4wOwoJICAgICAgICAgICAgdmFyIHNxdWFyZSA9IDAuMDsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9kID0gX2MubmV4dCgpOyAhX2QuZG9uZTsgX2QgPSBfYy5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IF9kLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGNlbnRlci5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgICAgIHRvdGFsTW9kdWxlU2l6ZSArPSBzaXplOwoJICAgICAgICAgICAgICAgICAgICBzcXVhcmUgKz0gc2l6ZSAqIHNpemU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgY2F0Y2ggKGVfNF8xKSB7IGVfNCA9IHsgZXJyb3I6IGVfNF8xIH07IH0KCSAgICAgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChfZCAmJiAhX2QuZG9uZSAmJiAoX2EgPSBfYy5yZXR1cm4pKSBfYS5jYWxsKF9jKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzQpIHRocm93IGVfNC5lcnJvcjsgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYXZlcmFnZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIHN0YXJ0U2l6ZTsKCSAgICAgICAgICAgIHZhciBzdGREZXYgPSBNYXRoLnNxcnQoc3F1YXJlIC8gc3RhcnRTaXplIC0gYXZlcmFnZSAqIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzLnNvcnQoCgkgICAgICAgICAgICAvKioKCSAgICAgICAgICAgICAqIDxwPk9yZGVycyBieSBmdXJ0aGVzdCBmcm9tIGF2ZXJhZ2U8L3A+CgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIEZ1cnRoZXN0RnJvbUF2ZXJhZ2VDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICB2YXIgZEEgPSBNYXRoLmFicyhjZW50ZXIyLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgICAgIHZhciBkQiA9IE1hdGguYWJzKGNlbnRlcjEuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSk7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAtMSA6IGRBID4gZEIgPyAxIDogMDsKCSAgICAgICAgICAgIH0pOwoJICAgICAgICAgICAgdmFyIGxpbWl0ID0gTWF0aC5tYXgoMC4yICogYXZlcmFnZSwgc3RkRGV2KTsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zc2libGVDZW50ZXJzLmxlbmd0aCAmJiBwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMzsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBwb3NzaWJsZUNlbnRlcnNbaV07CgkgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHBhdHRlcm4uZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSkgPiBsaW1pdCkgewoJICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKGksIDEpOwoJICAgICAgICAgICAgICAgICAgICBpLS07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGlmIChwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMykgewoJICAgICAgICAgICAgLy8gVGhyb3cgYXdheSBhbGwgYnV0IHRob3NlIGZpcnN0IHNpemUgY2FuZGlkYXRlIHBvaW50cyB3ZSBmb3VuZC4KCSAgICAgICAgICAgIHZhciB0b3RhbE1vZHVsZVNpemUgPSAwLjA7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGZvciAodmFyIHBvc3NpYmxlQ2VudGVyc18xID0gX192YWx1ZXMocG9zc2libGVDZW50ZXJzKSwgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKTsgIXBvc3NpYmxlQ2VudGVyc18xXzEuZG9uZTsgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXIgPSBwb3NzaWJsZUNlbnRlcnNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcG9zc2libGVDZW50ZXIuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGNhdGNoIChlXzVfMSkgeyBlXzUgPSB7IGVycm9yOiBlXzVfMSB9OyB9CgkgICAgICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgICAgICBpZiAocG9zc2libGVDZW50ZXJzXzFfMSAmJiAhcG9zc2libGVDZW50ZXJzXzFfMS5kb25lICYmIChfYiA9IHBvc3NpYmxlQ2VudGVyc18xLnJldHVybikpIF9iLmNhbGwocG9zc2libGVDZW50ZXJzXzEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfNSkgdGhyb3cgZV81LmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhdmVyYWdlID0gdG90YWxNb2R1bGVTaXplIC8gcG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5zb3J0KAoJICAgICAgICAgICAgLyoqCgkgICAgICAgICAgICAgKiA8cD5PcmRlcnMgYnkge0BsaW5rIEZpbmRlclBhdHRlcm4jZ2V0Q291bnQoKX0sIGRlc2NlbmRpbmcuPC9wPgoJICAgICAgICAgICAgICovCgkgICAgICAgICAgICAvLyBDZW50ZXJDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICBpZiAoY2VudGVyMi5nZXRDb3VudCgpID09PSBjZW50ZXIxLmdldENvdW50KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRBID0gTWF0aC5hYnMoY2VudGVyMi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRCID0gTWF0aC5hYnMoY2VudGVyMS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAxIDogZEEgPiBkQiA/IC0xIDogMDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBjZW50ZXIyLmdldENvdW50KCkgLSBjZW50ZXIxLmdldENvdW50KCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSk7CgkgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKDMpOyAvLyB0aGlzIGlzIG5vdCByZWFseSBuZWNlc3NhcnkgYXMgd2Ugb25seSByZXR1cm4gZmlyc3QgMyBhbnl3YXkKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gWwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzBdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzFdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzJdCgkgICAgICAgIF07CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLkNFTlRFUl9RVU9SVU0gPSAyOwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuTUlOX1NLSVAgPSAzOyAvLyAxIHBpeGVsL21vZHVsZSB0aW1lcyAzIG1vZHVsZXMvY2VudGVyCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUyA9IDU3OyAvLyBzdXBwb3J0IHVwIHRvIHZlcnNpb24gMTAgZm9yIG1vYmlsZSBjbGllbnRzCgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJRmluZGVyUGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuRmluZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGV0ZWN0b3IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIE1hdGhVdGlsc18xID0gTWF0aFV0aWxzJDE7Cgl2YXIgRGV0ZWN0b3JSZXN1bHRfMSA9IERldGVjdG9yUmVzdWx0JDE7CgkvLyBpbXBvcnQgR3JpZFNhbXBsZXIgZnJvbSAnLi4vLi4vY29tbW9uL0dyaWRTYW1wbGVyJzsKCXZhciBHcmlkU2FtcGxlckluc3RhbmNlXzEgPSBHcmlkU2FtcGxlckluc3RhbmNlJDE7Cgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtJDE7Cgl2YXIgRGVjb2RlSGludFR5cGVfMSQxID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdFBvaW50XzEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIFZlcnNpb25fMSA9IFZlcnNpb24kMTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyXzEgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDE7Cgl2YXIgRmluZGVyUGF0dGVybkZpbmRlcl8xID0gRmluZGVyUGF0dGVybkZpbmRlciQxOwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgbG9naWMgdGhhdCBjYW4gZGV0ZWN0IGEgUVIgQ29kZSBpbiBhbiBpbWFnZSwgZXZlbiBpZiB0aGUgUVIgQ29kZQoJICogaXMgcm90YXRlZCBvciBza2V3ZWQsIG9yIHBhcnRpYWxseSBvYnNjdXJlZC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERldGVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERldGVjdG9yKGltYWdlKSB7CgkgICAgICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTsKCSAgICB9CgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5pbWFnZTsKCSAgICB9OwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5nZXRSZXN1bHRQb2ludENhbGxiYWNrID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBkZXRlY3QoKTogRGV0ZWN0b3JSZXN1bHQgLyp0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZXRlY3QobnVsbCkKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGhpbnRzIG9wdGlvbmFsIGhpbnRzIHRvIGRldGVjdG9yCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5kZXRlY3QgPSBmdW5jdGlvbiAoaGludHMpIHsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gKGhpbnRzID09PSBudWxsIHx8IGhpbnRzID09PSB1bmRlZmluZWQpID8gbnVsbCA6CgkgICAgICAgICAgICAvKihSZXN1bHRQb2ludENhbGxiYWNrKSAqLyBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQxLmRlZmF1bHQuTkVFRF9SRVNVTFRfUE9JTlRfQ0FMTEJBQ0spOwoJICAgICAgICB2YXIgZmluZGVyID0gbmV3IEZpbmRlclBhdHRlcm5GaW5kZXJfMS5kZWZhdWx0KHRoaXMuaW1hZ2UsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHZhciBpbmZvID0gZmluZGVyLmZpbmQoaGludHMpOwoJICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzRmluZGVyUGF0dGVybkluZm8oaW5mbyk7CgkgICAgfTsKCSAgICBEZXRlY3Rvci5wcm90b3R5cGUucHJvY2Vzc0ZpbmRlclBhdHRlcm5JbmZvID0gZnVuY3Rpb24gKGluZm8pIHsKCSAgICAgICAgdmFyIHRvcExlZnQgPSBpbmZvLmdldFRvcExlZnQoKTsKCSAgICAgICAgdmFyIHRvcFJpZ2h0ID0gaW5mby5nZXRUb3BSaWdodCgpOwoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IGluZm8uZ2V0Qm90dG9tTGVmdCgpOwoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMuY2FsY3VsYXRlTW9kdWxlU2l6ZSh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCk7CgkgICAgICAgIGlmIChtb2R1bGVTaXplIDwgMS4wKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ05vIHBhdHRlcm4gZm91bmQgaW4gcHJvY2Nlc3MgZmluZGVyLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkaW1lbnNpb24gPSBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHByb3Zpc2lvbmFsVmVyc2lvbiA9IFZlcnNpb25fMS5kZWZhdWx0LmdldFByb3Zpc2lvbmFsVmVyc2lvbkZvckRpbWVuc2lvbihkaW1lbnNpb24pOwoJICAgICAgICB2YXIgbW9kdWxlc0JldHdlZW5GUENlbnRlcnMgPSBwcm92aXNpb25hbFZlcnNpb24uZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpIC0gNzsKCSAgICAgICAgdmFyIGFsaWdubWVudFBhdHRlcm4gPSBudWxsOwoJICAgICAgICAvLyBBbnl0aGluZyBhYm92ZSB2ZXJzaW9uIDEgaGFzIGFuIGFsaWdubWVudCBwYXR0ZXJuCgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24uZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMoKS5sZW5ndGggPiAwKSB7CgkgICAgICAgICAgICAvLyBHdWVzcyB3aGVyZSBhICJib3R0b20gcmlnaHQiIGZpbmRlciBwYXR0ZXJuIHdvdWxkIGhhdmUgYmVlbgoJICAgICAgICAgICAgdmFyIGJvdHRvbVJpZ2h0WCA9IHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpICsgYm90dG9tTGVmdC5nZXRYKCk7CgkgICAgICAgICAgICB2YXIgYm90dG9tUmlnaHRZID0gdG9wUmlnaHQuZ2V0WSgpIC0gdG9wTGVmdC5nZXRZKCkgKyBib3R0b21MZWZ0LmdldFkoKTsKCSAgICAgICAgICAgIC8vIEVzdGltYXRlIHRoYXQgYWxpZ25tZW50IHBhdHRlcm4gaXMgY2xvc2VyIGJ5IDMgbW9kdWxlcwoJICAgICAgICAgICAgLy8gZnJvbSAiYm90dG9tIHJpZ2h0IiB0byBrbm93biB0b3AgbGVmdCBsb2NhdGlvbgoJICAgICAgICAgICAgdmFyIGNvcnJlY3Rpb25Ub1RvcExlZnQgPSAxLjAgLSAzLjAgLyBtb2R1bGVzQmV0d2VlbkZQQ2VudGVyczsKCSAgICAgICAgICAgIHZhciBlc3RBbGlnbm1lbnRYID0gLyooaW50KSAqLyBNYXRoLmZsb29yKHRvcExlZnQuZ2V0WCgpICsgY29ycmVjdGlvblRvVG9wTGVmdCAqIChib3R0b21SaWdodFggLSB0b3BMZWZ0LmdldFgoKSkpOwoJICAgICAgICAgICAgdmFyIGVzdEFsaWdubWVudFkgPSAvKihpbnQpICovIE1hdGguZmxvb3IodG9wTGVmdC5nZXRZKCkgKyBjb3JyZWN0aW9uVG9Ub3BMZWZ0ICogKGJvdHRvbVJpZ2h0WSAtIHRvcExlZnQuZ2V0WSgpKSk7CgkgICAgICAgICAgICAvLyBLaW5kIG9mIGFyYml0cmFyeSAtLSBleHBhbmQgc2VhcmNoIHJhZGl1cyBiZWZvcmUgZ2l2aW5nIHVwCgkgICAgICAgICAgICBmb3IgKHZhciBpID0gNDsgaSA8PSAxNjsgaSA8PD0gMSkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGFsaWdubWVudFBhdHRlcm4gPSB0aGlzLmZpbmRBbGlnbm1lbnRJblJlZ2lvbihtb2R1bGVTaXplLCBlc3RBbGlnbm1lbnRYLCBlc3RBbGlnbm1lbnRZLCBpKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGNhdGNoIChyZSAvKk5vdEZvdW5kRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCEocmUgaW5zdGFuY2VvZiBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHJlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIC8vIHRyeSBuZXh0IHJvdW5kCgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gSWYgd2UgZGlkbid0IGZpbmQgYWxpZ25tZW50IHBhdHRlcm4uLi4gd2VsbCB0cnkgYW55d2F5IHdpdGhvdXQgaXQKCSAgICAgICAgfQoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gRGV0ZWN0b3IuY3JlYXRlVHJhbnNmb3JtKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBhbGlnbm1lbnRQYXR0ZXJuLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgYml0cyA9IERldGVjdG9yLnNhbXBsZUdyaWQodGhpcy5pbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgcG9pbnRzOwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgcG9pbnRzID0gW2JvdHRvbUxlZnQsIHRvcExlZnQsIHRvcFJpZ2h0XTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHBvaW50cyA9IFtib3R0b21MZWZ0LCB0b3BMZWZ0LCB0b3BSaWdodCwgYWxpZ25tZW50UGF0dGVybl07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBEZXRlY3RvclJlc3VsdF8xLmRlZmF1bHQoYml0cywgcG9pbnRzKTsKCSAgICB9OwoJICAgIERldGVjdG9yLmNyZWF0ZVRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCwgYWxpZ25tZW50UGF0dGVybiwgZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGRpbU1pbnVzVGhyZWUgPSBkaW1lbnNpb24gLSAzLjU7CgkgICAgICAgIHZhciBib3R0b21SaWdodFg7IC8qZmxvYXQqLwoJICAgICAgICB2YXIgYm90dG9tUmlnaHRZOyAvKmZsb2F0Ki8KCSAgICAgICAgdmFyIHNvdXJjZUJvdHRvbVJpZ2h0WDsgLypmbG9hdCovCgkgICAgICAgIHZhciBzb3VyY2VCb3R0b21SaWdodFk7IC8qZmxvYXQqLwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiAhPT0gbnVsbCkgewoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gYWxpZ25tZW50UGF0dGVybi5nZXRYKCk7CgkgICAgICAgICAgICBib3R0b21SaWdodFkgPSBhbGlnbm1lbnRQYXR0ZXJuLmdldFkoKTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WCA9IGRpbU1pbnVzVGhyZWUgLSAzLjA7CgkgICAgICAgICAgICBzb3VyY2VCb3R0b21SaWdodFkgPSBzb3VyY2VCb3R0b21SaWdodFg7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBEb24ndCBoYXZlIGFuIGFsaWdubWVudCBwYXR0ZXJuLCBqdXN0IG1ha2UgdXAgdGhlIGJvdHRvbS1yaWdodCBwb2ludAoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gKHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpKSArIGJvdHRvbUxlZnQuZ2V0WCgpOwoJICAgICAgICAgICAgYm90dG9tUmlnaHRZID0gKHRvcFJpZ2h0LmdldFkoKSAtIHRvcExlZnQuZ2V0WSgpKSArIGJvdHRvbUxlZnQuZ2V0WSgpOwoJICAgICAgICAgICAgc291cmNlQm90dG9tUmlnaHRYID0gZGltTWludXNUaHJlZTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WSA9IGRpbU1pbnVzVGhyZWU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtXzEuZGVmYXVsdC5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsKDMuNSwgMy41LCBkaW1NaW51c1RocmVlLCAzLjUsIHNvdXJjZUJvdHRvbVJpZ2h0WCwgc291cmNlQm90dG9tUmlnaHRZLCAzLjUsIGRpbU1pbnVzVGhyZWUsIHRvcExlZnQuZ2V0WCgpLCB0b3BMZWZ0LmdldFkoKSwgdG9wUmlnaHQuZ2V0WCgpLCB0b3BSaWdodC5nZXRZKCksIGJvdHRvbVJpZ2h0WCwgYm90dG9tUmlnaHRZLCBib3R0b21MZWZ0LmdldFgoKSwgYm90dG9tTGVmdC5nZXRZKCkpOwoJICAgIH07CgkgICAgRGV0ZWN0b3Iuc2FtcGxlR3JpZCA9IGZ1bmN0aW9uIChpbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24gLyppbnQqLykgewoJICAgICAgICB2YXIgc2FtcGxlciA9IEdyaWRTYW1wbGVySW5zdGFuY2VfMS5kZWZhdWx0LmdldEluc3RhbmNlKCk7CgkgICAgICAgIHJldHVybiBzYW1wbGVyLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtKGltYWdlLCBkaW1lbnNpb24sIGRpbWVuc2lvbiwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkNvbXB1dGVzIHRoZSBkaW1lbnNpb24gKG51bWJlciBvZiBtb2R1bGVzIG9uIGEgc2l6ZSkgb2YgdGhlIFFSIENvZGUgYmFzZWQgb24gdGhlIHBvc2l0aW9uCgkgICAgICogb2YgdGhlIGZpbmRlciBwYXR0ZXJucyBhbmQgZXN0aW1hdGVkIG1vZHVsZSBzaXplLjwvcD4KCSAgICAgKi8KCSAgICBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uID0gZnVuY3Rpb24gKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdGx0ckNlbnRlcnNEaW1lbnNpb24gPSBNYXRoVXRpbHNfMS5kZWZhdWx0LnJvdW5kKFJlc3VsdFBvaW50XzEuZGVmYXVsdC5kaXN0YW5jZSh0b3BMZWZ0LCB0b3BSaWdodCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHRsYmxDZW50ZXJzRGltZW5zaW9uID0gTWF0aFV0aWxzXzEuZGVmYXVsdC5yb3VuZChSZXN1bHRQb2ludF8xLmRlZmF1bHQuZGlzdGFuY2UodG9wTGVmdCwgYm90dG9tTGVmdCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IE1hdGguZmxvb3IoKHRsdHJDZW50ZXJzRGltZW5zaW9uICsgdGxibENlbnRlcnNEaW1lbnNpb24pIC8gMikgKyA3OwoJICAgICAgICBzd2l0Y2ggKGRpbWVuc2lvbiAmIDB4MDMpIHsgLy8gbW9kIDQKCSAgICAgICAgICAgIGNhc2UgMDoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24rKzsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIC8vIDE/IGRvIG5vdGhpbmcKCSAgICAgICAgICAgIGNhc2UgMjoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24tLTsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIGNhc2UgMzoKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ0RpbWVuc2lvbnMgY291bGQgYmUgbm90IGZvdW5kLicpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBkaW1lbnNpb247CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5Db21wdXRlcyBhbiBhdmVyYWdlIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBiYXNlZCBvbiBlc3RpbWF0ZWQgZGVyaXZlZCBmcm9tIHRoZSBwb3NpdGlvbnMKCSAgICAgKiBvZiB0aGUgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB0b3BMZWZ0IGRldGVjdGVkIHRvcC1sZWZ0IGZpbmRlciBwYXR0ZXJuIGNlbnRlcgoJICAgICAqIEBwYXJhbSB0b3BSaWdodCBkZXRlY3RlZCB0b3AtcmlnaHQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHBhcmFtIGJvdHRvbUxlZnQgZGV0ZWN0ZWQgYm90dG9tLWxlZnQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHJldHVybiBlc3RpbWF0ZWQgbW9kdWxlIHNpemUKCSAgICAgKi8KCSAgICBEZXRlY3Rvci5wcm90b3R5cGUuY2FsY3VsYXRlTW9kdWxlU2l6ZSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCkgewoJICAgICAgICAvLyBUYWtlIHRoZSBhdmVyYWdlCgkgICAgICAgIHJldHVybiAodGhpcy5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5KHRvcExlZnQsIHRvcFJpZ2h0KSArCgkgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZU1vZHVsZVNpemVPbmVXYXkodG9wTGVmdCwgYm90dG9tTGVmdCkpIC8gMi4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RXN0aW1hdGVzIG1vZHVsZSBzaXplIGJhc2VkIG9uIHR3byBmaW5kZXIgcGF0dGVybnMgLS0gaXQgdXNlcwoJICAgICAqIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuQm90aFdheXMoaW50LCBpbnQsIGludCwgaW50KX0gdG8gZmlndXJlIHRoZQoJICAgICAqIHdpZHRoIG9mIGVhY2gsIG1lYXN1cmluZyBhbG9uZyB0aGUgYXhpcyBiZXR3ZWVuIHRoZWlyIGNlbnRlcnMuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5ID0gZnVuY3Rpb24gKHBhdHRlcm4sIG90aGVyUGF0dGVybikgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZUVzdDEgPSB0aGlzLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzKC8qKGludCkgKi8gTWF0aC5mbG9vcihwYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRZKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRZKCkpKTsKCSAgICAgICAgdmFyIG1vZHVsZVNpemVFc3QyID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW5Cb3RoV2F5cygvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFkoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKHBhdHRlcm4uZ2V0WSgpKSk7CgkgICAgICAgIGlmIChpc05hTihtb2R1bGVTaXplRXN0MSkpIHsKCSAgICAgICAgICAgIHJldHVybiBtb2R1bGVTaXplRXN0MiAvIDcuMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaXNOYU4obW9kdWxlU2l6ZUVzdDIpKSB7CgkgICAgICAgICAgICByZXR1cm4gbW9kdWxlU2l6ZUVzdDEgLyA3LjA7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQXZlcmFnZSB0aGVtLCBhbmQgZGl2aWRlIGJ5IDcgc2luY2Ugd2UndmUgY291bnRlZCB0aGUgd2lkdGggb2YgMyBibGFjayBtb2R1bGVzLAoJICAgICAgICAvLyBhbmQgMSB3aGl0ZSBhbmQgMSBibGFjayBtb2R1bGUgb24gZWl0aGVyIHNpZGUuIEVyZ28sIGRpdmlkZSBzdW0gYnkgMTQuCgkgICAgICAgIHJldHVybiAobW9kdWxlU2l6ZUVzdDEgKyBtb2R1bGVTaXplRXN0MikgLyAxNC4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuKGludCwgaW50LCBpbnQsIGludCl9OyBjb21wdXRlcyB0aGUgdG90YWwgd2lkdGggb2YKCSAgICAgKiBhIGZpbmRlciBwYXR0ZXJuIGJ5IGxvb2tpbmcgZm9yIGEgYmxhY2std2hpdGUtYmxhY2sgcnVuIGZyb20gdGhlIGNlbnRlciBpbiB0aGUgZGlyZWN0aW9uCgkgICAgICogb2YgYW5vdGhlciBwb2ludCAoYW5vdGhlciBmaW5kZXIgcGF0dGVybiBjZW50ZXIpLCBhbmQgaW4gdGhlIG9wcG9zaXRlIGRpcmVjdGlvbiB0b28uCgkgICAgICovCgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzID0gZnVuY3Rpb24gKGZyb21YIC8qaW50Ki8sIGZyb21ZIC8qaW50Ki8sIHRvWCAvKmludCovLCB0b1kgLyppbnQqLykgewoJICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCB0b1gsIHRvWSk7CgkgICAgICAgIC8vIE5vdyBjb3VudCBvdGhlciB3YXkgLS0gZG9uJ3QgcnVuIG9mZiBpbWFnZSB0aG91Z2ggb2YgY291cnNlCgkgICAgICAgIHZhciBzY2FsZSA9IDEuMDsKCSAgICAgICAgdmFyIG90aGVyVG9YID0gZnJvbVggLSAodG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAob3RoZXJUb1ggPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21YIC8gLyooZmxvYXQpICovIChmcm9tWCAtIG90aGVyVG9YKTsKCSAgICAgICAgICAgIG90aGVyVG9YID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWCA+PSB0aGlzLmltYWdlLmdldFdpZHRoKCkpIHsKCSAgICAgICAgICAgIHNjYWxlID0gKHRoaXMuaW1hZ2UuZ2V0V2lkdGgoKSAtIDEgLSBmcm9tWCkgLyAvKihmbG9hdCkgKi8gKG90aGVyVG9YIC0gZnJvbVgpOwoJICAgICAgICAgICAgb3RoZXJUb1ggPSB0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlclRvWSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihmcm9tWSAtICh0b1kgLSBmcm9tWSkgKiBzY2FsZSk7CgkgICAgICAgIHNjYWxlID0gMS4wOwoJICAgICAgICBpZiAob3RoZXJUb1kgPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21ZIC8gLyooZmxvYXQpICovIChmcm9tWSAtIG90aGVyVG9ZKTsKCSAgICAgICAgICAgIG90aGVyVG9ZID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWSA+PSB0aGlzLmltYWdlLmdldEhlaWdodCgpKSB7CgkgICAgICAgICAgICBzY2FsZSA9ICh0aGlzLmltYWdlLmdldEhlaWdodCgpIC0gMSAtIGZyb21ZKSAvIC8qKGZsb2F0KSAqLyAob3RoZXJUb1kgLSBmcm9tWSk7CgkgICAgICAgICAgICBvdGhlclRvWSA9IHRoaXMuaW1hZ2UuZ2V0SGVpZ2h0KCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIG90aGVyVG9YID0gLyooaW50KSAqLyBNYXRoLmZsb29yKGZyb21YICsgKG90aGVyVG9YIC0gZnJvbVgpICogc2NhbGUpOwoJICAgICAgICByZXN1bHQgKz0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCBvdGhlclRvWCwgb3RoZXJUb1kpOwoJICAgICAgICAvLyBNaWRkbGUgcGl4ZWwgaXMgZG91YmxlLWNvdW50ZWQgdGhpcyB3YXk7IHN1YnRyYWN0IDEKCSAgICAgICAgcmV0dXJuIHJlc3VsdCAtIDEuMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHRyYWNlcyBhIGxpbmUgZnJvbSBhIHBvaW50IGluIHRoZSBpbWFnZSwgaW4gdGhlIGRpcmVjdGlvbiB0b3dhcmRzIGFub3RoZXIgcG9pbnQuCgkgICAgICogSXQgYmVnaW5zIGluIGEgYmxhY2sgcmVnaW9uLCBhbmQga2VlcHMgZ29pbmcgdW50aWwgaXQgZmluZHMgd2hpdGUsIHRoZW4gYmxhY2ssIHRoZW4gd2hpdGUgYWdhaW4uCgkgICAgICogSXQgcmVwb3J0cyB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgc3RhcnQgdG8gdGhpcyBwb2ludC48L3A+CgkgICAgICoKCSAgICAgKiA8cD5UaGlzIGlzIHVzZWQgd2hlbiBmaWd1cmluZyBvdXQgaG93IHdpZGUgYSBmaW5kZXIgcGF0dGVybiBpcywgd2hlbiB0aGUgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBtYXkgYmUgc2tld2VkIG9yIHJvdGF0ZWQuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4gPSBmdW5jdGlvbiAoZnJvbVggLyppbnQqLywgZnJvbVkgLyppbnQqLywgdG9YIC8qaW50Ki8sIHRvWSAvKmludCovKSB7CgkgICAgICAgIC8vIE1pbGQgdmFyaWFudCBvZiBCcmVzZW5oYW0ncyBhbGdvcml0aG0KCSAgICAgICAgLy8gc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQnJlc2VuaGFtJ3NfbGluZV9hbGdvcml0aG0KCSAgICAgICAgdmFyIHN0ZWVwID0gTWF0aC5hYnModG9ZIC0gZnJvbVkpID4gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAoc3RlZXApIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZnJvbVg7CgkgICAgICAgICAgICBmcm9tWCA9IGZyb21ZOwoJICAgICAgICAgICAgZnJvbVkgPSB0ZW1wOwoJICAgICAgICAgICAgdGVtcCA9IHRvWDsKCSAgICAgICAgICAgIHRvWCA9IHRvWTsKCSAgICAgICAgICAgIHRvWSA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGR4ID0gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICB2YXIgZHkgPSBNYXRoLmFicyh0b1kgLSBmcm9tWSk7CgkgICAgICAgIHZhciBlcnJvciA9IC1keCAvIDI7CgkgICAgICAgIHZhciB4c3RlcCA9IGZyb21YIDwgdG9YID8gMSA6IC0xOwoJICAgICAgICB2YXIgeXN0ZXAgPSBmcm9tWSA8IHRvWSA/IDEgOiAtMTsKCSAgICAgICAgLy8gSW4gYmxhY2sgcGl4ZWxzLCBsb29raW5nIGZvciB3aGl0ZSwgZmlyc3Qgb3Igc2Vjb25kIHRpbWUuCgkgICAgICAgIHZhciBzdGF0ZSA9IDA7CgkgICAgICAgIC8vIExvb3AgdXAgdW50aWwgeCA9PSB0b1gsIGJ1dCBub3QgYmV5b25kCgkgICAgICAgIHZhciB4TGltaXQgPSB0b1ggKyB4c3RlcDsKCSAgICAgICAgZm9yICh2YXIgeCA9IGZyb21YLCB5ID0gZnJvbVk7IHggIT09IHhMaW1pdDsgeCArPSB4c3RlcCkgewoJICAgICAgICAgICAgdmFyIHJlYWxYID0gc3RlZXAgPyB5IDogeDsKCSAgICAgICAgICAgIHZhciByZWFsWSA9IHN0ZWVwID8geCA6IHk7CgkgICAgICAgICAgICAvLyBEb2VzIGN1cnJlbnQgcGl4ZWwgbWVhbiB3ZSBoYXZlIG1vdmVkIHdoaXRlIHRvIGJsYWNrIG9yIHZpY2UgdmVyc2E/CgkgICAgICAgICAgICAvLyBTY2FubmluZyBibGFjayBpbiBzdGF0ZSAwLDIgYW5kIHdoaXRlIGluIHN0YXRlIDEsIHNvIGlmIHdlIGZpbmQgdGhlIHdyb25nCgkgICAgICAgICAgICAvLyBjb2xvciwgYWR2YW5jZSB0byBuZXh0IHN0YXRlIG9yIGVuZCBpZiB3ZSBhcmUgaW4gc3RhdGUgMiBhbHJlYWR5CgkgICAgICAgICAgICBpZiAoKHN0YXRlID09PSAxKSA9PT0gdGhpcy5pbWFnZS5nZXQocmVhbFgsIHJlYWxZKSkgewoJICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMikgewoJICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aFV0aWxzXzEuZGVmYXVsdC5kaXN0YW5jZSh4LCB5LCBmcm9tWCwgZnJvbVkpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBzdGF0ZSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZXJyb3IgKz0gZHk7CgkgICAgICAgICAgICBpZiAoZXJyb3IgPiAwKSB7CgkgICAgICAgICAgICAgICAgaWYgKHkgPT09IHRvWSkgewoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgeSArPSB5c3RlcDsKCSAgICAgICAgICAgICAgICBlcnJvciAtPSBkeDsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBGb3VuZCBibGFjay13aGl0ZS1ibGFjazsgZ2l2ZSB0aGUgYmVuZWZpdCBvZiB0aGUgZG91YnQgdGhhdCB0aGUgbmV4dCBwaXhlbCBvdXRzaWRlIHRoZSBpbWFnZQoJICAgICAgICAvLyBpcyAid2hpdGUiIHNvIHRoaXMgbGFzdCBwb2ludCBhdCAodG9YK3hTdGVwLHRvWSkgaXMgdGhlIHJpZ2h0IGVuZGluZy4gVGhpcyBpcyByZWFsbHkgYQoJICAgICAgICAvLyBzbWFsbCBhcHByb3hpbWF0aW9uOyAodG9YK3hTdGVwLHRvWSt5U3RlcCkgbWlnaHQgYmUgcmVhbGx5IGNvcnJlY3QuIElnbm9yZSB0aGlzLgoJICAgICAgICBpZiAoc3RhdGUgPT09IDIpIHsKCSAgICAgICAgICAgIHJldHVybiBNYXRoVXRpbHNfMS5kZWZhdWx0LmRpc3RhbmNlKHRvWCArIHhzdGVwLCB0b1ksIGZyb21YLCBmcm9tWSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gZWxzZSB3ZSBkaWRuJ3QgZmluZCBldmVuIGJsYWNrLXdoaXRlLWJsYWNrOyBubyBlc3RpbWF0ZSBpcyByZWFsbHkgcG9zc2libGUKCSAgICAgICAgcmV0dXJuIE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkF0dGVtcHRzIHRvIGxvY2F0ZSBhbiBhbGlnbm1lbnQgcGF0dGVybiBpbiBhIGxpbWl0ZWQgcmVnaW9uIG9mIHRoZSBpbWFnZSwgd2hpY2ggaXMKCSAgICAgKiBndWVzc2VkIHRvIGNvbnRhaW4gaXQuIFRoaXMgbWV0aG9kIHVzZXMge0BsaW5rIEFsaWdubWVudFBhdHRlcm59LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBvdmVyYWxsRXN0TW9kdWxlU2l6ZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgc28gZmFyCgkgICAgICogQHBhcmFtIGVzdEFsaWdubWVudFggeCBjb29yZGluYXRlIG9mIGNlbnRlciBvZiBhcmVhIHByb2JhYmx5IGNvbnRhaW5pbmcgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gZXN0QWxpZ25tZW50WSB5IGNvb3JkaW5hdGUgb2YgYWJvdmUKCSAgICAgKiBAcGFyYW0gYWxsb3dhbmNlRmFjdG9yIG51bWJlciBvZiBwaXhlbHMgaW4gYWxsIGRpcmVjdGlvbnMgdG8gc2VhcmNoIGZyb20gdGhlIGNlbnRlcgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kLCBvciBudWxsIG90aGVyd2lzZQoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgYW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnMgZHVyaW5nIGRldGVjdGlvbgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5maW5kQWxpZ25tZW50SW5SZWdpb24gPSBmdW5jdGlvbiAob3ZlcmFsbEVzdE1vZHVsZVNpemUgLypmbG9hdCovLCBlc3RBbGlnbm1lbnRYIC8qaW50Ki8sIGVzdEFsaWdubWVudFkgLyppbnQqLywgYWxsb3dhbmNlRmFjdG9yIC8qZmxvYXQqLykgewoJICAgICAgICAvLyBMb29rIGZvciBhbiBhbGlnbm1lbnQgcGF0dGVybiAoMyBtb2R1bGVzIGluIHNpemUpIGFyb3VuZCB3aGVyZSBpdAoJICAgICAgICAvLyBzaG91bGQgYmUKCSAgICAgICAgdmFyIGFsbG93YW5jZSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihhbGxvd2FuY2VGYWN0b3IgKiBvdmVyYWxsRXN0TW9kdWxlU2l6ZSk7CgkgICAgICAgIHZhciBhbGlnbm1lbnRBcmVhTGVmdFggPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRYIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFSaWdodFggPSBNYXRoLm1pbih0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxLCBlc3RBbGlnbm1lbnRYICsgYWxsb3dhbmNlKTsKCSAgICAgICAgaWYgKGFsaWdubWVudEFyZWFSaWdodFggLSBhbGlnbm1lbnRBcmVhTGVmdFggPCBvdmVyYWxsRXN0TW9kdWxlU2l6ZSAqIDMpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgnQWxpZ25tZW50IHRvcCBleGNlZWRzIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS4nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYWxpZ25tZW50QXJlYVRvcFkgPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRZIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFCb3R0b21ZID0gTWF0aC5taW4odGhpcy5pbWFnZS5nZXRIZWlnaHQoKSAtIDEsIGVzdEFsaWdubWVudFkgKyBhbGxvd2FuY2UpOwoJICAgICAgICBpZiAoYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSA8IG92ZXJhbGxFc3RNb2R1bGVTaXplICogMykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMS5kZWZhdWx0KCdBbGlnbm1lbnQgYm90dG9tIGV4Y2VlZHMgZXN0aW1hdGVkIG1vZHVsZSBzaXplLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhbGlnbm1lbnRGaW5kZXIgPSBuZXcgQWxpZ25tZW50UGF0dGVybkZpbmRlcl8xLmRlZmF1bHQodGhpcy5pbWFnZSwgYWxpZ25tZW50QXJlYUxlZnRYLCBhbGlnbm1lbnRBcmVhVG9wWSwgYWxpZ25tZW50QXJlYVJpZ2h0WCAtIGFsaWdubWVudEFyZWFMZWZ0WCwgYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSwgb3ZlcmFsbEVzdE1vZHVsZVNpemUsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHJldHVybiBhbGlnbm1lbnRGaW5kZXIuZmluZCgpOwoJICAgIH07CgkgICAgcmV0dXJuIERldGVjdG9yOwoJfSgpKTsKCURldGVjdG9yJDEuZGVmYXVsdCA9IERldGVjdG9yOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUVJDb2RlUmVhZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlIHsqLwoJdmFyIEJhcmNvZGVGb3JtYXRfMSA9IEJhcmNvZGVGb3JtYXQkMTsKCXZhciBCaXRNYXRyaXhfMSA9IEJpdE1hdHJpeCQxOwoJdmFyIERlY29kZUhpbnRUeXBlXzEgPSBEZWNvZGVIaW50VHlwZSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdF8xID0gUmVzdWx0JDE7Cgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlXzEgPSBSZXN1bHRNZXRhZGF0YVR5cGUkMTsKCS8vIGltcG9ydCBEZXRlY3RvclJlc3VsdCBmcm9tICcuLi9jb21tb24vRGV0ZWN0b3JSZXN1bHQnOwoJdmFyIERlY29kZXJfMSA9IERlY29kZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSA9IFFSQ29kZURlY29kZXJNZXRhRGF0YSQxOwoJdmFyIERldGVjdG9yXzEgPSBEZXRlY3RvciQxOwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5NYXA7Ki8KCS8qKgoJICogVGhpcyBpbXBsZW1lbnRhdGlvbiBjYW4gZGV0ZWN0IGFuZCBkZWNvZGUgUVIgQ29kZXMgaW4gYW4gaW1hZ2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFFSQ29kZVJlYWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBRUkNvZGVSZWFkZXIoKSB7CgkgICAgICAgIHRoaXMuZGVjb2RlciA9IG5ldyBEZWNvZGVyXzEuZGVmYXVsdCgpOwoJICAgIH0KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmdldERlY29kZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBMb2NhdGVzIGFuZCBkZWNvZGVzIGEgUVIgY29kZSBpbiBhbiBpbWFnZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gYSByZXByZXNlbnRpbmc6IHN0cmluZyB0aGUgY29udGVudCBlbmNvZGVkIGJ5IHRoZSBRUiBjb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhIFFSIGNvZGUgY2Fubm90IGJlIGZvdW5kCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgYSBRUiBjb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIC8vIHB1YmxpYyBkZWNvZGUoaW1hZ2U6IEJpbmFyeUJpdG1hcCk6IFJlc3VsdCAvKnRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiwgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiAqLyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5kZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIChpbWFnZSwgaGludHMpIHsKCSAgICAgICAgdmFyIGRlY29kZXJSZXN1bHQ7CgkgICAgICAgIHZhciBwb2ludHM7CgkgICAgICAgIGlmIChoaW50cyAhPT0gdW5kZWZpbmVkICYmIGhpbnRzICE9PSBudWxsICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEuZGVmYXVsdC5QVVJFX0JBUkNPREUpKSB7CgkgICAgICAgICAgICB2YXIgYml0cyA9IFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMoaW1hZ2UuZ2V0QmxhY2tNYXRyaXgoKSk7CgkgICAgICAgICAgICBkZWNvZGVyUmVzdWx0ID0gdGhpcy5kZWNvZGVyLmRlY29kZUJpdE1hdHJpeChiaXRzLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGRldGVjdG9yUmVzdWx0ID0gbmV3IERldGVjdG9yXzEuZGVmYXVsdChpbWFnZS5nZXRCbGFja01hdHJpeCgpKS5kZXRlY3QoaGludHMpOwoJICAgICAgICAgICAgZGVjb2RlclJlc3VsdCA9IHRoaXMuZGVjb2Rlci5kZWNvZGVCaXRNYXRyaXgoZGV0ZWN0b3JSZXN1bHQuZ2V0Qml0cygpLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBkZXRlY3RvclJlc3VsdC5nZXRQb2ludHMoKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB0aGUgY29kZSB3YXMgbWlycm9yZWQ6IHN3YXAgdGhlIGJvdHRvbS1sZWZ0IGFuZCB0aGUgdG9wLXJpZ2h0IHBvaW50cy4KCSAgICAgICAgaWYgKGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKSBpbnN0YW5jZW9mIFFSQ29kZURlY29kZXJNZXRhRGF0YV8xLmRlZmF1bHQpIHsKCSAgICAgICAgICAgIGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKS5hcHBseU1pcnJvcmVkQ29ycmVjdGlvbihwb2ludHMpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgUmVzdWx0XzEuZGVmYXVsdChkZWNvZGVyUmVzdWx0LmdldFRleHQoKSwgZGVjb2RlclJlc3VsdC5nZXRSYXdCeXRlcygpLCB1bmRlZmluZWQsIHBvaW50cywgQmFyY29kZUZvcm1hdF8xLmRlZmF1bHQuUVJfQ09ERSwgdW5kZWZpbmVkKTsKCSAgICAgICAgdmFyIGJ5dGVTZWdtZW50cyA9IGRlY29kZXJSZXN1bHQuZ2V0Qnl0ZVNlZ21lbnRzKCk7CgkgICAgICAgIGlmIChieXRlU2VnbWVudHMgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkJZVEVfU0VHTUVOVFMsIGJ5dGVTZWdtZW50cyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBkZWNvZGVyUmVzdWx0LmdldEVDTGV2ZWwoKTsKCSAgICAgICAgaWYgKGVjTGV2ZWwgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwsIGVjTGV2ZWwpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChkZWNvZGVyUmVzdWx0Lmhhc1N0cnVjdHVyZWRBcHBlbmQoKSkgewoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UsIGRlY29kZXJSZXN1bHQuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyKCkpOwoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfUEFSSVRZLCBkZWNvZGVyUmVzdWx0LmdldFN0cnVjdHVyZWRBcHBlbmRQYXJpdHkoKSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBkbyBub3RoaW5nCgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBUaGlzIG1ldGhvZCBkZXRlY3RzIGEgY29kZSBpbiBhICJwdXJlIiBpbWFnZSAtLSB0aGF0IGlzLCBwdXJlIG1vbm9jaHJvbWUgaW1hZ2UKCSAgICAgKiB3aGljaCBjb250YWlucyBvbmx5IGFuIHVucm90YXRlZCwgdW5za2V3ZWQsIGltYWdlIG9mIGEgY29kZSwgd2l0aCBzb21lIHdoaXRlIGJvcmRlcgoJICAgICAqIGFyb3VuZCBpdC4gVGhpcyBpcyBhIHNwZWNpYWxpemVkIG1ldGhvZCB0aGF0IHdvcmtzIGV4Y2VwdGlvbmFsbHkgZmFzdCBpbiB0aGlzIHNwZWNpYWwKCSAgICAgKiBjYXNlLgoJICAgICAqCgkgICAgICogQHNlZSBjb20uZ29vZ2xlLnp4aW5nLmRhdGFtYXRyaXguRGF0YU1hdHJpeFJlYWRlciNleHRyYWN0UHVyZUJpdHMoQml0TWF0cml4KQoJICAgICAqLwoJICAgIFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMgPSBmdW5jdGlvbiAoaW1hZ2UpIHsKCSAgICAgICAgdmFyIGxlZnRUb3BCbGFjayA9IGltYWdlLmdldFRvcExlZnRPbkJpdCgpOwoJICAgICAgICB2YXIgcmlnaHRCb3R0b21CbGFjayA9IGltYWdlLmdldEJvdHRvbVJpZ2h0T25CaXQoKTsKCSAgICAgICAgaWYgKGxlZnRUb3BCbGFjayA9PT0gbnVsbCB8fCByaWdodEJvdHRvbUJsYWNrID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1vZHVsZVNpemUgPSB0aGlzLm1vZHVsZVNpemUobGVmdFRvcEJsYWNrLCBpbWFnZSk7CgkgICAgICAgIHZhciB0b3AgPSBsZWZ0VG9wQmxhY2tbMV07CgkgICAgICAgIHZhciBib3R0b20gPSByaWdodEJvdHRvbUJsYWNrWzFdOwoJICAgICAgICB2YXIgbGVmdCA9IGxlZnRUb3BCbGFja1swXTsKCSAgICAgICAgdmFyIHJpZ2h0ID0gcmlnaHRCb3R0b21CbGFja1swXTsKCSAgICAgICAgLy8gU2FuaXR5IGNoZWNrIQoJICAgICAgICBpZiAobGVmdCA+PSByaWdodCB8fCB0b3AgPj0gYm90dG9tKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJvdHRvbSAtIHRvcCAhPT0gcmlnaHQgLSBsZWZ0KSB7CgkgICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2UsIHdoZXJlIGJvdHRvbS1yaWdodCBtb2R1bGUgd2Fzbid0IGJsYWNrIHNvIHdlIGZvdW5kIHNvbWV0aGluZyBlbHNlIGluIHRoZSBsYXN0IHJvdwoJICAgICAgICAgICAgLy8gQXNzdW1lIGl0J3MgYSBzcXVhcmUsIHNvIHVzZSBoZWlnaHQgYXMgdGhlIHdpZHRoCgkgICAgICAgICAgICByaWdodCA9IGxlZnQgKyAoYm90dG9tIC0gdG9wKTsKCSAgICAgICAgICAgIGlmIChyaWdodCA+PSBpbWFnZS5nZXRXaWR0aCgpKSB7CgkgICAgICAgICAgICAgICAgLy8gQWJvcnQgaWYgdGhhdCB3b3VsZCBub3QgbWFrZSBzZW5zZSAtLSBvZmYgaW1hZ2UKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1hdHJpeFdpZHRoID0gTWF0aC5yb3VuZCgocmlnaHQgLSBsZWZ0ICsgMSkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIG1hdHJpeEhlaWdodCA9IE1hdGgucm91bmQoKGJvdHRvbSAtIHRvcCArIDEpIC8gbW9kdWxlU2l6ZSk7CgkgICAgICAgIGlmIChtYXRyaXhXaWR0aCA8PSAwIHx8IG1hdHJpeEhlaWdodCA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG1hdHJpeEhlaWdodCAhPT0gbWF0cml4V2lkdGgpIHsKCSAgICAgICAgICAgIC8vIE9ubHkgcG9zc2libHkgZGVjb2RlIHNxdWFyZSByZWdpb25zCgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gUHVzaCBpbiB0aGUgImJvcmRlciIgYnkgaGFsZiB0aGUgbW9kdWxlIHdpZHRoIHNvIHRoYXQgd2Ugc3RhcnQKCSAgICAgICAgLy8gc2FtcGxpbmcgaW4gdGhlIG1pZGRsZSBvZiB0aGUgbW9kdWxlLiBKdXN0IGluIGNhc2UgdGhlIGltYWdlIGlzIGEKCSAgICAgICAgLy8gbGl0dGxlIG9mZiwgdGhpcyB3aWxsIGhlbHAgcmVjb3Zlci4KCSAgICAgICAgdmFyIG51ZGdlID0gLyooaW50KSAqLyBNYXRoLmZsb29yKG1vZHVsZVNpemUgLyAyLjApOwoJICAgICAgICB0b3AgKz0gbnVkZ2U7CgkgICAgICAgIGxlZnQgKz0gbnVkZ2U7CgkgICAgICAgIC8vIEJ1dCBjYXJlZnVsIHRoYXQgdGhpcyBkb2VzIG5vdCBzYW1wbGUgb2ZmIHRoZSBlZGdlCgkgICAgICAgIC8vICJyaWdodCIgaXMgdGhlIGZhcnRoZXN0LXJpZ2h0IHZhbGlkIHBpeGVsIGxvY2F0aW9uIC0tIHJpZ2h0KzEgaXMgbm90IG5lY2Vzc2FyaWx5CgkgICAgICAgIC8vIFRoaXMgaXMgcG9zaXRpdmUgYnkgaG93IG11Y2ggdGhlIGlubmVyIHggbG9vcCBiZWxvdyB3b3VsZCBiZSB0b28gbGFyZ2UKCSAgICAgICAgdmFyIG51ZGdlZFRvb0ZhclJpZ2h0ID0gbGVmdCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4V2lkdGggLSAxKSAqIG1vZHVsZVNpemUpIC0gcmlnaHQ7CgkgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IDApIHsKCSAgICAgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsZWZ0IC09IG51ZGdlZFRvb0ZhclJpZ2h0OwoJICAgICAgICB9CgkgICAgICAgIC8vIFNlZSBsb2dpYyBhYm92ZQoJICAgICAgICB2YXIgbnVkZ2VkVG9vRmFyRG93biA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4SGVpZ2h0IC0gMSkgKiBtb2R1bGVTaXplKSAtIGJvdHRvbTsKCSAgICAgICAgaWYgKG51ZGdlZFRvb0ZhckRvd24gPiAwKSB7CgkgICAgICAgICAgICBpZiAobnVkZ2VkVG9vRmFyRG93biA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3AgLT0gbnVkZ2VkVG9vRmFyRG93bjsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cganVzdCByZWFkIG9mZiB0aGUgYml0cwoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMS5kZWZhdWx0KG1hdHJpeFdpZHRoLCBtYXRyaXhIZWlnaHQpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IG1hdHJpeEhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgaU9mZnNldCA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcih5ICogbW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1hdHJpeFdpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KGxlZnQgKyAvKihpbnQpICovIE1hdGguZmxvb3IoeCAqIG1vZHVsZVNpemUpLCBpT2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIubW9kdWxlU2l6ZSA9IGZ1bmN0aW9uIChsZWZ0VG9wQmxhY2ssIGltYWdlKSB7CgkgICAgICAgIHZhciBoZWlnaHQgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHggPSBsZWZ0VG9wQmxhY2tbMF07CgkgICAgICAgIHZhciB5ID0gbGVmdFRvcEJsYWNrWzFdOwoJICAgICAgICB2YXIgaW5CbGFjayA9IHRydWU7CgkgICAgICAgIHZhciB0cmFuc2l0aW9ucyA9IDA7CgkgICAgICAgIHdoaWxlICh4IDwgd2lkdGggJiYgeSA8IGhlaWdodCkgewoJICAgICAgICAgICAgaWYgKGluQmxhY2sgIT09IGltYWdlLmdldCh4LCB5KSkgewoJICAgICAgICAgICAgICAgIGlmICgrK3RyYW5zaXRpb25zID09PSA1KSB7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBpbkJsYWNrID0gIWluQmxhY2s7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB4Kys7CgkgICAgICAgICAgICB5Kys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHggPT09IHdpZHRoIHx8IHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiAoeCAtIGxlZnRUb3BCbGFja1swXSkgLyA3LjA7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTID0gbmV3IEFycmF5KCk7CgkgICAgcmV0dXJuIFFSQ29kZVJlYWRlcjsKCX0oKSk7Cgl2YXIgX2RlZmF1bHQgPSBRUkNvZGVSZWFkZXIkMS5kZWZhdWx0ID0gUVJDb2RlUmVhZGVyOwoKCXZhciB0b0dyYXlzY2FsZUJ1ZmZlciA9IGZ1bmN0aW9uIHRvR3JheXNjYWxlQnVmZmVyKGltYWdlQnVmZmVyLCB3aWR0aCwgaGVpZ2h0KSB7CgkgIHZhciBncmF5c2NhbGVCdWZmZXIgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkod2lkdGggKiBoZWlnaHQpOwoKCSAgZm9yICh2YXIgaSA9IDAsIGogPSAwLCBsZW5ndGhfMSA9IGltYWdlQnVmZmVyLmxlbmd0aDsgaSA8IGxlbmd0aF8xOyBpICs9IDQsIGorKykgewoJICAgIHZhciBncmF5ID0gdm9pZCAwOwoJICAgIHZhciBhbHBoYSA9IGltYWdlQnVmZmVyW2kgKyAzXTsgLy8gVGhlIGNvbG9yIG9mIGZ1bGx5LXRyYW5zcGFyZW50IHBpeGVscyBpcyBpcnJlbGV2YW50LiBUaGV5IGFyZSBvZnRlbiwgdGVjaG5pY2FsbHksIGZ1bGx5LXRyYW5zcGFyZW50CgkgICAgLy8gYmxhY2sgKDAgYWxwaGEsIGFuZCB0aGVuIDAgUkdCKS4gVGhleSBhcmUgb2Z0ZW4gdXNlZCwgb2YgY291cnNlIGFzIHRoZSAid2hpdGUiIGFyZWEgaW4gYQoJICAgIC8vIGJhcmNvZGUgaW1hZ2UuIEZvcmNlIGFueSBzdWNoIHBpeGVsIHRvIGJlIHdoaXRlOgoKCSAgICBpZiAoYWxwaGEgPT09IDApIHsKCSAgICAgIGdyYXkgPSAweEZGOwoJICAgIH0gZWxzZSB7CgkgICAgICB2YXIgcGl4ZWxSID0gaW1hZ2VCdWZmZXJbaV07CgkgICAgICB2YXIgcGl4ZWxHID0gaW1hZ2VCdWZmZXJbaSArIDFdOwoJICAgICAgdmFyIHBpeGVsQiA9IGltYWdlQnVmZmVyW2kgKyAyXTsgLy8gLjI5OVIgKyAwLjU4N0cgKyAwLjExNEIgKFlVVi9ZSVEgZm9yIFBBTCBhbmQgTlRTQyksCgkgICAgICAvLyAoMzA2KlIpID4+IDEwIGlzIGFwcHJveGltYXRlbHkgZXF1YWwgdG8gUiowLjI5OSwgYW5kIHNvIG9uLgoJICAgICAgLy8gMHgyMDAgPj4gMTAgaXMgMC41LCBpdCBpbXBsZW1lbnRzIHJvdW5kaW5nLgoKCSAgICAgIGdyYXkgPSAzMDYgKiBwaXhlbFIgKyA2MDEgKiBwaXhlbEcgKyAxMTcgKiBwaXhlbEIgKyAweDIwMCA+PiAxMDsKCSAgICB9CgoJICAgIGdyYXlzY2FsZUJ1ZmZlcltqXSA9IGdyYXk7CgkgIH0KCgkgIHJldHVybiBncmF5c2NhbGVCdWZmZXI7Cgl9OwoKCXZhciByZWFkZXIgPSBuZXcgX2RlZmF1bHQoKTsKCXNlbGYuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7CgkgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzCgkgIHRyeSB7CgkgICAgdmFyIGx1bWluYW5jZXMgPSB0b0dyYXlzY2FsZUJ1ZmZlcihlLmRhdGEuZGF0YSwgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgbHVtaW5hbmNlU291cmNlID0gbmV3IF9kZWZhdWx0JDEobHVtaW5hbmNlcywgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgaHlicmlkQmluYXJpemVyID0gbmV3IF9kZWZhdWx0JDIobHVtaW5hbmNlU291cmNlKTsKCSAgICB2YXIgYmluYXJ5Qml0bWFwID0gbmV3IF9kZWZhdWx0JDMoaHlicmlkQmluYXJpemVyKTsKCSAgICB2YXIgZGVjb2RlZCA9IHJlYWRlci5kZWNvZGUoYmluYXJ5Qml0bWFwKTsKCSAgICBwb3N0TWVzc2FnZShkZWNvZGVkKTsKCSAgfSBjYXRjaCAoZXJyKSB7CgkgICAgcG9zdE1lc3NhZ2UobnVsbCk7CgkgIH0KCX0pOwoKfSkoKTsKCg=="),Rse=["constraints","onError","onLoad","onScan","resolution","qrArea"];function BW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function RW(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BW(Object(n),!0).forEach(function(r){fe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BW(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var wse=function(){return new Bse},wW=function(t){t&&(t.getVideoTracks&&t.getAudioTracks?(t.getVideoTracks().forEach(function(n){t.removeTrack(n),n.stop()}),t.getAudioTracks().forEach(function(n){t.removeTrack(n),n.stop()})):t.stop())},N1=function(t){var n=t.constraints,r=t.onError,i=t.onLoad,o=t.onScan,a=t.resolution,l=t.qrArea,g=Wn(t,Rse),u=I.useRef(null),d=I.useRef(null),C=I.useRef(document.createElement("canvas")),f=I.useRef(null),m=I.useRef(),b=I.useState(null),p=xe(b,2),y=p[0],S=p[1],v=I.useRef(!1),B=I.useRef();I.useEffect(function(){B.current=wse();var x=B.current;return x.onmessage=function(E){o&&o(E.data?RW(RW({},E.data),{},{canvas:C.current}):null),v.current=!1},function(){x.terminate()}},[o]);var W=JSON.stringify(l),J=I.useCallback(function(){var x=JSON.parse(W),E=B.current,F=d.current&&d.current.readyState===d.current.HAVE_ENOUGH_DATA;if(!v.current&&F){v.current=!0;var w=d.current.videoWidth,V=d.current.videoHeight,Y=w>V?w:V,M=Math.floor(a/Y*100)/100;V=Math.floor(M*V),w=Math.floor(M*w),C.current.width=w,C.current.height=V,f.current=C.current.getContext("2d"),f.current.drawImage(d.current,0,0,w,V);var L;x&&x.length===2&&x[0]>0&&x[1]>0?L=f.current.getImageData(Math.floor((w-x[0])/2),Math.floor((V-x[1])/2),x[0],x[1]):L=f.current.getImageData(0,0,w,V),E.postMessage(L)}m.current=requestAnimationFrame(J)},[a,W]),H=JSON.stringify(n);return I.useEffect(function(){var x=JSON.parse(H),E=!0;return navigator.mediaDevices.getUserMedia(x).then(function(F){if(!E)wW(F);else{u.current=F;try{d.current&&(d.current.srcObject=F,d.current.setAttribute("playsinline",!0))}catch{S(window.URL.createObjectURL(F))}i&&i(),m.current=requestAnimationFrame(J)}}).catch(function(F){return E?r(F):null}),function(){cancelAnimationFrame(m.current),E=!1,wW(u.current),y&&window.URL.revokeObjectURL(y)}},[J,H,r,i,y]),I.createElement("video",lt({autoPlay:!0,playsInline:!0,src:y,ref:d},g))};N1.propTypes={constraints:qd.object,onError:qd.func.isRequired,onLoad:qd.func,onScan:qd.func.isRequired,resolution:qd.number,qrArea:qd.array};N1.defaultProps={constraints:{audio:!1,video:!0},resolution:640,qrArea:[]};const WW=({devices:e,employees:t})=>{const[r,i]=I.useState(1),[o,a]=I.useState(!0),[l,g]=I.useState(!1);I.useRef(null);const u=ru();I.useEffect(()=>{e.length>0&&a(!1)},[e]);const d=(r-1)*20,C=e.slice(d,d+20),f=(v,B)=>{u(`/devices/${v}`)},m=v=>{console.log("Editing device:",v)},b=v=>{console.log("Deleting device:",v)},p=v=>{v&&(g(!1),u(`/devices/${v.text}`))},y=v=>{console.error(v)},S=v=>{v.stopPropagation()};return ye.jsxs("div",{className:"p-4",children:[ye.jsxs("div",{className:"flex items-center justify-between h-10 mb-4",children:[ye.jsx("h2",{className:"text-xl font-semibold",children:"Devices"}),ye.jsxs("div",{children:[ye.jsx(da,{type:"default",icon:ye.jsx(QZ,{}),onClick:()=>g(!0),className:"mr-4",children:ye.jsx("span",{className:"hidden lg:block",children:"Search"})}),ye.jsx(da,{type:"default",icon:ye.jsx(Pre,{}),onClick:()=>g(!0),children:ye.jsx("span",{className:"hidden lg:block",children:"Scan QR"})})]})]}),o?ye.jsx("div",{className:"flex justify-center items-center w-full",children:ye.jsx(Jm,{size:"large"})}):ye.jsxs(ye.Fragment,{children:[ye.jsx("ul",{className:"grid grid-cols-[repeat(auto-fit,minmax(300px,1fr))] gap-4 mb-4",children:C.map(v=>{var B;return ye.jsxs("li",{className:"p-4 rounded-lg shadow-md bg-white cursor-pointer",onClick:()=>f(v.id),children:[ye.jsxs("div",{className:"flex justify-between items-center",children:[ye.jsx("strong",{children:v.name}),ye.jsx(Xm,{menu:{items:[{key:"edit",label:ye.jsxs("span",{children:[ye.jsx(Wb,{}),"Edit"]}),onClick:()=>m(v)},{key:"delete",label:ye.jsxs("span",{style:{color:"red"},children:[ye.jsx(m1,{}),"Delete"]}),onClick:()=>b(v)}]},trigger:["click"],children:ye.jsx(Tre,{className:"cursor-pointer text-md",onClick:S})})]}),ye.jsxs("div",{className:"flex mt-1 items-center",children:[ye.jsx(tse,{color:"primary",fontSize:"small"}),ye.jsx("p",{className:"text-sm ml-2 text-gray-500",children:v.short_id})]}),ye.jsxs("div",{className:"flex items-center",children:[v.status==="Allocated"?ye.jsx(ase,{color:"primary",fontSize:"small"}):ye.jsx(lse,{color:"primary",fontSize:"small"}),ye.jsx("p",{className:"text-sm ml-2 text-gray-500",children:v.status})]}),ye.jsxs("div",{className:"flex items-center",children:[ye.jsx(ise,{color:"primary",fontSize:"small"}),ye.jsx("p",{className:"text-sm ml-2 text-gray-500",children:((B=t[v.employee_id])==null?void 0:B.name)||"Unknown Employee"})]})]},v.id)})}),ye.jsx(f1,{current:r,total:e.length,pageSize:20,onChange:v=>i(v),className:"text-center",showSizeChanger:!1})]}),ye.jsx(cs,{title:"Scan QR Code",open:l,onCancel:()=>g(!1),footer:null,children:ye.jsx(N1,{delay:300,onError:y,onScan:p,style:{width:"100%"},constraints:{facingMode:{exact:"environment"}}})})]})};var Wse=Object.defineProperty,Jp=Object.getOwnPropertySymbols,GH=Object.prototype.hasOwnProperty,BH=Object.prototype.propertyIsEnumerable,VW=(e,t,n)=>t in e?Wse(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lS=(e,t)=>{for(var n in t||(t={}))GH.call(t,n)&&VW(e,n,t[n]);if(Jp)for(var n of Jp(t))BH.call(t,n)&&VW(e,n,t[n]);return e},sS=(e,t)=>{var n={};for(var r in e)GH.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&Jp)for(var r of Jp(e))t.indexOf(r)<0&&BH.call(e,r)&&(n[r]=e[r]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var ad;(e=>{const t=class Qn{constructor(g,u,d,C){if(this.version=g,this.errorCorrectionLevel=u,this.modules=[],this.isFunction=[],g<Qn.MIN_VERSION||g>Qn.MAX_VERSION)throw new RangeError("Version value out of range");if(C<-1||C>7)throw new RangeError("Mask value out of range");this.size=g*4+17;let f=[];for(let b=0;b<this.size;b++)f.push(!1);for(let b=0;b<this.size;b++)this.modules.push(f.slice()),this.isFunction.push(f.slice());this.drawFunctionPatterns();const m=this.addEccAndInterleave(d);if(this.drawCodewords(m),C==-1){let b=1e9;for(let p=0;p<8;p++){this.applyMask(p),this.drawFormatBits(p);const y=this.getPenaltyScore();y<b&&(C=p,b=y),this.applyMask(p)}}i(0<=C&&C<=7),this.mask=C,this.applyMask(C),this.drawFormatBits(C),this.isFunction=[]}static encodeText(g,u){const d=e.QrSegment.makeSegments(g);return Qn.encodeSegments(d,u)}static encodeBinary(g,u){const d=e.QrSegment.makeBytes(g);return Qn.encodeSegments([d],u)}static encodeSegments(g,u,d=1,C=40,f=-1,m=!0){if(!(Qn.MIN_VERSION<=d&&d<=C&&C<=Qn.MAX_VERSION)||f<-1||f>7)throw new RangeError("Invalid value");let b,p;for(b=d;;b++){const B=Qn.getNumDataCodewords(b,u)*8,W=a.getTotalBits(g,b);if(W<=B){p=W;break}if(b>=C)throw new RangeError("Data too long")}for(const B of[Qn.Ecc.MEDIUM,Qn.Ecc.QUARTILE,Qn.Ecc.HIGH])m&&p<=Qn.getNumDataCodewords(b,B)*8&&(u=B);let y=[];for(const B of g){n(B.mode.modeBits,4,y),n(B.numChars,B.mode.numCharCountBits(b),y);for(const W of B.getData())y.push(W)}i(y.length==p);const S=Qn.getNumDataCodewords(b,u)*8;i(y.length<=S),n(0,Math.min(4,S-y.length),y),n(0,(8-y.length%8)%8,y),i(y.length%8==0);for(let B=236;y.length<S;B^=253)n(B,8,y);let v=[];for(;v.length*8<y.length;)v.push(0);return y.forEach((B,W)=>v[W>>>3]|=B<<7-(W&7)),new Qn(b,u,v,f)}getModule(g,u){return 0<=g&&g<this.size&&0<=u&&u<this.size&&this.modules[u][g]}getModules(){return this.modules}drawFunctionPatterns(){for(let d=0;d<this.size;d++)this.setFunctionModule(6,d,d%2==0),this.setFunctionModule(d,6,d%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const g=this.getAlignmentPatternPositions(),u=g.length;for(let d=0;d<u;d++)for(let C=0;C<u;C++)d==0&&C==0||d==0&&C==u-1||d==u-1&&C==0||this.drawAlignmentPattern(g[d],g[C]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(g){const u=this.errorCorrectionLevel.formatBits<<3|g;let d=u;for(let f=0;f<10;f++)d=d<<1^(d>>>9)*1335;const C=(u<<10|d)^21522;i(C>>>15==0);for(let f=0;f<=5;f++)this.setFunctionModule(8,f,r(C,f));this.setFunctionModule(8,7,r(C,6)),this.setFunctionModule(8,8,r(C,7)),this.setFunctionModule(7,8,r(C,8));for(let f=9;f<15;f++)this.setFunctionModule(14-f,8,r(C,f));for(let f=0;f<8;f++)this.setFunctionModule(this.size-1-f,8,r(C,f));for(let f=8;f<15;f++)this.setFunctionModule(8,this.size-15+f,r(C,f));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let g=this.version;for(let d=0;d<12;d++)g=g<<1^(g>>>11)*7973;const u=this.version<<12|g;i(u>>>18==0);for(let d=0;d<18;d++){const C=r(u,d),f=this.size-11+d%3,m=Math.floor(d/3);this.setFunctionModule(f,m,C),this.setFunctionModule(m,f,C)}}drawFinderPattern(g,u){for(let d=-4;d<=4;d++)for(let C=-4;C<=4;C++){const f=Math.max(Math.abs(C),Math.abs(d)),m=g+C,b=u+d;0<=m&&m<this.size&&0<=b&&b<this.size&&this.setFunctionModule(m,b,f!=2&&f!=4)}}drawAlignmentPattern(g,u){for(let d=-2;d<=2;d++)for(let C=-2;C<=2;C++)this.setFunctionModule(g+C,u+d,Math.max(Math.abs(C),Math.abs(d))!=1)}setFunctionModule(g,u,d){this.modules[u][g]=d,this.isFunction[u][g]=!0}addEccAndInterleave(g){const u=this.version,d=this.errorCorrectionLevel;if(g.length!=Qn.getNumDataCodewords(u,d))throw new RangeError("Invalid argument");const C=Qn.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][u],f=Qn.ECC_CODEWORDS_PER_BLOCK[d.ordinal][u],m=Math.floor(Qn.getNumRawDataModules(u)/8),b=C-m%C,p=Math.floor(m/C);let y=[];const S=Qn.reedSolomonComputeDivisor(f);for(let B=0,W=0;B<C;B++){let J=g.slice(W,W+p-f+(B<b?0:1));W+=J.length;const H=Qn.reedSolomonComputeRemainder(J,S);B<b&&J.push(0),y.push(J.concat(H))}let v=[];for(let B=0;B<y[0].length;B++)y.forEach((W,J)=>{(B!=p-f||J>=b)&&v.push(W[B])});return i(v.length==m),v}drawCodewords(g){if(g.length!=Math.floor(Qn.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let u=0;for(let d=this.size-1;d>=1;d-=2){d==6&&(d=5);for(let C=0;C<this.size;C++)for(let f=0;f<2;f++){const m=d-f,p=(d+1&2)==0?this.size-1-C:C;!this.isFunction[p][m]&&u<g.length*8&&(this.modules[p][m]=r(g[u>>>3],7-(u&7)),u++)}}i(u==g.length*8)}applyMask(g){if(g<0||g>7)throw new RangeError("Mask value out of range");for(let u=0;u<this.size;u++)for(let d=0;d<this.size;d++){let C;switch(g){case 0:C=(d+u)%2==0;break;case 1:C=u%2==0;break;case 2:C=d%3==0;break;case 3:C=(d+u)%3==0;break;case 4:C=(Math.floor(d/3)+Math.floor(u/2))%2==0;break;case 5:C=d*u%2+d*u%3==0;break;case 6:C=(d*u%2+d*u%3)%2==0;break;case 7:C=((d+u)%2+d*u%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[u][d]&&C&&(this.modules[u][d]=!this.modules[u][d])}}getPenaltyScore(){let g=0;for(let f=0;f<this.size;f++){let m=!1,b=0,p=[0,0,0,0,0,0,0];for(let y=0;y<this.size;y++)this.modules[f][y]==m?(b++,b==5?g+=Qn.PENALTY_N1:b>5&&g++):(this.finderPenaltyAddHistory(b,p),m||(g+=this.finderPenaltyCountPatterns(p)*Qn.PENALTY_N3),m=this.modules[f][y],b=1);g+=this.finderPenaltyTerminateAndCount(m,b,p)*Qn.PENALTY_N3}for(let f=0;f<this.size;f++){let m=!1,b=0,p=[0,0,0,0,0,0,0];for(let y=0;y<this.size;y++)this.modules[y][f]==m?(b++,b==5?g+=Qn.PENALTY_N1:b>5&&g++):(this.finderPenaltyAddHistory(b,p),m||(g+=this.finderPenaltyCountPatterns(p)*Qn.PENALTY_N3),m=this.modules[y][f],b=1);g+=this.finderPenaltyTerminateAndCount(m,b,p)*Qn.PENALTY_N3}for(let f=0;f<this.size-1;f++)for(let m=0;m<this.size-1;m++){const b=this.modules[f][m];b==this.modules[f][m+1]&&b==this.modules[f+1][m]&&b==this.modules[f+1][m+1]&&(g+=Qn.PENALTY_N2)}let u=0;for(const f of this.modules)u=f.reduce((m,b)=>m+(b?1:0),u);const d=this.size*this.size,C=Math.ceil(Math.abs(u*20-d*10)/d)-1;return i(0<=C&&C<=9),g+=C*Qn.PENALTY_N4,i(0<=g&&g<=2568888),g}getAlignmentPatternPositions(){if(this.version==1)return[];{const g=Math.floor(this.version/7)+2,u=this.version==32?26:Math.ceil((this.version*4+4)/(g*2-2))*2;let d=[6];for(let C=this.size-7;d.length<g;C-=u)d.splice(1,0,C);return d}}static getNumRawDataModules(g){if(g<Qn.MIN_VERSION||g>Qn.MAX_VERSION)throw new RangeError("Version number out of range");let u=(16*g+128)*g+64;if(g>=2){const d=Math.floor(g/7)+2;u-=(25*d-10)*d-55,g>=7&&(u-=36)}return i(208<=u&&u<=29648),u}static getNumDataCodewords(g,u){return Math.floor(Qn.getNumRawDataModules(g)/8)-Qn.ECC_CODEWORDS_PER_BLOCK[u.ordinal][g]*Qn.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][g]}static reedSolomonComputeDivisor(g){if(g<1||g>255)throw new RangeError("Degree out of range");let u=[];for(let C=0;C<g-1;C++)u.push(0);u.push(1);let d=1;for(let C=0;C<g;C++){for(let f=0;f<u.length;f++)u[f]=Qn.reedSolomonMultiply(u[f],d),f+1<u.length&&(u[f]^=u[f+1]);d=Qn.reedSolomonMultiply(d,2)}return u}static reedSolomonComputeRemainder(g,u){let d=u.map(C=>0);for(const C of g){const f=C^d.shift();d.push(0),u.forEach((m,b)=>d[b]^=Qn.reedSolomonMultiply(m,f))}return d}static reedSolomonMultiply(g,u){if(g>>>8||u>>>8)throw new RangeError("Byte out of range");let d=0;for(let C=7;C>=0;C--)d=d<<1^(d>>>7)*285,d^=(u>>>C&1)*g;return i(d>>>8==0),d}finderPenaltyCountPatterns(g){const u=g[1];i(u<=this.size*3);const d=u>0&&g[2]==u&&g[3]==u*3&&g[4]==u&&g[5]==u;return(d&&g[0]>=u*4&&g[6]>=u?1:0)+(d&&g[6]>=u*4&&g[0]>=u?1:0)}finderPenaltyTerminateAndCount(g,u,d){return g&&(this.finderPenaltyAddHistory(u,d),u=0),u+=this.size,this.finderPenaltyAddHistory(u,d),this.finderPenaltyCountPatterns(d)}finderPenaltyAddHistory(g,u){u[0]==0&&(g+=this.size),u.pop(),u.unshift(g)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=t;function n(l,g,u){if(g<0||g>31||l>>>g)throw new RangeError("Value out of range");for(let d=g-1;d>=0;d--)u.push(l>>>d&1)}function r(l,g){return(l>>>g&1)!=0}function i(l){if(!l)throw new Error("Assertion error")}const o=class bi{constructor(g,u,d){if(this.mode=g,this.numChars=u,this.bitData=d,u<0)throw new RangeError("Invalid argument");this.bitData=d.slice()}static makeBytes(g){let u=[];for(const d of g)n(d,8,u);return new bi(bi.Mode.BYTE,g.length,u)}static makeNumeric(g){if(!bi.isNumeric(g))throw new RangeError("String contains non-numeric characters");let u=[];for(let d=0;d<g.length;){const C=Math.min(g.length-d,3);n(parseInt(g.substring(d,d+C),10),C*3+1,u),d+=C}return new bi(bi.Mode.NUMERIC,g.length,u)}static makeAlphanumeric(g){if(!bi.isAlphanumeric(g))throw new RangeError("String contains unencodable characters in alphanumeric mode");let u=[],d;for(d=0;d+2<=g.length;d+=2){let C=bi.ALPHANUMERIC_CHARSET.indexOf(g.charAt(d))*45;C+=bi.ALPHANUMERIC_CHARSET.indexOf(g.charAt(d+1)),n(C,11,u)}return d<g.length&&n(bi.ALPHANUMERIC_CHARSET.indexOf(g.charAt(d)),6,u),new bi(bi.Mode.ALPHANUMERIC,g.length,u)}static makeSegments(g){return g==""?[]:bi.isNumeric(g)?[bi.makeNumeric(g)]:bi.isAlphanumeric(g)?[bi.makeAlphanumeric(g)]:[bi.makeBytes(bi.toUtf8ByteArray(g))]}static makeEci(g){let u=[];if(g<0)throw new RangeError("ECI assignment value out of range");if(g<128)n(g,8,u);else if(g<16384)n(2,2,u),n(g,14,u);else if(g<1e6)n(6,3,u),n(g,21,u);else throw new RangeError("ECI assignment value out of range");return new bi(bi.Mode.ECI,0,u)}static isNumeric(g){return bi.NUMERIC_REGEX.test(g)}static isAlphanumeric(g){return bi.ALPHANUMERIC_REGEX.test(g)}getData(){return this.bitData.slice()}static getTotalBits(g,u){let d=0;for(const C of g){const f=C.mode.numCharCountBits(u);if(C.numChars>=1<<f)return 1/0;d+=4+f+C.bitData.length}return d}static toUtf8ByteArray(g){g=encodeURI(g);let u=[];for(let d=0;d<g.length;d++)g.charAt(d)!="%"?u.push(g.charCodeAt(d)):(u.push(parseInt(g.substring(d+1,d+3),16)),d+=2);return u}};o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let a=o;e.QrSegment=o})(ad||(ad={}));(e=>{(t=>{const n=class{constructor(i,o){this.ordinal=i,this.formatBits=o}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),t.Ecc=n})(e.QrCode||(e.QrCode={}))})(ad||(ad={}));(e=>{(t=>{const n=class{constructor(i,o){this.modeBits=i,this.numBitsCharCount=o}numCharCountBits(i){return this.numBitsCharCount[Math.floor((i+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),t.Mode=n})(e.QrSegment||(e.QrSegment={}))})(ad||(ad={}));var cI=ad;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var Vse={L:cI.QrCode.Ecc.LOW,M:cI.QrCode.Ecc.MEDIUM,Q:cI.QrCode.Ecc.QUARTILE,H:cI.QrCode.Ecc.HIGH},RH=128,wH="L",WH="#FFFFFF",VH="#000000",kH=!1,NH=1,kse=4,Nse=0,Xse=.1;function XH(e,t=0){const n=[];return e.forEach(function(r,i){let o=null;r.forEach(function(a,l){if(!a&&o!==null){n.push(`M${o+t} ${i+t}h${l-o}v1H${o+t}z`),o=null;return}if(l===r.length-1){if(!a)return;o===null?n.push(`M${l+t},${i+t} h1v1H${l+t}z`):n.push(`M${o+t},${i+t} h${l+1-o}v1H${o+t}z`);return}a&&o===null&&(o=l)})}),n.join("")}function JH(e,t){return e.slice().map((n,r)=>r<t.y||r>=t.y+t.h?n:n.map((i,o)=>o<t.x||o>=t.x+t.w?i:!1))}function Jse(e,t,n,r){if(r==null)return null;const i=e.length+n*2,o=Math.floor(t*Xse),a=i/t,l=(r.width||o)*a,g=(r.height||o)*a,u=r.x==null?e.length/2-l/2:r.x*a,d=r.y==null?e.length/2-g/2:r.y*a,C=r.opacity==null?1:r.opacity;let f=null;if(r.excavate){let b=Math.floor(u),p=Math.floor(d),y=Math.ceil(l+u-b),S=Math.ceil(g+d-p);f={x:b,y:p,w:y,h:S}}const m=r.crossOrigin;return{x:u,y:d,h:g,w:l,excavation:f,opacity:C,crossOrigin:m}}function xse(e,t){return t!=null?Math.max(Math.floor(t),0):e?kse:Nse}function xH({value:e,level:t,minVersion:n,includeMargin:r,marginSize:i,imageSettings:o,size:a,boostLevel:l}){let g=Ge.useMemo(()=>{const b=(Array.isArray(e)?e:[e]).reduce((p,y)=>(p.push(...cI.QrSegment.makeSegments(y)),p),[]);return cI.QrCode.encodeSegments(b,Vse[t],n,void 0,void 0,l)},[e,t,n,l]);const{cells:u,margin:d,numCells:C,calculatedImageSettings:f}=Ge.useMemo(()=>{let m=g.getModules();const b=xse(r,i),p=m.length+b*2,y=Jse(m,a,b,o);return{cells:m,margin:b,numCells:p,calculatedImageSettings:y}},[g,a,o,r,i]);return{qrcode:g,margin:d,cells:u,numCells:C,calculatedImageSettings:f}}var Hse=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),HH=Ge.forwardRef(function(t,n){const r=t,{value:i,size:o=RH,level:a=wH,bgColor:l=WH,fgColor:g=VH,includeMargin:u=kH,minVersion:d=NH,boostLevel:C,marginSize:f,imageSettings:m}=r,p=sS(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:y}=p,S=sS(p,["style"]),v=m==null?void 0:m.src,B=Ge.useRef(null),W=Ge.useRef(null),J=Ge.useCallback(L=>{B.current=L,typeof n=="function"?n(L):n&&(n.current=L)},[n]),[H,x]=Ge.useState(!1),{margin:E,cells:F,numCells:w,calculatedImageSettings:V}=xH({value:i,level:a,minVersion:d,boostLevel:C,includeMargin:u,marginSize:f,imageSettings:m,size:o});Ge.useEffect(()=>{if(B.current!=null){const L=B.current,$=L.getContext("2d");if(!$)return;let U=F;const _=W.current,P=V!=null&&_!==null&&_.complete&&_.naturalHeight!==0&&_.naturalWidth!==0;P&&V.excavation!=null&&(U=JH(F,V.excavation));const ee=window.devicePixelRatio||1;L.height=L.width=o*ee;const j=o/w*ee;$.scale(j,j),$.fillStyle=l,$.fillRect(0,0,w,w),$.fillStyle=g,Hse?$.fill(new Path2D(XH(U,E))):F.forEach(function(O,X){O.forEach(function(D,z){D&&$.fillRect(z+E,X+E,1,1)})}),V&&($.globalAlpha=V.opacity),P&&$.drawImage(_,V.x+E,V.y+E,V.w,V.h)}}),Ge.useEffect(()=>{x(!1)},[v]);const Y=lS({height:o,width:o},y);let M=null;return v!=null&&(M=Ge.createElement("img",{src:v,key:v,style:{display:"none"},onLoad:()=>{x(!0)},ref:W,crossOrigin:V==null?void 0:V.crossOrigin})),Ge.createElement(Ge.Fragment,null,Ge.createElement("canvas",lS({style:Y,height:o,width:o,ref:J,role:"img"},S)),M)});HH.displayName="QRCodeCanvas";var Yse=Ge.forwardRef(function(t,n){const r=t,{value:i,size:o=RH,level:a=wH,bgColor:l=WH,fgColor:g=VH,includeMargin:u=kH,minVersion:d=NH,boostLevel:C,title:f,marginSize:m,imageSettings:b}=r,p=sS(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:y,cells:S,numCells:v,calculatedImageSettings:B}=xH({value:i,level:a,minVersion:d,boostLevel:C,includeMargin:u,marginSize:m,imageSettings:b,size:o});let W=S,J=null;b!=null&&B!=null&&(B.excavation!=null&&(W=JH(S,B.excavation)),J=Ge.createElement("image",{href:b.src,height:B.h,width:B.w,x:B.x+y,y:B.y+y,preserveAspectRatio:"none",opacity:B.opacity,crossOrigin:B.crossOrigin}));const H=XH(W,y);return Ge.createElement("svg",lS({height:o,width:o,viewBox:`0 0 ${v} ${v}`,ref:n,role:"img"},p),!!f&&Ge.createElement("title",null,f),Ge.createElement("path",{fill:l,d:`M0,0 h${v}v${v}H0z`,shapeRendering:"crispEdges"}),Ge.createElement("path",{fill:g,d:H,shapeRendering:"crispEdges"}),J)});Yse.displayName="QRCodeSVG";const Ese="modulepreload",Fse=function(e){return"/"+e},kW={},gS=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(g=>{if(g=Fse(g),g in kW)return;kW[g]=!0;const u=g.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${d}`))return;const C=document.createElement("link");if(C.rel=u?"stylesheet":Ese,u||(C.as="script"),C.crossOrigin="",C.href=g,l&&C.setAttribute("nonce",l),document.head.appendChild(C),u)return new Promise((f,m)=>{C.addEventListener("load",f),C.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${g}`)))})}))}function o(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return i.then(a=>{for(const l of a||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})};var jo=Uint8Array,ja=Uint16Array,X1=Int32Array,qb=new jo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),e0=new jo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),cS=new jo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),YH=function(e,t){for(var n=new ja(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var i=new X1(n[30]),r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return{b:n,r:i}},EH=YH(qb,2),FH=EH.b,uS=EH.r;FH[28]=258,uS[258]=28;var KH=YH(e0,0),Kse=KH.b,NW=KH.r,dS=new ja(32768);for(var ni=0;ni<32768;++ni){var Rc=(ni&43690)>>1|(ni&21845)<<1;Rc=(Rc&52428)>>2|(Rc&13107)<<2,Rc=(Rc&61680)>>4|(Rc&3855)<<4,dS[ni]=((Rc&65280)>>8|(Rc&255)<<8)>>1}var zs=function(e,t,n){for(var r=e.length,i=0,o=new ja(t);i<r;++i)e[i]&&++o[e[i]-1];var a=new ja(t);for(i=1;i<t;++i)a[i]=a[i-1]+o[i-1]<<1;var l;if(n){l=new ja(1<<t);var g=15-t;for(i=0;i<r;++i)if(e[i])for(var u=i<<4|e[i],d=t-e[i],C=a[e[i]-1]++<<d,f=C|(1<<d)-1;C<=f;++C)l[dS[C]>>g]=u}else for(l=new ja(r),i=0;i<r;++i)e[i]&&(l[i]=dS[a[e[i]-1]++]>>15-e[i]);return l},qc=new jo(288);for(var ni=0;ni<144;++ni)qc[ni]=8;for(var ni=144;ni<256;++ni)qc[ni]=9;for(var ni=256;ni<280;++ni)qc[ni]=7;for(var ni=280;ni<288;++ni)qc[ni]=8;var im=new jo(32);for(var ni=0;ni<32;++ni)im[ni]=5;var Lse=zs(qc,9,0),Mse=zs(qc,9,1),Tse=zs(im,5,0),zse=zs(im,5,1),uv=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},Dl=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},dv=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},J1=function(e){return(e+7)/8|0},LH=function(e,t,n){return(n==null||n>e.length)&&(n=e.length),new jo(e.subarray(t,n))},Dse=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ol=function(e,t,n){var r=new Error(t||Dse[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,Ol),!n)throw r;return r},Pse=function(e,t,n,r){var i=e.length,o=0;if(!i||t.f&&!t.l)return n||new jo(0);var a=!n,l=a||t.i!=2,g=t.i;a&&(n=new jo(i*3));var u=function(Ae){var be=n.length;if(Ae>be){var me=new jo(Math.max(be*2,Ae));me.set(n),n=me}},d=t.f||0,C=t.p||0,f=t.b||0,m=t.l,b=t.d,p=t.m,y=t.n,S=i*8;do{if(!m){d=Dl(e,C,1);var v=Dl(e,C+1,3);if(C+=3,v)if(v==1)m=Mse,b=zse,p=9,y=5;else if(v==2){var H=Dl(e,C,31)+257,x=Dl(e,C+10,15)+4,E=H+Dl(e,C+5,31)+1;C+=14;for(var F=new jo(E),w=new jo(19),V=0;V<x;++V)w[cS[V]]=Dl(e,C+V*3,7);C+=x*3;for(var Y=uv(w),M=(1<<Y)-1,L=zs(w,Y,1),V=0;V<E;){var $=L[Dl(e,C,M)];C+=$&15;var B=$>>4;if(B<16)F[V++]=B;else{var U=0,_=0;for(B==16?(_=3+Dl(e,C,3),C+=2,U=F[V-1]):B==17?(_=3+Dl(e,C,7),C+=3):B==18&&(_=11+Dl(e,C,127),C+=7);_--;)F[V++]=U}}var P=F.subarray(0,H),ee=F.subarray(H);p=uv(P),y=uv(ee),m=zs(P,p,1),b=zs(ee,y,1)}else Ol(1);else{var B=J1(C)+4,W=e[B-4]|e[B-3]<<8,J=B+W;if(J>i){g&&Ol(0);break}l&&u(f+W),n.set(e.subarray(B,J),f),t.b=f+=W,t.p=C=J*8,t.f=d;continue}if(C>S){g&&Ol(0);break}}l&&u(f+131072);for(var j=(1<<p)-1,O=(1<<y)-1,X=C;;X=C){var U=m[dv(e,C)&j],D=U>>4;if(C+=U&15,C>S){g&&Ol(0);break}if(U||Ol(2),D<256)n[f++]=D;else if(D==256){X=C,m=null;break}else{var z=D-254;if(D>264){var V=D-257,Q=qb[V];z=Dl(e,C,(1<<Q)-1)+FH[V],C+=Q}var ne=b[dv(e,C)&O],ce=ne>>4;ne||Ol(3),C+=ne&15;var ee=Kse[ce];if(ce>3){var Q=e0[ce];ee+=dv(e,C)&(1<<Q)-1,C+=Q}if(C>S){g&&Ol(0);break}l&&u(f+131072);var se=f+z;if(f<ee){var ue=o-ee,ve=Math.min(ee,se);for(ue+f<0&&Ol(3);f<ve;++f)n[f]=r[ue+f]}for(;f<se;++f)n[f]=n[f-ee]}}t.l=m,t.p=X,t.b=f,t.f=d,m&&(d=1,t.m=p,t.d=b,t.n=y)}while(!d);return f!=n.length&&a?LH(n,0,f):n.subarray(0,f)},yg=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},QC=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},Iv=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,o=n.slice();if(!i)return{t:TH,l:0};if(i==1){var a=new jo(n[0].s+1);return a[n[0].s]=1,{t:a,l:1}}n.sort(function(J,H){return J.f-H.f}),n.push({s:-1,f:25001});var l=n[0],g=n[1],u=0,d=1,C=2;for(n[0]={s:-1,f:l.f+g.f,l,r:g};d!=i-1;)l=n[n[u].f<n[C].f?u++:C++],g=n[u!=d&&n[u].f<n[C].f?u++:C++],n[d++]={s:-1,f:l.f+g.f,l,r:g};for(var f=o[0].s,r=1;r<i;++r)o[r].s>f&&(f=o[r].s);var m=new ja(f+1),b=IS(n[d-1],m,0);if(b>t){var r=0,p=0,y=b-t,S=1<<y;for(o.sort(function(H,x){return m[x.s]-m[H.s]||H.f-x.f});r<i;++r){var v=o[r].s;if(m[v]>t)p+=S-(1<<b-m[v]),m[v]=t;else break}for(p>>=y;p>0;){var B=o[r].s;m[B]<t?p-=1<<t-m[B]++-1:++r}for(;r>=0&&p;--r){var W=o[r].s;m[W]==t&&(--m[W],++p)}b=t}return{t:new jo(m),l:b}},IS=function(e,t,n){return e.s==-1?Math.max(IS(e.l,t,n+1),IS(e.r,t,n+1)):t[e.s]=n},XW=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new ja(++t),r=0,i=e[0],o=1,a=function(g){n[r++]=g},l=1;l<=t;++l)if(e[l]==i&&l!=t)++o;else{if(!i&&o>2){for(;o>138;o-=138)a(32754);o>2&&(a(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(a(i),--o;o>6;o-=6)a(8304);o>2&&(a(o-3<<5|8208),o=0)}for(;o--;)a(i);o=1,i=e[l]}return{c:n.subarray(0,r),n:t}},$C=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},MH=function(e,t,n){var r=n.length,i=J1(t+2);e[i]=r&255,e[i+1]=r>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var o=0;o<r;++o)e[i+o+4]=n[o];return(i+4+r)*8},JW=function(e,t,n,r,i,o,a,l,g,u,d){yg(t,d++,n),++i[256];for(var C=Iv(i,15),f=C.t,m=C.l,b=Iv(o,15),p=b.t,y=b.l,S=XW(f),v=S.c,B=S.n,W=XW(p),J=W.c,H=W.n,x=new ja(19),E=0;E<v.length;++E)++x[v[E]&31];for(var E=0;E<J.length;++E)++x[J[E]&31];for(var F=Iv(x,7),w=F.t,V=F.l,Y=19;Y>4&&!w[cS[Y-1]];--Y);var M=u+5<<3,L=$C(i,qc)+$C(o,im)+a,$=$C(i,f)+$C(o,p)+a+14+3*Y+$C(x,w)+2*x[16]+3*x[17]+7*x[18];if(g>=0&&M<=L&&M<=$)return MH(t,d,e.subarray(g,g+u));var U,_,P,ee;if(yg(t,d,1+($<L)),d+=2,$<L){U=zs(f,m,0),_=f,P=zs(p,y,0),ee=p;var j=zs(w,V,0);yg(t,d,B-257),yg(t,d+5,H-1),yg(t,d+10,Y-4),d+=14;for(var E=0;E<Y;++E)yg(t,d+3*E,w[cS[E]]);d+=3*Y;for(var O=[v,J],X=0;X<2;++X)for(var D=O[X],E=0;E<D.length;++E){var z=D[E]&31;yg(t,d,j[z]),d+=w[z],z>15&&(yg(t,d,D[E]>>5&127),d+=D[E]>>12)}}else U=Lse,_=qc,P=Tse,ee=im;for(var E=0;E<l;++E){var Q=r[E];if(Q>255){var z=Q>>18&31;QC(t,d,U[z+257]),d+=_[z+257],z>7&&(yg(t,d,Q>>23&31),d+=qb[z]);var ne=Q&31;QC(t,d,P[ne]),d+=ee[ne],ne>3&&(QC(t,d,Q>>5&8191),d+=e0[ne])}else QC(t,d,U[Q]),d+=_[Q]}return QC(t,d,U[256]),d+_[256]},Ose=new X1([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),TH=new jo(0),_se=function(e,t,n,r,i,o){var a=o.z||e.length,l=new jo(r+a+5*(1+Math.ceil(a/7e3))+i),g=l.subarray(r,l.length-i),u=o.l,d=(o.r||0)&7;if(t){d&&(g[0]=o.r>>3);for(var C=Ose[t-1],f=C>>13,m=C&8191,b=(1<<n)-1,p=o.p||new ja(32768),y=o.h||new ja(b+1),S=Math.ceil(n/3),v=2*S,B=function(Ne){return(e[Ne]^e[Ne+1]<<S^e[Ne+2]<<v)&b},W=new X1(25e3),J=new ja(288),H=new ja(32),x=0,E=0,F=o.i||0,w=0,V=o.w||0,Y=0;F+2<a;++F){var M=B(F),L=F&32767,$=y[M];if(p[L]=$,y[M]=L,V<=F){var U=a-F;if((x>7e3||w>24576)&&(U>423||!u)){d=JW(e,g,0,W,J,H,E,w,Y,F-Y,d),w=x=E=0,Y=F;for(var _=0;_<286;++_)J[_]=0;for(var _=0;_<30;++_)H[_]=0}var P=2,ee=0,j=m,O=L-$&32767;if(U>2&&M==B(F-O))for(var X=Math.min(f,U)-1,D=Math.min(32767,F),z=Math.min(258,U);O<=D&&--j&&L!=$;){if(e[F+P]==e[F+P-O]){for(var Q=0;Q<z&&e[F+Q]==e[F+Q-O];++Q);if(Q>P){if(P=Q,ee=O,Q>X)break;for(var ne=Math.min(O,Q-2),ce=0,_=0;_<ne;++_){var se=F-O+_&32767,ue=p[se],ve=se-ue&32767;ve>ce&&(ce=ve,$=se)}}}L=$,$=p[L],O+=L-$&32767}if(ee){W[w++]=268435456|uS[P]<<18|NW[ee];var Ae=uS[P]&31,be=NW[ee]&31;E+=qb[Ae]+e0[be],++J[257+Ae],++H[be],V=F+P,++x}else W[w++]=e[F],++J[e[F]]}}for(F=Math.max(F,V);F<a;++F)W[w++]=e[F],++J[e[F]];d=JW(e,g,u,W,J,H,E,w,Y,F-Y,d),u||(o.r=d&7|g[d/8|0]<<3,d-=7,o.h=y,o.p=p,o.i=F,o.w=V)}else{for(var F=o.w||0;F<a+u;F+=65535){var me=F+65535;me>=a&&(g[d/8|0]=u,me=a),d=MH(g,d+1,e.subarray(F,me))}o.i=a}return LH(l,0,r+J1(d)+i)},zH=function(){var e=1,t=0;return{p:function(n){for(var r=e,i=t,o=n.length|0,a=0;a!=o;){for(var l=Math.min(a+2655,o);a<l;++a)i+=r+=n[a];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}e=r,t=i},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},Use=function(e,t,n,r,i){if(!i&&(i={l:1},t.dictionary)){var o=t.dictionary.subarray(-32768),a=new jo(o.length+e.length);a.set(o),a.set(e,o.length),e=a,i.w=o.length}return _se(e,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,r,i)},DH=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},jse=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=zH();i.p(t.dictionary),DH(e,2,i.d())}},Qse=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Ol(6,"invalid zlib data"),(e[1]>>5&1)==1&&Ol(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function CS(e,t){t||(t={});var n=zH();n.p(e);var r=Use(e,t,t.dictionary?6:2,4);return jse(r,t),DH(r,r.length-4,n.d()),r}function $se(e,t){return Pse(e.subarray(Qse(e),-4),{i:2},t,t)}var qse=typeof TextDecoder<"u"&&new TextDecoder,ege=0;try{qse.decode(TH,{stream:!0}),ege=1}catch{}var Zn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Cv(){Zn.console&&typeof Zn.console.log=="function"&&Zn.console.log.apply(Zn.console,arguments)}var zr={log:Cv,warn:function(e){Zn.console&&(typeof Zn.console.warn=="function"?Zn.console.warn.apply(Zn.console,arguments):Cv.call(null,arguments))},error:function(e){Zn.console&&(typeof Zn.console.error=="function"?Zn.console.error.apply(Zn.console,arguments):Cv(e))}};function fv(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){Fu(r.response,t,n)},r.onerror=function(){zr.error("could not download file")},r.send()}function xW(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Fh(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Zf,fS,Fu=Zn.saveAs||((typeof window>"u"?"undefined":wt(window))!=="object"||window!==Zn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=Zn.URL||Zn.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?xW(i.href)?fv(e,t,n):Fh(i,i.target="_blank"):Fh(i)):(i.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Fh(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(xW(e))fv(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){Fh(r)})}else navigator.msSaveOrOpenBlob(function(i,o){return o===void 0?o={autoBom:!1}:wt(o)!=="object"&&(zr.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return fv(e,t,n);var i=e.type==="application/octet-stream",o=/constructor/i.test(Zn.HTMLElement)||Zn.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&o)&&(typeof FileReader>"u"?"undefined":wt(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var d=l.result;d=a?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},l.readAsDataURL(e)}else{var g=Zn.URL||Zn.webkitURL,u=g.createObjectURL(e);r?r.location=u:location.href=u,r=null,setTimeout(function(){g.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function PH(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,o=n[r].process,a=i.exec(e);a&&(t=o(a),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),g=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),g.length==1&&(g="0"+g),u.length==1&&(u="0"+u),"#"+l+g+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function mv(e,t){var n=e[0],r=e[1],i=e[2],o=e[3];n=Mo(n,r,i,o,t[0],7,-680876936),o=Mo(o,n,r,i,t[1],12,-389564586),i=Mo(i,o,n,r,t[2],17,606105819),r=Mo(r,i,o,n,t[3],22,-1044525330),n=Mo(n,r,i,o,t[4],7,-176418897),o=Mo(o,n,r,i,t[5],12,1200080426),i=Mo(i,o,n,r,t[6],17,-1473231341),r=Mo(r,i,o,n,t[7],22,-45705983),n=Mo(n,r,i,o,t[8],7,1770035416),o=Mo(o,n,r,i,t[9],12,-1958414417),i=Mo(i,o,n,r,t[10],17,-42063),r=Mo(r,i,o,n,t[11],22,-1990404162),n=Mo(n,r,i,o,t[12],7,1804603682),o=Mo(o,n,r,i,t[13],12,-40341101),i=Mo(i,o,n,r,t[14],17,-1502002290),n=To(n,r=Mo(r,i,o,n,t[15],22,1236535329),i,o,t[1],5,-165796510),o=To(o,n,r,i,t[6],9,-1069501632),i=To(i,o,n,r,t[11],14,643717713),r=To(r,i,o,n,t[0],20,-373897302),n=To(n,r,i,o,t[5],5,-701558691),o=To(o,n,r,i,t[10],9,38016083),i=To(i,o,n,r,t[15],14,-660478335),r=To(r,i,o,n,t[4],20,-405537848),n=To(n,r,i,o,t[9],5,568446438),o=To(o,n,r,i,t[14],9,-1019803690),i=To(i,o,n,r,t[3],14,-187363961),r=To(r,i,o,n,t[8],20,1163531501),n=To(n,r,i,o,t[13],5,-1444681467),o=To(o,n,r,i,t[2],9,-51403784),i=To(i,o,n,r,t[7],14,1735328473),n=zo(n,r=To(r,i,o,n,t[12],20,-1926607734),i,o,t[5],4,-378558),o=zo(o,n,r,i,t[8],11,-2022574463),i=zo(i,o,n,r,t[11],16,1839030562),r=zo(r,i,o,n,t[14],23,-35309556),n=zo(n,r,i,o,t[1],4,-1530992060),o=zo(o,n,r,i,t[4],11,1272893353),i=zo(i,o,n,r,t[7],16,-155497632),r=zo(r,i,o,n,t[10],23,-1094730640),n=zo(n,r,i,o,t[13],4,681279174),o=zo(o,n,r,i,t[0],11,-358537222),i=zo(i,o,n,r,t[3],16,-722521979),r=zo(r,i,o,n,t[6],23,76029189),n=zo(n,r,i,o,t[9],4,-640364487),o=zo(o,n,r,i,t[12],11,-421815835),i=zo(i,o,n,r,t[15],16,530742520),n=Do(n,r=zo(r,i,o,n,t[2],23,-995338651),i,o,t[0],6,-198630844),o=Do(o,n,r,i,t[7],10,1126891415),i=Do(i,o,n,r,t[14],15,-1416354905),r=Do(r,i,o,n,t[5],21,-57434055),n=Do(n,r,i,o,t[12],6,1700485571),o=Do(o,n,r,i,t[3],10,-1894986606),i=Do(i,o,n,r,t[10],15,-1051523),r=Do(r,i,o,n,t[1],21,-2054922799),n=Do(n,r,i,o,t[8],6,1873313359),o=Do(o,n,r,i,t[15],10,-30611744),i=Do(i,o,n,r,t[6],15,-1560198380),r=Do(r,i,o,n,t[13],21,1309151649),n=Do(n,r,i,o,t[4],6,-145523070),o=Do(o,n,r,i,t[11],10,-1120210379),i=Do(i,o,n,r,t[2],15,718787259),r=Do(r,i,o,n,t[9],21,-343485551),e[0]=Fc(n,e[0]),e[1]=Fc(r,e[1]),e[2]=Fc(i,e[2]),e[3]=Fc(o,e[3])}function t0(e,t,n,r,i,o){return t=Fc(Fc(t,e),Fc(r,o)),Fc(t<<i|t>>>32-i,n)}function Mo(e,t,n,r,i,o,a){return t0(t&n|~t&r,e,t,i,o,a)}function To(e,t,n,r,i,o,a){return t0(t&r|n&~r,e,t,i,o,a)}function zo(e,t,n,r,i,o,a){return t0(t^n^r,e,t,i,o,a)}function Do(e,t,n,r,i,o,a){return t0(n^(t|~r),e,t,i,o,a)}function OH(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)mv(r,tge(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(mv(r,i),t=0;t<16;t++)i[t]=0;return i[14]=8*n,mv(r,i),r}function tge(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}Zf=Zn.atob.bind(Zn),fS=Zn.btoa.bind(Zn);var HW="0123456789abcdef".split("");function nge(e){for(var t="",n=0;n<4;n++)t+=HW[e>>8*n+4&15]+HW[e>>8*n&15];return t}function rge(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function mS(e){return OH(e).map(rge).join("")}var ige=function(e){for(var t=0;t<e.length;t++)e[t]=nge(e[t]);return e.join("")}(OH("hello"))!="5d41402abc4b2a76b9719d911017c592";function Fc(e,t){if(ige){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function hS(e,t){var n,r,i,o;if(e!==n){for(var a=(i=e,o=1+(256/e.length>>0),new Array(o+1).join(i)),l=[],g=0;g<256;g++)l[g]=g;var u=0;for(g=0;g<256;g++){var d=l[g];u=(u+d+a.charCodeAt(g))%256,l[g]=l[u],l[u]=d}n=e,r=l}else l=r;var C=t.length,f=0,m=0,b="";for(g=0;g<C;g++)m=(m+(d=l[f=(f+1)%256]))%256,l[f]=l[m],l[m]=d,a=l[(l[f]+l[m])%256],b+=String.fromCharCode(t.charCodeAt(g)^a);return b}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var YW={print:4,modify:8,copy:16,"annot-forms":32};function nI(e,t,n,r){this.v=1,this.r=2;var i=192;e.forEach(function(l){if(YW.perm!==void 0)throw new Error("Invalid permission: "+l);i+=YW[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(t+this.padding).substr(0,32),a=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,a),this.P=-(1+(255^i)),this.encryptionKey=mS(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=hS(this.encryptionKey,this.padding)}function rI(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var i=e.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?t+="#"+("0"+i.toString(16)).slice(-2):t+=e[r]}return t}function EW(e){if(wt(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var o=Math.random().toString(35);return t[n][o]=[r,!!i],o},this.unsubscribe=function(n){for(var r in t)if(t[r][n])return delete t[r][n],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var o in t[n]){var a=t[n][o];try{a[0].apply(e,r)}catch(l){Zn.console&&zr.error("jsPDF PubSub Error",l.message,l)}a[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function xp(e){if(!(this instanceof xp))return new xp(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function _H(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Mu(e,t,n,r,i){if(!(this instanceof Mu))return new Mu(e,t,n,r,i);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,_H.call(this,r,i)}function uI(e,t,n,r,i){if(!(this instanceof uI))return new uI(e,t,n,r,i);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,_H.call(this,r,i)}function vn(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],o=arguments[3],a=[],l=1,g=16,u="S",d=null;wt(e=e||{})==="object"&&(n=e.orientation,r=e.unit||r,i=e.format||i,o=e.compress||e.compressPdf||o,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(g=e.floatPrecision),u=e.defaultPathOperation||"S"),a=e.filters||(o===!0?["FlateEncode"]:a),r=r||"mm",n=(""+(n||"P")).toLowerCase();var C=e.putOnlyUsedFonts||!1,f={},m={internal:{},__private__:{}};m.__private__.PubSub=EW;var b="1.3",p=m.__private__.getPdfVersion=function(){return b};m.__private__.setPdfVersion=function(R){b=R};var y={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return y};var S=m.__private__.getPageFormat=function(R){return y[R]};i=i||"a4";var v={COMPAT:"compat",ADVANCED:"advanced"},B=v.COMPAT;function W(){this.saveGraphicsState(),ae(new ht(_e,0,0,-_e,0,hs()*_e).toString()+" cm"),this.setFontSize(this.getFontSize()/_e),u="n",B=v.ADVANCED}function J(){this.restoreGraphicsState(),u="S",B=v.COMPAT}var H=m.__private__.combineFontStyleAndFontWeight=function(R,te){if(R=="bold"&&te=="normal"||R=="bold"&&te==400||R=="normal"&&te=="italic"||R=="bold"&&te=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return te&&(R=te==400||te==="normal"?R==="italic"?"italic":"normal":te!=700&&te!=="bold"||R!=="normal"?(te==700?"bold":te)+""+R:"bold"),R};m.advancedAPI=function(R){var te=B===v.COMPAT;return te&&W.call(this),typeof R!="function"||(R(this),te&&J.call(this)),this},m.compatAPI=function(R){var te=B===v.ADVANCED;return te&&J.call(this),typeof R!="function"||(R(this),te&&W.call(this)),this},m.isAdvancedAPI=function(){return B===v.ADVANCED};var x,E=function(R){if(B!==v.ADVANCED)throw new Error(R+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},F=m.roundToPrecision=m.__private__.roundToPrecision=function(R,te){var Ce=t||te;if(isNaN(R)||isNaN(Ce))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return R.toFixed(Ce).replace(/0+$/,"")};x=m.hpf=m.__private__.hpf=typeof g=="number"?function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return F(R,g)}:g==="smart"?function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return F(R,R>-1&&R<1?16:5)}:function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return F(R,16)};var w=m.f2=m.__private__.f2=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.f2");return F(R,2)},V=m.__private__.f3=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.f3");return F(R,3)},Y=m.scale=m.__private__.scale=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.scale");return B===v.COMPAT?R*_e:B===v.ADVANCED?R:void 0},M=function(R){return B===v.COMPAT?hs()-R:B===v.ADVANCED?R:void 0},L=function(R){return Y(M(R))};m.__private__.setPrecision=m.setPrecision=function(R){typeof parseInt(R,10)=="number"&&(t=parseInt(R,10))};var $,U="00000000000000000000000000000000",_=m.__private__.getFileId=function(){return U},P=m.__private__.setFileId=function(R){return U=R!==void 0&&/^[a-fA-F0-9]{32}$/.test(R)?R.toUpperCase():U.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(sr=new nI(d.userPermissions,d.userPassword,d.ownerPassword,U)),U};m.setFileId=function(R){return P(R),this},m.getFileId=function(){return _()};var ee=m.__private__.convertDateToPDFDate=function(R){var te=R.getTimezoneOffset(),Ce=te<0?"+":"-",Se=Math.floor(Math.abs(te/60)),Ke=Math.abs(te%60),qe=[Ce,z(Se),"'",z(Ke),"'"].join("");return["D:",R.getFullYear(),z(R.getMonth()+1),z(R.getDate()),z(R.getHours()),z(R.getMinutes()),z(R.getSeconds()),qe].join("")},j=m.__private__.convertPDFDateToDate=function(R){var te=parseInt(R.substr(2,4),10),Ce=parseInt(R.substr(6,2),10)-1,Se=parseInt(R.substr(8,2),10),Ke=parseInt(R.substr(10,2),10),qe=parseInt(R.substr(12,2),10),ft=parseInt(R.substr(14,2),10);return new Date(te,Ce,Se,Ke,qe,ft,0)},O=m.__private__.setCreationDate=function(R){var te;if(R===void 0&&(R=new Date),R instanceof Date)te=ee(R);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(R))throw new Error("Invalid argument passed to jsPDF.setCreationDate");te=R}return $=te},X=m.__private__.getCreationDate=function(R){var te=$;return R==="jsDate"&&(te=j($)),te};m.setCreationDate=function(R){return O(R),this},m.getCreationDate=function(R){return X(R)};var D,z=m.__private__.padd2=function(R){return("0"+parseInt(R)).slice(-2)},Q=m.__private__.padd2Hex=function(R){return("00"+(R=R.toString())).substr(R.length)},ne=0,ce=[],se=[],ue=0,ve=[],Ae=[],be=!1,me=se,Ne=function(){ne=0,ue=0,se=[],ce=[],ve=[],Jn=Bt(),cn=Bt()};m.__private__.setCustomOutputDestination=function(R){be=!0,me=R};var Ie=function(R){be||(me=R)};m.__private__.resetCustomOutputDestination=function(){be=!1,me=se};var ae=m.__private__.out=function(R){return R=R.toString(),ue+=R.length+1,me.push(R),me},Ee=m.__private__.write=function(R){return ae(arguments.length===1?R.toString():Array.prototype.join.call(arguments," "))},Fe=m.__private__.getArrayBuffer=function(R){for(var te=R.length,Ce=new ArrayBuffer(te),Se=new Uint8Array(Ce);te--;)Se[te]=R.charCodeAt(te);return Ce},ke=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return ke};var ze=e.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(R){return ze=B===v.ADVANCED?R/_e:R,this};var He,Le=m.__private__.getFontSize=m.getFontSize=function(){return B===v.COMPAT?ze:ze*_e},Ye=e.R2L||!1;m.__private__.setR2L=m.setR2L=function(R){return Ye=R,this},m.__private__.getR2L=m.getR2L=function(){return Ye};var Pe,$e=m.__private__.setZoomMode=function(R){var te=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(R))He=R;else if(isNaN(R)){if(te.indexOf(R)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+R+'" is not recognized.');He=R}else He=parseInt(R,10)};m.__private__.getZoomMode=function(){return He};var ot,Ct=m.__private__.setPageMode=function(R){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(R)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+R+'" is not recognized.');Pe=R};m.__private__.getPageMode=function(){return Pe};var pt=m.__private__.setLayoutMode=function(R){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(R)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+R+'" is not recognized.');ot=R};m.__private__.getLayoutMode=function(){return ot},m.__private__.setDisplayMode=m.setDisplayMode=function(R,te,Ce){return $e(R),pt(te),Ct(Ce),this};var it={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(R){if(Object.keys(it).indexOf(R)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return it[R]},m.__private__.getDocumentProperties=function(){return it},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(R){for(var te in it)it.hasOwnProperty(te)&&R[te]&&(it[te]=R[te]);return this},m.__private__.setDocumentProperty=function(R,te){if(Object.keys(it).indexOf(R)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return it[R]=te};var It,_e,Ot,Qe,st,St={},dt={},Wt=[],Et={},hn={},mn={},Xn={},Mn=null,In=0,Jt=[],jt=new EW(m),ln=e.hotfixes||[],Vt={},Rt={},yt=[],ht=function R(te,Ce,Se,Ke,qe,ft){if(!(this instanceof R))return new R(te,Ce,Se,Ke,qe,ft);isNaN(te)&&(te=1),isNaN(Ce)&&(Ce=0),isNaN(Se)&&(Se=0),isNaN(Ke)&&(Ke=1),isNaN(qe)&&(qe=0),isNaN(ft)&&(ft=0),this._matrix=[te,Ce,Se,Ke,qe,ft]};Object.defineProperty(ht.prototype,"sx",{get:function(){return this._matrix[0]},set:function(R){this._matrix[0]=R}}),Object.defineProperty(ht.prototype,"shy",{get:function(){return this._matrix[1]},set:function(R){this._matrix[1]=R}}),Object.defineProperty(ht.prototype,"shx",{get:function(){return this._matrix[2]},set:function(R){this._matrix[2]=R}}),Object.defineProperty(ht.prototype,"sy",{get:function(){return this._matrix[3]},set:function(R){this._matrix[3]=R}}),Object.defineProperty(ht.prototype,"tx",{get:function(){return this._matrix[4]},set:function(R){this._matrix[4]=R}}),Object.defineProperty(ht.prototype,"ty",{get:function(){return this._matrix[5]},set:function(R){this._matrix[5]=R}}),Object.defineProperty(ht.prototype,"a",{get:function(){return this._matrix[0]},set:function(R){this._matrix[0]=R}}),Object.defineProperty(ht.prototype,"b",{get:function(){return this._matrix[1]},set:function(R){this._matrix[1]=R}}),Object.defineProperty(ht.prototype,"c",{get:function(){return this._matrix[2]},set:function(R){this._matrix[2]=R}}),Object.defineProperty(ht.prototype,"d",{get:function(){return this._matrix[3]},set:function(R){this._matrix[3]=R}}),Object.defineProperty(ht.prototype,"e",{get:function(){return this._matrix[4]},set:function(R){this._matrix[4]=R}}),Object.defineProperty(ht.prototype,"f",{get:function(){return this._matrix[5]},set:function(R){this._matrix[5]=R}}),Object.defineProperty(ht.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ht.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ht.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ht.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ht.prototype.join=function(R){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(x).join(R)},ht.prototype.multiply=function(R){var te=R.sx*this.sx+R.shy*this.shx,Ce=R.sx*this.shy+R.shy*this.sy,Se=R.shx*this.sx+R.sy*this.shx,Ke=R.shx*this.shy+R.sy*this.sy,qe=R.tx*this.sx+R.ty*this.shx+this.tx,ft=R.tx*this.shy+R.ty*this.sy+this.ty;return new ht(te,Ce,Se,Ke,qe,ft)},ht.prototype.decompose=function(){var R=this.sx,te=this.shy,Ce=this.shx,Se=this.sy,Ke=this.tx,qe=this.ty,ft=Math.sqrt(R*R+te*te),Dt=(R/=ft)*Ce+(te/=ft)*Se;Ce-=R*Dt,Se-=te*Dt;var un=Math.sqrt(Ce*Ce+Se*Se);return Dt/=un,R*(Se/=un)<te*(Ce/=un)&&(R=-R,te=-te,Dt=-Dt,ft=-ft),{scale:new ht(ft,0,0,un,0,0),translate:new ht(1,0,0,1,Ke,qe),rotate:new ht(R,te,-te,R,0,0),skew:new ht(1,0,Dt,1,0,0)}},ht.prototype.toString=function(R){return this.join(" ")},ht.prototype.inversed=function(){var R=this.sx,te=this.shy,Ce=this.shx,Se=this.sy,Ke=this.tx,qe=this.ty,ft=1/(R*Se-te*Ce),Dt=Se*ft,un=-te*ft,xn=-Ce*ft,Nn=R*ft;return new ht(Dt,un,xn,Nn,-Dt*Ke-xn*qe,-un*Ke-Nn*qe)},ht.prototype.applyToPoint=function(R){var te=R.x*this.sx+R.y*this.shx+this.tx,Ce=R.x*this.shy+R.y*this.sy+this.ty;return new rl(te,Ce)},ht.prototype.applyToRectangle=function(R){var te=this.applyToPoint(R),Ce=this.applyToPoint(new rl(R.x+R.w,R.y+R.h));return new ms(te.x,te.y,Ce.x-te.x,Ce.y-te.y)},ht.prototype.clone=function(){var R=this.sx,te=this.shy,Ce=this.shx,Se=this.sy,Ke=this.tx,qe=this.ty;return new ht(R,te,Ce,Se,Ke,qe)},m.Matrix=ht;var sn=m.matrixMult=function(R,te){return te.multiply(R)},ut=new ht(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=ut;var ct=function(R,te){if(!hn[R]){var Ce=(te instanceof Mu?"Sh":"P")+(Object.keys(Et).length+1).toString(10);te.id=Ce,hn[R]=Ce,Et[Ce]=te,jt.publish("addPattern",te)}};m.ShadingPattern=Mu,m.TilingPattern=uI,m.addShadingPattern=function(R,te){return E("addShadingPattern()"),ct(R,te),this},m.beginTilingPattern=function(R){E("beginTilingPattern()"),fd(R.boundingBox[0],R.boundingBox[1],R.boundingBox[2]-R.boundingBox[0],R.boundingBox[3]-R.boundingBox[1],R.matrix)},m.endTilingPattern=function(R,te){E("endTilingPattern()"),te.stream=Ae[D].join(`
`),ct(R,te),jt.publish("endTilingPattern",te),yt.pop().restore()};var vt=m.__private__.newObject=function(){var R=Bt();return kt(R,!0),R},Bt=m.__private__.newObjectDeferred=function(){return ne++,ce[ne]=function(){return ue},ne},kt=function(R,te){return te=typeof te=="boolean"&&te,ce[R]=ue,te&&ae(R+" 0 obj"),R},Tt=m.__private__.newAdditionalObject=function(){var R={objId:Bt(),content:""};return ve.push(R),R},Jn=Bt(),cn=Bt(),yn=m.__private__.decodeColorString=function(R){var te=R.split(" ");if(te.length!==2||te[1]!=="g"&&te[1]!=="G")te.length===5&&(te[4]==="k"||te[4]==="K")&&(te=[(1-te[0])*(1-te[3]),(1-te[1])*(1-te[3]),(1-te[2])*(1-te[3]),"r"]);else{var Ce=parseFloat(te[0]);te=[Ce,Ce,Ce,"r"]}for(var Se="#",Ke=0;Ke<3;Ke++)Se+=("0"+Math.floor(255*parseFloat(te[Ke])).toString(16)).slice(-2);return Se},qt=m.__private__.encodeColorString=function(R){var te;typeof R=="string"&&(R={ch1:R});var Ce=R.ch1,Se=R.ch2,Ke=R.ch3,qe=R.ch4,ft=R.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ce=="string"&&Ce.charAt(0)!=="#"){var Dt=new PH(Ce);if(Dt.ok)Ce=Dt.toHex();else if(!/^\d*\.?\d*$/.test(Ce))throw new Error('Invalid color "'+Ce+'" passed to jsPDF.encodeColorString.')}if(typeof Ce=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ce)&&(Ce="#"+Ce[1]+Ce[1]+Ce[2]+Ce[2]+Ce[3]+Ce[3]),typeof Ce=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ce)){var un=parseInt(Ce.substr(1),16);Ce=un>>16&255,Se=un>>8&255,Ke=255&un}if(Se===void 0||qe===void 0&&Ce===Se&&Se===Ke)if(typeof Ce=="string")te=Ce+" "+ft[0];else switch(R.precision){case 2:te=w(Ce/255)+" "+ft[0];break;case 3:default:te=V(Ce/255)+" "+ft[0]}else if(qe===void 0||wt(qe)==="object"){if(qe&&!isNaN(qe.a)&&qe.a===0)return te=["1.","1.","1.",ft[1]].join(" ");if(typeof Ce=="string")te=[Ce,Se,Ke,ft[1]].join(" ");else switch(R.precision){case 2:te=[w(Ce/255),w(Se/255),w(Ke/255),ft[1]].join(" ");break;default:case 3:te=[V(Ce/255),V(Se/255),V(Ke/255),ft[1]].join(" ")}}else if(typeof Ce=="string")te=[Ce,Se,Ke,qe,ft[2]].join(" ");else switch(R.precision){case 2:te=[w(Ce),w(Se),w(Ke),w(qe),ft[2]].join(" ");break;case 3:default:te=[V(Ce),V(Se),V(Ke),V(qe),ft[2]].join(" ")}return te},Vn=m.__private__.getFilters=function(){return a},En=m.__private__.putStream=function(R){var te=(R=R||{}).data||"",Ce=R.filters||Vn(),Se=R.alreadyAppliedFilters||[],Ke=R.addLength1||!1,qe=te.length,ft=R.objectId,Dt=function(ro){return ro};if(d!==null&&ft===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Dt=sr.encryptor(ft,0));var un={};Ce===!0&&(Ce=["FlateEncode"]);var xn=R.additionalKeyValues||[],Nn=(un=vn.API.processDataByFilters!==void 0?vn.API.processDataByFilters(te,Ce):{data:te,reverseChain:[]}).reverseChain+(Array.isArray(Se)?Se.join(" "):Se.toString());if(un.data.length!==0&&(xn.push({key:"Length",value:un.data.length}),Ke===!0&&xn.push({key:"Length1",value:qe})),Nn.length!=0)if(Nn.split("/").length-1==1)xn.push({key:"Filter",value:Nn});else{xn.push({key:"Filter",value:"["+Nn+"]"});for(var jn=0;jn<xn.length;jn+=1)if(xn[jn].key==="DecodeParms"){for(var Qr=[],ii=0;ii<un.reverseChain.split("/").length-1;ii+=1)Qr.push("null");Qr.push(xn[jn].value),xn[jn].value="["+Qr.join(" ")+"]"}}ae("<<");for(var fi=0;fi<xn.length;fi++)ae("/"+xn[fi].key+" "+xn[fi].value);ae(">>"),un.data.length!==0&&(ae("stream"),ae(Dt(un.data)),ae("endstream"))},Dn=m.__private__.putPage=function(R){var te=R.number,Ce=R.data,Se=R.objId,Ke=R.contentsObjId;kt(Se,!0),ae("<</Type /Page"),ae("/Parent "+R.rootDictionaryObjId+" 0 R"),ae("/Resources "+R.resourceDictionaryObjId+" 0 R"),ae("/MediaBox ["+parseFloat(x(R.mediaBox.bottomLeftX))+" "+parseFloat(x(R.mediaBox.bottomLeftY))+" "+x(R.mediaBox.topRightX)+" "+x(R.mediaBox.topRightY)+"]"),R.cropBox!==null&&ae("/CropBox ["+x(R.cropBox.bottomLeftX)+" "+x(R.cropBox.bottomLeftY)+" "+x(R.cropBox.topRightX)+" "+x(R.cropBox.topRightY)+"]"),R.bleedBox!==null&&ae("/BleedBox ["+x(R.bleedBox.bottomLeftX)+" "+x(R.bleedBox.bottomLeftY)+" "+x(R.bleedBox.topRightX)+" "+x(R.bleedBox.topRightY)+"]"),R.trimBox!==null&&ae("/TrimBox ["+x(R.trimBox.bottomLeftX)+" "+x(R.trimBox.bottomLeftY)+" "+x(R.trimBox.topRightX)+" "+x(R.trimBox.topRightY)+"]"),R.artBox!==null&&ae("/ArtBox ["+x(R.artBox.bottomLeftX)+" "+x(R.artBox.bottomLeftY)+" "+x(R.artBox.topRightX)+" "+x(R.artBox.topRightY)+"]"),typeof R.userUnit=="number"&&R.userUnit!==1&&ae("/UserUnit "+R.userUnit),jt.publish("putPage",{objId:Se,pageContext:Jt[te],pageNumber:te,page:Ce}),ae("/Contents "+Ke+" 0 R"),ae(">>"),ae("endobj");var qe=Ce.join(`
`);return B===v.ADVANCED&&(qe+=`
Q`),kt(Ke,!0),En({data:qe,filters:Vn(),objectId:Ke}),ae("endobj"),Se},ar=m.__private__.putPages=function(){var R,te,Ce=[];for(R=1;R<=In;R++)Jt[R].objId=Bt(),Jt[R].contentsObjId=Bt();for(R=1;R<=In;R++)Ce.push(Dn({number:R,data:Ae[R],objId:Jt[R].objId,contentsObjId:Jt[R].contentsObjId,mediaBox:Jt[R].mediaBox,cropBox:Jt[R].cropBox,bleedBox:Jt[R].bleedBox,trimBox:Jt[R].trimBox,artBox:Jt[R].artBox,userUnit:Jt[R].userUnit,rootDictionaryObjId:Jn,resourceDictionaryObjId:cn}));kt(Jn,!0),ae("<</Type /Pages");var Se="/Kids [";for(te=0;te<In;te++)Se+=Ce[te]+" 0 R ";ae(Se+"]"),ae("/Count "+In),ae(">>"),ae("endobj"),jt.publish("postPutPages")},Ln=function(R){jt.publish("putFont",{font:R,out:ae,newObject:vt,putStream:En}),R.isAlreadyPutted!==!0&&(R.objectNumber=vt(),ae("<<"),ae("/Type /Font"),ae("/BaseFont /"+rI(R.postScriptName)),ae("/Subtype /Type1"),typeof R.encoding=="string"&&ae("/Encoding /"+R.encoding),ae("/FirstChar 32"),ae("/LastChar 255"),ae(">>"),ae("endobj"))},Pn=function(){for(var R in St)St.hasOwnProperty(R)&&(C===!1||C===!0&&f.hasOwnProperty(R))&&Ln(St[R])},At=function(R){R.objectNumber=vt();var te=[];te.push({key:"Type",value:"/XObject"}),te.push({key:"Subtype",value:"/Form"}),te.push({key:"BBox",value:"["+[x(R.x),x(R.y),x(R.x+R.width),x(R.y+R.height)].join(" ")+"]"}),te.push({key:"Matrix",value:"["+R.matrix.toString()+"]"});var Ce=R.pages[1].join(`
`);En({data:Ce,additionalKeyValues:te,objectId:R.objectNumber}),ae("endobj")},Ht=function(){for(var R in Vt)Vt.hasOwnProperty(R)&&At(Vt[R])},Yt=function(R,te){var Ce,Se=[],Ke=1/(te-1);for(Ce=0;Ce<1;Ce+=Ke)Se.push(Ce);if(Se.push(1),R[0].offset!=0){var qe={offset:0,color:R[0].color};R.unshift(qe)}if(R[R.length-1].offset!=1){var ft={offset:1,color:R[R.length-1].color};R.push(ft)}for(var Dt="",un=0,xn=0;xn<Se.length;xn++){for(Ce=Se[xn];Ce>R[un+1].offset;)un++;var Nn=R[un].offset,jn=(Ce-Nn)/(R[un+1].offset-Nn),Qr=R[un].color,ii=R[un+1].color;Dt+=Q(Math.round((1-jn)*Qr[0]+jn*ii[0]).toString(16))+Q(Math.round((1-jn)*Qr[1]+jn*ii[1]).toString(16))+Q(Math.round((1-jn)*Qr[2]+jn*ii[2]).toString(16))}return Dt.trim()},at=function(R,te){te||(te=21);var Ce=vt(),Se=Yt(R.colors,te),Ke=[];Ke.push({key:"FunctionType",value:"0"}),Ke.push({key:"Domain",value:"[0.0 1.0]"}),Ke.push({key:"Size",value:"["+te+"]"}),Ke.push({key:"BitsPerSample",value:"8"}),Ke.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ke.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),En({data:Se,additionalKeyValues:Ke,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ce}),ae("endobj"),R.objectNumber=vt(),ae("<< /ShadingType "+R.type),ae("/ColorSpace /DeviceRGB");var qe="/Coords ["+x(parseFloat(R.coords[0]))+" "+x(parseFloat(R.coords[1]))+" ";R.type===2?qe+=x(parseFloat(R.coords[2]))+" "+x(parseFloat(R.coords[3])):qe+=x(parseFloat(R.coords[2]))+" "+x(parseFloat(R.coords[3]))+" "+x(parseFloat(R.coords[4]))+" "+x(parseFloat(R.coords[5])),ae(qe+="]"),R.matrix&&ae("/Matrix ["+R.matrix.toString()+"]"),ae("/Function "+Ce+" 0 R"),ae("/Extend [true true]"),ae(">>"),ae("endobj")},Qt=function(R,te){var Ce=Bt(),Se=vt();te.push({resourcesOid:Ce,objectOid:Se}),R.objectNumber=Se;var Ke=[];Ke.push({key:"Type",value:"/Pattern"}),Ke.push({key:"PatternType",value:"1"}),Ke.push({key:"PaintType",value:"1"}),Ke.push({key:"TilingType",value:"1"}),Ke.push({key:"BBox",value:"["+R.boundingBox.map(x).join(" ")+"]"}),Ke.push({key:"XStep",value:x(R.xStep)}),Ke.push({key:"YStep",value:x(R.yStep)}),Ke.push({key:"Resources",value:Ce+" 0 R"}),R.matrix&&Ke.push({key:"Matrix",value:"["+R.matrix.toString()+"]"}),En({data:R.stream,additionalKeyValues:Ke,objectId:R.objectNumber}),ae("endobj")},An=function(R){var te;for(te in Et)Et.hasOwnProperty(te)&&(Et[te]instanceof Mu?at(Et[te]):Et[te]instanceof uI&&Qt(Et[te],R))},Tn=function(R){for(var te in R.objectNumber=vt(),ae("<<"),R)switch(te){case"opacity":ae("/ca "+w(R[te]));break;case"stroke-opacity":ae("/CA "+w(R[te]))}ae(">>"),ae("endobj")},tr=function(){var R;for(R in mn)mn.hasOwnProperty(R)&&Tn(mn[R])},Rr=function(){for(var R in ae("/XObject <<"),Vt)Vt.hasOwnProperty(R)&&Vt[R].objectNumber>=0&&ae("/"+R+" "+Vt[R].objectNumber+" 0 R");jt.publish("putXobjectDict"),ae(">>")},Kt=function(){sr.oid=vt(),ae("<<"),ae("/Filter /Standard"),ae("/V "+sr.v),ae("/R "+sr.r),ae("/U <"+sr.toHexString(sr.U)+">"),ae("/O <"+sr.toHexString(sr.O)+">"),ae("/P "+sr.P),ae(">>"),ae("endobj")},en=function(){for(var R in ae("/Font <<"),St)St.hasOwnProperty(R)&&(C===!1||C===!0&&f.hasOwnProperty(R))&&ae("/"+R+" "+St[R].objectNumber+" 0 R");ae(">>")},gn=function(){if(Object.keys(Et).length>0){for(var R in ae("/Shading <<"),Et)Et.hasOwnProperty(R)&&Et[R]instanceof Mu&&Et[R].objectNumber>=0&&ae("/"+R+" "+Et[R].objectNumber+" 0 R");jt.publish("putShadingPatternDict"),ae(">>")}},kr=function(R){if(Object.keys(Et).length>0){for(var te in ae("/Pattern <<"),Et)Et.hasOwnProperty(te)&&Et[te]instanceof m.TilingPattern&&Et[te].objectNumber>=0&&Et[te].objectNumber<R&&ae("/"+te+" "+Et[te].objectNumber+" 0 R");jt.publish("putTilingPatternDict"),ae(">>")}},Ar=function(){if(Object.keys(mn).length>0){var R;for(R in ae("/ExtGState <<"),mn)mn.hasOwnProperty(R)&&mn[R].objectNumber>=0&&ae("/"+R+" "+mn[R].objectNumber+" 0 R");jt.publish("putGStateDict"),ae(">>")}},Fn=function(R){kt(R.resourcesOid,!0),ae("<<"),ae("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),en(),gn(),kr(R.objectOid),Ar(),Rr(),ae(">>"),ae("endobj")},ri=function(){var R=[];Pn(),tr(),Ht(),An(R),jt.publish("putResources"),R.forEach(Fn),Fn({resourcesOid:cn,objectOid:Number.MAX_SAFE_INTEGER}),jt.publish("postPutResources")},Ao=function(){jt.publish("putAdditionalObjects");for(var R=0;R<ve.length;R++){var te=ve[R];kt(te.objId,!0),ae(te.content),ae("endobj")}jt.publish("postPutAdditionalObjects")},Ei=function(R){dt[R.fontName]=dt[R.fontName]||{},dt[R.fontName][R.fontStyle]=R.id},Ur=function(R,te,Ce,Se,Ke){var qe={id:"F"+(Object.keys(St).length+1).toString(10),postScriptName:R,fontName:te,fontStyle:Ce,encoding:Se,isStandardFont:Ke||!1,metadata:{}};return jt.publish("addFont",{font:qe,instance:this}),St[qe.id]=qe,Ei(qe),qe.id},to=function(R){for(var te=0,Ce=ke.length;te<Ce;te++){var Se=Ur.call(this,R[te][0],R[te][1],R[te][2],ke[te][3],!0);C===!1&&(f[Se]=!0);var Ke=R[te][0].split("-");Ei({id:Se,fontName:Ke[0],fontStyle:Ke[1]||""})}jt.publish("addFonts",{fonts:St,dictionary:dt})},Gn=function(R){return R.foo=function(){try{return R.apply(this,arguments)}catch(Se){var te=Se.stack||"";~te.indexOf(" at ")&&(te=te.split(" at ")[1]);var Ce="Error in function "+te.split(`
`)[0].split("<")[0]+": "+Se.message;if(!Zn.console)throw new Error(Ce);Zn.console.error(Ce,Se),Zn.alert&&alert(Ce)}},R.foo.bar=R,R.foo},zt=function(R,te){var Ce,Se,Ke,qe,ft,Dt,un,xn,Nn;if(Ke=(te=te||{}).sourceEncoding||"Unicode",ft=te.outputEncoding,(te.autoencode||ft)&&St[It].metadata&&St[It].metadata[Ke]&&St[It].metadata[Ke].encoding&&(qe=St[It].metadata[Ke].encoding,!ft&&St[It].encoding&&(ft=St[It].encoding),!ft&&qe.codePages&&(ft=qe.codePages[0]),typeof ft=="string"&&(ft=qe[ft]),ft)){for(un=!1,Dt=[],Ce=0,Se=R.length;Ce<Se;Ce++)(xn=ft[R.charCodeAt(Ce)])?Dt.push(String.fromCharCode(xn)):Dt.push(R[Ce]),Dt[Ce].charCodeAt(0)>>8&&(un=!0);R=Dt.join("")}for(Ce=R.length;un===void 0&&Ce!==0;)R.charCodeAt(Ce-1)>>8&&(un=!0),Ce--;if(!un)return R;for(Dt=te.noBOM?[]:[254,255],Ce=0,Se=R.length;Ce<Se;Ce++){if((Nn=(xn=R.charCodeAt(Ce))>>8)>>8)throw new Error("Character at position "+Ce+" of string '"+R+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Dt.push(Nn),Dt.push(xn-(Nn<<8))}return String.fromCharCode.apply(void 0,Dt)},Nt=m.__private__.pdfEscape=m.pdfEscape=function(R,te){return zt(R,te).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Kn=m.__private__.beginPage=function(R){Ae[++In]=[],Jt[In]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(R[0]),topRightY:Number(R[1])}},rr(In),Ie(Ae[D])},zn=function(R,te){var Ce,Se,Ke;switch(n=te||n,typeof R=="string"&&(Ce=S(R.toLowerCase()),Array.isArray(Ce)&&(Se=Ce[0],Ke=Ce[1])),Array.isArray(R)&&(Se=R[0]*_e,Ke=R[1]*_e),isNaN(Se)&&(Se=i[0],Ke=i[1]),(Se>14400||Ke>14400)&&(zr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Se=Math.min(14400,Se),Ke=Math.min(14400,Ke)),i=[Se,Ke],n.substr(0,1)){case"l":Ke>Se&&(i=[Ke,Se]);break;case"p":Se>Ke&&(i=[Ke,Se])}Kn(i),$s(gu),ae(Xo),uu!==0&&ae(uu+" J"),eg!==0&&ae(eg+" j"),jt.publish("addPage",{pageNumber:In})},nr=function(R){R>0&&R<=In&&(Ae.splice(R,1),Jt.splice(R,1),In--,D>In&&(D=In),this.setPage(D))},rr=function(R){R>0&&R<=In&&(D=R)},Bi=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return Ae.length-1},Pr=function(R,te,Ce){var Se,Ke=void 0;return Ce=Ce||{},R=R!==void 0?R:St[It].fontName,te=te!==void 0?te:St[It].fontStyle,Se=R.toLowerCase(),dt[Se]!==void 0&&dt[Se][te]!==void 0?Ke=dt[Se][te]:dt[R]!==void 0&&dt[R][te]!==void 0?Ke=dt[R][te]:Ce.disableWarning===!1&&zr.warn("Unable to look up font label for font '"+R+"', '"+te+"'. Refer to getFontList() for available fonts."),Ke||Ce.noFallback||(Ke=dt.times[te])==null&&(Ke=dt.times.normal),Ke},Sn=m.__private__.putInfo=function(){var R=vt(),te=function(Se){return Se};for(var Ce in d!==null&&(te=sr.encryptor(R,0)),ae("<<"),ae("/Producer ("+Nt(te("jsPDF "+vn.version))+")"),it)it.hasOwnProperty(Ce)&&it[Ce]&&ae("/"+Ce.substr(0,1).toUpperCase()+Ce.substr(1)+" ("+Nt(te(it[Ce]))+")");ae("/CreationDate ("+Nt(te($))+")"),ae(">>"),ae("endobj")},jr=m.__private__.putCatalog=function(R){var te=(R=R||{}).rootDictionaryObjId||Jn;switch(vt(),ae("<<"),ae("/Type /Catalog"),ae("/Pages "+te+" 0 R"),He||(He="fullwidth"),He){case"fullwidth":ae("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ae("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ae("/OpenAction [3 0 R /Fit]");break;case"original":ae("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ce=""+He;Ce.substr(Ce.length-1)==="%"&&(He=parseInt(He)/100),typeof He=="number"&&ae("/OpenAction [3 0 R /XYZ null null "+w(He)+"]")}switch(ot||(ot="continuous"),ot){case"continuous":ae("/PageLayout /OneColumn");break;case"single":ae("/PageLayout /SinglePage");break;case"two":case"twoleft":ae("/PageLayout /TwoColumnLeft");break;case"tworight":ae("/PageLayout /TwoColumnRight")}Pe&&ae("/PageMode /"+Pe),jt.publish("putCatalog"),ae(">>"),ae("endobj")},di=m.__private__.putTrailer=function(){ae("trailer"),ae("<<"),ae("/Size "+(ne+1)),ae("/Root "+ne+" 0 R"),ae("/Info "+(ne-1)+" 0 R"),d!==null&&ae("/Encrypt "+sr.oid+" 0 R"),ae("/ID [ <"+U+"> <"+U+"> ]"),ae(">>")},Fi=m.__private__.putHeader=function(){ae("%PDF-"+b),ae("%")},Ii=m.__private__.putXRef=function(){var R="0000000000";ae("xref"),ae("0 "+(ne+1)),ae("0000000000 65535 f ");for(var te=1;te<=ne;te++)typeof ce[te]=="function"?ae((R+ce[te]()).slice(-10)+" 00000 n "):ce[te]!==void 0?ae((R+ce[te]).slice(-10)+" 00000 n "):ae("0000000000 00000 n ")},Wo=m.__private__.buildDocument=function(){Ne(),Ie(se),jt.publish("buildDocument"),Fi(),ar(),Ao(),ri(),d!==null&&Kt(),Sn(),jr();var R=ue;return Ii(),di(),ae("startxref"),ae(""+R),ae("%%EOF"),Ie(Ae[D]),se.join(`
`)},Ci=m.__private__.getBlob=function(R){return new Blob([Fe(R)],{type:"application/pdf"})},$o=m.output=m.__private__.output=Gn(function(R,te){switch(typeof(te=te||{})=="string"?te={filename:te}:te.filename=te.filename||"generated.pdf",R){case void 0:return Wo();case"save":m.save(te.filename);break;case"arraybuffer":return Fe(Wo());case"blob":return Ci(Wo());case"bloburi":case"bloburl":if(Zn.URL!==void 0&&typeof Zn.URL.createObjectURL=="function")return Zn.URL&&Zn.URL.createObjectURL(Ci(Wo()))||void 0;zr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ce="",Se=Wo();try{Ce=fS(Se)}catch{Ce=fS(unescape(encodeURIComponent(Se)))}return"data:application/pdf;filename="+te.filename+";base64,"+Ce;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Zn)==="[object Window]"){var Ke="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",qe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';te.pdfObjectUrl&&(Ke=te.pdfObjectUrl,qe="");var ft='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ke+'"'+qe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(te)+");<\/script></body></html>",Dt=Zn.open();return Dt!==null&&Dt.document.write(ft),Dt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Zn)==="[object Window]"){var un='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(te.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+te.filename+'" width="500px" height="400px" /></body></html>',xn=Zn.open();if(xn!==null){xn.document.write(un);var Nn=this;xn.document.documentElement.querySelector("#pdfViewer").onload=function(){xn.document.title=te.filename,xn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Nn.output("bloburl"))}}return xn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Zn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var jn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",te)+'"></iframe></body></html>',Qr=Zn.open();if(Qr!==null&&(Qr.document.write(jn),Qr.document.title=te.filename),Qr||typeof safari>"u")return Qr;break;case"datauri":case"dataurl":return Zn.document.location.href=this.output("datauristring",te);default:return null}}),Vo=function(R){return Array.isArray(ln)===!0&&ln.indexOf(R)>-1};switch(r){case"pt":_e=1;break;case"mm":_e=72/25.4;break;case"cm":_e=72/2.54;break;case"in":_e=72;break;case"px":_e=Vo("px_scaling")==1?.75:96/72;break;case"pc":case"em":_e=12;break;case"ex":_e=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);_e=r}var sr=null;O(),P();var Ri=function(R){return d!==null?sr.encryptor(R,0):function(te){return te}},Oi=m.__private__.getPageInfo=m.getPageInfo=function(R){if(isNaN(R)||R%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Jt[R].objId,pageNumber:R,pageContext:Jt[R]}},Cn=m.__private__.getPageInfoByObjId=function(R){if(isNaN(R)||R%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var te in Jt)if(Jt[te].objId===R)break;return Oi(te)},xa=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:Jt[D].objId,pageNumber:D,pageContext:Jt[D]}};m.addPage=function(){return zn.apply(this,arguments),this},m.setPage=function(){return rr.apply(this,arguments),Ie.call(this,Ae[D]),this},m.insertPage=function(R){return this.addPage(),this.movePage(D,R),this},m.movePage=function(R,te){var Ce,Se;if(R>te){Ce=Ae[R],Se=Jt[R];for(var Ke=R;Ke>te;Ke--)Ae[Ke]=Ae[Ke-1],Jt[Ke]=Jt[Ke-1];Ae[te]=Ce,Jt[te]=Se,this.setPage(te)}else if(R<te){Ce=Ae[R],Se=Jt[R];for(var qe=R;qe<te;qe++)Ae[qe]=Ae[qe+1],Jt[qe]=Jt[qe+1];Ae[te]=Ce,Jt[te]=Se,this.setPage(te)}return this},m.deletePage=function(){return nr.apply(this,arguments),this},m.__private__.text=m.text=function(R,te,Ce,Se,Ke){var qe,ft,Dt,un,xn,Nn,jn,Qr,ii,fi=(Se=Se||{}).scope||this;if(typeof R=="number"&&typeof te=="number"&&(typeof Ce=="string"||Array.isArray(Ce))){var ro=Ce;Ce=te,te=R,R=ro}if(arguments[3]instanceof ht?(E("The transform parameter of text() with a Matrix value"),ii=Ke):(Dt=arguments[4],un=arguments[5],wt(jn=arguments[3])==="object"&&jn!==null||(typeof Dt=="string"&&(un=Dt,Dt=null),typeof jn=="string"&&(un=jn,jn=null),typeof jn=="number"&&(Dt=jn,jn=null),Se={flags:jn,angle:Dt,align:un})),isNaN(te)||isNaN(Ce)||R==null)throw new Error("Invalid arguments passed to jsPDF.text");if(R.length===0)return fi;var Ki="",Ea=!1,ea=typeof Se.lineHeightFactor=="number"?Se.lineHeightFactor:Qs,Aa=fi.internal.scaleFactor;function As(Nr){return Nr=Nr.split("	").join(Array(Se.TabLen||9).join(" ")),Nt(Nr,jn)}function Cu(Nr){for(var br,ai=Nr.concat(),mi=[],al=ai.length;al--;)typeof(br=ai.shift())=="string"?mi.push(br):Array.isArray(Nr)&&(br.length===1||br[1]===void 0&&br[2]===void 0)?mi.push(br[0]):mi.push([br[0],br[1],br[2]]);return mi}function Ug(Nr,br){var ai;if(typeof Nr=="string")ai=br(Nr)[0];else if(Array.isArray(Nr)){for(var mi,al,oc=Nr.concat(),sg=[],hu=oc.length;hu--;)typeof(mi=oc.shift())=="string"?sg.push(br(mi)[0]):Array.isArray(mi)&&typeof mi[0]=="string"&&(al=br(mi[0],mi[1],mi[2]),sg.push([al[0],al[1],al[2]]));ai=sg}return ai}var tg=!1,jg=!0;if(typeof R=="string")tg=!0;else if(Array.isArray(R)){var Qg=R.concat();ft=[];for(var ng,oi=Qg.length;oi--;)(typeof(ng=Qg.shift())!="string"||Array.isArray(ng)&&typeof ng[0]!="string")&&(jg=!1);tg=jg}if(tg===!1)throw new Error('Type of text must be string or Array. "'+R+'" is not recognized.');typeof R=="string"&&(R=R.match(/[\r?\n]/)?R.split(/\r\n|\r|\n/g):[R]);var $g=ze/fi.internal.scaleFactor,qg=$g*(ea-1);switch(Se.baseline){case"bottom":Ce-=qg;break;case"top":Ce+=$g-qg;break;case"hanging":Ce+=$g-2*qg;break;case"middle":Ce+=$g/2-qg}if((Nn=Se.maxWidth||0)>0&&(typeof R=="string"?R=fi.splitTextToSize(R,Nn):Object.prototype.toString.call(R)==="[object Array]"&&(R=R.reduce(function(Nr,br){return Nr.concat(fi.splitTextToSize(br,Nn))},[]))),qe={text:R,x:te,y:Ce,options:Se,mutex:{pdfEscape:Nt,activeFontKey:It,fonts:St,activeFontSize:ze}},jt.publish("preProcessText",qe),R=qe.text,Dt=(Se=qe.options).angle,!(ii instanceof ht)&&Dt&&typeof Dt=="number"){Dt*=Math.PI/180,Se.rotationDirection===0&&(Dt=-Dt),B===v.ADVANCED&&(Dt=-Dt);var ec=Math.cos(Dt),tc=Math.sin(Dt);ii=new ht(ec,tc,-tc,ec,0,0)}else Dt&&Dt instanceof ht&&(ii=Dt);B!==v.ADVANCED||ii||(ii=ut),(xn=Se.charSpace||fs)!==void 0&&(Ki+=x(Y(xn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Qr=Se.horizontalScale)!==void 0&&(Ki+=x(100*Qr)+` Tz
`),Se.lang;var po=-1,rg=Se.renderingMode!==void 0?Se.renderingMode:Se.stroke,Bl=fi.internal.getCurrentPageInfo().pageContext;switch(rg){case 0:case!1:case"fill":po=0;break;case 1:case!0:case"stroke":po=1;break;case 2:case"fillThenStroke":po=2;break;case 3:case"invisible":po=3;break;case 4:case"fillAndAddForClipping":po=4;break;case 5:case"strokeAndAddPathForClipping":po=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":po=6;break;case 7:case"addToPathForClipping":po=7}var md=Bl.usedRenderingMode!==void 0?Bl.usedRenderingMode:-1;po!==-1?Ki+=po+` Tr
`:md!==-1&&(Ki+=`0 Tr
`),po!==-1&&(Bl.usedRenderingMode=po),un=Se.align||"left";var bo,nc=ze*ea,fu=fi.internal.pageSize.getWidth(),rc=St[It];xn=Se.charSpace||fs,Nn=Se.maxWidth||0,jn=Object.assign({autoencode:!0,noBOM:!0},Se.flags);var il=[],ps=function(Nr){return fi.getStringUnitWidth(Nr,{font:rc,charSpace:xn,fontSize:ze,doKerning:!1})*ze/Aa};if(Object.prototype.toString.call(R)==="[object Array]"){var yo;ft=Cu(R),un!=="left"&&(bo=ft.map(ps));var io,bs=0;if(un==="right"){te-=bo[0],R=[],oi=ft.length;for(var Rl=0;Rl<oi;Rl++)Rl===0?(io=ma(te),yo=ha(Ce)):(io=Y(bs-bo[Rl]),yo=-nc),R.push([ft[Rl],io,yo]),bs=bo[Rl]}else if(un==="center"){te-=bo[0]/2,R=[],oi=ft.length;for(var wl=0;wl<oi;wl++)wl===0?(io=ma(te),yo=ha(Ce)):(io=Y((bs-bo[wl])/2),yo=-nc),R.push([ft[wl],io,yo]),bs=bo[wl]}else if(un==="left"){R=[],oi=ft.length;for(var ic=0;ic<oi;ic++)R.push(ft[ic])}else if(un==="justify"&&rc.encoding==="Identity-H"){R=[],oi=ft.length,Nn=Nn!==0?Nn:fu;for(var Wl=0,Ir=0;Ir<oi;Ir++)if(yo=Ir===0?ha(Ce):-nc,io=Ir===0?ma(te):Wl,Ir<oi-1){var Vl=Y((Nn-bo[Ir])/(ft[Ir].split(" ").length-1)),oo=ft[Ir].split(" ");R.push([oo[0]+" ",io,yo]),Wl=0;for(var ta=1;ta<oo.length;ta++){var ig=(ps(oo[ta-1]+" "+oo[ta])-ps(oo[ta]))*Aa+Vl;ta==oo.length-1?R.push([oo[ta],ig,0]):R.push([oo[ta]+" ",ig,0]),Wl-=ig}}else R.push([ft[Ir],io,yo]);R.push(["",Wl,0])}else{if(un!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(R=[],oi=ft.length,Nn=Nn!==0?Nn:fu,Ir=0;Ir<oi;Ir++)yo=Ir===0?ha(Ce):-nc,io=Ir===0?ma(te):0,Ir<oi-1?il.push(x(Y((Nn-bo[Ir])/(ft[Ir].split(" ").length-1)))):il.push(0),R.push([ft[Ir],io,yo])}}var mu=typeof Se.R2L=="boolean"?Se.R2L:Ye;mu===!0&&(R=Ug(R,function(Nr,br,ai){return[Nr.split("").reverse().join(""),br,ai]})),qe={text:R,x:te,y:Ce,options:Se,mutex:{pdfEscape:Nt,activeFontKey:It,fonts:St,activeFontSize:ze}},jt.publish("postProcessText",qe),R=qe.text,Ea=qe.mutex.isHex||!1;var og=St[It].encoding;og!=="WinAnsiEncoding"&&og!=="StandardEncoding"||(R=Ug(R,function(Nr,br,ai){return[As(Nr),br,ai]})),ft=Cu(R),R=[];for(var ag,lg,na,kl=0,ol=1,Nl=Array.isArray(ft[0])?ol:kl,Xl="",ys=function(Nr,br,ai){var mi="";return ai instanceof ht?(ai=typeof Se.angle=="number"?sn(ai,new ht(1,0,0,1,Nr,br)):sn(new ht(1,0,0,1,Nr,br),ai),B===v.ADVANCED&&(ai=sn(new ht(1,0,0,-1,0,0),ai)),mi=ai.join(" ")+` Tm
`):mi=x(Nr)+" "+x(br)+` Td
`,mi},_i=0;_i<ft.length;_i++){switch(Xl="",Nl){case ol:na=(Ea?"<":"(")+ft[_i][0]+(Ea?">":")"),ag=parseFloat(ft[_i][1]),lg=parseFloat(ft[_i][2]);break;case kl:na=(Ea?"<":"(")+ft[_i]+(Ea?">":")"),ag=ma(te),lg=ha(Ce)}il!==void 0&&il[_i]!==void 0&&(Xl=il[_i]+` Tw
`),_i===0?R.push(Xl+ys(ag,lg,ii)+na):Nl===kl?R.push(Xl+na):Nl===ol&&R.push(Xl+ys(ag,lg,ii)+na)}R=Nl===kl?R.join(` Tj
T* `):R.join(` Tj
`),R+=` Tj
`;var Jo=`BT
/`;return Jo+=It+" "+ze+` Tf
`,Jo+=x(ze*ea)+` TL
`,Jo+=wi+`
`,Jo+=Ki,Jo+=R,ae(Jo+="ET"),f[It]=!0,fi};var ko=m.__private__.clip=m.clip=function(R){return ae(R==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return ko("evenodd")},m.__private__.discardPath=m.discardPath=function(){return ae("n"),this};var No=m.__private__.isValidStyle=function(R){var te=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(R)!==-1&&(te=!0),te};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(R){return No(R)&&(u=R),this};var _t=m.__private__.getStyle=m.getStyle=function(R){var te=u;switch(R){case"D":case"S":te="S";break;case"F":te="f";break;case"FD":case"DF":te="B";break;case"f":case"f*":case"B":case"B*":te=R}return te},an=m.close=function(){return ae("h"),this};m.stroke=function(){return ae("S"),this},m.fill=function(R){return dr("f",R),this},m.fillEvenOdd=function(R){return dr("f*",R),this},m.fillStroke=function(R){return dr("B",R),this},m.fillStrokeEvenOdd=function(R){return dr("B*",R),this};var dr=function(R,te){wt(te)==="object"?Zl(te,R):ae(R)},Hr=function(R){R===null||B===v.ADVANCED&&R===void 0||(R=_t(R),ae(R))};function pr(R,te,Ce,Se,Ke){var qe=new uI(te||this.boundingBox,Ce||this.xStep,Se||this.yStep,this.gState,Ke||this.matrix);qe.stream=this.stream;var ft=R+"$$"+this.cloneIndex+++"$$";return ct(ft,qe),qe}var Zl=function(R,te){var Ce=hn[R.key],Se=Et[Ce];if(Se instanceof Mu)ae("q"),ae(js(te)),Se.gState&&m.setGState(Se.gState),ae(R.matrix.toString()+" cm"),ae("/"+Ce+" sh"),ae("Q");else if(Se instanceof uI){var Ke=new ht(1,0,0,-1,0,hs());R.matrix&&(Ke=Ke.multiply(R.matrix||ut),Ce=pr.call(Se,R.key,R.boundingBox,R.xStep,R.yStep,Ke).id),ae("q"),ae("/Pattern cs"),ae("/"+Ce+" scn"),Se.gState&&m.setGState(Se.gState),ae(te),ae("Q")}},js=function(R){switch(R){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},fa=m.moveTo=function(R,te){return ae(x(Y(R))+" "+x(L(te))+" m"),this},no=m.lineTo=function(R,te){return ae(x(Y(R))+" "+x(L(te))+" l"),this},qo=m.curveTo=function(R,te,Ce,Se,Ke,qe){return ae([x(Y(R)),x(L(te)),x(Y(Ce)),x(L(Se)),x(Y(Ke)),x(L(qe)),"c"].join(" ")),this};m.__private__.line=m.line=function(R,te,Ce,Se,Ke){if(isNaN(R)||isNaN(te)||isNaN(Ce)||isNaN(Se)||!No(Ke))throw new Error("Invalid arguments passed to jsPDF.line");return B===v.COMPAT?this.lines([[Ce-R,Se-te]],R,te,[1,1],Ke||"S"):this.lines([[Ce-R,Se-te]],R,te,[1,1]).stroke()},m.__private__.lines=m.lines=function(R,te,Ce,Se,Ke,qe){var ft,Dt,un,xn,Nn,jn,Qr,ii,fi,ro,Ki,Ea;if(typeof R=="number"&&(Ea=Ce,Ce=te,te=R,R=Ea),Se=Se||[1,1],qe=qe||!1,isNaN(te)||isNaN(Ce)||!Array.isArray(R)||!Array.isArray(Se)||!No(Ke)||typeof qe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(fa(te,Ce),ft=Se[0],Dt=Se[1],xn=R.length,ro=te,Ki=Ce,un=0;un<xn;un++)(Nn=R[un]).length===2?(ro=Nn[0]*ft+ro,Ki=Nn[1]*Dt+Ki,no(ro,Ki)):(jn=Nn[0]*ft+ro,Qr=Nn[1]*Dt+Ki,ii=Nn[2]*ft+ro,fi=Nn[3]*Dt+Ki,ro=Nn[4]*ft+ro,Ki=Nn[5]*Dt+Ki,qo(jn,Qr,ii,fi,ro,Ki));return qe&&an(),Hr(Ke),this},m.path=function(R){for(var te=0;te<R.length;te++){var Ce=R[te],Se=Ce.c;switch(Ce.op){case"m":fa(Se[0],Se[1]);break;case"l":no(Se[0],Se[1]);break;case"c":qo.apply(this,Se);break;case"h":an()}}return this},m.__private__.rect=m.rect=function(R,te,Ce,Se,Ke){if(isNaN(R)||isNaN(te)||isNaN(Ce)||isNaN(Se)||!No(Ke))throw new Error("Invalid arguments passed to jsPDF.rect");return B===v.COMPAT&&(Se=-Se),ae([x(Y(R)),x(L(te)),x(Y(Ce)),x(Y(Se)),"re"].join(" ")),Hr(Ke),this},m.__private__.triangle=m.triangle=function(R,te,Ce,Se,Ke,qe,ft){if(isNaN(R)||isNaN(te)||isNaN(Ce)||isNaN(Se)||isNaN(Ke)||isNaN(qe)||!No(ft))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ce-R,Se-te],[Ke-Ce,qe-Se],[R-Ke,te-qe]],R,te,[1,1],ft,!0),this},m.__private__.roundedRect=m.roundedRect=function(R,te,Ce,Se,Ke,qe,ft){if(isNaN(R)||isNaN(te)||isNaN(Ce)||isNaN(Se)||isNaN(Ke)||isNaN(qe)||!No(ft))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Dt=4/3*(Math.SQRT2-1);return Ke=Math.min(Ke,.5*Ce),qe=Math.min(qe,.5*Se),this.lines([[Ce-2*Ke,0],[Ke*Dt,0,Ke,qe-qe*Dt,Ke,qe],[0,Se-2*qe],[0,qe*Dt,-Ke*Dt,qe,-Ke,qe],[2*Ke-Ce,0],[-Ke*Dt,0,-Ke,-qe*Dt,-Ke,-qe],[0,2*qe-Se],[0,-qe*Dt,Ke*Dt,-qe,Ke,-qe]],R+Ke,te,[1,1],ft,!0),this},m.__private__.ellipse=m.ellipse=function(R,te,Ce,Se,Ke){if(isNaN(R)||isNaN(te)||isNaN(Ce)||isNaN(Se)||!No(Ke))throw new Error("Invalid arguments passed to jsPDF.ellipse");var qe=4/3*(Math.SQRT2-1)*Ce,ft=4/3*(Math.SQRT2-1)*Se;return fa(R+Ce,te),qo(R+Ce,te-ft,R+qe,te-Se,R,te-Se),qo(R-qe,te-Se,R-Ce,te-ft,R-Ce,te),qo(R-Ce,te+ft,R-qe,te+Se,R,te+Se),qo(R+qe,te+Se,R+Ce,te+ft,R+Ce,te),Hr(Ke),this},m.__private__.circle=m.circle=function(R,te,Ce,Se){if(isNaN(R)||isNaN(te)||isNaN(Ce)||!No(Se))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(R,te,Ce,Ce,Se)},m.setFont=function(R,te,Ce){return Ce&&(te=H(te,Ce)),It=Pr(R,te,{disableWarning:!1}),this};var Tg=m.__private__.getFont=m.getFont=function(){return St[Pr.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var R,te,Ce={};for(R in dt)if(dt.hasOwnProperty(R))for(te in Ce[R]=[],dt[R])dt[R].hasOwnProperty(te)&&Ce[R].push(te);return Ce},m.addFont=function(R,te,Ce,Se,Ke){var qe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&qe.indexOf(arguments[3])!==-1?Ke=arguments[3]:arguments[3]&&qe.indexOf(arguments[3])==-1&&(Ce=H(Ce,Se)),Ke=Ke||"Identity-H",Ur.call(this,R,te,Ce,Ke)};var Qs,gu=e.lineWidth||.200025,Is=m.__private__.getLineWidth=m.getLineWidth=function(){return gu},$s=m.__private__.setLineWidth=m.setLineWidth=function(R){return gu=R,ae(x(Y(R))+" w"),this};m.__private__.setLineDash=vn.API.setLineDash=vn.API.setLineDashPattern=function(R,te){if(R=R||[],te=te||0,isNaN(te)||!Array.isArray(R))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return R=R.map(function(Ce){return x(Y(Ce))}).join(" "),te=x(Y(te)),ae("["+R+"] "+te+" d"),this};var zg=m.__private__.getLineHeight=m.getLineHeight=function(){return ze*Qs};m.__private__.getLineHeight=m.getLineHeight=function(){return ze*Qs};var cu=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(R){return typeof(R=R||1.15)=="number"&&(Qs=R),this},Ha=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return Qs};cu(e.lineHeight);var ma=m.__private__.getHorizontalCoordinate=function(R){return Y(R)},ha=m.__private__.getVerticalCoordinate=function(R){return B===v.ADVANCED?R:Jt[D].mediaBox.topRightY-Jt[D].mediaBox.bottomLeftY-Y(R)},Cd=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(R){return x(ma(R))},Ya=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(R){return x(ha(R))},Xo=e.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return yn(Xo)},m.__private__.setStrokeColor=m.setDrawColor=function(R,te,Ce,Se){return Xo=qt({ch1:R,ch2:te,ch3:Ce,ch4:Se,pdfColorType:"draw",precision:2}),ae(Xo),this};var Dg=e.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return yn(Dg)},m.__private__.setFillColor=m.setFillColor=function(R,te,Ce,Se){return Dg=qt({ch1:R,ch2:te,ch3:Ce,ch4:Se,pdfColorType:"fill",precision:2}),ae(Dg),this};var wi=e.textColor||"0 g",Cs=m.__private__.getTextColor=m.getTextColor=function(){return yn(wi)};m.__private__.setTextColor=m.setTextColor=function(R,te,Ce,Se){return wi=qt({ch1:R,ch2:te,ch3:Ce,ch4:Se,pdfColorType:"text",precision:3}),this};var fs=e.charSpace,qs=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(fs||0)};m.__private__.setCharSpace=m.setCharSpace=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return fs=R,this};var uu=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(R){var te=m.CapJoinStyles[R];if(te===void 0)throw new Error("Line cap style of '"+R+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return uu=te,ae(te+" J"),this};var eg=0;m.__private__.setLineJoin=m.setLineJoin=function(R){var te=m.CapJoinStyles[R];if(te===void 0)throw new Error("Line join style of '"+R+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return eg=te,ae(te+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(R){if(R=R||0,isNaN(R))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ae(x(Y(R))+" M"),this},m.GState=xp,m.setGState=function(R){(R=typeof R=="string"?mn[Xn[R]]:Pg(null,R)).equals(Mn)||(ae("/"+R.id+" gs"),Mn=R)};var Pg=function(R,te){if(!R||!Xn[R]){var Ce=!1;for(var Se in mn)if(mn.hasOwnProperty(Se)&&mn[Se].equals(te)){Ce=!0;break}if(Ce)te=mn[Se];else{var Ke="GS"+(Object.keys(mn).length+1).toString(10);mn[Ke]=te,te.id=Ke}return R&&(Xn[R]=te.id),jt.publish("addGState",te),te}};m.addGState=function(R,te){return Pg(R,te),this},m.saveGraphicsState=function(){return ae("q"),Wt.push({key:It,size:ze,color:wi}),this},m.restoreGraphicsState=function(){ae("Q");var R=Wt.pop();return It=R.key,ze=R.size,wi=R.color,Mn=null,this},m.setCurrentTransformationMatrix=function(R){return ae(R.toString()+" cm"),this},m.comment=function(R){return ae("#"+R),this};var rl=function(R,te){var Ce=R||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ce},set:function(qe){isNaN(qe)||(Ce=parseFloat(qe))}});var Se=te||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Se},set:function(qe){isNaN(qe)||(Se=parseFloat(qe))}});var Ke="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ke},set:function(qe){Ke=qe.toString()}}),this},ms=function(R,te,Ce,Se){rl.call(this,R,te),this.type="rect";var Ke=Ce||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ke},set:function(ft){isNaN(ft)||(Ke=parseFloat(ft))}});var qe=Se||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return qe},set:function(ft){isNaN(ft)||(qe=parseFloat(ft))}}),this},Og=function(){this.page=In,this.currentPage=D,this.pages=Ae.slice(0),this.pagesContext=Jt.slice(0),this.x=Ot,this.y=Qe,this.matrix=st,this.width=Gl(D),this.height=hs(D),this.outputDestination=me,this.id="",this.objectNumber=-1};Og.prototype.restore=function(){In=this.page,D=this.currentPage,Jt=this.pagesContext,Ae=this.pages,Ot=this.x,Qe=this.y,st=this.matrix,du(D,this.width),Iu(D,this.height),me=this.outputDestination};var fd=function(R,te,Ce,Se,Ke){yt.push(new Og),In=D=0,Ae=[],Ot=R,Qe=te,st=Ke,Kn([Ce,Se])},fC=function(R){if(Rt[R])yt.pop().restore();else{var te=new Og,Ce="Xo"+(Object.keys(Vt).length+1).toString(10);te.id=Ce,Rt[R]=Ce,Vt[Ce]=te,jt.publish("addFormObject",te),yt.pop().restore()}};for(var _g in m.beginFormObject=function(R,te,Ce,Se,Ke){return fd(R,te,Ce,Se,Ke),this},m.endFormObject=function(R){return fC(R),this},m.doFormObject=function(R,te){var Ce=Vt[Rt[R]];return ae("q"),ae(te.toString()+" cm"),ae("/"+Ce.id+" Do"),ae("Q"),this},m.getFormObject=function(R){var te=Vt[Rt[R]];return{x:te.x,y:te.y,width:te.width,height:te.height,matrix:te.matrix}},m.save=function(R,te){return R=R||"generated.pdf",(te=te||{}).returnPromise=te.returnPromise||!1,te.returnPromise===!1?(Fu(Ci(Wo()),R),typeof Fu.unload=="function"&&Zn.setTimeout&&setTimeout(Fu.unload,911),this):new Promise(function(Ce,Se){try{var Ke=Fu(Ci(Wo()),R);typeof Fu.unload=="function"&&Zn.setTimeout&&setTimeout(Fu.unload,911),Ce(Ke)}catch(qe){Se(qe.message)}})},vn.API)vn.API.hasOwnProperty(_g)&&(_g==="events"&&vn.API.events.length?function(R,te){var Ce,Se,Ke;for(Ke=te.length-1;Ke!==-1;Ke--)Ce=te[Ke][0],Se=te[Ke][1],R.subscribe.apply(R,[Ce].concat(typeof Se=="function"?[Se]:Se))}(jt,vn.API.events):m[_g]=vn.API[_g]);var Gl=m.getPageWidth=function(R){return(Jt[R=R||D].mediaBox.topRightX-Jt[R].mediaBox.bottomLeftX)/_e},du=m.setPageWidth=function(R,te){Jt[R].mediaBox.topRightX=te*_e+Jt[R].mediaBox.bottomLeftX},hs=m.getPageHeight=function(R){return(Jt[R=R||D].mediaBox.topRightY-Jt[R].mediaBox.bottomLeftY)/_e},Iu=m.setPageHeight=function(R,te){Jt[R].mediaBox.topRightY=te*_e+Jt[R].mediaBox.bottomLeftY};return m.internal={pdfEscape:Nt,getStyle:_t,getFont:Tg,getFontSize:Le,getCharSpace:qs,getTextColor:Cs,getLineHeight:zg,getLineHeightFactor:Ha,getLineWidth:Is,write:Ee,getHorizontalCoordinate:ma,getVerticalCoordinate:ha,getCoordinateString:Cd,getVerticalCoordinateString:Ya,collections:{},newObject:vt,newAdditionalObject:Tt,newObjectDeferred:Bt,newObjectDeferredBegin:kt,getFilters:Vn,putStream:En,events:jt,scaleFactor:_e,pageSize:{getWidth:function(){return Gl(D)},setWidth:function(R){du(D,R)},getHeight:function(){return hs(D)},setHeight:function(R){Iu(D,R)}},encryptionOptions:d,encryption:sr,getEncryptor:Ri,output:$o,getNumberOfPages:Bi,pages:Ae,out:ae,f2:w,f3:V,getPageInfo:Oi,getPageInfoByObjId:Cn,getCurrentPageInfo:xa,getPDFVersion:p,Point:rl,Rectangle:ms,Matrix:ht,hasHotfix:Vo},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Gl(D)},set:function(R){du(D,R)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return hs(D)},set:function(R){Iu(D,R)},enumerable:!0,configurable:!0}),to.call(m,ke),It="F1",zn(i,n),jt.publish("initialized"),m}nI.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},nI.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},nI.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},nI.prototype.processOwnerPassword=function(e,t){return hS(mS(t).substr(0,5),e)},nI.prototype.encryptor=function(e,t){var n=mS(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return hS(n,r)}},xp.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||wt(e)!==wt(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return r===0},vn.API={events:[]},vn.version="2.5.2";var Si=vn.API,x1=1,Id=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},eI=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Hn=function(e){return e.toFixed(2)},wc=function(e){return e.toFixed(5)};Si.__acroform__={};var Ja=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},FW=function(e){return e*x1},Vs=function(e){var t=new jH,n=nn.internal.getHeight(e)||0,r=nn.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Hn(r)),Number(Hn(n))],t},oge=Si.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},age=Si.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},lge=Si.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},Ji=Si.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return lge(e,t-1)},xi=Si.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return oge(e,t-1)},Hi=Si.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return age(e,t-1)},sge=Si.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,i=e[0],o=e[1],a=e[2],l=e[3],g={};return g.lowerLeft_X=n(i)||0,g.lowerLeft_Y=r(o+l)||0,g.upperRight_X=n(i+a)||0,g.upperRight_Y=r(o)||0,[Number(Hn(g.lowerLeft_X)),Number(Hn(g.lowerLeft_Y)),Number(Hn(g.upperRight_X)),Number(Hn(g.upperRight_Y))]},gge=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=AS(e,n),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+Hn(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var o=Vs(e);return o.scope=e.scope,o.stream=t.join(`
`),o}},AS=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function(V){return V.split(`
`)}):i.map(function(V){return[V]});var o=n,a=nn.internal.getHeight(e)||0;a=a<0?-a:a;var l=nn.internal.getWidth(e)||0;l=l<0?-l:l;var g=function(V,Y,M){if(V+1<i.length){var L=Y+" "+i[V+1][0];return Kh(L,e,M).width<=l-4}return!1};o++;e:for(;o>0;){t="",o--;var u,d,C=Kh("3",e,o).height,f=e.multiline?a-o:(a-C)/2,m=f+=2,b=0,p=0,y=0;if(o<=0){t=`(...) Tj
`,t+="% Width of Text: "+Kh(t,e,o=12).width+", FieldWidth:"+l+`
`;break}for(var S="",v=0,B=0;B<i.length;B++)if(i.hasOwnProperty(B)){var W=!1;if(i[B].length!==1&&y!==i[B].length-1){if((C+2)*(v+2)+2>a)continue e;S+=i[B][y],W=!0,p=B,B--}else{S=(S+=i[B][y]+" ").substr(S.length-1)==" "?S.substr(0,S.length-1):S;var J=parseInt(B),H=g(J,S,o),x=B>=i.length-1;if(H&&!x){S+=" ",y=0;continue}if(H||x){if(x)p=J;else if(e.multiline&&(C+2)*(v+2)+2>a)continue e}else{if(!e.multiline||(C+2)*(v+2)+2>a)continue e;p=J}}for(var E="",F=b;F<=p;F++){var w=i[F];if(e.multiline){if(F===p){E+=w[y]+" ",y=(y+1)%w.length;continue}if(F===b){E+=w[w.length-1]+" ";continue}}E+=w[0]+" "}switch(E=E.substr(E.length-1)==" "?E.substr(0,E.length-1):E,d=Kh(E,e,o).width,e.textAlign){case"right":u=l-d-2;break;case"center":u=(l-d)/2;break;case"left":default:u=2}t+=Hn(u)+" "+Hn(m)+` Td
`,t+="("+Id(E)+`) Tj
`,t+=-Hn(u)+` 0 Td
`,m=-(o+2),d=0,b=W?p:p+1,v++,S=""}break}return r.text=t,r.fontSize=o,r},Kh=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},cge={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},uge=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},dge=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=n,i=e[n];t.internal.newObjectDeferredBegin(i.objId,!0),wt(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete e[r]}},Ige=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(us.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(cge)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");x1=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new QH,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var o=r[i];o.objId=void 0,o.hasAnnotation&&uge(o,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(r,i){var o=!r;for(var a in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(a)){var l=r[a],g=[],u=l.Rect;if(l.Rect&&(l.Rect=sge(l.Rect,i)),i.internal.newObjectDeferredBegin(l.objId,!0),l.DA=nn.createDefaultAppearanceStream(l),wt(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(g=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var d=gge(l);g.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(l.appearanceStreamContent){var C="";for(var f in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(f)){var m=l.appearanceStreamContent[f];if(C+="/"+f+" ",C+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var a in m)if(m.hasOwnProperty(a)){var b=m[a];typeof b=="function"&&(b=b.call(i,l)),C+="/"+a+" "+b+" ",i.internal.acroformPlugin.xForms.indexOf(b)>=0||i.internal.acroformPlugin.xForms.push(b)}}else typeof(b=m)=="function"&&(b=b.call(i,l)),C+="/"+a+" "+b,i.internal.acroformPlugin.xForms.indexOf(b)>=0||i.internal.acroformPlugin.xForms.push(b);C+=">>"}g.push({key:"AP",value:`<<
`+C+">>"})}i.internal.putStream({additionalKeyValues:g,objectId:l.objId}),i.internal.out("endobj")}o&&dge(i.internal.acroformPlugin.xForms,i)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},UH=Si.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(a){return a};if(Array.isArray(e)){for(var i="[",o=0;o<e.length;o++)switch(o!==0&&(i+=" "),wt(e[o])){case"boolean":case"number":case"object":i+=e[o].toString();break;case"string":e[o].substr(0,1)!=="/"?(t!==void 0&&n&&(r=n.internal.getEncryptor(t)),i+="("+Id(r(e[o].toString()))+")"):i+=e[o].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},hv=function(e,t,n){var r=function(i){return i};return t!==void 0&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Id(r(e))+")"},Es=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Es.prototype.toString=function(){return this.objId+" 0 R"},Es.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Es.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var r=t[n],i=this[r];i&&(Array.isArray(i)?e.push({key:r,value:UH(i,this.objId,this.scope)}):i instanceof Es?(i.scope=this.scope,e.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:r,value:i}))}return e};var jH=function(){Es.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};Ja(jH,Es);var QH=function(){Es.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Id(n(e))+")"}},set:function(n){e=n}})};Ja(QH,Es);var us=function e(){Es.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute F supplied.');t=S}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ji(t,3)},set:function(S){S?this.F=xi(t,3):this.F=Hi(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute Ff supplied.');n=S}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(S){r=S!==void 0?S:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(S){r[0]=S}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(S){r[1]=S}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(S){r[2]=S}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(S){r[3]=S}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(S){switch(S){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=S;break;default:throw new Error('Invalid value "'+S+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof Hp)return;o="FieldObject"+e.FieldNum++}var S=function(v){return v};return this.scope&&(S=this.scope.internal.getEncryptor(this.objId)),"("+Id(S(o))+")"},set:function(S){o=S.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(S){o=S}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(S){a=S}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(S){l=S}});var g=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return g},set:function(S){g=S}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/x1:u},set:function(S){u=S}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(S){d=S}});var C="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!C||this instanceof Hp||this instanceof _u))return hv(C,this.objId,this.scope)},set:function(S){S=S.toString(),C=S}});var f=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof fo?f:hv(f,this.objId,this.scope)},set:function(S){S=S.toString(),f=this instanceof fo?S:S.substr(0,1)==="("?eI(S.substr(1,S.length-2)):eI(S)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof fo?eI(f.substr(1,f.length-1)):f},set:function(S){S=S.toString(),f=this instanceof fo?"/"+S:S}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(S){this.V=S}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof fo?m:hv(m,this.objId,this.scope)},set:function(S){S=S.toString(),m=this instanceof fo?S:S.substr(0,1)==="("?eI(S.substr(1,S.length-2)):eI(S)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof fo?eI(m.substr(1,m.length-1)):m},set:function(S){S=S.toString(),m=this instanceof fo?"/"+S:S}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,p=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return p},set:function(S){S=!!S,p=S}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(S){b=S}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ji(this.Ff,1)},set:function(S){S?this.Ff=xi(this.Ff,1):this.Ff=Hi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ji(this.Ff,2)},set:function(S){S?this.Ff=xi(this.Ff,2):this.Ff=Hi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ji(this.Ff,3)},set:function(S){S?this.Ff=xi(this.Ff,3):this.Ff=Hi(this.Ff,3)}});var y=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(y!==null)return y},set:function(S){if([0,1,2].indexOf(S)===-1)throw new Error('Invalid value "'+S+'" for attribute Q supplied.');y=S}}),Object.defineProperty(this,"textAlign",{get:function(){var S;switch(y){case 0:default:S="left";break;case 1:S="center";break;case 2:S="right"}return S},configurable:!0,enumerable:!0,set:function(S){switch(S){case"right":case 2:y=2;break;case"center":case 1:y=1;break;case"left":case 0:default:y=0}}})};Ja(us,Es);var SI=function(){us.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return UH(t,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(o,a,l){l||(l=1);for(var g,u=[];g=a.exec(o);)u.push(g[l]);return u}(r,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ji(this.Ff,18)},set:function(n){n?this.Ff=xi(this.Ff,18):this.Ff=Hi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ji(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=xi(this.Ff,19):this.Ff=Hi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ji(this.Ff,20)},set:function(n){n?(this.Ff=xi(this.Ff,20),t.sort()):this.Ff=Hi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ji(this.Ff,22)},set:function(n){n?this.Ff=xi(this.Ff,22):this.Ff=Hi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ji(this.Ff,23)},set:function(n){n?this.Ff=xi(this.Ff,23):this.Ff=Hi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ji(this.Ff,27)},set:function(n){n?this.Ff=xi(this.Ff,27):this.Ff=Hi(this.Ff,27)}}),this.hasAppearanceStream=!1};Ja(SI,us);var ZI=function(){SI.call(this),this.fontName="helvetica",this.combo=!1};Ja(ZI,SI);var GI=function(){ZI.call(this),this.combo=!0};Ja(GI,ZI);var AA=function(){GI.call(this),this.edit=!0};Ja(AA,GI);var fo=function(){us.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ji(this.Ff,15)},set:function(n){n?this.Ff=xi(this.Ff,15):this.Ff=Hi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ji(this.Ff,16)},set:function(n){n?this.Ff=xi(this.Ff,16):this.Ff=Hi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ji(this.Ff,17)},set:function(n){n?this.Ff=xi(this.Ff,17):this.Ff=Hi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ji(this.Ff,26)},set:function(n){n?this.Ff=xi(this.Ff,26):this.Ff=Hi(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(o){return o};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,i=[];for(r in i.push("<<"),t)i.push("/"+r+" ("+Id(n(t[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){wt(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};Ja(fo,us);var pA=function(){fo.call(this),this.pushButton=!0};Ja(pA,fo);var BI=function(){fo.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Ja(BI,fo);var Hp=function(){var e,t;us.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(l){return l};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,a=[];for(o in a.push("<<"),r)a.push("/"+o+" ("+Id(i(r[o]))+")");return a.push(">>"),a.join(`
`)},set:function(i){wt(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=nn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ja(Hp,us),BI.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},BI.prototype.createOption=function(e){var t=new Hp;return t.Parent=this,t.optionName=e,this.Kids.push(t),Cge.call(this.scope,t),t};var bA=function(){fo.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=nn.CheckBox.createAppearanceStream()};Ja(bA,fo);var _u=function(){us.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ji(this.Ff,13)},set:function(t){t?this.Ff=xi(this.Ff,13):this.Ff=Hi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ji(this.Ff,21)},set:function(t){t?this.Ff=xi(this.Ff,21):this.Ff=Hi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ji(this.Ff,23)},set:function(t){t?this.Ff=xi(this.Ff,23):this.Ff=Hi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ji(this.Ff,24)},set:function(t){t?this.Ff=xi(this.Ff,24):this.Ff=Hi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ji(this.Ff,25)},set:function(t){t?this.Ff=xi(this.Ff,25):this.Ff=Hi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ji(this.Ff,26)},set:function(t){t?this.Ff=xi(this.Ff,26):this.Ff=Hi(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ja(_u,us);var yA=function(){_u.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ji(this.Ff,14)},set:function(e){e?this.Ff=xi(this.Ff,14):this.Ff=Hi(this.Ff,14)}}),this.password=!0};Ja(yA,_u);var nn={CheckBox:{createAppearanceStream:function(){return{N:{On:nn.CheckBox.YesNormal},D:{On:nn.CheckBox.YesPushDown,Off:nn.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Vs(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),o=AS(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+Hn(nn.internal.getWidth(e))+" "+Hn(nn.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Hn(o.fontSize)+" Tf "+i),n.push("BT"),n.push(o.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=Vs(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),i=[],o=nn.internal.getHeight(e),a=nn.internal.getWidth(e),l=AS(e,e.caption);return i.push("1 g"),i.push("0 0 "+Hn(a)+" "+Hn(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Hn(a-1)+" "+Hn(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Hn(l.fontSize)+" Tf "+r),i.push(l.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=Vs(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Hn(nn.internal.getWidth(e))+" "+Hn(nn.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:nn.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=nn.RadioButton.Circle.YesNormal,t.D[e]=nn.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Vs(e);t.scope=e.scope;var n=[],r=nn.internal.getWidth(e)<=nn.internal.getHeight(e)?nn.internal.getWidth(e)/4:nn.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=nn.internal.Bezier_C,o=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+wc(nn.internal.getWidth(e)/2)+" "+wc(nn.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=Vs(e);t.scope=e.scope;var n=[],r=nn.internal.getWidth(e)<=nn.internal.getHeight(e)?nn.internal.getWidth(e)/4:nn.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*nn.internal.Bezier_C).toFixed(5)),a=Number((r*nn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+wc(nn.internal.getWidth(e)/2)+" "+wc(nn.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+wc(nn.internal.getWidth(e)/2)+" "+wc(nn.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Vs(e);t.scope=e.scope;var n=[],r=nn.internal.getWidth(e)<=nn.internal.getHeight(e)?nn.internal.getWidth(e)/4:nn.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*nn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+wc(nn.internal.getWidth(e)/2)+" "+wc(nn.internal.getHeight(e)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:nn.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=nn.RadioButton.Cross.YesNormal,t.D[e]=nn.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Vs(e);t.scope=e.scope;var n=[],r=nn.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+Hn(nn.internal.getWidth(e)-2)+" "+Hn(nn.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Hn(r.x1.x)+" "+Hn(r.x1.y)+" m"),n.push(Hn(r.x2.x)+" "+Hn(r.x2.y)+" l"),n.push(Hn(r.x4.x)+" "+Hn(r.x4.y)+" m"),n.push(Hn(r.x3.x)+" "+Hn(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=Vs(e);t.scope=e.scope;var n=nn.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+Hn(nn.internal.getWidth(e))+" "+Hn(nn.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Hn(nn.internal.getWidth(e)-2)+" "+Hn(nn.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Hn(n.x1.x)+" "+Hn(n.x1.y)+" m"),r.push(Hn(n.x2.x)+" "+Hn(n.x2.y)+" l"),r.push(Hn(n.x4.x)+" "+Hn(n.x4.y)+" m"),r.push(Hn(n.x3.x)+" "+Hn(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Vs(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Hn(nn.internal.getWidth(e))+" "+Hn(nn.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};nn.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=nn.internal.getWidth(e),n=nn.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},nn.internal.getWidth=function(e){var t=0;return wt(e)==="object"&&(t=FW(e.Rect[2])),t},nn.internal.getHeight=function(e){var t=0;return wt(e)==="object"&&(t=FW(e.Rect[3])),t};var Cge=Si.addField=function(e){if(Ige(this,e),!(e instanceof us))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Si.AcroFormChoiceField=SI,Si.AcroFormListBox=ZI,Si.AcroFormComboBox=GI,Si.AcroFormEditBox=AA,Si.AcroFormButton=fo,Si.AcroFormPushButton=pA,Si.AcroFormRadioButton=BI,Si.AcroFormCheckBox=bA,Si.AcroFormTextField=_u,Si.AcroFormPasswordField=yA,Si.AcroFormAppearance=nn,Si.AcroForm={ChoiceField:SI,ListBox:ZI,ComboBox:GI,EditBox:AA,Button:fo,PushButton:pA,RadioButton:BI,CheckBox:bA,TextField:_u,PasswordField:yA,Appearance:nn},vn.AcroForm={ChoiceField:SI,ListBox:ZI,ComboBox:GI,EditBox:AA,Button:fo,PushButton:pA,RadioButton:BI,CheckBox:bA,TextField:_u,PasswordField:yA,Appearance:nn};vn.AcroForm;function $H(e){return e.reduce(function(t,n,r){return t[n]=r,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(V,Y){var M,L,$,U,_,P=t;if((Y=Y||t)==="RGBA"||V.data!==void 0&&V.data instanceof Uint8ClampedArray&&"height"in V&&"width"in V)return"RGBA";if(H(V))for(_ in n)for($=n[_],M=0;M<$.length;M+=1){for(U=!0,L=0;L<$[M].length;L+=1)if($[M][L]!==void 0&&$[M][L]!==V[L]){U=!1;break}if(U===!0){P=_;break}}else for(_ in n)for($=n[_],M=0;M<$.length;M+=1){for(U=!0,L=0;L<$[M].length;L+=1)if($[M][L]!==void 0&&$[M][L]!==V.charCodeAt(L)){U=!1;break}if(U===!0){P=_;break}}return P===t&&Y!==t&&(P=Y),P},i=function V(Y){for(var M=this.internal.write,L=this.internal.putStream,$=(0,this.internal.getFilters)();$.indexOf("FlateEncode")!==-1;)$.splice($.indexOf("FlateEncode"),1);Y.objectId=this.internal.newObject();var U=[];if(U.push({key:"Type",value:"/XObject"}),U.push({key:"Subtype",value:"/Image"}),U.push({key:"Width",value:Y.width}),U.push({key:"Height",value:Y.height}),Y.colorSpace===y.INDEXED?U.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(Y.palette.length/3-1)+" "+("sMask"in Y&&Y.sMask!==void 0?Y.objectId+2:Y.objectId+1)+" 0 R]"}):(U.push({key:"ColorSpace",value:"/"+Y.colorSpace}),Y.colorSpace===y.DEVICE_CMYK&&U.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),U.push({key:"BitsPerComponent",value:Y.bitsPerComponent}),"decodeParameters"in Y&&Y.decodeParameters!==void 0&&U.push({key:"DecodeParms",value:"<<"+Y.decodeParameters+">>"}),"transparency"in Y&&Array.isArray(Y.transparency)){for(var _="",P=0,ee=Y.transparency.length;P<ee;P++)_+=Y.transparency[P]+" "+Y.transparency[P]+" ";U.push({key:"Mask",value:"["+_+"]"})}Y.sMask!==void 0&&U.push({key:"SMask",value:Y.objectId+1+" 0 R"});var j=Y.filter!==void 0?["/"+Y.filter]:void 0;if(L({data:Y.data,additionalKeyValues:U,alreadyAppliedFilters:j,objectId:Y.objectId}),M("endobj"),"sMask"in Y&&Y.sMask!==void 0){var O="/Predictor "+Y.predictor+" /Colors 1 /BitsPerComponent "+Y.bitsPerComponent+" /Columns "+Y.width,X={width:Y.width,height:Y.height,colorSpace:"DeviceGray",bitsPerComponent:Y.bitsPerComponent,decodeParameters:O,data:Y.sMask};"filter"in Y&&(X.filter=Y.filter),V.call(this,X)}if(Y.colorSpace===y.INDEXED){var D=this.internal.newObject();L({data:E(new Uint8Array(Y.palette)),objectId:D}),M("endobj")}},o=function(){var V=this.internal.collections.addImage_images;for(var Y in V)i.call(this,V[Y])},a=function(){var V,Y=this.internal.collections.addImage_images,M=this.internal.write;for(var L in Y)M("/I"+(V=Y[L]).index,V.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",a))},g=function(){var V=this.internal.collections.addImage_images;return l.call(this),V},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(V){return typeof e["process"+V.toUpperCase()]=="function"},C=function(V){return wt(V)==="object"&&V.nodeType===1},f=function(V,Y){if(V.nodeName==="IMG"&&V.hasAttribute("src")){var M=""+V.getAttribute("src");if(M.indexOf("data:image/")===0)return Zf(unescape(M).split("base64,").pop());var L=e.loadFile(M,!0);if(L!==void 0)return L}if(V.nodeName==="CANVAS"){if(V.width===0||V.height===0)throw new Error("Given canvas must have data. Canvas width: "+V.width+", height: "+V.height);var $;switch(Y){case"PNG":$="image/png";break;case"WEBP":$="image/webp";break;case"JPEG":case"JPG":default:$="image/jpeg"}return Zf(V.toDataURL($,1).split("base64,").pop())}},m=function(V){var Y=this.internal.collections.addImage_images;if(Y){for(var M in Y)if(V===Y[M].alias)return Y[M]}},b=function(V,Y,M){return V||Y||(V=-96,Y=-96),V<0&&(V=-1*M.width*72/V/this.internal.scaleFactor),Y<0&&(Y=-1*M.height*72/Y/this.internal.scaleFactor),V===0&&(V=Y*M.width/M.height),Y===0&&(Y=V*M.height/M.width),[V,Y]},p=function(V,Y,M,L,$,U){var _=b.call(this,M,L,$),P=this.internal.getCoordinateString,ee=this.internal.getVerticalCoordinateString,j=g.call(this);if(M=_[0],L=_[1],j[$.index]=$,U){U*=Math.PI/180;var O=Math.cos(U),X=Math.sin(U),D=function(Q){return Q.toFixed(4)},z=[D(O),D(X),D(-1*X),D(O),0,0,"cm"]}this.internal.write("q"),U?(this.internal.write([1,"0","0",1,P(V),ee(Y+L),"cm"].join(" ")),this.internal.write(z.join(" ")),this.internal.write([P(M),"0","0",P(L),"0","0","cm"].join(" "))):this.internal.write([P(M),"0","0",P(L),P(V),ee(Y+L),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+$.index+" Do"),this.internal.write("Q")},y=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var S=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},v=e.__addimage__.sHashCode=function(V){var Y,M,L=0;if(typeof V=="string")for(M=V.length,Y=0;Y<M;Y++)L=(L<<5)-L+V.charCodeAt(Y),L|=0;else if(H(V))for(M=V.byteLength/2,Y=0;Y<M;Y++)L=(L<<5)-L+V[Y],L|=0;return L},B=e.__addimage__.validateStringAsBase64=function(V){(V=V||"").toString().trim();var Y=!0;return V.length===0&&(Y=!1),V.length%4!=0&&(Y=!1),/^[A-Za-z0-9+/]+$/.test(V.substr(0,V.length-2))===!1&&(Y=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(V.substr(-2))===!1&&(Y=!1),Y},W=e.__addimage__.extractImageFromDataUrl=function(V){var Y=(V=V||"").split("base64,"),M=null;if(Y.length===2){var L=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(Y[0]);Array.isArray(L)&&(M={mimeType:L[1],charset:L[2],data:Y[1]})}return M},J=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(V){return J()&&V instanceof ArrayBuffer};var H=e.__addimage__.isArrayBufferView=function(V){return J()&&typeof Uint32Array<"u"&&(V instanceof Int8Array||V instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&V instanceof Uint8ClampedArray||V instanceof Int16Array||V instanceof Uint16Array||V instanceof Int32Array||V instanceof Uint32Array||V instanceof Float32Array||V instanceof Float64Array)},x=e.__addimage__.binaryStringToUint8Array=function(V){for(var Y=V.length,M=new Uint8Array(Y),L=0;L<Y;L++)M[L]=V.charCodeAt(L);return M},E=e.__addimage__.arrayBufferToBinaryString=function(V){for(var Y="",M=H(V)?V:new Uint8Array(V),L=0;L<M.length;L+=8192)Y+=String.fromCharCode.apply(null,M.subarray(L,L+8192));return Y};e.addImage=function(){var V,Y,M,L,$,U,_,P,ee;if(typeof arguments[1]=="number"?(Y=t,M=arguments[1],L=arguments[2],$=arguments[3],U=arguments[4],_=arguments[5],P=arguments[6],ee=arguments[7]):(Y=arguments[1],M=arguments[2],L=arguments[3],$=arguments[4],U=arguments[5],_=arguments[6],P=arguments[7],ee=arguments[8]),wt(V=arguments[0])==="object"&&!C(V)&&"imageData"in V){var j=V;V=j.imageData,Y=j.format||Y||t,M=j.x||M||0,L=j.y||L||0,$=j.w||j.width||$,U=j.h||j.height||U,_=j.alias||_,P=j.compression||P,ee=j.rotation||j.angle||ee}var O=this.internal.getFilters();if(P===void 0&&O.indexOf("FlateEncode")!==-1&&(P="SLOW"),isNaN(M)||isNaN(L))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var X=F.call(this,V,Y,_,P);return p.call(this,M,L,$,U,X,ee),this};var F=function(V,Y,M,L){var $,U,_;if(typeof V=="string"&&r(V)===t){V=unescape(V);var P=w(V,!1);(P!==""||(P=e.loadFile(V,!0))!==void 0)&&(V=P)}if(C(V)&&(V=f(V,Y)),Y=r(V,Y),!d(Y))throw new Error("addImage does not support files of type '"+Y+"', please ensure that a plugin for '"+Y+"' support is added.");if(((_=M)==null||_.length===0)&&(M=function(ee){return typeof ee=="string"||H(ee)?v(ee):H(ee.data)?v(ee.data):null}(V)),($=m.call(this,M))||(J()&&(V instanceof Uint8Array||Y==="RGBA"||(U=V,V=x(V))),$=this["process"+Y.toUpperCase()](V,u.call(this),M,function(ee){return ee&&typeof ee=="string"&&(ee=ee.toUpperCase()),ee in e.image_compression?ee:S.NONE}(L),U)),!$)throw new Error("An unknown error occurred whilst processing the image.");return $},w=e.__addimage__.convertBase64ToBinaryString=function(V,Y){var M;Y=typeof Y!="boolean"||Y;var L,$="";if(typeof V=="string"){L=(M=W(V))!==null?M.data:V;try{$=Zf(L)}catch(U){if(Y)throw B(L)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+U.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return $};e.getImageProperties=function(V){var Y,M,L="";if(C(V)&&(V=f(V)),typeof V=="string"&&r(V)===t&&((L=w(V,!1))===""&&(L=e.loadFile(V)||""),V=L),M=r(V),!d(M))throw new Error("addImage does not support files of type '"+M+"', please ensure that a plugin for '"+M+"' support is added.");if(!J()||V instanceof Uint8Array||(V=x(V)),!(Y=this["process"+M.toUpperCase()](V)))throw new Error("An unknown error occurred whilst processing the image");return Y.fileType=M,Y}})(vn.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};vn.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var r,i,o,a=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,g=this.internal.getPageInfoByObjId(n.objId),u=n.pageContext.annotations,d=!1,C=0;C<u.length&&!d;C++)switch((r=u[C]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var f=0;f<u.length;f++){r=u[f];var m=this.internal.pdfEscape,b=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject(),y=this.internal.newAdditionalObject(),S=this.internal.getEncryptor(p.objId),v=r.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(r.bounds.x)+" "+l(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y)+"] ")+"/Contents ("+m(S(r.contents))+")",o+=" /Popup "+y.objId+" 0 R",o+=" /P "+g.objId+" 0 R",o+=" /T ("+m(S(v))+") >>",p.content=o;var B=p.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(r.bounds.x+30)+" "+l(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w+30)+" "+l(r.bounds.y)+"] ")+" /Parent "+B,r.open&&(o+=" /Open true"),o+=" >>",y.content=o,this.internal.write(p.objId,"0 R",y.objId,"0 R");break;case"freetext":i="/Rect ["+a(r.bounds.x)+" "+l(r.bounds.y)+" "+a(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y+r.bounds.h)+"] ";var W=r.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+m(b(r.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+W+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(r.options.name){var J=this.annotations._nameMap[r.options.name];r.options.pageNumber=J.page,r.options.top=J.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",o="",r.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+m(b(r.options.url))+") >>";else if(r.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,o+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var H=l(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),o+=" /XYZ "+r.options.left+" "+H+" "+r.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},e.link=function(n,r,i,o,a){var l=this.internal.getCurrentPageInfo(),g=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:g(n),y:u(r),w:g(n+i),h:u(r+o)},options:a,type:"link"})},e.textWithLink=function(n,r,i,o){var a,l,g=this.getTextWidth(n),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){l=o.maxWidth;var d=this.splitTextToSize(n,l).length;a=Math.ceil(u*d)}else l=g,a=u;return this.text(n,r,i,o),i+=.2*u,o.align==="center"&&(r-=g/2),o.align==="right"&&(r-=g),this.link(r,i-u,l,a,o),g},e.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(vn.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var o=e.__arabicParser__.isInArabicSubstitutionA=function(p){return t[p.charCodeAt(0)]!==void 0},a=e.__arabicParser__.isArabicLetter=function(p){return typeof p=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(p)},l=e.__arabicParser__.isArabicEndLetter=function(p){return a(p)&&o(p)&&t[p.charCodeAt(0)].length<=2},g=e.__arabicParser__.isArabicAlfLetter=function(p){return a(p)&&i.indexOf(p.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(p){return a(p)&&o(p)&&t[p.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(p){return a(p)&&o(p)&&t[p.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(p){return a(p)&&o(p)&&t[p.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(p){return a(p)&&o(p)&&t[p.charCodeAt(0)].length==4},C=e.__arabicParser__.resolveLigatures=function(p){var y=0,S=n,v="",B=0;for(y=0;y<p.length;y+=1)S[p.charCodeAt(y)]!==void 0?(B++,typeof(S=S[p.charCodeAt(y)])=="number"&&(v+=String.fromCharCode(S),S=n,B=0),y===p.length-1&&(S=n,v+=p.charAt(y-(B-1)),y-=B-1,B=0)):(S=n,v+=p.charAt(y-B),y-=B,B=0);return v};e.__arabicParser__.isArabicDiacritic=function(p){return p!==void 0&&r[p.charCodeAt(0)]!==void 0};var f=e.__arabicParser__.getCorrectForm=function(p,y,S){return a(p)?o(p)===!1?-1:!u(p)||!a(y)&&!a(S)||!a(S)&&l(y)||l(p)&&!a(y)||l(p)&&g(y)||l(p)&&l(y)?0:d(p)&&a(y)&&!l(y)&&a(S)&&u(S)?3:l(p)||!a(S)?1:2:-1},m=function(p){var y=0,S=0,v=0,B="",W="",J="",H=(p=p||"").split("\\s+"),x=[];for(y=0;y<H.length;y+=1){for(x.push(""),S=0;S<H[y].length;S+=1)B=H[y][S],W=H[y][S-1],J=H[y][S+1],a(B)?(v=f(B,W,J),x[y]+=v!==-1?String.fromCharCode(t[B.charCodeAt(0)][v]):B):x[y]+=B;x[y]=C(x[y])}return x.join(" ")},b=e.__arabicParser__.processArabic=e.processArabic=function(){var p,y=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,S=[];if(Array.isArray(y)){var v=0;for(S=[],v=0;v<y.length;v+=1)Array.isArray(y[v])?S.push([m(y[v][0]),y[v][1],y[v][2]]):S.push([m(y[v])]);p=S}else p=m(y);return typeof arguments[0]=="string"?p:(arguments[0].text=p,arguments[0])};e.events.push(["preProcessText",b])}(vn.API),vn.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(l){n=l}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(l){r=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(l){i=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(l){o=l}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(l){a=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(vn.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var g=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return g},set:function(p){g=p}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(p){u=p}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(p){d=p}});var C=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return C},set:function(p){C=p}});var f=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return f},set:function(p){f=p}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(p){m=p}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(p){b=p}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(g){return r.call(this),this.internal.__cell__.headerFunction=typeof g=="function"?g:void 0,this},e.getTextDimensions=function(g,u){r.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),C=u.font||this.getFont(),f=u.scaleFactor||this.internal.scaleFactor,m=0,b=0,p=0,y=this;if(!Array.isArray(g)&&typeof g!="string"){if(typeof g!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");g=String(g)}var S=u.maxWidth;S>0?typeof g=="string"?g=this.splitTextToSize(g,S):Object.prototype.toString.call(g)==="[object Array]"&&(g=g.reduce(function(B,W){return B.concat(y.splitTextToSize(W,S))},[])):g=Array.isArray(g)?g:[g];for(var v=0;v<g.length;v++)m<(p=this.getStringUnitWidth(g[v],{font:C})*d)&&(m=p);return m!==0&&(b=g.length),{w:m/=f,h:Math.max((b*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/f,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var g=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new o(g.left,g.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=e.cell=function(){var g;g=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,C=this.internal.__cell__.margins||t,f=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===g.lineNumber?(g.x=(u.x||0)+(u.width||0),g.y=u.y||0):u.y+u.height+g.height+C.bottom>this.getPageHeight()?(this.cellAddPage(),g.y=C.top,m&&f&&(this.printHeaderRow(g.lineNumber,!0),g.y+=f[0].height)):g.y=u.y+u.height||g.y),g.text[0]!==void 0&&(this.rect(g.x,g.y,g.width,g.height,n===!0?"FD":void 0),g.align==="right"?this.text(g.text,g.x+g.width-d,g.y+d,{align:"right",baseline:"top"}):g.align==="center"?this.text(g.text,g.x+g.width/2,g.y+d,{align:"center",baseline:"top",maxWidth:g.width-d-d}):this.text(g.text,g.x+d,g.y+d,{align:"left",baseline:"top",maxWidth:g.width-d-d})),this.internal.__cell__.lastCell=g,this};e.table=function(g,u,d,C,f){if(r.call(this),!d)throw new Error("No data for PDF table.");var m,b,p,y,S=[],v=[],B=[],W={},J={},H=[],x=[],E=(f=f||{}).autoSize||!1,F=f.printHeaders!==!1,w=f.css&&f.css["font-size"]!==void 0?16*f.css["font-size"]:f.fontSize||12,V=f.margins||Object.assign({width:this.getPageWidth()},t),Y=typeof f.padding=="number"?f.padding:3,M=f.headerBackgroundColor||"#c8c8c8",L=f.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=F,this.internal.__cell__.margins=V,this.internal.__cell__.table_font_size=w,this.internal.__cell__.padding=Y,this.internal.__cell__.headerBackgroundColor=M,this.internal.__cell__.headerTextColor=L,this.setFontSize(w),C==null)v=S=Object.keys(d[0]),B=S.map(function(){return"left"});else if(Array.isArray(C)&&wt(C[0])==="object")for(S=C.map(function(j){return j.name}),v=C.map(function(j){return j.prompt||j.name||""}),B=C.map(function(j){return j.align||"left"}),m=0;m<C.length;m+=1)J[C[m].name]=C[m].width*(19.049976/25.4);else Array.isArray(C)&&typeof C[0]=="string"&&(v=S=C,B=S.map(function(){return"left"}));if(E||Array.isArray(C)&&typeof C[0]=="string")for(m=0;m<S.length;m+=1){for(W[y=S[m]]=d.map(function(j){return j[y]}),this.setFont(void 0,"bold"),H.push(this.getTextDimensions(v[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=W[y],this.setFont(void 0,"normal"),p=0;p<b.length;p+=1)H.push(this.getTextDimensions(b[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);J[y]=Math.max.apply(null,H)+Y+Y,H=[]}if(F){var $={};for(m=0;m<S.length;m+=1)$[S[m]]={},$[S[m]].text=v[m],$[S[m]].align=B[m];var U=l.call(this,$,J);x=S.map(function(j){return new o(g,u,J[j],U,$[j].text,void 0,$[j].align)}),this.setTableHeaderRow(x),this.printHeaderRow(1,!1)}var _=C.reduce(function(j,O){return j[O.name]=O.align,j},{});for(m=0;m<d.length;m+=1){"rowStart"in f&&f.rowStart instanceof Function&&f.rowStart({row:m,data:d[m]},this);var P=l.call(this,d[m],J);for(p=0;p<S.length;p+=1){var ee=d[m][S[p]];"cellStart"in f&&f.cellStart instanceof Function&&f.cellStart({row:m,col:p,data:ee},this),a.call(this,new o(g,u,J[S[p]],P,ee,m+2,_[S[p]]))}}return this.internal.__cell__.table_x=g,this.internal.__cell__.table_y=u,this};var l=function(g,u){var d=this.internal.__cell__.padding,C=this.internal.__cell__.table_font_size,f=this.internal.scaleFactor;return Object.keys(g).map(function(m){var b=g[m];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,u[m]-d-d)},this).map(function(m){return this.getLineHeightFactor()*m.length*C/f+d+d},this).reduce(function(m,b){return Math.max(m,b)},0)};e.setTableHeaderRow=function(g){r.call(this),this.internal.__cell__.tableHeaderRow=g},e.printHeaderRow=function(g,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var C=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(C[0],C[1],C[2],C[3],void 0,-1)}this.setFont(void 0,"bold");for(var f=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){d=this.internal.__cell__.tableHeaderRow[m].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,f.push(d)),d.lineNumber=g;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,d),this.setTextColor(b)}f.length>0&&this.setTableHeaderRow(f),this.setFont(void 0,"normal"),n=!1}}(vn.API);var qH={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},eY=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],pS=$H(eY),tY=[100,200,300,400,500,600,700,800,900],fge=$H(tY);function bS(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(o){return qH[o=o||"normal"]?o:"normal"}(e.style),r=function(o){if(!o)return 400;if(typeof o=="number")return o>=100&&o<=900&&o%100==0?o:400;if(/^\d00$/.test(o))return parseInt(o);switch(o){case"bold":return 700;case"normal":default:return 400}}(e.weight),i=function(o){return typeof pS[o=o||"normal"]=="number"?o:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,n,r].join(" ")}}}function KW(e,t,n,r){var i;for(i=n;i>=0&&i<t.length;i+=r)if(e[t[i]])return e[t[i]];for(i=n;i>=0&&i<t.length;i-=r)if(e[t[i]])return e[t[i]]}var mge={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},LW={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function MW(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function hge(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},mge,n.genericFontFamilies||{}),o=null,a=null,l=0;l<t.length;++l)if(i[(o=bS(t[l])).family]&&(o.family=i[o.family]),e.hasOwnProperty(o.family)){a=e[o.family];break}if(!(a=a||e[r]))throw new Error("Could not find a font-family for the rule '"+MW(o)+"' and default family '"+r+"'.");if(a=function(g,u){if(u[g])return u[g];var d=pS[g],C=d<=pS.normal?-1:1,f=KW(u,eY,d,C);if(!f)throw new Error("Could not find a matching font-stretch value for "+g);return f}(o.stretch,a),a=function(g,u){if(u[g])return u[g];for(var d=qH[g],C=0;C<d.length;++C)if(u[d[C]])return u[d[C]];throw new Error("Could not find a matching font-style for "+g)}(o.style,a),!(a=function(g,u){if(u[g])return u[g];if(g===400&&u[500])return u[500];if(g===500&&u[400])return u[400];var d=fge[g],C=KW(u,tY,d,g<400?-1:1);if(!C)throw new Error("Could not find a matching font-weight for value "+g);return C}(o.weight,a)))throw new Error("Failed to resolve a font for the rule '"+MW(o)+"'.");return a}function TW(e){return e.trimLeft()}function Age(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function pge(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Lh,zW,DW,Av=["times"];(function(e){var t,n,r,i,o,a,l,g,u,d=function(X){return X=X||{},this.isStrokeTransparent=X.isStrokeTransparent||!1,this.strokeOpacity=X.strokeOpacity||1,this.strokeStyle=X.strokeStyle||"#000000",this.fillStyle=X.fillStyle||"#000000",this.isFillTransparent=X.isFillTransparent||!1,this.fillOpacity=X.fillOpacity||1,this.font=X.font||"10px sans-serif",this.textBaseline=X.textBaseline||"alphabetic",this.textAlign=X.textAlign||"left",this.lineWidth=X.lineWidth||1,this.lineJoin=X.lineJoin||"miter",this.lineCap=X.lineCap||"butt",this.path=X.path||[],this.transform=X.transform!==void 0?X.transform.clone():new g,this.globalCompositeOperation=X.globalCompositeOperation||"normal",this.globalAlpha=X.globalAlpha||1,this.clip_path=X.clip_path||[],this.currentPoint=X.currentPoint||new a,this.miterLimit=X.miterLimit||10,this.lastPoint=X.lastPoint||new a,this.lineDashOffset=X.lineDashOffset||0,this.lineDash=X.lineDash||[],this.margin=X.margin||[0,0,0,0],this.prevPageLastElemOffset=X.prevPageLastElemOffset||0,this.ignoreClearRect=typeof X.ignoreClearRect!="boolean"||X.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new C(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,a=this.internal.Point,l=this.internal.Rectangle,g=this.internal.Matrix,u=new d}]);var C=function(X){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var D=X;Object.defineProperty(this,"pdf",{get:function(){return D}});var z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return z},set:function(Ie){z=!!Ie}});var Q=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Q},set:function(Ie){Q=!!Ie}});var ne=0;Object.defineProperty(this,"posX",{get:function(){return ne},set:function(Ie){isNaN(Ie)||(ne=Ie)}});var ce=0;Object.defineProperty(this,"posY",{get:function(){return ce},set:function(Ie){isNaN(Ie)||(ce=Ie)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Ie){var ae;typeof Ie=="number"?ae=[Ie,Ie,Ie,Ie]:((ae=new Array(4))[0]=Ie[0],ae[1]=Ie.length>=2?Ie[1]:ae[0],ae[2]=Ie.length>=3?Ie[2]:ae[0],ae[3]=Ie.length>=4?Ie[3]:ae[1]),u.margin=ae}});var se=!1;Object.defineProperty(this,"autoPaging",{get:function(){return se},set:function(Ie){se=Ie}});var ue=0;Object.defineProperty(this,"lastBreak",{get:function(){return ue},set:function(Ie){ue=Ie}});var ve=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ve},set:function(Ie){ve=Ie}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Ie){Ie instanceof d&&(u=Ie)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Ie){u.path=Ie}});var Ae=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ae},set:function(Ie){Ae=Ie}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ie){var ae;ae=f(Ie),this.ctx.fillStyle=ae.style,this.ctx.isFillTransparent=ae.a===0,this.ctx.fillOpacity=ae.a,this.pdf.setFillColor(ae.r,ae.g,ae.b,{a:ae.a}),this.pdf.setTextColor(ae.r,ae.g,ae.b,{a:ae.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ie){var ae=f(Ie);this.ctx.strokeStyle=ae.style,this.ctx.isStrokeTransparent=ae.a===0,this.ctx.strokeOpacity=ae.a,ae.a===0?this.pdf.setDrawColor(255,255,255):(ae.a,this.pdf.setDrawColor(ae.r,ae.g,ae.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ie){["butt","round","square"].indexOf(Ie)!==-1&&(this.ctx.lineCap=Ie,this.pdf.setLineCap(Ie))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ie){isNaN(Ie)||(this.ctx.lineWidth=Ie,this.pdf.setLineWidth(Ie))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ie){["bevel","round","miter"].indexOf(Ie)!==-1&&(this.ctx.lineJoin=Ie,this.pdf.setLineJoin(Ie))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ie){isNaN(Ie)||(this.ctx.miterLimit=Ie,this.pdf.setMiterLimit(Ie))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ie){this.ctx.textBaseline=Ie}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ie){["right","end","center","left","start"].indexOf(Ie)!==-1&&(this.ctx.textAlign=Ie)}});var be=null;function me(Ie,ae){if(be===null){var Ee=function(Fe){var ke=[];return Object.keys(Fe).forEach(function(ze){Fe[ze].forEach(function(He){var Le=null;switch(He){case"bold":Le={family:ze,weight:"bold"};break;case"italic":Le={family:ze,style:"italic"};break;case"bolditalic":Le={family:ze,weight:"bold",style:"italic"};break;case"":case"normal":Le={family:ze}}Le!==null&&(Le.ref={name:ze,style:He},ke.push(Le))})}),ke}(Ie.getFontList());be=function(Fe){for(var ke={},ze=0;ze<Fe.length;++ze){var He=bS(Fe[ze]),Le=He.family,Ye=He.stretch,Pe=He.style,$e=He.weight;ke[Le]=ke[Le]||{},ke[Le][Ye]=ke[Le][Ye]||{},ke[Le][Ye][Pe]=ke[Le][Ye][Pe]||{},ke[Le][Ye][Pe][$e]=He}return ke}(Ee.concat(ae))}return be}var Ne=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ne},set:function(Ie){be=null,Ne=Ie}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ie){var ae;if(this.ctx.font=Ie,(ae=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ie))!==null){var Ee=ae[1],Fe=(ae[2],ae[3]),ke=ae[4],ze=(ae[5],ae[6]),He=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ke)[2];ke=Math.floor(He==="px"?parseFloat(ke)*this.pdf.internal.scaleFactor:He==="em"?parseFloat(ke)*this.pdf.getFontSize():parseFloat(ke)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ke);var Le=function(it){var It,_e,Ot=[],Qe=it.trim();if(Qe==="")return Av;if(Qe in LW)return[LW[Qe]];for(;Qe!=="";){switch(_e=null,It=(Qe=TW(Qe)).charAt(0)){case'"':case"'":_e=Age(Qe.substring(1),It);break;default:_e=pge(Qe)}if(_e===null||(Ot.push(_e[0]),(Qe=TW(_e[1]))!==""&&Qe.charAt(0)!==","))return Av;Qe=Qe.replace(/^,/,"")}return Ot}(ze);if(this.fontFaces){var Ye=hge(me(this.pdf,this.fontFaces),Le.map(function(it){return{family:it,stretch:"normal",weight:Fe,style:Ee}}));this.pdf.setFont(Ye.ref.name,Ye.ref.style)}else{var Pe="";(Fe==="bold"||parseInt(Fe,10)>=700||Ee==="bold")&&(Pe="bold"),Ee==="italic"&&(Pe+="italic"),Pe.length===0&&(Pe="normal");for(var $e="",ot={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ct=0;Ct<Le.length;Ct++){if(this.pdf.internal.getFont(Le[Ct],Pe,{noFallback:!0,disableWarning:!0})!==void 0){$e=Le[Ct];break}if(Pe==="bolditalic"&&this.pdf.internal.getFont(Le[Ct],"bold",{noFallback:!0,disableWarning:!0})!==void 0)$e=Le[Ct],Pe="bold";else if(this.pdf.internal.getFont(Le[Ct],"normal",{noFallback:!0,disableWarning:!0})!==void 0){$e=Le[Ct],Pe="normal";break}}if($e===""){for(var pt=0;pt<Le.length;pt++)if(ot[Le[pt]]){$e=ot[Le[pt]];break}}$e=$e===""?"Times":$e,this.pdf.setFont($e,Pe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ie){this.ctx.globalCompositeOperation=Ie}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ie){this.ctx.globalAlpha=Ie}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ie){this.ctx.lineDashOffset=Ie,O.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ie){this.ctx.lineDash=Ie,O.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ie){this.ctx.ignoreClearRect=!!Ie}})};C.prototype.setLineDash=function(X){this.lineDash=X},C.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},C.prototype.fill=function(){W.call(this,"fill",!1)},C.prototype.stroke=function(){W.call(this,"stroke",!1)},C.prototype.beginPath=function(){this.path=[{type:"begin"}]},C.prototype.moveTo=function(X,D){if(isNaN(X)||isNaN(D))throw zr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var z=this.ctx.transform.applyToPoint(new a(X,D));this.path.push({type:"mt",x:z.x,y:z.y}),this.ctx.lastPoint=new a(X,D)},C.prototype.closePath=function(){var X=new a(0,0),D=0;for(D=this.path.length-1;D!==-1;D--)if(this.path[D].type==="begin"&&wt(this.path[D+1])==="object"&&typeof this.path[D+1].x=="number"){X=new a(this.path[D+1].x,this.path[D+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(X.x,X.y)},C.prototype.lineTo=function(X,D){if(isNaN(X)||isNaN(D))throw zr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var z=this.ctx.transform.applyToPoint(new a(X,D));this.path.push({type:"lt",x:z.x,y:z.y}),this.ctx.lastPoint=new a(z.x,z.y)},C.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),W.call(this,null,!0)},C.prototype.quadraticCurveTo=function(X,D,z,Q){if(isNaN(z)||isNaN(Q)||isNaN(X)||isNaN(D))throw zr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ne=this.ctx.transform.applyToPoint(new a(z,Q)),ce=this.ctx.transform.applyToPoint(new a(X,D));this.path.push({type:"qct",x1:ce.x,y1:ce.y,x:ne.x,y:ne.y}),this.ctx.lastPoint=new a(ne.x,ne.y)},C.prototype.bezierCurveTo=function(X,D,z,Q,ne,ce){if(isNaN(ne)||isNaN(ce)||isNaN(X)||isNaN(D)||isNaN(z)||isNaN(Q))throw zr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var se=this.ctx.transform.applyToPoint(new a(ne,ce)),ue=this.ctx.transform.applyToPoint(new a(X,D)),ve=this.ctx.transform.applyToPoint(new a(z,Q));this.path.push({type:"bct",x1:ue.x,y1:ue.y,x2:ve.x,y2:ve.y,x:se.x,y:se.y}),this.ctx.lastPoint=new a(se.x,se.y)},C.prototype.arc=function(X,D,z,Q,ne,ce){if(isNaN(X)||isNaN(D)||isNaN(z)||isNaN(Q)||isNaN(ne))throw zr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ce=!!ce,!this.ctx.transform.isIdentity){var se=this.ctx.transform.applyToPoint(new a(X,D));X=se.x,D=se.y;var ue=this.ctx.transform.applyToPoint(new a(0,z)),ve=this.ctx.transform.applyToPoint(new a(0,0));z=Math.sqrt(Math.pow(ue.x-ve.x,2)+Math.pow(ue.y-ve.y,2))}Math.abs(ne-Q)>=2*Math.PI&&(Q=0,ne=2*Math.PI),this.path.push({type:"arc",x:X,y:D,radius:z,startAngle:Q,endAngle:ne,counterclockwise:ce})},C.prototype.arcTo=function(X,D,z,Q,ne){throw new Error("arcTo not implemented.")},C.prototype.rect=function(X,D,z,Q){if(isNaN(X)||isNaN(D)||isNaN(z)||isNaN(Q))throw zr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(X,D),this.lineTo(X+z,D),this.lineTo(X+z,D+Q),this.lineTo(X,D+Q),this.lineTo(X,D),this.lineTo(X+z,D),this.lineTo(X,D)},C.prototype.fillRect=function(X,D,z,Q){if(isNaN(X)||isNaN(D)||isNaN(z)||isNaN(Q))throw zr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var ne={};this.lineCap!=="butt"&&(ne.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ne.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(X,D,z,Q),this.fill(),ne.hasOwnProperty("lineCap")&&(this.lineCap=ne.lineCap),ne.hasOwnProperty("lineJoin")&&(this.lineJoin=ne.lineJoin)}},C.prototype.strokeRect=function(X,D,z,Q){if(isNaN(X)||isNaN(D)||isNaN(z)||isNaN(Q))throw zr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(X,D,z,Q),this.stroke())},C.prototype.clearRect=function(X,D,z,Q){if(isNaN(X)||isNaN(D)||isNaN(z)||isNaN(Q))throw zr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(X,D,z,Q))},C.prototype.save=function(X){X=typeof X!="boolean"||X;for(var D=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("q");if(this.pdf.setPage(D),X){this.ctx.fontSize=this.pdf.internal.getFontSize();var Q=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Q}},C.prototype.restore=function(X){X=typeof X!="boolean"||X;for(var D=this.pdf.internal.getCurrentPageInfo().pageNumber,z=0;z<this.pdf.internal.getNumberOfPages();z++)this.pdf.setPage(z+1),this.pdf.internal.out("Q");this.pdf.setPage(D),X&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},C.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var f=function(X){var D,z,Q,ne;if(X.isCanvasGradient===!0&&(X=X.getColor()),!X)return{r:0,g:0,b:0,a:0,style:X};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(X))D=0,z=0,Q=0,ne=0;else{var ce=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(X);if(ce!==null)D=parseInt(ce[1]),z=parseInt(ce[2]),Q=parseInt(ce[3]),ne=1;else if((ce=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(X))!==null)D=parseInt(ce[1]),z=parseInt(ce[2]),Q=parseInt(ce[3]),ne=parseFloat(ce[4]);else{if(ne=1,typeof X=="string"&&X.charAt(0)!=="#"){var se=new PH(X);X=se.ok?se.toHex():"#000000"}X.length===4?(D=X.substring(1,2),D+=D,z=X.substring(2,3),z+=z,Q=X.substring(3,4),Q+=Q):(D=X.substring(1,3),z=X.substring(3,5),Q=X.substring(5,7)),D=parseInt(D,16),z=parseInt(z,16),Q=parseInt(Q,16)}}return{r:D,g:z,b:Q,a:ne,style:X}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};C.prototype.fillText=function(X,D,z,Q){if(isNaN(D)||isNaN(z)||typeof X!="string")throw zr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Q=isNaN(Q)?void 0:Q,!m.call(this)){var ne=P(this.ctx.transform.rotation),ce=this.ctx.transform.scaleX;Y.call(this,{text:X,x:D,y:z,scale:ce,angle:ne,align:this.textAlign,maxWidth:Q})}},C.prototype.strokeText=function(X,D,z,Q){if(isNaN(D)||isNaN(z)||typeof X!="string")throw zr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){Q=isNaN(Q)?void 0:Q;var ne=P(this.ctx.transform.rotation),ce=this.ctx.transform.scaleX;Y.call(this,{text:X,x:D,y:z,scale:ce,renderingMode:"stroke",angle:ne,align:this.textAlign,maxWidth:Q})}},C.prototype.measureText=function(X){if(typeof X!="string")throw zr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var D=this.pdf,z=this.pdf.internal.scaleFactor,Q=D.internal.getFontSize(),ne=D.getStringUnitWidth(X)*Q/D.internal.scaleFactor,ce=function(se){var ue=(se=se||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ue}}),this};return new ce({width:ne*=Math.round(96*z/72*1e4)/1e4})},C.prototype.scale=function(X,D){if(isNaN(X)||isNaN(D))throw zr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var z=new g(X,0,0,D,0,0);this.ctx.transform=this.ctx.transform.multiply(z)},C.prototype.rotate=function(X){if(isNaN(X))throw zr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var D=new g(Math.cos(X),Math.sin(X),-Math.sin(X),Math.cos(X),0,0);this.ctx.transform=this.ctx.transform.multiply(D)},C.prototype.translate=function(X,D){if(isNaN(X)||isNaN(D))throw zr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var z=new g(1,0,0,1,X,D);this.ctx.transform=this.ctx.transform.multiply(z)},C.prototype.transform=function(X,D,z,Q,ne,ce){if(isNaN(X)||isNaN(D)||isNaN(z)||isNaN(Q)||isNaN(ne)||isNaN(ce))throw zr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var se=new g(X,D,z,Q,ne,ce);this.ctx.transform=this.ctx.transform.multiply(se)},C.prototype.setTransform=function(X,D,z,Q,ne,ce){X=isNaN(X)?1:X,D=isNaN(D)?0:D,z=isNaN(z)?0:z,Q=isNaN(Q)?1:Q,ne=isNaN(ne)?0:ne,ce=isNaN(ce)?0:ce,this.ctx.transform=new g(X,D,z,Q,ne,ce)};var p=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};C.prototype.drawImage=function(X,D,z,Q,ne,ce,se,ue,ve){var Ae=this.pdf.getImageProperties(X),be=1,me=1,Ne=1,Ie=1;Q!==void 0&&ue!==void 0&&(Ne=ue/Q,Ie=ve/ne,be=Ae.width/Q*ue/Q,me=Ae.height/ne*ve/ne),ce===void 0&&(ce=D,se=z,D=0,z=0),Q!==void 0&&ue===void 0&&(ue=Q,ve=ne),Q===void 0&&ue===void 0&&(ue=Ae.width,ve=Ae.height);for(var ae,Ee=this.ctx.transform.decompose(),Fe=P(Ee.rotate.shx),ke=new g,ze=(ke=(ke=(ke=ke.multiply(Ee.translate)).multiply(Ee.skew)).multiply(Ee.scale)).applyToRectangle(new l(ce-D*Ne,se-z*Ie,Q*be,ne*me)),He=y.call(this,ze),Le=[],Ye=0;Ye<He.length;Ye+=1)Le.indexOf(He[Ye])===-1&&Le.push(He[Ye]);if(B(Le),this.autoPaging)for(var Pe=Le[0],$e=Le[Le.length-1],ot=Pe;ot<$e+1;ot++){this.pdf.setPage(ot);var Ct=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],pt=ot===1?this.posY+this.margin[0]:this.margin[0],it=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],It=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],_e=ot===1?0:it+(ot-2)*It;if(this.ctx.clip_path.length!==0){var Ot=this.path;ae=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(ae,this.posX+this.margin[3],-_e+pt+this.ctx.prevPageLastElemOffset),J.call(this,"fill",!0),this.path=Ot}var Qe=JSON.parse(JSON.stringify(ze));Qe=v([Qe],this.posX+this.margin[3],-_e+pt+this.ctx.prevPageLastElemOffset)[0];var st=(ot>Pe||ot<$e)&&p.call(this);st&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ct,It,null).clip().discardPath()),this.pdf.addImage(X,"JPEG",Qe.x,Qe.y,Qe.w,Qe.h,null,null,Fe),st&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(X,"JPEG",ze.x,ze.y,ze.w,ze.h,null,null,Fe)};var y=function(X,D,z){var Q=[];D=D||this.pdf.internal.pageSize.width,z=z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ne=this.posY+this.ctx.prevPageLastElemOffset;switch(X.type){default:case"mt":case"lt":Q.push(Math.floor((X.y+ne)/z)+1);break;case"arc":Q.push(Math.floor((X.y+ne-X.radius)/z)+1),Q.push(Math.floor((X.y+ne+X.radius)/z)+1);break;case"qct":var ce=ee(this.ctx.lastPoint.x,this.ctx.lastPoint.y,X.x1,X.y1,X.x,X.y);Q.push(Math.floor((ce.y+ne)/z)+1),Q.push(Math.floor((ce.y+ce.h+ne)/z)+1);break;case"bct":var se=j(this.ctx.lastPoint.x,this.ctx.lastPoint.y,X.x1,X.y1,X.x2,X.y2,X.x,X.y);Q.push(Math.floor((se.y+ne)/z)+1),Q.push(Math.floor((se.y+se.h+ne)/z)+1);break;case"rect":Q.push(Math.floor((X.y+ne)/z)+1),Q.push(Math.floor((X.y+X.h+ne)/z)+1)}for(var ue=0;ue<Q.length;ue+=1)for(;this.pdf.internal.getNumberOfPages()<Q[ue];)S.call(this);return Q},S=function(){var X=this.fillStyle,D=this.strokeStyle,z=this.font,Q=this.lineCap,ne=this.lineWidth,ce=this.lineJoin;this.pdf.addPage(),this.fillStyle=X,this.strokeStyle=D,this.font=z,this.lineCap=Q,this.lineWidth=ne,this.lineJoin=ce},v=function(X,D,z){for(var Q=0;Q<X.length;Q++)switch(X[Q].type){case"bct":X[Q].x2+=D,X[Q].y2+=z;case"qct":X[Q].x1+=D,X[Q].y1+=z;case"mt":case"lt":case"arc":default:X[Q].x+=D,X[Q].y+=z}return X},B=function(X){return X.sort(function(D,z){return D-z})},W=function(X,D){for(var z,Q,ne=this.fillStyle,ce=this.strokeStyle,se=this.lineCap,ue=this.lineWidth,ve=Math.abs(ue*this.ctx.transform.scaleX),Ae=this.lineJoin,be=JSON.parse(JSON.stringify(this.path)),me=JSON.parse(JSON.stringify(this.path)),Ne=[],Ie=0;Ie<me.length;Ie++)if(me[Ie].x!==void 0)for(var ae=y.call(this,me[Ie]),Ee=0;Ee<ae.length;Ee+=1)Ne.indexOf(ae[Ee])===-1&&Ne.push(ae[Ee]);for(var Fe=0;Fe<Ne.length;Fe++)for(;this.pdf.internal.getNumberOfPages()<Ne[Fe];)S.call(this);if(B(Ne),this.autoPaging)for(var ke=Ne[0],ze=Ne[Ne.length-1],He=ke;He<ze+1;He++){this.pdf.setPage(He),this.fillStyle=ne,this.strokeStyle=ce,this.lineCap=se,this.lineWidth=ve,this.lineJoin=Ae;var Le=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ye=He===1?this.posY+this.margin[0]:this.margin[0],Pe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],$e=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ot=He===1?0:Pe+(He-2)*$e;if(this.ctx.clip_path.length!==0){var Ct=this.path;z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(z,this.posX+this.margin[3],-ot+Ye+this.ctx.prevPageLastElemOffset),J.call(this,X,!0),this.path=Ct}if(Q=JSON.parse(JSON.stringify(be)),this.path=v(Q,this.posX+this.margin[3],-ot+Ye+this.ctx.prevPageLastElemOffset),D===!1||He===0){var pt=(He>ke||He<ze)&&p.call(this);pt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Le,$e,null).clip().discardPath()),J.call(this,X,D),pt&&this.pdf.restoreGraphicsState()}this.lineWidth=ue}else this.lineWidth=ve,J.call(this,X,D),this.lineWidth=ue;this.path=be},J=function(X,D){if((X!=="stroke"||D||!b.call(this))&&(X==="stroke"||D||!m.call(this))){for(var z,Q,ne=[],ce=this.path,se=0;se<ce.length;se++){var ue=ce[se];switch(ue.type){case"begin":ne.push({begin:!0});break;case"close":ne.push({close:!0});break;case"mt":ne.push({start:ue,deltas:[],abs:[]});break;case"lt":var ve=ne.length;if(ce[se-1]&&!isNaN(ce[se-1].x)&&(z=[ue.x-ce[se-1].x,ue.y-ce[se-1].y],ve>0)){for(;ve>=0;ve--)if(ne[ve-1].close!==!0&&ne[ve-1].begin!==!0){ne[ve-1].deltas.push(z),ne[ve-1].abs.push(ue);break}}break;case"bct":z=[ue.x1-ce[se-1].x,ue.y1-ce[se-1].y,ue.x2-ce[se-1].x,ue.y2-ce[se-1].y,ue.x-ce[se-1].x,ue.y-ce[se-1].y],ne[ne.length-1].deltas.push(z);break;case"qct":var Ae=ce[se-1].x+2/3*(ue.x1-ce[se-1].x),be=ce[se-1].y+2/3*(ue.y1-ce[se-1].y),me=ue.x+2/3*(ue.x1-ue.x),Ne=ue.y+2/3*(ue.y1-ue.y),Ie=ue.x,ae=ue.y;z=[Ae-ce[se-1].x,be-ce[se-1].y,me-ce[se-1].x,Ne-ce[se-1].y,Ie-ce[se-1].x,ae-ce[se-1].y],ne[ne.length-1].deltas.push(z);break;case"arc":ne.push({deltas:[],abs:[],arc:!0}),Array.isArray(ne[ne.length-1].abs)&&ne[ne.length-1].abs.push(ue)}}Q=D?null:X==="stroke"?"stroke":"fill";for(var Ee=!1,Fe=0;Fe<ne.length;Fe++)if(ne[Fe].arc)for(var ke=ne[Fe].abs,ze=0;ze<ke.length;ze++){var He=ke[ze];He.type==="arc"?E.call(this,He.x,He.y,He.radius,He.startAngle,He.endAngle,He.counterclockwise,void 0,D,!Ee):M.call(this,He.x,He.y),Ee=!0}else if(ne[Fe].close===!0)this.pdf.internal.out("h"),Ee=!1;else if(ne[Fe].begin!==!0){var Le=ne[Fe].start.x,Ye=ne[Fe].start.y;L.call(this,ne[Fe].deltas,Le,Ye),Ee=!0}Q&&F.call(this,Q),D&&w.call(this)}},H=function(X){var D=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,z=D*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return X-z;case"top":return X+D-z;case"hanging":return X+D-2*z;case"middle":return X+D/2-z;case"ideographic":return X;case"alphabetic":default:return X}},x=function(X){return X+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};C.prototype.createLinearGradient=function(){var X=function(){};return X.colorStops=[],X.addColorStop=function(D,z){this.colorStops.push([D,z])},X.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},X.isCanvasGradient=!0,X},C.prototype.createPattern=function(){return this.createLinearGradient()},C.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(X,D,z,Q,ne,ce,se,ue,ve){for(var Ae=U.call(this,z,Q,ne,ce),be=0;be<Ae.length;be++){var me=Ae[be];be===0&&(ve?V.call(this,me.x1+X,me.y1+D):M.call(this,me.x1+X,me.y1+D)),$.call(this,X,D,me.x2,me.y2,me.x3,me.y3,me.x4,me.y4)}ue?w.call(this):F.call(this,se)},F=function(X){switch(X){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},w=function(){this.pdf.clip(),this.pdf.discardPath()},V=function(X,D){this.pdf.internal.out(n(X)+" "+r(D)+" m")},Y=function(X){var D;switch(X.align){case"right":case"end":D="right";break;case"center":D="center";break;case"left":case"start":default:D="left"}var z=this.pdf.getTextDimensions(X.text),Q=H.call(this,X.y),ne=x.call(this,Q)-z.h,ce=this.ctx.transform.applyToPoint(new a(X.x,Q)),se=this.ctx.transform.decompose(),ue=new g;ue=(ue=(ue=ue.multiply(se.translate)).multiply(se.skew)).multiply(se.scale);for(var ve,Ae,be,me=this.ctx.transform.applyToRectangle(new l(X.x,Q,z.w,z.h)),Ne=ue.applyToRectangle(new l(X.x,ne,z.w,z.h)),Ie=y.call(this,Ne),ae=[],Ee=0;Ee<Ie.length;Ee+=1)ae.indexOf(Ie[Ee])===-1&&ae.push(Ie[Ee]);if(B(ae),this.autoPaging)for(var Fe=ae[0],ke=ae[ae.length-1],ze=Fe;ze<ke+1;ze++){this.pdf.setPage(ze);var He=ze===1?this.posY+this.margin[0]:this.margin[0],Le=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ye=this.pdf.internal.pageSize.height-this.margin[2],Pe=Ye-this.margin[0],$e=this.pdf.internal.pageSize.width-this.margin[1],ot=$e-this.margin[3],Ct=ze===1?0:Le+(ze-2)*Pe;if(this.ctx.clip_path.length!==0){var pt=this.path;ve=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(ve,this.posX+this.margin[3],-1*Ct+He),J.call(this,"fill",!0),this.path=pt}var it=v([JSON.parse(JSON.stringify(Ne))],this.posX+this.margin[3],-Ct+He+this.ctx.prevPageLastElemOffset)[0];X.scale>=.01&&(Ae=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ae*X.scale),be=this.lineWidth,this.lineWidth=be*X.scale);var It=this.autoPaging!=="text";if(It||it.y+it.h<=Ye){if(It||it.y>=He&&it.x<=$e){var _e=It?X.text:this.pdf.splitTextToSize(X.text,X.maxWidth||$e-it.x)[0],Ot=v([JSON.parse(JSON.stringify(me))],this.posX+this.margin[3],-Ct+He+this.ctx.prevPageLastElemOffset)[0],Qe=It&&(ze>Fe||ze<ke)&&p.call(this);Qe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ot,Pe,null).clip().discardPath()),this.pdf.text(_e,Ot.x,Ot.y,{angle:X.angle,align:D,renderingMode:X.renderingMode}),Qe&&this.pdf.restoreGraphicsState()}}else it.y<Ye&&(this.ctx.prevPageLastElemOffset+=Ye-it.y);X.scale>=.01&&(this.pdf.setFontSize(Ae),this.lineWidth=be)}else X.scale>=.01&&(Ae=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ae*X.scale),be=this.lineWidth,this.lineWidth=be*X.scale),this.pdf.text(X.text,ce.x+this.posX,ce.y+this.posY,{angle:X.angle,align:D,renderingMode:X.renderingMode,maxWidth:X.maxWidth}),X.scale>=.01&&(this.pdf.setFontSize(Ae),this.lineWidth=be)},M=function(X,D,z,Q){z=z||0,Q=Q||0,this.pdf.internal.out(n(X+z)+" "+r(D+Q)+" l")},L=function(X,D,z){return this.pdf.lines(X,D,z,null,null)},$=function(X,D,z,Q,ne,ce,se,ue){this.pdf.internal.out([t(i(z+X)),t(o(Q+D)),t(i(ne+X)),t(o(ce+D)),t(i(se+X)),t(o(ue+D)),"c"].join(" "))},U=function(X,D,z,Q){for(var ne=2*Math.PI,ce=Math.PI/2;D>z;)D-=ne;var se=Math.abs(z-D);se<ne&&Q&&(se=ne-se);for(var ue=[],ve=Q?-1:1,Ae=D;se>1e-5;){var be=Ae+ve*Math.min(se,ce);ue.push(_.call(this,X,Ae,be)),se-=Math.abs(be-Ae),Ae=be}return ue},_=function(X,D,z){var Q=(z-D)/2,ne=X*Math.cos(Q),ce=X*Math.sin(Q),se=ne,ue=-ce,ve=se*se+ue*ue,Ae=ve+se*ne+ue*ce,be=4/3*(Math.sqrt(2*ve*Ae)-Ae)/(se*ce-ue*ne),me=se-be*ue,Ne=ue+be*se,Ie=me,ae=-Ne,Ee=Q+D,Fe=Math.cos(Ee),ke=Math.sin(Ee);return{x1:X*Math.cos(D),y1:X*Math.sin(D),x2:me*Fe-Ne*ke,y2:me*ke+Ne*Fe,x3:Ie*Fe-ae*ke,y3:Ie*ke+ae*Fe,x4:X*Math.cos(z),y4:X*Math.sin(z)}},P=function(X){return 180*X/Math.PI},ee=function(X,D,z,Q,ne,ce){var se=X+.5*(z-X),ue=D+.5*(Q-D),ve=ne+.5*(z-ne),Ae=ce+.5*(Q-ce),be=Math.min(X,ne,se,ve),me=Math.max(X,ne,se,ve),Ne=Math.min(D,ce,ue,Ae),Ie=Math.max(D,ce,ue,Ae);return new l(be,Ne,me-be,Ie-Ne)},j=function(X,D,z,Q,ne,ce,se,ue){var ve,Ae,be,me,Ne,Ie,ae,Ee,Fe,ke,ze,He,Le,Ye,Pe=z-X,$e=Q-D,ot=ne-z,Ct=ce-Q,pt=se-ne,it=ue-ce;for(Ae=0;Ae<41;Ae++)Fe=(ae=(be=X+(ve=Ae/40)*Pe)+ve*((Ne=z+ve*ot)-be))+ve*(Ne+ve*(ne+ve*pt-Ne)-ae),ke=(Ee=(me=D+ve*$e)+ve*((Ie=Q+ve*Ct)-me))+ve*(Ie+ve*(ce+ve*it-Ie)-Ee),Ae==0?(ze=Fe,He=ke,Le=Fe,Ye=ke):(ze=Math.min(ze,Fe),He=Math.min(He,ke),Le=Math.max(Le,Fe),Ye=Math.max(Ye,ke));return new l(Math.round(ze),Math.round(He),Math.round(Le-ze),Math.round(Ye-He))},O=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var X,D,z=(X=this.ctx.lineDash,D=this.ctx.lineDashOffset,JSON.stringify({lineDash:X,lineDashOffset:D}));this.prevLineDash!==z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=z)}}})(vn.API),function(e){var t=function(o){var a,l,g,u,d,C,f,m,b,p;for(l=[],g=0,u=(o+=a="\0\0\0\0".slice(o.length%4||4)).length;u>g;g+=4)(d=(o.charCodeAt(g)<<24)+(o.charCodeAt(g+1)<<16)+(o.charCodeAt(g+2)<<8)+o.charCodeAt(g+3))!==0?(C=(d=((d=((d=((d=(d-(p=d%85))/85)-(b=d%85))/85)-(m=d%85))/85)-(f=d%85))/85)%85,l.push(C+33,f+33,m+33,b+33,p+33)):l.push(122);return function(y,S){for(var v=S;v>0;v--)y.pop()}(l,a.length),String.fromCharCode.apply(String,l)+"~>"},n=function(o){var a,l,g,u,d,C=String,f="length",m=255,b="charCodeAt",p="slice",y="replace";for(o[p](-2),o=o[p](0,-2)[y](/\s/g,"")[y]("z","!!!!!"),g=[],u=0,d=(o+=a="uuuuu"[p](o[f]%5||5))[f];d>u;u+=5)l=52200625*(o[b](u)-33)+614125*(o[b](u+1)-33)+7225*(o[b](u+2)-33)+85*(o[b](u+3)-33)+(o[b](u+4)-33),g.push(m&l>>24,m&l>>16,m&l>>8,m&l);return function(S,v){for(var B=v;B>0;B--)S.pop()}(g,a[f]),C.fromCharCode.apply(C,g)},r=function(o){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),a.test(o)===!1)return"";for(var l="",g=0;g<o.length;g+=2)l+=String.fromCharCode("0x"+(o[g]+o[g+1]));return l},i=function(o){for(var a=new Uint8Array(o.length),l=o.length;l--;)a[l]=o.charCodeAt(l);return o=(a=CS(a)).reduce(function(g,u){return g+String.fromCharCode(u)},"")};e.processDataByFilters=function(o,a){var l=0,g=o||"",u=[];for(typeof(a=a||[])=="string"&&(a=[a]),l=0;l<a.length;l+=1)switch(a[l]){case"ASCII85Decode":case"/ASCII85Decode":g=n(g),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":g=t(g),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":g=r(g),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":g=g.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":g=i(g),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[l]+'" is not implemented')}return{data:g,reverseChain:u.reverse().join(" ")}}}(vn.API),function(e){e.loadFile=function(t,n,r){return function(i,o,a){o=o!==!1,a=typeof a=="function"?a:function(){};var l=void 0;try{l=function(g,u,d){var C=new XMLHttpRequest,f=0,m=function(b){var p=b.length,y=[],S=String.fromCharCode;for(f=0;f<p;f+=1)y.push(S(255&b.charCodeAt(f)));return y.join("")};if(C.open("GET",g,!u),C.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(C.onload=function(){C.status===200?d(m(this.responseText)):d(void 0)}),C.send(null),u&&C.status===200)return m(C.responseText)}(i,o,a)}catch{}return l}(t,n,r)},e.loadImageFile=e.loadFile}(vn.API),function(e){function t(){return(Zn.html2canvas?Promise.resolve(Zn.html2canvas):gS(()=>import("./html2canvas.esm-DtF4syFK.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function n(){return(Zn.DOMPurify?Promise.resolve(Zn.DOMPurify):gS(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var l=wt(a);return l==="undefined"?"undefined":l==="string"||a instanceof String?"string":l==="number"||a instanceof Number?"number":l==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(a,l){var g=document.createElement(a);for(var u in l.className&&(g.className=l.className),l.innerHTML&&l.dompurify&&(g.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)g.style[u]=l.style[u];return g},o=function a(l){var g=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),u=a.convert(Promise.resolve(),g);return u=(u=u.setProgress(1,a,1,[a])).set(l)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(a,l){return a.__proto__=l||o.prototype,a},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(a,l){return this.then(function(){switch(l=l||function(g){switch(r(g)){case"string":return"string";case"element":return g.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(n).then(function(g){return this.set({src:i("div",{innerHTML:a,dompurify:g})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},o.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function g(u,d){for(var C=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),f=u.firstChild;f;f=f.nextSibling)d!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||C.appendChild(g(f,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(C.width=u.width,C.height=u.height,C.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(C.value=u.value),C.addEventListener("load",function(){C.scrollTop=u.scrollTop,C.scrollLeft=u.scrollLeft},!0)),C}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(l){var g=Object.assign({},this.opt.html2canvas);return delete g.onrendered,l(this.prop.container,g)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then(function(l){var g=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,C=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete C.onrendered,g.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,g.context2d.posX=this.opt.x,g.context2d.posY=this.opt.y,g.context2d.margin=this.opt.margin,g.context2d.fontFaces=u,u)for(var f=0;f<u.length;++f){var m=u[f],b=m.src.find(function(p){return p.format==="truetype"});b&&g.addFont(b.url,m.ref.name,m.ref.style)}return C.windowHeight=C.windowHeight||0,C.windowHeight=C.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):C.windowHeight,g.context2d.save(!0),l(this.prop.container,C)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(a,l,g){return(g=g||"pdf").toLowerCase()==="img"||g.toLowerCase()==="image"?this.outputImg(a,l):this.outputPdf(a,l)},o.prototype.outputPdf=function(a,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,l)})},o.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},o.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(a){if(r(a)!=="object")return this;var l=Object.keys(a||{}).map(function(g){if(g in o.template.prop)return function(){this.prop[g]=a[g]};switch(g){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[g]=a[g]}}},this);return this.then(function(){return this.thenList(l)})},o.prototype.get=function(a,l){return this.then(function(){var g=a in o.template.prop?this.prop[a]:this.opt[a];return l?l(g):g})},o.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},o.prototype.setPageSize=function(a){function l(g,u){return Math.floor(g*u/72*96)}return this.then(function(){(a=a||vn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:l(a.inner.width,a.k),height:l(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},o.prototype.setProgress=function(a,l,g,u){return a!=null&&(this.progress.val=a),l!=null&&(this.progress.state=l),g!=null&&(this.progress.n=g),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(a,l,g,u){return this.setProgress(a?this.progress.val+a:null,l||null,g?this.progress.n+g:null,u?this.progress.stack.concat(u):null)},o.prototype.then=function(a,l){var g=this;return this.thenCore(a,l,function(u,d){return g.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(C){return g.updateProgress(null,u),C}).then(u,d).then(function(C){return g.updateProgress(1),C})})},o.prototype.thenCore=function(a,l,g){g=g||Promise.prototype.then,a&&(a=a.bind(this)),l&&(l=l.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:o.convert(Object.assign({},this),Promise.prototype),d=g.call(u,a,l);return o.convert(d,this.__proto__)},o.prototype.thenExternal=function(a,l){return Promise.prototype.then.call(this,a,l)},o.prototype.thenList=function(a){var l=this;return a.forEach(function(g){l=l.thenCore(g)}),l},o.prototype.catch=function(a){a&&(a=a.bind(this));var l=Promise.prototype.catch.call(this,a);return o.convert(l,this)},o.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},o.prototype.error=function(a){return this.then(function(){throw new Error(a)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,vn.getPageSize=function(a,l,g){if(wt(a)==="object"){var u=a;a=u.orientation,l=u.unit||l,g=u.format||g}l=l||"mm",g=g||"a4",a=(""+(a||"P")).toLowerCase();var d,C=(""+g).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+l}var m,b=0,p=0;if(f.hasOwnProperty(C))b=f[C][1]/d,p=f[C][0]/d;else try{b=g[1],p=g[0]}catch{throw new Error("Invalid format: "+g)}if(a==="p"||a==="portrait")a="p",p>b&&(m=p,p=b,b=m);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",b>p&&(m=p,p=b,b=m)}return{width:p,height:b,unit:l,k:d,orientation:a}},e.html=function(a,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(bS):null;var g=new o(l);return l.worker?g:g.from(a).doCallback()}}(vn.API),vn.API.addJS=function(e){return DW=e,this.internal.events.subscribe("postPutResources",function(){Lh=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Lh+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),zW=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+DW+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Lh!==void 0&&zW!==void 0&&this.internal.out("/Names <</JavaScript "+Lh+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),o=0;o<i.length;o++){var a=i[o],l=r.exec(a);if(l!=null){var g=l[1];n.internal.newObjectDeferredBegin(g,!1)}n.internal.write(a)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(o=0;o<u;o++){var C=n.internal.newObject();d.push(C);var f=n.internal.getPageInfo(o+1);n.internal.write("<< /D["+f.objId+" 0 R /XYZ null null null]>> endobj")}var m=n.internal.newObject();for(n.internal.write("<< /Names [ "),o=0;o<d.length;o++)n.internal.write("(page_"+(o+1)+")"+d[o]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+m+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,o){var a={title:i,options:o,children:[]};return r==null&&(r=this.root),r.children.push(a),a},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<r.children.length;o++){var a=r.children[o];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(r)),o>0&&this.line("/Prev "+this.makeRef(r.children[o-1])),o<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[o+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var l=this.count=this.count_r({count:0},a);if(l>0&&this.line("/Count "+l),a.options&&a.options.pageNumber){var g=n.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+g.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var o=0;o<i.children.length;o++)r.count++,this.count_r(r,i.children[o]);return r.count}}])}(vn.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,r,i,o,a,l){var g,u=this.decode.DCT_DECODE,d=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=a||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(g=function(C){for(var f,m=256*C.charCodeAt(4)+C.charCodeAt(5),b=C.length,p={width:0,height:0,numcomponents:1},y=4;y<b;y+=2){if(y+=m,t.indexOf(C.charCodeAt(y+1))!==-1){f=256*C.charCodeAt(y+5)+C.charCodeAt(y+6),p={width:256*C.charCodeAt(y+7)+C.charCodeAt(y+8),height:f,numcomponents:C.charCodeAt(y+9)};break}m=256*C.charCodeAt(y+2)+C.charCodeAt(y+3)}return p}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}d={data:n,width:g.width,height:g.height,colorSpace:l,bitsPerComponent:8,filter:u,index:r,alias:i}}return d}}(vn.API);var tI,Mh,PW,OW,_W,bge=function(){var e,t,n;function r(o){var a,l,g,u,d,C,f,m,b,p,y,S,v,B;for(this.data=o,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},C=null;;){switch(a=this.readUInt32(),b=(function(){var W,J;for(J=[],W=0;W<4;++W)J.push(String.fromCharCode(this.data[this.pos++]));return J}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":C&&this.animation.frames.push(C),this.pos+=4,C={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,C.delay=1e3*d/u,C.disposeOp=this.data[this.pos++],C.blendOp=this.data[this.pos++],C.data=[];break;case"IDAT":case"fdAT":for(b==="fdAT"&&(this.pos+=4,a-=4),o=(C!=null?C.data:void 0)||this.imgData,S=0;0<=a?S<a:S>a;0<=a?++S:--S)o.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(g=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>g)throw new Error("More transparent colors than palette size");if((p=g-this.transparency.indexed.length)>0)for(v=0;0<=p?v<p:v>p;0<=p?++v:--v)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":f=(y=this.read(a)).indexOf(0),m=String.fromCharCode.apply(String,y.slice(0,f)),this.text[m]=String.fromCharCode.apply(String,y.slice(f+1));break;case"IEND":return C&&this.animation.frames.push(C),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(B=this.colorType)===4||B===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(o){var a,l;for(l=[],a=0;0<=o?a<o:a>o;0<=o?++a:--a)l.push(this.data[this.pos++]);return l},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(o){var a=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*a),g=0,u=this;if(o==null&&(o=this.imgData),o.length===0)return new Uint8Array(0);function d(C,f,m,b){var p,y,S,v,B,W,J,H,x,E,F,w,V,Y,M,L,$,U,_,P,ee,j=Math.ceil((u.width-C)/m),O=Math.ceil((u.height-f)/b),X=u.width==j&&u.height==O;for(Y=a*j,w=X?l:new Uint8Array(Y*O),W=o.length,V=0,y=0;V<O&&g<W;){switch(o[g++]){case 0:for(v=$=0;$<Y;v=$+=1)w[y++]=o[g++];break;case 1:for(v=U=0;U<Y;v=U+=1)p=o[g++],B=v<a?0:w[y-a],w[y++]=(p+B)%256;break;case 2:for(v=_=0;_<Y;v=_+=1)p=o[g++],S=(v-v%a)/a,M=V&&w[(V-1)*Y+S*a+v%a],w[y++]=(M+p)%256;break;case 3:for(v=P=0;P<Y;v=P+=1)p=o[g++],S=(v-v%a)/a,B=v<a?0:w[y-a],M=V&&w[(V-1)*Y+S*a+v%a],w[y++]=(p+Math.floor((B+M)/2))%256;break;case 4:for(v=ee=0;ee<Y;v=ee+=1)p=o[g++],S=(v-v%a)/a,B=v<a?0:w[y-a],V===0?M=L=0:(M=w[(V-1)*Y+S*a+v%a],L=S&&w[(V-1)*Y+(S-1)*a+v%a]),J=B+M-L,H=Math.abs(J-B),E=Math.abs(J-M),F=Math.abs(J-L),x=H<=E&&H<=F?B:E<=F?M:L,w[y++]=(p+x)%256;break;default:throw new Error("Invalid filter algorithm: "+o[g-1])}if(!X){var D=((f+V*b)*u.width+C)*a,z=V*Y;for(v=0;v<j;v+=1){for(var Q=0;Q<a;Q+=1)l[D++]=w[z++];D+=(m-1)*a}}V++}}return o=$se(o),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),l},r.prototype.decodePalette=function(){var o,a,l,g,u,d,C,f,m;for(l=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+l.length),g=0,o=0,a=C=0,f=l.length;C<f;a=C+=3)u[g++]=l[a],u[g++]=l[a+1],u[g++]=l[a+2],u[g++]=(m=d[o++])!=null?m:255;return u},r.prototype.copyToImageData=function(o,a){var l,g,u,d,C,f,m,b,p,y,S;if(g=this.colors,p=null,l=this.hasAlphaChannel,this.palette.length&&(p=(S=this._decodedPalette)!=null?S:this._decodedPalette=this.decodePalette(),g=4,l=!0),b=(u=o.data||o).length,C=p||a,d=f=0,g===1)for(;d<b;)m=p?4*a[d/4]:f,y=C[m++],u[d++]=y,u[d++]=y,u[d++]=y,u[d++]=l?C[m++]:255,f=m;else for(;d<b;)m=p?4*a[d/4]:f,u[d++]=C[m++],u[d++]=C[m++],u[d++]=C[m++],u[d++]=l?C[m++]:255,f=m},r.prototype.decode=function(){var o;return o=new Uint8Array(this.width*this.height*4),this.copyToImageData(o,this.decodePixels()),o};var i=function(){if(Object.prototype.toString.call(Zn)==="[object Window]"){try{t=Zn.document.createElement("canvas"),n=t.getContext("2d")}catch{return!1}return!0}return!1};return i(),e=function(o){var a;if(i()===!0)return n.width=o.width,n.height=o.height,n.clearRect(0,0,o.width,o.height),n.putImageData(o,0,0),(a=new Image).src=t.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(o){var a,l,g,u,d,C,f,m;if(this.animation){for(m=[],l=d=0,C=(f=this.animation.frames).length;d<C;l=++d)a=f[l],g=o.createImageData(a.width,a.height),u=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(g,u),a.imageData=g,m.push(a.image=e(g));return m}},r.prototype.renderFrame=function(o,a){var l,g,u;return l=(g=this.animation.frames)[a],u=g[a-1],a===0&&o.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?o.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&o.putImageData(u.imageData,u.xOffset,u.yOffset),l.blendOp===0&&o.clearRect(l.xOffset,l.yOffset,l.width,l.height),o.drawImage(l.image,l.xOffset,l.yOffset)},r.prototype.animate=function(o){var a,l,g,u,d,C,f=this;return l=0,C=this.animation,u=C.numFrames,g=C.frames,d=C.numPlays,(a=function(){var m,b;if(m=l++%u,b=g[m],f.renderFrame(o,m),u>1&&l/u<d)return f.animation._timeout=setTimeout(a,b.delay)})()},r.prototype.stopAnimation=function(){var o;return clearTimeout((o=this.animation)!=null?o._timeout:void 0)},r.prototype.render=function(o){var a,l;return o._png&&o._png.stopAnimation(),o._png=this,o.width=this.width,o.height=this.height,a=o.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(l=a.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),a.putImageData(l,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function yge(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,i=e[t++],o=i>>7,a=1<<(7&i)+1;e[t++],e[t++];var l=null,g=null;o&&(l=t,g=a,t+=3*a);var u=!0,d=[],C=0,f=null,m=0,b=null;for(this.width=n,this.height=r;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,b=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((V=e[t++])>=0))throw Error("Invalid block size");if(V===0)break;t+=V}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var p=e[t++];C=e[t++]|e[t++]<<8,f=e[t++],!(1&p)&&(f=null),m=p>>2&7,t++;break;case 254:for(;;){if(!((V=e[t++])>=0))throw Error("Invalid block size");if(V===0)break;t+=V}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var y=e[t++]|e[t++]<<8,S=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,B=e[t++]|e[t++]<<8,W=e[t++],J=W>>6&1,H=1<<(7&W)+1,x=l,E=g,F=!1;W>>7&&(F=!0,x=t,E=H,t+=3*H);var w=t;for(t++;;){var V;if(!((V=e[t++])>=0))throw Error("Invalid block size");if(V===0)break;t+=V}d.push({x:y,y:S,width:v,height:B,has_local_palette:F,palette_offset:x,palette_size:E,data_offset:w,data_length:t-w,transparent_index:f,interlaced:!!J,delay:C,disposal:m});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return b},this.frameInfo=function(Y){if(Y<0||Y>=d.length)throw new Error("Frame index out of range.");return d[Y]},this.decodeAndBlitFrameBGRA=function(Y,M){var L=this.frameInfo(Y),$=L.width*L.height,U=new Uint8Array($);UW(e,L.data_offset,U,$);var _=L.palette_offset,P=L.transparent_index;P===null&&(P=256);var ee=L.width,j=n-ee,O=ee,X=4*(L.y*n+L.x),D=4*((L.y+L.height)*n+L.x),z=X,Q=4*j;L.interlaced===!0&&(Q+=4*n*7);for(var ne=8,ce=0,se=U.length;ce<se;++ce){var ue=U[ce];if(O===0&&(O=ee,(z+=Q)>=D&&(Q=4*j+4*n*(ne-1),z=X+(ee+j)*(ne<<1),ne>>=1)),ue===P)z+=4;else{var ve=e[_+3*ue],Ae=e[_+3*ue+1],be=e[_+3*ue+2];M[z++]=be,M[z++]=Ae,M[z++]=ve,M[z++]=255}--O}},this.decodeAndBlitFrameRGBA=function(Y,M){var L=this.frameInfo(Y),$=L.width*L.height,U=new Uint8Array($);UW(e,L.data_offset,U,$);var _=L.palette_offset,P=L.transparent_index;P===null&&(P=256);var ee=L.width,j=n-ee,O=ee,X=4*(L.y*n+L.x),D=4*((L.y+L.height)*n+L.x),z=X,Q=4*j;L.interlaced===!0&&(Q+=4*n*7);for(var ne=8,ce=0,se=U.length;ce<se;++ce){var ue=U[ce];if(O===0&&(O=ee,(z+=Q)>=D&&(Q=4*j+4*n*(ne-1),z=X+(ee+j)*(ne<<1),ne>>=1)),ue===P)z+=4;else{var ve=e[_+3*ue],Ae=e[_+3*ue+1],be=e[_+3*ue+2];M[z++]=ve,M[z++]=Ae,M[z++]=be,M[z++]=255}--O}}}function UW(e,t,n,r){for(var i=e[t++],o=1<<i,a=o+1,l=a+1,g=i+1,u=(1<<g)-1,d=0,C=0,f=0,m=e[t++],b=new Int32Array(4096),p=null;;){for(;d<16&&m!==0;)C|=e[t++]<<d,d+=8,m===1?m=e[t++]:--m;if(d<g)break;var y=C&u;if(C>>=g,d-=g,y!==o){if(y===a)break;for(var S=y<l?y:p,v=0,B=S;B>o;)B=b[B]>>8,++v;var W=B;if(f+v+(S!==y?1:0)>r)return void zr.log("Warning, gif stream longer than expected.");n[f++]=W;var J=f+=v;for(S!==y&&(n[f++]=W),B=S;v--;)B=b[B],n[--J]=255&B,B>>=8;p!==null&&l<4096&&(b[l++]=p<<8|W,l>=u+1&&g<12&&(++g,u=u<<1|1)),p=y}else l=a+1,u=(1<<(g=i+1))-1,p=null}return f!==r&&zr.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function pv(e){var t,n,r,i,o,a=Math.floor,l=new Array(64),g=new Array(64),u=new Array(64),d=new Array(64),C=new Array(65535),f=new Array(65535),m=new Array(64),b=new Array(64),p=[],y=0,S=7,v=new Array(64),B=new Array(64),W=new Array(64),J=new Array(256),H=new Array(2048),x=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],w=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],V=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Y=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],$=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function U(X,D){for(var z=0,Q=0,ne=new Array,ce=1;ce<=16;ce++){for(var se=1;se<=X[ce];se++)ne[D[Q]]=[],ne[D[Q]][0]=z,ne[D[Q]][1]=ce,Q++,z++;z*=2}return ne}function _(X){for(var D=X[0],z=X[1]-1;z>=0;)D&1<<z&&(y|=1<<S),z--,--S<0&&(y==255?(P(255),P(0)):P(y),S=7,y=0)}function P(X){p.push(X)}function ee(X){P(X>>8&255),P(255&X)}function j(X,D,z,Q,ne){for(var ce,se=ne[0],ue=ne[240],ve=function(ke,ze){var He,Le,Ye,Pe,$e,ot,Ct,pt,it,It,_e=0;for(it=0;it<8;++it){He=ke[_e],Le=ke[_e+1],Ye=ke[_e+2],Pe=ke[_e+3],$e=ke[_e+4],ot=ke[_e+5],Ct=ke[_e+6];var Ot=He+(pt=ke[_e+7]),Qe=He-pt,st=Le+Ct,St=Le-Ct,dt=Ye+ot,Wt=Ye-ot,Et=Pe+$e,hn=Pe-$e,mn=Ot+Et,Xn=Ot-Et,Mn=st+dt,In=st-dt;ke[_e]=mn+Mn,ke[_e+4]=mn-Mn;var Jt=.707106781*(In+Xn);ke[_e+2]=Xn+Jt,ke[_e+6]=Xn-Jt;var jt=.382683433*((mn=hn+Wt)-(In=St+Qe)),ln=.5411961*mn+jt,Vt=1.306562965*In+jt,Rt=.707106781*(Mn=Wt+St),yt=Qe+Rt,ht=Qe-Rt;ke[_e+5]=ht+ln,ke[_e+3]=ht-ln,ke[_e+1]=yt+Vt,ke[_e+7]=yt-Vt,_e+=8}for(_e=0,it=0;it<8;++it){He=ke[_e],Le=ke[_e+8],Ye=ke[_e+16],Pe=ke[_e+24],$e=ke[_e+32],ot=ke[_e+40],Ct=ke[_e+48];var sn=He+(pt=ke[_e+56]),ut=He-pt,ct=Le+Ct,vt=Le-Ct,Bt=Ye+ot,kt=Ye-ot,Tt=Pe+$e,Jn=Pe-$e,cn=sn+Tt,yn=sn-Tt,qt=ct+Bt,Vn=ct-Bt;ke[_e]=cn+qt,ke[_e+32]=cn-qt;var En=.707106781*(Vn+yn);ke[_e+16]=yn+En,ke[_e+48]=yn-En;var Dn=.382683433*((cn=Jn+kt)-(Vn=vt+ut)),ar=.5411961*cn+Dn,Ln=1.306562965*Vn+Dn,Pn=.707106781*(qt=kt+vt),At=ut+Pn,Ht=ut-Pn;ke[_e+40]=Ht+ar,ke[_e+24]=Ht-ar,ke[_e+8]=At+Ln,ke[_e+56]=At-Ln,_e++}for(it=0;it<64;++it)It=ke[it]*ze[it],m[it]=It>0?It+.5|0:It-.5|0;return m}(X,D),Ae=0;Ae<64;++Ae)b[x[Ae]]=ve[Ae];var be=b[0]-z;z=b[0],be==0?_(Q[0]):(_(Q[f[ce=32767+be]]),_(C[ce]));for(var me=63;me>0&&b[me]==0;)me--;if(me==0)return _(se),z;for(var Ne,Ie=1;Ie<=me;){for(var ae=Ie;b[Ie]==0&&Ie<=me;)++Ie;var Ee=Ie-ae;if(Ee>=16){Ne=Ee>>4;for(var Fe=1;Fe<=Ne;++Fe)_(ue);Ee&=15}ce=32767+b[Ie],_(ne[(Ee<<4)+f[ce]]),_(C[ce]),Ie++}return me!=63&&_(se),z}function O(X){X=Math.min(Math.max(X,1),100),o!=X&&(function(D){for(var z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Q=0;Q<64;Q++){var ne=a((z[Q]*D+50)/100);ne=Math.min(Math.max(ne,1),255),l[x[Q]]=ne}for(var ce=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],se=0;se<64;se++){var ue=a((ce[se]*D+50)/100);ue=Math.min(Math.max(ue,1),255),g[x[se]]=ue}for(var ve=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ae=0,be=0;be<8;be++)for(var me=0;me<8;me++)u[Ae]=1/(l[x[Ae]]*ve[be]*ve[me]*8),d[Ae]=1/(g[x[Ae]]*ve[be]*ve[me]*8),Ae++}(X<50?Math.floor(5e3/X):Math.floor(200-2*X)),o=X)}this.encode=function(X,D){D&&O(D),p=new Array,y=0,S=7,ee(65496),ee(65504),ee(16),P(74),P(70),P(73),P(70),P(0),P(1),P(1),P(0),ee(1),ee(1),P(0),P(0),function(){ee(65499),ee(132),P(0);for(var Le=0;Le<64;Le++)P(l[Le]);P(1);for(var Ye=0;Ye<64;Ye++)P(g[Ye])}(),function(Le,Ye){ee(65472),ee(17),P(8),ee(Ye),ee(Le),P(3),P(1),P(17),P(0),P(2),P(17),P(1),P(3),P(17),P(1)}(X.width,X.height),function(){ee(65476),ee(418),P(0);for(var Le=0;Le<16;Le++)P(E[Le+1]);for(var Ye=0;Ye<=11;Ye++)P(F[Ye]);P(16);for(var Pe=0;Pe<16;Pe++)P(w[Pe+1]);for(var $e=0;$e<=161;$e++)P(V[$e]);P(1);for(var ot=0;ot<16;ot++)P(Y[ot+1]);for(var Ct=0;Ct<=11;Ct++)P(M[Ct]);P(17);for(var pt=0;pt<16;pt++)P(L[pt+1]);for(var it=0;it<=161;it++)P($[it])}(),ee(65498),ee(12),P(3),P(1),P(0),P(2),P(17),P(3),P(17),P(0),P(63),P(0);var z=0,Q=0,ne=0;y=0,S=7,this.encode.displayName="_encode_";for(var ce,se,ue,ve,Ae,be,me,Ne,Ie,ae=X.data,Ee=X.width,Fe=X.height,ke=4*Ee,ze=0;ze<Fe;){for(ce=0;ce<ke;){for(Ae=ke*ze+ce,me=-1,Ne=0,Ie=0;Ie<64;Ie++)be=Ae+(Ne=Ie>>3)*ke+(me=4*(7&Ie)),ze+Ne>=Fe&&(be-=ke*(ze+1+Ne-Fe)),ce+me>=ke&&(be-=ce+me-ke+4),se=ae[be++],ue=ae[be++],ve=ae[be++],v[Ie]=(H[se]+H[ue+256>>0]+H[ve+512>>0]>>16)-128,B[Ie]=(H[se+768>>0]+H[ue+1024>>0]+H[ve+1280>>0]>>16)-128,W[Ie]=(H[se+1280>>0]+H[ue+1536>>0]+H[ve+1792>>0]>>16)-128;z=j(v,u,z,t,r),Q=j(B,d,Q,n,i),ne=j(W,d,ne,n,i),ce+=32}ze+=8}if(S>=0){var He=[];He[1]=S+1,He[0]=(1<<S+1)-1,_(He)}return ee(65497),new Uint8Array(p)},e=e||50,function(){for(var X=String.fromCharCode,D=0;D<256;D++)J[D]=X(D)}(),t=U(E,F),n=U(Y,M),r=U(w,V),i=U(L,$),function(){for(var X=1,D=2,z=1;z<=15;z++){for(var Q=X;Q<D;Q++)f[32767+Q]=z,C[32767+Q]=[],C[32767+Q][1]=z,C[32767+Q][0]=Q;for(var ne=-(D-1);ne<=-X;ne++)f[32767+ne]=z,C[32767+ne]=[],C[32767+ne][1]=z,C[32767+ne][0]=D-1+ne;X<<=1,D<<=1}}(),function(){for(var X=0;X<256;X++)H[X]=19595*X,H[X+256>>0]=38470*X,H[X+512>>0]=7471*X+32768,H[X+768>>0]=-11059*X,H[X+1024>>0]=-21709*X,H[X+1280>>0]=32768*X+8421375,H[X+1536>>0]=-27439*X,H[X+1792>>0]=-5329*X}(),O(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Pl(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function jW(e){function t(E){if(!E)throw Error("assert :P")}function n(E,F,w){for(var V=0;4>V;V++)if(E[F+V]!=w.charCodeAt(V))return!0;return!1}function r(E,F,w,V,Y){for(var M=0;M<Y;M++)E[F+M]=w[V+M]}function i(E,F,w,V){for(var Y=0;Y<V;Y++)E[F+Y]=w}function o(E){return new Int32Array(E)}function a(E,F){for(var w=[],V=0;V<E;V++)w.push(new F);return w}function l(E,F){var w=[];return function V(Y,M,L){for(var $=L[M],U=0;U<$&&(Y.push(L.length>M+1?[]:new F),!(L.length<M+1));U++)V(Y[U],M+1,L)}(w,0,E),w}var g=function(){var E=this;function F(A,G){for(var N=1<<G-1>>>0;A&N;)N>>>=1;return N?(A&N-1)+N:A}function w(A,G,N,T,q){t(!(T%N));do A[G+(T-=N)]=q;while(0<T)}function V(A,G,N,T,q){if(t(2328>=q),512>=q)var re=o(512);else if((re=o(q))==null)return 0;return function(oe,le,ge,de,Ze,Me){var Te,Je,gt=le,je=1<<ge,we=o(16),We=o(16);for(t(Ze!=0),t(de!=null),t(oe!=null),t(0<ge),Je=0;Je<Ze;++Je){if(15<de[Je])return 0;++we[de[Je]]}if(we[0]==Ze)return 0;for(We[1]=0,Te=1;15>Te;++Te){if(we[Te]>1<<Te)return 0;We[Te+1]=We[Te]+we[Te]}for(Je=0;Je<Ze;++Je)Te=de[Je],0<de[Je]&&(Me[We[Te]++]=Je);if(We[15]==1)return(de=new Y).g=0,de.value=Me[0],w(oe,gt,1,je,de),je;var tt,et=-1,nt=je-1,Pt=0,Ft=1,fn=1,Lt=1<<ge;for(Je=0,Te=1,Ze=2;Te<=ge;++Te,Ze<<=1){if(Ft+=fn<<=1,0>(fn-=we[Te]))return 0;for(;0<we[Te];--we[Te])(de=new Y).g=Te,de.value=Me[Je++],w(oe,gt+Pt,Ze,Lt,de),Pt=F(Pt,Te)}for(Te=ge+1,Ze=2;15>=Te;++Te,Ze<<=1){if(Ft+=fn<<=1,0>(fn-=we[Te]))return 0;for(;0<we[Te];--we[Te]){if(de=new Y,(Pt&nt)!=et){for(gt+=Lt,tt=1<<(et=Te)-ge;15>et&&!(0>=(tt-=we[et]));)++et,tt<<=1;je+=Lt=1<<(tt=et-ge),oe[le+(et=Pt&nt)].g=tt+ge,oe[le+et].value=gt-le-et}de.g=Te-ge,de.value=Me[Je++],w(oe,gt+(Pt>>ge),Ze,Lt,de),Pt=F(Pt,Te)}}return Ft!=2*We[15]-1?0:je}(A,G,N,T,q,re)}function Y(){this.value=this.g=0}function M(){this.value=this.g=0}function L(){this.G=a(5,Y),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(oi,M)}function $(A,G,N,T){t(A!=null),t(G!=null),t(2147483648>T),A.Ca=254,A.I=0,A.b=-8,A.Ka=0,A.oa=G,A.pa=N,A.Jd=G,A.Yc=N+T,A.Zc=4<=T?N+T-4+1:N,ce(A)}function U(A,G){for(var N=0;0<G--;)N|=ue(A,128)<<G;return N}function _(A,G){var N=U(A,G);return se(A)?-N:N}function P(A,G,N,T){var q,re=0;for(t(A!=null),t(G!=null),t(4294967288>T),A.Sb=T,A.Ra=0,A.u=0,A.h=0,4<T&&(T=4),q=0;q<T;++q)re+=G[N+q]<<8*q;A.Ra=re,A.bb=T,A.oa=G,A.pa=N}function ee(A){for(;8<=A.u&&A.bb<A.Sb;)A.Ra>>>=8,A.Ra+=A.oa[A.pa+A.bb]<<ec-8>>>0,++A.bb,A.u-=8;z(A)&&(A.h=1,A.u=0)}function j(A,G){if(t(0<=G),!A.h&&G<=qg){var N=D(A)&$g[G];return A.u+=G,ee(A),N}return A.h=1,A.u=0}function O(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function X(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function D(A){return A.Ra>>>(A.u&ec-1)>>>0}function z(A){return t(A.bb<=A.Sb),A.h||A.bb==A.Sb&&A.u>ec}function Q(A,G){A.u=G,A.h=z(A)}function ne(A){A.u>=tc&&(t(A.u>=tc),ee(A))}function ce(A){t(A!=null&&A.oa!=null),A.pa<A.Zc?(A.I=(A.oa[A.pa++]|A.I<<8)>>>0,A.b+=8):(t(A!=null&&A.oa!=null),A.pa<A.Yc?(A.b+=8,A.I=A.oa[A.pa++]|A.I<<8):A.Ka?A.b=0:(A.I<<=8,A.b+=8,A.Ka=1))}function se(A){return U(A,1)}function ue(A,G){var N=A.Ca;0>A.b&&ce(A);var T=A.b,q=N*G>>>8,re=(A.I>>>T>q)+0;for(re?(N-=q,A.I-=q+1<<T>>>0):N=q+1,T=N,q=0;256<=T;)q+=8,T>>=8;return T=7^q+po[T],A.b-=T,A.Ca=(N<<T)-1,re}function ve(A,G,N){A[G+0]=N>>24&255,A[G+1]=N>>16&255,A[G+2]=N>>8&255,A[G+3]=N>>0&255}function Ae(A,G){return A[G+0]<<0|A[G+1]<<8}function be(A,G){return Ae(A,G)|A[G+2]<<16}function me(A,G){return Ae(A,G)|Ae(A,G+2)<<16}function Ne(A,G){var N=1<<G;return t(A!=null),t(0<G),A.X=o(N),A.X==null?0:(A.Mb=32-G,A.Xa=G,1)}function Ie(A,G){t(A!=null),t(G!=null),t(A.Xa==G.Xa),r(G.X,0,A.X,0,1<<G.Xa)}function ae(){this.X=[],this.Xa=this.Mb=0}function Ee(A,G,N,T){t(N!=null),t(T!=null);var q=N[0],re=T[0];return q==0&&(q=(A*re+G/2)/G),re==0&&(re=(G*q+A/2)/A),0>=q||0>=re?0:(N[0]=q,T[0]=re,1)}function Fe(A,G){return A+(1<<G)-1>>>G}function ke(A,G){return((4278255360&A)+(4278255360&G)>>>0&4278255360)+((16711935&A)+(16711935&G)>>>0&16711935)>>>0}function ze(A,G){E[G]=function(N,T,q,re,oe,le,ge){var de;for(de=0;de<oe;++de){var Ze=E[A](le[ge+de-1],q,re+de);le[ge+de]=ke(N[T+de],Ze)}}}function He(){this.ud=this.hd=this.jd=0}function Le(A,G){return((4278124286&(A^G))>>>1)+(A&G)>>>0}function Ye(A){return 0<=A&&256>A?A:0>A?0:255<A?255:void 0}function Pe(A,G){return Ye(A+(A-G+.5>>1))}function $e(A,G,N){return Math.abs(G-N)-Math.abs(A-N)}function ot(A,G,N,T,q,re,oe){for(T=re[oe-1],N=0;N<q;++N)re[oe+N]=T=ke(A[G+N],T)}function Ct(A,G,N,T,q){var re;for(re=0;re<N;++re){var oe=A[G+re],le=oe>>8&255,ge=16711935&(ge=(ge=16711935&oe)+((le<<16)+le));T[q+re]=(4278255360&oe)+ge>>>0}}function pt(A,G){G.jd=A>>0&255,G.hd=A>>8&255,G.ud=A>>16&255}function it(A,G,N,T,q,re){var oe;for(oe=0;oe<T;++oe){var le=G[N+oe],ge=le>>>8,de=le,Ze=255&(Ze=(Ze=le>>>16)+((A.jd<<24>>24)*(ge<<24>>24)>>>5));de=255&(de=(de=de+((A.hd<<24>>24)*(ge<<24>>24)>>>5))+((A.ud<<24>>24)*(Ze<<24>>24)>>>5)),q[re+oe]=(4278255360&le)+(Ze<<16)+de}}function It(A,G,N,T,q){E[G]=function(re,oe,le,ge,de,Ze,Me,Te,Je){for(ge=Me;ge<Te;++ge)for(Me=0;Me<Je;++Me)de[Ze++]=q(le[T(re[oe++])])},E[A]=function(re,oe,le,ge,de,Ze,Me){var Te=8>>re.b,Je=re.Ea,gt=re.K[0],je=re.w;if(8>Te)for(re=(1<<re.b)-1,je=(1<<Te)-1;oe<le;++oe){var we,We=0;for(we=0;we<Je;++we)we&re||(We=T(ge[de++])),Ze[Me++]=q(gt[We&je]),We>>=Te}else E["VP8LMapColor"+N](ge,de,gt,je,Ze,Me,oe,le,Je)}}function _e(A,G,N,T,q){for(N=G+N;G<N;){var re=A[G++];T[q++]=re>>16&255,T[q++]=re>>8&255,T[q++]=re>>0&255}}function Ot(A,G,N,T,q){for(N=G+N;G<N;){var re=A[G++];T[q++]=re>>16&255,T[q++]=re>>8&255,T[q++]=re>>0&255,T[q++]=re>>24&255}}function Qe(A,G,N,T,q){for(N=G+N;G<N;){var re=(oe=A[G++])>>16&240|oe>>12&15,oe=oe>>0&240|oe>>28&15;T[q++]=re,T[q++]=oe}}function st(A,G,N,T,q){for(N=G+N;G<N;){var re=(oe=A[G++])>>16&248|oe>>13&7,oe=oe>>5&224|oe>>3&31;T[q++]=re,T[q++]=oe}}function St(A,G,N,T,q){for(N=G+N;G<N;){var re=A[G++];T[q++]=re>>0&255,T[q++]=re>>8&255,T[q++]=re>>16&255}}function dt(A,G,N,T,q,re){if(re==0)for(N=G+N;G<N;)ve(T,((re=A[G++])[0]>>24|re[1]>>8&65280|re[2]<<8&16711680|re[3]<<24)>>>0),q+=32;else r(T,q,A,G,N)}function Wt(A,G){E[G][0]=E[A+"0"],E[G][1]=E[A+"1"],E[G][2]=E[A+"2"],E[G][3]=E[A+"3"],E[G][4]=E[A+"4"],E[G][5]=E[A+"5"],E[G][6]=E[A+"6"],E[G][7]=E[A+"7"],E[G][8]=E[A+"8"],E[G][9]=E[A+"9"],E[G][10]=E[A+"10"],E[G][11]=E[A+"11"],E[G][12]=E[A+"12"],E[G][13]=E[A+"13"],E[G][14]=E[A+"0"],E[G][15]=E[A+"0"]}function Et(A){return A==lc||A==gg||A==bu||A==yu}function hn(){this.eb=[],this.size=this.A=this.fb=0}function mn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Xn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new hn,this.f.kb=new mn,this.sd=null}function Mn(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function In(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Jt(A){return alert("todo:WebPSamplerProcessPlane"),A.T}function jt(A,G){var N=A.T,T=G.ba.f.RGBA,q=T.eb,re=T.fb+A.ka*T.A,oe=Ho[G.ba.S],le=A.y,ge=A.O,de=A.f,Ze=A.N,Me=A.ea,Te=A.W,Je=G.cc,gt=G.dc,je=G.Mc,we=G.Nc,We=A.ka,tt=A.ka+A.T,et=A.U,nt=et+1>>1;for(We==0?oe(le,ge,null,null,de,Ze,Me,Te,de,Ze,Me,Te,q,re,null,null,et):(oe(G.ec,G.fc,le,ge,Je,gt,je,we,de,Ze,Me,Te,q,re-T.A,q,re,et),++N);We+2<tt;We+=2)Je=de,gt=Ze,je=Me,we=Te,Ze+=A.Rc,Te+=A.Rc,re+=2*T.A,oe(le,(ge+=2*A.fa)-A.fa,le,ge,Je,gt,je,we,de,Ze,Me,Te,q,re-T.A,q,re,et);return ge+=A.fa,A.j+tt<A.o?(r(G.ec,G.fc,le,ge,et),r(G.cc,G.dc,de,Ze,nt),r(G.Mc,G.Nc,Me,Te,nt),N--):1&tt||oe(le,ge,null,null,de,Ze,Me,Te,de,Ze,Me,Te,q,re+T.A,null,null,et),N}function ln(A,G,N){var T=A.F,q=[A.J];if(T!=null){var re=A.U,oe=G.ba.S,le=oe==pu||oe==bu;G=G.ba.f.RGBA;var ge=[0],de=A.ka;ge[0]=A.T,A.Kb&&(de==0?--ge[0]:(--de,q[0]-=A.width),A.j+A.ka+A.T==A.o&&(ge[0]=A.o-A.j-de));var Ze=G.eb;de=G.fb+de*G.A,A=br(T,q[0],A.width,re,ge,Ze,de+(le?0:3),G.A),t(N==ge),A&&Et(oe)&&Jo(Ze,de,le,re,ge,G.A)}return 0}function Vt(A){var G=A.ma,N=G.ba.S,T=11>N,q=N==vs||N==Au||N==pu||N==Xr||N==12||Et(N);if(G.memory=null,G.Ib=null,G.Jb=null,G.Nd=null,!jg(G.Oa,A,q?11:12))return 0;if(q&&Et(N)&&ft(),A.da)alert("todo:use_scaling");else{if(T){if(G.Ib=Jt,A.Kb){if(N=A.U+1>>1,G.memory=o(A.U+2*N),G.memory==null)return 0;G.ec=G.memory,G.fc=0,G.cc=G.ec,G.dc=G.fc+A.U,G.Mc=G.cc,G.Nc=G.dc+N,G.Ib=jt,ft()}}else alert("todo:EmitYUV");q&&(G.Jb=ln,T&&Ke())}if(T&&!Ui){for(A=0;256>A;++A)Yo[A]=89858*(A-128)+Fa>>Jl,Eo[A]=-22014*(A-128)+Fa,uc[A]=-45773*(A-128),Ig[A]=113618*(A-128)+Fa>>Jl;for(A=yr;A<wr;++A)G=76283*(A-16)+Fa>>Jl,yd[A-yr]=ea(G,255),Tm[A-yr]=ea(G+8>>4,15);Ui=1}return 1}function Rt(A){var G=A.ma,N=A.U,T=A.T;return t(!(1&A.ka)),0>=N||0>=T?0:(N=G.Ib(A,G),G.Jb!=null&&G.Jb(A,G,N),G.Dc+=N,1)}function yt(A){A.ma.memory=null}function ht(A,G,N,T){return j(A,8)!=47?0:(G[0]=j(A,14)+1,N[0]=j(A,14)+1,T[0]=j(A,1),j(A,3)!=0?0:!A.h)}function sn(A,G){if(4>A)return A+1;var N=A-2>>1;return(2+(1&A)<<N)+j(G,N)+1}function ut(A,G){return 120<G?G-120:1<=(N=((N=o0[G-1])>>4)*A+(8-(15&N)))?N:1;var N}function ct(A,G,N){var T=D(N),q=A[G+=255&T].g-8;return 0<q&&(Q(N,N.u+8),T=D(N),G+=A[G].value,G+=T&(1<<q)-1),Q(N,N.u+A[G].g),A[G].value}function vt(A,G,N){return N.g+=A.g,N.value+=A.value<<G>>>0,t(8>=N.g),A.g}function Bt(A,G,N){var T=A.xc;return t((G=T==0?0:A.vc[A.md*(N>>T)+(G>>T)])<A.Wb),A.Ya[G]}function kt(A,G,N,T){var q=A.ab,re=A.c*G,oe=A.C;G=oe+G;var le=N,ge=T;for(T=A.Ta,N=A.Ua;0<q--;){var de=A.gc[q],Ze=oe,Me=G,Te=le,Je=ge,gt=(ge=T,le=N,de.Ea);switch(t(Ze<Me),t(Me<=de.nc),de.hc){case 2:md(Te,Je,(Me-Ze)*gt,ge,le);break;case 0:var je=Ze,we=Me,We=ge,tt=le,et=(Lt=de).Ea;je==0&&(rg(Te,Je,null,null,1,We,tt),ot(Te,Je+1,0,0,et-1,We,tt+1),Je+=et,tt+=et,++je);for(var nt=1<<Lt.b,Pt=nt-1,Ft=Fe(et,Lt.b),fn=Lt.K,Lt=Lt.w+(je>>Lt.b)*Ft;je<we;){var gr=fn,cr=Lt,ir=1;for(Bl(Te,Je,We,tt-et,1,We,tt);ir<et;){var Yn=(ir&~Pt)+nt;Yn>et&&(Yn=et),(0,il[gr[cr++]>>8&15])(Te,Je+ +ir,We,tt+ir-et,Yn-ir,We,tt+ir),ir=Yn}Je+=et,tt+=et,++je&Pt||(Lt+=Ft)}Me!=de.nc&&r(ge,le-gt,ge,le+(Me-Ze-1)*gt,gt);break;case 1:for(gt=Te,we=Je,et=(Te=de.Ea)-(tt=Te&~(We=(Je=1<<de.b)-1)),je=Fe(Te,de.b),nt=de.K,de=de.w+(Ze>>de.b)*je;Ze<Me;){for(Pt=nt,Ft=de,fn=new He,Lt=we+tt,gr=we+Te;we<Lt;)pt(Pt[Ft++],fn),ps(fn,gt,we,Je,ge,le),we+=Je,le+=Je;we<gr&&(pt(Pt[Ft++],fn),ps(fn,gt,we,et,ge,le),we+=et,le+=et),++Ze&We||(de+=je)}break;case 3:if(Te==ge&&Je==le&&0<de.b){for(we=ge,Te=gt=le+(Me-Ze)*gt-(tt=(Me-Ze)*Fe(de.Ea,de.b)),Je=ge,We=le,je=[],tt=(et=tt)-1;0<=tt;--tt)je[tt]=Je[We+tt];for(tt=et-1;0<=tt;--tt)we[Te+tt]=je[tt];bo(de,Ze,Me,ge,gt,ge,le)}else bo(de,Ze,Me,Te,Je,ge,le)}le=T,ge=N}ge!=N&&r(T,N,le,ge,re)}function Tt(A,G){var N=A.V,T=A.Ba+A.c*A.C,q=G-A.C;if(t(G<=A.l.o),t(16>=q),0<q){var re=A.l,oe=A.Ta,le=A.Ua,ge=re.width;if(kt(A,q,N,T),q=le=[le],t((N=A.C)<(T=G)),t(re.v<re.va),T>re.o&&(T=re.o),N<re.j){var de=re.j-N;N=re.j,q[0]+=de*ge}if(N>=T?N=0:(q[0]+=4*re.v,re.ka=N-re.j,re.U=re.va-re.v,re.T=T-N,N=1),N){if(le=le[0],11>(N=A.ca).S){var Ze=N.f.RGBA,Me=(T=N.S,q=re.U,re=re.T,de=Ze.eb,Ze.A),Te=re;for(Ze=Ze.fb+A.Ma*Ze.A;0<Te--;){var Je=oe,gt=le,je=q,we=de,We=Ze;switch(T){case hd:yo(Je,gt,je,we,We);break;case vs:io(Je,gt,je,we,We);break;case lc:io(Je,gt,je,we,We),Jo(we,We,0,je,1,0);break;case Em:wl(Je,gt,je,we,We);break;case Au:dt(Je,gt,je,we,We,1);break;case gg:dt(Je,gt,je,we,We,1),Jo(we,We,0,je,1,0);break;case pu:dt(Je,gt,je,we,We,0);break;case bu:dt(Je,gt,je,we,We,0),Jo(we,We,1,je,1,0);break;case Xr:bs(Je,gt,je,we,We);break;case yu:bs(Je,gt,je,we,We),Nr(we,We,je,1,0);break;case Ad:Rl(Je,gt,je,we,We);break;default:t(0)}le+=ge,Ze+=Me}A.Ma+=re}else alert("todo:EmitRescaledRowsYUVA");t(A.Ma<=N.height)}}A.C=G,t(A.C<=A.i)}function Jn(A){var G;if(0<A.ua)return 0;for(G=0;G<A.Wb;++G){var N=A.Ya[G].G,T=A.Ya[G].H;if(0<N[1][T[1]+0].g||0<N[2][T[2]+0].g||0<N[3][T[3]+0].g)return 0}return 1}function cn(A,G,N,T,q,re){if(A.Z!=0){var oe=A.qd,le=A.rd;for(t(ao[A.Z]!=null);G<N;++G)ao[A.Z](oe,le,T,q,T,q,re),oe=T,le=q,q+=re;A.qd=oe,A.rd=le}}function yn(A,G){var N=A.l.ma,T=N.Z==0||N.Z==1?A.l.j:A.C;if(T=A.C<T?T:A.C,t(G<=A.l.o),G>T){var q=A.l.width,re=N.ca,oe=N.tb+q*T,le=A.V,ge=A.Ba+A.c*T,de=A.gc;t(A.ab==1),t(de[0].hc==3),fu(de[0],T,G,le,ge,re,oe),cn(N,T,G,re,oe,q)}A.C=A.Ma=G}function qt(A,G,N,T,q,re,oe){var le=A.$/T,ge=A.$%T,de=A.m,Ze=A.s,Me=N+A.$,Te=Me;q=N+T*q;var Je=N+T*re,gt=280+Ze.ua,je=A.Pb?le:16777216,we=0<Ze.ua?Ze.Wa:null,We=Ze.wc,tt=Me<Je?Bt(Ze,ge,le):null;t(A.C<re),t(Je<=q);var et=!1;e:for(;;){for(;et||Me<Je;){var nt=0;if(le>=je){var Pt=Me-N;t((je=A).Pb),je.wd=je.m,je.xd=Pt,0<je.s.ua&&Ie(je.s.Wa,je.s.vb),je=le+bd}if(ge&We||(tt=Bt(Ze,ge,le)),t(tt!=null),tt.Qb&&(G[Me]=tt.qb,et=!0),!et)if(ne(de),tt.jc){nt=de,Pt=G;var Ft=Me,fn=tt.pd[D(nt)&oi-1];t(tt.jc),256>fn.g?(Q(nt,nt.u+fn.g),Pt[Ft]=fn.value,nt=0):(Q(nt,nt.u+fn.g-256),t(256<=fn.value),nt=fn.value),nt==0&&(et=!0)}else nt=ct(tt.G[0],tt.H[0],de);if(de.h)break;if(et||256>nt){if(!et)if(tt.nd)G[Me]=(tt.qb|nt<<8)>>>0;else{if(ne(de),et=ct(tt.G[1],tt.H[1],de),ne(de),Pt=ct(tt.G[2],tt.H[2],de),Ft=ct(tt.G[3],tt.H[3],de),de.h)break;G[Me]=(Ft<<24|et<<16|nt<<8|Pt)>>>0}if(et=!1,++Me,++ge>=T&&(ge=0,++le,oe!=null&&le<=re&&!(le%16)&&oe(A,le),we!=null))for(;Te<Me;)nt=G[Te++],we.X[(506832829*nt&4294967295)>>>we.Mb]=nt}else if(280>nt){if(nt=sn(nt-256,de),Pt=ct(tt.G[4],tt.H[4],de),ne(de),Pt=ut(T,Pt=sn(Pt,de)),de.h)break;if(Me-N<Pt||q-Me<nt)break e;for(Ft=0;Ft<nt;++Ft)G[Me+Ft]=G[Me+Ft-Pt];for(Me+=nt,ge+=nt;ge>=T;)ge-=T,++le,oe!=null&&le<=re&&!(le%16)&&oe(A,le);if(t(Me<=q),ge&We&&(tt=Bt(Ze,ge,le)),we!=null)for(;Te<Me;)nt=G[Te++],we.X[(506832829*nt&4294967295)>>>we.Mb]=nt}else{if(!(nt<gt))break e;for(et=nt-280,t(we!=null);Te<Me;)nt=G[Te++],we.X[(506832829*nt&4294967295)>>>we.Mb]=nt;nt=Me,t(!(et>>>(Pt=we).Xa)),G[nt]=Pt.X[et],et=!0}et||t(de.h==z(de))}if(A.Pb&&de.h&&Me<q)t(A.m.h),A.a=5,A.m=A.wd,A.$=A.xd,0<A.s.ua&&Ie(A.s.vb,A.s.Wa);else{if(de.h)break e;oe!=null&&oe(A,le>re?re:le),A.a=0,A.$=Me-N}return 1}return A.a=3,0}function Vn(A){t(A!=null),A.vc=null,A.yc=null,A.Ya=null;var G=A.Wa;G!=null&&(G.X=null),A.vb=null,t(A!=null)}function En(){var A=new fC;return A==null?null:(A.a=0,A.xb=gc,Wt("Predictor","VP8LPredictors"),Wt("Predictor","VP8LPredictors_C"),Wt("PredictorAdd","VP8LPredictorsAdd"),Wt("PredictorAdd","VP8LPredictorsAdd_C"),md=Ct,ps=it,yo=_e,io=Ot,bs=Qe,Rl=st,wl=St,E.VP8LMapColor32b=nc,E.VP8LMapColor8b=rc,A)}function Dn(A,G,N,T,q){var re=1,oe=[A],le=[G],ge=T.m,de=T.s,Ze=null,Me=0;e:for(;;){if(N)for(;re&&j(ge,1);){var Te=oe,Je=le,gt=T,je=1,we=gt.m,We=gt.gc[gt.ab],tt=j(we,2);if(gt.Oc&1<<tt)re=0;else{switch(gt.Oc|=1<<tt,We.hc=tt,We.Ea=Te[0],We.nc=Je[0],We.K=[null],++gt.ab,t(4>=gt.ab),tt){case 0:case 1:We.b=j(we,3)+2,je=Dn(Fe(We.Ea,We.b),Fe(We.nc,We.b),0,gt,We.K),We.K=We.K[0];break;case 3:var et,nt=j(we,8)+1,Pt=16<nt?0:4<nt?1:2<nt?2:3;if(Te[0]=Fe(We.Ea,Pt),We.b=Pt,et=je=Dn(nt,1,0,gt,We.K)){var Ft,fn=nt,Lt=We,gr=1<<(8>>Lt.b),cr=o(gr);if(cr==null)et=0;else{var ir=Lt.K[0],Yn=Lt.w;for(cr[0]=Lt.K[0][0],Ft=1;Ft<1*fn;++Ft)cr[Ft]=ke(ir[Yn+Ft],cr[Ft-1]);for(;Ft<4*gr;++Ft)cr[Ft]=0;Lt.K[0]=null,Lt.K[0]=cr,et=1}}je=et;break;case 2:break;default:t(0)}re=je}}if(oe=oe[0],le=le[0],re&&j(ge,1)&&!(re=1<=(Me=j(ge,4))&&11>=Me)){T.a=3;break e}var vr;if(vr=re)t:{var Wr,Bn,$r,Zo=T,gi=oe,Wi=le,fr=Me,lo=N,so=Zo.m,qr=Zo.s,Vi=[null],ji=1,Fo=0,ya=Km[fr];n:for(;;){if(lo&&j(so,1)){var ei=j(so,3)+2,hi=Fe(gi,ei),ra=Fe(Wi,ei),Gs=hi*ra;if(!Dn(hi,ra,0,Zo,Vi))break n;for(Vi=Vi[0],qr.xc=ei,Wr=0;Wr<Gs;++Wr){var Hl=Vi[Wr]>>8&65535;Vi[Wr]=Hl,Hl>=ji&&(ji=Hl+1)}}if(so.h)break n;for(Bn=0;5>Bn;++Bn){var mr=cg[Bn];!Bn&&0<fr&&(mr+=1<<fr),Fo<mr&&(Fo=mr)}var gl=a(ji*ya,Y),vd=ji,yC=a(vd,L);if(yC==null)var va=null;else t(65536>=vd),va=yC;var Sa=o(Fo);if(va==null||Sa==null||gl==null){Zo.a=1;break n}var fg=gl;for(Wr=$r=0;Wr<ji;++Wr){var Za=va[Wr],Yl=Za.G,mg=Za.H,dc=0,ia=1,Ic=0;for(Bn=0;5>Bn;++Bn){mr=cg[Bn],Yl[Bn]=fg,mg[Bn]=$r,!Bn&&0<fr&&(mr+=1<<fr);i:{var Bs,El=mr,Cc=Zo,cl=Sa,Dm=fg,vC=$r,Lr=0,Ka=Cc.m,SC=j(Ka,1);if(i(cl,0,0,El),SC){var ZC=j(Ka,1)+1,Sd=j(Ka,1),Zd=j(Ka,Sd==0?1:8);cl[Zd]=1,ZC==2&&(cl[Zd=j(Ka,8)]=1);var ul=1}else{var Or=o(19),Ai=j(Ka,4)+4;if(19<Ai){Cc.a=3;var ci=0;break i}for(Bs=0;Bs<Ai;++Bs)Or[i0[Bs]]=j(Ka,3);var fc=void 0,Fl=void 0,mc=Cc,c0=Or,ki=El,Gd=cl,Bu=0,dl=mc.m,La=8,oa=a(128,Y);r:for(;V(oa,0,7,c0,19);){if(j(dl,1)){var Ru=2+2*j(dl,3);if((fc=2+j(dl,Ru))>ki)break r}else fc=ki;for(Fl=0;Fl<ki&&fc--;){ne(dl);var Bd=oa[0+(127&D(dl))];Q(dl,dl.u+Bd.g);var Rs=Bd.value;if(16>Rs)Gd[Fl++]=Rs,Rs!=0&&(La=Rs);else{var Pm=Rs==16,GC=Rs-16,Om=pd[GC],BC=j(dl,vu[GC])+Om;if(Fl+BC>ki)break r;for(var _m=Pm?La:0;0<BC--;)Gd[Fl++]=_m}}Bu=1;break r}Bu||(mc.a=3),ul=Bu}(ul=ul&&!Ka.h)&&(Lr=V(Dm,vC,8,cl,El)),ul&&Lr!=0?ci=Lr:(Cc.a=3,ci=0)}if(ci==0)break n;if(ia&&Fm[Bn]==1&&(ia=fg[$r].g==0),dc+=fg[$r].g,$r+=ci,3>=Bn){var hc,Rd=Sa[0];for(hc=1;hc<mr;++hc)Sa[hc]>Rd&&(Rd=Sa[hc]);Ic+=Rd}}if(Za.nd=ia,Za.Qb=0,ia&&(Za.qb=(Yl[3][mg[3]+0].value<<24|Yl[1][mg[1]+0].value<<16|Yl[2][mg[2]+0].value)>>>0,dc==0&&256>Yl[0][mg[0]+0].value&&(Za.Qb=1,Za.qb+=Yl[0][mg[0]+0].value<<8)),Za.jc=!Za.Qb&&6>Ic,Za.jc){var wu,aa=Za;for(wu=0;wu<oi;++wu){var Kl=wu,Ma=aa.pd[Kl],hg=aa.G[0][aa.H[0]+Kl];256<=hg.value?(Ma.g=hg.g+256,Ma.value=hg.value):(Ma.g=0,Ma.value=0,Kl>>=vt(hg,8,Ma),Kl>>=vt(aa.G[1][aa.H[1]+Kl],16,Ma),Kl>>=vt(aa.G[2][aa.H[2]+Kl],0,Ma),vt(aa.G[3][aa.H[3]+Kl],24,Ma))}}}qr.vc=Vi,qr.Wb=ji,qr.Ya=va,qr.yc=gl,vr=1;break t}vr=0}if(!(re=vr)){T.a=3;break e}if(0<Me){if(de.ua=1<<Me,!Ne(de.Wa,Me)){T.a=1,re=0;break e}}else de.ua=0;var wd=T,Wd=oe,Um=le,Vd=wd.s,kd=Vd.xc;if(wd.c=Wd,wd.i=Um,Vd.md=Fe(Wd,kd),Vd.wc=kd==0?-1:(1<<kd)-1,N){T.xb=sl;break e}if((Ze=o(oe*le))==null){T.a=1,re=0;break e}re=(re=qt(T,Ze,0,oe,le,le,null))&&!ge.h;break e}return re?(q!=null?q[0]=Ze:(t(Ze==null),t(N)),T.$=0,N||Vn(de)):Vn(de),re}function ar(A,G){var N=A.c*A.i,T=N+G+16*G;return t(A.c<=G),A.V=o(T),A.V==null?(A.Ta=null,A.Ua=0,A.a=1,0):(A.Ta=A.V,A.Ua=A.Ba+N+G,1)}function Ln(A,G){var N=A.C,T=G-N,q=A.V,re=A.Ba+A.c*N;for(t(G<=A.l.o);0<T;){var oe=16<T?16:T,le=A.l.ma,ge=A.l.width,de=ge*oe,Ze=le.ca,Me=le.tb+ge*N,Te=A.Ta,Je=A.Ua;kt(A,oe,q,re),ai(Te,Je,Ze,Me,de),cn(le,N,N+oe,Ze,Me,ge),T-=oe,q+=oe*A.c,N+=oe}t(N==G),A.C=A.Ma=G}function Pn(){this.ub=this.yd=this.td=this.Rb=0}function At(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ht(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Yt(){this.Yb=function(){var A=[];return function G(N,T,q){for(var re=q[T],oe=0;oe<re&&(N.push(q.length>T+1?[]:0),!(q.length<T+1));oe++)G(N[oe],T+1,q)}(A,0,[3,11]),A}()}function at(){this.jb=o(3),this.Wc=l([4,8],Yt),this.Xc=l([4,17],Yt)}function Qt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function An(){this.ld=this.La=this.dd=this.tc=0}function Tn(){this.Na=this.la=0}function tr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Rr(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Kt(){this.uc=this.M=this.Nb=0,this.wa=Array(new An),this.Y=0,this.ya=Array(new Rr),this.aa=0,this.l=new kr}function en(){this.y=o(16),this.f=o(8),this.ea=o(8)}function gn(){this.cb=this.a=0,this.sc="",this.m=new O,this.Od=new Pn,this.Kc=new At,this.ed=new Qt,this.Qa=new Ht,this.Ic=this.$c=this.Aa=0,this.D=new Kt,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,O),this.ia=0,this.pb=a(4,tr),this.Pa=new at,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new en),this.Hd=0,this.rb=Array(new Tn),this.sb=0,this.wa=Array(new An),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Rr),this.L=this.aa=0,this.gd=l([4,2],An),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function kr(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ar(){var A=new gn;return A!=null&&(A.a=0,A.sc="OK",A.cb=0,A.Xb=0,ug||(ug=Ei)),A}function Fn(A,G,N){return A.a==0&&(A.a=G,A.sc=N,A.cb=0),0}function ri(A,G,N){return 3<=N&&A[G+0]==157&&A[G+1]==1&&A[G+2]==42}function Ao(A,G){if(A==null)return 0;if(A.a=0,A.sc="OK",G==null)return Fn(A,2,"null VP8Io passed to VP8GetHeaders()");var N=G.data,T=G.w,q=G.ha;if(4>q)return Fn(A,7,"Truncated header.");var re=N[T+0]|N[T+1]<<8|N[T+2]<<16,oe=A.Od;if(oe.Rb=!(1&re),oe.td=re>>1&7,oe.yd=re>>4&1,oe.ub=re>>5,3<oe.td)return Fn(A,3,"Incorrect keyframe parameters.");if(!oe.yd)return Fn(A,4,"Frame not displayable.");T+=3,q-=3;var le=A.Kc;if(oe.Rb){if(7>q)return Fn(A,7,"cannot parse picture header");if(!ri(N,T,q))return Fn(A,3,"Bad code word");le.c=16383&(N[T+4]<<8|N[T+3]),le.Td=N[T+4]>>6,le.i=16383&(N[T+6]<<8|N[T+5]),le.Ud=N[T+6]>>6,T+=7,q-=7,A.za=le.c+15>>4,A.Ub=le.i+15>>4,G.width=le.c,G.height=le.i,G.Da=0,G.j=0,G.v=0,G.va=G.width,G.o=G.height,G.da=0,G.ib=G.width,G.hb=G.height,G.U=G.width,G.T=G.height,i((re=A.Pa).jb,0,255,re.jb.length),t((re=A.Qa)!=null),re.Cb=0,re.Bb=0,re.Fb=1,i(re.Zb,0,0,re.Zb.length),i(re.Lb,0,0,re.Lb)}if(oe.ub>q)return Fn(A,7,"bad partition length");$(re=A.m,N,T,oe.ub),T+=oe.ub,q-=oe.ub,oe.Rb&&(le.Ld=se(re),le.Kd=se(re)),le=A.Qa;var ge,de=A.Pa;if(t(re!=null),t(le!=null),le.Cb=se(re),le.Cb){if(le.Bb=se(re),se(re)){for(le.Fb=se(re),ge=0;4>ge;++ge)le.Zb[ge]=se(re)?_(re,7):0;for(ge=0;4>ge;++ge)le.Lb[ge]=se(re)?_(re,6):0}if(le.Bb)for(ge=0;3>ge;++ge)de.jb[ge]=se(re)?U(re,8):255}else le.Bb=0;if(re.Ka)return Fn(A,3,"cannot parse segment header");if((le=A.ed).zd=se(re),le.Tb=U(re,6),le.wb=U(re,3),le.Pc=se(re),le.Pc&&se(re)){for(de=0;4>de;++de)se(re)&&(le.vd[de]=_(re,6));for(de=0;4>de;++de)se(re)&&(le.od[de]=_(re,6))}if(A.L=le.Tb==0?0:le.zd?1:2,re.Ka)return Fn(A,3,"cannot parse filter header");var Ze=q;if(q=ge=T,T=ge+Ze,le=Ze,A.Xb=(1<<U(A.m,2))-1,Ze<3*(de=A.Xb))N=7;else{for(ge+=3*de,le-=3*de,Ze=0;Ze<de;++Ze){var Me=N[q+0]|N[q+1]<<8|N[q+2]<<16;Me>le&&(Me=le),$(A.Jc[+Ze],N,ge,Me),ge+=Me,le-=Me,q+=3}$(A.Jc[+de],N,ge,le),N=ge<T?0:5}if(N!=0)return Fn(A,N,"cannot parse partitions");for(N=U(ge=A.m,7),q=se(ge)?_(ge,4):0,T=se(ge)?_(ge,4):0,le=se(ge)?_(ge,4):0,de=se(ge)?_(ge,4):0,ge=se(ge)?_(ge,4):0,Ze=A.Qa,Me=0;4>Me;++Me){if(Ze.Cb){var Te=Ze.Zb[Me];Ze.Fb||(Te+=N)}else{if(0<Me){A.pb[Me]=A.pb[0];continue}Te=N}var Je=A.pb[Me];Je.Sc[0]=sc[ea(Te+q,127)],Je.Sc[1]=Su[ea(Te+0,127)],Je.Eb[0]=2*sc[ea(Te+T,127)],Je.Eb[1]=101581*Su[ea(Te+le,127)]>>16,8>Je.Eb[1]&&(Je.Eb[1]=8),Je.Qc[0]=sc[ea(Te+de,117)],Je.Qc[1]=Su[ea(Te+ge,127)],Je.lc=Te+ge}if(!oe.Rb)return Fn(A,4,"Not a key frame.");for(se(re),oe=A.Pa,N=0;4>N;++N){for(q=0;8>q;++q)for(T=0;3>T;++T)for(le=0;11>le;++le)de=ue(re,l0[N][q][T][le])?U(re,8):Mm[N][q][T][le],oe.Wc[N][q].Yb[T][le]=de;for(q=0;17>q;++q)oe.Xc[N][q]=oe.Wc[N][AC[q]]}return A.kc=se(re),A.kc&&(A.Bd=U(re,8)),A.cb=1}function Ei(A,G,N,T,q,re,oe){var le=G[q].Yb[N];for(N=0;16>q;++q){if(!ue(A,le[N+0]))return q;for(;!ue(A,le[N+1]);)if(le=G[++q].Yb[0],N=0,q==16)return 16;var ge=G[q+1].Yb;if(ue(A,le[N+2])){var de=A,Ze=0;if(ue(de,(Te=le)[(Me=N)+3]))if(ue(de,Te[Me+6])){for(le=0,Me=2*(Ze=ue(de,Te[Me+8]))+(Te=ue(de,Te[Me+9+Ze])),Ze=0,Te=mC[Me];Te[le];++le)Ze+=Ze+ue(de,Te[le]);Ze+=3+(8<<Me)}else ue(de,Te[Me+7])?(Ze=7+2*ue(de,165),Ze+=ue(de,145)):Ze=5+ue(de,159);else Ze=ue(de,Te[Me+4])?3+ue(de,Te[Me+5]):2;le=ge[2]}else Ze=1,le=ge[1];ge=oe+hC[q],0>(de=A).b&&ce(de);var Me,Te=de.b,Je=(Me=de.Ca>>1)-(de.I>>Te)>>31;--de.b,de.Ca+=Je,de.Ca|=1,de.I-=(Me+1&Je)<<Te,re[ge]=((Ze^Je)-Je)*T[(0<q)+0]}return 16}function Ur(A){var G=A.rb[A.sb-1];G.la=0,G.Na=0,i(A.zc,0,0,A.zc.length),A.ja=0}function to(A,G){if(A==null)return 0;if(G==null)return Fn(A,2,"NULL VP8Io parameter in VP8Decode().");if(!A.cb&&!Ao(A,G))return 0;if(t(A.cb),G.ac==null||G.ac(G)){G.ob&&(A.L=0);var N=Cg[A.L];if(A.L==2?(A.yb=0,A.zb=0):(A.yb=G.v-N>>4,A.zb=G.j-N>>4,0>A.yb&&(A.yb=0),0>A.zb&&(A.zb=0)),A.Va=G.o+15+N>>4,A.Hb=G.va+15+N>>4,A.Hb>A.za&&(A.Hb=A.za),A.Va>A.Ub&&(A.Va=A.Ub),0<A.L){var T=A.ed;for(N=0;4>N;++N){var q;if(A.Qa.Cb){var re=A.Qa.Lb[N];A.Qa.Fb||(re+=T.Tb)}else re=T.Tb;for(q=0;1>=q;++q){var oe=A.gd[N][q],le=re;if(T.Pc&&(le+=T.vd[0],q&&(le+=T.od[0])),0<(le=0>le?0:63<le?63:le)){var ge=le;0<T.wb&&(ge=4<T.wb?ge>>2:ge>>1)>9-T.wb&&(ge=9-T.wb),1>ge&&(ge=1),oe.dd=ge,oe.tc=2*le+ge,oe.ld=40<=le?2:15<=le?1:0}else oe.tc=0;oe.La=q}}}N=0}else Fn(A,6,"Frame setup failed"),N=A.a;if(N=N==0){if(N){A.$c=0,0<A.Aa||(A.Ic=xl);e:{N=A.Ic,T=4*(ge=A.za);var de=32*ge,Ze=ge+1,Me=0<A.L?ge*(0<A.Aa?2:1):0,Te=(A.Aa==2?2:1)*ge;if((oe=T+832+(q=3*(16*N+Cg[A.L])/2*de)+(re=A.Fa!=null&&0<A.Fa.length?A.Kc.c*A.Kc.i:0))!=oe)N=0;else{if(oe>A.Vb){if(A.Vb=0,A.Ec=o(oe),A.Fc=0,A.Ec==null){N=Fn(A,1,"no memory during frame initialization.");break e}A.Vb=oe}oe=A.Ec,le=A.Fc,A.Ac=oe,A.Bc=le,le+=T,A.Gd=a(de,en),A.Hd=0,A.rb=a(Ze+1,Tn),A.sb=1,A.wa=Me?a(Me,An):null,A.Y=0,A.D.Nb=0,A.D.wa=A.wa,A.D.Y=A.Y,0<A.Aa&&(A.D.Y+=ge),t(!0),A.oc=oe,A.pc=le,le+=832,A.ya=a(Te,Rr),A.aa=0,A.D.ya=A.ya,A.D.aa=A.aa,A.Aa==2&&(A.D.aa+=ge),A.R=16*ge,A.B=8*ge,ge=(de=Cg[A.L])*A.R,de=de/2*A.B,A.sa=oe,A.ta=le+ge,A.qa=A.sa,A.ra=A.ta+16*N*A.R+de,A.Ha=A.qa,A.Ia=A.ra+8*N*A.B+de,A.$c=0,le+=q,A.mb=re?oe:null,A.nb=re?le:null,t(le+re<=A.Fc+A.Vb),Ur(A),i(A.Ac,A.Bc,0,T),N=1}}if(N){if(G.ka=0,G.y=A.sa,G.O=A.ta,G.f=A.qa,G.N=A.ra,G.ea=A.Ha,G.Vd=A.Ia,G.fa=A.R,G.Rc=A.B,G.F=null,G.J=0,!hu){for(N=-255;255>=N;++N)mi[255+N]=0>N?-N:N;for(N=-1020;1020>=N;++N)al[1020+N]=-128>N?-128:127<N?127:N;for(N=-112;112>=N;++N)oc[112+N]=-16>N?-16:15<N?15:N;for(N=-255;510>=N;++N)sg[255+N]=0>N?0:255<N?255:N;hu=1}ic=Sn,Wl=nr,Vl=rr,oo=Bi,ta=Pr,Ir=zn,ig=Dg,mu=wi,og=qs,ag=uu,lg=Cs,na=fs,kl=eg,ol=Pg,Nl=Ha,Xl=ma,ys=ha,_i=Cd,ba[0]=No,ba[1]=di,ba[2]=xa,ba[3]=ko,ba[4]=_t,ba[5]=dr,ba[6]=an,ba[7]=Hr,ba[8]=Zl,ba[9]=pr,So[0]=Vo,So[1]=Ii,So[2]=Wo,So[3]=Ci,So[4]=sr,So[5]=Ri,So[6]=Oi,xo[0]=qo,xo[1]=Fi,xo[2]=js,xo[3]=fa,xo[4]=Qs,xo[5]=Tg,xo[6]=gu,N=1}else N=0}N&&(N=function(Je,gt){for(Je.M=0;Je.M<Je.Va;++Je.M){var je,we=Je.Jc[Je.M&Je.Xb],We=Je.m,tt=Je;for(je=0;je<tt.za;++je){var et=We,nt=tt,Pt=nt.Ac,Ft=nt.Bc+4*je,fn=nt.zc,Lt=nt.ya[nt.aa+je];if(nt.Qa.Bb?Lt.$b=ue(et,nt.Pa.jb[0])?2+ue(et,nt.Pa.jb[2]):ue(et,nt.Pa.jb[1]):Lt.$b=0,nt.kc&&(Lt.Ad=ue(et,nt.Bd)),Lt.Za=!ue(et,145)+0,Lt.Za){var gr=Lt.Ob,cr=0;for(nt=0;4>nt;++nt){var ir,Yn=fn[0+nt];for(ir=0;4>ir;++ir){Yn=a0[Pt[Ft+ir]][Yn];for(var vr=Lm[ue(et,Yn[0])];0<vr;)vr=Lm[2*vr+ue(et,Yn[vr])];Yn=-vr,Pt[Ft+ir]=Yn}r(gr,cr,Pt,Ft,4),cr+=4,fn[0+nt]=Yn}}else Yn=ue(et,156)?ue(et,128)?1:3:ue(et,163)?2:0,Lt.Ob[0]=Yn,i(Pt,Ft,Yn,4),i(fn,0,Yn,4);Lt.Dd=ue(et,142)?ue(et,114)?ue(et,183)?1:3:2:0}if(tt.m.Ka)return Fn(Je,7,"Premature end-of-partition0 encountered.");for(;Je.ja<Je.za;++Je.ja){if(tt=we,et=(We=Je).rb[We.sb-1],Pt=We.rb[We.sb+We.ja],je=We.ya[We.aa+We.ja],Ft=We.kc?je.Ad:0)et.la=Pt.la=0,je.Za||(et.Na=Pt.Na=0),je.Hc=0,je.Gc=0,je.ia=0;else{var Wr,Bn;if(et=Pt,Pt=tt,Ft=We.Pa.Xc,fn=We.ya[We.aa+We.ja],Lt=We.pb[fn.$b],nt=fn.ad,gr=0,cr=We.rb[We.sb-1],Yn=ir=0,i(nt,gr,0,384),fn.Za)var $r=0,Zo=Ft[3];else{vr=o(16);var gi=et.Na+cr.Na;if(gi=ug(Pt,Ft[1],gi,Lt.Eb,0,vr,0),et.Na=cr.Na=(0<gi)+0,1<gi)ic(vr,0,nt,gr);else{var Wi=vr[0]+3>>3;for(vr=0;256>vr;vr+=16)nt[gr+vr]=Wi}$r=1,Zo=Ft[0]}var fr=15&et.la,lo=15&cr.la;for(vr=0;4>vr;++vr){var so=1&lo;for(Wi=Bn=0;4>Wi;++Wi)fr=fr>>1|(so=(gi=ug(Pt,Zo,gi=so+(1&fr),Lt.Sc,$r,nt,gr))>$r)<<7,Bn=Bn<<2|(3<gi?3:1<gi?2:nt[gr+0]!=0),gr+=16;fr>>=4,lo=lo>>1|so<<7,ir=(ir<<8|Bn)>>>0}for(Zo=fr,$r=lo>>4,Wr=0;4>Wr;Wr+=2){for(Bn=0,fr=et.la>>4+Wr,lo=cr.la>>4+Wr,vr=0;2>vr;++vr){for(so=1&lo,Wi=0;2>Wi;++Wi)gi=so+(1&fr),fr=fr>>1|(so=0<(gi=ug(Pt,Ft[2],gi,Lt.Qc,0,nt,gr)))<<3,Bn=Bn<<2|(3<gi?3:1<gi?2:nt[gr+0]!=0),gr+=16;fr>>=2,lo=lo>>1|so<<5}Yn|=Bn<<4*Wr,Zo|=fr<<4<<Wr,$r|=(240&lo)<<Wr}et.la=Zo,cr.la=$r,fn.Hc=ir,fn.Gc=Yn,fn.ia=43690&Yn?0:Lt.ia,Ft=!(ir|Yn)}if(0<We.L&&(We.wa[We.Y+We.ja]=We.gd[je.$b][je.Za],We.wa[We.Y+We.ja].La|=!Ft),tt.Ka)return Fn(Je,7,"Premature end-of-file encountered.")}if(Ur(Je),We=gt,tt=1,je=(we=Je).D,et=0<we.L&&we.M>=we.zb&&we.M<=we.Va,we.Aa==0)e:{if(je.M=we.M,je.uc=et,Ug(we,je),tt=1,je=(Bn=we.D).Nb,et=(Yn=Cg[we.L])*we.R,Pt=Yn/2*we.B,vr=16*je*we.R,Wi=8*je*we.B,Ft=we.sa,fn=we.ta-et+vr,Lt=we.qa,nt=we.ra-Pt+Wi,gr=we.Ha,cr=we.Ia-Pt+Wi,lo=(fr=Bn.M)==0,ir=fr>=we.Va-1,we.Aa==2&&Ug(we,Bn),Bn.uc)for(so=(gi=we).D.M,t(gi.D.uc),Bn=gi.yb;Bn<gi.Hb;++Bn){$r=Bn,Zo=so;var qr=(Vi=(mr=gi).D).Nb;Wr=mr.R;var Vi=Vi.wa[Vi.Y+$r],ji=mr.sa,Fo=mr.ta+16*qr*Wr+16*$r,ya=Vi.dd,ei=Vi.tc;if(ei!=0)if(t(3<=ei),mr.L==1)0<$r&&Xl(ji,Fo,Wr,ei+4),Vi.La&&_i(ji,Fo,Wr,ei),0<Zo&&Nl(ji,Fo,Wr,ei+4),Vi.La&&ys(ji,Fo,Wr,ei);else{var hi=mr.B,ra=mr.qa,Gs=mr.ra+8*qr*hi+8*$r,Hl=mr.Ha,mr=mr.Ia+8*qr*hi+8*$r;qr=Vi.ld,0<$r&&(mu(ji,Fo,Wr,ei+4,ya,qr),ag(ra,Gs,Hl,mr,hi,ei+4,ya,qr)),Vi.La&&(na(ji,Fo,Wr,ei,ya,qr),ol(ra,Gs,Hl,mr,hi,ei,ya,qr)),0<Zo&&(ig(ji,Fo,Wr,ei+4,ya,qr),og(ra,Gs,Hl,mr,hi,ei+4,ya,qr)),Vi.La&&(lg(ji,Fo,Wr,ei,ya,qr),kl(ra,Gs,Hl,mr,hi,ei,ya,qr))}}if(we.ia&&alert("todo:DitherRow"),We.put!=null){if(Bn=16*fr,fr=16*(fr+1),lo?(We.y=we.sa,We.O=we.ta+vr,We.f=we.qa,We.N=we.ra+Wi,We.ea=we.Ha,We.W=we.Ia+Wi):(Bn-=Yn,We.y=Ft,We.O=fn,We.f=Lt,We.N=nt,We.ea=gr,We.W=cr),ir||(fr-=Yn),fr>We.o&&(fr=We.o),We.F=null,We.J=null,we.Fa!=null&&0<we.Fa.length&&Bn<fr&&(We.J=Iu(we,We,Bn,fr-Bn),We.F=we.mb,We.F==null&&We.F.length==0)){tt=Fn(we,3,"Could not decode alpha data.");break e}Bn<We.j&&(Yn=We.j-Bn,Bn=We.j,t(!(1&Yn)),We.O+=we.R*Yn,We.N+=we.B*(Yn>>1),We.W+=we.B*(Yn>>1),We.F!=null&&(We.J+=We.width*Yn)),Bn<fr&&(We.O+=We.v,We.N+=We.v>>1,We.W+=We.v>>1,We.F!=null&&(We.J+=We.v),We.ka=Bn-We.j,We.U=We.va-We.v,We.T=fr-Bn,tt=We.put(We))}je+1!=we.Ic||ir||(r(we.sa,we.ta-et,Ft,fn+16*we.R,et),r(we.qa,we.ra-Pt,Lt,nt+8*we.B,Pt),r(we.Ha,we.Ia-Pt,gr,cr+8*we.B,Pt))}if(!tt)return Fn(Je,6,"Output aborted.")}return 1}(A,G)),G.bc!=null&&G.bc(G),N&=1}return N?(A.cb=0,N):0}function Gn(A,G,N,T,q){q=A[G+N+32*T]+(q>>3),A[G+N+32*T]=-256&q?0>q?0:255:q}function zt(A,G,N,T,q,re){Gn(A,G,0,N,T+q),Gn(A,G,1,N,T+re),Gn(A,G,2,N,T-re),Gn(A,G,3,N,T-q)}function Nt(A){return(20091*A>>16)+A}function Kn(A,G,N,T){var q,re=0,oe=o(16);for(q=0;4>q;++q){var le=A[G+0]+A[G+8],ge=A[G+0]-A[G+8],de=(35468*A[G+4]>>16)-Nt(A[G+12]),Ze=Nt(A[G+4])+(35468*A[G+12]>>16);oe[re+0]=le+Ze,oe[re+1]=ge+de,oe[re+2]=ge-de,oe[re+3]=le-Ze,re+=4,G++}for(q=re=0;4>q;++q)le=(A=oe[re+0]+4)+oe[re+8],ge=A-oe[re+8],de=(35468*oe[re+4]>>16)-Nt(oe[re+12]),Gn(N,T,0,0,le+(Ze=Nt(oe[re+4])+(35468*oe[re+12]>>16))),Gn(N,T,1,0,ge+de),Gn(N,T,2,0,ge-de),Gn(N,T,3,0,le-Ze),re++,T+=32}function zn(A,G,N,T){var q=A[G+0]+4,re=35468*A[G+4]>>16,oe=Nt(A[G+4]),le=35468*A[G+1]>>16;zt(N,T,0,q+oe,A=Nt(A[G+1]),le),zt(N,T,1,q+re,A,le),zt(N,T,2,q-re,A,le),zt(N,T,3,q-oe,A,le)}function nr(A,G,N,T,q){Kn(A,G,N,T),q&&Kn(A,G+16,N,T+4)}function rr(A,G,N,T){Wl(A,G+0,N,T,1),Wl(A,G+32,N,T+128,1)}function Bi(A,G,N,T){var q;for(A=A[G+0]+4,q=0;4>q;++q)for(G=0;4>G;++G)Gn(N,T,G,q,A)}function Pr(A,G,N,T){A[G+0]&&oo(A,G+0,N,T),A[G+16]&&oo(A,G+16,N,T+4),A[G+32]&&oo(A,G+32,N,T+128),A[G+48]&&oo(A,G+48,N,T+128+4)}function Sn(A,G,N,T){var q,re=o(16);for(q=0;4>q;++q){var oe=A[G+0+q]+A[G+12+q],le=A[G+4+q]+A[G+8+q],ge=A[G+4+q]-A[G+8+q],de=A[G+0+q]-A[G+12+q];re[0+q]=oe+le,re[8+q]=oe-le,re[4+q]=de+ge,re[12+q]=de-ge}for(q=0;4>q;++q)oe=(A=re[0+4*q]+3)+re[3+4*q],le=re[1+4*q]+re[2+4*q],ge=re[1+4*q]-re[2+4*q],de=A-re[3+4*q],N[T+0]=oe+le>>3,N[T+16]=de+ge>>3,N[T+32]=oe-le>>3,N[T+48]=de-ge>>3,T+=64}function jr(A,G,N){var T,q=G-32,re=vo,oe=255-A[q-1];for(T=0;T<N;++T){var le,ge=re,de=oe+A[G-1];for(le=0;le<N;++le)A[G+le]=ge[de+A[q+le]];G+=32}}function di(A,G){jr(A,G,4)}function Fi(A,G){jr(A,G,8)}function Ii(A,G){jr(A,G,16)}function Wo(A,G){var N;for(N=0;16>N;++N)r(A,G+32*N,A,G-32,16)}function Ci(A,G){var N;for(N=16;0<N;--N)i(A,G,A[G-1],16),G+=32}function $o(A,G,N){var T;for(T=0;16>T;++T)i(G,N+32*T,A,16)}function Vo(A,G){var N,T=16;for(N=0;16>N;++N)T+=A[G-1+32*N]+A[G+N-32];$o(T>>5,A,G)}function sr(A,G){var N,T=8;for(N=0;16>N;++N)T+=A[G-1+32*N];$o(T>>4,A,G)}function Ri(A,G){var N,T=8;for(N=0;16>N;++N)T+=A[G+N-32];$o(T>>4,A,G)}function Oi(A,G){$o(128,A,G)}function Cn(A,G,N){return A+2*G+N+2>>2}function xa(A,G){var N,T=G-32;for(T=new Uint8Array([Cn(A[T-1],A[T+0],A[T+1]),Cn(A[T+0],A[T+1],A[T+2]),Cn(A[T+1],A[T+2],A[T+3]),Cn(A[T+2],A[T+3],A[T+4])]),N=0;4>N;++N)r(A,G+32*N,T,0,T.length)}function ko(A,G){var N=A[G-1],T=A[G-1+32],q=A[G-1+64],re=A[G-1+96];ve(A,G+0,16843009*Cn(A[G-1-32],N,T)),ve(A,G+32,16843009*Cn(N,T,q)),ve(A,G+64,16843009*Cn(T,q,re)),ve(A,G+96,16843009*Cn(q,re,re))}function No(A,G){var N,T=4;for(N=0;4>N;++N)T+=A[G+N-32]+A[G-1+32*N];for(T>>=3,N=0;4>N;++N)i(A,G+32*N,T,4)}function _t(A,G){var N=A[G-1+0],T=A[G-1+32],q=A[G-1+64],re=A[G-1-32],oe=A[G+0-32],le=A[G+1-32],ge=A[G+2-32],de=A[G+3-32];A[G+0+96]=Cn(T,q,A[G-1+96]),A[G+1+96]=A[G+0+64]=Cn(N,T,q),A[G+2+96]=A[G+1+64]=A[G+0+32]=Cn(re,N,T),A[G+3+96]=A[G+2+64]=A[G+1+32]=A[G+0+0]=Cn(oe,re,N),A[G+3+64]=A[G+2+32]=A[G+1+0]=Cn(le,oe,re),A[G+3+32]=A[G+2+0]=Cn(ge,le,oe),A[G+3+0]=Cn(de,ge,le)}function an(A,G){var N=A[G+1-32],T=A[G+2-32],q=A[G+3-32],re=A[G+4-32],oe=A[G+5-32],le=A[G+6-32],ge=A[G+7-32];A[G+0+0]=Cn(A[G+0-32],N,T),A[G+1+0]=A[G+0+32]=Cn(N,T,q),A[G+2+0]=A[G+1+32]=A[G+0+64]=Cn(T,q,re),A[G+3+0]=A[G+2+32]=A[G+1+64]=A[G+0+96]=Cn(q,re,oe),A[G+3+32]=A[G+2+64]=A[G+1+96]=Cn(re,oe,le),A[G+3+64]=A[G+2+96]=Cn(oe,le,ge),A[G+3+96]=Cn(le,ge,ge)}function dr(A,G){var N=A[G-1+0],T=A[G-1+32],q=A[G-1+64],re=A[G-1-32],oe=A[G+0-32],le=A[G+1-32],ge=A[G+2-32],de=A[G+3-32];A[G+0+0]=A[G+1+64]=re+oe+1>>1,A[G+1+0]=A[G+2+64]=oe+le+1>>1,A[G+2+0]=A[G+3+64]=le+ge+1>>1,A[G+3+0]=ge+de+1>>1,A[G+0+96]=Cn(q,T,N),A[G+0+64]=Cn(T,N,re),A[G+0+32]=A[G+1+96]=Cn(N,re,oe),A[G+1+32]=A[G+2+96]=Cn(re,oe,le),A[G+2+32]=A[G+3+96]=Cn(oe,le,ge),A[G+3+32]=Cn(le,ge,de)}function Hr(A,G){var N=A[G+0-32],T=A[G+1-32],q=A[G+2-32],re=A[G+3-32],oe=A[G+4-32],le=A[G+5-32],ge=A[G+6-32],de=A[G+7-32];A[G+0+0]=N+T+1>>1,A[G+1+0]=A[G+0+64]=T+q+1>>1,A[G+2+0]=A[G+1+64]=q+re+1>>1,A[G+3+0]=A[G+2+64]=re+oe+1>>1,A[G+0+32]=Cn(N,T,q),A[G+1+32]=A[G+0+96]=Cn(T,q,re),A[G+2+32]=A[G+1+96]=Cn(q,re,oe),A[G+3+32]=A[G+2+96]=Cn(re,oe,le),A[G+3+64]=Cn(oe,le,ge),A[G+3+96]=Cn(le,ge,de)}function pr(A,G){var N=A[G-1+0],T=A[G-1+32],q=A[G-1+64],re=A[G-1+96];A[G+0+0]=N+T+1>>1,A[G+2+0]=A[G+0+32]=T+q+1>>1,A[G+2+32]=A[G+0+64]=q+re+1>>1,A[G+1+0]=Cn(N,T,q),A[G+3+0]=A[G+1+32]=Cn(T,q,re),A[G+3+32]=A[G+1+64]=Cn(q,re,re),A[G+3+64]=A[G+2+64]=A[G+0+96]=A[G+1+96]=A[G+2+96]=A[G+3+96]=re}function Zl(A,G){var N=A[G-1+0],T=A[G-1+32],q=A[G-1+64],re=A[G-1+96],oe=A[G-1-32],le=A[G+0-32],ge=A[G+1-32],de=A[G+2-32];A[G+0+0]=A[G+2+32]=N+oe+1>>1,A[G+0+32]=A[G+2+64]=T+N+1>>1,A[G+0+64]=A[G+2+96]=q+T+1>>1,A[G+0+96]=re+q+1>>1,A[G+3+0]=Cn(le,ge,de),A[G+2+0]=Cn(oe,le,ge),A[G+1+0]=A[G+3+32]=Cn(N,oe,le),A[G+1+32]=A[G+3+64]=Cn(T,N,oe),A[G+1+64]=A[G+3+96]=Cn(q,T,N),A[G+1+96]=Cn(re,q,T)}function js(A,G){var N;for(N=0;8>N;++N)r(A,G+32*N,A,G-32,8)}function fa(A,G){var N;for(N=0;8>N;++N)i(A,G,A[G-1],8),G+=32}function no(A,G,N){var T;for(T=0;8>T;++T)i(G,N+32*T,A,8)}function qo(A,G){var N,T=8;for(N=0;8>N;++N)T+=A[G+N-32]+A[G-1+32*N];no(T>>4,A,G)}function Tg(A,G){var N,T=4;for(N=0;8>N;++N)T+=A[G+N-32];no(T>>3,A,G)}function Qs(A,G){var N,T=4;for(N=0;8>N;++N)T+=A[G-1+32*N];no(T>>3,A,G)}function gu(A,G){no(128,A,G)}function Is(A,G,N){var T=A[G-N],q=A[G+0],re=3*(q-T)+ll[1020+A[G-2*N]-A[G+N]],oe=ac[112+(re+4>>3)];A[G-N]=vo[255+T+ac[112+(re+3>>3)]],A[G+0]=vo[255+q-oe]}function $s(A,G,N,T){var q=A[G+0],re=A[G+N];return pa[255+A[G-2*N]-A[G-N]]>T||pa[255+re-q]>T}function zg(A,G,N,T){return 4*pa[255+A[G-N]-A[G+0]]+pa[255+A[G-2*N]-A[G+N]]<=T}function cu(A,G,N,T,q){var re=A[G-3*N],oe=A[G-2*N],le=A[G-N],ge=A[G+0],de=A[G+N],Ze=A[G+2*N],Me=A[G+3*N];return 4*pa[255+le-ge]+pa[255+oe-de]>T?0:pa[255+A[G-4*N]-re]<=q&&pa[255+re-oe]<=q&&pa[255+oe-le]<=q&&pa[255+Me-Ze]<=q&&pa[255+Ze-de]<=q&&pa[255+de-ge]<=q}function Ha(A,G,N,T){var q=2*T+1;for(T=0;16>T;++T)zg(A,G+T,N,q)&&Is(A,G+T,N)}function ma(A,G,N,T){var q=2*T+1;for(T=0;16>T;++T)zg(A,G+T*N,1,q)&&Is(A,G+T*N,1)}function ha(A,G,N,T){var q;for(q=3;0<q;--q)Ha(A,G+=4*N,N,T)}function Cd(A,G,N,T){var q;for(q=3;0<q;--q)ma(A,G+=4,N,T)}function Ya(A,G,N,T,q,re,oe,le){for(re=2*re+1;0<q--;){if(cu(A,G,N,re,oe))if($s(A,G,N,le))Is(A,G,N);else{var ge=A,de=G,Ze=N,Me=ge[de-2*Ze],Te=ge[de-Ze],Je=ge[de+0],gt=ge[de+Ze],je=ge[de+2*Ze],we=27*(tt=ll[1020+3*(Je-Te)+ll[1020+Me-gt]])+63>>7,We=18*tt+63>>7,tt=9*tt+63>>7;ge[de-3*Ze]=vo[255+ge[de-3*Ze]+tt],ge[de-2*Ze]=vo[255+Me+We],ge[de-Ze]=vo[255+Te+we],ge[de+0]=vo[255+Je-we],ge[de+Ze]=vo[255+gt-We],ge[de+2*Ze]=vo[255+je-tt]}G+=T}}function Xo(A,G,N,T,q,re,oe,le){for(re=2*re+1;0<q--;){if(cu(A,G,N,re,oe))if($s(A,G,N,le))Is(A,G,N);else{var ge=A,de=G,Ze=N,Me=ge[de-Ze],Te=ge[de+0],Je=ge[de+Ze],gt=ac[112+((je=3*(Te-Me))+4>>3)],je=ac[112+(je+3>>3)],we=gt+1>>1;ge[de-2*Ze]=vo[255+ge[de-2*Ze]+we],ge[de-Ze]=vo[255+Me+je],ge[de+0]=vo[255+Te-gt],ge[de+Ze]=vo[255+Je-we]}G+=T}}function Dg(A,G,N,T,q,re){Ya(A,G,N,1,16,T,q,re)}function wi(A,G,N,T,q,re){Ya(A,G,1,N,16,T,q,re)}function Cs(A,G,N,T,q,re){var oe;for(oe=3;0<oe;--oe)Xo(A,G+=4*N,N,1,16,T,q,re)}function fs(A,G,N,T,q,re){var oe;for(oe=3;0<oe;--oe)Xo(A,G+=4,1,N,16,T,q,re)}function qs(A,G,N,T,q,re,oe,le){Ya(A,G,q,1,8,re,oe,le),Ya(N,T,q,1,8,re,oe,le)}function uu(A,G,N,T,q,re,oe,le){Ya(A,G,1,q,8,re,oe,le),Ya(N,T,1,q,8,re,oe,le)}function eg(A,G,N,T,q,re,oe,le){Xo(A,G+4*q,q,1,8,re,oe,le),Xo(N,T+4*q,q,1,8,re,oe,le)}function Pg(A,G,N,T,q,re,oe,le){Xo(A,G+4,1,q,8,re,oe,le),Xo(N,T+4,1,q,8,re,oe,le)}function rl(){this.ba=new Xn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new In,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ms(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Og(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function fd(){this.ua=0,this.Wa=new ae,this.vb=new ae,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new L,this.yc=new Y}function fC(){this.xb=this.a=0,this.l=new kr,this.ca=new Xn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new X,this.Pb=0,this.wd=new X,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new fd,this.ab=0,this.gc=a(4,Og),this.Oc=0}function _g(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new kr,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Gl(A,G,N,T,q,re,oe){for(A=A==null?0:A[G+0],G=0;G<oe;++G)q[re+G]=A+N[T+G]&255,A=q[re+G]}function du(A,G,N,T,q,re,oe){var le;if(A==null)Gl(null,null,N,T,q,re,oe);else for(le=0;le<oe;++le)q[re+le]=A[G+le]+N[T+le]&255}function hs(A,G,N,T,q,re,oe){if(A==null)Gl(null,null,N,T,q,re,oe);else{var le,ge=A[G+0],de=ge,Ze=ge;for(le=0;le<oe;++le)de=Ze+(ge=A[G+le])-de,Ze=N[T+le]+(-256&de?0>de?0:255:de)&255,de=ge,q[re+le]=Ze}}function Iu(A,G,N,T){var q=G.width,re=G.o;if(t(A!=null&&G!=null),0>N||0>=T||N+T>re)return null;if(!A.Cc){if(A.ga==null){var oe;if(A.ga=new _g,(oe=A.ga==null)||(oe=G.width*G.o,t(A.Gb.length==0),A.Gb=o(oe),A.Uc=0,A.Gb==null?oe=0:(A.mb=A.Gb,A.nb=A.Uc,A.rc=null,oe=1),oe=!oe),!oe){oe=A.ga;var le=A.Fa,ge=A.P,de=A.qc,Ze=A.mb,Me=A.nb,Te=ge+1,Je=de-1,gt=oe.l;if(t(le!=null&&Ze!=null&&G!=null),ao[0]=null,ao[1]=Gl,ao[2]=du,ao[3]=hs,oe.ca=Ze,oe.tb=Me,oe.c=G.width,oe.i=G.height,t(0<oe.c&&0<oe.i),1>=de)G=0;else if(oe.$a=le[ge+0]>>0&3,oe.Z=le[ge+0]>>2&3,oe.Lc=le[ge+0]>>4&3,ge=le[ge+0]>>6&3,0>oe.$a||1<oe.$a||4<=oe.Z||1<oe.Lc||ge)G=0;else if(gt.put=Rt,gt.ac=Vt,gt.bc=yt,gt.ma=oe,gt.width=G.width,gt.height=G.height,gt.Da=G.Da,gt.v=G.v,gt.va=G.va,gt.j=G.j,gt.o=G.o,oe.$a)e:{t(oe.$a==1),G=En();t:for(;;){if(G==null){G=0;break e}if(t(oe!=null),oe.mc=G,G.c=oe.c,G.i=oe.i,G.l=oe.l,G.l.ma=oe,G.l.width=oe.c,G.l.height=oe.i,G.a=0,P(G.m,le,Te,Je),!Dn(oe.c,oe.i,1,G,null)||(G.ab==1&&G.gc[0].hc==3&&Jn(G.s)?(oe.ic=1,le=G.c*G.i,G.Ta=null,G.Ua=0,G.V=o(le),G.Ba=0,G.V==null?(G.a=1,G=0):G=1):(oe.ic=0,G=ar(G,oe.c)),!G))break t;G=1;break e}oe.mc=null,G=0}else G=Je>=oe.c*oe.i;oe=!G}if(oe)return null;A.ga.Lc!=1?A.Ga=0:T=re-N}t(A.ga!=null),t(N+T<=re);e:{if(G=(le=A.ga).c,re=le.l.o,le.$a==0){if(Te=A.rc,Je=A.Vc,gt=A.Fa,ge=A.P+1+N*G,de=A.mb,Ze=A.nb+N*G,t(ge<=A.P+A.qc),le.Z!=0)for(t(ao[le.Z]!=null),oe=0;oe<T;++oe)ao[le.Z](Te,Je,gt,ge,de,Ze,G),Te=de,Je=Ze,Ze+=G,ge+=G;else for(oe=0;oe<T;++oe)r(de,Ze,gt,ge,G),Te=de,Je=Ze,Ze+=G,ge+=G;A.rc=Te,A.Vc=Je}else{if(t(le.mc!=null),G=N+T,t((oe=le.mc)!=null),t(G<=oe.i),oe.C>=G)G=1;else if(le.ic||Ke(),le.ic){le=oe.V,Te=oe.Ba,Je=oe.c;var je=oe.i,we=(gt=1,ge=oe.$/Je,de=oe.$%Je,Ze=oe.m,Me=oe.s,oe.$),We=Je*je,tt=Je*G,et=Me.wc,nt=we<tt?Bt(Me,de,ge):null;t(we<=We),t(G<=je),t(Jn(Me));t:for(;;){for(;!Ze.h&&we<tt;){if(de&et||(nt=Bt(Me,de,ge)),t(nt!=null),ne(Ze),256>(je=ct(nt.G[0],nt.H[0],Ze)))le[Te+we]=je,++we,++de>=Je&&(de=0,++ge<=G&&!(ge%16)&&yn(oe,ge));else{if(!(280>je)){gt=0;break t}je=sn(je-256,Ze);var Pt,Ft=ct(nt.G[4],nt.H[4],Ze);if(ne(Ze),!(we>=(Ft=ut(Je,Ft=sn(Ft,Ze)))&&We-we>=je)){gt=0;break t}for(Pt=0;Pt<je;++Pt)le[Te+we+Pt]=le[Te+we+Pt-Ft];for(we+=je,de+=je;de>=Je;)de-=Je,++ge<=G&&!(ge%16)&&yn(oe,ge);we<tt&&de&et&&(nt=Bt(Me,de,ge))}t(Ze.h==z(Ze))}yn(oe,ge>G?G:ge);break t}!gt||Ze.h&&we<We?(gt=0,oe.a=Ze.h?5:3):oe.$=we,G=gt}else G=qt(oe,oe.V,oe.Ba,oe.c,oe.i,G,Ln);if(!G){T=0;break e}}N+T>=re&&(A.Cc=1),T=1}if(!T)return null;if(A.Cc&&((T=A.ga)!=null&&(T.mc=null),A.ga=null,0<A.Ga))return alert("todo:WebPDequantizeLevels"),null}return A.nb+N*q}function R(A,G,N,T,q,re){for(;0<q--;){var oe,le=A,ge=G+(N?1:0),de=A,Ze=G+(N?0:3);for(oe=0;oe<T;++oe){var Me=de[Ze+4*oe];Me!=255&&(Me*=32897,le[ge+4*oe+0]=le[ge+4*oe+0]*Me>>23,le[ge+4*oe+1]=le[ge+4*oe+1]*Me>>23,le[ge+4*oe+2]=le[ge+4*oe+2]*Me>>23)}G+=re}}function te(A,G,N,T,q){for(;0<T--;){var re;for(re=0;re<N;++re){var oe=A[G+2*re+0],le=15&(de=A[G+2*re+1]),ge=4369*le,de=(240&de|de>>4)*ge>>16;A[G+2*re+0]=(240&oe|oe>>4)*ge>>16&240|(15&oe|oe<<4)*ge>>16>>4&15,A[G+2*re+1]=240&de|le}G+=q}}function Ce(A,G,N,T,q,re,oe,le){var ge,de,Ze=255;for(de=0;de<q;++de){for(ge=0;ge<T;++ge){var Me=A[G+ge];re[oe+4*ge]=Me,Ze&=Me}G+=N,oe+=le}return Ze!=255}function Se(A,G,N,T,q){var re;for(re=0;re<q;++re)N[T+re]=A[G+re]>>8}function Ke(){Jo=R,Nr=te,br=Ce,ai=Se}function qe(A,G,N){E[A]=function(T,q,re,oe,le,ge,de,Ze,Me,Te,Je,gt,je,we,We,tt,et){var nt,Pt=et-1>>1,Ft=le[ge+0]|de[Ze+0]<<16,fn=Me[Te+0]|Je[gt+0]<<16;t(T!=null);var Lt=3*Ft+fn+131074>>2;for(G(T[q+0],255&Lt,Lt>>16,je,we),re!=null&&(Lt=3*fn+Ft+131074>>2,G(re[oe+0],255&Lt,Lt>>16,We,tt)),nt=1;nt<=Pt;++nt){var gr=le[ge+nt]|de[Ze+nt]<<16,cr=Me[Te+nt]|Je[gt+nt]<<16,ir=Ft+gr+fn+cr+524296,Yn=ir+2*(gr+fn)>>3;Lt=Yn+Ft>>1,Ft=(ir=ir+2*(Ft+cr)>>3)+gr>>1,G(T[q+2*nt-1],255&Lt,Lt>>16,je,we+(2*nt-1)*N),G(T[q+2*nt-0],255&Ft,Ft>>16,je,we+(2*nt-0)*N),re!=null&&(Lt=ir+fn>>1,Ft=Yn+cr>>1,G(re[oe+2*nt-1],255&Lt,Lt>>16,We,tt+(2*nt-1)*N),G(re[oe+2*nt+0],255&Ft,Ft>>16,We,tt+(2*nt+0)*N)),Ft=gr,fn=cr}1&et||(Lt=3*Ft+fn+131074>>2,G(T[q+et-1],255&Lt,Lt>>16,je,we+(et-1)*N),re!=null&&(Lt=3*fn+Ft+131074>>2,G(re[oe+et-1],255&Lt,Lt>>16,We,tt+(et-1)*N)))}}function ft(){Ho[hd]=s0,Ho[vs]=Ss,Ho[Em]=g0,Ho[Au]=cc,Ho[pu]=dg,Ho[Xr]=Zu,Ho[Ad]=pC,Ho[lc]=Ss,Ho[gg]=cc,Ho[bu]=dg,Ho[yu]=Zu}function Dt(A){return A&-16384?0>A?0:255:A>>Zs}function un(A,G){return Dt((19077*A>>8)+(26149*G>>8)-14234)}function xn(A,G,N){return Dt((19077*A>>8)-(6419*G>>8)-(13320*N>>8)+8708)}function Nn(A,G){return Dt((19077*A>>8)+(33050*G>>8)-17685)}function jn(A,G,N,T,q){T[q+0]=un(A,N),T[q+1]=xn(A,G,N),T[q+2]=Nn(A,G)}function Qr(A,G,N,T,q){T[q+0]=Nn(A,G),T[q+1]=xn(A,G,N),T[q+2]=un(A,N)}function ii(A,G,N,T,q){var re=xn(A,G,N);G=re<<3&224|Nn(A,G)>>3,T[q+0]=248&un(A,N)|re>>5,T[q+1]=G}function fi(A,G,N,T,q){var re=240&Nn(A,G)|15;T[q+0]=240&un(A,N)|xn(A,G,N)>>4,T[q+1]=re}function ro(A,G,N,T,q){T[q+0]=255,jn(A,G,N,T,q+1)}function Ki(A,G,N,T,q){Qr(A,G,N,T,q),T[q+3]=255}function Ea(A,G,N,T,q){jn(A,G,N,T,q),T[q+3]=255}function ea(A,G){return 0>A?0:A>G?G:A}function Aa(A,G,N){E[A]=function(T,q,re,oe,le,ge,de,Ze,Me){for(var Te=Ze+(-2&Me)*N;Ze!=Te;)G(T[q+0],re[oe+0],le[ge+0],de,Ze),G(T[q+1],re[oe+0],le[ge+0],de,Ze+N),q+=2,++oe,++ge,Ze+=2*N;1&Me&&G(T[q+0],re[oe+0],le[ge+0],de,Ze)}}function As(A,G,N){return N==0?A==0?G==0?6:5:G==0?4:0:N}function Cu(A,G,N,T,q){switch(A>>>30){case 3:Wl(G,N,T,q,0);break;case 2:Ir(G,N,T,q);break;case 1:oo(G,N,T,q)}}function Ug(A,G){var N,T,q=G.M,re=G.Nb,oe=A.oc,le=A.pc+40,ge=A.oc,de=A.pc+584,Ze=A.oc,Me=A.pc+600;for(N=0;16>N;++N)oe[le+32*N-1]=129;for(N=0;8>N;++N)ge[de+32*N-1]=129,Ze[Me+32*N-1]=129;for(0<q?oe[le-1-32]=ge[de-1-32]=Ze[Me-1-32]=129:(i(oe,le-32-1,127,21),i(ge,de-32-1,127,9),i(Ze,Me-32-1,127,9)),T=0;T<A.za;++T){var Te=G.ya[G.aa+T];if(0<T){for(N=-1;16>N;++N)r(oe,le+32*N-4,oe,le+32*N+12,4);for(N=-1;8>N;++N)r(ge,de+32*N-4,ge,de+32*N+4,4),r(Ze,Me+32*N-4,Ze,Me+32*N+4,4)}var Je=A.Gd,gt=A.Hd+T,je=Te.ad,we=Te.Hc;if(0<q&&(r(oe,le-32,Je[gt].y,0,16),r(ge,de-32,Je[gt].f,0,8),r(Ze,Me-32,Je[gt].ea,0,8)),Te.Za){var We=oe,tt=le-32+16;for(0<q&&(T>=A.za-1?i(We,tt,Je[gt].y[15],4):r(We,tt,Je[gt+1].y,0,4)),N=0;4>N;N++)We[tt+128+N]=We[tt+256+N]=We[tt+384+N]=We[tt+0+N];for(N=0;16>N;++N,we<<=2)We=oe,tt=le+bC[N],ba[Te.Ob[N]](We,tt),Cu(we,je,16*+N,We,tt)}else if(We=As(T,q,Te.Ob[0]),So[We](oe,le),we!=0)for(N=0;16>N;++N,we<<=2)Cu(we,je,16*+N,oe,le+bC[N]);for(N=Te.Gc,We=As(T,q,Te.Dd),xo[We](ge,de),xo[We](Ze,Me),we=je,We=ge,tt=de,255&(Te=N>>0)&&(170&Te?Vl(we,256,We,tt):ta(we,256,We,tt)),Te=Ze,we=Me,255&(N>>=8)&&(170&N?Vl(je,320,Te,we):ta(je,320,Te,we)),q<A.Ub-1&&(r(Je[gt].y,0,oe,le+480,16),r(Je[gt].f,0,ge,de+224,8),r(Je[gt].ea,0,Ze,Me+224,8)),N=8*re*A.B,Je=A.sa,gt=A.ta+16*T+16*re*A.R,je=A.qa,Te=A.ra+8*T+N,we=A.Ha,We=A.Ia+8*T+N,N=0;16>N;++N)r(Je,gt+N*A.R,oe,le+32*N,16);for(N=0;8>N;++N)r(je,Te+N*A.B,ge,de+32*N,8),r(we,We+N*A.B,Ze,Me+32*N,8)}}function tg(A,G,N,T,q,re,oe,le,ge){var de=[0],Ze=[0],Me=0,Te=ge!=null?ge.kd:0,Je=ge??new ms;if(A==null||12>N)return 7;Je.data=A,Je.w=G,Je.ha=N,G=[G],N=[N],Je.gb=[Je.gb];e:{var gt=G,je=N,we=Je.gb;if(t(A!=null),t(je!=null),t(we!=null),we[0]=0,12<=je[0]&&!n(A,gt[0],"RIFF")){if(n(A,gt[0]+8,"WEBP")){we=3;break e}var We=me(A,gt[0]+4);if(12>We||4294967286<We){we=3;break e}if(Te&&We>je[0]-8){we=7;break e}we[0]=We,gt[0]+=12,je[0]-=12}we=0}if(we!=0)return we;for(We=0<Je.gb[0],N=N[0];;){e:{var tt=A;je=G,we=N;var et=de,nt=Ze,Pt=gt=[0];if((Lt=Me=[Me])[0]=0,8>we[0])we=7;else{if(!n(tt,je[0],"VP8X")){if(me(tt,je[0]+4)!=10){we=3;break e}if(18>we[0]){we=7;break e}var Ft=me(tt,je[0]+8),fn=1+be(tt,je[0]+12);if(2147483648<=fn*(tt=1+be(tt,je[0]+15))){we=3;break e}Pt!=null&&(Pt[0]=Ft),et!=null&&(et[0]=fn),nt!=null&&(nt[0]=tt),je[0]+=18,we[0]-=18,Lt[0]=1}we=0}}if(Me=Me[0],gt=gt[0],we!=0)return we;if(je=!!(2&gt),!We&&Me)return 3;if(re!=null&&(re[0]=!!(16&gt)),oe!=null&&(oe[0]=je),le!=null&&(le[0]=0),oe=de[0],gt=Ze[0],Me&&je&&ge==null){we=0;break}if(4>N){we=7;break}if(We&&Me||!We&&!Me&&!n(A,G[0],"ALPH")){N=[N],Je.na=[Je.na],Je.P=[Je.P],Je.Sa=[Je.Sa];e:{Ft=A,we=G,We=N;var Lt=Je.gb;et=Je.na,nt=Je.P,Pt=Je.Sa,fn=22,t(Ft!=null),t(We!=null),tt=we[0];var gr=We[0];for(t(et!=null),t(Pt!=null),et[0]=null,nt[0]=null,Pt[0]=0;;){if(we[0]=tt,We[0]=gr,8>gr){we=7;break e}var cr=me(Ft,tt+4);if(4294967286<cr){we=3;break e}var ir=8+cr+1&-2;if(fn+=ir,0<Lt&&fn>Lt){we=3;break e}if(!n(Ft,tt,"VP8 ")||!n(Ft,tt,"VP8L")){we=0;break e}if(gr[0]<ir){we=7;break e}n(Ft,tt,"ALPH")||(et[0]=Ft,nt[0]=tt+8,Pt[0]=cr),tt+=ir,gr-=ir}}if(N=N[0],Je.na=Je.na[0],Je.P=Je.P[0],Je.Sa=Je.Sa[0],we!=0)break}N=[N],Je.Ja=[Je.Ja],Je.xa=[Je.xa];e:if(Lt=A,we=G,We=N,et=Je.gb[0],nt=Je.Ja,Pt=Je.xa,Ft=we[0],tt=!n(Lt,Ft,"VP8 "),fn=!n(Lt,Ft,"VP8L"),t(Lt!=null),t(We!=null),t(nt!=null),t(Pt!=null),8>We[0])we=7;else{if(tt||fn){if(Lt=me(Lt,Ft+4),12<=et&&Lt>et-12){we=3;break e}if(Te&&Lt>We[0]-8){we=7;break e}nt[0]=Lt,we[0]+=8,We[0]-=8,Pt[0]=fn}else Pt[0]=5<=We[0]&&Lt[Ft+0]==47&&!(Lt[Ft+4]>>5),nt[0]=We[0];we=0}if(N=N[0],Je.Ja=Je.Ja[0],Je.xa=Je.xa[0],G=G[0],we!=0)break;if(4294967286<Je.Ja)return 3;if(le==null||je||(le[0]=Je.xa?2:1),oe=[oe],gt=[gt],Je.xa){if(5>N){we=7;break}le=oe,Te=gt,je=re,A==null||5>N?A=0:5<=N&&A[G+0]==47&&!(A[G+4]>>5)?(We=[0],Lt=[0],et=[0],P(nt=new X,A,G,N),ht(nt,We,Lt,et)?(le!=null&&(le[0]=We[0]),Te!=null&&(Te[0]=Lt[0]),je!=null&&(je[0]=et[0]),A=1):A=0):A=0}else{if(10>N){we=7;break}le=gt,A==null||10>N||!ri(A,G+3,N-3)?A=0:(Te=A[G+0]|A[G+1]<<8|A[G+2]<<16,je=16383&(A[G+7]<<8|A[G+6]),A=16383&(A[G+9]<<8|A[G+8]),1&Te||3<(Te>>1&7)||!(Te>>4&1)||Te>>5>=Je.Ja||!je||!A?A=0:(oe&&(oe[0]=je),le&&(le[0]=A),A=1))}if(!A||(oe=oe[0],gt=gt[0],Me&&(de[0]!=oe||Ze[0]!=gt)))return 3;ge!=null&&(ge[0]=Je,ge.offset=G-ge.w,t(4294967286>G-ge.w),t(ge.offset==ge.ha-N));break}return we==0||we==7&&Me&&ge==null?(re!=null&&(re[0]|=Je.na!=null&&0<Je.na.length),T!=null&&(T[0]=oe),q!=null&&(q[0]=gt),0):we}function jg(A,G,N){var T=G.width,q=G.height,re=0,oe=0,le=T,ge=q;if(G.Da=A!=null&&0<A.Da,G.Da&&(le=A.cd,ge=A.bd,re=A.v,oe=A.j,11>N||(re&=-2,oe&=-2),0>re||0>oe||0>=le||0>=ge||re+le>T||oe+ge>q))return 0;if(G.v=re,G.j=oe,G.va=re+le,G.o=oe+ge,G.U=le,G.T=ge,G.da=A!=null&&0<A.da,G.da){if(!Ee(le,ge,N=[A.ib],re=[A.hb]))return 0;G.ib=N[0],G.hb=re[0]}return G.ob=A!=null&&A.ob,G.Kb=A==null||!A.Sd,G.da&&(G.ob=G.ib<3*T/4&&G.hb<3*q/4,G.Kb=0),1}function Qg(A){if(A==null)return 2;if(11>A.S){var G=A.f.RGBA;G.fb+=(A.height-1)*G.A,G.A=-G.A}else G=A.f.kb,A=A.height,G.O+=(A-1)*G.fa,G.fa=-G.fa,G.N+=(A-1>>1)*G.Ab,G.Ab=-G.Ab,G.W+=(A-1>>1)*G.Db,G.Db=-G.Db,G.F!=null&&(G.J+=(A-1)*G.lb,G.lb=-G.lb);return 0}function ng(A,G,N,T){if(T==null||0>=A||0>=G)return 2;if(N!=null){if(N.Da){var q=N.cd,re=N.bd,oe=-2&N.v,le=-2&N.j;if(0>oe||0>le||0>=q||0>=re||oe+q>A||le+re>G)return 2;A=q,G=re}if(N.da){if(!Ee(A,G,q=[N.ib],re=[N.hb]))return 2;A=q[0],G=re[0]}}T.width=A,T.height=G;e:{var ge=T.width,de=T.height;if(A=T.S,0>=ge||0>=de||!(A>=hd&&13>A))A=2;else{if(0>=T.Rd&&T.sd==null){oe=re=q=G=0;var Ze=(le=ge*Gu[A])*de;if(11>A||(re=(de+1)/2*(G=(ge+1)/2),A==12&&(oe=(q=ge)*de)),(de=o(Ze+2*re+oe))==null){A=1;break e}T.sd=de,11>A?((ge=T.f.RGBA).eb=de,ge.fb=0,ge.A=le,ge.size=Ze):((ge=T.f.kb).y=de,ge.O=0,ge.fa=le,ge.Fd=Ze,ge.f=de,ge.N=0+Ze,ge.Ab=G,ge.Cd=re,ge.ea=de,ge.W=0+Ze+re,ge.Db=G,ge.Ed=re,A==12&&(ge.F=de,ge.J=0+Ze+2*re),ge.Tc=oe,ge.lb=q)}if(G=1,q=T.S,re=T.width,oe=T.height,q>=hd&&13>q)if(11>q)A=T.f.RGBA,G&=(le=Math.abs(A.A))*(oe-1)+re<=A.size,G&=le>=re*Gu[q],G&=A.eb!=null;else{A=T.f.kb,le=(re+1)/2,Ze=(oe+1)/2,ge=Math.abs(A.fa),de=Math.abs(A.Ab);var Me=Math.abs(A.Db),Te=Math.abs(A.lb),Je=Te*(oe-1)+re;G&=ge*(oe-1)+re<=A.Fd,G&=de*(Ze-1)+le<=A.Cd,G=(G&=Me*(Ze-1)+le<=A.Ed)&ge>=re&de>=le&Me>=le,G&=A.y!=null,G&=A.f!=null,G&=A.ea!=null,q==12&&(G&=Te>=re,G&=Je<=A.Tc,G&=A.F!=null)}else G=0;A=G?0:2}}return A!=0||N!=null&&N.fd&&(A=Qg(T)),A}var oi=64,$g=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],qg=24,ec=32,tc=8,po=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ze("Predictor0","PredictorAdd0"),E.Predictor0=function(){return 4278190080},E.Predictor1=function(A){return A},E.Predictor2=function(A,G,N){return G[N+0]},E.Predictor3=function(A,G,N){return G[N+1]},E.Predictor4=function(A,G,N){return G[N-1]},E.Predictor5=function(A,G,N){return Le(Le(A,G[N+1]),G[N+0])},E.Predictor6=function(A,G,N){return Le(A,G[N-1])},E.Predictor7=function(A,G,N){return Le(A,G[N+0])},E.Predictor8=function(A,G,N){return Le(G[N-1],G[N+0])},E.Predictor9=function(A,G,N){return Le(G[N+0],G[N+1])},E.Predictor10=function(A,G,N){return Le(Le(A,G[N-1]),Le(G[N+0],G[N+1]))},E.Predictor11=function(A,G,N){var T=G[N+0];return 0>=$e(T>>24&255,A>>24&255,(G=G[N-1])>>24&255)+$e(T>>16&255,A>>16&255,G>>16&255)+$e(T>>8&255,A>>8&255,G>>8&255)+$e(255&T,255&A,255&G)?T:A},E.Predictor12=function(A,G,N){var T=G[N+0];return(Ye((A>>24&255)+(T>>24&255)-((G=G[N-1])>>24&255))<<24|Ye((A>>16&255)+(T>>16&255)-(G>>16&255))<<16|Ye((A>>8&255)+(T>>8&255)-(G>>8&255))<<8|Ye((255&A)+(255&T)-(255&G)))>>>0},E.Predictor13=function(A,G,N){var T=G[N-1];return(Pe((A=Le(A,G[N+0]))>>24&255,T>>24&255)<<24|Pe(A>>16&255,T>>16&255)<<16|Pe(A>>8&255,T>>8&255)<<8|Pe(A>>0&255,T>>0&255))>>>0};var rg=E.PredictorAdd0;E.PredictorAdd1=ot,ze("Predictor2","PredictorAdd2"),ze("Predictor3","PredictorAdd3"),ze("Predictor4","PredictorAdd4"),ze("Predictor5","PredictorAdd5"),ze("Predictor6","PredictorAdd6"),ze("Predictor7","PredictorAdd7"),ze("Predictor8","PredictorAdd8"),ze("Predictor9","PredictorAdd9"),ze("Predictor10","PredictorAdd10"),ze("Predictor11","PredictorAdd11"),ze("Predictor12","PredictorAdd12"),ze("Predictor13","PredictorAdd13");var Bl=E.PredictorAdd2;It("ColorIndexInverseTransform","MapARGB","32b",function(A){return A>>8&255},function(A){return A}),It("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(A){return A},function(A){return A>>8&255});var md,bo=E.ColorIndexInverseTransform,nc=E.MapARGB,fu=E.VP8LColorIndexInverseTransformAlpha,rc=E.MapAlpha,il=E.VP8LPredictorsAdd=[];il.length=16,(E.VP8LPredictors=[]).length=16,(E.VP8LPredictorsAdd_C=[]).length=16,(E.VP8LPredictors_C=[]).length=16;var ps,yo,io,bs,Rl,wl,ic,Wl,Ir,Vl,oo,ta,ig,mu,og,ag,lg,na,kl,ol,Nl,Xl,ys,_i,Jo,Nr,br,ai,mi=o(511),al=o(2041),oc=o(225),sg=o(767),hu=0,ll=al,ac=oc,vo=sg,pa=mi,hd=0,vs=1,Em=2,Au=3,pu=4,Xr=5,Ad=6,lc=7,gg=8,bu=9,yu=10,vu=[2,3,7],pd=[3,3,11],cg=[280,256,256,256,40],Fm=[0,1,1,1,0],i0=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],o0=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Km=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],bd=8,sc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Su=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ug=null,mC=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],hC=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Lm=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Mm=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],a0=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],l0=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],AC=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],So=[],ba=[],xo=[],sl=1,gc=2,ao=[],Ho=[];qe("UpsampleRgbLinePair",jn,3),qe("UpsampleBgrLinePair",Qr,3),qe("UpsampleRgbaLinePair",Ea,4),qe("UpsampleBgraLinePair",Ki,4),qe("UpsampleArgbLinePair",ro,4),qe("UpsampleRgba4444LinePair",fi,2),qe("UpsampleRgb565LinePair",ii,2);var s0=E.UpsampleRgbLinePair,g0=E.UpsampleBgrLinePair,Ss=E.UpsampleRgbaLinePair,cc=E.UpsampleBgraLinePair,dg=E.UpsampleArgbLinePair,Zu=E.UpsampleRgba4444LinePair,pC=E.UpsampleRgb565LinePair,Jl=16,Fa=1<<Jl-1,yr=-227,wr=482,Zs=6,Ui=0,Yo=o(256),Ig=o(256),uc=o(256),Eo=o(256),yd=o(wr-yr),Tm=o(wr-yr);Aa("YuvToRgbRow",jn,3),Aa("YuvToBgrRow",Qr,3),Aa("YuvToRgbaRow",Ea,4),Aa("YuvToBgraRow",Ki,4),Aa("YuvToArgbRow",ro,4),Aa("YuvToRgba4444Row",fi,2),Aa("YuvToRgb565Row",ii,2);var bC=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Cg=[0,2,8],zm=[8,7,6,4,4,2,2,2,1,1,1,1],xl=1;this.WebPDecodeRGBA=function(A,G,N,T,q){var re=vs,oe=new rl,le=new Xn;oe.ba=le,le.S=re,le.width=[le.width],le.height=[le.height];var ge=le.width,de=le.height,Ze=new Mn;if(Ze==null||A==null)var Me=2;else t(Ze!=null),Me=tg(A,G,N,Ze.width,Ze.height,Ze.Pd,Ze.Qd,Ze.format,null);if(Me!=0?ge=0:(ge!=null&&(ge[0]=Ze.width[0]),de!=null&&(de[0]=Ze.height[0]),ge=1),ge){le.width=le.width[0],le.height=le.height[0],T!=null&&(T[0]=le.width),q!=null&&(q[0]=le.height);e:{if(T=new kr,(q=new ms).data=A,q.w=G,q.ha=N,q.kd=1,G=[0],t(q!=null),((A=tg(q.data,q.w,q.ha,null,null,null,G,null,q))==0||A==7)&&G[0]&&(A=4),(G=A)==0){if(t(oe!=null),T.data=q.data,T.w=q.w+q.offset,T.ha=q.ha-q.offset,T.put=Rt,T.ac=Vt,T.bc=yt,T.ma=oe,q.xa){if((A=En())==null){oe=1;break e}if(function(Te,Je){var gt=[0],je=[0],we=[0];t:for(;;){if(Te==null)return 0;if(Je==null)return Te.a=2,0;if(Te.l=Je,Te.a=0,P(Te.m,Je.data,Je.w,Je.ha),!ht(Te.m,gt,je,we)){Te.a=3;break t}if(Te.xb=gc,Je.width=gt[0],Je.height=je[0],!Dn(gt[0],je[0],1,Te,null))break t;return 1}return t(Te.a!=0),0}(A,T)){if(T=(G=ng(T.width,T.height,oe.Oa,oe.ba))==0){t:{T=A;n:for(;;){if(T==null){T=0;break t}if(t(T.s.yc!=null),t(T.s.Ya!=null),t(0<T.s.Wb),t((N=T.l)!=null),t((q=N.ma)!=null),T.xb!=0){if(T.ca=q.ba,T.tb=q.tb,t(T.ca!=null),!jg(q.Oa,N,Au)){T.a=2;break n}if(!ar(T,N.width)||N.da)break n;if((N.da||Et(T.ca.S))&&Ke(),11>T.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),T.ca.f.kb.F!=null&&Ke()),T.Pb&&0<T.s.ua&&T.s.vb.X==null&&!Ne(T.s.vb,T.s.Wa.Xa)){T.a=1;break n}T.xb=0}if(!qt(T,T.V,T.Ba,T.c,T.i,N.o,Tt))break n;q.Dc=T.Ma,T=1;break t}t(T.a!=0),T=0}T=!T}T&&(G=A.a)}else G=A.a}else{if((A=new Ar)==null){oe=1;break e}if(A.Fa=q.na,A.P=q.P,A.qc=q.Sa,Ao(A,T)){if((G=ng(T.width,T.height,oe.Oa,oe.ba))==0){if(A.Aa=0,N=oe.Oa,t((q=A)!=null),N!=null){if(0<(ge=0>(ge=N.Md)?0:100<ge?255:255*ge/100)){for(de=Ze=0;4>de;++de)12>(Me=q.pb[de]).lc&&(Me.ia=ge*zm[0>Me.lc?0:Me.lc]>>3),Ze|=Me.ia;Ze&&(alert("todo:VP8InitRandom"),q.ia=1)}q.Ga=N.Id,100<q.Ga?q.Ga=100:0>q.Ga&&(q.Ga=0)}to(A,T)||(G=A.a)}}else G=A.a}G==0&&oe.Oa!=null&&oe.Oa.fd&&(G=Qg(oe.ba))}oe=G}re=oe!=0?null:11>re?le.f.RGBA.eb:le.f.kb.y}else re=null;return re};var Gu=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(E,F){for(var w="",V=0;V<4;V++)w+=String.fromCharCode(E[F++]);return w}function d(E,F){return(E[F+0]<<0|E[F+1]<<8|E[F+2]<<16)>>>0}function C(E,F){return(E[F+0]<<0|E[F+1]<<8|E[F+2]<<16|E[F+3]<<24)>>>0}new g;var f=[0],m=[0],b=[],p=new g,y=e,S=function(E,F){var w={},V=0,Y=!1,M=0,L=0;if(w.frames=[],!function(D,z,Q,ne){for(var ce=0;ce<ne;ce++)if(D[z+ce]!=Q.charCodeAt(ce))return!0;return!1}(E,F,"RIFF",4)){var $,U;for(C(E,F+=4),F+=8;F<E.length;){var _=u(E,F),P=C(E,F+=4);F+=4;var ee=P+(1&P);switch(_){case"VP8 ":case"VP8L":w.frames[V]===void 0&&(w.frames[V]={}),(X=w.frames[V]).src_off=Y?L:F-8,X.src_size=M+P+8,V++,Y&&(Y=!1,M=0,L=0);break;case"VP8X":(X=w.header={}).feature_flags=E[F];var j=F+4;X.canvas_width=1+d(E,j),j+=3,X.canvas_height=1+d(E,j),j+=3;break;case"ALPH":Y=!0,M=ee+8,L=F-8;break;case"ANIM":(X=w.header).bgcolor=C(E,F),j=F+4,X.loop_count=($=E)[(U=j)+0]<<0|$[U+1]<<8,j+=2;break;case"ANMF":var O,X;(X=w.frames[V]={}).offset_x=2*d(E,F),F+=3,X.offset_y=2*d(E,F),F+=3,X.width=1+d(E,F),F+=3,X.height=1+d(E,F),F+=3,X.duration=d(E,F),F+=3,O=E[F++],X.dispose=1&O,X.blend=O>>1&1}_!="ANMF"&&(F+=ee)}return w}}(y,0);S.response=y,S.rgbaoutput=!0,S.dataurl=!1;var v=S.header?S.header:null,B=S.frames?S.frames:null;if(v){v.loop_counter=v.loop_count,f=[v.canvas_height],m=[v.canvas_width];for(var W=0;W<B.length&&B[W].blend!=0;W++);}var J=B[0],H=p.WebPDecodeRGBA(y,J.src_off,J.src_size,m,f);J.rgba=H,J.imgwidth=m[0],J.imgheight=f[0];for(var x=0;x<m[0]*f[0]*4;x++)b[x]=H[x];return this.width=m,this.height=f,this.data=b,this}(function(e){var t=function(){return typeof CS=="function"},n=function(f,m,b,p){var y=4,S=a;switch(p){case e.image_compression.FAST:y=1,S=o;break;case e.image_compression.MEDIUM:y=6,S=l;break;case e.image_compression.SLOW:y=9,S=g}f=r(f,m,b,S);var v=CS(f,{level:y});return e.__addimage__.arrayBufferToBinaryString(v)},r=function(f,m,b,p){for(var y,S,v,B=f.length/m,W=new Uint8Array(f.length+B),J=d(),H=0;H<B;H+=1){if(v=H*m,y=f.subarray(v,v+m),p)W.set(p(y,b,S),v+H);else{for(var x,E=J.length,F=[];x<E;x+=1)F[x]=J[x](y,b,S);var w=C(F.concat());W.set(F[w],v+H)}S=y}return W},i=function(f){var m=Array.apply([],f);return m.unshift(0),m},o=function(f,m){var b,p=[],y=f.length;p[0]=1;for(var S=0;S<y;S+=1)b=f[S-m]||0,p[S+1]=f[S]-b+256&255;return p},a=function(f,m,b){var p,y=[],S=f.length;y[0]=2;for(var v=0;v<S;v+=1)p=b&&b[v]||0,y[v+1]=f[v]-p+256&255;return y},l=function(f,m,b){var p,y,S=[],v=f.length;S[0]=3;for(var B=0;B<v;B+=1)p=f[B-m]||0,y=b&&b[B]||0,S[B+1]=f[B]+256-(p+y>>>1)&255;return S},g=function(f,m,b){var p,y,S,v,B=[],W=f.length;B[0]=4;for(var J=0;J<W;J+=1)p=f[J-m]||0,y=b&&b[J]||0,S=b&&b[J-m]||0,v=u(p,y,S),B[J+1]=f[J]-v+256&255;return B},u=function(f,m,b){if(f===m&&m===b)return f;var p=Math.abs(m-b),y=Math.abs(f-b),S=Math.abs(f+m-b-b);return p<=y&&p<=S?f:y<=S?m:b},d=function(){return[i,o,a,l,g]},C=function(f){var m=f.map(function(b){return b.reduce(function(p,y){return p+Math.abs(y)},0)});return m.indexOf(Math.min.apply(null,m))};e.processPNG=function(f,m,b,p){var y,S,v,B,W,J,H,x,E,F,w,V,Y,M,L,$=this.decode.FLATE_DECODE,U="";if(this.__addimage__.isArrayBuffer(f)&&(f=new Uint8Array(f)),this.__addimage__.isArrayBufferView(f)){if(f=(v=new bge(f)).imgData,S=v.bits,y=v.colorSpace,W=v.colors,[4,6].indexOf(v.colorType)!==-1){if(v.bits===8){E=(x=v.pixelBitlength==32?new Uint32Array(v.decodePixels().buffer):v.pixelBitlength==16?new Uint16Array(v.decodePixels().buffer):new Uint8Array(v.decodePixels().buffer)).length,w=new Uint8Array(E*v.colors),F=new Uint8Array(E);var _,P=v.pixelBitlength-v.bits;for(M=0,L=0;M<E;M++){for(Y=x[M],_=0;_<P;)w[L++]=Y>>>_&255,_+=v.bits;F[M]=Y>>>_&255}}if(v.bits===16){E=(x=new Uint32Array(v.decodePixels().buffer)).length,w=new Uint8Array(E*(32/v.pixelBitlength)*v.colors),F=new Uint8Array(E*(32/v.pixelBitlength)),V=v.colors>1,M=0,L=0;for(var ee=0;M<E;)Y=x[M++],w[L++]=Y>>>0&255,V&&(w[L++]=Y>>>16&255,Y=x[M++],w[L++]=Y>>>0&255),F[ee++]=Y>>>16&255;S=8}p!==e.image_compression.NONE&&t()?(f=n(w,v.width*v.colors,v.colors,p),H=n(F,v.width,1,p)):(f=w,H=F,$=void 0)}if(v.colorType===3&&(y=this.color_spaces.INDEXED,J=v.palette,v.transparency.indexed)){var j=v.transparency.indexed,O=0;for(M=0,E=j.length;M<E;++M)O+=j[M];if((O/=255)===E-1&&j.indexOf(0)!==-1)B=[j.indexOf(0)];else if(O!==E){for(x=v.decodePixels(),F=new Uint8Array(x.length),M=0,E=x.length;M<E;M++)F[M]=j[x[M]];H=n(F,v.width,1)}}var X=function(D){var z;switch(D){case e.image_compression.FAST:z=11;break;case e.image_compression.MEDIUM:z=13;break;case e.image_compression.SLOW:z=14;break;default:z=12}return z}(p);return $===this.decode.FLATE_DECODE&&(U="/Predictor "+X+" "),U+="/Colors "+W+" /BitsPerComponent "+S+" /Columns "+v.width,(this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),(H&&this.__addimage__.isArrayBuffer(H)||this.__addimage__.isArrayBufferView(H))&&(H=this.__addimage__.arrayBufferToBinaryString(H)),{alias:b,data:f,index:m,filter:$,decodeParameters:U,transparency:B,palette:J,sMask:H,predictor:X,width:v.width,height:v.height,bitsPerComponent:S,colorSpace:y}}}})(vn.API),function(e){e.processGIF89A=function(t,n,r,i){var o=new yge(t),a=o.width,l=o.height,g=[];o.decodeAndBlitFrameRGBA(0,g);var u={data:g,width:a,height:l},d=new pv(100).encode(u,100);return e.processJPEG.call(this,d,n,r,i)},e.processGIF87A=e.processGIF89A}(vn.API),Pl.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:r,blue:n,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Pl.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){zr.log("bit decode error:"+n)}},Pl.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var o=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*i*4,l=0;l<8&&8*i+l<this.width;l++){var g=this.palette[o>>7-l&1];this.data[a+4*l]=g.blue,this.data[a+4*l+1]=g.green,this.data[a+4*l+2]=g.red,this.data[a+4*l+3]=255}n!==0&&(this.pos+=4-n)}},Pl.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++){var o=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*i*4,l=o>>4,g=15&o,u=this.palette[l];if(this.data[a]=u.blue,this.data[a+1]=u.green,this.data[a+2]=u.red,this.data[a+3]=255,2*i+1>=this.width)break;u=this.palette[g],this.data[a+4]=u.blue,this.data[a+4+1]=u.green,this.data[a+4+2]=u.red,this.data[a+4+3]=255}t!==0&&(this.pos+=4-t)}},Pl.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*r;if(i<this.palette.length){var a=this.palette[i];this.data[o]=a.red,this.data[o+1]=a.green,this.data[o+2]=a.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}e!==0&&(this.pos+=4-e)}},Pl.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&t)/t*255|0,l=(o>>5&t)/t*255|0,g=(o>>10&t)/t*255|0,u=o>>15?255:0,d=r*this.width*4+4*i;this.data[d]=g,this.data[d+1]=l,this.data[d+2]=a,this.data[d+3]=u}this.pos+=e}},Pl.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(a&t)/t*255|0,g=(a>>5&n)/n*255|0,u=(a>>11)/t*255|0,d=i*this.width*4+4*o;this.data[d]=u,this.data[d+1]=g,this.data[d+2]=l,this.data[d+3]=255}this.pos+=e}},Pl.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*n;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},Pl.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*n;this.data[l]=o,this.data[l+1]=i,this.data[l+2]=r,this.data[l+3]=a}},Pl.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,i){var o=new Pl(t,!1),a=o.width,l=o.height,g={data:o.getData(),width:a,height:l},u=new pv(100).encode(g,100);return e.processJPEG.call(this,u,n,r,i)}}(vn.API),jW.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,i){var o=new jW(t),a=o.width,l=o.height,g={data:o.getData(),width:a,height:l},u=new pv(100).encode(g,100);return e.processJPEG.call(this,u,n,r,i)}}(vn.API),vn.API.processRGBA=function(e,t,n){for(var r=e.data,i=r.length,o=new Uint8Array(i/4*3),a=new Uint8Array(i/4),l=0,g=0,u=0;u<i;u+=4){var d=r[u],C=r[u+1],f=r[u+2],m=r[u+3];o[l++]=d,o[l++]=C,o[l++]=f,a[g++]=m}var b=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:b,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},vn.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},tI=vn.API,Mh=tI.getCharWidthsArray=function(e,t){var n,r,i=(t=t||{}).font||this.internal.getFont(),o=t.fontSize||this.internal.getFontSize(),a=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:i.metadata.Unicode.widths,g=l.fof?l.fof:1,u=t.kerning?t.kerning:i.metadata.Unicode.kerning,d=u.fof?u.fof:1,C=t.doKerning!==!1,f=0,m=e.length,b=0,p=l[0]||g,y=[];for(n=0;n<m;n++)r=e.charCodeAt(n),typeof i.metadata.widthOfString=="function"?y.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+a*(1e3/o)||0)/1e3):(f=C&&wt(u[r])==="object"&&!isNaN(parseInt(u[r][b],10))?u[r][b]/d:0,y.push((l[r]||p)/g+f)),b=r;return y},PW=tI.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return tI.processArabic&&(e=tI.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,n,i)/n:Mh.apply(this,arguments).reduce(function(o,a){return o+a},0)},OW=function(e,t,n,r){for(var i=[],o=0,a=e.length,l=0;o!==a&&l+t[o]<n;)l+=t[o],o++;i.push(e.slice(0,o));var g=o;for(l=0;o!==a;)l+t[o]>r&&(i.push(e.slice(g,o)),l=0,g=o),l+=t[o],o++;return g!==o&&i.push(e.slice(g,o)),i},_W=function(e,t,n){n||(n={});var r,i,o,a,l,g,u,d=[],C=[d],f=n.textIndent||0,m=0,b=0,p=e.split(" "),y=Mh.apply(this,[" ",n])[0];if(g=n.lineIndent===-1?p[0].length+2:n.lineIndent||0){var S=Array(g).join(" "),v=[];p.map(function(W){(W=W.split(/\s*\n/)).length>1?v=v.concat(W.map(function(J,H){return(H&&J.length?`
`:"")+J})):v.push(W[0])}),p=v,g=PW.apply(this,[S,n])}for(o=0,a=p.length;o<a;o++){var B=0;if(r=p[o],g&&r[0]==`
`&&(r=r.substr(1),B=1),f+m+(b=(i=Mh.apply(this,[r,n])).reduce(function(W,J){return W+J},0))>t||B){if(b>t){for(l=OW.apply(this,[r,i,t-(f+m),t]),d.push(l.shift()),d=[l.pop()];l.length;)C.push([l.shift()]);b=i.slice(r.length-(d[0]?d[0].length:0)).reduce(function(W,J){return W+J},0)}else d=[r];C.push(d),f=b+g,m=y}else d.push(r),f+=m+b,m=y}return u=g?function(W,J){return(J?S:"")+W.join(" ")}:function(W){return W.join(" ")},C.map(u)},tI.splitTextToSize=function(e,t,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),o=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var C=this.internal.getFont(d.fontName,d.fontStyle);return C.metadata.Unicode?{widths:C.metadata.Unicode.widths||{0:1},kerning:C.metadata.Unicode.kerning||{}}:{font:C.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var a=1*this.internal.scaleFactor*t/i;o.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=n.lineIndent;var l,g,u=[];for(l=0,g=r.length;l<g;l++)u=u.concat(_W.apply(this,[r[l],a,o]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},r={},i=0;i<t.length;i++)n[t[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=t[i];var o=function(C){return"0x"+parseInt(C,10).toString(16)},a=e.__fontmetrics__.compress=function(C){var f,m,b,p,y=["{"];for(var S in C){if(f=C[S],isNaN(parseInt(S,10))?m="'"+S+"'":(S=parseInt(S,10),m=(m=o(S).slice(2)).slice(0,-1)+r[m.slice(-1)]),typeof f=="number")f<0?(b=o(f).slice(3),p="-"):(b=o(f).slice(2),p=""),b=p+b.slice(0,-1)+r[b.slice(-1)];else{if(wt(f)!=="object")throw new Error("Don't know what to do with value type "+wt(f)+".");b=a(f)}y.push(m+b)}return y.push("}"),y.join("")},l=e.__fontmetrics__.uncompress=function(C){if(typeof C!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,m,b,p,y={},S=1,v=y,B=[],W="",J="",H=C.length-1,x=1;x<H;x+=1)(p=C[x])=="'"?f?(b=f.join(""),f=void 0):f=[]:f?f.push(p):p=="{"?(B.push([v,b]),v={},b=void 0):p=="}"?((m=B.pop())[0][m[1]]=v,b=void 0,v=m[0]):p=="-"?S=-1:b===void 0?n.hasOwnProperty(p)?(W+=n[p],b=parseInt(W,16)*S,S=1,W=""):W+=p:n.hasOwnProperty(p)?(J+=n[p],v[b]=parseInt(J,16)*S,S=1,b=void 0,J=""):J+=p;return y},g={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:g,"Courier-Bold":g,"Courier-BoldOblique":g,"Courier-Oblique":g,Helvetica:g,"Helvetica-Bold":g,"Helvetica-BoldOblique":g,"Helvetica-Oblique":g,"Times-Roman":g,"Times-Bold":g,"Times-BoldItalic":g,"Times-Italic":g}},d={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(C){var f=C.font,m=d.Unicode[f.postScriptName];m&&(f.metadata.Unicode={},f.metadata.Unicode.widths=m.widths,f.metadata.Unicode.kerning=m.kerning);var b=u.Unicode[f.postScriptName];b&&(f.metadata.Unicode.encoding=b,f.encoding=b.codePages[0])}])}(vn.API),function(e){var t=function(n){for(var r=n.length,i=new Uint8Array(r),o=0;o<r;o++)i[o]=n.charCodeAt(o);return i};e.API.events.push(["addFont",function(n){var r=void 0,i=n.font,o=n.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(Zf(l)),a.metadata=e.API.TTFFont.open(l),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,r)}}])}(vn),function(e){function t(){return(Zn.canvg?Promise.resolve(Zn.canvg):gS(()=>import("./index.es-DjYB03Dk.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}vn.API.addSvgAsImage=function(n,r,i,o,a,l,g,u){if(isNaN(r)||isNaN(i))throw zr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(o)||isNaN(a))throw zr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=o,d.height=a;var C=d.getContext("2d");C.fillStyle="#fff",C.fillRect(0,0,d.width,d.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return t().then(function(b){return b.fromString(C,n,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(b){return b.render(f)}).then(function(){m.addImage(d.toDataURL("image/jpeg",1),r,i,o,a,g,u)})}}(),vn.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(t,n);return this},vn.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,i,o,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(a),g=[],u=0,d=0,C=0;function f(b,p){var y,S=!1;for(y=0;y<b.length;y+=1)b[y]===p&&(S=!0);return S}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var m=l.length;for(C=0;C<m;C+=1)n[l[C]].value=n[l[C]].defaultValue,n[l[C]].explicitSet=!1}if(wt(e)==="object"){for(i in e)if(o=e[i],f(l,i)&&o!==void 0){if(n[i].type==="boolean"&&typeof o=="boolean")n[i].value=o;else if(n[i].type==="name"&&f(n[i].valueSet,o))n[i].value=o;else if(n[i].type==="integer"&&Number.isInteger(o))n[i].value=o;else if(n[i].type==="array"){for(u=0;u<o.length;u+=1)if(r=!0,o[u].length===1&&typeof o[u][0]=="number")g.push(String(o[u]-1));else if(o[u].length>1){for(d=0;d<o[u].length;d+=1)typeof o[u][d]!="number"&&(r=!1);r===!0&&g.push([o[u][0]-1,o[u][1]-1].join(" "))}n[i].value="["+g.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var b,p=[];for(b in n)n[b].explicitSet===!0&&(n[b].type==="name"?p.push("/"+b+" /"+n[b].value):p.push("/"+b+" "+n[b].value));p.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+p.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(r)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),g=unescape(encodeURIComponent("</x:xmpmeta>")),u=o.length+a.length+l.length+i.length+g.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+o+a+l+g),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(vn.API),function(e){var t=e.API,n=t.pdfEscape16=function(o,a){for(var l,g=a.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],C=0,f=o.length;C<f;++C){if(l=a.metadata.characterToGlyph(o.charCodeAt(C)),a.metadata.glyIdsUsed.push(l),a.metadata.toUnicode[l]=o.charCodeAt(C),g.indexOf(l)==-1&&(g.push(l),g.push([parseInt(a.metadata.widthOfGlyph(l),10)])),l=="0")return d.join("");l=l.toString(16),d.push(u[4-l.length],l)}return d.join("")},r=function(o){var a,l,g,u,d,C,f;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,g=[],C=0,f=(l=Object.keys(o).sort(function(m,b){return m-b})).length;C<f;C++)a=l[C],g.length>=100&&(d+=`
`+g.length+` beginbfchar
`+g.join(`
`)+`
endbfchar`,g=[]),o[a]!==void 0&&o[a]!==null&&typeof o[a].toString=="function"&&(u=("0000"+o[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),g.push("<"+a+"><"+u+">"));return g.length&&(d+=`
`+g.length+` beginbfchar
`+g.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(o){(function(a){var l=a.font,g=a.out,u=a.newObject,d=a.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var C=l.metadata.Unicode.widths,f=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),m="",b=0;b<f.length;b++)m+=String.fromCharCode(f[b]);var p=u();d({data:m,addLength1:!0,objectId:p}),g("endobj");var y=u();d({data:r(l.metadata.toUnicode),addLength1:!0,objectId:y}),g("endobj");var S=u();g("<<"),g("/Type /FontDescriptor"),g("/FontName /"+rI(l.fontName)),g("/FontFile2 "+p+" 0 R"),g("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),g("/Flags "+l.metadata.flags),g("/StemV "+l.metadata.stemV),g("/ItalicAngle "+l.metadata.italicAngle),g("/Ascent "+l.metadata.ascender),g("/Descent "+l.metadata.decender),g("/CapHeight "+l.metadata.capHeight),g(">>"),g("endobj");var v=u();g("<<"),g("/Type /Font"),g("/BaseFont /"+rI(l.fontName)),g("/FontDescriptor "+S+" 0 R"),g("/W "+e.API.PDFObject.convert(C)),g("/CIDToGIDMap /Identity"),g("/DW 1000"),g("/Subtype /CIDFontType2"),g("/CIDSystemInfo"),g("<<"),g("/Supplement 0"),g("/Registry (Adobe)"),g("/Ordering ("+l.encoding+")"),g(">>"),g(">>"),g("endobj"),l.objectNumber=u(),g("<<"),g("/Type /Font"),g("/Subtype /Type0"),g("/ToUnicode "+y+" 0 R"),g("/BaseFont /"+rI(l.fontName)),g("/Encoding /"+l.encoding),g("/DescendantFonts ["+v+" 0 R]"),g(">>"),g("endobj"),l.isAlreadyPutted=!0}})(o)}]),t.events.push(["putFont",function(o){(function(a){var l=a.font,g=a.out,u=a.newObject,d=a.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var C=l.metadata.rawData,f="",m=0;m<C.length;m++)f+=String.fromCharCode(C[m]);var b=u();d({data:f,addLength1:!0,objectId:b}),g("endobj");var p=u();d({data:r(l.metadata.toUnicode),addLength1:!0,objectId:p}),g("endobj");var y=u();g("<<"),g("/Descent "+l.metadata.decender),g("/CapHeight "+l.metadata.capHeight),g("/StemV "+l.metadata.stemV),g("/Type /FontDescriptor"),g("/FontFile2 "+b+" 0 R"),g("/Flags 96"),g("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),g("/FontName /"+rI(l.fontName)),g("/ItalicAngle "+l.metadata.italicAngle),g("/Ascent "+l.metadata.ascender),g(">>"),g("endobj"),l.objectNumber=u();for(var S=0;S<l.metadata.hmtx.widths.length;S++)l.metadata.hmtx.widths[S]=parseInt(l.metadata.hmtx.widths[S]*(1e3/l.metadata.head.unitsPerEm));g("<</Subtype/TrueType/Type/Font/ToUnicode "+p+" 0 R/BaseFont/"+rI(l.fontName)+"/FontDescriptor "+y+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),g("endobj"),l.isAlreadyPutted=!0}})(o)}]);var i=function(o){var a,l=o.text||"",g=o.x,u=o.y,d=o.options||{},C=o.mutex||{},f=C.pdfEscape,m=C.activeFontKey,b=C.fonts,p=m,y="",S=0,v="",B=b[p].encoding;if(b[p].encoding!=="Identity-H")return{text:l,x:g,y:u,options:d,mutex:C};for(v=l,p=m,Array.isArray(l)&&(v=l[0]),S=0;S<v.length;S+=1)b[p].metadata.hasOwnProperty("cmap")&&(a=b[p].metadata.cmap.unicode.codeMap[v[S].charCodeAt(0)]),a||v[S].charCodeAt(0)<256&&b[p].metadata.hasOwnProperty("Unicode")?y+=v[S]:y+="";var W="";return parseInt(p.slice(1))<14||B==="WinAnsiEncoding"?W=f(y,p).split("").map(function(J){return J.charCodeAt(0).toString(16)}).join(""):B==="Identity-H"&&(W=n(y,b[p])),C.isHex=!0,{text:W,x:g,y:u,options:d,mutex:C}};t.events.push(["postProcessText",function(o){var a=o.text||"",l=[],g={text:a,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(a)){var u=0;for(u=0;u<a.length;u+=1)Array.isArray(a[u])&&a[u].length===3?l.push([i(Object.assign({},g,{text:a[u][0]})).text,a[u][1],a[u][2]]):l.push(i(Object.assign({},g,{text:a[u]})).text);o.text=l}else o.text=i(Object.assign({},g,{text:a})).text}])}(vn),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,r){return t.call(this),this.internal.vFS[n]=r,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(vn.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var i,o,a,l,g,u,d,C=t,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},p={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},y=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],S=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),v=!1,B=0;this.__bidiEngine__={};var W=function(V){var Y=V.charCodeAt(),M=Y>>8,L=p[M];return L!==void 0?C[256*L+(255&Y)]:M===252||M===253?"AL":S.test(M)?"L":M===8?"R":"N"},J=function(V){for(var Y,M=0;M<V.length;M++){if((Y=W(V.charAt(M)))==="L")return!1;if(Y==="R")return!0}return!1},H=function(V,Y,M,L){var $,U,_,P,ee=Y[L];switch(ee){case"L":case"R":v=!1;break;case"N":case"AN":break;case"EN":v&&(ee="AN");break;case"AL":v=!0,ee="R";break;case"WS":ee="N";break;case"CS":L<1||L+1>=Y.length||($=M[L-1])!=="EN"&&$!=="AN"||(U=Y[L+1])!=="EN"&&U!=="AN"?ee="N":v&&(U="AN"),ee=U===$?U:"N";break;case"ES":ee=($=L>0?M[L-1]:"B")==="EN"&&L+1<Y.length&&Y[L+1]==="EN"?"EN":"N";break;case"ET":if(L>0&&M[L-1]==="EN"){ee="EN";break}if(v){ee="N";break}for(_=L+1,P=Y.length;_<P&&Y[_]==="ET";)_++;ee=_<P&&Y[_]==="EN"?"EN":"N";break;case"NSM":if(a&&!l){for(P=Y.length,_=L+1;_<P&&Y[_]==="NSM";)_++;if(_<P){var j=V[L],O=j>=1425&&j<=2303||j===64286;if($=Y[_],O&&($==="R"||$==="AL")){ee="R";break}}}ee=L<1||($=Y[L-1])==="B"?"N":M[L-1];break;case"B":v=!1,i=!0,ee=B;break;case"S":o=!0,ee="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":v=!1;break;case"BN":ee="N"}return ee},x=function(V,Y,M){var L=V.split("");return M&&E(L,M,{hiLevel:B}),L.reverse(),Y&&Y.reverse(),L.join("")},E=function(V,Y,M){var L,$,U,_,P,ee=-1,j=V.length,O=0,X=[],D=B?m:f,z=[];for(v=!1,i=!1,o=!1,$=0;$<j;$++)z[$]=W(V[$]);for(U=0;U<j;U++){if(P=O,X[U]=H(V,z,X,U),L=240&(O=D[P][b[X[U]]]),O&=15,Y[U]=_=D[O][5],L>0)if(L===16){for($=ee;$<U;$++)Y[$]=1;ee=-1}else ee=-1;if(D[O][6])ee===-1&&(ee=U);else if(ee>-1){for($=ee;$<U;$++)Y[$]=_;ee=-1}z[U]==="B"&&(Y[U]=0),M.hiLevel|=_}o&&function(Q,ne,ce){for(var se=0;se<ce;se++)if(Q[se]==="S"){ne[se]=B;for(var ue=se-1;ue>=0&&Q[ue]==="WS";ue--)ne[ue]=B}}(z,Y,j)},F=function(V,Y,M,L,$){if(!($.hiLevel<V)){if(V===1&&B===1&&!i)return Y.reverse(),void(M&&M.reverse());for(var U,_,P,ee,j=Y.length,O=0;O<j;){if(L[O]>=V){for(P=O+1;P<j&&L[P]>=V;)P++;for(ee=O,_=P-1;ee<_;ee++,_--)U=Y[ee],Y[ee]=Y[_],Y[_]=U,M&&(U=M[ee],M[ee]=M[_],M[_]=U);O=P}O++}}},w=function(V,Y,M){var L=V.split(""),$={hiLevel:B};return M||(M=[]),E(L,M,$),function(U,_,P){if(P.hiLevel!==0&&d)for(var ee,j=0;j<U.length;j++)_[j]===1&&(ee=y.indexOf(U[j]))>=0&&(U[j]=y[ee+1])}(L,M,$),F(2,L,Y,M,$),F(1,L,Y,M,$),L.join("")};return this.__bidiEngine__.doBidiReorder=function(V,Y,M){if(function($,U){if(U)for(var _=0;_<$.length;_++)U[_]=_;l===void 0&&(l=J($)),u===void 0&&(u=J($))}(V,Y),a||!g||u)if(a&&g&&l^u)B=l?1:0,V=x(V,Y,M);else if(!a&&g&&u)B=l?1:0,V=w(V,Y,M),V=x(V,Y);else if(!a||l||g||u){if(a&&!g&&l^u)V=x(V,Y),l?(B=0,V=w(V,Y,M)):(B=1,V=w(V,Y,M),V=x(V,Y));else if(a&&l&&!g&&u)B=1,V=w(V,Y,M),V=x(V,Y);else if(!a&&!g&&l^u){var L=d;l?(B=1,V=w(V,Y,M),B=0,d=!1,V=w(V,Y,M),d=L):(B=0,V=w(V,Y,M),V=x(V,Y),B=1,d=!1,V=w(V,Y,M),d=L,V=x(V,Y))}}else B=0,V=w(V,Y,M);else B=l?1:0,V=w(V,Y,M);return V},this.__bidiEngine__.setOptions=function(V){V&&(a=V.isInputVisual,g=V.isOutputVisual,l=V.isInputRtl,u=V.isOutputRtl,d=V.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var i=r.text,o=(r.x,r.y,r.options||{}),a=(r.mutex,o.lang,[]);if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,n.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var l=0;for(a=[],l=0;l<i.length;l+=1)Object.prototype.toString.call(i[l])==="[object Array]"?a.push([n.doBidiReorder(i[l][0]),i[l][1],i[l][2]]):a.push([n.doBidiReorder(i[l])]);r.text=a}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(vn),vn.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new eu(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new Hge(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new vge(this.contents),this.head=new Zge(this),this.name=new Wge(this),this.cmap=new nY(this),this.toUnicode={},this.hhea=new Gge(this),this.maxp=new Vge(this),this.hmtx=new kge(this),this.post=new Rge(this),this.os2=new Bge(this),this.loca=new xge(this),this.glyf=new Nge(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,r,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,l,g,u;for(u=[],a=0,l=(g=this.bbox).length;a<l;a++)t=g[a],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,r){var i,o,a,l;for(a=0,o=0,l=(t=""+t).length;0<=l?o<l:o>l;o=0<=l?++o:--o)i=t.charCodeAt(o),a+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return a*(n/1e3)},e.prototype.lineHeight=function(t,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},e}();var ds,eu=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,r;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(t){var n,r,i;for(i=[],n=0,r=t.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(t.charCodeAt(n)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,r,i,o,a,l,g;return t=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),g=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^o)+65536*(255^a)+256*(255^l)+(255^g)+1):72057594037927940*t+281474976710656*n+1099511627776*r+4294967296*i+16777216*o+65536*a+256*l+g},e.prototype.writeLongLong=function(t){var n,r;return n=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,r;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n.push(this.readByte());return n},e.prototype.write=function(t){var n,r,i,o;for(o=[],r=0,i=t.length;r<i;r++)n=t[r],o.push(this.writeByte(n));return o},e}(),vge=function(){var e;function t(n){var r,i,o;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(n){var r,i,o,a,l,g,u,d,C,f,m,b,p;for(p in m=Object.keys(n).length,g=Math.log(2),C=16*Math.floor(Math.log(m)/g),a=Math.floor(C/g),d=16*m-C,(i=new eu).writeInt(this.scalarType),i.writeShort(m),i.writeShort(C),i.writeShort(a),i.writeShort(d),o=16*m,u=i.pos+o,l=null,b=[],n)for(f=n[p],i.writeString(p),i.writeInt(e(f)),i.writeInt(u),i.writeInt(f.length),b=b.concat(f),p==="head"&&(l=u),u+=f.length;u%4;)b.push(0),u++;return i.write(b),r=2981146554-e(i.data),i.pos=l+8,i.writeUInt32(r),i.data},e=function(n){var r,i,o,a;for(n=rY.call(n);n.length%4;)n.push(0);for(o=new eu(n),i=0,r=0,a=n.length;r<a;r=r+=4)i+=o.readUInt32();return 4294967295&i},t}(),Sge={}.hasOwnProperty,Us=function(e,t){for(var n in t)Sge.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};ds=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var Zge=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Us(t,ds),t.prototype.tag="head",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},t.prototype.encode=function(n){var r;return(r=new eu).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},t}(),QW=function(){function e(t,n){var r,i,o,a,l,g,u,d,C,f,m,b,p,y,S,v,B;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),C=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(g=0;g<256;++g)this.codeMap[g]=t.readByte();break;case 4:for(m=t.readUInt16(),f=m/2,t.pos+=6,o=function(){var W,J;for(J=[],g=W=0;0<=f?W<f:W>f;g=0<=f?++W:--W)J.push(t.readUInt16());return J}(),t.pos+=2,p=function(){var W,J;for(J=[],g=W=0;0<=f?W<f:W>f;g=0<=f?++W:--W)J.push(t.readUInt16());return J}(),u=function(){var W,J;for(J=[],g=W=0;0<=f?W<f:W>f;g=0<=f?++W:--W)J.push(t.readUInt16());return J}(),d=function(){var W,J;for(J=[],g=W=0;0<=f?W<f:W>f;g=0<=f?++W:--W)J.push(t.readUInt16());return J}(),i=(this.length-t.pos+this.offset)/2,l=function(){var W,J;for(J=[],g=W=0;0<=i?W<i:W>i;g=0<=i?++W:--W)J.push(t.readUInt16());return J}(),g=S=0,B=o.length;S<B;g=++S)for(y=o[g],r=v=b=p[g];b<=y?v<=y:v>=y;r=b<=y?++v:--v)d[g]===0?a=r+u[g]:(a=l[d[g]/2+(r-b)-(f-g)]||0)!==0&&(a+=u[g]),this.codeMap[r]=65535&a}t.pos=C}return e.encode=function(t,n){var r,i,o,a,l,g,u,d,C,f,m,b,p,y,S,v,B,W,J,H,x,E,F,w,V,Y,M,L,$,U,_,P,ee,j,O,X,D,z,Q,ne,ce,se,ue,ve,Ae,be;switch(L=new eu,a=Object.keys(t).sort(function(me,Ne){return me-Ne}),n){case"macroman":for(p=0,y=function(){var me=[];for(b=0;b<256;++b)me.push(0);return me}(),v={0:0},o={},$=0,ee=a.length;$<ee;$++)v[ue=t[i=a[$]]]==null&&(v[ue]=++p),o[i]={old:t[i],new:v[t[i]]},y[i]=v[t[i]];return L.writeUInt16(1),L.writeUInt16(0),L.writeUInt32(12),L.writeUInt16(0),L.writeUInt16(262),L.writeUInt16(0),L.write(y),{charMap:o,subtable:L.data,maxGlyphID:p+1};case"unicode":for(Y=[],C=[],B=0,v={},r={},S=u=null,U=0,j=a.length;U<j;U++)v[J=t[i=a[U]]]==null&&(v[J]=++B),r[i]={old:J,new:v[J]},l=v[J]-i,S!=null&&l===u||(S&&C.push(S),Y.push(i),u=l),S=i;for(S&&C.push(S),C.push(65535),Y.push(65535),w=2*(F=Y.length),E=2*Math.pow(Math.log(F)/Math.LN2,2),f=Math.log(E/2)/Math.LN2,x=2*F-E,g=[],H=[],m=[],b=_=0,O=Y.length;_<O;b=++_){if(V=Y[b],d=C[b],V===65535){g.push(0),H.push(0);break}if(V-(M=r[V].new)>=32768)for(g.push(0),H.push(2*(m.length+F-b)),i=P=V;V<=d?P<=d:P>=d;i=V<=d?++P:--P)m.push(r[i].new);else g.push(M-V),H.push(0)}for(L.writeUInt16(3),L.writeUInt16(1),L.writeUInt32(12),L.writeUInt16(4),L.writeUInt16(16+8*F+2*m.length),L.writeUInt16(0),L.writeUInt16(w),L.writeUInt16(E),L.writeUInt16(f),L.writeUInt16(x),ce=0,X=C.length;ce<X;ce++)i=C[ce],L.writeUInt16(i);for(L.writeUInt16(0),se=0,D=Y.length;se<D;se++)i=Y[se],L.writeUInt16(i);for(ve=0,z=g.length;ve<z;ve++)l=g[ve],L.writeUInt16(l);for(Ae=0,Q=H.length;Ae<Q;Ae++)W=H[Ae],L.writeUInt16(W);for(be=0,ne=m.length;be<ne;be++)p=m[be],L.writeUInt16(p);return{charMap:r,subtable:L.data,maxGlyphID:B+1}}},e}(),nY=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Us(t,ds),t.prototype.tag="cmap",t.prototype.parse=function(n){var r,i,o;for(n.pos=this.offset,this.version=n.readUInt16(),o=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=o?i<o:i>o;i=0<=o?++i:--i)r=new QW(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(n,r){var i,o;return r==null&&(r="macroman"),i=QW.encode(n,r),(o=new eu).writeUInt16(0),o.writeUInt16(1),i.table=o.data.concat(i.subtable),i},t}(),Gge=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Us(t,ds),t.prototype.tag="hhea",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},t}(),Bge=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Us(t,ds),t.prototype.tag="OS/2",t.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},t}(),Rge=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Us(t,ds),t.prototype.tag="post",t.prototype.parse=function(n){var r,i,o;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var a;for(i=n.readUInt16(),this.glyphNameIndex=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],o=[];n.pos<this.offset+this.length;)r=n.readByte(),o.push(this.names.push(n.readString(r)));return o;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var l,g,u;for(u=[],a=l=0,g=this.file.maxp.numGlyphs;0<=g?l<g:l>g;a=0<=g?++l:--l)u.push(n.readUInt32());return u}).call(this)}},t}(),wge=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},Wge=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Us(t,ds),t.prototype.tag="name",t.prototype.parse=function(n){var r,i,o,a,l,g,u,d,C,f,m;for(n.pos=this.offset,n.readShort(),r=n.readShort(),g=n.readShort(),i=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+g+n.readShort()});for(u={},a=C=0,f=i.length;C<f;a=++C)o=i[a],n.pos=o.offset,d=n.readString(o.length),l=new wge(d,o),u[m=o.nameID]==null&&(u[m]=[]),u[o.nameID].push(l);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t}(),Vge=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Us(t,ds),t.prototype.tag="maxp",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},t}(),kge=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Us(t,ds),t.prototype.tag="hmtx",t.prototype.parse=function(n){var r,i,o,a,l,g,u;for(n.pos=this.offset,this.metrics=[],r=0,g=this.file.hhea.numberOfMetrics;0<=g?r<g:r>g;r=0<=g?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,C;for(C=[],r=d=0;0<=o?d<o:d>o;r=0<=o?++d:--d)C.push(n.readInt16());return C}(),this.widths=(function(){var d,C,f,m;for(m=[],d=0,C=(f=this.metrics).length;d<C;d++)a=f[d],m.push(a.advance);return m}).call(this),i=this.widths[this.widths.length-1],u=[],r=l=0;0<=o?l<o:l>o;r=0<=o?++l:--l)u.push(this.widths.push(i));return u},t.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},t}(),rY=[].slice,Nge=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Us(t,ds),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(n){var r,i,o,a,l,g,u,d,C,f;return n in this.cache?this.cache[n]:(a=this.file.loca,r=this.file.contents,i=a.indexOf(n),(o=a.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,l=(g=new eu(r.read(o))).readShort(),d=g.readShort(),f=g.readShort(),u=g.readShort(),C=g.readShort(),this.cache[n]=l===-1?new Jge(g,d,f,u,C):new Xge(g,l,d,f,u,C),this.cache[n]))},t.prototype.encode=function(n,r,i){var o,a,l,g,u;for(l=[],a=[],g=0,u=r.length;g<u;g++)o=n[r[g]],a.push(l.length),o&&(l=l.concat(o.encode(i)));return a.push(l.length),{table:l,offsets:a}},t}(),Xge=function(){function e(t,n,r,i,o,a){this.raw=t,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=o,this.yMax=a,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),Jge=function(){function e(t,n,r,i,o){var a,l;for(this.raw=t,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;l=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&l;)a.pos+=1&l?4:2,128&l?a.pos+=8:64&l?a.pos+=4:8&l&&(a.pos+=2)}return e.prototype.encode=function(){var t,n,r;for(n=new eu(rY.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),xge=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Us(t,ds),t.prototype.tag="loca",t.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var o,a;for(a=[],i=0,o=this.length;i<o;i+=2)a.push(2*n.readUInt16());return a}).call(this):(function(){var o,a;for(a=[],i=0,o=this.length;i<o;i+=4)a.push(n.readUInt32());return a}).call(this)},t.prototype.indexOf=function(n){return this.offsets[n]},t.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},t.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),o=0,a=0,l=0;l<i.length;++l)if(i[l]=o,a<r.length&&r[a]==l){++a,i[l]=o;var g=this.offsets[l],u=this.offsets[l+1]-g;u>0&&(o+=u)}for(var d=new Array(4*i.length),C=0;C<i.length;++C)d[4*C+3]=255&i[C],d[4*C+2]=(65280&i[C])>>8,d[4*C+1]=(16711680&i[C])>>16,d[4*C]=(4278190080&i[C])>>24;return d},t}(),Hge=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,r,i,o;for(n in i=this.font.cmap.tables[0].codeMap,t={},o=this.subset)r=o[n],t[n]=i[r];return t},e.prototype.glyphsFor=function(t){var n,r,i,o,a,l,g;for(i={},a=0,l=t.length;a<l;a++)i[o=t[a]]=this.font.glyf.glyphFor(o);for(o in n=[],i)(r=i[o])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(o in g=this.glyphsFor(n))r=g[o],i[o]=r;return i},e.prototype.encode=function(t,n){var r,i,o,a,l,g,u,d,C,f,m,b,p,y,S;for(i in r=nY.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(t),m={0:0},S=r.charMap)m[(g=S[i]).old]=g.new;for(b in f=r.maxGlyphID,a)b in m||(m[b]=f++);return d=function(v){var B,W;for(B in W={},v)W[v[B]]=B;return W}(m),C=Object.keys(d).sort(function(v,B){return v-B}),p=function(){var v,B,W;for(W=[],v=0,B=C.length;v<B;v++)l=C[v],W.push(d[l]);return W}(),o=this.font.glyf.encode(a,p,m),u=this.font.loca.encode(o.offsets,p),y={cmap:this.font.cmap.raw(),glyf:o.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(y["OS/2"]=this.font.os2.raw()),this.font.directory.encode(y)},e}();vn.API.PDFObject=function(){var e;function t(){}return e=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},t.convert=function(n){var r,i,o,a;if(Array.isArray(n))return"["+function(){var l,g,u;for(u=[],l=0,g=n.length;l<g;l++)r=n[l],u.push(t.convert(r));return u}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in o=["<<"],n)a=n[i],o.push("/"+i+" "+t.convert(a));return o.push(">>"),o.join(`
`)}return""+n},t}();const{Title:Yge,Text:Wc}=dd,Ege=({devices:e,deviceTypes:t,employees:n})=>{var u,d;const{id:r}=w9(),i=ru(),o=e.find(C=>C.id===r);if(!o)return ye.jsx("div",{className:"flex justify-center items-center h-screen text-xl",children:"Device not found"});const a=((u=t[o.device_type_id])==null?void 0:u.name)||"Unknown Type",l=((d=n[o.employee_id])==null?void 0:d.name)||"Unknown Employee",g=()=>{const C=new vn,f=document.getElementById("qr-code-canvas");if(f){const m=f.toDataURL("image/png");C.addImage(m,"PNG",10,10,180,180)}C.save(`${o.name}_QR_Code.pdf`)};return ye.jsxs("div",{className:"p-4",children:[ye.jsxs("div",{className:"flex items-center gap-4 h-10 mb-4",children:[ye.jsx(da,{type:"text",icon:ye.jsx(ure,{}),onClick:()=>i("/devices")}),ye.jsx("h2",{className:"text-xl font-semibold",children:"Device Details"})]}),ye.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[ye.jsxs(DI,{className:"lg:w-2/3 w-full shadow-md p-4 rounded-lg",children:[ye.jsx(Yge,{level:3,className:"mb-4",children:o.name}),ye.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[ye.jsxs("div",{children:[ye.jsx(Wc,{strong:!0,children:"ID:"})," ",ye.jsx("p",{children:o.id})]}),ye.jsxs("div",{children:[ye.jsx(Wc,{strong:!0,children:"Short ID:"})," ",ye.jsx("p",{children:o.short_id})]}),ye.jsxs("div",{children:[ye.jsx(Wc,{strong:!0,children:"Device Type:"})," ",ye.jsx("p",{children:a})]}),ye.jsxs("div",{children:[ye.jsx(Wc,{strong:!0,children:"Employee:"})," ",ye.jsx("p",{children:l})]}),ye.jsxs("div",{children:[ye.jsx(Wc,{strong:!0,children:"Purchase Date:"})," ",ye.jsx("p",{children:o.purchase_date})]}),ye.jsxs("div",{children:[ye.jsx(Wc,{strong:!0,children:"Status:"})," ",ye.jsx("p",{children:o.status})]}),ye.jsxs("div",{className:"md:col-span-2",children:[ye.jsx(Wc,{strong:!0,children:"Description:"})," ",ye.jsx("p",{children:o.description||"No description available"})]})]})]}),ye.jsxs(DI,{className:"lg:w-1/3 w-full flex flex-col items-center justify-center shadow-lg p-4 rounded-xl",children:[ye.jsx("div",{className:"mb-4 text-center",children:ye.jsx(Wc,{children:"Scan to get device details"})}),ye.jsx(HH,{id:"qr-code-canvas",value:o.id,size:200,imageSettings:{src:"/ridgeant.png",x:void 0,y:void 0,height:40,width:40,excavate:!0}}),ye.jsx("div",{className:"w-full flex justify-center",children:ye.jsx(da,{type:"default",className:"mt-4",onClick:g,icon:ye.jsx(pre,{}),children:"Download QR"})})]})]})]})};var Th={exports:{}},qC={},bv={exports:{}},yv={exports:{}},$W;function n0(){return $W||($W=1,function(e){function t(n){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(yv)),yv.exports}var qW;function r0(){return qW||(qW=1,function(e){var t=n0().default;function n(i){if(typeof WeakMap!="function")return null;var o=new WeakMap,a=new WeakMap;return(n=function(g){return g?a:o})(i)}function r(i,o){if(!o&&i&&i.__esModule)return i;if(i===null||t(i)!="object"&&typeof i!="function")return{default:i};var a=n(o);if(a&&a.has(i))return a.get(i);var l={__proto__:null},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in i)if(u!=="default"&&{}.hasOwnProperty.call(i,u)){var d=g?Object.getOwnPropertyDescriptor(i,u):null;d&&(d.get||d.set)?Object.defineProperty(l,u,d):l[u]=i[u]}return l.default=i,a&&a.set(i,l),l}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(bv)),bv.exports}var vv={exports:{}},eV;function CC(){return eV||(eV=1,function(e){function t(n){return n&&n.__esModule?n:{default:n}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(vv)),vv.exports}var Sv={exports:{}},tV;function iY(){return tV||(tV=1,function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var o in i)({}).hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Sv)),Sv.exports}var zh={},nV;function Fge(){if(nV)return zh;nV=1,Object.defineProperty(zh,"__esModule",{value:!0});var e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"};return zh.default=e,zh}var ef={},Zv={exports:{}},Gv={exports:{}},rV;function Kge(){return rV||(rV=1,function(e){function t(n){if(Array.isArray(n))return n}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Gv)),Gv.exports}var Bv={exports:{}},iV;function Lge(){return iV||(iV=1,function(e){function t(n,r){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var o,a,l,g,u=[],d=!0,C=!1;try{if(l=(i=i.call(n)).next,r===0){if(Object(i)!==i)return;d=!1}else for(;!(d=(o=l.call(i)).done)&&(u.push(o.value),u.length!==r);d=!0);}catch(f){C=!0,a=f}finally{try{if(!d&&i.return!=null&&(g=i.return(),Object(g)!==g))return}finally{if(C)throw a}}return u}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Bv)),Bv.exports}var Rv={exports:{}},wv={exports:{}},oV;function Mge(){return oV||(oV=1,function(e){function t(n,r){(r==null||r>n.length)&&(r=n.length);for(var i=0,o=Array(r);i<r;i++)o[i]=n[i];return o}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(wv)),wv.exports}var aV;function Tge(){return aV||(aV=1,function(e){var t=Mge();function n(r,i){if(r){if(typeof r=="string")return t(r,i);var o={}.toString.call(r).slice(8,-1);return o==="Object"&&r.constructor&&(o=r.constructor.name),o==="Map"||o==="Set"?Array.from(r):o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?t(r,i):void 0}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(Rv)),Rv.exports}var Wv={exports:{}},lV;function zge(){return lV||(lV=1,function(e){function t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Wv)),Wv.exports}var sV;function oY(){return sV||(sV=1,function(e){var t=Kge(),n=Lge(),r=Tge(),i=zge();function o(a,l){return t(a)||n(a,l)||r(a,l)||i()}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports}(Zv)),Zv.exports}var Vv={exports:{}},kv={exports:{}},Nv={exports:{}},gV;function Dge(){return gV||(gV=1,function(e){var t=n0().default;function n(r,i){if(t(r)!="object"||!r)return r;var o=r[Symbol.toPrimitive];if(o!==void 0){var a=o.call(r,i||"default");if(t(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(r)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(Nv)),Nv.exports}var cV;function Pge(){return cV||(cV=1,function(e){var t=n0().default,n=Dge();function r(i){var o=n(i,"string");return t(o)=="symbol"?o:o+""}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(kv)),kv.exports}var uV;function aY(){return uV||(uV=1,function(e){var t=Pge();function n(r,i,o){return(i=t(i))in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o,r}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(Vv)),Vv.exports}var Xv={exports:{}},Jv={exports:{}},dV;function Oge(){return dV||(dV=1,function(e){function t(n,r){if(n==null)return{};var i={};for(var o in n)if({}.hasOwnProperty.call(n,o)){if(r.indexOf(o)!==-1)continue;i[o]=n[o]}return i}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Jv)),Jv.exports}var IV;function lY(){return IV||(IV=1,function(e){var t=Oge();function n(r,i){if(r==null)return{};var o,a,l=t(r,i);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(r);for(a=0;a<g.length;a++)o=g[a],i.indexOf(o)===-1&&{}.propertyIsEnumerable.call(r,o)&&(l[o]=r[o])}return l}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(Xv)),Xv.exports}const sY=zY(HP);var tf={},CV;function gY(){if(CV)return tf;CV=1,Object.defineProperty(tf,"__esModule",{value:!0}),tf.default=void 0;var e=tu(),t=(0,e.createContext)({});return tf.default=t,tf}var nf={},xv={exports:{}},fV;function H1(){return fV||(fV=1,function(e){var t=aY();function n(i,o){var a=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);o&&(l=l.filter(function(g){return Object.getOwnPropertyDescriptor(i,g).enumerable})),a.push.apply(a,l)}return a}function r(i){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?n(Object(a),!0).forEach(function(l){t(i,l,a[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(a,l))})}return i}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(xv)),xv.exports}var ga={},Hu={},Dh={},mV;function _ge(){if(mV)return Dh;mV=1,Object.defineProperty(Dh,"__esModule",{value:!0}),Dh.default=e;function e(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}return Dh}var Ph={},hV;function Uge(){if(hV)return Ph;hV=1,Object.defineProperty(Ph,"__esModule",{value:!0}),Ph.default=e;function e(t,n){if(!t)return!1;if(t.contains)return t.contains(n);for(var r=n;r;){if(r===t)return!0;r=r.parentNode}return!1}return Ph}var AV;function jge(){if(AV)return Hu;AV=1;var e=CC().default;Object.defineProperty(Hu,"__esModule",{value:!0}),Hu.clearContainerCache=y,Hu.injectCSS=f,Hu.removeCSS=b,Hu.updateCSS=S;var t=e(H1()),n=e(_ge()),r=e(Uge()),i="data-rc-order",o="data-rc-priority",a="rc-util-key",l=new Map;function g(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},B=v.mark;return B?B.startsWith("data-")?B:"data-".concat(B):a}function u(v){if(v.attachTo)return v.attachTo;var B=document.querySelector("head");return B||document.body}function d(v){return v==="queue"?"prependQueue":v?"prepend":"append"}function C(v){return Array.from((l.get(v)||v).children).filter(function(B){return B.tagName==="STYLE"})}function f(v){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(0,n.default)())return null;var W=B.csp,J=B.prepend,H=B.priority,x=H===void 0?0:H,E=d(J),F=E==="prependQueue",w=document.createElement("style");w.setAttribute(i,E),F&&x&&w.setAttribute(o,"".concat(x)),W!=null&&W.nonce&&(w.nonce=W==null?void 0:W.nonce),w.innerHTML=v;var V=u(B),Y=V.firstChild;if(J){if(F){var M=(B.styles||C(V)).filter(function(L){if(!["prepend","prependQueue"].includes(L.getAttribute(i)))return!1;var $=Number(L.getAttribute(o)||0);return x>=$});if(M.length)return V.insertBefore(w,M[M.length-1].nextSibling),w}V.insertBefore(w,Y)}else V.appendChild(w);return w}function m(v){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},W=u(B);return(B.styles||C(W)).find(function(J){return J.getAttribute(g(B))===v})}function b(v){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},W=m(v,B);if(W){var J=u(B);J.removeChild(W)}}function p(v,B){var W=l.get(v);if(!W||!(0,r.default)(document,W)){var J=f("",B),H=J.parentNode;l.set(v,H),v.removeChild(J)}}function y(){l.clear()}function S(v,B){var W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},J=u(W),H=C(J),x=(0,t.default)((0,t.default)({},W),{},{styles:H});p(J,x);var E=m(B,x);if(E){var F,w;if((F=x.csp)!==null&&F!==void 0&&F.nonce&&E.nonce!==((w=x.csp)===null||w===void 0?void 0:w.nonce)){var V;E.nonce=(V=x.csp)===null||V===void 0?void 0:V.nonce}return E.innerHTML!==v&&(E.innerHTML=v),E}var Y=f(v,x);return Y.setAttribute(g(x),B),Y}return Hu}var rf={},pV;function Qge(){if(pV)return rf;pV=1,Object.defineProperty(rf,"__esModule",{value:!0}),rf.getShadowRoot=n,rf.inShadow=t;function e(r){var i;return r==null||(i=r.getRootNode)===null||i===void 0?void 0:i.call(r)}function t(r){return e(r)instanceof ShadowRoot}function n(r){return t(r)?e(r):null}return rf}var Oa={},bV;function $ge(){if(bV)return Oa;bV=1,Object.defineProperty(Oa,"__esModule",{value:!0}),Oa.call=o,Oa.default=void 0,Oa.note=r,Oa.noteOnce=l,Oa.preMessage=void 0,Oa.resetWarned=i,Oa.warning=n,Oa.warningOnce=a;var e={},t=Oa.preMessage=function(u){};function n(g,u){}function r(g,u){}function i(){e={}}function o(g,u,d){!u&&!e[d]&&(g(!1,d),e[d]=!0)}function a(g,u){o(n,g,u)}function l(g,u){o(r,g,u)}return a.preMessage=t,a.resetWarned=i,a.noteOnce=l,Oa.default=a,Oa}var yV;function Y1(){if(yV)return ga;yV=1;var e=r0().default,t=CC().default;Object.defineProperty(ga,"__esModule",{value:!0}),ga.generate=b,ga.getSecondaryColor=p,ga.iconStyles=void 0,ga.isIconDefinition=f,ga.normalizeAttrs=m,ga.normalizeTwoToneColors=y,ga.useInsertStyles=ga.svgBaseProps=void 0,ga.warning=C;var n=t(H1()),r=t(n0()),i=sY,o=jge(),a=Qge(),l=t($ge()),g=e(tu()),u=t(gY());function d(v){return v.replace(/-(.)/g,function(B,W){return W.toUpperCase()})}function C(v,B){(0,l.default)(v,"[@ant-design/icons] ".concat(B))}function f(v){return(0,r.default)(v)==="object"&&typeof v.name=="string"&&typeof v.theme=="string"&&((0,r.default)(v.icon)==="object"||typeof v.icon=="function")}function m(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(v).reduce(function(B,W){var J=v[W];switch(W){case"class":B.className=J,delete B.class;break;default:delete B[W],B[d(W)]=J}return B},{})}function b(v,B,W){return W?g.default.createElement(v.tag,(0,n.default)((0,n.default)({key:B},m(v.attrs)),W),(v.children||[]).map(function(J,H){return b(J,"".concat(B,"-").concat(v.tag,"-").concat(H))})):g.default.createElement(v.tag,(0,n.default)({key:B},m(v.attrs)),(v.children||[]).map(function(J,H){return b(J,"".concat(B,"-").concat(v.tag,"-").concat(H))}))}function p(v){return(0,i.generate)(v)[0]}function y(v){return v?Array.isArray(v)?v:[v]:[]}ga.svgBaseProps={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"};var S=ga.iconStyles=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`;return ga.useInsertStyles=function(B){var W=(0,g.useContext)(u.default),J=W.csp,H=W.prefixCls,x=W.layer,E=S;H&&(E=E.replace(/anticon/g,H)),x&&(E="@layer ".concat(x,` {
`).concat(E,`
}`)),(0,g.useEffect)(function(){var F=B.current,w=(0,a.getShadowRoot)(F);(0,o.updateCSS)(E,"@ant-design-icons",{prepend:!0,csp:J,attachTo:w})},[])},ga}var vV;function cY(){if(vV)return nf;vV=1;var e=CC().default,t=r0().default;Object.defineProperty(nf,"__esModule",{value:!0}),nf.default=void 0;var n=e(lY()),r=e(H1()),i=t(tu()),o=Y1(),a=["icon","className","onClick","style","primaryColor","secondaryColor"],l={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function g(C){var f=C.primaryColor,m=C.secondaryColor;l.primaryColor=f,l.secondaryColor=m||(0,o.getSecondaryColor)(f),l.calculated=!!m}function u(){return(0,r.default)({},l)}var d=function(f){var m=f.icon,b=f.className,p=f.onClick,y=f.style,S=f.primaryColor,v=f.secondaryColor,B=(0,n.default)(f,a),W=i.useRef(),J=l;if(S&&(J={primaryColor:S,secondaryColor:v||(0,o.getSecondaryColor)(S)}),(0,o.useInsertStyles)(W),(0,o.warning)((0,o.isIconDefinition)(m),"icon should be icon definiton, but got ".concat(m)),!(0,o.isIconDefinition)(m))return null;var H=m;return H&&typeof H.icon=="function"&&(H=(0,r.default)((0,r.default)({},H),{},{icon:H.icon(J.primaryColor,J.secondaryColor)})),(0,o.generate)(H.icon,"svg-".concat(H.name),(0,r.default)((0,r.default)({className:b,onClick:p,style:y,"data-icon":H.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},B),{},{ref:W}))};return d.displayName="IconReact",d.getTwoToneColors=u,d.setTwoToneColors=g,nf.default=d,nf}var of={},SV;function qge(){if(SV)return of;SV=1;var e=CC().default;Object.defineProperty(of,"__esModule",{value:!0}),of.getTwoToneColor=o,of.setTwoToneColor=i;var t=e(oY()),n=e(cY()),r=Y1();function i(a){var l=(0,r.normalizeTwoToneColors)(a),g=(0,t.default)(l,2),u=g[0],d=g[1];return n.default.setTwoToneColors({primaryColor:u,secondaryColor:d})}function o(){var a=n.default.getTwoToneColors();return a.calculated?[a.primaryColor,a.secondaryColor]:a.primaryColor}return of}var ZV;function ece(){if(ZV)return ef;ZV=1;var e=CC().default,t=r0().default;Object.defineProperty(ef,"__esModule",{value:!0}),ef.default=void 0;var n=e(iY()),r=e(oY()),i=e(aY()),o=e(lY()),a=t(tu()),l=e(iX()),g=sY,u=e(gY()),d=e(cY()),C=qge(),f=Y1(),m=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];(0,C.setTwoToneColor)(g.blue.primary);var b=a.forwardRef(function(p,y){var S=p.className,v=p.icon,B=p.spin,W=p.rotate,J=p.tabIndex,H=p.onClick,x=p.twoToneColor,E=(0,o.default)(p,m),F=a.useContext(u.default),w=F.prefixCls,V=w===void 0?"anticon":w,Y=F.rootClassName,M=(0,l.default)(Y,V,(0,i.default)((0,i.default)({},"".concat(V,"-").concat(v.name),!!v.name),"".concat(V,"-spin"),!!B||v.name==="loading"),S),L=J;L===void 0&&H&&(L=-1);var $=W?{msTransform:"rotate(".concat(W,"deg)"),transform:"rotate(".concat(W,"deg)")}:void 0,U=(0,f.normalizeTwoToneColors)(x),_=(0,r.default)(U,2),P=_[0],ee=_[1];return a.createElement("span",(0,n.default)({role:"img","aria-label":v.name},E,{ref:y,tabIndex:L,onClick:H,className:M}),a.createElement(d.default,{icon:v,primaryColor:P,secondaryColor:ee,style:$}))});return b.displayName="AntdIcon",b.getTwoToneColor=C.getTwoToneColor,b.setTwoToneColor=C.setTwoToneColor,ef.default=b,ef}var GV;function tce(){if(GV)return qC;GV=1;var e=r0().default,t=CC().default;Object.defineProperty(qC,"__esModule",{value:!0}),qC.default=void 0;var n=t(iY()),r=e(tu()),i=t(Fge()),o=t(ece()),a=function(u,d){return r.createElement(o.default,(0,n.default)({},u,{ref:d,icon:i.default}))},l=r.forwardRef(a);return qC.default=l,qC}var BV;function nce(){return BV||(BV=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;const n=r(tce());function r(o){return o&&o.__esModule?o:{default:o}}const i=n;t.default=i,e.exports=i}(Th,Th.exports)),Th.exports}var rce=nce();const uY=om(rce),ice=({employees:e})=>{const[n,r]=I.useState(1),[i,o]=I.useState(!0),a=Object.keys(e).map(C=>({id:C,...e[C]}));I.useEffect(()=>{a.length>0&&o(!1)},[a]);const l=(n-1)*20,g=a.slice(l,l+20),u=C=>{console.log("Editing employee:",C)},d=C=>{console.log("Deleting employee:",C)};return ye.jsxs("div",{className:"p-4",children:[ye.jsx("div",{className:"flex items-center gap-4 h-10 mb-4",children:ye.jsx("h2",{className:"text-xl font-semibold",children:"Employees"})}),i?ye.jsx("div",{className:"flex justify-center items-center w-full",children:ye.jsx(Jm,{size:"large"})}):ye.jsxs(ye.Fragment,{children:[ye.jsx("ul",{className:"grid grid-cols-[repeat(auto-fit,minmax(250px,1fr))] gap-4 mb-4",children:g.map(C=>ye.jsxs("li",{className:"p-4 rounded-lg shadow-md bg-white",children:[ye.jsxs("div",{className:"flex justify-between items-center",children:[ye.jsx("strong",{children:C.name}),ye.jsx(Xm,{menu:{items:[{key:"edit",label:ye.jsxs("span",{children:[ye.jsx(Wb,{}),"Edit"]}),onClick:()=>u(C)},{key:"delete",label:ye.jsxs("span",{style:{color:"red"},children:[ye.jsx(m1,{}),"Delete"]}),onClick:()=>d(C)}]},trigger:["click"],children:ye.jsx(uY,{className:"cursor-pointer text-md"})})]}),ye.jsxs("div",{className:"flex mt-1 items-center",children:[ye.jsx(ese,{color:"primary",fontSize:"small"}),ye.jsx("p",{className:"text-sm ml-2 text-gray-500 overflow-scroll",children:C.email})]}),ye.jsxs("div",{className:"flex items-center",children:[ye.jsx(ose,{color:"primary",fontSize:"small"}),ye.jsx("p",{className:"text-sm ml-2 text-gray-500 overflow-scroll",children:C.phone||"No phone"})]})]},C.id))}),ye.jsx(f1,{current:n,total:a.length,pageSize:20,onChange:C=>r(C),className:"text-center",showSizeChanger:!1})]})]})},oce=({deviceTypes:e})=>{const[n,r]=I.useState(1),[i,o]=I.useState(!0),a=Object.keys(e).map(C=>({id:C,...e[C]}));I.useEffect(()=>{a.length>0&&o(!1)},[a]);const l=(n-1)*20,g=a.slice(l,l+20),u=C=>{console.log("Editing device type:",C)},d=C=>{console.log("Deleting device type:",C)};return ye.jsxs("div",{className:"p-4",children:[ye.jsx("div",{className:"flex items-center gap-4 h-10 mb-4",children:ye.jsx("h2",{className:"text-xl font-semibold",children:"Device Types"})}),i?ye.jsx("div",{className:"flex justify-center items-center w-full",children:ye.jsx(Jm,{size:"large"})}):ye.jsxs(ye.Fragment,{children:[ye.jsx("ul",{className:"grid grid-cols-[repeat(auto-fit,minmax(300px,1fr))] gap-4 mb-4",children:g.map(C=>ye.jsxs("li",{className:"p-4 rounded-lg shadow-md bg-white",children:[ye.jsxs("div",{className:"flex justify-between items-center",children:[ye.jsx("strong",{children:C.name}),ye.jsx(Xm,{menu:{items:[{key:"edit",label:ye.jsxs("span",{children:[ye.jsx(Wb,{}),"Edit"]}),onClick:()=>u(C)},{key:"delete",label:ye.jsxs("span",{style:{color:"red"},children:[ye.jsx(m1,{}),"Delete"]}),onClick:()=>d(C)}]},trigger:["click"],children:ye.jsx(uY,{className:"cursor-pointer text-md"})})]}),ye.jsxs("div",{className:"flex mt-1 items-center",children:[ye.jsx(rse,{color:"primary",fontSize:"small"}),ye.jsx("p",{className:"text-sm ml-2 text-gray-500",children:C.short_id})]}),ye.jsxs("div",{className:"flex items-center",children:[ye.jsx(qle,{color:"primary",fontSize:"small"}),ye.jsxs("p",{className:"text-sm ml-2 text-gray-500",children:["Total Devices: ",C.total_devices]})]})]},C.id))}),ye.jsx(f1,{current:n,total:a.length,pageSize:20,onChange:C=>r(C),className:"text-center",showSizeChanger:!1})]})]})},ace=()=>{const[e,t]=I.useState(!1),[n,r]=I.useState([]),[i,o]=I.useState({}),[a,l]=I.useState({}),g=ru(),u=()=>{t(C=>!C)},d=async()=>{try{await lL(pm),id.success("Logout successful!"),g("/login")}catch(C){id.error(C.message)}};return I.useEffect(()=>{const C=uy(Cy,"devices"),f=dy(C,W=>{const J={id:W.key,...W.val()};r(H=>[J,...H])}),m=Iy(C,W=>{r(J=>J.filter(H=>H.id!==W.key))}),b=uy(Cy,"employees"),p=dy(b,W=>{o(J=>({...J,[W.key]:W.val()}))}),y=Iy(b,W=>{o(J=>{const H={...J};return delete H[W.key],H})}),S=uy(Cy,"device_types"),v=dy(S,W=>{l(J=>({...J,[W.key]:W.val()}))}),B=Iy(S,W=>{l(J=>{const H={...J};return delete H[W.key],H})});return()=>{f(),m(),p(),y(),v(),B()}},[]),ye.jsxs("div",{className:"min-h-screen bg-gray-100 flex",children:[ye.jsx(gse,{isSidebarOpen:e,toggleSidebar:u}),ye.jsxs("div",{className:"flex-grow",children:[ye.jsx(Eie,{handleLogout:d,isSidebarOpen:e,toggleSidebar:u}),ye.jsxs(EV,{children:[ye.jsx(Js,{path:"/devices",element:ye.jsx(WW,{devices:n,employees:i})}),ye.jsx(Js,{path:"/devices/:id",element:ye.jsx(Ege,{devices:n,deviceTypes:a,employees:i,className:!0})}),ye.jsx(Js,{path:"/employees",element:ye.jsx(ice,{employees:i})}),ye.jsx(Js,{path:"/types",element:ye.jsx(oce,{deviceTypes:a})}),ye.jsx(Js,{path:"/",element:ye.jsx(WW,{devices:n,employees:i})})," "]})]})]})},{Title:lce,Text:sce}=dd,gce=()=>{const[e,t]=I.useState(""),[n,r]=I.useState(""),[i,o]=I.useState(""),[a,l]=I.useState(!1),g=ru(),u=async()=>{l(!0);try{const f=await eL(pm,n,i);await rL(f.user,{displayName:e}),id.success("Signup successful!"),g("/login")}catch(f){id.error(f.message)}finally{l(!1)}},d=f=>{f.key==="Enter"&&document.getElementById("email").focus()},C=f=>{f.key==="Enter"&&document.getElementById("password").focus()};return ye.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-100",children:ye.jsxs(DI,{className:"w-96 border-2 border-black shadow-lg bg-white p-6",children:[ye.jsx(lce,{level:2,className:"text-black uppercase tracking-wide",children:"Sign Up"}),ye.jsx("div",{className:"my-4",children:ye.jsx(Ms,{prefix:ye.jsx($re,{className:"mr-2"}),placeholder:"Enter your username",className:"border-black border-2 text-black",value:e,onChange:f=>t(f.target.value),onKeyDown:d})}),ye.jsx("div",{className:"my-4",children:ye.jsx(Ms,{prefix:ye.jsx(Dx,{className:"mr-2"}),id:"email",placeholder:"Enter your email",className:"border-black border-2 text-black",value:n,onChange:f=>r(f.target.value),onKeyDown:C})}),ye.jsx("div",{className:"my-4",children:ye.jsx(Ms.Password,{id:"password",prefix:ye.jsx(zx,{className:"mr-2"}),placeholder:"Enter your password",className:"border-black border-2 text-black",value:i,onChange:f=>o(f.target.value)})}),ye.jsx(da,{type:"primary",block:!0,className:"bg-black border-black text-white hover:bg-gray-800",onClick:u,loading:a,disabled:a,children:"Sign Up"}),ye.jsxs("div",{className:"text-center mt-4",children:[ye.jsx(sce,{children:"Already have an account? "}),ye.jsx(Fp,{to:"/login",className:"text-blue-600",children:"Login"})]})]})})},cce=()=>{const[e,t]=I.useState(!1),[n,r]=I.useState(!0);return I.useEffect(()=>{const i=aL(pm,o=>{t(!!o),r(!1)});return()=>i()},[]),n?ye.jsx("div",{className:"flex items-center justify-center h-screen",children:ye.jsx(Jm,{size:"large"})}):ye.jsx(dE,{children:ye.jsxs(EV,{children:[ye.jsx(Js,{path:"/",element:e?ye.jsx(xC,{to:"/devices"}):ye.jsx(xC,{to:"/login"})}),ye.jsx(Js,{path:"/login",element:e?ye.jsx(xC,{to:"/devices"}):ye.jsx(Yie,{})}),ye.jsx(Js,{path:"/signup",element:e?ye.jsx(xC,{to:"/devices"}):ye.jsx(gce,{})}),ye.jsx(Js,{path:"/*",element:e?ye.jsx(ace,{}):ye.jsx(xC,{to:"/login"})})]})})};$Y.createRoot(document.getElementById("root")).render(ye.jsx(I.StrictMode,{children:ye.jsx(cce,{})}));export{ud as _,fe as a,uce as c,om as g};
